<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kill Bill invoice API Documentation">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
      <title>Kill Bill</title>
      <style media="screen">
        .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #D0D5DD;
}
.highlight .sr {
  color: #FDA29B;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #FEC84B;
}
.highlight .cm {
  color: #84ADFF;
}
.highlight .cp {
  color: #84ADFF;
}
.highlight .c1 {
  color: #84ADFF;
}
.highlight .cs {
  color: #84ADFF;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #84ADFF;
}
.highlight .err {
  color: #FE6099;
}
.highlight .gr {
  color: #FE6099;
}
.highlight .gt {
  color: #FE6099;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #84ADFF;
}
.highlight .kd {
  color: #84ADFF;
}
.highlight .kr {
  color: #84ADFF;
}
.highlight .no {
  color: #84ADFF;
}
.highlight .kt {
  color: #84ADFF;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #FDA29B;
}
.highlight .s2 {
  color: #FDA29B;
}
.highlight .sb {
  color: #FDA29B;
}
.highlight .sh {
  color: #FDA29B;
}
.highlight .si {
  color: #FDA29B;
}
.highlight .sx {
  color: #FDA29B;
}
.highlight .s1 {
  color: #FDA29B;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #FDA29B;
}
.highlight .na {
  color: #6CE9A6;
}
.highlight .nc {
  color: #6CE9A6;
}
.highlight .nd {
  color: #6CE9A6;
}
.highlight .ne {
  color: #6CE9A6;
}
.highlight .nf, .highlight .fm {
  color: #6CE9A6;
}
.highlight .vc {
  color: #D0D5DD;
}
.highlight .nn {
  color: #D0D5DD;
}
.highlight .ni {
  color: #D0D5DD;
}
.highlight .bp {
  color: #D0D5DD;
}
.highlight .vg {
  color: #D0D5DD;
}
.highlight .vi {
  color: #D0D5DD;
}
.highlight .nv, .highlight .vm {
  color: #D0D5DD;
}
.highlight .w {
  color: #D0D5DD;
}
.highlight {
  color: #D0D5DD;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #D0D5DD;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ow {
  color: #84ADFF;
}
.highlight .nt {
  color: #84ADFF;
}
.highlight .k, .highlight .kv {
  color: #84ADFF;
}
.highlight .kn {
  color: #84ADFF;
}
.highlight .kp {
  color: #84ADFF;
}
.highlight .o {
  color: #84ADFF;
}
      </style>
      <style media="print">
        * {
          -webkit-transition:none!important;
          transition:none!important;
        }
        .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
      </style>
      <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
      <link href="stylesheets/print.css" rel="stylesheet" media="print" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  </head>

  <body data-languages="[&quot;shell&quot;,&quot;java&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;,&quot;php&quot;]">
    <div class="loader-wrapper">
      <div id="loading"></div>
    </div>
    <header class="header sticky" id="header">
      <div class="header__logo-wrapper">
        <a href="/"  aria-label="Kill Bill logo" class="header__logo"></a>
        <label class="header__theme-switch theme-switch"></label>
      </div>
      
      <div class="header__sidebar-toggler">
        <svg class="hamburger" xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="currentColor">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 7C20.75 7.41421 20.4142 7.75 20 7.75L4 7.75C3.58579 7.75 3.25 7.41421 3.25 7C3.25 6.58579 3.58579 6.25 4 6.25L20 6.25C20.4142 6.25 20.75 6.58579 20.75 7Z" fill=""/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 12C20.75 12.4142 20.4142 12.75 20 12.75L4 12.75C3.58579 12.75 3.25 12.4142 3.25 12C3.25 11.5858 3.58579 11.25 4 11.25L20 11.25C20.4142 11.25 20.75 11.5858 20.75 12Z" fill=""/>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.75 17C20.75 17.4142 20.4142 17.75 20 17.75L4 17.75C3.58579 17.75 3.25 17.4142 3.25 17C3.25 16.5858 3.58579 16.25 4 16.25L20 16.25C20.4142 16.25 20.75 16.5858 20.75 17Z" fill=""/>
        </svg>
      </div>

      <div class="header__search-wrapper">
        <div class="header__search">
          <div id="docsearch" style="height: 43px; display: flex; align-items: center; width: 100%;">
          </div>
        </div>

          <div class="lang-selector">
            <label>
              <select class="lang-selector__select">
                  <option data-language-name="shell" value="shell">shell</option>
                  <option data-language-name="java" value="java">java</option>
                  <option data-language-name="ruby" value="ruby">ruby</option>
                  <option data-language-name="python" value="python">python</option>
                  <option data-language-name="javascript" value="javascript">javascript</option>
                  <option data-language-name="php" value="php">php</option>
              </select>
            </label>
            <div class="lang-selector__list">
                  <a href="#" class="lang-selector__link" data-language-name="shell">shell</a>
                  <a href="#" class="lang-selector__link" data-language-name="java">java</a>
                  <a href="#" class="lang-selector__link" data-language-name="ruby">ruby</a>
                  <a href="#" class="lang-selector__link" data-language-name="python">python</a>
                  <a href="#" class="lang-selector__link" data-language-name="javascript">javascript</a>
                  <a href="#" class="lang-selector__link" data-language-name="php">php</a>
            </div>
          </div>
      </div>
    </header>
    <main class="page sidebar-show">
      <div class="page__sidebar">
        <div class="page__sidebar-toggle">
          <svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.33316 10.6665L1.6665 5.99992L6.33316 1.33325" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <nav class="site-navigator">
          <ul class="site-navigator__menu">
              <li>
                <a href="index.html" class="site-navigator__item site-navigator__menu-item" data-title="Using Kill Bill APIs">
                  <span>Using Kill Bill APIs</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#introduction" class="site-navigator__item site-navigator__submenu-item" data-title="Introduction">
                          <span>Introduction</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#authentication-and-rbac" class="site-navigator__item site-navigator__submenu-item" data-title="Authentication and RBAC">
                          <span>Authentication and RBAC</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#multi-tenancy" class="site-navigator__item site-navigator__submenu-item" data-title="Multi-Tenancy">
                          <span>Multi-Tenancy</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#resource-ids-and-external-keys" class="site-navigator__item site-navigator__submenu-item" data-title="Resource IDs and External Keys">
                          <span>Resource IDs and External Keys</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#pagination" class="site-navigator__item site-navigator__submenu-item" data-title="Pagination">
                          <span>Pagination</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-and-history" class="site-navigator__item site-navigator__submenu-item" data-title="Audit and History">
                          <span>Audit and History</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#versioning" class="site-navigator__item site-navigator__submenu-item" data-title="Versioning">
                          <span>Versioning</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#kill-bill-server" class="site-navigator__item site-navigator__submenu-item" data-title="Kill Bill Server">
                                  <span>Kill Bill Server</span>
                                </a>
                              </li>
                              <li>
                                <a href="#client-libraries" class="site-navigator__item site-navigator__submenu-item" data-title="Client Libraries">
                                  <span>Client Libraries</span>
                                </a>
                              </li>
                              <li>
                                <a href="#plugins" class="site-navigator__item site-navigator__submenu-item" data-title="Plugins">
                                  <span>Plugins</span>
                                </a>
                              </li>
                              <li>
                                <a href="#kpm" class="site-navigator__item site-navigator__submenu-item" data-title="KPM">
                                  <span>KPM</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#errors" class="site-navigator__item site-navigator__submenu-item" data-title="Errors">
                          <span>Errors</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#additional-resources" class="site-navigator__item site-navigator__submenu-item" data-title="Additional Resources">
                          <span>Additional Resources</span>
                        </a>

                      </li>
                  </ul>
              </li>
              <li>
                <a href="tenant.html" class="site-navigator__item site-navigator__menu-item" data-title="Tenant">
                  <span>Tenant</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#tenant-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Tenant Resource">
                          <span>Tenant Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tenant-2" class="site-navigator__item site-navigator__submenu-item" data-title="Tenant">
                          <span>Tenant</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#create-a-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Create a tenant">
                                  <span>Create a tenant</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-tenant-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a tenant by id">
                                  <span>Retrieve a tenant by id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-tenant-by-its-api-key" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a tenant by its API key">
                                  <span>Retrieve a tenant by its API key</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tenant-key-value-pairs" class="site-navigator__item site-navigator__submenu-item" data-title="Tenant Key-Value Pairs">
                          <span>Tenant Key-Value Pairs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-a-per-tenant-user-key-value" class="site-navigator__item site-navigator__submenu-item" data-title="Add a per tenant user key/value">
                                  <span>Add a per tenant user key/value</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-per-tenant-user-key-value" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a per tenant user key value">
                                  <span>Retrieve a per tenant user key value</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-a-per-tenant-user-key-value" class="site-navigator__item site-navigator__submenu-item" data-title="Delete a per tenant user key/value">
                                  <span>Delete a per tenant user key/value</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-per-tenant-keys-and-values-based-on-a-key-prefix" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve per tenant keys and values based on a key prefix">
                                  <span>Retrieve per tenant keys and values based on a key prefix</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#push-notifications" class="site-navigator__item site-navigator__submenu-item" data-title="Push Notifications">
                          <span>Push Notifications</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#register-a-push-notification" class="site-navigator__item site-navigator__submenu-item" data-title="Register a push notification">
                                  <span>Register a push notification</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-registered-push-notification" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a registered push notification">
                                  <span>Retrieve a registered push notification</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-a-registered-push-notification" class="site-navigator__item site-navigator__submenu-item" data-title="Delete a registered push notification">
                                  <span>Delete a registered push notification</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#system-properties-configuration" class="site-navigator__item site-navigator__submenu-item" data-title="System Properties Configuration">
                          <span>System Properties Configuration</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-a-per-tenant-system-properties-configuration" class="site-navigator__item site-navigator__submenu-item" data-title="Add a per tenant system properties configuration">
                                  <span>Add a per tenant system properties configuration</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-per-tenant-system-properties-configuration" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a per tenant system properties configuration">
                                  <span>Retrieve a per tenant system properties configuration</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-a-per-tenant-system-properties-configuration" class="site-navigator__item site-navigator__submenu-item" data-title="Delete a per tenant system properties configuration">
                                  <span>Delete a per tenant system properties configuration</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#plugin-configuration" class="site-navigator__item site-navigator__submenu-item" data-title="Plugin Configuration">
                          <span>Plugin Configuration</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-a-per-tenant-configuration-for-a-plugin" class="site-navigator__item site-navigator__submenu-item" data-title="Add a per tenant configuration for a plugin">
                                  <span>Add a per tenant configuration for a plugin</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-per-tenant-configuration-for-a-plugin" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a per tenant configuration for a plugin">
                                  <span>Retrieve a per tenant configuration for a plugin</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-a-per-tenant-configuration-for-a-plugin" class="site-navigator__item site-navigator__submenu-item" data-title="Delete a per tenant configuration for a plugin">
                                  <span>Delete a per tenant configuration for a plugin</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#payment-state-machines" class="site-navigator__item site-navigator__submenu-item" data-title="Payment State Machines">
                          <span>Payment State Machines</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-a-per-tenant-payment-state-machine-for-a-plugin" class="site-navigator__item site-navigator__submenu-item" data-title="Add a per tenant payment state machine for a plugin">
                                  <span>Add a per tenant payment state machine for a plugin</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-per-tenant-payment-state-machine-for-a-plugin" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a per tenant payment state machine for a plugin">
                                  <span>Retrieve a per tenant payment state machine for a plugin</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-a-per-tenant-payment-state-machine-for-a-plugin" class="site-navigator__item site-navigator__submenu-item" data-title="Delete a per tenant payment state machine for a plugin">
                                  <span>Delete a per tenant payment state machine for a plugin</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="catalog.html" class="site-navigator__item site-navigator__menu-item" data-title="Catalog">
                  <span>Catalog</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#catalog-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Catalog Resource">
                          <span>Catalog Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#catalogvalidation-resource" class="site-navigator__item site-navigator__submenu-item" data-title="CatalogValidation Resource">
                          <span>CatalogValidation Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#catalog-2" class="site-navigator__item site-navigator__submenu-item" data-title="Catalog">
                          <span>Catalog</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#upload-a-catalog-as-xml" class="site-navigator__item site-navigator__submenu-item" data-title="Upload a catalog as XML">
                                  <span>Upload a catalog as XML</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-the-catalog-as-xml" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the catalog as XML">
                                  <span>Retrieve the catalog as XML</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-the-catalog-as-json" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the catalog as JSON">
                                  <span>Retrieve the catalog as JSON</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-list-of-catalog-versions" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a list of catalog versions">
                                  <span>Retrieve a list of catalog versions</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-available-base-plans" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve available base plans">
                                  <span>Retrieve available base plans</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-available-add-ons-for-a-given-product" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve available add-ons for a given product">
                                  <span>Retrieve available add-ons for a given product</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-all-versions-of-a-per-tenant-catalog" class="site-navigator__item site-navigator__submenu-item" data-title="Delete all versions of a per tenant catalog">
                                  <span>Delete all versions of a per tenant catalog</span>
                                </a>
                              </li>
                              <li>
                                <a href="#validate-a-catalog-xml" class="site-navigator__item site-navigator__submenu-item" data-title="Validate a catalog XML">
                                  <span>Validate a catalog XML</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#subscription-info" class="site-navigator__item site-navigator__submenu-item" data-title="Subscription info">
                          <span>Subscription info</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-the-phase-for-a-given-subscription-and-date" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the phase for a given subscription and date">
                                  <span>Retrieve the phase for a given subscription and date</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-the-plan-for-a-given-subscription-and-date" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the plan for a given subscription and date">
                                  <span>Retrieve the plan for a given subscription and date</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-the-pricelist-for-a-given-subscription-and-date" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the priceList for a given subscription and date">
                                  <span>Retrieve the priceList for a given subscription and date</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-product-for-a-given-subscription-and-date" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve product for a given subscription and date">
                                  <span>Retrieve product for a given subscription and date</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#simple-plan" class="site-navigator__item site-navigator__submenu-item" data-title="Simple Plan">
                          <span>Simple Plan</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-a-simple-plan" class="site-navigator__item site-navigator__submenu-item" data-title="Add a simple plan">
                                  <span>Add a simple plan</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="account.html" class="site-navigator__item site-navigator__menu-item" data-title="Account">
                  <span>Account</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#account-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Account Resource">
                          <span>Account Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#accounts" class="site-navigator__item site-navigator__submenu-item" data-title="Accounts">
                          <span>Accounts</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#create-an-account" class="site-navigator__item site-navigator__submenu-item" data-title="Create an Account">
                                  <span>Create an Account</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-an-account-by-its-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve an Account by its ID">
                                  <span>Retrieve an Account by its ID</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-an-account-by-its-external-key" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve an Account by its external key">
                                  <span>Retrieve an Account by its external key</span>
                                </a>
                              </li>
                              <li>
                                <a href="#update-an-account" class="site-navigator__item site-navigator__submenu-item" data-title="Update an Account">
                                  <span>Update an Account</span>
                                </a>
                              </li>
                              <li>
                                <a href="#close-account" class="site-navigator__item site-navigator__submenu-item" data-title="Close account">
                                  <span>Close account</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#list-and-search" class="site-navigator__item site-navigator__submenu-item" data-title="List and Search">
                          <span>List and Search</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#list-accounts" class="site-navigator__item site-navigator__submenu-item" data-title="List accounts">
                                  <span>List accounts</span>
                                </a>
                              </li>
                              <li>
                                <a href="#search-accounts" class="site-navigator__item site-navigator__submenu-item" data-title="Search accounts">
                                  <span>Search accounts</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#email" class="site-navigator__item site-navigator__submenu-item" data-title="Email">
                          <span>Email</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-account-email" class="site-navigator__item site-navigator__submenu-item" data-title="Add account email">
                                  <span>Add account email</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-emails" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account emails">
                                  <span>Retrieve account emails</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-email" class="site-navigator__item site-navigator__submenu-item" data-title="Delete email">
                                  <span>Delete email</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Bundle">
                          <span>Bundle</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-bundles-for-account" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve bundles for account">
                                  <span>Retrieve bundles for account</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-paginated-bundles-for-account" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve paginated bundles for account">
                                  <span>Retrieve paginated bundles for account</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Invoice">
                          <span>Invoice</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-account-invoices" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account invoices">
                                  <span>Retrieve account invoices</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-paginated-account-invoices" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve paginated account invoices">
                                  <span>Retrieve paginated account invoices</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#payment" class="site-navigator__item site-navigator__submenu-item" data-title="Payment">
                          <span>Payment</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#trigger-a-payment-for-all-unpaid-invoices" class="site-navigator__item site-navigator__submenu-item" data-title="Trigger a payment for all unpaid invoices">
                                  <span>Trigger a payment for all unpaid invoices</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-invoice-payments" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account invoice payments">
                                  <span>Retrieve account invoice payments</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-payments" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account payments">
                                  <span>Retrieve account payments</span>
                                </a>
                              </li>
                              <li>
                                <a href="#trigger-a-payment-authorization-purchase-or-credit" class="site-navigator__item site-navigator__submenu-item" data-title="Trigger a payment (authorization, purchase or credit)">
                                  <span>Trigger a payment (authorization, purchase or credit)</span>
                                </a>
                              </li>
                              <li>
                                <a href="#trigger-a-payment-authorization-purchase-or-credit-using-the-account-external-key" class="site-navigator__item site-navigator__submenu-item" data-title="Trigger a payment (authorization, purchase or credit) using the account external key">
                                  <span>Trigger a payment (authorization, purchase or credit) using the account external key</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#payment-method" class="site-navigator__item site-navigator__submenu-item" data-title="Payment Method">
                          <span>Payment Method</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-a-payment-method" class="site-navigator__item site-navigator__submenu-item" data-title="Add a payment method">
                                  <span>Add a payment method</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-payment-methods" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account payment methods">
                                  <span>Retrieve account payment methods</span>
                                </a>
                              </li>
                              <li>
                                <a href="#set-the-default-payment-method" class="site-navigator__item site-navigator__submenu-item" data-title="Set the default payment method">
                                  <span>Set the default payment method</span>
                                </a>
                              </li>
                              <li>
                                <a href="#refresh-account-payment-methods" class="site-navigator__item site-navigator__submenu-item" data-title="Refresh account payment methods">
                                  <span>Refresh account payment methods</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#overdue" class="site-navigator__item site-navigator__submenu-item" data-title="Overdue">
                          <span>Overdue</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-overdue-state-for-account" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve overdue state for account">
                                  <span>Retrieve overdue state for account</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#blocking-state" class="site-navigator__item site-navigator__submenu-item" data-title="Blocking State">
                          <span>Blocking State</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#blocking-state-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Blocking State Resource">
                                  <span>Blocking State Resource</span>
                                </a>
                              </li>
                              <li>
                                <a href="#block-an-account" class="site-navigator__item site-navigator__submenu-item" data-title="Block an account">
                                  <span>Block an account</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-blocking-states-for-account" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve blocking states for account">
                                  <span>Retrieve blocking states for account</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#hierarchical-accounts" class="site-navigator__item site-navigator__submenu-item" data-title="Hierarchical Accounts">
                          <span>Hierarchical Accounts</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#list-child-accounts" class="site-navigator__item site-navigator__submenu-item" data-title="List child accounts">
                                  <span>List child accounts</span>
                                </a>
                              </li>
                              <li>
                                <a href="#transfer-a-given-child-credit-to-the-parent-level" class="site-navigator__item site-navigator__submenu-item" data-title="Transfer a given child credit to the parent level">
                                  <span>Transfer a given child credit to the parent level</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-account" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to account">
                                  <span>Add custom fields to account</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-all-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve all custom fields">
                                  <span>Retrieve all custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account custom fields">
                                  <span>Retrieve account custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-an-account" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for an account">
                                  <span>Modify custom fields for an account</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-account" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from account">
                                  <span>Remove custom fields from account</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tags" class="site-navigator__item site-navigator__submenu-item" data-title="Tags">
                          <span>Tags</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-tags-to-account" class="site-navigator__item site-navigator__submenu-item" data-title="Add tags to account">
                                  <span>Add tags to account</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-all-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve all tags">
                                  <span>Retrieve all tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account tags">
                                  <span>Retrieve account tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-tags-from-account" class="site-navigator__item site-navigator__submenu-item" data-title="Remove tags from account">
                                  <span>Remove tags from account</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve audit logs">
                                  <span>Retrieve audit logs</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-audit-logs-with-history" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account audit logs with history">
                                  <span>Retrieve account audit logs with history</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-email-audit-logs-with-history" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account email audit logs with history">
                                  <span>Retrieve account email audit logs with history</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-blocking-state-audit-logs-with-history" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve blocking state audit logs with history">
                                  <span>Retrieve blocking state audit logs with history</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-account-timeline" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve account timeline">
                                  <span>Retrieve account timeline</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="payment-method.html" class="site-navigator__item site-navigator__menu-item" data-title="Payment Method">
                  <span>Payment Method</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#payment-method-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Payment Method Resource">
                          <span>Payment Method Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#plugin-details-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Plugin Details Resource">
                          <span>Plugin Details Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#payment-methods" class="site-navigator__item site-navigator__submenu-item" data-title="Payment Methods">
                          <span>Payment Methods</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-a-payment-method-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a payment method by id">
                                  <span>Retrieve a payment method by id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-payment-method-by-external-key" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a payment method by external key">
                                  <span>Retrieve a payment method by external key</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-a-payment-method" class="site-navigator__item site-navigator__submenu-item" data-title="Delete a payment method">
                                  <span>Delete a payment method</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#list-and-search" class="site-navigator__item site-navigator__submenu-item" data-title="List and Search">
                          <span>List and Search</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#list-payment-methods" class="site-navigator__item site-navigator__submenu-item" data-title="List payment methods">
                                  <span>List payment methods</span>
                                </a>
                              </li>
                              <li>
                                <a href="#search-payment-methods" class="site-navigator__item site-navigator__submenu-item" data-title="Search payment methods">
                                  <span>Search payment methods</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-a-payment-method" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to a payment method">
                                  <span>Add custom fields to a payment method</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-payment-method-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment method custom fields">
                                  <span>Retrieve payment method custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-payment-method" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for payment method">
                                  <span>Modify custom fields for payment method</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-payment-method" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from payment method">
                                  <span>Remove custom fields from payment method</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-payment-method-audit-logs-with-history-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment method audit logs with history by id">
                                  <span>Retrieve payment method audit logs with history by id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="subscription.html" class="site-navigator__item site-navigator__menu-item" data-title="Subscription">
                  <span>Subscription</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#subscription-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Subscription Resource">
                          <span>Subscription Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#subscriptionevent-resource" class="site-navigator__item site-navigator__submenu-item" data-title="SubscriptionEvent Resource">
                          <span>SubscriptionEvent Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#subscriptions" class="site-navigator__item site-navigator__submenu-item" data-title="Subscriptions">
                          <span>Subscriptions</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#create-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Create a subscription">
                                  <span>Create a subscription</span>
                                </a>
                              </li>
                              <li>
                                <a href="#create-a-subscription-with-addon-products" class="site-navigator__item site-navigator__submenu-item" data-title="Create a subscription with addon products">
                                  <span>Create a subscription with addon products</span>
                                </a>
                              </li>
                              <li>
                                <a href="#create-multiple-subscriptions-with-addon-products" class="site-navigator__item site-navigator__submenu-item" data-title="Create multiple subscriptions with addon products">
                                  <span>Create multiple subscriptions with addon products</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-subscription-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a subscription by id">
                                  <span>Retrieve a subscription by id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-subscription-by-key" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a subscription by key">
                                  <span>Retrieve a subscription by key</span>
                                </a>
                              </li>
                              <li>
                                <a href="#update-the-bcd-associated-with-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Update the BCD associated with a subscription">
                                  <span>Update the BCD associated with a subscription</span>
                                </a>
                              </li>
                              <li>
                                <a href="#update-the-subscription-quantity" class="site-navigator__item site-navigator__submenu-item" data-title="Update the subscription quantity">
                                  <span>Update the subscription quantity</span>
                                </a>
                              </li>
                              <li>
                                <a href="#change-subscription-plan" class="site-navigator__item site-navigator__submenu-item" data-title="Change subscription plan">
                                  <span>Change subscription plan</span>
                                </a>
                              </li>
                              <li>
                                <a href="#undo-a-pending-change-plan-on-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Undo a pending change plan on a subscription">
                                  <span>Undo a pending change plan on a subscription</span>
                                </a>
                              </li>
                              <li>
                                <a href="#cancel-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Cancel a subscription">
                                  <span>Cancel a subscription</span>
                                </a>
                              </li>
                              <li>
                                <a href="#un-cancel-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Un-cancel a subscription">
                                  <span>Un-cancel a subscription</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#blocking-state" class="site-navigator__item site-navigator__submenu-item" data-title="Blocking State">
                          <span>Blocking State</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#block-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Block a subscription">
                                  <span>Block a subscription</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to subscription">
                                  <span>Add custom fields to subscription</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-subscription-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve subscription custom fields">
                                  <span>Retrieve subscription custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for a subscription">
                                  <span>Modify custom fields for a subscription</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from subscription">
                                  <span>Remove custom fields from subscription</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tags" class="site-navigator__item site-navigator__submenu-item" data-title="Tags">
                          <span>Tags</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-tags-to-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Add tags to subscription">
                                  <span>Add tags to subscription</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-subscription-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve subscription tags">
                                  <span>Retrieve subscription tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-tags-from-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Remove tags from subscription">
                                  <span>Remove tags from subscription</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-subscription-audit-logs-with-history-by-subscription-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve subscription audit logs with history by subscription id">
                                  <span>Retrieve subscription audit logs with history by subscription id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-subscription-event-audit-logs-with-history-by-subscription-event-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve subscription event audit logs with history by subscription event id">
                                  <span>Retrieve subscription event audit logs with history by subscription event id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="bundle.html" class="site-navigator__item site-navigator__menu-item" data-title="Bundle">
                  <span>Bundle</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#bundle-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Bundle Resource">
                          <span>Bundle Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#bundle-2" class="site-navigator__item site-navigator__submenu-item" data-title="Bundle">
                          <span>Bundle</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-a-bundle-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a bundle by id">
                                  <span>Retrieve a bundle by id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-bundle-by-external-key" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a bundle by external key">
                                  <span>Retrieve a bundle by external key</span>
                                </a>
                              </li>
                              <li>
                                <a href="#update-a-bundle-external-key" class="site-navigator__item site-navigator__submenu-item" data-title="Update a bundle external key">
                                  <span>Update a bundle external key</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#transfer" class="site-navigator__item site-navigator__submenu-item" data-title="Transfer">
                          <span>Transfer</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#transfer-a-bundle-to-another-account" class="site-navigator__item site-navigator__submenu-item" data-title="Transfer a bundle to another account">
                                  <span>Transfer a bundle to another account</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#blocking-state" class="site-navigator__item site-navigator__submenu-item" data-title="Blocking State">
                          <span>Blocking State</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#pause-a-bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Pause a bundle">
                                  <span>Pause a bundle</span>
                                </a>
                              </li>
                              <li>
                                <a href="#resume-a-bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Resume a bundle">
                                  <span>Resume a bundle</span>
                                </a>
                              </li>
                              <li>
                                <a href="#block-a-bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Block a bundle">
                                  <span>Block a bundle</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to bundle">
                                  <span>Add custom fields to bundle</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-bundle-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve bundle custom fields">
                                  <span>Retrieve bundle custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-a-bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for a bundle">
                                  <span>Modify custom fields for a bundle</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from bundle">
                                  <span>Remove custom fields from bundle</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tags" class="site-navigator__item site-navigator__submenu-item" data-title="Tags">
                          <span>Tags</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-tags-to-bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Add tags to bundle">
                                  <span>Add tags to bundle</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-bundle-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve bundle tags">
                                  <span>Retrieve bundle tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-tags-from-bundle" class="site-navigator__item site-navigator__submenu-item" data-title="Remove tags from bundle">
                                  <span>Remove tags from bundle</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-bundle-audit-logs-with-history-by-bundle-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve bundle audit logs with history by bundle id">
                                  <span>Retrieve bundle audit logs with history by bundle id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#list-search" class="site-navigator__item site-navigator__submenu-item" data-title="List/Search">
                          <span>List/Search</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#list-bundles" class="site-navigator__item site-navigator__submenu-item" data-title="List bundles">
                                  <span>List bundles</span>
                                </a>
                              </li>
                              <li>
                                <a href="#search-bundles" class="site-navigator__item site-navigator__submenu-item" data-title="Search bundles">
                                  <span>Search bundles</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="#invoice" class="site-navigator__item site-navigator__menu-item" data-title="Invoice">
                  <span>Invoice</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#invoice-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Invoice Resource">
                          <span>Invoice Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#invoicedryrun-resource" class="site-navigator__item site-navigator__submenu-item" data-title="InvoiceDryRun Resource">
                          <span>InvoiceDryRun Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#invoice-2" class="site-navigator__item site-navigator__submenu-item" data-title="Invoice">
                          <span>Invoice</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#trigger-an-invoice-run" class="site-navigator__item site-navigator__submenu-item" data-title="Trigger an invoice run">
                                  <span>Trigger an invoice run</span>
                                </a>
                              </li>
                              <li>
                                <a href="#create-a-migration-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Create a migration invoice">
                                  <span>Create a migration invoice</span>
                                </a>
                              </li>
                              <li>
                                <a href="#create-external-charge-s" class="site-navigator__item site-navigator__submenu-item" data-title="Create external charge(s)">
                                  <span>Create external charge(s)</span>
                                </a>
                              </li>
                              <li>
                                <a href="#create-tax-items" class="site-navigator__item site-navigator__submenu-item" data-title="Create tax items">
                                  <span>Create tax items</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-an-invoice-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve an invoice by id">
                                  <span>Retrieve an invoice by id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-an-invoice-by-number" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve an invoice by number">
                                  <span>Retrieve an invoice by number</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-an-invoice-by-invoice-item-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve an invoice by invoice item id">
                                  <span>Retrieve an invoice by invoice item id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#render-an-invoice-as-html" class="site-navigator__item site-navigator__submenu-item" data-title="Render an invoice as HTML">
                                  <span>Render an invoice as HTML</span>
                                </a>
                              </li>
                              <li>
                                <a href="#change-invoice-status-from-draft-to-committed" class="site-navigator__item site-navigator__submenu-item" data-title="Change invoice status from DRAFT to COMMITTED">
                                  <span>Change invoice status from DRAFT to COMMITTED</span>
                                </a>
                              </li>
                              <li>
                                <a href="#void-an-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Void an invoice">
                                  <span>Void an invoice</span>
                                </a>
                              </li>
                              <li>
                                <a href="#adjust-an-invoice-item" class="site-navigator__item site-navigator__submenu-item" data-title="Adjust an invoice item">
                                  <span>Adjust an invoice item</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-a-cba-item" class="site-navigator__item site-navigator__submenu-item" data-title="Delete a CBA item">
                                  <span>Delete a CBA item</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#dry-run" class="site-navigator__item site-navigator__submenu-item" data-title="Dry-run">
                          <span>Dry-run</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#generate-a-dry-run-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Generate a dry run invoice">
                                  <span>Generate a dry run invoice</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#invoice-groups" class="site-navigator__item site-navigator__submenu-item" data-title="Invoice Groups">
                          <span>Invoice Groups</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#trigger-an-invoice-group-run" class="site-navigator__item site-navigator__submenu-item" data-title="Trigger an invoice group run">
                                  <span>Trigger an invoice group run</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-an-invoice-group" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve an invoice group">
                                  <span>Retrieve an invoice group</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#payments" class="site-navigator__item site-navigator__submenu-item" data-title="Payments">
                          <span>Payments</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#trigger-a-payment-for-an-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Trigger a payment for an invoice">
                                  <span>Trigger a payment for an invoice</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-payments-associated-with-an-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payments associated with an invoice">
                                  <span>Retrieve payments associated with an invoice</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-an-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to an invoice">
                                  <span>Add custom fields to an invoice</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-invoice-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice custom fields">
                                  <span>Retrieve invoice custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-an-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for an invoice">
                                  <span>Modify custom fields for an invoice</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from invoice">
                                  <span>Remove custom fields from invoice</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tags" class="site-navigator__item site-navigator__submenu-item" data-title="Tags">
                          <span>Tags</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-tags-to-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Add tags to invoice">
                                  <span>Add tags to invoice</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-invoice-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice tags">
                                  <span>Retrieve invoice tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-tags-from-invoice" class="site-navigator__item site-navigator__submenu-item" data-title="Remove tags from invoice">
                                  <span>Remove tags from invoice</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#translation" class="site-navigator__item site-navigator__submenu-item" data-title="Translation">
                          <span>Translation</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#upload-the-catalog-translation-for-the-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Upload the catalog translation for the tenant">
                                  <span>Upload the catalog translation for the tenant</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-the-catalog-translation-for-the-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the catalog translation for the tenant">
                                  <span>Retrieve the catalog translation for the tenant</span>
                                </a>
                              </li>
                              <li>
                                <a href="#upload-the-invoice-translation-for-the-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Upload the invoice translation for the tenant">
                                  <span>Upload the invoice translation for the tenant</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-the-invoice-translation-for-the-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the invoice translation for the tenant">
                                  <span>Retrieve the invoice translation for the tenant</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#template" class="site-navigator__item site-navigator__submenu-item" data-title="Template">
                          <span>Template</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#upload-the-manualpay-invoice-template-for-the-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Upload the manualPay invoice template for the tenant">
                                  <span>Upload the manualPay invoice template for the tenant</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-the-manualpay-invoice-template-for-the-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the manualPay invoice template for the tenant">
                                  <span>Retrieve the manualPay invoice template for the tenant</span>
                                </a>
                              </li>
                              <li>
                                <a href="#upload-the-invoice-template-for-the-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Upload the invoice template for the tenant">
                                  <span>Upload the invoice template for the tenant</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-the-invoice-template-for-the-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve the invoice template for the tenant">
                                  <span>Retrieve the invoice template for the tenant</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#example" class="site-navigator__item site-navigator__submenu-item" data-title="Example">
                          <span>Example</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-invoice-audit-logs-with-history-by-invoice-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice audit logs with history by invoice id">
                                  <span>Retrieve invoice audit logs with history by invoice id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#list-and-search" class="site-navigator__item site-navigator__submenu-item" data-title="List and Search">
                          <span>List and Search</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#list-invoices" class="site-navigator__item site-navigator__submenu-item" data-title="List invoices">
                                  <span>List invoices</span>
                                </a>
                              </li>
                              <li>
                                <a href="#search-invoices" class="site-navigator__item site-navigator__submenu-item" data-title="Search invoices">
                                  <span>Search invoices</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="invoice-item.html" class="site-navigator__item site-navigator__menu-item" data-title="Invoice Item">
                  <span>Invoice Item</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#invoiceitem-resource" class="site-navigator__item site-navigator__submenu-item" data-title="InvoiceItem Resource">
                          <span>InvoiceItem Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-an-invoice-item" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to an invoice item">
                                  <span>Add custom fields to an invoice item</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-invoice-item-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice item custom fields">
                                  <span>Retrieve invoice item custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-an-invoice-item" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for an invoice item">
                                  <span>Modify custom fields for an invoice item</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-invoice-item" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from invoice item">
                                  <span>Remove custom fields from invoice item</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tags" class="site-navigator__item site-navigator__submenu-item" data-title="Tags">
                          <span>Tags</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-tags-to-invoice-item" class="site-navigator__item site-navigator__submenu-item" data-title="Add tags to invoice item">
                                  <span>Add tags to invoice item</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-invoice-item-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice item tags">
                                  <span>Retrieve invoice item tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-tags-from-invoice-item" class="site-navigator__item site-navigator__submenu-item" data-title="Remove tags from invoice item">
                                  <span>Remove tags from invoice item</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-invoice-item-audit-logs-with-history-by-invoice-item-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice item audit logs with history by invoice item id">
                                  <span>Retrieve invoice item audit logs with history by invoice item id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="credit.html" class="site-navigator__item site-navigator__menu-item" data-title="Credit">
                  <span>Credit</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#credit-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Credit Resource">
                          <span>Credit Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#credit-2" class="site-navigator__item site-navigator__submenu-item" data-title="Credit">
                          <span>Credit</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#create-credits" class="site-navigator__item site-navigator__submenu-item" data-title="Create credits">
                                  <span>Create credits</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-credit-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a credit by id">
                                  <span>Retrieve a credit by id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="payment.html" class="site-navigator__item site-navigator__menu-item" data-title="Payment">
                  <span>Payment</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#payment-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Payment Resource">
                          <span>Payment Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#payments" class="site-navigator__item site-navigator__submenu-item" data-title="Payments">
                          <span>Payments</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#capture-an-existing-authorization-using-paymentid" class="site-navigator__item site-navigator__submenu-item" data-title="Capture an existing authorization [using paymentId]">
                                  <span>Capture an existing authorization [using paymentId]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#capture-an-existing-authorization-using-paymentexternalkey" class="site-navigator__item site-navigator__submenu-item" data-title="Capture an existing authorization [using paymentExternalKey]">
                                  <span>Capture an existing authorization [using paymentExternalKey]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-payment-using-paymentid" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a payment [using paymentId]">
                                  <span>Retrieve a payment [using paymentId]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-payment-using-paymentexternalkey" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a payment [using paymentExternalKey]">
                                  <span>Retrieve a payment [using paymentExternalKey]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#complete-an-existing-transaction-using-paymentid" class="site-navigator__item site-navigator__submenu-item" data-title="Complete an existing transaction [using paymentId]">
                                  <span>Complete an existing transaction [using paymentId]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#complete-an-existing-transaction-using-paymentexternalkey" class="site-navigator__item site-navigator__submenu-item" data-title="Complete an existing transaction [using paymentExternalKey]">
                                  <span>Complete an existing transaction [using paymentExternalKey]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#void-an-existing-payment-using-paymentid" class="site-navigator__item site-navigator__submenu-item" data-title="Void an existing payment [using paymentId]">
                                  <span>Void an existing payment [using paymentId]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#void-an-existing-payment-using-paymentexternalkey" class="site-navigator__item site-navigator__submenu-item" data-title="Void an existing payment [using paymentExternalKey]">
                                  <span>Void an existing payment [using paymentExternalKey]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#record-a-chargeback-using-paymentid" class="site-navigator__item site-navigator__submenu-item" data-title="Record a chargeback [using paymentId]">
                                  <span>Record a chargeback [using paymentId]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#record-a-chargeback-using-paymentexternalkey" class="site-navigator__item site-navigator__submenu-item" data-title="Record a chargeback [using paymentExternalKey]">
                                  <span>Record a chargeback [using paymentExternalKey]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#record-a-chargeback-reversal-using-paymentid" class="site-navigator__item site-navigator__submenu-item" data-title="Record a chargeback reversal [using paymentId]">
                                  <span>Record a chargeback reversal [using paymentId]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#record-a-chargeback-reversal-using-paymentexternalkey" class="site-navigator__item site-navigator__submenu-item" data-title="Record a chargeback reversal [using paymentExternalKey]">
                                  <span>Record a chargeback reversal [using paymentExternalKey]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#refund-an-existing-payment-using-paymentid" class="site-navigator__item site-navigator__submenu-item" data-title="Refund an existing payment [using paymentId]">
                                  <span>Refund an existing payment [using paymentId]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#refund-an-existing-payment-using-paymentexternalkey" class="site-navigator__item site-navigator__submenu-item" data-title="Refund an existing payment [using paymentExternalKey]">
                                  <span>Refund an existing payment [using paymentExternalKey]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#cancel-a-scheduled-payment-attempt-retry-using-transactionid" class="site-navigator__item site-navigator__submenu-item" data-title="Cancel a scheduled payment attempt retry [using transactionId]">
                                  <span>Cancel a scheduled payment attempt retry [using transactionId]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#cancel-a-scheduled-payment-attempt-retry-using-transactionexternalkey" class="site-navigator__item site-navigator__submenu-item" data-title="Cancel a scheduled payment attempt retry [using transactionExternalKey]">
                                  <span>Cancel a scheduled payment attempt retry [using transactionExternalKey]</span>
                                </a>
                              </li>
                              <li>
                                <a href="#combo-api-to-create-a-new-payment-transaction-on-a-existing-or-not-account" class="site-navigator__item site-navigator__submenu-item" data-title="Combo api to create a new payment transaction on a existing (or not) account">
                                  <span>Combo api to create a new payment transaction on a existing (or not) account</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to payment">
                                  <span>Add custom fields to payment</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-payment-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment custom fields">
                                  <span>Retrieve payment custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-a-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for a payment">
                                  <span>Modify custom fields for a payment</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-a-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from a payment">
                                  <span>Remove custom fields from a payment</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tags" class="site-navigator__item site-navigator__submenu-item" data-title="Tags">
                          <span>Tags</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-tags-to-a-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Add tags to a payment">
                                  <span>Add tags to a payment</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-payment-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment tags">
                                  <span>Retrieve payment tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-tags-from-a-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Remove tags from a payment">
                                  <span>Remove tags from a payment</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-payment-audit-logs-with-history-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment audit logs with history by id">
                                  <span>Retrieve payment audit logs with history by id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-payment-attempt-audit-logs-with-history-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment attempt audit logs with history by id">
                                  <span>Retrieve payment attempt audit logs with history by id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#list-and-search" class="site-navigator__item site-navigator__submenu-item" data-title="List and Search">
                          <span>List and Search</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#get-payments" class="site-navigator__item site-navigator__submenu-item" data-title="Get payments">
                                  <span>Get payments</span>
                                </a>
                              </li>
                              <li>
                                <a href="#search-payments" class="site-navigator__item site-navigator__submenu-item" data-title="Search payments">
                                  <span>Search payments</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="payment-transaction.html" class="site-navigator__item site-navigator__menu-item" data-title="Payment Transaction">
                  <span>Payment Transaction</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#payment-transaction-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Payment Transaction Resource">
                          <span>Payment Transaction Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#payment-transactions" class="site-navigator__item site-navigator__submenu-item" data-title="Payment Transactions">
                          <span>Payment Transactions</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-a-payment-by-transaction-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a payment by transaction id">
                                  <span>Retrieve a payment by transaction id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-payment-transaction-by-external-key" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a payment transaction by external key">
                                  <span>Retrieve a payment transaction by external key</span>
                                </a>
                              </li>
                              <li>
                                <a href="#mark-a-pending-payment-transaction-as-succeeded-or-failed" class="site-navigator__item site-navigator__submenu-item" data-title="Mark a pending payment transaction as succeeded or failed">
                                  <span>Mark a pending payment transaction as succeeded or failed</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-payment-transaction-audit-logs-with-history-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment transaction audit logs with history by id">
                                  <span>Retrieve payment transaction audit logs with history by id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-payment-transaction" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to payment transaction">
                                  <span>Add custom fields to payment transaction</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-payment-transaction-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment transaction custom fields">
                                  <span>Retrieve payment transaction custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-a-payment-transaction" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for a payment transaction">
                                  <span>Modify custom fields for a payment transaction</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-a-payment-transaction" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from a payment transaction">
                                  <span>Remove custom fields from a payment transaction</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tags" class="site-navigator__item site-navigator__submenu-item" data-title="Tags">
                          <span>Tags</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-tags-to-a-payment-transaction" class="site-navigator__item site-navigator__submenu-item" data-title="Add tags to a payment transaction">
                                  <span>Add tags to a payment transaction</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-payment-transaction-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve payment transaction tags">
                                  <span>Retrieve payment transaction tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-tags-from-a-payment-transaction" class="site-navigator__item site-navigator__submenu-item" data-title="Remove tags from a payment transaction">
                                  <span>Remove tags from a payment transaction</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="invoice-payment.html" class="site-navigator__item site-navigator__menu-item" data-title="Invoice Payment">
                  <span>Invoice Payment</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#invoice-payment-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Invoice Payment Resource">
                          <span>Invoice Payment Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#invoice-payment-transaction-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Invoice Payment Transaction Resource">
                          <span>Invoice Payment Transaction Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#invoice-payment-2" class="site-navigator__item site-navigator__submenu-item" data-title="Invoice Payment">
                          <span>Invoice Payment</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-a-payment-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a payment by id">
                                  <span>Retrieve a payment by id</span>
                                </a>
                              </li>
                              <li>
                                <a href="#refund-a-payment-and-adjust-the-invoice-if-needed" class="site-navigator__item site-navigator__submenu-item" data-title="Refund a payment, and adjust the invoice if needed">
                                  <span>Refund a payment, and adjust the invoice if needed</span>
                                </a>
                              </li>
                              <li>
                                <a href="#record-a-chargeback" class="site-navigator__item site-navigator__submenu-item" data-title="Record a chargeback">
                                  <span>Record a chargeback</span>
                                </a>
                              </li>
                              <li>
                                <a href="#record-a-chargeback-reversal" class="site-navigator__item site-navigator__submenu-item" data-title="Record a chargeback reversal">
                                  <span>Record a chargeback reversal</span>
                                </a>
                              </li>
                              <li>
                                <a href="#complete-an-existing-transaction" class="site-navigator__item site-navigator__submenu-item" data-title="Complete an existing transaction">
                                  <span>Complete an existing transaction</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Fields">
                          <span>Custom Fields</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-custom-fields-to-invoice-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Add custom fields to invoice payment">
                                  <span>Add custom fields to invoice payment</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-invoice-payment-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice payment custom fields">
                                  <span>Retrieve invoice payment custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#modify-custom-fields-for-an-invoice-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Modify custom fields for an invoice payment">
                                  <span>Modify custom fields for an invoice payment</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-custom-fields-from-an-invoice-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Remove custom fields from an invoice payment">
                                  <span>Remove custom fields from an invoice payment</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tags" class="site-navigator__item site-navigator__submenu-item" data-title="Tags">
                          <span>Tags</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#add-tags-to-an-invoice-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Add tags to an invoice payment">
                                  <span>Add tags to an invoice payment</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-invoice-payment-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice payment tags">
                                  <span>Retrieve invoice payment tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-tags-from-an-invoice-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Remove tags from an invoice payment">
                                  <span>Remove tags from an invoice payment</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-invoice-payment-audit-logs-with-history-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve invoice payment audit logs with history by id">
                                  <span>Retrieve invoice payment audit logs with history by id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="usage.html" class="site-navigator__item site-navigator__menu-item" data-title="Usage">
                  <span>Usage</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#usage-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Usage Resource">
                          <span>Usage Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#usage-2" class="site-navigator__item site-navigator__submenu-item" data-title="Usage">
                          <span>Usage</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#record-usage-for-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Record usage for a subscription">
                                  <span>Record usage for a subscription</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-usage-for-a-subscription-and-unit-type" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve usage for a subscription and unit type">
                                  <span>Retrieve usage for a subscription and unit type</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-usage-for-a-subscription" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve usage for a subscription">
                                  <span>Retrieve usage for a subscription</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="custom-field.html" class="site-navigator__item site-navigator__menu-item" data-title="Custom Field">
                  <span>Custom Field</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#custom-field-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Custom Field  Resource">
                          <span>Custom Field  Resource</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#list-all-custom-fields" class="site-navigator__item site-navigator__submenu-item" data-title="List all custom fields">
                                  <span>List all custom fields</span>
                                </a>
                              </li>
                              <li>
                                <a href="#search-custom-fields-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Search custom fields by ID">
                                  <span>Search custom fields by ID</span>
                                </a>
                              </li>
                              <li>
                                <a href="#search-custom-fields-by-resource-type-name-and-optional-value" class="site-navigator__item site-navigator__submenu-item" data-title="Search custom fields by resource type, name, and optional value">
                                  <span>Search custom fields by resource type, name, and optional value</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-custom-field-audit-logs-with-history-by-custom-field-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve custom field audit logs with history by custom field id">
                                  <span>Retrieve custom field audit logs with history by custom field id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="tag.html" class="site-navigator__item site-navigator__menu-item" data-title="Tag">
                  <span>Tag</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#tag-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Tag  Resource">
                          <span>Tag  Resource</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#list-all-tags" class="site-navigator__item site-navigator__submenu-item" data-title="List all tags">
                                  <span>List all tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#search-tags" class="site-navigator__item site-navigator__submenu-item" data-title="Search tags">
                                  <span>Search tags</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-tag-audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve tag audit logs">
                                  <span>Retrieve tag audit logs</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="tag-definition.html" class="site-navigator__item site-navigator__menu-item" data-title="Tag Definition">
                  <span>Tag Definition</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#tag-definition-resource" class="site-navigator__item site-navigator__submenu-item" data-title="Tag Definition Resource">
                          <span>Tag Definition Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#tag-definition-2" class="site-navigator__item site-navigator__submenu-item" data-title="Tag Definition">
                          <span>Tag Definition</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#create-a-tag-definition" class="site-navigator__item site-navigator__submenu-item" data-title="Create a tag definition">
                                  <span>Create a tag definition</span>
                                </a>
                              </li>
                              <li>
                                <a href="#list-tag-definitions" class="site-navigator__item site-navigator__submenu-item" data-title="List tag definitions">
                                  <span>List tag definitions</span>
                                </a>
                              </li>
                              <li>
                                <a href="#retrieve-a-tag-definition-by-its-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve a tag definition by its ID">
                                  <span>Retrieve a tag definition by its ID</span>
                                </a>
                              </li>
                              <li>
                                <a href="#delete-a-tag-definition" class="site-navigator__item site-navigator__submenu-item" data-title="Delete a tag definition">
                                  <span>Delete a tag definition</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#audit-logs" class="site-navigator__item site-navigator__submenu-item" data-title="Audit Logs">
                          <span>Audit Logs</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#retrieve-tag-definition-audit-logs-with-history-by-id" class="site-navigator__item site-navigator__submenu-item" data-title="Retrieve tag definition audit logs with history by id">
                                  <span>Retrieve tag definition audit logs with history by id</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
              <li>
                <a href="admin.html" class="site-navigator__item site-navigator__menu-item" data-title="Admin">
                  <span>Admin</span>
                </a>
                
                  <ul class="site-navigator__submenu">
                      <li class="site-navigator__submenu-container">
                        <a href="#adminpayment-resource" class="site-navigator__item site-navigator__submenu-item" data-title="AdminPayment Resource">
                          <span>AdminPayment Resource</span>
                        </a>

                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#administrative-apis" class="site-navigator__item site-navigator__submenu-item" data-title="Administrative Apis">
                          <span>Administrative Apis</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#trigger-an-invoice-generation-for-all-parked-accounts" class="site-navigator__item site-navigator__submenu-item" data-title="Trigger an invoice generation for all parked accounts">
                                  <span>Trigger an invoice generation for all parked accounts</span>
                                </a>
                              </li>
                              <li>
                                <a href="#update-the-state-of-a-paymenttransaction-and-associated-payment" class="site-navigator__item site-navigator__submenu-item" data-title="Update the state of a paymentTransaction and associated payment">
                                  <span>Update the state of a paymentTransaction and associated payment</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#operational-apis" class="site-navigator__item site-navigator__submenu-item" data-title="Operational Apis">
                          <span>Operational Apis</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#invalidate-a-specific-cache-or-invalidate-all-caches" class="site-navigator__item site-navigator__submenu-item" data-title="Invalidate a specific cache, or invalidate all caches">
                                  <span>Invalidate a specific cache, or invalidate all caches</span>
                                </a>
                              </li>
                              <li>
                                <a href="#invalidate-caches-for-an-account" class="site-navigator__item site-navigator__submenu-item" data-title="Invalidate Caches for an Account">
                                  <span>Invalidate Caches for an Account</span>
                                </a>
                              </li>
                              <li>
                                <a href="#invalidate-caches-for-a-tenant" class="site-navigator__item site-navigator__submenu-item" data-title="Invalidate Caches for a Tenant">
                                  <span>Invalidate Caches for a Tenant</span>
                                </a>
                              </li>
                              <li>
                                <a href="#put-the-host-back-into-rotation" class="site-navigator__item site-navigator__submenu-item" data-title="Put the host back into rotation">
                                  <span>Put the host back into rotation</span>
                                </a>
                              </li>
                              <li>
                                <a href="#remove-a-server-from-the-rotation" class="site-navigator__item site-navigator__submenu-item" data-title="Remove a server from the rotation">
                                  <span>Remove a server from the rotation</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                      <li class="site-navigator__submenu-container">
                        <a href="#low-level-view-apis" class="site-navigator__item site-navigator__submenu-item" data-title="Low Level View Apis">
                          <span>Low Level View Apis</span>
                        </a>

                          <ul class="site-navigator__submenu">
                              <li>
                                <a href="#get-queue-entries" class="site-navigator__item site-navigator__submenu-item" data-title="Get queue entries">
                                  <span>Get queue entries</span>
                                </a>
                              </li>
                          </ul>
                      </li>
                  </ul>
              </li>
          </ul>
            <ul class="site-navigator__footer">
                <li><a href="mailto:support@killbill.io">Report a doc problem </a></li>
            </ul>
        </nav>
      </div>

      <div class="page__content content">
        <h1 id='invoice'>Invoice</h1>
<p>An invoice is a bill provided to a customer for charges that are payable on the customer&#39;s account. A single invoice consolidates charges for all subscriptions held by that customer for a specified time period. Invoices may be set to be paid automatically, or may be paid manually by the customer.</p>

<p>An invoice can be generated manually if there are any outstanding charges. In addition, charges can be explicitly added that will also result in an invoice being generated. Invoices can also be automatically generated by the system when there are existing active subscriptions for the <code>Account</code>. In the latter case, the <code>targetDate</code> will determine up to which point to invoice, and the billing mode (<code>IN_ADVANCE</code> or <code>IN_ARREAR</code>) will determine which period to charge for.</p>

<p>An invoice can have one of the following status values: DRAFT, COMMITTED, or VOID.</p>

<ul>
<li><p>An invoice in DRAFT status is open to receive additional items, and is not considered by the rest of the system when computing account balances or related values.</p></li>
<li><p>A COMMITTED invoice is immutable, and its balance is reflected at the Account level. Payments can only happen against COMMITTED invoices.</p></li>
<li><p>A VOID invoice is ignored by the rest of the system. A DRAFT or COMMITTED invoice may be voided, but only if there are no successful payments against that invoice. Thus before voiding an invoice, any successful payments need to be refunded.</p></li>
</ul>
<h2 id='invoice-resource'>Invoice Resource</h2>
<p>An <code>Invoice</code> resource represents an invoice associated with a specific account. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Sum of all item amounts</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>string</td>
<td>system</td>
<td>Status of the invoice: DRAFT, COMMITTED or VOID</td>
</tr>
<tr>
<td><strong>creditAdj</strong></td>
<td>number</td>
<td>system</td>
<td>Invoice credit (amount that we owe to the customer). It is calculated as the sum of <code>CBA_ADJ</code> invoice items</td>
</tr>
<tr>
<td><strong>refundAdj</strong></td>
<td>number</td>
<td>system</td>
<td>Refund amount associated with an invoice. It is calculated as the sum of all invoice payment amounts of type <code>REFUND</code> and <code>CHARGED_BACK</code>.</td>
</tr>
<tr>
<td><strong>invoiceDate</strong></td>
<td>date</td>
<td>system</td>
<td>Date when this invoice was generated</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>date</td>
<td>user or system</td>
<td>Date up to which the account has been invoiced</td>
</tr>
<tr>
<td><strong>invoiceNumber</strong></td>
<td>number</td>
<td>system</td>
<td>Invoice number</td>
</tr>
<tr>
<td><strong>balance</strong></td>
<td>number</td>
<td>system</td>
<td>Invoice balance (amount that a customer owes as part of an invoice). At a high level, it is calculated as the sum of all item amounts minus the payment amount. See <a href="https://docs.killbill.io/latest/invoice_examples.html#_invoice_balance">Invoice Balance</a> for further details.</td>
</tr>
<tr>
<td><strong>bundleKeys</strong></td>
<td>list</td>
<td>system</td>
<td>List of bundles invoiced. Deprecated.</td>
</tr>
<tr>
<td><strong>credits</strong></td>
<td>list</td>
<td>system</td>
<td>List of credits associated with this invoice. Deprecated.</td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>list</td>
<td>system</td>
<td>List of invoice items on this invoice. See <a href="invoiceitem.html">InvoiceItem</a> resource.</td>
</tr>
<tr>
<td><strong>trackingIds</strong></td>
<td>list</td>
<td>user</td>
<td>List of usage tracking ids associated with this invoice</td>
</tr>
<tr>
<td><strong>isParentInvoice</strong></td>
<td>boolean</td>
<td>system</td>
<td>If true, this invoice is the parent in the hierarchical model</td>
</tr>
<tr>
<td><strong>parentInvoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>In the hierarchical model, UUID of the parent invoice</td>
</tr>
<tr>
<td><strong>parentAccountId</strong></td>
<td>string</td>
<td>system</td>
<td>In the hierarchical model, UUID of the parent account</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>Array of audit log records for this invoice</td>
</tr>
</tbody></table>
<h2 id='invoicedryrun-resource'>InvoiceDryRun Resource</h2>
<p>An <code>InvoiceDryRun</code> object encapsulates parameters that can be used to generate an invoice preview. Such an invoice preview can be generated to determine what would be in the invoice scheduled on a certain date, or if certain changes are made. A dry run has no actual effect on the system. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>dryRunType</strong></td>
<td>string</td>
<td>user</td>
<td>Category for this dry run (see notes below).</td>
</tr>
<tr>
<td><strong>dryRunAction</strong></td>
<td>string</td>
<td>user</td>
<td>Action on which the dry run should be based, if any (see notes below). Applicable only for <code>dryRunType=SUBSCRIPTION_ACTION</code>.</td>
</tr>
<tr>
<td><strong>phaseType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the plan phase (see notes below).</td>
</tr>
<tr>
<td><strong>productName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the product subscribed</td>
</tr>
<tr>
<td><strong>productCategory</strong></td>
<td>string</td>
<td>user</td>
<td>Product category (see notes below)</td>
</tr>
<tr>
<td><strong>billingPeriod</strong></td>
<td>string</td>
<td>user</td>
<td>Billing period (see notes below)</td>
</tr>
<tr>
<td><strong>priceListName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the applicable price list</td>
</tr>
<tr>
<td><strong>subscriptiontId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for a subscription. If specified, only this subscription is used for the dry run</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for a bundle. If specified, only this subscription is used for the dry run</td>
</tr>
<tr>
<td><strong>effectiveDate</strong></td>
<td>date</td>
<td>user</td>
<td>The date the change takes effect</td>
</tr>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>user</td>
<td>The billing policy (see notes below)</td>
</tr>
<tr>
<td><strong>priceOverrides</strong></td>
<td>list</td>
<td>user</td>
<td>List of prices if this subscription has price overrides</td>
</tr>
<tr>
<td><strong>planName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the plan subscribed</td>
</tr>
</tbody></table>

<p><strong>dryRunType</strong>: Possible values are:</p>

<ul>
<li><p>TARGET_DATE -- Preview the invoice as of the given target date </p></li>
<li><p>UPCOMING_INVOICE -- Preview the next scheduled invoice </p></li>
<li><p>SUBSCRIPTION_ACTION -- Preview the invoice that would be generated if the specified <strong>dryRunAction</strong> is taken.</p></li>
</ul>

<p><strong>dryRunAction</strong>: Possible values are: START_BILLING, CHANGE (of <code>Plan</code>), or STOP_BILLING</p>

<p><strong>phaseType</strong>: Possible values are: TRIAL, DISCOUNT, FIXEDTERM, or EVERGREEN</p>

<p><strong>productCategory</strong>: Possible values are BASE, ADD_ON, or STANDALONE</p>

<p><strong>billingPeriod</strong>: Possible values are DAILY, WEEKLY, BIWEEKLY, THIRTY_DAYS, THIRTY_ONE_DAYS, SIXTY_DAYS, NINETY_DAYS, MONTHLY, BIMESTRIAL (bimonthly), QUARTERLY, TRIANNUAL, BIANNUAL, ANNUAL, SESQUIENNIAL, BIENNIAL, TRIENNIAL, or NO_BILLING_PERIOD. See <a href="https://github.com/killbill/killbill-api/blob/master/src/main/java/org/killbill/billing/catalog/api/BillingPeriod.java">BillingPeriod</a>.</p>

<p><strong>billingPolicy</strong>: Possible values are START_OF_TERM, END_OF_TERM, or IMMEDIATE</p>

<p>Note that either the <code>planName</code> or a combination of <code>productName</code>, <code>productCategory</code> and <code>billingPeriod</code> needs to be specified for the <strong>START_BILLING</strong>, <strong>CHANGE</strong> <code>dryRunAction</code>.</p>
<h2 id='invoice-2'>Invoice</h2>
<p>These endpoints provide basic operations on invoices.</p>
<h3 id='trigger-an-invoice-run'>Trigger an invoice run</h3>
<p>Create an invoice run for the associated account. This may result in the creation of a new invoice if there is anything to invoice for, or nothing, if the account is up to date. If an invoice is created, all necessary attributes are determined by the system.</p>

<p>Also refer to our <a href="https://docs.killbill.io/latest/userguide_subscription.html#invoicing-dry-run">subscription manual for more examples</a></p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices?accountId=29fd0a00-f08b-4886-849b-3f4b98c8df27"</span>  
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"34a65013-2dd1-480e-b4b8-7999bb15ebce"</span><span class="o">);</span>
<span class="nc">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2023-07-15"</span><span class="o">);</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="no">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="nc">Invoice</span> <span class="n">invoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createFutureInvoice</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">targetDate</span><span class="o">,</span> <span class="no">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="s2">"2024-12-05"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">trigger_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                               <span class="n">target_date</span><span class="p">,</span> 
                                               <span class="n">user</span><span class="p">,</span> 
                                               <span class="n">reason</span><span class="p">,</span> 
                                               <span class="n">comment</span><span class="p">,</span> 
                                               <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s">'bdbed417-a84b-4303-958c-b88a36807416'</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">create_future_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                 <span class="n">target_date</span><span class="o">=</span><span class="n">target_date</span><span class="p">,</span>
                                 <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                 <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                 <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">b462d167-d9bc-459a-bdb7-23ebf99f5b76</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">targetDate</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">2023-10-21</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">createFutureInvoice</span><span class="p">(</span><span class="nx">accountId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">targetDate</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"d7ec4174-ab07-4e25-a917-ad020b755917"</span><span class="p">;</span>
<span class="nv">$targetDate</span> <span class="o">=</span> <span class="k">new</span> <span class="err">\</span><span class="nf">DateTime</span><span class="p">(</span><span class="s2">"2023-10-21"</span><span class="p">);</span>
<span class="nv">$pluginProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"pluginProperty_example"</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">createFutureInvoice</span><span class="p">(</span><span class="nv">$accountId</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$targetDate</span><span class="p">,</span> <span class="nv">$pluginProperty</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>target date (date up to which the account should be invoiced)</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location item is also returned in the header, giving the UUID of the generated invoice (if any). If there is nothing to invoice for, returns a 404 status code.</p>
<h3 id='create-a-migration-invoice'>Create a migration invoice</h3>
<p>This endpoint is used to insert existing invoices that are being migrated from either a third party system or an in-house billing system into Kill Bill.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/migration/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'[ { "invoiceItemId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "invoiceId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "linkedInvoiceItemId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "itemType": "EXTERNAL_CHARGE", "amount": 10, "rate": 0, "currency": "USD" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/migration/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>  
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"fe1a6f86-9ec5-4ac3-8d39-15f024cc8339"</span><span class="o">);</span>

<span class="nc">BigDecimal</span> <span class="n">chargeAmount</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">;</span>
<span class="nc">InvoiceItem</span> <span class="n">externalCharge</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItem</span><span class="o">();</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setStartDate</span><span class="o">(</span><span class="k">new</span> <span class="nc">LocalDate</span><span class="o">());</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">chargeAmount</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setItemType</span><span class="o">(</span><span class="nc">InvoiceItemType</span><span class="o">.</span><span class="na">EXTERNAL_CHARGE</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="nc">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="nc">InvoiceItems</span> <span class="n">inputInvoice</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItems</span><span class="o">();</span>
<span class="n">inputInvoice</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">externalCharge</span><span class="o">);</span>

<span class="nc">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="nc">Invoice</span> <span class="n">migrationInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createMigrationInvoice</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                             <span class="n">inputInvoice</span><span class="o">,</span> 
                                                             <span class="n">targetDate</span><span class="o">,</span>
                                                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s2">"3a949187-a2a0-46b5-8720-fff8b12eabff"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="s2">"2018-03-15"</span>

<span class="n">invoice_item</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">item_type</span> <span class="o">=</span> <span class="s2">"EXTERNAL_CHARGE"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">invoice_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">invoice_item</span><span class="p">]</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">create_migration_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                        <span class="n">invoice_items</span><span class="p">,</span>
                                                        <span class="n">target_date</span><span class="p">,</span>
                                                        <span class="n">user</span><span class="p">,</span>
                                                        <span class="n">reason</span><span class="p">,</span>
                                                        <span class="n">comment</span><span class="p">,</span>
                                                        <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s">'bdbed417-a84b-4303-958c-b88a36807416'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">item_type</span><span class="o">=</span><span class="s">'EXTERNAL_CHARGE'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'Migration item'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">create_migration_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                    <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                    <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                    <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                    <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">b462d167-d9bc-459a-bdb7-23ebf99f5b76</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">item</span><span class="p">:</span> <span class="nx">InvoiceItem</span> <span class="o">=</span> <span class="p">{</span><span class="na">amount</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">itemType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">EXTERNAL_CHARGE</span><span class="dl">"</span><span class="p">,</span><span class="na">description</span><span class="p">:</span><span class="dl">"</span><span class="s2">a migration item</span><span class="dl">"</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="nx">item</span><span class="p">];</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">createMigrationInvoice</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">accountId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItem</span><span class="p">();</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setAmount</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setItemType</span><span class="p">(</span><span class="s2">"EXTERNAL_CHARGE"</span><span class="p">);</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setDescription</span><span class="p">(</span><span class="s2">"migration item"</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>

<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"f547bda2-ad09-4e79-84c3-9759939496dd"</span><span class="p">;</span>
<span class="nv">$targetDate</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">createMigrationInvoice</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$accountId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$targetDate</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>A List of invoice item resource objects with all fields filled in representing the invoice to be migrated. At least the <code>itemType</code> and <code>amount</code> fields need to be specified. If multiple invoice items are specified, a single invoice is created with all the invoice items.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>target date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location item is also returned in the header, giving the UUID of the generated invoice (if any).</p>
<h3 id='create-external-charge-s'>Create external charge(s)</h3>
<p>Create a charge for a given account. This will result in the creation of a new invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/charges/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'[ { "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "description": "My charge", "amount": 50, "currency": "USD" }]'</span>    <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/charges/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"616789aa-4004-4681-b38c-b95871d534fc"</span><span class="o">);</span>

<span class="nc">InvoiceItem</span> <span class="n">externalCharge</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItem</span><span class="o">();</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"My charge"</span><span class="o">);</span>

<span class="nc">InvoiceItems</span> <span class="n">externalCharges</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItems</span><span class="o">();</span>
<span class="n">externalCharges</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">externalCharge</span><span class="o">);</span>

<span class="nc">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">Boolean</span> <span class="n">autoCommit</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">InvoiceItem</span><span class="o">&gt;</span> <span class="n">createdExternalCharges</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createExternalCharges</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                            <span class="n">externalCharges</span><span class="o">,</span> 
                                                                            <span class="n">requestedDate</span><span class="o">,</span>
                                                                            <span class="n">autoCommit</span><span class="o">,</span>
                                                                            <span class="n">pluginProperty</span><span class="o">,</span> 
                                                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_item</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>  <span class="o">=</span> <span class="s2">"83e5e82d-fe72-4873-9b8b-946f4d250b0d"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>      <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>    <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span> <span class="o">=</span> <span class="s1">'My charge'</span>

<span class="n">auto_commit</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">invoice_item</span> <span class="o">=</span> <span class="n">invoice_item</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">auto_commit</span><span class="p">,</span> 
                    <span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s">'bdbed417-a84b-4303-958c-b88a36807416'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'External charge'</span><span class="p">)</span>

<span class="n">invoice_item</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">create_external_charges</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                   <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                   <span class="n">auto_commit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                   <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                   <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                   <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">b462d167-d9bc-459a-bdb7-23ebf99f5b76</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">item</span><span class="p">:</span> <span class="nx">InvoiceItem</span> <span class="o">=</span> <span class="p">{</span><span class="na">amount</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">itemType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">EXTERNAL_CHARGE</span><span class="dl">"</span><span class="p">,</span><span class="na">description</span><span class="p">:</span><span class="dl">"</span><span class="s2">external charge</span><span class="dl">"</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="nx">item</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceItem</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">createExternalCharges</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">accountId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItem</span><span class="p">();</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setAmount</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setItemType</span><span class="p">(</span><span class="s2">"EXTERNAL_CHARGE"</span><span class="p">);</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setDescription</span><span class="p">(</span><span class="s2">"external charge item"</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>

<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"f547bda2-ad09-4e79-84c3-9759939496dd"</span><span class="p">;</span>
<span class="nv">$requestedDate</span> <span class="o">=</span> <span class="k">new</span> <span class="err">\</span><span class="nf">DateTime</span><span class="p">(</span><span class="s2">"2023-09-21"</span><span class="p">);</span>
<span class="nv">$autoCommit</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$pluginProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"pluginProperty_example"</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">createExternalCharges</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$accountId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$requestedDate</span><span class="p">,</span> <span class="nv">$autoCommit</span><span class="p">,</span> <span class="nv">$pluginProperty</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3aaadeeb-5ffe-4226-a8b6-57723f1f8c12"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c6fe2246-62e2-450d-b9fc-a27003771535"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EXTERNAL_CHARGE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My charge"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>Request Body</strong></p>

<p>A List of invoice item resource objects  with at least the <code>amount</code> attribute populated. If multiple invoice items are specified, a single invoice is created with all the invoice items. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
<tr>
<td><strong>autoCommit</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the resulting invoice should be COMMITTED.</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an invoice item object.</p>
<h3 id='create-tax-items'>Create tax items</h3>
<p>Normally, tax items are added to an invoice by a plugin, which intercepts the invoice during its creation and adds the required tax items on the fly. However, sometimes you may want to add tax items directly. This API adds a tax item to an account, which will result in the creation of a new invoice. Also, it is worth noting, that the tax items are not linked to any existing <code>invoiceItems</code>. Consequently, specifying fields like <code>linkedInvoiceItemId</code>, <code>subscriptionId</code> while creating the tax item has no effect. These fields do not get saved on the database and will not be returned in subsequent <code>GET</code> requests.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/taxes/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'[ { "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "amount": 50, "currency": "USD" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/taxes/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"eb36c64c-b575-4538-b26f-a89c473984da"</span><span class="o">);</span>
<span class="no">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"28723cec-5510-49be-9e87-3a36d246f25e"</span><span class="o">);</span>

<span class="nc">InvoiceItem</span> <span class="n">taxItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItem</span><span class="o">();</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="nc">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setBundleId</span><span class="o">(</span><span class="n">bundleId</span><span class="o">);</span>
<span class="kd">final</span> <span class="nc">InvoiceItems</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItems</span><span class="o">();</span>
<span class="n">input</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">taxItem</span><span class="o">);</span>

<span class="nc">Boolean</span> <span class="n">autoCommit</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="nc">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">InvoiceItem</span><span class="o">&gt;</span> <span class="n">createdTaxItems</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createTaxItems</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                     <span class="n">input</span><span class="o">,</span>
                                                                     <span class="n">autoCommit</span><span class="o">,</span>
                                                                     <span class="n">requestedDate</span><span class="o">,</span>
                                                                     <span class="n">pluginProperty</span><span class="o">,</span>
                                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_item</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>  <span class="o">=</span> <span class="s2">"3a949187-a2a0-46b5-8720-fff8b12eabff"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>      <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>    <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span> <span class="o">=</span> <span class="s1">'Tax item'</span>

<span class="n">auto_commit</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">invoice_item</span> <span class="o">=</span> <span class="n">invoice_item</span><span class="p">.</span><span class="nf">create_tax_item</span><span class="p">(</span><span class="n">auto_commit</span><span class="p">,</span>
                              <span class="n">user</span><span class="p">,</span>
                              <span class="n">reason</span><span class="p">,</span>
                              <span class="n">comment</span><span class="p">,</span>
                              <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s">'bdbed417-a84b-4303-958c-b88a36807416'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'Tax item'</span><span class="p">)</span>

<span class="n">invoice_item</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">create_tax_items</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                            <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                            <span class="n">auto_commit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                            <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                            <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                            <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">b462d167-d9bc-459a-bdb7-23ebf99f5b76</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">item</span><span class="p">:</span> <span class="nx">InvoiceItem</span> <span class="o">=</span> <span class="p">{</span><span class="na">amount</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="na">itemType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TAX</span><span class="dl">"</span><span class="p">,</span><span class="na">description</span><span class="p">:</span><span class="dl">"</span><span class="s2">a tax item</span><span class="dl">"</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">items</span> <span class="o">=</span> <span class="p">[</span><span class="nx">item</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceItem</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">createTaxItems</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">accountId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$item</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItem</span><span class="p">();</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setAmount</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setItemType</span><span class="p">(</span><span class="s2">"TAX"</span><span class="p">);</span>
<span class="nv">$item</span> <span class="o">-&gt;</span> <span class="nf">setDescription</span><span class="p">(</span><span class="s2">"tax item"</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>

<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"f547bda2-ad09-4e79-84c3-9759939496dd"</span><span class="p">;</span>
<span class="nv">$requestedDate</span> <span class="o">=</span> <span class="k">new</span> <span class="err">\</span><span class="nf">DateTime</span><span class="p">(</span><span class="s2">"2023-09-21"</span><span class="p">);</span>
<span class="nv">$autoCommit</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$pluginProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"pluginProperty_example"</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">createTaxItems</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$accountId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$autoCommit</span><span class="p">,</span> <span class="nv">$requestedDate</span><span class="p">,</span> <span class="nv">$pluginProperty</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e91e8d48-d8de-4931-9758-6cfff86cb2f4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"434dd357-099d-45f8-9b48-79dcd20c61ce"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tax"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>Request Body</strong></p>

<p>A List of invoice item resource objects  with at least the <code>amount</code> attribute populated. If multiple invoice items are specified, a single invoice is created with all the invoice items.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
<tr>
<td><strong>autoCommit</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the resulting invoice should be COMMITTED.</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an invoice item object.</p>
<h3 id='retrieve-an-invoice-by-id'>Retrieve an invoice by id</h3>
<p>Retrieves an invoice based on the <code>invoiceId</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>    
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"922a83f4-ae08-4732-9dd9-35e13c332393"</span><span class="o">);</span>
<span class="nc">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">//  Will include children items</span>

<span class="nc">Invoice</span> <span class="n">invoiceWithItems</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                                 <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                 <span class="nc">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_id</span> <span class="o">=</span> <span class="s2">"5c6083c1-a673-4b67-9b86-74139df50448"</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                                          <span class="n">audit</span><span class="p">,</span>
                                          <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4b16ad29-2f32-4e7e-85f9-99beda4ae7dd'</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fd9df8b8-f845-43a1-8fe8-73a8269c5bcc</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Invoice</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoice</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"0fd7d64a-90d2-4d4d-9123-e9c5c7f36a47"</span><span class="p">;</span>
<span class="nv">$withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoice</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$withChildrenItems</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4bc38bfd-3210-4293-bcfc-7c95b2d1472a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6894"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d7ec4174-ab07-4e25-a917-ad020b755917"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af65fae9-1dd9-4340-87cb-8d2e9d7ed3d8"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4bc38bfd-3210-4293-bcfc-7c95b2d1472a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d7ec4174-ab07-4e25-a917-ad020b755917"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAX"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tax"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items (applicable only in the hierarchical mode if the current invoice corresponds to a parent invoice and isPaymentDelegatedToParent=true).</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='retrieve-an-invoice-by-number'>Retrieve an invoice by number</h3>
<p>Retrieves an invoice based on the <code>invoiceNumber</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/byNumber/{invoiceNumber</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/byNumber/310"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">Integer</span> <span class="n">invoiceNumber</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="nc">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//  Will not include children items</span>

<span class="nc">Invoice</span> <span class="n">invoiceByNumber</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceByNumber</span><span class="o">(</span><span class="n">invoiceNumber</span><span class="o">,</span> 
                                                        <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                        <span class="nc">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_number</span> <span class="o">=</span> <span class="s2">"7318"</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_number</span><span class="p">(</span><span class="n">invoice_number</span><span class="p">,</span>
                                              <span class="n">audit</span><span class="p">,</span>
                                              <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_number</span> <span class="o">=</span> <span class="s">'7452'</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_by_number</span><span class="p">(</span><span class="n">invoice_number</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceNumber</span> <span class="o">=</span> <span class="mi">7463</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Invoice</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceByNumber</span><span class="p">(</span><span class="nx">invoiceNumber</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$invoiceNumber</span> <span class="o">=</span> <span class="mi">7457</span><span class="p">;</span>
<span class="nv">$withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceByNumber</span><span class="p">(</span><span class="nv">$invoiceNumber</span><span class="p">,</span> <span class="nv">$withChildrenItems</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4bc38bfd-3210-4293-bcfc-7c95b2d1472a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6894"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d7ec4174-ab07-4e25-a917-ad020b755917"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af65fae9-1dd9-4340-87cb-8d2e9d7ed3d8"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4bc38bfd-3210-4293-bcfc-7c95b2d1472a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d7ec4174-ab07-4e25-a917-ad020b755917"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAX"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tax"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items (applicable only in the hierarchical mode if the current invoice corresponds to a parent invoice and isPaymentDelegatedToParent=true).</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='retrieve-an-invoice-by-invoice-item-id'>Retrieve an invoice by invoice item id</h3>
<p>Retrieves an invoice based on the <code>invoiceItemId</code> corresponding to an invoice item.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/byItemId/{itemId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/byItemId/3f0aa8f7-ca75-40cc-8c78-15a15cdbb977"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceItemId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"111732ad-196d-423f-8ccd-de44109dc944"</span><span class="o">);</span>
<span class="nc">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//  Will not include children items</span>

<span class="nc">Invoice</span> <span class="n">invoiceByItemId</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceByItemId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">,</span> 
                                                        <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                        <span class="nc">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item_id</span> <span class="o">=</span> <span class="s2">"14b0de07-6634-4e56-9062-156ba8e6c06d"</span>
<span class="n">with_children_items</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_invoice_item_id</span><span class="p">(</span><span class="n">invoice_item_id</span><span class="p">,</span>
                                                       <span class="n">with_children_items</span><span class="p">,</span>
                                                       <span class="n">audit</span><span class="p">,</span>
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_item_id</span> <span class="o">=</span> <span class="s">'5cc1dce5-7f95-4d8e-987b-27ddd9e5b171'</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_by_item_id</span><span class="p">(</span><span class="n">invoice_item_id</span><span class="p">,</span>
                                            <span class="n">with_children_items</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceItemId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ed7e1b5d-ed43-41bf-99ca-85ff2c88462d</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Invoice</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceByItemId</span><span class="p">(</span><span class="nx">invoiceItemId</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$itemId</span> <span class="o">=</span> <span class="s2">"b912e57d-897c-4018-9802-66a030fad55f"</span><span class="p">;</span>
<span class="nv">$withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceByItemId</span><span class="p">(</span><span class="nv">$itemId</span><span class="p">,</span> <span class="nv">$withChildrenItems</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4bc38bfd-3210-4293-bcfc-7c95b2d1472a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6894"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d7ec4174-ab07-4e25-a917-ad020b755917"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"af65fae9-1dd9-4340-87cb-8d2e9d7ed3d8"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4bc38bfd-3210-4293-bcfc-7c95b2d1472a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d7ec4174-ab07-4e25-a917-ad020b755917"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAX"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tax"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-18"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items (applicable only in the hierarchical mode if the current invoice corresponds to a parent invoice and isPaymentDelegatedToParent=true).</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='render-an-invoice-as-html'>Render an invoice as HTML</h3>
<p>This API formats an invoice as an HTML page, that can be displayed or printed for a customer.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/html</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/html"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="nc">String</span> <span class="n">htmlInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceAsHTML</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_id</span> <span class="o">=</span> <span class="s2">"5c6083c1-a673-4b67-9b86-74139df50448"</span>
<span class="n">invoiceHTML</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">as_html</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4b16ad29-2f32-4e7e-85f9-99beda4ae7dd'</span>

<span class="n">invoiceHTML</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_as_html</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fd9df8b8-f845-43a1-8fe8-73a8269c5bcc</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceAsHTML</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"0fd7d64a-90d2-4d4d-9123-e9c5c7f36a47"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceAsHTML</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;html&gt;
    &lt;head&gt;
        &lt;style type="text/css"&gt;
            th {align=left; width=225px; border-bottom: solid 2px black;}
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;invoiceTitle&lt;/h1&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;
                &lt;td width=100px/&gt;
                &lt;td width=225px/&gt;
                &lt;td width=225px/&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td /&gt;
                &lt;td align=right&gt;invoiceDate&lt;/td&gt;
                &lt;td&gt;Jul 20, 2018&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td /&gt;
                &lt;td align=right&gt;invoiceNumber&lt;/td&gt;
                &lt;td&gt;310&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyName&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td align=right&gt;accountOwnerName&lt;/td&gt;
                &lt;td&gt;Another Name&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyAddress&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td&gt;john@127.0.0.1:8080&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyCityProvincePostalCode&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyCountry&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td /&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;companyUrl&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td /&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;invoiceItemBundleName&lt;/td&gt;
                &lt;th&gt;invoiceItemDescription&lt;/td&gt;
                &lt;th&gt;invoiceItemServicePeriod&lt;/td&gt;
                &lt;th&gt;invoiceItemAmount&lt;/td&gt;
            &lt;/tr&gt;

            &lt;tr&gt;
                &lt;td&gt;Adjustment (account credit)&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;Jul 20, 2018 - Jul 20, 2018&lt;/td&gt;
                &lt;td&gt;USD 50.00&lt;/td&gt;
            &lt;/tr&gt;

            &lt;tr&gt;
                &lt;td&gt;example&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;Jul 20, 2018 - Jul 20, 2018&lt;/td&gt;
                &lt;td&gt;USD -50.00&lt;/td&gt;
            &lt;/tr&gt;

            &lt;tr&gt;
                &lt;td colspan=4 /&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;invoiceAmount&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;0.00&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;invoiceAmountPaid&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;0.00&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;invoiceBalance&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an HTML string corresponding to the invoice.</p>
<h3 id='change-invoice-status-from-draft-to-committed'>Change invoice status from DRAFT to COMMITTED</h3>
<p>Commit a DRAFT invoice by changing its status to COMMITTED. The invoice becomes immutable and its balance is now included in account totals.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/commitInvoice</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> PUT <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/commitInvoice"</span>  
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ca09d09a-59b2-4ada-8c15-597c9efde46c"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">commitInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">commit</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
               <span class="n">reason</span><span class="p">,</span> 
               <span class="n">comment</span><span class="p">,</span> 
               <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'18d23ef1-ea82-442d-8602-43305232f3e5'</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">commit_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                          <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                          <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                          <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">926ff247-e220-4cf9-8829-c13e943e3809</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">commitInvoice</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"80bd3bf3-307f-438b-bf7a-7dc5e8addf19"</span><span class="p">;</span>

<span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">commitInvoice</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='void-an-invoice'>Void an invoice</h3>
<p>Change the status of an invoice to VOID. A void invoice is ignored by the rest of the system. There are some restrictions for this operation:</p>

<ul>
<li>We cannot VOID an invoice that was partially or fully paid</li>
<li>We cannot VOID an invoice if it contains positive credit items (<code>CBA_ADJ</code> &gt;0), unless such credit was not used, i.e there is enough credit left on the account.</li>
<li>We cannot VOID an invoice if it was repaired, i.e there exists a <code>REPAIR_ADJ</code> item pointing to an item inside that invoice.</li>
</ul>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/voidInvoice</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> PUT <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/18e9b3d9-9083-4725-9e8a-27d3a57c2e88/voidInvoice"</span>    
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">voidInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s2">"6b877adc-0916-4409-ba95-f4e955772ea6"</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">void</span><span class="p">(</span><span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span>
               <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'18d23ef1-ea82-442d-8602-43305232f3e5'</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">void_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                        <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                        <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                        <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">926ff247-e220-4cf9-8829-c13e943e3809</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">voidInvoice</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"80bd3bf3-307f-438b-bf7a-7dc5e8addf19"</span><span class="p">;</span>

<span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">voidInvoice</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='adjust-an-invoice-item'>Adjust an invoice item</h3>
<p>Adjust the amount for an invoice item. The system adds a new invoice item of type <code>ITEM_ADJ</code> to the invoice. If the invoice was already paid for, the system also adds another invoice item of type <code>CBA_ADJ</code> to adjust the credit amount in the next invoice. See <a href="https://docs.killbill.io/latest/invoice_examples#_invoice_item_adjustment">Invoice Examples</a> for more information.</p>

<p><strong>Notes:</strong> The <code>linkedInvoiceItemId</code> field of the new invoice item points to the id of the invoice item being adjusted.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'{ "invoiceItemId": "903e55d3-8072-47f1-80fc-32857dbdbcc5", "invoiceId": "903e55d3-8072-47f1-80fc-32857dbdbcc5", "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "description": "Free adjustment: good customer", "amount": 50, "currency": "USD"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>    
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"53805dbc-720a-4eaf-9072-ade723ee860f"</span><span class="o">);</span>
<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"4be08988-35a1-4fce-bebc-699af2a95b18"</span><span class="o">);</span>
<span class="no">UUID</span> <span class="n">invoiceItemId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"5f1e9142-b4de-4409-9366-9920cc1683e9"</span><span class="o">);</span>
<span class="nc">BigDecimal</span> <span class="n">adjustedAmount</span> <span class="o">=</span> <span class="nc">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">;</span>

<span class="nc">InvoiceItem</span> <span class="n">adjustmentInvoiceItem</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItem</span><span class="o">();</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setInvoiceId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setInvoiceItemId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">adjustedAmount</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="nc">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>

<span class="nc">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="nc">Invoice</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">adjustInvoiceItem</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                              <span class="n">adjustmentInvoiceItem</span><span class="o">,</span> 
                                              <span class="n">requestedDate</span><span class="o">,</span>
                                              <span class="n">pluginProperty</span><span class="o">,</span>
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_item</span>                 <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>      <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_id</span>      <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_item_id</span> <span class="o">=</span> <span class="s2">"b311f709-ad51-4f67-8722-18ce04334c31"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>          <span class="o">=</span> <span class="mf">100.00</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>        <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span>     <span class="o">=</span> <span class="s1">'Free adjustment: good customer'</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4b16ad29-2f32-4e7e-85f9-99beda4ae7dd'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="s">'bdbed417-a84b-4303-958c-b88a36807416'</span><span class="p">,</span>
                   <span class="n">invoice_id</span><span class="o">=</span><span class="s">'4b16ad29-2f32-4e7e-85f9-99beda4ae7dd'</span><span class="p">,</span>
                   <span class="n">invoice_item_id</span><span class="o">=</span><span class="s">'5cc1dce5-7f95-4d8e-987b-27ddd9e5b171'</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'Free adjustment: good customer'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">adjust_invoice_item</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                               <span class="n">body</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                               <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                               <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">item</span><span class="p">:</span> <span class="nx">InvoiceItem</span> <span class="o">=</span> <span class="p">{</span><span class="na">accountId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">b462d167-d9bc-459a-bdb7-23ebf99f5b76</span><span class="dl">"</span><span class="p">,</span> <span class="na">invoiceId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">4f948961-90a9-427b-bfbf-7583bee86711</span><span class="dl">"</span><span class="p">,</span><span class="na">invoiceItemId</span><span class="p">:</span><span class="dl">"</span><span class="s2">3fd23760-11be-447d-8c91-9a22037ca239</span><span class="dl">"</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">free adjustment, good customer</span><span class="dl">"</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">4f948961-90a9-427b-bfbf-7583bee86711</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">adjustInvoiceItem</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"b7c4ce68-e885-4f8b-8ee3-2eee7b3d8fb7"</span><span class="p">;</span>
<span class="nv">$requestedDate</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">;</span>
<span class="nv">$pluginProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"pluginProperty_example"</span><span class="p">);</span>

<span class="nv">$body</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceItem</span><span class="p">();</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setAmount</span><span class="p">(</span><span class="mi">20</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setAccountId</span><span class="p">(</span><span class="s2">"f547bda2-ad09-4e79-84c3-9759939496dd"</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setInvoiceId</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setInvoiceItemId</span><span class="p">(</span><span class="s2">"00450fb0-25c2-4ad4-ac81-8d3258ec6b25"</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setDescription</span><span class="p">(</span><span class="s2">"good customer - free adjustment"</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">adjustInvoiceItem</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$requestedDate</span><span class="p">,</span> <span class="nv">$pluginProperty</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>An invoice item resource object with at least <code>accountId</code>, <code>invoiceItemId</code>, <code>invoiceId</code>, and <code>amount</code> attributes. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> header containing the invoice id is returned.</p>
<h3 id='delete-a-cba-item'>Delete a CBA item</h3>
<p>Delete a Credit Balance Adjust (<code>CBA_ADJ</code>) invoice item. There are some limitations and side effects with this api:</p>

<p><strong>Deleting a positive <code>CBA_ADJ</code> (credit generation), may lead the system to reclaim portion of the used credit, possibly leaving some invoices with a balance.</strong> </p>

<p>Given an invoice, I1,  where user added some credit ($12), we would see the following items: {<code>CREDIT_ADJ</code>: -12, <code>CBA_ADJ</code>: +12}. Given another invoice, I2, where the system invoiced for a recurring subscription, and where some of this credit was consumed, we would see the following items: {<code>RECURRING</code>: +10, <code>CBA_ADJ</code>: -10}. Deleting the <code>CBA_ADJ</code> from I1, would lead to the following resulting invoices:  I1 {<code>CREDIT_ADJ</code>: 0, <code>CBA_ADJ</code>: 0} and I2 {<code>RECURRING</code>: +10, <code>CBA_ADJ</code>: 0}. The system zeroed-out the credit generation and the part that was used, and as a result I2 would be left with a balance of +10. </p>

<p><strong>Deleting a negative <code>CBA_ADJ</code> would also leave invoice with a balance.</strong> </p>

<p>So deleting the <code>CBA_ADJ</code> from I2 in the example above would lead to the following invoice:  I2 {<code>RECURRING</code>: +10, <code>CBA_ADJ</code>: 0} . </p>

<p><strong>Attempting to delete system generated credit would fail.</strong></p>

<p>In an in-advanced scenario where the system first invoiced for a recurring subscription ($20), and then repaired ($-8) for instance as a result of an early cancelation, we would have the following invoices: I1 {<code>RECURRING</code>: +20} and I2 {<code>REPAIR_ADJ</code>: -8, <code>CBA_ADJ</code>: +8}. Attempting to delete the <code>CBA_ADJ</code> on I2 would fail as the generation of credit was system generated, i.e. it happened as a result of a subscription change.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/{invoiceItemId}/cba</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> DELETE <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/404a98a8-4dd8-4737-a39f-be871e916a8c/a35fb7b5-aec8-489e-aadf-c86107aa1d92/cba?accountId=8785164f-b5d7-4da1-9495-33f5105e8d80"</span>    
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"c0c2d79d-8b2e-4830-a05b-b9a43b38482c"</span><span class="o">);</span>
<span class="no">UUID</span> <span class="n">invoiceItemId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"29a8933a-2e5c-409c-97be-7a5964dbf708"</span><span class="o">);</span>
<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"41e61312-cfb1-4300-afc7-64bc5cb29e85"</span><span class="o">);</span>
<span class="n">invoiceApi</span><span class="o">.</span><span class="na">deleteCBA</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">invoiceItemId</span><span class="o">,</span> <span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_item</span>                 <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>      <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_id</span>      <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_item_id</span> <span class="o">=</span> <span class="s2">"b311f709-ad51-4f67-8722-18ce04334c31"</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span><span class="o">=</span><span class="s">'a493320b-29ab-4228-ad84-58d53e88b73b'</span>
<span class="n">invoice_item_id</span><span class="o">=</span><span class="s">'b3aeb9d7-4501-4285-8071-f5c02f45a659'</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'bdbed417-a84b-4303-958c-b88a36807416'</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">delete_cba</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                      <span class="n">invoice_item_id</span><span class="p">,</span>
                      <span class="n">account_id</span><span class="p">,</span>
                      <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                      <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                      <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">b462d167-d9bc-459a-bdb7-23ebf99f5b76</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">d723f109-7c4d-470e-9267-995610b02b28</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">invoiceItemId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">7b8d4e3e-0fa0-43fc-bac2-4a0147e9a185</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">deleteCBA</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">,</span> <span class="nx">invoiceItemId</span><span class="p">,</span> <span class="nx">accountId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"dff3b38a-4fcd-43f7-8fe9-7dcae2bc8269"</span><span class="p">;</span>
<span class="nv">$invoiceItemId</span> <span class="o">=</span> <span class="s2">"177cba3a-6775-4357-94cc-0f1e51136649"</span><span class="p">;</span>
<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"f547bda2-ad09-4e79-84c3-9759939496dd"</span><span class="p">;</span>

<span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">deleteCBA</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$invoiceItemId</span><span class="p">,</span> <span class="nv">$accountId</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='dry-run'>Dry-run</h2>
<p>In some situations, it is necessary to preview what a given customer will be invoiced for before making changes, or to verify what the system will generate at a future date. Kill Bill provides a dry-run invoice API to accomplish these goals. This API can be used to answer several distinct questions:</p>

<ul>
<li>When is the next upcoming invoice for a given customer, and what will this invoice contain?</li>
<li>When is the next upcoming invoice associated with a given subscription or bundle, and what will this invoice contain?</li>
<li>Given a <code>targetDate</code>, what invoice will the system generate?</li>
<li>Given a change in a subscription, such as a new subscription, change of plan, or cancellation, what invoice will the system generate?</li>
</ul>

<p>A dry run is based on a <a href="invoice.html#invoice-invoicedryrun-resource">dry run resource object</a>.</p>
<h3 id='generate-a-dry-run-invoice'>Generate a dry run invoice</h3>
<p>This endpoint creates a dry-run invoice. Based on its parameters you can obtain answers to the different questions listed above.</p>

<p>Note: This endpoint is rather expensive, as it creates a full invoice run for the designated account, but no invoice will be created or persisted
in the system.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/dryRun</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># For targetDate</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'{ "dryRunType": "TARGET_DATE"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=60a47168-7d36-4380-8ec7-e48cfe4e65d6&amp;targetDate=2022-02-28"</span>   

OR 

<span class="c"># upcoming invoice</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'{ "dryRunType": "UPCOMING_INVOICE"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>   

OR 

<span class="c"># START_BILLING</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'{ "dryRunType": "SUBSCRIPTION_ACTION","dryRunAction":"START_BILLING","planName":"pistol-monthly-notrial"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=b462d167-d9bc-459a-bdb7-23ebf99f5b76"</span>  

OR

<span class="c"># CHANGE</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'{ "dryRunType": "SUBSCRIPTION_ACTION","dryRunAction":"CHANGE","productName":"Standard", "productCategory":"BASE","billingPeriod":"MONTHLY","subscriptionId":"0b9efead-d5e4-40a9-8178-2286dee0fe48","bundleId":" 6ebcc573-c2c4-408a-b5c3-d6ae0dbae233"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span>  

OR

<span class="c"># STOP_BILLING</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'{ "dryRunType": "SUBSCRIPTION_ACTION","dryRunAction":"STOP_BILLING","subscriptionId":"0b9efead-d5e4-40a9-8178-2286dee0fe48","bundleId":"    6ebcc573-c2c4-408a-b5c3-d6ae0dbae233","effectiveDate":"2022-02-10"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span>            
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">DryRunType</span> <span class="n">dryRunType</span> <span class="o">=</span> <span class="nc">DryRunType</span><span class="o">.</span><span class="na">SUBSCRIPTION_ACTION</span><span class="o">;</span>
<span class="nc">SubscriptionEventType</span> <span class="n">dryRunAction</span> <span class="o">=</span> <span class="nc">SubscriptionEventType</span><span class="o">.</span><span class="na">START_BILLING</span><span class="o">;</span>
<span class="nc">PhaseType</span> <span class="n">phaseType</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">productName</span> <span class="o">=</span> <span class="s">"Assault-Rifle"</span><span class="o">;</span>
<span class="nc">ProductCategory</span> <span class="n">productCategory</span> <span class="o">=</span> <span class="nc">ProductCategory</span><span class="o">.</span><span class="na">BASE</span><span class="o">;</span>
<span class="nc">BillingPeriod</span> <span class="n">billingPeriod</span> <span class="o">=</span> <span class="nc">BillingPeriod</span><span class="o">.</span><span class="na">ANNUAL</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">priceListName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="no">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="no">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">LocalDate</span> <span class="n">effectiveDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">BillingActionPolicy</span> <span class="n">billingPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">PhasePrice</span><span class="o">&gt;</span> <span class="n">priceOverrides</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">planName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="no">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="nc">InvoiceDryRun</span> <span class="n">dryRunArg</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceDryRun</span><span class="o">(</span><span class="n">dryRunType</span><span class="o">,</span> 
        <span class="n">dryRunAction</span><span class="o">,</span>
        <span class="n">phaseType</span><span class="o">,</span>
        <span class="n">productName</span><span class="o">,</span>
        <span class="n">productCategory</span><span class="o">,</span>
        <span class="n">billingPeriod</span><span class="o">,</span>
        <span class="n">priceListName</span><span class="o">,</span>
        <span class="n">subscriptionId</span><span class="o">,</span>
        <span class="n">bundleId</span><span class="o">,</span>
        <span class="n">effectiveDate</span><span class="o">,</span>
        <span class="n">billingPolicy</span><span class="o">,</span>
        <span class="n">priceOverrides</span><span class="o">,</span>
        <span class="n">planName</span><span class="o">);</span>


<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"8452df66-ded8-4fba-b7dc-50302d19bc5b"</span><span class="o">);</span>
<span class="nc">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LocalDate</span><span class="o">(</span><span class="s">"2023-10-22"</span><span class="o">);</span>

<span class="nc">Invoice</span> <span class="n">dryRunInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">generateDryRunInvoice</span><span class="o">(</span><span class="n">dryRunArg</span><span class="o">,</span>
        <span class="n">accountId</span><span class="o">,</span>
        <span class="n">targetDate</span><span class="o">,</span>
        <span class="no">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span>
        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="c1">#</span>
<span class="c1"># This case is when you create a dry-run invoice with UPCOMING_INVOICE, </span>
<span class="c1"># to see what is the next invoice that the system will generate for this account </span>
<span class="c1"># </span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s2">"5527abbc-d83d-447f-bf3d-ab9542ea631e"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">upcoming_invoice_target_date</span> <span class="o">=</span> <span class="kp">true</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">trigger_invoice_dry_run</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                                       <span class="n">target_date</span><span class="p">,</span> 
                                                       <span class="n">upcoming_invoice_target_date</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1">#
# This case is when you create a dry-run invoice with UPCOMING_INVOICE, 
# to see what is the next invoice that the system will generate for this account 
# 
</span><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceDryRun</span><span class="p">(</span><span class="n">dry_run_type</span><span class="o">=</span><span class="s">'UPCOMING_INVOICE'</span><span class="p">)</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'00e87495-92dc-4640-8490-e2c794748151'</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">generate_dry_run_invoice</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                              <span class="n">account_id</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                              <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                              <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">a24a1b9f-9d0f-4311-ad05-feac80f7b177</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">targetDate</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">2023-10-26</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">invoiceDryRun</span><span class="p">:</span> <span class="nx">InvoiceDryRun</span> <span class="o">=</span> <span class="p">{</span><span class="na">dryRunType</span><span class="p">:</span> <span class="dl">"</span><span class="s2">UPCOMING_INVOICE</span><span class="dl">"</span><span class="p">};</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">generateDryRunInvoice</span><span class="p">(</span><span class="nx">invoiceDryRun</span><span class="p">,</span> <span class="nx">accountId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">targetDate</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$body</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoiceDryRun</span><span class="p">();</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setDryRunType</span><span class="p">(</span><span class="s2">"UPCOMING_INVOICE"</span><span class="p">);</span>
<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"a24a1b9f-9d0f-4311-ad05-feac80f7b177"</span><span class="p">;</span>
<span class="nv">$targetDate</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nv">$pluginProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"pluginProperty_example"</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">generateDryRunInvoice</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$accountId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$targetDate</span><span class="p">,</span> <span class="nv">$pluginProperty</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cf4d1d3b-81cf-4054-96d7-bbdada2b9bc2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-01-31"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8c453b1b-ba2c-4c05-894f-e02eb2ee834e"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cf4d1d3b-81cf-4054-96d7-bbdada2b9bc2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6ebcc573-c2c4-408a-b5c3-d6ae0dbae233"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b9efead-d5e4-40a9-8178-2286dee0fe48"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-31"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c1e83a72-ef8e-42d4-93e1-b5f9390294b4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cf4d1d3b-81cf-4054-96d7-bbdada2b9bc2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c22936f6-5105-45b6-b418-ebba142a17aa"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9cce25a5-6ef2-40fe-8718-ca22529fe9d8"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-31"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Request Body</strong></p>

<p>A <a href="invoice.html#invoice-invoicedryrun-resource">dry run resource object</a>. The <strong>dryRunType</strong> and sometimes <strong>dryRunAction</strong> must be specified. Other attributes depend on these:</p>

<table><thead>
<tr>
<th><strong>dryRunType</strong></th>
<th><strong>dryRunAction</strong></th>
<th><strong>Other Required Attributes</strong></th>
<th><strong>Other Optional Attributes</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>TARGET_DATE</td>
<td>N/A</td>
<td>none</td>
<td>none</td>
<td>Preview the invoice as of the target date specified as a query parameter</td>
</tr>
<tr>
<td>UPCOMING_INVOICE</td>
<td>N/A</td>
<td>none</td>
<td>subscriptionId or bundleId (When specified, computes the upcoming invoice for the specified subscription/bundle. Note that if there are other subscriptions invoiced on the same day, these will also be included in the upcoming invoice)</td>
<td>Preview the next scheduled invoice. <code>targetDate</code> query parameter does not need to be specified, it is ignored even if specified</td>
</tr>
<tr>
<td>SUBSCRIPTION_ACTION</td>
<td>START_BILLING</td>
<td>Either a combination of productName, productCategory, billingPeriod or planName. If the dry run is being generated for an ADDON product, then the bundleId also needs to be specified</td>
<td>effectiveDate, priceListName, billingPolicy</td>
<td>Preview the invoice that would be generated if the <strong>START_BILLING</strong> action is taken</td>
</tr>
<tr>
<td>SUBSCRIPTION_ACTION</td>
<td>CHANGE</td>
<td>subscriptionId, bundleId and either a combination of productName, productCategory, billingPeriod or planName</td>
<td>effectiveDate, priceListName, billingPolicy</td>
<td>Preview the invoice that would be generated if the <strong>CHANGE</strong> action is taken</td>
</tr>
<tr>
<td>SUBSCRIPTION_ACTION</td>
<td>STOP_BILLING</td>
<td>subscriptionId, bundleId, effectiveDate</td>
<td>-</td>
<td>Preview the invoice that would be generated if the <strong>STOP_BILLING</strong> action is taken</td>
</tr>
</tbody></table>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>No</td>
<td>current date</td>
<td>Target date is the invoicing target date</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p>Note that for <code>SUBSCRIPTION_ACTION</code>, there are 2 dates to take into account:</p>

<ul>
<li>The <code>effectiveDate</code> in the body specifies when the action (e.g CREATE) takes place</li>
<li>The <code>targetDate</code> as a query parameter specifies the date for the billing, i.e how far in the future we want to bill for. A null <code>targetDate</code> default to now.</li>
</ul>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h2 id='invoice-groups'>Invoice Groups</h2>
<p>An invoice group is a group of invoices. An invoice group plugin can be used to split an invoice into multiple invoices. Such split invoices belong to a single invoice group. </p>

<p>Note that Kill Bill does not provide any reference implementation for an invoice group plugin. So anyone wishing to use this feature would need to create an invoice plugin and implement the <a href="https://github.com/killbill/killbill-plugin-api/blob/20e10d463b67b0434e1b9f4dd62ed34ebe84bd9b/invoice/src/main/java/org/killbill/billing/invoice/plugin/api/InvoicePluginApi.java#L41">InvoicePluginApi#getInvoiceGrouping</a> method. We provide a <a href="https://github.com/killbill/killbill-invgrp-demo">demo plugin</a> that demonstrates how an invoice group plugin can be implemented. When such a plugin is configured, an <a href="invoice.html#invoice-trigger-an-invoice-group-run">invoice group run</a> would result in the generation of multiple invoices.</p>
<h3 id='trigger-an-invoice-group-run'>Trigger an invoice group run</h3>
<p>Triggers an invoice group run for the associated account. This would result in the creation of split invoices only if an invoice group plugin is configured. Otherwise, this endpoint behaves the same way as the <a href="invoice.html#invoice-trigger-an-invoice-run">Trigger an invoice run</a> endpoint.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/group</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/group?accountId=46897a8b-4ae8-45e2-b934-c4d00dba40a6"</span> 
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"34a65013-2dd1-480e-b4b8-7999bb15ebce"</span><span class="o">);</span>
<span class="nc">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="nc">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2023-06-15"</span><span class="o">);</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="no">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="nc">Invoices</span> <span class="n">invoices</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createFutureInvoiceGroup</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">targetDate</span><span class="o">,</span> <span class="no">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8452df66-ded8-4fba-b7dc-50302d19bc5b'</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2023</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">create_future_invoice_group</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                       <span class="n">target_date</span><span class="o">=</span><span class="n">target_date</span><span class="p">,</span>
                                       <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                       <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                       <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">8452df66-ded8-4fba-b7dc-50302d19bc5b</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">targetDate</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">2024-02-22</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">createFutureInvoiceGroup</span><span class="p">(</span><span class="nx">accountId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">targetDate</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"8452df66-ded8-4fba-b7dc-50302d19bc5b"</span><span class="p">;</span>
<span class="nv">$targetDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DateTime</span><span class="p">(</span><span class="s2">"2024-04-22"</span><span class="p">);</span>
<span class="nv">$pluginProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"pluginProperty_example"</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">createFutureInvoiceGroup</span><span class="p">(</span><span class="nv">$accountId</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$targetDate</span><span class="p">,</span> <span class="nv">$pluginProperty</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>target date (date up to which the account should be invoiced)</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location header containing the UUID of the generated group (if any) is also included in the response. If there is nothing to invoice for, returns a 404 status code.</p>
<h3 id='retrieve-an-invoice-group'>Retrieve an invoice group</h3>
<p>Retrieves the invoices associated with the specified <code>groupId</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{groupId}/group</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/e7fc3529-92e1-4987-b5f1-08e558a36698/group?accountId=40630170-e390-4cc7-9381-3788a894ba04"</span> 
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="o">);</span>
<span class="no">UUID</span> <span class="n">groupId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f5ecf703-10b9-4019-8044-8db1163bef56"</span><span class="o">);</span>

<span class="nc">Invoices</span> <span class="n">invoices</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoicesGroup</span><span class="o">(</span><span class="n">groupId</span><span class="o">,</span> <span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8452df66-ded8-4fba-b7dc-50302d19bc5b'</span>
<span class="n">group_id</span> <span class="o">=</span> <span class="s">'51eae3dc-eec8-4ffa-b7d1-65b7b797538e'</span>

<span class="n">invoice_group</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoices_group</span><span class="p">(</span><span class="n">group_id</span><span class="p">,</span> <span class="n">account_id</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">8452df66-ded8-4fba-b7dc-50302d19bc5b</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">groupId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ad2921d2-a343-4115-9a51-32288f49e6f0</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Invoice</span><span class="p">[],</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoicesGroup</span><span class="p">(</span><span class="nx">groupId</span><span class="p">,</span> <span class="nx">accountId</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$groupId</span> <span class="o">=</span> <span class="s2">"ad2921d2-a343-4115-9a51-32288f49e6f0"</span><span class="p">;</span>
<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"8452df66-ded8-4fba-b7dc-50302d19bc5b"</span><span class="p">;</span>
<span class="nv">$withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoicesGroup</span><span class="p">(</span><span class="nv">$groupId</span><span class="p">,</span> <span class="nv">$accountId</span><span class="p">,</span> <span class="nv">$withChildrenItems</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f5ecf703-10b9-4019-8044-8db1163bef56"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-02-16"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-16"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"428"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"faf4f9a3-943b-42c4-9705-1365cfd91cc7"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f5ecf703-10b9-4019-8044-8db1163bef56"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30a3a9bf-3fc7-4334-ac2e-064cdd99c9dc"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c463a1a-e884-4177-aa2c-cb09aa45e39b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-16"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-16"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2f575d9-9bb8-4b5a-8595-da001381fd13"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-02-16"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-16"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"429"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42376d22-4b19-4a79-816b-b4896f9e8f48"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2f575d9-9bb8-4b5a-8595-da001381fd13"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c176641f-2b6e-4bcf-8264-bfa120bcb337"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d424e7d9-e81a-45c7-9e84-77316bfe0c80"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-16"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-16"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>accountId</td>
</tr>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong>
If successful, returns a status code of 200 and a list of invoice objects for this group.</p>
<h2 id='payments'>Payments</h2>
<p>These endpoints relate to payments on an invoice. More information can be found at <a href="invoice-payment.html">Invoice Payments</a>.</p>
<h3 id='trigger-a-payment-for-an-invoice'>Trigger a payment for an invoice</h3>
<p>This API causes the system to generate a payment for an invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'{ "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "purchasedAmount": 50, "targetInvoiceId": "903e55d3-8072-47f1-80fc-32857dbdbcc5"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/payments"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"4defec0a-3ecb-4d6f-9b97-c3842734d95f"</span><span class="o">);</span>
<span class="no">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"14eadca7-dc35-4bbf-bb2b-fabad9bfebcf"</span><span class="o">);</span>

<span class="nc">InvoicePayment</span> <span class="n">invoicePayment</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoicePayment</span><span class="o">();</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setPurchasedAmount</span><span class="o">(</span><span class="nc">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setTargetInvoiceId</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">);</span>

<span class="nc">Boolean</span> <span class="n">externalPayment</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will use a external payment method</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">controlPluginNames</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="no">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="nc">InvoicePayment</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInstantPayment</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                                        <span class="n">invoicePayment</span><span class="o">,</span> 
                                                        <span class="n">externalPayment</span><span class="o">,</span> 
                                                        <span class="n">controlPluginNames</span><span class="o">,</span>
                                                        <span class="no">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">payment</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">new</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="s2">"a24a1b9f-9d0f-4311-ad05-feac80f7b177"</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">target_invoice_id</span> <span class="o">=</span> <span class="s2">"bb9cf385-cc78-46a6-b069-924bdfdeb4f7"</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">purchased_amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">external_payment</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">external_payment</span><span class="p">,</span>
               <span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span>
               <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">account_id</span> <span class="o">=</span> <span class="s">'04779ade-11f9-48d1-88a1-a63be84d1cb7'</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'46ab72dc-8abf-4984-818b-cf1558c7ef4b'</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">InvoicePayment</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                      <span class="n">purchased_amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                      <span class="n">target_invoice_id</span><span class="o">=</span><span class="n">invoice_id</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">create_instant_payment</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                                  <span class="n">body</span><span class="p">,</span>
                                  <span class="n">external_payment</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                  <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                  <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                  <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">accountId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ceaa4c46-723e-4229-ba77-c8656572e8ea</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">80825f6b-dc95-46f9-8e7e-ac16bf658f81</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">invoicePayment</span><span class="p">:</span> <span class="nx">InvoicePayment</span> <span class="o">=</span> <span class="p">{</span><span class="na">accountId</span><span class="p">:</span> <span class="nx">accountId</span><span class="p">,</span> <span class="na">targetInvoiceId</span><span class="p">:</span> <span class="nx">invoiceId</span><span class="p">,</span> <span class="na">purchasedAmount</span><span class="p">:</span><span class="mi">100</span><span class="p">};</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">createInstantPayment</span><span class="p">(</span><span class="nx">invoicePayment</span><span class="p">,</span> <span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"bb9cf385-cc78-46a6-b069-924bdfdeb4f7"</span><span class="p">;</span>
<span class="nv">$accountId</span> <span class="o">=</span> <span class="s2">"a24a1b9f-9d0f-4311-ad05-feac80f7b177"</span><span class="p">;</span>
<span class="nv">$externalPayment</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="nv">$controlPluginName</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"controlPluginName_example"</span><span class="p">);</span>
<span class="nv">$pluginProperty</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"pluginProperty_example"</span><span class="p">);</span>

<span class="nv">$body</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InvoicePayment</span><span class="p">();</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setAccountId</span><span class="p">(</span><span class="nv">$accountId</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setTargetInvoiceId</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">-&gt;</span> <span class="nf">setPurchasedAmount</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">createInstantPayment</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$externalPayment</span><span class="p">,</span> <span class="nv">$controlPluginName</span><span class="p">,</span> <span class="nv">$pluginProperty</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>An <a href="invoice-payment.html#invoice-payment-resource">InvoicePayment</a> resource object, with at least the following attributes: accountId, and purchasedAmount.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalPayment</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the payment method should be defaulted to the (system provided) external payment method.</td>
</tr>
<tr>
<td><strong>controlPluginName</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of payment control plugin names.</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='retrieve-payments-associated-with-an-invoice'>Retrieve payments associated with an invoice</h3>
<p>Returns a list of <a href="invoice-payment.html">Invoice Payment</a> objects corresponding to payments associated with the invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/payments"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ca09d09a-59b2-4ada-8c15-597c9efde46c"</span><span class="o">);</span>
<span class="nc">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="nc">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>

<span class="nc">InvoicePayments</span> <span class="n">invoicePayments</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getPaymentsForInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span>
        <span class="n">withPluginInfo</span><span class="o">,</span>
        <span class="n">withAttempts</span><span class="o">,</span>
        <span class="nc">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'46ab72dc-8abf-4984-818b-cf1558c7ef4b'</span>

<span class="n">invoice_payments</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_payments_for_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">80825f6b-dc95-46f9-8e7e-ac16bf658f81</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoicePayment</span><span class="p">[],</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getPaymentsForInvoice</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"bb9cf385-cc78-46a6-b069-924bdfdeb4f7"</span><span class="p">;</span>
<span class="nv">$withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getPaymentsForInvoice</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$withPluginInfo</span><span class="p">,</span> <span class="nv">$withAttempts</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"targetInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8b66b9f9-bfb4-463a-86c7-e267128a294a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
  </span><span class="nl">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39f3461c-5357-42f7-a8a9-ec79502fdb6b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PURCHASE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T20:48:34.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="nl">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, plugin info is included</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, payment attempts are included</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a List of InvoicePayment resource objects.</p>
<h2 id='custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to invoices. For details on Custom Fields see <a href="custom-field.html">Custom Field</a>.</p>
<h3 id='add-custom-fields-to-an-invoice'>Add custom fields to an invoice</h3>
<p>Adds one or more custom fields to an invoice object. Existing custom fields are not disturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'[ { "objectType": "INVOICE", "name": "Test Custom Field", "value": "demo_test_value" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">AuditLog</span><span class="o">&gt;</span> <span class="no">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="nc">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">invoiceId</span><span class="o">,</span> 
                                 <span class="nc">ObjectType</span><span class="o">.</span><span class="na">INVOICE</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="no">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s1">'7bf0f3d6-4ffb-4d5a-98c7-1158083432d0'</span>

<span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'INVOICE'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>
                         <span class="n">user</span><span class="p">,</span>
                         <span class="n">reason</span><span class="p">,</span>
                         <span class="n">comment</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'b64bd7d2-167b-4e89-bb76-15ee955801f1'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">create_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                        <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                        <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">customField</span><span class="p">:</span> <span class="nx">CustomField</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Test Custom Field</span><span class="dl">"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test_value</span><span class="dl">"</span><span class="p">};</span>
<span class="kd">const</span> <span class="nx">customFields</span> <span class="o">=</span> <span class="p">[</span><span class="nx">customField</span><span class="p">];</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">800ca6d0-8c33-458c-bf1a-4de22e960441</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">createInvoiceCustomFields</span><span class="p">(</span><span class="nx">customFields</span><span class="p">,</span> <span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"800ca6d0-8c33-458c-bf1a-4de22e960441"</span><span class="p">;</span>

<span class="nv">$customField</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CustomField</span><span class="p">();</span>
<span class="nv">$customField</span> <span class="o">-&gt;</span> <span class="nf">setName</span><span class="p">(</span><span class="s1">'Test Custom Field'</span><span class="p">);</span>
<span class="nv">$customField</span> <span class="o">-&gt;</span> <span class="nf">setValue</span><span class="p">(</span><span class="s1">'test_value'</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$customField</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">createInvoiceCustomFields</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>A list of <a href="custom-field.html#custom-field-custom-field-resource">Custom Field</a> objects. Each object should specify at least the <code>name</code> and <code>value</code> attribute. For example:</p>

<p>[ { &quot;name&quot;: &quot;CF1&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned with the URL to retrieve the custom fields associated with the invoice.</p>
<h3 id='retrieve-invoice-custom-fields'>Retrieve invoice custom fields</h3>
<p>Retrieve the custom fields associated with an invoice</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span>
                                                                   <span class="nc">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s1">'7bf0f3d6-4ffb-4d5a-98c7-1158083432d0'</span>

<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">custom_fields</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'b64bd7d2-167b-4e89-bb76-15ee955801f1'</span>

<span class="n">custom_fields</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">800ca6d0-8c33-458c-bf1a-4de22e960441</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">audit</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">NONE</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">CustomField</span><span class="p">[],</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceCustomFields</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">,</span> <span class="nx">audit</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"800ca6d0-8c33-458c-bf1a-4de22e960441"</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceCustomFields</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"349de10f-4bb1-4e1a-93f6-11b745200bf5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo_test_value"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='modify-custom-fields-for-an-invoice'>Modify custom fields for an invoice</h3>
<p>Modify the custom fields associated with an invoice. Note that it is not possible to modify the name of a custom field, it is only possible to modify its value.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> PUT <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'[ { "customFieldId": "9e0c4b85-c257-437c-ae9c-d32eac6f010c", "objectId": "7bf0f3d6-4ffb-4d5a-98c7-1158083432d0", "value": "new value" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/7bf0f3d6-4ffb-4d5a-98c7-1158083432d0/customFields"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="no">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="nc">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="nc">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">customFieldModified</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">modifyInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s1">'7bf0f3d6-4ffb-4d5a-98c7-1158083432d0'</span>

<span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'ec53d741-e52a-4860-a6d3-03bb22b24a90'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'new value'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>
                            <span class="n">user</span><span class="p">,</span>
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span>
                            <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'b64bd7d2-167b-4e89-bb76-15ee955801f1'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'da4c9071-e3da-418c-aa28-2b7cbf9ec3c8'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'New Value'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">modify_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                        <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                        <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">800ca6d0-8c33-458c-bf1a-4de22e960441</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">customField</span><span class="p">:</span> <span class="nx">CustomField</span> <span class="o">=</span> <span class="p">{</span><span class="na">customFieldId</span><span class="p">:</span> <span class="dl">"</span><span class="s2">45ee24dd-cb1c-48a9-91a8-ecf5b76fd76b</span><span class="dl">"</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">new_value</span><span class="dl">"</span><span class="p">};</span>
    <span class="kd">const</span> <span class="nx">customFields</span> <span class="o">=</span> <span class="p">[</span><span class="nx">customField</span><span class="p">];</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">modifyInvoiceCustomFields</span><span class="p">(</span><span class="nx">customFields</span><span class="p">,</span> <span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"800ca6d0-8c33-458c-bf1a-4de22e960441"</span><span class="p">;</span>

<span class="nv">$customField</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">CustomField</span><span class="p">();</span>
<span class="nv">$customField</span> <span class="o">-&gt;</span> <span class="nf">setCustomFieldId</span><span class="p">(</span><span class="s1">'70749248-8bc5-4a98-9238-9eda7ed34d56'</span><span class="p">);</span>
<span class="nv">$customField</span> <span class="o">-&gt;</span> <span class="nf">setValue</span><span class="p">(</span><span class="s1">'new_value'</span><span class="p">);</span>
<span class="nv">$body</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nv">$customField</span><span class="p">);</span>

<span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">modifyInvoiceCustomFields</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Requst Body</strong></p>

<p>A list of <a href="custom-field.html#custom-field-custom-field-resource">Custom Field</a> objects specifying the id and the new value for the custom fields to be modified. Each object should specify at least the <code>customFieldId</code> and <code>value</code> attribute. For example:</p>

<p>[ { &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p>Although the <code>fieldName</code> and <code>objectType</code> can be specified in the request body, these attributes cannot be modified, only the <code>value</code> can be modified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='remove-custom-fields-from-invoice'>Remove custom fields from invoice</h3>
<p>Delete one or more custom fields from an invoice. It accepts query parameters corresponding to the custom field ids to be deleted. If no query parameters are specified, it deletes all the custom fields corresponding to the invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> DELETE <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields?customField=349de10f-4bb1-4e1a-93f6-11b745200bf5"</span>  
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="no">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="no">UUID</span><span class="o">&gt;</span> <span class="n">customFieldsList</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">deleteInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFieldsList</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s1">'7bf0f3d6-4ffb-4d5a-98c7-1158083432d0'</span>

<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s1">'ec53d741-e52a-4860-a6d3-03bb22b24a90'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>
                            <span class="n">user</span><span class="p">,</span>
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span>
                            <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'b64bd7d2-167b-4e89-bb76-15ee955801f1'</span>
<span class="n">custom_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s">'da4c9071-e3da-418c-aa28-2b7cbf9ec3c8'</span><span class="p">]</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">delete_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="o">=</span><span class="n">invoice_id</span><span class="p">,</span>
                                        <span class="n">custom_field</span><span class="o">=</span><span class="n">custom_fields</span><span class="p">,</span>
                                        <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                        <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                        <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">800ca6d0-8c33-458c-bf1a-4de22e960441</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">customField</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">45ee24dd-cb1c-48a9-91a8-ecf5b76fd76b</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">customFields</span> <span class="o">=</span> <span class="p">[</span><span class="nx">customField</span><span class="p">];</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">deleteInvoiceCustomFields</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">customFields</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"800ca6d0-8c33-458c-bf1a-4de22e960441"</span><span class="p">;</span>

<span class="nv">$customFields</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"70749248-8bc5-4a98-9238-9eda7ed34d56"</span><span class="p">);</span>

<span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">deleteInvoiceCustomFields</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$customFields</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Custom field ID that should be deleted. Multiple custom fields can be deleted by specifying a separate <strong>customField</strong> parameter corresponding to each field</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='tags'>Tags</h2>
<p>See <a href="tag.html">Tags</a> for an introduction to tags.</p>

<p>The only <code>system</code> tag applicable for an <code>Invoice</code> is <code>WRITTEN_OFF</code> (<code>00000000-0000-0000-0000-000000000004</code>), which as it&#39;s name indicates, is used to write off an unpaid invoice, bringing its balance to $0.</p>
<h3 id='add-tags-to-invoice'>Add tags to invoice</h3>
<p>This API adds one or more tags to an invoice. The <a href="#tag-definition">tag definition</a> corresponding to the tag being added must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'[ "00000000-0000-0000-0000-000000000004"]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"45d6f4c5-21be-49b1-99c5-7b0c3c985bf0"</span><span class="o">);</span>

<span class="no">UUID</span> <span class="n">writtenOffId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000004"</span><span class="o">);</span>

<span class="nc">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                           <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">writtenOffId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s1">'7bf0f3d6-4ffb-4d5a-98c7-1158083432d0'</span>

<span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'WRITTEN_OFF'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
               <span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span>
               <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'b64bd7d2-167b-4e89-bb76-15ee955801f1'</span>
<span class="n">tagDefIds</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000004"</span><span class="p">]</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">create_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                               <span class="n">tagDefIds</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                               <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                               <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">800ca6d0-8c33-458c-bf1a-4de22e960441</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">tagDefIds</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">00000000-0000-0000-0000-000000000004</span><span class="dl">'</span><span class="p">];</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">createInvoiceTags</span><span class="p">(</span><span class="nx">tagDefIds</span><span class="p">,</span> <span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"800ca6d0-8c33-458c-bf1a-4de22e960441"</span><span class="p">;</span>
<span class="nv">$tagDefIds</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"00000000-0000-0000-0000-000000000004"</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">createInvoiceTags</span><span class="p">(</span><span class="nv">$tagDefIds</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more tag definition ids to be added as tags.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned containing the URL to retrieve the tags associated with the invoice.</p>
<h3 id='retrieve-invoice-tags'>Retrieve invoice tags</h3>
<p>Retrieve all tags attached to this invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="nc">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                           <span class="n">includedDeleted</span><span class="o">,</span> 
                                           <span class="nc">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s1">'7bf0f3d6-4ffb-4d5a-98c7-1158083432d0'</span>

<span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">tags</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
             <span class="n">audit</span><span class="p">,</span>
             <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'b64bd7d2-167b-4e89-bb76-15ee955801f1'</span>

<span class="n">tags</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">800ca6d0-8c33-458c-bf1a-4de22e960441</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">includeDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">audit</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">NONE</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Tag</span><span class="p">[],</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceTags</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">,</span> <span class="nx">includeDeleted</span><span class="p">,</span> <span class="nx">audit</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"800ca6d0-8c33-458c-bf1a-4de22e960441"</span><span class="p">;</span>
<span class="nv">$includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceTags</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$includedDeleted</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e054c84a-0518-4611-92a8-53e849f0affd"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTO_INVOICING_OFF"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='remove-tags-from-invoice'>Remove tags from invoice</h3>
<p>This API deletes one or more tags attached to an invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> DELETE <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags?tagDef=00000000-0000-0000-0000-000000000002"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>
<span class="no">UUID</span> <span class="n">autoPayOffId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">deleteInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                             <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">autoPayOffId</span><span class="o">),</span> 
                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s1">'7bf0f3d6-4ffb-4d5a-98c7-1158083432d0'</span>

<span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'WRITTEN_OFF'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                  <span class="n">user</span><span class="p">,</span>
                  <span class="n">reason</span><span class="p">,</span>
                  <span class="n">comment</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'b64bd7d2-167b-4e89-bb76-15ee955801f1'</span>
<span class="n">tagDefIds</span> <span class="o">=</span> <span class="p">[</span><span class="s">'00000000-0000-0000-0000-000000000004'</span><span class="p">]</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">delete_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                               <span class="n">tag_def</span><span class="o">=</span><span class="n">tagDefIds</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                               <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                               <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">800ca6d0-8c33-458c-bf1a-4de22e960441</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">tagDefIds</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">00000000-0000-0000-0000-000000000004</span><span class="dl">'</span><span class="p">];</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">deleteInvoiceTags</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">tagDefIds</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"800ca6d0-8c33-458c-bf1a-4de22e960441"</span><span class="p">;</span>
<span class="nv">$tagDef</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s2">"00000000-0000-0000-0000-000000000004"</span><span class="p">);</span>

<span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">deleteInvoiceTags</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$tagDef</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">);</span>
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>yes</td>
<td>none</td>
<td>A tag definition ID identifying the tag that should be removed. Multiple tags can be deleted by specifying a separate tagDef parameter corresponding to each tag.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='translation'>Translation</h2>
<p>These endpoints support translation of invoices to a different language when required by the customer. Translation replaces words and phrases in an invoice or catalog with the equivalent words or phrases in a different language. A tenant may upload translation tables for specific locales (e.g., locale <code>fr_FR</code> for French). When a customer accesses an invoice, that invoice is generated from the system data, formatted using the appropriate <a href="invoice.html#template">template</a>, and translated according to the locale of the customer&#39;s account, if a translation table exists for that locale.</p>

<p>Refer to the <a href="https://docs.killbill.io/latest/invoice_templates">Invoice templates document</a> and
<a href="https://docs.killbill.io/latest/internationalization.html#_language_translations">Internationalization manual</a> for an introduction to the translation process/Kill Bill&#39;s internationalization support.</p>
<h3 id='upload-the-catalog-translation-for-the-tenant'>Upload the catalog translation for the tenant</h3>
<p>Uploads a catalog translation table that will be saved under a specified locale. The translation table provides a translation for specific names in the current catalog that may appear on an invoice (for example, plan names, product names, etc.).</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/catalogTranslation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># specify the translations in the request body</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'"sports-monthly = Voiture Sport
silver-monthly = plan d'</span>argent mensuel<span class="s2">"' </span><span class="se">\</span><span class="s2">
    "</span>http://localhost:8080/1.0/kb/invoices/catalogTranslation/fr_FR<span class="s2">"

OR 
# specify a properties file containing the translations
curl -v </span><span class="se">\</span><span class="s2">
     -u admin:password </span><span class="se">\</span><span class="s2">
     -H "</span>X-Killbill-ApiKey: bob<span class="s2">" </span><span class="se">\</span><span class="s2">
     -H "</span>X-Killbill-ApiSecret: lazar<span class="s2">" </span><span class="se">\</span><span class="s2">
     -H 'X-Killbill-CreatedBy: admin' </span><span class="se">\</span><span class="s2">
     -H "</span>Content-Type: text/plain<span class="s2">" </span><span class="se">\</span><span class="s2">
     -X POST </span><span class="se">\</span><span class="s2">
     -d @CatalogTranslation_de_DE.properties </span><span class="se">\</span><span class="s2">
     http://127.0.0.1:8080/1.0/kb/invoices/catalogTranslation/de_DE
</span></code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"en_US"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"gold-monthly=plan"</span><span class="o">;</span>
<span class="nc">Boolean</span> <span class="n">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">invoiceApi</span><span class="o">.</span><span class="na">uploadCatalogTranslation</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">deleteIfExists</span><span class="o">,</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">catalog_translation</span> <span class="o">=</span> <span class="s1">'sports-monthly = Voiture Sport'</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">true</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_catalog_translation</span><span class="p">(</span><span class="n">catalog_translation</span><span class="p">,</span>
                                                          <span class="n">locale</span><span class="p">,</span>
                                                          <span class="n">delete_if_exists</span><span class="p">,</span>
                                                          <span class="n">user</span><span class="p">,</span>
                                                          <span class="n">reason</span><span class="p">,</span>
                                                          <span class="n">comment</span><span class="p">,</span>
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'sports-monthly = Voiture Sport'</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">upload_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span>
                                      <span class="n">body</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                      <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                      <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">locale</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fr_FR</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">sports-monthly = Voiture Sport</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">uploadCatalogTranslation</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="nx">locale</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">deleteIfExists</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$body</span> <span class="o">=</span> <span class="s2">"sports-monthly = Voiture Sport"</span><span class="p">;</span>
<span class="nv">$locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span><span class="p">;</span>
<span class="nv">$deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">uploadCatalogTranslation</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$locale</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$deleteIfExists</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>A table of translation items. For example:</p>

<p>gold-monthly = plan Or mensuel
silver-monthly = plan d&#39;argent mensuel</p>

<p>Note that this table does not use a special syntax such as JSON. The equals sign is the only punctuation. There are no brackets or quotation marks.</p>

<p>Alternatively, the path of a properties file containing the translations can also be specified as the request body. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing translations</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and a Location header that can be used to retrieve the catalog translation for the locale.</p>
<h3 id='retrieve-the-catalog-translation-for-the-tenant'>Retrieve the catalog translation for the tenant</h3>
<p>Retrieves the catalog translation table that was previously uploaded for a particular locale, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/catalogTranslation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/catalogTranslation/fr_FR"</span>    
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"en_US"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">translation</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getCatalogTranslation</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">translations</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>

<span class="n">translations</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">locale</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fr_FR</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getCatalogTranslation</span><span class="p">(</span><span class="nx">locale</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getCatalogTranslation</span><span class="p">(</span><span class="nv">$locale</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"sports-monthly = Voiture Sport"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the translation table. A status code of 404 means no table was found for the specified locale.</p>
<h3 id='upload-the-invoice-translation-for-the-tenant'>Upload the invoice translation for the tenant</h3>
<p>Uploads an invoice translation table that will be saved under a specified locale. The translation table provides a translation for specific names in the corresponding invoice template (for example invoice title, invoice date, etc.).</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/translation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># specify the translations in the request body</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"invoiceTitle=FACTURE
invoiceDate=Date:
invoiceNumber=Facture #"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/translation/fr_FR"</span>

OR 

<span class="c"># specify a properties file containing the translations</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
     <span class="nt">--data-binary</span> @InvoiceTranslation_de_DE.properties <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/translation/de_DE?deleteIfExists=true"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"en_US"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"gold-monthly=plan"</span><span class="o">;</span>
<span class="nc">Boolean</span> <span class="n">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">translation</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">uploadInvoiceTranslation</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">deleteIfExists</span><span class="o">,</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_translation</span> <span class="o">=</span> <span class="s1">'invoiceDate = date de facture'</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">true</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_translation</span><span class="p">(</span><span class="n">invoice_translation</span><span class="p">,</span>
                                                          <span class="n">locale</span><span class="p">,</span>
                                                          <span class="n">delete_if_exists</span><span class="p">,</span>
                                                          <span class="n">user</span><span class="p">,</span>
                                                          <span class="n">reason</span><span class="p">,</span>
                                                          <span class="n">comment</span><span class="p">,</span>
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">"invoiceDate = date de facture"</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">upload_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span>
                                      <span class="n">body</span><span class="p">,</span>
                                      <span class="n">delete_if_exists</span><span class="o">=</span><span class="n">delete_if_exists</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                      <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                      <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">locale</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fr_FR</span><span class="dl">'</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">invoiceDate = date de facture</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">uploadInvoiceTranslation</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="nx">locale</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">deleteIfExists</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$body</span> <span class="o">=</span> <span class="s2">"invoiceDate = date de facture"</span><span class="p">;</span>
<span class="nv">$locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span><span class="p">;</span>
<span class="nv">$deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">uploadInvoiceTranslation</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$locale</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$deleteIfExists</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>A table of translation items. For example:</p>

<p>invoiceTitle=FACTURE
invoiceDate=Date:
invoiceNumber=Facture #
invoiceAmount=Montant à payer</p>

<p>Note that this table does not use a special syntax such as JSON. The equals sign is the only punctuation. There are no brackets or quotation marks.</p>

<p>Alternatively, the path of a properties file containing the translations can also be specified as the request body.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>delete translation if exists</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and a Location header that can be used to retrieve the invoice translations for the locale.</p>
<h3 id='retrieve-the-invoice-translation-for-the-tenant'>Retrieve the invoice translation for the tenant</h3>
<p>Retrieves the invoice translation table that was previously uploaded for a particular locale, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/translation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/translation/fr_FR"</span>   
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"en_US"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">translation</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceTranslation</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">translations</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span><span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>

<span class="n">translations</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">locale</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fr_FR</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceTranslation</span><span class="p">(</span><span class="nx">locale</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceTranslation</span><span class="p">(</span><span class="nv">$locale</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>
sports-monthly : Voiture Sport

</code></pre></div>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the translation table. A status code of 404 means no table was found for the specified locale.</p>
<h2 id='template'>Template</h2>
<p>A template is a document based on <a href="https://mustache.github.io/"><strong>mustache</strong></a> that provides the layout information for invoices. When a customer accesses an invoice, the invoice is generated from the system data, formatted using the appropriate template, and translated according to the <a href="invoice.html#translation">invoice translations</a> corresponding to the locale of the customer&#39;s account if any.</p>

<p>Refer to the <a href="https://docs.killbill.io/latest/invoice_templates">Invoice templates document</a> and
<a href="https://docs.killbill.io/latest/internationalization.html#_language_translations">Internationalization manual</a> for an introduction to the translation process/Kill Bill&#39;s internationalization support.</p>
<h3 id='upload-the-manualpay-invoice-template-for-the-tenant'>Upload the manualPay invoice template for the tenant</h3>
<p>Uploads an invoice template for accounts that have the MANUAL_PAY tag. These accounts manually pay their invoices (e.g. ACH). Typically, this template will contain extra information like the company bank account details, PO number, etc.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/manualPayTemplate</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># specify the template in the request body</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: text/html"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s1">'"Some_HTML_String"'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/manualPayTemplate"</span>   

OR 

<span class="c"># specify the template in a separate mustache file</span>
curl <span class="nt">-v</span> <span class="se">\</span>
     <span class="nt">-u</span> admin:password <span class="se">\</span>
     <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
     <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
     <span class="nt">-H</span> <span class="s1">'X-Killbill-CreatedBy: admin'</span> <span class="se">\</span>
     <span class="nt">-H</span> <span class="s2">"Content-Type: text/html"</span> <span class="se">\</span>
     <span class="nt">-X</span> POST <span class="se">\</span>
     <span class="nt">-d</span> @HTMLTemplate-manual-pay.mustache <span class="se">\</span>
     <span class="s2">"http://localhost:8080/1.0/kb/invoices/manualPayTemplate"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"Test HTML String"</span><span class="o">;</span>
<span class="nc">Boolean</span> <span class="n">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">uploadInvoiceMPTemplate</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">deleteIfExists</span><span class="o">,</span><span class="n">requestOptions</span><span class="o">);</span>

</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_template</span> <span class="o">=</span> <span class="s2">"Some_HTML_String"</span>
<span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">true</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_template</span><span class="p">(</span><span class="n">invoice_template</span><span class="p">,</span>
                                                       <span class="n">is_manual_pay</span><span class="p">,</span>
                                                       <span class="n">delete_if_exists</span><span class="p">,</span>
                                                       <span class="n">user</span><span class="p">,</span>
                                                       <span class="n">reason</span><span class="p">,</span>
                                                       <span class="n">comment</span><span class="p">,</span>
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">body</span> <span class="o">=</span> <span class="s">'Some_HTML_String'</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">upload_invoice_mp_template</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                      <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                      <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Some HTML String</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">uploadInvoiceMPTemplate</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">deleteIfExists</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$body</span> <span class="o">=</span> <span class="s2">"Some HTML String"</span><span class="p">;</span>
<span class="nv">$deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">uploadInvoiceMPTemplate</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$deleteIfExists</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>Contains a mustache manual pay template in HTML format. Alternatively, the path of template file can also be specified as the request body.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing manual pay template</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and a Location header that can be used to retrieve the manual payment invoice template.</p>
<h3 id='retrieve-the-manualpay-invoice-template-for-the-tenant'>Retrieve the manualPay invoice template for the tenant</h3>
<p>Retrieves the manual pay invoice template previously uploaded for this tenant, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/manualPayTemplate</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/manualPayTemplate/"</span>  
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"fr_FR"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceMPTemplate</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">template</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_template</span><span class="p">(</span><span class="n">is_manual_pay</span><span class="p">,</span> <span class="n">locale</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>

<span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_mp_template</span><span class="p">(</span><span class="n">locale</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">locale</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">fr_FR</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceMPTemplate</span><span class="p">(</span><span class="nx">locale</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceMPTemplate</span><span class="p">(</span><span class="nv">$locale</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;html&gt;
    &lt;head&gt;
        &lt;style type="text/css"&gt;
            th {align=left; width=225px; border-bottom: solid 2px black;}
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;{{text.invoiceTitle}}&lt;/h1&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;
                &lt;td width=100px/&gt;
                &lt;td width=225px/&gt;
                &lt;td width=225px/&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td /&gt;
                &lt;td align=right&gt;{{text.invoiceDate}}&lt;/td&gt;
                &lt;td&gt;{{invoice.formattedInvoiceDate}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td /&gt;
                &lt;td align=right&gt;{{text.invoiceNumber}}&lt;/td&gt;
                &lt;td&gt;{{invoice.invoiceNumber}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;{{text.companyName}}&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td align=right&gt;{{text.accountOwnerName}}&lt;/td&gt;
                &lt;td&gt;{{account.name}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;{{text.companyAddress}}&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td&gt;{{account.email}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;{{text.companyCityProvincePostalCode}}&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td&gt;{{account.phone}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;{{text.companyCountry}}&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td /&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;{{text.companyUrl}}&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td /&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;{{text.invoiceItemBundleName}}&lt;/td&gt;
                &lt;th&gt;{{text.invoiceItemDescription}}&lt;/td&gt;
                &lt;th&gt;{{text.invoiceItemServicePeriod}}&lt;/td&gt;
                &lt;th&gt;{{text.invoiceItemAmount}}&lt;/td&gt;
            &lt;/tr&gt;
            {{#invoice.invoiceItems}}
            &lt;tr&gt;
                &lt;td&gt;{{description}}&lt;/td&gt;
                &lt;td&gt;{{planName}}&lt;/td&gt;
                &lt;td&gt;{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}&lt;/td&gt;
                &lt;td&gt;{{invoice.currency}} {{amount}}&lt;/td&gt;
            &lt;/tr&gt;
            {{/invoice.invoiceItems}}
            &lt;tr&gt;
                &lt;td colspan=4 /&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmount}}&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{invoice.chargedAmount}}&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmountPaid}}&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{invoice.paidAmount}}&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceBalance}}&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{invoice.balance}}&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and the manual pay template.</p>
<h3 id='upload-the-invoice-template-for-the-tenant'>Upload the invoice template for the tenant</h3>
<p>Uploads an invoice template for accounts with an automatic payment method (accounts without the <code>MANUAL_PAY</code> tag).</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/template</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># specify the template in the request body</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: text/html"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> <span class="s2">"Some_HTML_String"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/template"</span>    

OR

<span class="c"># specify the template in a separate mustache file</span>
curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: text/html"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="nt">-d</span> @HTMLTemplate.mustache <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/template?deleteIfExists=true"</span>    
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"Test HTML String"</span><span class="o">;</span>
<span class="nc">Boolean</span> <span class="n">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">uploadInvoiceTemplate</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">deleteIfExists</span><span class="o">,</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_template</span> <span class="o">=</span> <span class="s2">"Some_HTML_String"</span>
<span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">true</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_template</span><span class="p">(</span><span class="n">invoice_template</span><span class="p">,</span>
                                                       <span class="n">is_manual_pay</span><span class="p">,</span>
                                                       <span class="n">delete_if_exists</span><span class="p">,</span>
                                                       <span class="n">user</span><span class="p">,</span>
                                                       <span class="n">reason</span><span class="p">,</span>
                                                       <span class="n">comment</span><span class="p">,</span>
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">body</span> <span class="o">=</span> <span class="s">'Some_HTML_String'</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="bp">True</span>

<span class="n">invoiceApi</span><span class="p">.</span><span class="n">upload_invoice_template</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                   <span class="n">delete_if_exists</span><span class="o">=</span><span class="n">delete_if_exists</span><span class="p">,</span>
                                   <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span>
                                   <span class="n">reason</span><span class="o">=</span><span class="s">'reason'</span><span class="p">,</span>
                                   <span class="n">comment</span><span class="o">=</span><span class="s">'comment'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">Some HTML String</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">uploadInvoiceTemplate</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="dl">'</span><span class="s1">created_by</span><span class="dl">'</span><span class="p">,</span> <span class="nx">deleteIfExists</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$xKillbillCreatedBy</span> <span class="o">=</span> <span class="s2">"user"</span><span class="p">;</span>
<span class="nv">$xKillbillReason</span> <span class="o">=</span> <span class="s2">"reason"</span><span class="p">;</span>
<span class="nv">$xKillbillComment</span> <span class="o">=</span> <span class="s2">"comment"</span><span class="p">;</span>

<span class="nv">$body</span> <span class="o">=</span> <span class="s2">"Some HTML String"</span><span class="p">;</span>
<span class="nv">$deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">uploadInvoiceTemplate</span><span class="p">(</span><span class="nv">$body</span><span class="p">,</span> <span class="nv">$xKillbillCreatedBy</span><span class="p">,</span> <span class="nv">$xKillbillReason</span><span class="p">,</span> <span class="nv">$xKillbillComment</span><span class="p">,</span> <span class="nv">$deleteIfExists</span><span class="p">);</span>
</code></pre></div>
<p><strong>Request Body</strong></p>

<p>Contains a mustache automatic pay template in HTML format. Alternatively, the path of template file can also be specified as the request body.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing manual pay template</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and a Location header that can be used to retrieve the automatic payment invoice template.</p>
<h3 id='retrieve-the-invoice-template-for-the-tenant'>Retrieve the invoice template for the tenant</h3>
<p>Retrieves the automatic pay invoice template previously uploaded for this tenant, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/template</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/template"</span>    
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceTemplate</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">template</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_template</span><span class="p">(</span><span class="n">is_manual_pay</span><span class="p">,</span> <span class="n">locale</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_template</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceTemplate</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceTemplate</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>&lt;html&gt;
    &lt;head&gt;
        &lt;style type="text/css"&gt;
            th {align=left; width=225px; border-bottom: solid 2px black;}
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;{{text.invoiceTitle}}&lt;/h1&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;
                &lt;td width=100px/&gt;
                &lt;td width=225px/&gt;
                &lt;td width=225px/&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td /&gt;
                &lt;td align=right&gt;{{text.invoiceDate}}&lt;/td&gt;
                &lt;td&gt;{{invoice.formattedInvoiceDate}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td /&gt;
                &lt;td align=right&gt;{{text.invoiceNumber}}&lt;/td&gt;
                &lt;td&gt;{{invoice.invoiceNumber}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;{{text.companyName}}&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td align=right&gt;{{text.accountOwnerName}}&lt;/td&gt;
                &lt;td&gt;{{account.name}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;{{text.companyAddress}}&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td&gt;{{account.email}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;{{text.companyCityProvincePostalCode}}&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td&gt;{{account.phone}}&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;{{text.companyCountry}}&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td /&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;{{text.companyUrl}}&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td /&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;{{text.invoiceItemBundleName}}&lt;/td&gt;
                &lt;th&gt;{{text.invoiceItemDescription}}&lt;/td&gt;
                &lt;th&gt;{{text.invoiceItemServicePeriod}}&lt;/td&gt;
                &lt;th&gt;{{text.invoiceItemAmount}}&lt;/td&gt;
            &lt;/tr&gt;
            {{#invoice.invoiceItems}}
            &lt;tr&gt;
                &lt;td&gt;{{description}}&lt;/td&gt;
                &lt;td&gt;{{planName}}&lt;/td&gt;
                &lt;td&gt;{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}&lt;/td&gt;
                &lt;td&gt;{{invoice.currency}} {{amount}}&lt;/td&gt;
            &lt;/tr&gt;
            {{/invoice.invoiceItems}}
            &lt;tr&gt;
                &lt;td colspan=4 /&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmount}}&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{invoice.chargedAmount}}&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmountPaid}}&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{invoice.paidAmount}}&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceBalance}}&lt;/strong&gt;&lt;/td&gt;
                &lt;td align=right&gt;&lt;strong&gt;{{invoice.balance}}&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre></div>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and the automatic pay template.</p>
<h2 id='example'>Example</h2>
<p>The translation and templating process may seem a little complex. Here is a simple example for the use of a template with translation.</p>

<ol>
<li><p>To begin, a tenant should upload suitable manual pay and autopay templates reflecting her desired layout for the invoice. If this is not done a default template will be used.</p></li>
<li><p>Suppose the tenant does business with German customers. She then should upload translation tables, perhaps provided by customers, designated for the German locale (de_DE). Tables are needed for both invoice items and catalog items. The invoice items to be translated are the names of the fields on the template, such as invoiceTitle, invoiceAmount, etc. The catalog items to be translated are the names for actual items such as product name and plan name. There can be translation tables for any number of distinct locales.</p></li>
</ol>

<p>Catalog translation example (German):</p>

<p>gold plan = Goldplan
        sports car = Sportwagen</p>

<p>Invoice translation example (German):</p>

<p>invoiceTitle = Rechnung
    invoiceNumber = Rechnungsnumber
    invoiceBalance = Rechnungssaldo</p>

<ol>
<li>Each account has a designated locale. When an invoice is retrieved for an account, the invoice is generated using the invoice template and the appropriate translation tables, if any.</li>
</ol>

<p>Refer to the <a href="https://docs.killbill.io/latest/invoice_templates.html">Invoice Templates Tutorial</a> for a step-by-step tutorial.</p>
<h2 id='audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='retrieve-invoice-audit-logs-with-history-by-invoice-id'>Retrieve invoice audit logs with history by invoice id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified invoice. History information  (a copy of the full invoice object) is included with each record.</p>

<p>Some examples:</p>

<ul>
<li>Assuming the API is invoked after an invoice is generated, it would return one record:

<ul>
<li>An <code>INSERT</code> record corresponding to the invoice creation</li>
</ul></li>
<li>Assuming the API is invoked after an invoice is voided, it would return two records:

<ul>
<li>An <code>INSERT</code> record corresponding to the invoice creation</li>
<li>An <code>UPDATE</code> record corresponding to the invoice status update</li>
</ul></li>
</ul>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/d456a9b3-7e48-4f56-b387-1d65a492e75e/auditLogsWithHistory"</span>
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="no">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"8f6f3405-249f-4b66-a0c2-ee84e884e81d"</span><span class="o">);</span>
<span class="nc">AuditLogs</span> <span class="n">logs</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceAuditLogsWithHistory</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s2">"bb9cf385-cc78-46a6-b069-924bdfdeb4f7"</span>

<span class="n">audit_logs</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="nf">audit_logs_with_history</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">"bb9cf385-cc78-46a6-b069-924bdfdeb4f7"</span>

<span class="n">audit_logs</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoice_audit_logs_with_history</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">invoiceId</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">bb9cf385-cc78-46a6-b069-924bdfdeb4f7</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">AuditLog</span><span class="p">[],</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoiceAuditLogsWithHistory</span><span class="p">(</span><span class="nx">invoiceId</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$invoiceId</span> <span class="o">=</span> <span class="s2">"bb9cf385-cc78-46a6-b069-924bdfdeb4f7"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoiceAuditLogsWithHistory</span><span class="p">(</span><span class="nv">$invoiceId</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionBaseTransition"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2121</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"migrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"invoiceItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"invoicePayments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"parentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"isWrittenOff"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"writtenOff"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICES"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h2 id='list-and-search'>List and Search</h2>
<p>These endpoints allow you to list all invoices or to search for a specific invoice. Note that these endpoints return shallow objects and thus the value <code>0</code> is returned for the <code>amount</code>, <code>creditAdj</code>, <code>refundAdj</code> and <code>balance</code> fields. In order to retrieve the actual data for these fields, additional endpoints (like retrieve invoice by id) would need to be invoked. </p>
<h3 id='list-invoices'>List invoices</h3>
<p>Retrieve a list of all invoice records for this tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/pagination"</span>  
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="nc">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="nc">Invoices</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoices</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span> 
                                         <span class="n">limit</span><span class="o">,</span> 
                                         <span class="nc">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">invoices</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                        <span class="n">limit</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoices</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">get_invoices</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Invoice</span><span class="p">[],</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getInvoices</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$limit</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">getInvoices</span><span class="p">(</span><span class="nv">$offset</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404a98a8-4dd8-4737-a39f-be871e916a8c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"309"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"310"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VOID"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18e9b3d9-9083-4725-9e8a-27d3a57c2e88"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"311"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DRAFT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c6fe2246-62e2-450d-b9fc-a27003771535"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"312"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DRAFT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d6c7b6b9-f048-4266-bde6-4c381e69f432"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"313"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"71742c60-273f-4c91-8b8c-7555a3554b0a"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"314"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8032d7d-4354-46f7-82fa-8e635cc61fc5"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"315"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all invoices for this tenant.</p>
<h3 id='search-invoices'>Search invoices</h3>
<p>Search for an invoice by a specified search string. If the search string is a number, it is compared to the <code>invoiceNumber</code> attribute. An exact match is required. Otherwise, it is compared to the following attributes: <code>invoiceId</code>, <code>accountId</code>, or <code>currency</code>. The operation returns all invoice records in which the search string matches all or part of any one of these attributes.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-v</span> <span class="se">\</span>
    <span class="nt">-u</span> admin:password <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/search/404a98a8-4dd8-4737-a39f-be871e916a8c"</span> 
</code></pre></div><div class="highlight"><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="nc">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="nc">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"1a49101b-305e-4b4d-8403-7377596407b6"</span><span class="o">;</span>

<span class="nc">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="nc">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

<span class="nc">Invoices</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">searchInvoices</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                          <span class="n">offset</span><span class="o">,</span>
                          <span class="n">limit</span><span class="o">,</span> 
                          <span class="nc">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'3135'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">invoices</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                      <span class="n">offset</span><span class="p">,</span>
                                      <span class="n">limit</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="p">.</span><span class="n">api</span><span class="p">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">search_key</span> <span class="o">=</span> <span class="s">'USD'</span>

<span class="n">invoices</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="p">.</span><span class="n">search_invoices</span><span class="p">(</span><span class="n">search_key</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">InvoiceApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">searchKey</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">8600</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Invoice</span><span class="p">[],</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">searchInvoices</span><span class="p">(</span><span class="nx">searchKey</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight php tab-php"><code><span class="nv">$apiInstance</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="nf">getInvoiceApi</span><span class="p">();</span>

<span class="nv">$searchKey</span> <span class="o">=</span> <span class="s2">"8600"</span><span class="p">;</span> <span class="c1">//invoice number</span>
<span class="nv">$offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$limit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nv">$audit</span> <span class="o">=</span> <span class="s2">"NONE"</span><span class="p">;</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$apiInstance</span><span class="o">-&gt;</span><span class="nf">searchInvoices</span><span class="p">(</span><span class="nv">$searchKey</span><span class="p">,</span> <span class="nv">$offset</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">,</span> <span class="nv">$audit</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Example Response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404a98a8-4dd8-4737-a39f-be871e916a8c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"309"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>What you want to find</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>none</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>none</td>
<td>100</td>
<td>Maximum number of items to return on this page</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a list of invoices matched with the specified search key.</p>

      </div>
    </main>
  </body>

    <script src="javascripts/all.js"></script>

  <script>
    function debounce(func, delay) {
      let timeoutId;
      return function() {
        const context = this;
        const args = arguments;
        clearTimeout(timeoutId);
        timeoutId = setTimeout(function() {
          func.apply(context, args);
        }, delay);
      };
    }
    function copyToClipboard(textToCopy) {
      const textarea = document.createElement('textarea');
      textarea.value = textToCopy;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
    }

    class ProgramingLanguages {
      _defaultList = [];

      constructor(langList) {
        this.list = langList;
        this.updateDOMWithNewActiveLanguage();

        $(".lang-selector .lang-selector__link").on("click", (event) => {
          event.preventDefault();
          this.updateDOMWithNewActiveLanguage($(event.target).data("language-name"));
        });

        $(".lang-selector .lang-selector__select").on("change", (event) => {
          event.preventDefault()
          this.updateDOMWithNewActiveLanguage(event.target.value)
        });
      }

      get list() {
        const list = localStorage.getItem('listOfProgramingLanguages');
        return list ? JSON.parse(list) : this._defaultList;
      }

      set list(list) {
        localStorage.setItem('listOfProgramingLanguages', JSON.stringify(list));
      }

      get activeLanguage() {
        const activeLang = localStorage.getItem('activeProgramingLanguage');
        return activeLang || this.list[0];
      }
      
      set activeLanguage(activeLang) {
        localStorage.setItem('activeProgramingLanguage', activeLang);
      }

      updateDOMWithNewActiveLanguage(lang) {
        if(lang) {
          this.activeLanguage = lang
        }

        $(".lang-selector .lang-selector__link").removeClass('active');
        $(`.lang-selector .lang-selector__link[data-language-name='${lang || this.activeLanguage}']`).addClass('active');
        this.showOnlyActiveLanguage();
      }
      
      showOnlyActiveLanguage() {
        const activeLang = this.activeLanguage;
        
        if (activeLang) {
          $('.code-snippet').each((index, element) => {
            const snippetHasActiveLang = $(element).find(`.${activeLang}`);

            if (!snippetHasActiveLang.length > 0) {
              $(element).hide();
            } else {
              $(element).show();
            }
            
            $(element).has('.json, .textplain, .plaintext, .xml').show();
            
            $(element).children('.highlight').each(function (index, ch) {
              $(ch).hide()
              $(ch).has(`.${activeLang}, .json, .textplain, .plaintext, .xml`).show()
            })
          });
        }
      }
    }

    // DOM restructuring
    $('.content h2, .content h3, .content h4').each(function(){
      const itemHref = '#' + $(this).attr('id');
      $(this).append(`<a href="${itemHref}" style="padding-left: 10px;"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill="currentColor" fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>`);
      
      $(this).find('a').on('click', function(event) {
        const currentURLWithoutHash = window?.location?.href?.split('#')[0];
        const textToCopy = currentURLWithoutHash + itemHref;

        copyToClipboard(textToCopy)
      });
    });

    $('.content h3, .content h2, .content h1').each(
      function(i,e) {
        const sectionElements = $(this).nextUntil('h3, h2, h1')

        const codeSnippets = sectionElements.filter('.highlight, blockquote')
        const textBlock = sectionElements.not('.highlight, blockquote')

        const section = $('<section class="content__section" />')
          .append($('<div class="content__text" />').append(textBlock))
          .append($('<div class="content__code-snippets" />').append(codeSnippets))

        section.insertAfter($(this))
    });

    $('.content h2').each(
      function() {
        const sectionElements = $(this).nextUntil('h2, h1')
        $(this).add(sectionElements).wrapAll('<div class="content__section-container"/>' )
    });

    $('blockquote').each(function() {
      const $blockquote = $(this)
      $blockquote.prepend('<div class="copy-clipboard"><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 1.5H11.1667C13.0335 1.5 13.9669 1.5 14.68 1.86331C15.3072 2.18289 15.8171 2.69282 16.1367 3.32003C16.5 4.03307 16.5 4.96649 16.5 6.83333V12.75M4.16667 16.5H10.9167C11.8501 16.5 12.3168 16.5 12.6733 16.3183C12.9869 16.1586 13.2419 15.9036 13.4017 15.59C13.5833 15.2335 13.5833 14.7668 13.5833 13.8333V7.08333C13.5833 6.14991 13.5833 5.6832 13.4017 5.32668C13.2419 5.01308 12.9869 4.75811 12.6733 4.59832C12.3168 4.41667 11.8501 4.41667 10.9167 4.41667H4.16667C3.23325 4.41667 2.76654 4.41667 2.41002 4.59832C2.09641 4.75811 1.84144 5.01308 1.68166 5.32668C1.5 5.6832 1.5 6.14991 1.5 7.08333V13.8333C1.5 14.7668 1.5 15.2335 1.68166 15.59C1.84144 15.9036 2.09641 16.1586 2.41002 16.3183C2.76654 16.5 3.23325 16.5 4.16667 16.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>');

      $($blockquote).add($($blockquote).nextUntil('blockquote', 'div')).wrapAll('<div class="code-snippet"></div>')
    });

    $('table').each(function () {
      $(this).wrapAll('<div class="table-wrapper" />')
    })

    // Init active menu item if it has 
    $('.site-navigator .site-navigator__menu-item[href*="#"]').addClass('active')

    // Init theme
    if(JSON.parse(localStorage.getItem('is-dark-theme'))) {
      $('body').addClass('dark')
    }

    // Init programing language 
    programingLanguages = new ProgramingLanguages($('body').data('languages'))

    // Add event listeners on '.copy-clipboard' selector
    $('.copy-clipboard').on('click', function () {
      copyToClipboard($(this).parent().parent().find(`.${programingLanguages.activeLanguage} code`).text());

      if (!$(this).find('.tooltip').length > 0) {
        $(this).prepend('<span class="tooltip">Copied</span>');
        
        let that = this;
        setTimeout(function () {
          $(that).find('.tooltip').remove();
        }, 2000);
      }
    });
    
    $('.theme-switch').on('click', function (e) {
      $('body').toggleClass('dark');

      localStorage.setItem('is-dark-theme', $('body').hasClass('dark'))
    });

    $('.header__sidebar-toggler').on('click', function() {
      $(this).toggleClass('active')
      $('.page').toggleClass('sidebar-full-width-show')
    })

    $('.page__sidebar-toggle').on('click', function () {
      $(this).toggleClass('active');
      $('.page').toggleClass('sidebar-show');
    });

    $('.site-navigator .site-navigator__menu-item').on('click', function () {
      if($(this).hasClass('active')) {
        $(this).removeClass('active')
      }
    })
    
    $('.site-navigator .site-navigator__submenu-item').on('click', function () {
      if($(this).parent('.site-navigator__submenu').siblings('.site-navigator__menu-item.active')) {
        $('.site-navigator .site-navigator__submenu-item').removeClass('active')
        $(this).addClass('active')

        return;
      }

      $('.site-navigator .site-navigator__submenu-item').removeClass('active')
      $('.site-navigator .site-navigator__menu-item').removeClass('active')
      $(this).parent('.site-navigator__menu-item').addClass('active')
      $(this).addClass('active')
    })

    const navLinks = $('.site-navigator .site-navigator__menu-item.active + .site-navigator__submenu').find('.site-navigator__submenu-item')
    const HEIGHT_OF_PAGE_HEADER = 70;
    
    function handleScroll() {
      navLinks.each(function(index) {
        const currentHref = $(this).attr('href')
        const targetHeader = $(currentHref);
        const targetSection = $(`${currentHref} + section`);

        if (!targetSection.length) {
          return;
        }

        const targetTop = Math.round(targetHeader.offset()?.top)
        const heightOfHeader = Math.round(targetHeader.outerHeight())
        // Calculate the end of an section
        const targetBottom = Math.round(targetTop + heightOfHeader + targetSection.outerHeight());

        if (HEIGHT_OF_PAGE_HEADER >= targetTop && 0 < targetBottom) {
          const currentNavSubitem = $(`.site-navigator .site-navigator__submenu-item[href="${currentHref}"]`)
          const currentSubmenuContainer = $(currentNavSubitem).parents('.site-navigator__submenu-container')
          const parentMenuItem = $(currentSubmenuContainer).find('>.site-navigator__submenu-item');

          if(parentMenuItem.hasClass('active')) {
            currentNavSubitem.parent().parent().find('.site-navigator__submenu-item').removeClass('active')
            currentNavSubitem.addClass('active')
          } else {
            $('.site-navigator .site-navigator__submenu-item').removeClass('active');
            parentMenuItem.addClass('active')
            $(currentNavSubitem).addClass('active')
          }
        }
      });
    }

    // Attach the custom debounced scroll event handler
    const debouncedScroll = debounce(handleScroll, 10);
    $('.page .page__content').on('scroll', debouncedScroll);

    // The page is ready  - hide loader
    setTimeout(() => $('.loader-wrapper').hide(), 500)
  </script>
  <script src='https://cdn.jsdelivr.net/npm/@docsearch/js@3'></script>
  <script>
    docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill_slate'});
  </script>
</html>
