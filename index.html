
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Kill Bill</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-32705710-4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-32705710-4');
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;java&quot;,&quot;ruby&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#using-kill-bill-apis" class="toc-h1 toc-link" data-title="Using Kill Bill APIs">Using Kill Bill APIs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#using-kill-bill-apis-introduction" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#using-kill-bill-apis-authentication-and-rbac" class="toc-h2 toc-link" data-title="Authentication and RBAC">Authentication and RBAC</a>
                  </li>
                  <li>
                    <a href="#using-kill-bill-apis-multi-tenancy" class="toc-h2 toc-link" data-title="Multi-Tenancy">Multi-Tenancy</a>
                  </li>
                  <li>
                    <a href="#using-kill-bill-apis-resource-ids-and-external-keys" class="toc-h2 toc-link" data-title="Resource IDs and External Keys">Resource IDs and External Keys</a>
                  </li>
                  <li>
                    <a href="#using-kill-bill-apis-pagination" class="toc-h2 toc-link" data-title="Pagination">Pagination</a>
                  </li>
                  <li>
                    <a href="#using-kill-bill-apis-audit-and-history" class="toc-h2 toc-link" data-title="Audit and History">Audit and History</a>
                  </li>
                  <li>
                    <a href="#using-kill-bill-apis-versioning" class="toc-h2 toc-link" data-title="Versioning">Versioning</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#using-kill-bill-apis-kill-bill-server" class="toc-h3 toc-link" data-title="Using Kill Bill APIs">Kill Bill Server</a>
                              </li>
                              <li>
                                <a href="#using-kill-bill-apis-client-libraries" class="toc-h3 toc-link" data-title="Using Kill Bill APIs">Client Libraries</a>
                              </li>
                              <li>
                                <a href="#using-kill-bill-apis-plugins" class="toc-h3 toc-link" data-title="Using Kill Bill APIs">Plugins</a>
                              </li>
                              <li>
                                <a href="#using-kill-bill-apis-kpm" class="toc-h3 toc-link" data-title="Using Kill Bill APIs">KPM</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#using-kill-bill-apis-errors" class="toc-h2 toc-link" data-title="Errors">Errors</a>
                  </li>
                  <li>
                    <a href="#using-kill-bill-apis-additional-resources" class="toc-h2 toc-link" data-title="Additional Resources">Additional Resources</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tenant" class="toc-h1 toc-link" data-title="Tenant">Tenant</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tenant-tenant-resource" class="toc-h2 toc-link" data-title="Tenant Resource">Tenant Resource</a>
                  </li>
                  <li>
                    <a href="#tenant-tenant" class="toc-h2 toc-link" data-title="Tenant">Tenant</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tenant-create-a-tenant" class="toc-h3 toc-link" data-title="Tenant">Create a tenant</a>
                              </li>
                              <li>
                                <a href="#tenant-retrieve-a-tenant-by-id" class="toc-h3 toc-link" data-title="Tenant">Retrieve a tenant by id</a>
                              </li>
                              <li>
                                <a href="#tenant-retrieve-a-tenant-by-its-api-key" class="toc-h3 toc-link" data-title="Tenant">Retrieve a tenant by its API key</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#tenant-push-notifications" class="toc-h2 toc-link" data-title="Push Notifications">Push Notifications</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tenant-register-a-push-notification" class="toc-h3 toc-link" data-title="Tenant">Register a push notification</a>
                              </li>
                              <li>
                                <a href="#tenant-retrieve-a-registered-push-notification" class="toc-h3 toc-link" data-title="Tenant">Retrieve a registered push notification</a>
                              </li>
                              <li>
                                <a href="#tenant-delete-a-registered-push-notification" class="toc-h3 toc-link" data-title="Tenant">Delete a registered push notification</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#tenant-tenant-key-value-pairs" class="toc-h2 toc-link" data-title="Tenant Key-Value Pairs">Tenant Key-Value Pairs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tenant-add-a-per-tenant-user-key-value" class="toc-h3 toc-link" data-title="Tenant">Add a per tenant user key/value</a>
                              </li>
                              <li>
                                <a href="#tenant-retrieve-a-per-tenant-user-key-value" class="toc-h3 toc-link" data-title="Tenant">Retrieve a per tenant user key value</a>
                              </li>
                              <li>
                                <a href="#tenant-delete-a-per-tenant-user-key-value" class="toc-h3 toc-link" data-title="Tenant">Delete a per tenant user key/value</a>
                              </li>
                              <li>
                                <a href="#tenant-retrieve-per-tenant-keys-and-values-based-on-a-key-prefix" class="toc-h3 toc-link" data-title="Tenant">Retrieve per tenant keys and values based on a key prefix</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#tenant-system-properties-configuration" class="toc-h2 toc-link" data-title="System Properties Configuration">System Properties Configuration</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tenant-add-a-per-tenant-system-properties-configuration" class="toc-h3 toc-link" data-title="Tenant">Add a per tenant system properties configuration</a>
                              </li>
                              <li>
                                <a href="#tenant-retrieve-a-per-tenant-system-properties-configuration" class="toc-h3 toc-link" data-title="Tenant">Retrieve a per tenant system properties configuration</a>
                              </li>
                              <li>
                                <a href="#tenant-delete-a-per-tenant-system-properties-configuration" class="toc-h3 toc-link" data-title="Tenant">Delete a per tenant system properties configuration</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#tenant-plugin-configuration" class="toc-h2 toc-link" data-title="Plugin Configuration">Plugin Configuration</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tenant-add-a-per-tenant-configuration-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Add a per tenant configuration for a plugin</a>
                              </li>
                              <li>
                                <a href="#tenant-retrieve-a-per-tenant-configuration-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Retrieve a per tenant configuration for a plugin</a>
                              </li>
                              <li>
                                <a href="#tenant-delete-a-per-tenant-configuration-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Delete a per tenant configuration for a plugin</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#tenant-payment-state-machines" class="toc-h2 toc-link" data-title="Payment State Machines">Payment State Machines</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tenant-add-a-per-tenant-payment-state-machine-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Add a per tenant payment state machine for a plugin</a>
                              </li>
                              <li>
                                <a href="#tenant-retrieve-a-per-tenant-payment-state-machine-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Retrieve a per tenant payment state machine for a plugin</a>
                              </li>
                              <li>
                                <a href="#tenant-delete-a-per-tenant-payment-state-machine-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Delete a per tenant payment state machine for a plugin</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#catalog" class="toc-h1 toc-link" data-title="Catalog">Catalog</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#catalog-catalog-resource" class="toc-h2 toc-link" data-title="Catalog Resource">Catalog Resource</a>
                  </li>
                  <li>
                    <a href="#catalog-catalog" class="toc-h2 toc-link" data-title="Catalog">Catalog</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#catalog-upload-a-catalog-as-xml" class="toc-h3 toc-link" data-title="Catalog">Upload a catalog as XML</a>
                              </li>
                              <li>
                                <a href="#catalog-retrieve-the-catalog-as-xml" class="toc-h3 toc-link" data-title="Catalog">Retrieve the catalog as XML</a>
                              </li>
                              <li>
                                <a href="#catalog-retrieve-the-catalog-as-json" class="toc-h3 toc-link" data-title="Catalog">Retrieve the catalog as JSON</a>
                              </li>
                              <li>
                                <a href="#catalog-retrieve-a-list-of-catalog-versions" class="toc-h3 toc-link" data-title="Catalog">Retrieve a list of catalog versions</a>
                              </li>
                              <li>
                                <a href="#catalog-retrieve-available-base-plans" class="toc-h3 toc-link" data-title="Catalog">Retrieve available base plans</a>
                              </li>
                              <li>
                                <a href="#catalog-retrieve-available-add-ons-for-a-given-product" class="toc-h3 toc-link" data-title="Catalog">Retrieve available add-ons for a given product</a>
                              </li>
                              <li>
                                <a href="#catalog-delete-all-versions-of-a-per-tenant-catalog" class="toc-h3 toc-link" data-title="Catalog">Delete all versions of a per tenant catalog</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#catalog-subscription-info" class="toc-h2 toc-link" data-title="Subscription info">Subscription info</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#catalog-retrieve-the-phase-for-a-given-subscription-and-date" class="toc-h3 toc-link" data-title="Catalog">Retrieve the phase for a given subscription and date</a>
                              </li>
                              <li>
                                <a href="#catalog-retrieve-the-plan-for-a-given-subscription-and-date" class="toc-h3 toc-link" data-title="Catalog">Retrieve the plan for a given subscription and date</a>
                              </li>
                              <li>
                                <a href="#catalog-retrieve-the-pricelist-for-a-given-subscription-and-date" class="toc-h3 toc-link" data-title="Catalog">Retrieve the priceList for a given subscription and date</a>
                              </li>
                              <li>
                                <a href="#catalog-retrieve-product-for-a-given-subscription-and-date" class="toc-h3 toc-link" data-title="Catalog">Retrieve product for a given subscription and date</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#catalog-simple-plan" class="toc-h2 toc-link" data-title="Simple Plan">Simple Plan</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#catalog-add-a-simple-plan" class="toc-h3 toc-link" data-title="Catalog">Add a simple plan</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account" class="toc-h1 toc-link" data-title="Account">Account</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#account-account-resource" class="toc-h2 toc-link" data-title="Account Resource">Account Resource</a>
                  </li>
                  <li>
                    <a href="#account-accounts" class="toc-h2 toc-link" data-title="Accounts">Accounts</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-create-an-account" class="toc-h3 toc-link" data-title="Account">Create an Account</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-an-account-by-its-id" class="toc-h3 toc-link" data-title="Account">Retrieve an Account by its ID</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-an-account-by-its-external-key" class="toc-h3 toc-link" data-title="Account">Retrieve an Account by its external key</a>
                              </li>
                              <li>
                                <a href="#account-update-an-account" class="toc-h3 toc-link" data-title="Account">Update an Account</a>
                              </li>
                              <li>
                                <a href="#account-close-account" class="toc-h3 toc-link" data-title="Account">Close account</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-list-and-search" class="toc-h2 toc-link" data-title="List and Search">List and Search</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-list-accounts" class="toc-h3 toc-link" data-title="Account">List accounts</a>
                              </li>
                              <li>
                                <a href="#account-search-accounts" class="toc-h3 toc-link" data-title="Account">Search accounts</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-email" class="toc-h2 toc-link" data-title="Email">Email</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-add-account-email" class="toc-h3 toc-link" data-title="Account">Add account email</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-emails" class="toc-h3 toc-link" data-title="Account">Retrieve account emails</a>
                              </li>
                              <li>
                                <a href="#account-delete-email" class="toc-h3 toc-link" data-title="Account">Delete email</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-bundle" class="toc-h2 toc-link" data-title="Bundle">Bundle</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-retrieve-bundles-for-account" class="toc-h3 toc-link" data-title="Account">Retrieve bundles for account</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-invoice" class="toc-h2 toc-link" data-title="Invoice">Invoice</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-retrieve-account-invoices" class="toc-h3 toc-link" data-title="Account">Retrieve account invoices</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-payment" class="toc-h2 toc-link" data-title="Payment">Payment</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-trigger-a-payment-for-all-unpaid-invoices" class="toc-h3 toc-link" data-title="Account">Trigger a payment for all unpaid invoices</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-invoice-payments" class="toc-h3 toc-link" data-title="Account">Retrieve account invoice payments</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-payments" class="toc-h3 toc-link" data-title="Account">Retrieve account payments</a>
                              </li>
                              <li>
                                <a href="#account-trigger-a-payment-authorization-purchase-or-credit" class="toc-h3 toc-link" data-title="Account">Trigger a payment (authorization, purchase or credit)</a>
                              </li>
                              <li>
                                <a href="#account-trigger-a-payment-authorization-purchase-or-credit-using-the-account-external-key" class="toc-h3 toc-link" data-title="Account">Trigger a payment (authorization, purchase or credit) using the account external key</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-payment-method" class="toc-h2 toc-link" data-title="Payment Method">Payment Method</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-add-a-payment-method" class="toc-h3 toc-link" data-title="Account">Add a payment method</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-payment-methods" class="toc-h3 toc-link" data-title="Account">Retrieve account payment methods</a>
                              </li>
                              <li>
                                <a href="#account-set-the-default-payment-method" class="toc-h3 toc-link" data-title="Account">Set the default payment method</a>
                              </li>
                              <li>
                                <a href="#account-refresh-account-payment-methods" class="toc-h3 toc-link" data-title="Account">Refresh account payment methods</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-overdue" class="toc-h2 toc-link" data-title="Overdue">Overdue</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-retrieve-overdue-state-for-account" class="toc-h3 toc-link" data-title="Account">Retrieve overdue state for account</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-blocking-state" class="toc-h2 toc-link" data-title="Blocking State">Blocking State</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-block-an-account" class="toc-h3 toc-link" data-title="Account">Block an account</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-blocking-states-for-account" class="toc-h3 toc-link" data-title="Account">Retrieve blocking states for account</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-hierarchical-accounts" class="toc-h2 toc-link" data-title="Hierarchical Accounts">Hierarchical Accounts</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-list-child-accounts" class="toc-h3 toc-link" data-title="Account">List child accounts</a>
                              </li>
                              <li>
                                <a href="#account-transfer-a-given-child-credit-to-the-parent-level" class="toc-h3 toc-link" data-title="Account">Transfer a given child credit to the parent level</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-add-custom-fields-to-account" class="toc-h3 toc-link" data-title="Account">Add custom fields to account</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-all-custom-fields" class="toc-h3 toc-link" data-title="Account">Retrieve all custom fields</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-custom-fields" class="toc-h3 toc-link" data-title="Account">Retrieve account custom fields</a>
                              </li>
                              <li>
                                <a href="#account-modify-custom-fields-for-an-account" class="toc-h3 toc-link" data-title="Account">Modify custom fields for an account</a>
                              </li>
                              <li>
                                <a href="#account-remove-custom-fields-from-account" class="toc-h3 toc-link" data-title="Account">Remove custom fields from account</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-add-tags-to-account" class="toc-h3 toc-link" data-title="Account">Add tags to account</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-all-tags" class="toc-h3 toc-link" data-title="Account">Retrieve all tags</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-tags" class="toc-h3 toc-link" data-title="Account">Retrieve account tags</a>
                              </li>
                              <li>
                                <a href="#account-remove-tags-from-account" class="toc-h3 toc-link" data-title="Account">Remove tags from account</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#account-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#account-retrieve-audit-logs" class="toc-h3 toc-link" data-title="Account">Retrieve audit logs</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-audit-logs-with-history" class="toc-h3 toc-link" data-title="Account">Retrieve account audit logs with history</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-email-audit-logs-with-history" class="toc-h3 toc-link" data-title="Account">Retrieve account email audit logs with history</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-blocking-state-audit-logs-with-history" class="toc-h3 toc-link" data-title="Account">Retrieve blocking state audit logs with history</a>
                              </li>
                              <li>
                                <a href="#account-retrieve-account-timeline" class="toc-h3 toc-link" data-title="Account">Retrieve account timeline</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment-method" class="toc-h1 toc-link" data-title="Payment Method">Payment Method</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#payment-method-payment-method-resource" class="toc-h2 toc-link" data-title="Payment Method Resource">Payment Method Resource</a>
                  </li>
                  <li>
                    <a href="#payment-method-payment-methods" class="toc-h2 toc-link" data-title="Payment Methods">Payment Methods</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-method-retrieve-a-payment-method-by-id" class="toc-h3 toc-link" data-title="Payment Method">Retrieve a payment method by id</a>
                              </li>
                              <li>
                                <a href="#payment-method-retrieve-a-payment-method-by-external-key" class="toc-h3 toc-link" data-title="Payment Method">Retrieve a payment method by external key</a>
                              </li>
                              <li>
                                <a href="#payment-method-delete-a-payment-method" class="toc-h3 toc-link" data-title="Payment Method">Delete a payment method</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-method-list-and-search" class="toc-h2 toc-link" data-title="List and Search">List and Search</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-method-list-payment-methods" class="toc-h3 toc-link" data-title="Payment Method">List payment methods</a>
                              </li>
                              <li>
                                <a href="#payment-method-search-payment-methods" class="toc-h3 toc-link" data-title="Payment Method">Search payment methods</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-method-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-method-add-custom-fields-to-a-payment-method" class="toc-h3 toc-link" data-title="Payment Method">Add custom fields to a payment method</a>
                              </li>
                              <li>
                                <a href="#payment-method-retrieve-payment-method-custom-fields" class="toc-h3 toc-link" data-title="Payment Method">Retrieve payment method custom fields</a>
                              </li>
                              <li>
                                <a href="#payment-method-modify-custom-fields-for-payment-method" class="toc-h3 toc-link" data-title="Payment Method">Modify custom fields for payment method</a>
                              </li>
                              <li>
                                <a href="#payment-method-remove-custom-fields-from-payment-method" class="toc-h3 toc-link" data-title="Payment Method">Remove custom fields from payment method</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-method-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-method-retrieve-payment-method-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Payment Method">Retrieve payment method audit logs with history by id</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#subscription" class="toc-h1 toc-link" data-title="Subscription">Subscription</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#subscription-subscription-resource" class="toc-h2 toc-link" data-title="Subscription Resource">Subscription Resource</a>
                  </li>
                  <li>
                    <a href="#subscription-subscriptions" class="toc-h2 toc-link" data-title="Subscriptions">Subscriptions</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#subscription-create-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Create a subscription</a>
                              </li>
                              <li>
                                <a href="#subscription-create-a-subscription-with-addon-products" class="toc-h3 toc-link" data-title="Subscription">Create a subscription with addon products</a>
                              </li>
                              <li>
                                <a href="#subscription-create-multiple-subscriptions-with-addon-products" class="toc-h3 toc-link" data-title="Subscription">Create multiple subscriptions with addon products</a>
                              </li>
                              <li>
                                <a href="#subscription-retrieve-a-subscription-by-id" class="toc-h3 toc-link" data-title="Subscription">Retrieve a subscription by id</a>
                              </li>
                              <li>
                                <a href="#subscription-retrieve-a-subscription-by-key" class="toc-h3 toc-link" data-title="Subscription">Retrieve a subscription by key</a>
                              </li>
                              <li>
                                <a href="#subscription-update-the-bcd-associated-with-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Update the BCD associated with a subscription</a>
                              </li>
                              <li>
                                <a href="#subscription-change-subscription-plan" class="toc-h3 toc-link" data-title="Subscription">Change subscription plan</a>
                              </li>
                              <li>
                                <a href="#subscription-undo-a-pending-change-plan-on-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Undo a pending change plan on a subscription</a>
                              </li>
                              <li>
                                <a href="#subscription-cancel-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Cancel a subscription</a>
                              </li>
                              <li>
                                <a href="#subscription-un-cancel-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Un-cancel a subscription</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#subscription-blocking-state" class="toc-h2 toc-link" data-title="Blocking State">Blocking State</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#subscription-block-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Block a subscription</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#subscription-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#subscription-add-custom-fields-to-subscription" class="toc-h3 toc-link" data-title="Subscription">Add custom fields to subscription</a>
                              </li>
                              <li>
                                <a href="#subscription-retrieve-subscription-custom-fields" class="toc-h3 toc-link" data-title="Subscription">Retrieve subscription custom fields</a>
                              </li>
                              <li>
                                <a href="#subscription-modify-custom-fields-for-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Modify custom fields for a subscription</a>
                              </li>
                              <li>
                                <a href="#subscription-remove-custom-fields-from-subscription" class="toc-h3 toc-link" data-title="Subscription">Remove custom fields from subscription</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#subscription-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#subscription-add-tags-to-subscription" class="toc-h3 toc-link" data-title="Subscription">Add tags to subscription</a>
                              </li>
                              <li>
                                <a href="#subscription-retrieve-subscription-tags" class="toc-h3 toc-link" data-title="Subscription">Retrieve subscription tags</a>
                              </li>
                              <li>
                                <a href="#subscription-remove-tags-from-subscription" class="toc-h3 toc-link" data-title="Subscription">Remove tags from subscription</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#subscription-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#subscription-retrieve-subscription-audit-logs-with-history-by-subscription-id" class="toc-h3 toc-link" data-title="Subscription">Retrieve subscription audit logs with history by subscription id</a>
                              </li>
                              <li>
                                <a href="#subscription-retrieve-subscription-event-audit-logs-with-history-by-subscription-event-id" class="toc-h3 toc-link" data-title="Subscription">Retrieve subscription event audit logs with history by subscription event id</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bundle" class="toc-h1 toc-link" data-title="Bundle">Bundle</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#bundle-bundle-resource" class="toc-h2 toc-link" data-title="Bundle Resource">Bundle Resource</a>
                  </li>
                  <li>
                    <a href="#bundle-bundle" class="toc-h2 toc-link" data-title="Bundle">Bundle</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#bundle-retrieve-a-bundle-by-id" class="toc-h3 toc-link" data-title="Bundle">Retrieve a bundle by id</a>
                              </li>
                              <li>
                                <a href="#bundle-retrieve-a-bundle-by-external-key" class="toc-h3 toc-link" data-title="Bundle">Retrieve a bundle by external key</a>
                              </li>
                              <li>
                                <a href="#bundle-update-a-bundle-externalkey" class="toc-h3 toc-link" data-title="Bundle">Update a bundle externalKey</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#bundle-transfer" class="toc-h2 toc-link" data-title="Transfer">Transfer</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#bundle-transfer-a-bundle-to-another-account" class="toc-h3 toc-link" data-title="Bundle">Transfer a bundle to another account</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#bundle-blocking-state" class="toc-h2 toc-link" data-title="Blocking State">Blocking State</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#bundle-pause-a-bundle" class="toc-h3 toc-link" data-title="Bundle">Pause a bundle</a>
                              </li>
                              <li>
                                <a href="#bundle-resume-a-bundle" class="toc-h3 toc-link" data-title="Bundle">Resume a bundle</a>
                              </li>
                              <li>
                                <a href="#bundle-block-a-bundle" class="toc-h3 toc-link" data-title="Bundle">Block a bundle</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#bundle-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#bundle-add-custom-fields-to-bundle" class="toc-h3 toc-link" data-title="Bundle">Add custom fields to bundle</a>
                              </li>
                              <li>
                                <a href="#bundle-retrieve-bundle-custom-fields" class="toc-h3 toc-link" data-title="Bundle">Retrieve bundle custom fields</a>
                              </li>
                              <li>
                                <a href="#bundle-modify-custom-fields-for-a-bundle" class="toc-h3 toc-link" data-title="Bundle">Modify custom fields for a bundle</a>
                              </li>
                              <li>
                                <a href="#bundle-remove-custom-fields-from-bundle" class="toc-h3 toc-link" data-title="Bundle">Remove custom fields from bundle</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#bundle-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#bundle-add-tags-to-bundle" class="toc-h3 toc-link" data-title="Bundle">Add tags to bundle</a>
                              </li>
                              <li>
                                <a href="#bundle-retrieve-bundle-tags" class="toc-h3 toc-link" data-title="Bundle">Retrieve bundle tags</a>
                              </li>
                              <li>
                                <a href="#bundle-remove-tags-from-bundle" class="toc-h3 toc-link" data-title="Bundle">Remove tags from bundle</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#bundle-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#bundle-retrieve-bundle-audit-logs-with-history-by-bundle-id" class="toc-h3 toc-link" data-title="Bundle">Retrieve bundle audit logs with history by bundle id</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#bundle-list-search" class="toc-h2 toc-link" data-title="List/Search">List/Search</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#bundle-list-bundles" class="toc-h3 toc-link" data-title="Bundle">List bundles</a>
                              </li>
                              <li>
                                <a href="#bundle-search-bundles" class="toc-h3 toc-link" data-title="Bundle">Search bundles</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#invoice" class="toc-h1 toc-link" data-title="Invoice">Invoice</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#invoice-invoice-resource" class="toc-h2 toc-link" data-title="Invoice Resource">Invoice Resource</a>
                  </li>
                  <li>
                    <a href="#invoice-invoiceitem-resouece" class="toc-h2 toc-link" data-title="InvoiceItem Resouece">InvoiceItem Resouece</a>
                  </li>
                  <li>
                    <a href="#invoice-invoicedryrun-resource" class="toc-h2 toc-link" data-title="InvoiceDryRun Resource">InvoiceDryRun Resource</a>
                  </li>
                  <li>
                    <a href="#invoice-invoice" class="toc-h2 toc-link" data-title="Invoice">Invoice</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-trigger-an-invoice-run" class="toc-h3 toc-link" data-title="Invoice">Trigger an invoice run</a>
                              </li>
                              <li>
                                <a href="#invoice-create-a-migration-invoice" class="toc-h3 toc-link" data-title="Invoice">Create a migration invoice</a>
                              </li>
                              <li>
                                <a href="#invoice-create-external-charge-s" class="toc-h3 toc-link" data-title="Invoice">Create external charge(s)</a>
                              </li>
                              <li>
                                <a href="#invoice-create-tax-items" class="toc-h3 toc-link" data-title="Invoice">Create tax items</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-an-invoice-by-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve an invoice by id</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-an-invoice-by-number" class="toc-h3 toc-link" data-title="Invoice">Retrieve an invoice by number</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-an-invoice-by-invoice-item-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve an invoice by invoice item id</a>
                              </li>
                              <li>
                                <a href="#invoice-render-an-invoice-as-html" class="toc-h3 toc-link" data-title="Invoice">Render an invoice as HTML</a>
                              </li>
                              <li>
                                <a href="#invoice-change-invoice-status-from-draft-to-committed" class="toc-h3 toc-link" data-title="Invoice">Change invoice status from DRAFT to COMMITTED</a>
                              </li>
                              <li>
                                <a href="#invoice-void-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Void an invoice</a>
                              </li>
                              <li>
                                <a href="#invoice-adjust-an-invoice-item" class="toc-h3 toc-link" data-title="Invoice">Adjust an invoice item</a>
                              </li>
                              <li>
                                <a href="#invoice-delete-a-cba-item" class="toc-h3 toc-link" data-title="Invoice">Delete a CBA item</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-dry-run" class="toc-h2 toc-link" data-title="Dry-run">Dry-run</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-generate-a-dry-run-invoice" class="toc-h3 toc-link" data-title="Invoice">Generate a dry run invoice</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-payments" class="toc-h2 toc-link" data-title="Payments">Payments</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-trigger-a-payment-for-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Trigger a payment for an invoice</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-payments-associated-with-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Retrieve payments associated with an invoice</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-add-custom-fields-to-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Add custom fields to an invoice</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-invoice-custom-fields" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice custom fields</a>
                              </li>
                              <li>
                                <a href="#invoice-modify-custom-fields-for-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Modify custom fields for an invoice</a>
                              </li>
                              <li>
                                <a href="#invoice-remove-custom-fields-from-invoice" class="toc-h3 toc-link" data-title="Invoice">Remove custom fields from invoice</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-add-tags-to-invoice" class="toc-h3 toc-link" data-title="Invoice">Add tags to invoice</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-invoice-tags" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice tags</a>
                              </li>
                              <li>
                                <a href="#invoice-remove-tags-from-invoice" class="toc-h3 toc-link" data-title="Invoice">Remove tags from invoice</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-translation" class="toc-h2 toc-link" data-title="Translation">Translation</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-upload-the-catalog-translation-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Upload the catalog translation for the tenant</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-the-catalog-translation-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Retrieve the catalog translation for the tenant</a>
                              </li>
                              <li>
                                <a href="#invoice-upload-the-invoice-translation-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Upload the invoice translation for the tenant</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-the-invoice-translation-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Retrieve the invoice translation for the tenant</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-template" class="toc-h2 toc-link" data-title="Template">Template</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-upload-the-manualpay-invoice-template-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Upload the manualPay invoice template for the tenant</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-the-manualpay-invoice-template-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Retrieve the manualPay invoice template for the tenant</a>
                              </li>
                              <li>
                                <a href="#invoice-upload-the-invoice-template-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Upload the invoice template for the tenant</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-the-invoice-template-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Retrieve the invoice template for the tenant</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-example" class="toc-h2 toc-link" data-title="Example">Example</a>
                  </li>
                  <li>
                    <a href="#invoice-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-retrieve-invoice-audit-logs-with-history-by-invoice-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice audit logs with history by invoice id</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-invoice-item-audit-logs-with-history-by-invoice-item-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice item audit logs with history by invoice item id</a>
                              </li>
                              <li>
                                <a href="#invoice-retrieve-invoice-payment-audit-logs-with-history-by-invoice-payment-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice payment audit logs with history by invoice payment id</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-list-and-search" class="toc-h2 toc-link" data-title="List and Search">List and Search</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-list-invoices" class="toc-h3 toc-link" data-title="Invoice">List invoices</a>
                              </li>
                              <li>
                                <a href="#invoice-search-invoices" class="toc-h3 toc-link" data-title="Invoice">Search invoices</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#credit" class="toc-h1 toc-link" data-title="Credit">Credit</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#credit-credit-resource" class="toc-h2 toc-link" data-title="Credit Resource">Credit Resource</a>
                  </li>
                  <li>
                    <a href="#credit-credit" class="toc-h2 toc-link" data-title="Credit">Credit</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#credit-create-credits" class="toc-h3 toc-link" data-title="Credit">Create credits</a>
                              </li>
                              <li>
                                <a href="#credit-retrieve-a-credit-by-id" class="toc-h3 toc-link" data-title="Credit">Retrieve a credit by id</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment" class="toc-h1 toc-link" data-title="Payment">Payment</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#payment-payment-resource" class="toc-h2 toc-link" data-title="Payment Resource">Payment Resource</a>
                  </li>
                  <li>
                    <a href="#payment-payments" class="toc-h2 toc-link" data-title="Payments">Payments</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-capture-an-existing-authorization-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Capture an existing authorization [using paymentId]</a>
                              </li>
                              <li>
                                <a href="#payment-capture-an-existing-authorization-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Capture an existing authorization [using paymentExternalKey]</a>
                              </li>
                              <li>
                                <a href="#payment-retrieve-a-payment-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Retrieve a payment [using paymentId]</a>
                              </li>
                              <li>
                                <a href="#payment-retrieve-a-payment-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Retrieve a payment [using paymentExternalKey]</a>
                              </li>
                              <li>
                                <a href="#payment-complete-an-existing-transaction-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Complete an existing transaction [using paymentId]</a>
                              </li>
                              <li>
                                <a href="#payment-complete-an-existing-transaction-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Complete an existing transaction [using paymentExternalKey]</a>
                              </li>
                              <li>
                                <a href="#payment-void-an-existing-payment-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Void an existing payment [using paymentId]</a>
                              </li>
                              <li>
                                <a href="#payment-void-an-existing-payment-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Void an existing payment [using paymentExternalKey]</a>
                              </li>
                              <li>
                                <a href="#payment-record-a-chargeback-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Record a chargeback [using paymentId]</a>
                              </li>
                              <li>
                                <a href="#payment-record-a-chargeback-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Record a chargeback [using paymentExternalKey]</a>
                              </li>
                              <li>
                                <a href="#payment-record-a-chargeback-reversal-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Record a chargeback reversal [using paymentId]</a>
                              </li>
                              <li>
                                <a href="#payment-record-a-chargeback-reversal-using-paymnetexternalkey" class="toc-h3 toc-link" data-title="Payment">Record a chargeback reversal [using paymnetExternalKey]</a>
                              </li>
                              <li>
                                <a href="#payment-refund-an-existing-payment-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Refund an existing payment [using paymentId]</a>
                              </li>
                              <li>
                                <a href="#payment-refund-an-existing-payment-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Refund an existing payment [using paymentExternalKey]</a>
                              </li>
                              <li>
                                <a href="#payment-cancel-a-scheduled-payment-attempt-retry-using-transactionid" class="toc-h3 toc-link" data-title="Payment">Cancel a scheduled payment attempt retry [using transactionId]</a>
                              </li>
                              <li>
                                <a href="#payment-cancel-a-scheduled-payment-attempt-retry-using-transactionexternalkey" class="toc-h3 toc-link" data-title="Payment">Cancel a scheduled payment attempt retry [using transactionExternalKey]</a>
                              </li>
                              <li>
                                <a href="#payment-combo-api-to-create-a-new-payment-transaction-on-a-existing-or-not-account" class="toc-h3 toc-link" data-title="Payment">Combo api to create a new payment transaction on a existing (or not) account</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-add-custom-fields-to-payment" class="toc-h3 toc-link" data-title="Payment">Add custom fields to payment</a>
                              </li>
                              <li>
                                <a href="#payment-retrieve-payment-custom-fields" class="toc-h3 toc-link" data-title="Payment">Retrieve payment custom fields</a>
                              </li>
                              <li>
                                <a href="#payment-modify-custom-fields-for-a-payment" class="toc-h3 toc-link" data-title="Payment">Modify custom fields for a payment</a>
                              </li>
                              <li>
                                <a href="#payment-remove-custom-fields-from-a-payment" class="toc-h3 toc-link" data-title="Payment">Remove custom fields from a payment</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-add-tags-to-a-payment" class="toc-h3 toc-link" data-title="Payment">Add tags to a payment</a>
                              </li>
                              <li>
                                <a href="#payment-retrieve-payment-tags" class="toc-h3 toc-link" data-title="Payment">Retrieve payment tags</a>
                              </li>
                              <li>
                                <a href="#payment-remove-tags-from-a-payment" class="toc-h3 toc-link" data-title="Payment">Remove tags from a payment</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-retrieve-payment-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Payment">Retrieve payment audit logs with history by id</a>
                              </li>
                              <li>
                                <a href="#payment-retrieve-payment-attempt-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Payment">Retrieve payment attempt audit logs with history by id</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-list-and-search" class="toc-h2 toc-link" data-title="List and Search">List and Search</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-get-payments" class="toc-h3 toc-link" data-title="Payment">Get payments</a>
                              </li>
                              <li>
                                <a href="#payment-search-payments" class="toc-h3 toc-link" data-title="Payment">Search payments</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment-transaction" class="toc-h1 toc-link" data-title="Payment Transaction">Payment Transaction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#payment-transaction-payments-transaction" class="toc-h2 toc-link" data-title="Payments Transaction">Payments Transaction</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-transaction-retrieve-a-payment-by-transaction-external-key" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve a payment by transaction external key</a>
                              </li>
                              <li>
                                <a href="#payment-transaction-retrieve-a-payment-by-transaction-id" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve a payment by transaction id</a>
                              </li>
                              <li>
                                <a href="#payment-transaction-mark-a-pending-payment-transaction-as-succeeded-or-failed" class="toc-h3 toc-link" data-title="Payment Transaction">Mark a pending payment transaction as succeeded or failed</a>
                              </li>
                              <li>
                                <a href="#payment-transaction-retrieve-payment-transaction-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve payment transaction audit logs with history by id</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-transaction-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-transaction-add-custom-fields-to-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Add custom fields to payment transaction</a>
                              </li>
                              <li>
                                <a href="#payment-transaction-retrieve-payment-transaction-custom-fields" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve payment transaction custom fields</a>
                              </li>
                              <li>
                                <a href="#payment-transaction-modify-custom-fields-to-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Modify custom fields to payment transaction</a>
                              </li>
                              <li>
                                <a href="#payment-transaction-remove-custom-fields-from-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Remove custom fields from payment transaction</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#payment-transaction-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#payment-transaction-add-tags-to-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Add tags to payment transaction</a>
                              </li>
                              <li>
                                <a href="#payment-transaction-retrieve-payment-transaction-tags" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve payment transaction tags</a>
                              </li>
                              <li>
                                <a href="#payment-transaction-remove-tags-from-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Remove tags from payment transaction</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#invoice-payment" class="toc-h1 toc-link" data-title="Invoice Payment">Invoice Payment</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#invoice-payment-invoice-payment-resource" class="toc-h2 toc-link" data-title="Invoice Payment Resource">Invoice Payment Resource</a>
                  </li>
                  <li>
                    <a href="#invoice-payment-invoice-payment" class="toc-h2 toc-link" data-title="Invoice Payment">Invoice Payment</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-payment-retrieve-a-payment-by-id" class="toc-h3 toc-link" data-title="Invoice Payment">Retrieve a payment by id</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-refund-a-payment-and-adjust-the-invoice-if-needed" class="toc-h3 toc-link" data-title="Invoice Payment">Refund a payment, and adjust the invoice if needed</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-record-a-chargeback" class="toc-h3 toc-link" data-title="Invoice Payment">Record a chargeback</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-complete-an-existing-transaction" class="toc-h3 toc-link" data-title="Invoice Payment">Complete an existing transaction</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-record-a-chargeback-reversal" class="toc-h3 toc-link" data-title="Invoice Payment">Record a chargeback reversal</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-payment-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-payment-add-custom-fields-to-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Add custom fields to payment</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-retrieve-payment-custom-fields" class="toc-h3 toc-link" data-title="Invoice Payment">Retrieve payment custom fields</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-modify-custom-fields-to-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Modify custom fields to payment</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-remove-custom-fields-from-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Remove custom fields from payment</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#invoice-payment-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#invoice-payment-add-tags-to-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Add tags to payment</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-retrieve-payment-tags" class="toc-h3 toc-link" data-title="Invoice Payment">Retrieve payment tags</a>
                              </li>
                              <li>
                                <a href="#invoice-payment-remove-tags-from-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Remove tags from payment</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#usage" class="toc-h1 toc-link" data-title="Usage">Usage</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#usage-usage-resource" class="toc-h2 toc-link" data-title="Usage Resource">Usage Resource</a>
                  </li>
                  <li>
                    <a href="#usage-usage" class="toc-h2 toc-link" data-title="Usage">Usage</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#usage-record-usage-for-a-subscription" class="toc-h3 toc-link" data-title="Usage">Record usage for a subscription</a>
                              </li>
                              <li>
                                <a href="#usage-retrieve-usage-for-a-subscription-and-unit-type" class="toc-h3 toc-link" data-title="Usage">Retrieve usage for a subscription and unit type</a>
                              </li>
                              <li>
                                <a href="#usage-retrieve-usage-for-a-subscription" class="toc-h3 toc-link" data-title="Usage">Retrieve usage for a subscription</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#custom-field" class="toc-h1 toc-link" data-title="Custom Field">Custom Field</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#custom-field-custom-field-resource" class="toc-h2 toc-link" data-title="Custom Field  Resource">Custom Field  Resource</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#custom-field-list-all-custom-fields" class="toc-h3 toc-link" data-title="Custom Field">List all custom fields</a>
                              </li>
                              <li>
                                <a href="#custom-field-search-custom-fields-by-id" class="toc-h3 toc-link" data-title="Custom Field">Search custom fields by ID</a>
                              </li>
                              <li>
                                <a href="#custom-field-search-custom-fields-by-resource-type-name-and-optional-value" class="toc-h3 toc-link" data-title="Custom Field">Search custom fields by resource type, name, and optional value</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#custom-field-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#custom-field-retrieve-custom-field-audit-logs-with-history-by-custom-field-id" class="toc-h3 toc-link" data-title="Custom Field">Retrieve custom field audit logs with history by custom field id</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tag" class="toc-h1 toc-link" data-title="Tag">Tag</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tag-tag-resource" class="toc-h2 toc-link" data-title="Tag  Resource">Tag  Resource</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tag-list-all-tags" class="toc-h3 toc-link" data-title="Tag">List all tags</a>
                              </li>
                              <li>
                                <a href="#tag-search-tags" class="toc-h3 toc-link" data-title="Tag">Search tags</a>
                              </li>
                              <li>
                                <a href="#tag-retrieve-tag-audit-logs" class="toc-h3 toc-link" data-title="Tag">Retrieve tag audit logs</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tag-definition" class="toc-h1 toc-link" data-title="Tag Definition">Tag Definition</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tag-definition-tag-definition-resource" class="toc-h2 toc-link" data-title="Tag Definition Resource">Tag Definition Resource</a>
                  </li>
                  <li>
                    <a href="#tag-definition-tag-definition" class="toc-h2 toc-link" data-title="Tag Definition">Tag Definition</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tag-definition-create-a-tag-definition" class="toc-h3 toc-link" data-title="Tag Definition">Create a tag definition</a>
                              </li>
                              <li>
                                <a href="#tag-definition-list-tag-definitions" class="toc-h3 toc-link" data-title="Tag Definition">List tag definitions</a>
                              </li>
                              <li>
                                <a href="#tag-definition-retrieve-a-tag-definition-by-its-id" class="toc-h3 toc-link" data-title="Tag Definition">Retrieve a tag definition by its ID</a>
                              </li>
                              <li>
                                <a href="#tag-definition-delete-a-tag-definition" class="toc-h3 toc-link" data-title="Tag Definition">Delete a tag definition</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#tag-definition-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#tag-definition-retrieve-tag-definition-audit-logs-with-history-by-tag-definition-id" class="toc-h3 toc-link" data-title="Tag Definition">Retrieve tag definition audit logs with history by tag definition id</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#admin" class="toc-h1 toc-link" data-title="Admin">Admin</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#admin-administrative-apis" class="toc-h2 toc-link" data-title="Administrative Apis">Administrative Apis</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#admin-trigger-an-invoice-generation-for-all-parked-accounts" class="toc-h3 toc-link" data-title="Admin">Trigger an invoice generation for all parked accounts</a>
                              </li>
                              <li>
                                <a href="#admin-update-existing-paymenttransaction-and-associated-payment-state" class="toc-h3 toc-link" data-title="Admin">Update existing paymentTransaction and associated payment state</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#admin-operational-apis" class="toc-h2 toc-link" data-title="Operational Apis">Operational Apis</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#admin-invalidates-the-given-cache-if-specified-otherwise-invalidates-all-caches" class="toc-h3 toc-link" data-title="Admin">Invalidates the given Cache if specified, otherwise invalidates all caches</a>
                              </li>
                              <li>
                                <a href="#admin-invalidates-caches-per-account-level" class="toc-h3 toc-link" data-title="Admin">Invalidates Caches per account level</a>
                              </li>
                              <li>
                                <a href="#admin-invalidates-caches-per-tenant-level" class="toc-h3 toc-link" data-title="Admin">Invalidates Caches per tenant level</a>
                              </li>
                              <li>
                                <a href="#admin-put-the-host-back-into-rotation" class="toc-h3 toc-link" data-title="Admin">Put the host back into rotation</a>
                              </li>
                              <li>
                                <a href="#admin-put-the-host-out-of-rotation" class="toc-h3 toc-link" data-title="Admin">Put the host out of rotation</a>
                              </li>
                        </ul>
                  </li>
                  <li>
                    <a href="#admin-low-level-view-apis" class="toc-h2 toc-link" data-title="Low Level View Apis">Low Level View Apis</a>
                        <ul class="toc-list-h3">
                              <li>
                                <a href="#admin-get-queues-entries" class="toc-h3 toc-link" data-title="Admin">Get queues entries</a>
                              </li>
                        </ul>
                  </li>
              </ul>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='using-kill-bill-apis'>Using Kill Bill APIs</h1><h2 id='using-kill-bill-apis-introduction'>Introduction</h2>
<p>Kill Bill offers a set of HTTP APIs, commonly called REST APIs, that use the HTTP verbs <code>POST</code>, <code>GET</code>, <code>PUT</code>, <code>DELETE</code> to invoke Create, Read, Update and Delete (CRUD) operations, and that use HTTP response codes to indicate errors. These APIs enable the management of Kill Bill resources -- e.g <code>Account</code> -- through the use of JSON input and output.</p>

<p>Kill Bill also offers a set of <a href="https://github.com/killbill/killbill-api/tree/master/src/main/java/org/killbill/billing">java APIs</a> that can be used by plugins to make requests, and a set of <a href="https://github.com/killbill/killbill-plugin-api">java plugin APIs</a> for Kill Bill core to interact with the plugins. These apis are beyond the scope of this documentation.</p>

<blockquote>
<p>API client libraries</p>
</blockquote>

<p>Official libraries for the Kill Bill API are available in several languages,
including Java, Php, Python, Ruby, Node, and Go. Community-supported libraries
such as .NET are also available. Note that code examples for Curl, Java, Ruby and Python are shown in the right-hand column of this document.</p>

<p>In the following documentation, we assume 
you have a Kill Bill server instance running on <code>127.0.0.1</code> on port <code>8080</code>. It is straightforward to substitute a different IP address or port number if necessary.</p>

<p>Kill Bill supports the <code>https</code> protocol, but here all examples are shown using <code>http</code>.</p>
<pre class="highlight java tab-java"><code><span class="c1">//</span>
<span class="c1">// You can find the java client on github: https://github.com/killbill/killbill-client-java</span>
<span class="c1">//</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="c1">#</span>
<span class="c1"># You can find the ruby client on github: https://github.com/killbill/killbill-client-ruby</span>
<span class="c1">#</span>
</code></pre>
<p>The description of the API in this documentation is limited to the most common use cases and does not include advanced features that we have crafted over the years from all the use cases we have seen from our users.</p>

<p>For questions about API use, or to report bugs, you can subscribe to the <a href="https://groups.google.com/forum/#!forum/killbilling-users">Kill Bill user mailing list</a>.</p>
<h2 id='using-kill-bill-apis-authentication-and-rbac'>Authentication and RBAC</h2>
<p>In order to make API calls, one needs to authenticate each request by passing an HTTP <code>Authorization</code> header and by following the HTTP Basic authentication scheme.</p>

<p>Depending on how the system has been configured, the authentication mechanism can happen using different options -- some or all at the same time:</p>

<ul>
<li>Flat file configuration</li>
<li>Database configuration</li>
<li>LDAP configuration</li>
<li>OKTA configuration</li>
</ul>

<p>The system also supports configuring roles and permissions, to restrict user access to certain resources and operations. The permissions are quite granular and are defined <a href="https://github.com/killbill/killbill-api/blob/master/src/main/java/org/killbill/billing/security/Permission.java#L19">here</a></p>
<h2 id='using-kill-bill-apis-multi-tenancy'>Multi-Tenancy</h2>
<p>Kill Bill has been designed from the ground up to run multiple logical instances on the same set of servers and databases. This allows different customer data sets to be cleanly separated. Another common use case is to configure both a production tenant and a test tenant, the latter being used for test requests during deployment and for sanity after deployment.</p>

<p>Each API call requires the tenant being used to be identified, through the use of 2 HTTP headers:</p>

<ul>
<li><strong><code>X-Killbill-ApiKey</code></strong>: The API key associated with the tenant. This value is stored in clear in the database.</li>
<li><strong><code>X-Killbill-ApiSecret</code></strong>: The API secret associated with the tenant. This value is hashed and stored along with the <code>salt</code> in the database</li>
</ul>

<aside class="notice">Note: You can control the number of hash iterations through the system property `org.killbill.security.shiroNbHashIterations` whose default value is set to `200000`. If your security requirements are met through other means, you can set this value to `1` to avoid wasting CPU cycles and greatly improve latency. Changing the value on an existing system requires re-hashing the keys.</aside>

<blockquote>
<p>Specifying the basic authentication headers and multi-tenancy headers:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
-u admin:password <span class="se">\</span>
-H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
-H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
...
</code></pre><pre class="highlight java tab-java"><code><span class="n">KillBillHttpClient</span> <span class="n">killBillHttpClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KillBillHttpClient</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"http://%s:%d"</span><span class="o">,</span> <span class="s">"127.0.0.1"</span><span class="o">,</span> <span class="mi">8080</span><span class="o">),</span>
                                                               <span class="n">username</span><span class="o">,</span>
                                                               <span class="n">password</span><span class="o">,</span>
                                                               <span class="n">apiKey</span><span class="o">,</span>
                                                               <span class="n">apiSecret</span><span class="o">,</span>
                                                               <span class="kc">null</span><span class="o">,</span>
                                                               <span class="kc">null</span><span class="o">,</span>
                                                               <span class="mi">1000</span><span class="o">,</span>
                                                               <span class="mi">5000</span><span class="o">,</span>
                                                               <span class="mi">5000</span><span class="o">);</span>

<span class="n">AccountApi</span> <span class="n">accountApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccountApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">AdminApi</span> <span class="n">adminApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdminApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">BundleApi</span> <span class="n">bundleApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BundleApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">CatalogApi</span> <span class="n">catalogApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CatalogApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">CreditApi</span> <span class="n">creditApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreditApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">CustomFieldApi</span> <span class="n">customFieldApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFieldApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">ExportApi</span> <span class="n">exportApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ExportApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">InvoiceApi</span> <span class="n">invoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">InvoiceItemApi</span> <span class="n">invoiceItemApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItemApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoicePaymentApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">NodesInfoApi</span> <span class="n">nodesInfoApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NodesInfoApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">OverdueApi</span> <span class="n">overdueApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OverdueApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PaymentApi</span> <span class="n">paymentApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PaymentGatewayApi</span> <span class="n">paymentGatewayApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentGatewayApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentMethodApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransactionApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PluginInfoApi</span> <span class="n">pluginInfoApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PluginInfoApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">SecurityApi</span> <span class="n">securityApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SecurityApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubscriptionApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">TagApi</span> <span class="n">tagApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TagApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">TagDefinitionApi</span> <span class="n">tagDefinitionApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TagDefinitionApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">TenantApi</span> <span class="n">tenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TenantApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">UsageApi</span> <span class="n">usageApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UsageApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>

<span class="c1">// Request Options example</span>
<span class="n">String</span> <span class="n">createdBy</span> <span class="o">=</span> <span class="s">"me"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">reason</span> <span class="o">=</span> <span class="s">"Going through my first tutorial"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">comment</span> <span class="o">=</span> <span class="s">"I like it!"</span><span class="o">;</span>

<span class="n">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"bob"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"lazar"</span><span class="o">;</span>


<span class="n">RequestOptions</span> <span class="n">requestOptions</span> <span class="o">=</span> <span class="n">RequestOptions</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                                              <span class="o">.</span><span class="na">withCreatedBy</span><span class="o">(</span><span class="n">createdBy</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withReason</span><span class="o">(</span><span class="n">reason</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withComment</span><span class="o">(</span><span class="n">comment</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withQueryParams</span><span class="o">(</span><span class="n">queryParams</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withTenantApiKey</span><span class="o">(</span><span class="n">apiKey</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withTenantApiSecret</span><span class="o">(</span><span class="n">apiSecret</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'killbill_client'</span>

<span class="no">KillBillClient</span><span class="p">.</span><span class="nf">url</span> <span class="o">=</span> <span class="s1">'http://127.0.0.1:8080'</span>

<span class="c1"># Multi-tenancy and RBAC credentials</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s1">'admin'</span><span class="p">,</span>
  <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="s1">'password'</span><span class="p">,</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s1">'bob'</span><span class="p">,</span>
  <span class="ss">:api_secret</span> <span class="o">=&gt;</span> <span class="s1">'lazar'</span>
<span class="p">}</span>

<span class="c1"># Audit log data</span>
<span class="n">user</span> <span class="o">=</span> <span class="s1">'me'</span>
<span class="n">reason</span> <span class="o">=</span> <span class="s1">'Going through my first tutorial'</span>
<span class="n">comment</span> <span class="o">=</span> <span class="s1">'I like it!'</span>

<span class="c1"># Start using....</span>

</code></pre><pre class="highlight python tab-python"><code><span class="c"># Edit file: configuration.py, lines:50-62</span>

<span class="c"># Default Base url</span>
<span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="s">"http://localhost:8080"</span>
<span class="c"># Temp file folder for downloading files</span>
<span class="bp">self</span><span class="o">.</span><span class="n">temp_folder_path</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c"># Authentication Settings</span>
<span class="c"># dict to store API key(s)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># dict to store API prefix (e.g. Bearer)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">api_key_prefix</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Username for HTTP basic authentication</span>
<span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="s">"admin"</span>
<span class="c"># Password for HTTP basic authentication</span>
<span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="s">"password"</span>

<span class="c">####################################################</span>

<span class="c"># Basic example using the client</span>
<span class="n">exampleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ExampleApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Example</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'John'</span><span class="p">,</span> <span class="n">last_name</span> <span class="o">=</span> <span class="s">'Doe'</span><span class="p">)</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="s">'me'</span>
<span class="n">api_key</span> <span class="o">=</span> <span class="s">'bob'</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">'lazar'</span>

<span class="n">exampleApi</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> 
                  <span class="n">created_by</span><span class="p">,</span> 
                  <span class="n">api_key</span><span class="p">,</span> 
                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre><h2 id='using-kill-bill-apis-resource-ids-and-external-keys'>Resource IDs and External Keys</h2>
<p>When a new resource is created, there are 2 IDS associated with it. Kill Bill will allocate a unique ID, and the user of the API will also be able to associate its own unique key, called the <code>external key</code>. The external key is used for 2 scenarios:</p>

<ul>
<li><strong>ID Mapping</strong>: Typically an external key can be passed to create a mapping between the ID generated by Kill Bill and a known key for this resource</li>
<li><strong>Idempotency</strong>: Kill Bill ensures that each external key is unique, so if an API call times out, it can be safely retried with the same external key. The second request would only succeed if the first one did not complete. This ensures idempotency of the call, since the external key is unique per tenant and across all resources.</li>
</ul>
<h2 id='using-kill-bill-apis-pagination'>Pagination</h2>
<p>Besides the traditional CRUD APIs associated with each resource, we also offer pagination APIs to allow the listing of per-tenant resources, such as all <code>Account</code>s for a given tenant. These APIs include an <code>offset</code> and a <code>limit</code>, provided as query parameters, to allow the listing of all resources of a given type, on a page by page basis. In addition to the json list, each response will also include the following http headers:</p>

<ul>
<li><strong><code>X-Killbill-Pagination-CurrentOffset</code></strong> : The offest of the first record in the returned list</li>
<li><strong><code>X-Killbill-Pagination-NextOffset</code></strong> : The header will only be present if there are additional entries to return and would include the next offset</li>
<li><strong><code>X-Killbill-Pagination-TotalNbRecords</code></strong> : The total number of records</li>
<li><strong><code>X-Killbill-Pagination-NextPageUri</code></strong> : The uri that can be used to retrieve the next page.</li>
</ul>
<h2 id='using-kill-bill-apis-audit-and-history'>Audit and History</h2>
<p>Every api in Kill Bill that creates, or modifies state will create an audit log record to track <em>who</em> made the change. In addition, we also allow the record to specify <em>why</em> this change was made. This information is passed for every <code>POST</code>, <code>PUT</code>, and <code>DELETE</code> request and relies on special HTTP headers:</p>

<ul>
<li><strong><code>X-Killbill-CreatedBy</code></strong> : Mandatory header to track who made the change.</li>
<li><strong><code>X-Killbill-Reason</code></strong> : Optional header to track the reason; typically one would use a special reason code -- e.g <em>COURTESY_REFUND</em>.</li>
<li><strong><code>X-Killbill-Comment</code></strong> : Optional header to track the metadata; typically one would add more information -- e.g &#39;Good old faithful customer&#39;.</li>
</ul>

<p>In addition to the audit log, Kill Bill also records the history of the changes. For instance updating the billing addess of a customer would create an additonal row to track the change and link it to the audit log. The <code>audit</code> query parameter can take the following values:</p>

<ul>
<li><strong><code>NONE</code></strong> <span style="color:#32A9C7"><em>[Default]</em></span>: No audit log is beeing returned. </li>
<li><strong><code>MINIMAL</code></strong> : Only rows associated to <em>inserts</em> are being returned, but no <code>updates</code>.</li>
<li><strong><code>FULL</code></strong> : Everything is being returned.<br></li>
</ul>

<blockquote>
<p>Request: Fetching an account specifying <code>audit=MINIMAL</code></p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
-u admin:password <span class="se">\</span>
-H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
-H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
<span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/e8877928-0226-488d-9272-07a5e66d897f?audit=MINIMAL"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">Account</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                      <span class="kc">false</span><span class="o">,</span>
                                      <span class="kc">false</span><span class="o">,</span>
                                      <span class="n">AuditLevel</span><span class="o">.</span><span class="na">MINIMAL</span><span class="o">,</span>
                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>  <span class="no">Api</span> <span class="n">does</span> <span class="n">not</span> <span class="n">exist</span> <span class="p">;</span><span class="o">-</span><span class="p">(</span>

</code></pre>
<blockquote>
<p>Response: </p>
</blockquote>
<pre class="highlight plaintext"><code>{
  ...
  "auditLogs": [
    {
      "changeType": "INSERT",
      "changeDate": "2018-02-05T22:39:53.000Z",
      "changedBy": "demo",
      "reasonCode": null,
      "comments": null,
      "userToken": "4858a67e-03b0-4d94-8a8c-bcd6e8599452"
    }
  ]
}  
</code></pre>
<p>Every API that retrieves information, whether associated with a specific resource, or with a list of resources,  may return audit logs. </p>

<p>Audit and history information associated with a given resource is always stored atomically to ensure that if the state is changed, such audit and history information exists and is accurate.</p>
<h2 id='using-kill-bill-apis-versioning'>Versioning</h2><h3 id='using-kill-bill-apis-kill-bill-server'>Kill Bill Server</h3>
<p>Kill Bill software is composed of many different repositories, all of them hosted on our <a href="https://github.com/killbill">github account</a>.</p>

<p>The Kill Bill server version, or simply Kill Bill version, is the one from the <a href="https://github.com/killbill/killbill">killbill</a> repository, and more specifically since we are using <code>maven</code> to build, this is indicated in the corresponding <code>pom.xml</code>. This repository depends on a few others, each having their own versions:</p>

<ul>
<li><code>killbill-api</code>: APIs used by plugins to communicate with Kill Bill core</li>
<li><code>killbill-plugin-api</code>: APIs used by Kill Bill core to communicate with plugins</li>
<li><code>killbill-commons</code>: Common code across modules</li>
<li><code>killbill-platform</code>: Platform related code such as OSGI framework, webapp pieces</li>
<li><code>killbill-client</code>: Java client, only used for integration tests inside killbill repository.</li>
</ul>

<p>The version for all these dependencies is managed in the parent <a href="https://github.com/killbill/killbill-oss-parent/blob/master/pom.xml">pom.xml</a>. So in particular, for a given Kill Bill version, you can look up the version of the parent <code>pom.xml</code> and from there access all the dependencies.</p>

<p>The current <strong>stable</strong> and <strong>production</strong> ready version of Kill Bill is <code>0.22.y</code>. You should use the latest relased (<code>y</code>) version as it may contain critical bug fixes.</p>

<ul>
<li>Any bug fixes will result in a new version identified by incrementing the <code>patch</code> number (<code>y</code>). We guarantee compatibility of these versions with those immediately preceding them. Each version will be accompanied by release notes on github - e.g <a href="https://github.com/killbill/killbill/releases/tag/killbill-0.22.8">0.22.8 release notes</a>.</li>
<li>New development may happen in parallel. This may lead to the release of development versions. Such versions are not yet deemed stable, and will not be supportetd on the public mailing list.</li>
</ul>

<p>The choice of releasing <code>0.x.y</code> and not <code>1.x.y</code> is motivated by our desire to add additional features in upcoming releases, and is in no way a statement about code instability.</p>

<p>More information on Kill Bill versions can be found <a href="http://docs.killbill.io/0.22/development.html#_versioning">here</a>.</p>
<h3 id='using-kill-bill-apis-client-libraries'>Client Libraries</h3>
<p>Our client libraries contain a <code>README</code> section to describe their compatibility with the Kill Bill server. For instance, such compatibility mapping can be seen in our java client <a href="https://github.com/killbill/killbill-client-java/blob/master/README.md#kill-bill-compatibility">here</a>.</p>
<h3 id='using-kill-bill-apis-plugins'>Plugins</h3>
<p>Each plugin also has its own version, and we also keep a <code>README</code> with the mapping section. For example, such a section for the adyen payment plugin can be found <a href="https://github.com/killbill/killbill-adyen-plugin/blob/master/README.md#kill-bill-compatibility">here</a>.</p>

<p>We also keep a global repository for all plugins <a href="https://github.com/killbill/killbill-cloud/blob/master/kpm/lib/kpm/plugins_directory.yml">here</a>. The simple file-based approach is an internal implementation. This brings us to our next topic, <code>KPM</code>.</p>
<h3 id='using-kill-bill-apis-kpm'>KPM</h3>
<p><code>KPM</code>, The Kill Bill Package Manager, provides among <a href="https://github.com/killbill/killbill-cloud/tree/master/kpm">other things</a> the ability to retrieve version mapping for dependencies and plugins -- see the example on the right side.</p>
<pre class="highlight plaintext"><code>
# Look up version dependencies matching Kill Bill release 0.22.8:
&gt; kpm info  --version=0.22.8

Fetching info for version 0.22.8...
Dependencies for version 0.22.8
  killbill 0.22.8
  killbill-oss-parent 0.143.60
  killbill-api 0.53.17
  killbill-plugin-api 0.26.4
  killbill-commons 0.23.11
  killbill-platform 0.39.15

Known plugins for KB version 0.22.8
  analytics 7.0.8
  avatax 0.7.0
  email-notifications 0.6.1
  payment-test 7.0.4
  stripe 7.0.4
  ...

</code></pre><h2 id='using-kill-bill-apis-errors'>Errors</h2>
<p>Kill Bill relies on HTTP response codes to indicate the success or failure of an API request:</p>

<ul>
<li><strong><code>2xx</code></strong> status indicates success</li>
<li><strong><code>4xx</code></strong> status often indicates a client side error -- e.g missing madatory API field</li>
<li><strong><code>5xx</code></strong> status indicates an error with Kill Bill&#39;s servers or third party system -- e.g payment gateway returns 5xx.</li>
</ul>
<pre class="highlight plaintext"><code>HTTP status code summary:
200 - OK: A response body may be returned.
201 - Created: Success in creating a new resource. A Location header is returned to indicate the uri that can be used to fetch the resource
202 - Accepted: The request has been accepted and will be processed asynchronously.
204 - No Content: The request was processed sucesfully but no response body is returned.
400 - Bad Request: Invalid/missing parameter from client.
401 - Unauthorized: Authorization failed.
402 - Request Failed: Request parameter were valid but request failed -- insufficient fund on a payment request.
404 - Not Found: The requested resource does not exist.
409 - Conflict: The request conflicts with another request.
422 - Unprocessable Entity: Payment control plugin aborted the call.
500 - Unexpected system error.
502 - Bad Gateway : Unknow failure from payment plugin (PLUGIN_FAILURE).
503 - Service Unavailable: Kill Bill or a third party system -- e.g payment gateway -- is unavailable.
504 - Gateway Timeout: Payment gateway timed out.
</code></pre>
<p>In addition to these error codes, the system will often return some json to provide more details about the error:</p>

<ul>
<li><strong><code>code</code></strong> : Each error in Kill Bill is associated with a an <a href="https://github.com/killbill/killbill-api/blob/master/src/main/java/org/killbill/billing/ErrorCode.java#L21">ErrorCode</a>.</li>
<li><strong><code>formattedMsg</code></strong> : A description of the error for the specific resource(s).</li>
<li><strong><code>cause</code></strong> : An optional stack trace.</li>
</ul>
<h2 id='using-kill-bill-apis-additional-resources'>Additional Resources</h2>
<p>Our main documentation is found <a href="http://docs.killbill.io">here</a>.</p>
<h1 id='tenant'>Tenant</h1><h2 id='tenant-tenant-resource'>Tenant Resource</h2>
<p>Kill Bill has been designed from the ground up as a multi-tenant system, that is, one where multiple unrelated deployments can be hosted on the same physical system. Each deployment has its own separate configuration, catalog, and plugins, and of course its data set is kept entirely separate from the others. RBAC control allows different users/admin/apps to access zero, one or multiple tenants. This <a href="https://killbill.io/blog/subscription-service-using-kill-bill/">blog</a> illustrates some interesting use cases. The <code>Tenant</code> resource allows the management of such tenants.</p>

<p>The attributes of the <code>Tenant</code> resource object are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tenantId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this tenant</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>system or user</td>
<td>Optional external key provided by the client</td>
</tr>
<tr>
<td><strong>apiKey</strong></td>
<td>string</td>
<td>user</td>
<td>The API key associated with the tenant</td>
</tr>
<tr>
<td><strong>apiSecret</strong></td>
<td>string</td>
<td>user</td>
<td>The API secret associated with the tenant. This value is hashed and cannot be retrieved.</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>Array of audit log records for this tenant</td>
</tr>
</tbody></table>

<p>Note that The tenant itself has very few attributes, as most attributes belong to the individual accounts and related resources.</p>
<h2 id='tenant-tenant'>Tenant</h2>
<p>These endpoints manage information that is maintained at the tenant level. Unless otherwise stated, the tenant is identified by its API key in the header.</p>
<h3 id='tenant-create-a-tenant'>Create a tenant</h3>
<p>This API creates a new tenant. NOTE: If you create a tenant using this API, it will <em>not</em> be recognized immediately by KAUI because KAUI will be unable to retrieve the <code>apiSecret</code>. To fix this, you should &quot;create&quot; the same tenant separately after logging into KAUI. This will <em>not</em> create another tenant, but it will synchronize KAUI with the one already created.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "apiKey": "bob", "apiSecret": "lazar"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">tenantId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="n">bob</span><span class="o">;</span>
<span class="n">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="n">lazar</span><span class="o">;</span>

<span class="n">Tenant</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tenant</span><span class="o">(</span><span class="n">tenantId</span><span class="o">,</span>
                         <span class="n">externalKey</span><span class="o">,</span>
                         <span class="n">apiKey</span><span class="o">,</span>
                         <span class="n">apiSecret</span><span class="o">);</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">createTenant</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tenant</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">new</span>
<span class="n">tenant</span><span class="p">.</span><span class="nf">external_key</span> <span class="o">=</span> <span class="s2">"demo_external_key"</span>
<span class="n">tenant</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"demo_api_key"</span>
<span class="n">tenant</span><span class="p">.</span><span class="nf">api_secret</span> <span class="o">=</span> <span class="s2">"demo_api_secret"</span>

<span class="n">use_global_defalut</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">tenant</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">use_global_defalut</span><span class="p">,</span> 
              <span class="n">user</span><span class="p">,</span> 
              <span class="n">reason</span><span class="p">,</span> 
              <span class="n">comment</span><span class="p">,</span> 
              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">Tenant</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s">'demo_api_key'</span><span class="p">,</span> <span class="n">api_secret</span><span class="o">=</span><span class="s">'demo_api_secret'</span><span class="p">)</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">create_tenant</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/tenants/e7b03c81-f41a-4eb7-a645-b9166057f186
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Tenant</span> <span class="o">{</span>
    <span class="nl">tenantId:</span> <span class="mi">5</span><span class="n">cce926f</span><span class="o">-</span><span class="mi">7</span><span class="n">f3a</span><span class="o">-</span><span class="mi">4007</span><span class="o">-</span><span class="n">a5a0</span><span class="o">-</span><span class="n">e5b55fc50079</span>
    <span class="nl">externalKey:</span> <span class="kc">null</span>
    <span class="nl">apiKey:</span> <span class="n">bob</span>
    <span class="nl">apiSecret:</span> <span class="n">lazar</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"tenantId"</span><span class="ss">:"ab5981c2-de14-43d6-a35b-a2ed0b28c746"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"demo_external_key"</span><span class="p">,</span>
   <span class="s2">"apiKey"</span><span class="ss">:"bob
}
</span></code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing a Tenant resource. The only paramaters required are <code>apiKey</code> and <code>apiSecret</code>. The <code>externalKey</code> is optional and will be set to null if not supplied. The <code>tenantId</code> and the audit logs are generated by the system.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>useGlobalDefault</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, configure the tenant with a default catalog</td>
</tr>
</tbody></table>

<p>Setting the <code>useGlobalDefault</code> parameter to <code>true</code> can be used for test purposes. This will configure the tenant with a default catalog, and therefore make it easy to quickly start playing with the apis. Note that in order to then upload a new custom catalog, one would need to <a href="#admin-invalidates-caches-per-tenant-level">invalidate the caches for this tenant</a>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition a <code>Location</code> parameter is returned in the header. This parameter gives the URL for the tenant, including the <code>tenantId</code>.</p>
<h3 id='tenant-retrieve-a-tenant-by-id'>Retrieve a tenant by id</h3>
<p>Retrieves a tenant resource, given its ID.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/{tenantId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/6907712e-e940-4033-8695-36894db128d3"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">tenantId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"6907712e-e940-4033-8695-36894db128d3"</span><span class="o">);</span>
<span class="n">tenantApi</span><span class="o">.</span><span class="na">getTenant</span><span class="o">(</span><span class="n">tenantId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tenant_id</span> <span class="o">=</span> <span class="s2">"ab5981c2-de14-43d6-a35b-a2ed0b28c746"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">tenant_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenant</span><span class="o">.</span><span class="n">get_tenant</span><span class="p">(</span><span class="n">tenant_id</span><span class="o">=</span><span class="s">'3d90ec45-c640-4fd7-abde-798bc582513b'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
  <span class="s2">"tenantId"</span>: <span class="s2">"6907712e-e940-4033-8695-36894db128d3"</span>,
  <span class="s2">"externalKey"</span>: <span class="s2">"1532546166-326384"</span>,
  <span class="s2">"apiKey"</span>: <span class="s2">"bob"</span>,
  <span class="s2">"apiSecret"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Tenant</span> <span class="o">{</span>
  <span class="s">"tenantId"</span><span class="o">:</span> <span class="s">"6907712e-e940-4033-8695-36894db128d3"</span><span class="o">,</span>
  <span class="s">"externalKey"</span><span class="o">:</span> <span class="s">"1532546166-326384"</span><span class="o">,</span>
  <span class="s">"apiKey"</span><span class="o">:</span> <span class="s">"bob"</span><span class="o">,</span>
  <span class="s">"apiSecret"</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
  <span class="s">"auditLogs"</span><span class="o">:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"tenantId"</span><span class="ss">:"ab5981c2-de14-43d6-a35b-a2ed0b28c746"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"demo_external_key"</span><span class="p">,</span>
   <span class="s2">"apiKey"</span><span class="ss">:"bob"</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'api_key'</span><span class="p">:</span> <span class="s">'udwg'</span><span class="p">,</span>
 <span class="s">'api_secret'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'tenant_id'</span><span class="p">:</span> <span class="s">'3d90ec45-c640-4fd7-abde-798bc582513b'</span><span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>none</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant resource object.  The <code>apiSecret</code> attribute is returned as <code>null</code>, since it cannot be retrieved.</p>
<h3 id='tenant-retrieve-a-tenant-by-its-api-key'>Retrieve a tenant by its API key</h3>
<p>Retrieves a tenant resource, given its <code>apiKey</code>. The <code>apiKey</code> is passed as a query parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants?apiKey=bob"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"bob"</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">getTenantByApiKey</span><span class="o">(</span><span class="n">apiKey</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"demo_api_key"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">find_by_api_key</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">get_tenant_by_api_key</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s">'bob'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
  <span class="s2">"tenantId"</span>: <span class="s2">"6907712e-e940-4033-8695-36894db128d3"</span>,
  <span class="s2">"externalKey"</span>: <span class="s2">"1532546166-326384"</span>,
  <span class="s2">"apiKey"</span>: <span class="s2">"bob"</span>,
  <span class="s2">"apiSecret"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="o">{</span>
  <span class="s">"tenantId"</span><span class="o">:</span> <span class="s">"6907712e-e940-4033-8695-36894db128d3"</span><span class="o">,</span>
  <span class="s">"externalKey"</span><span class="o">:</span> <span class="s">"1532546166-326384"</span><span class="o">,</span>
  <span class="s">"apiKey"</span><span class="o">:</span> <span class="s">"bob"</span><span class="o">,</span>
  <span class="s">"apiSecret"</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
  <span class="s">"auditLogs"</span><span class="o">:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"tenantId"</span><span class="ss">:"ab5981c2-de14-43d6-a35b-a2ed0b28c746"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"demo_external_key"</span><span class="p">,</span>
   <span class="s2">"apiKey"</span><span class="ss">:"bob"</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'api_key'</span><span class="p">:</span> <span class="s">'bob'</span><span class="p">,</span>
 <span class="s">'api_secret'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'tenant_id'</span><span class="p">:</span> <span class="s">'3d90ec45-c640-4fd7-abde-798bc582513b'</span><span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>apiKey</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>api key</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant resource object.  The <code>apiSecret</code> attribute is returned as <code>null</code>, since it cannot be retrieved.</p>
<h2 id='tenant-push-notifications'>Push Notifications</h2>
<p>Push notifications are a convenient way to get notified about events from the system.
One can register a callback, i.e, a valid URL that will be called whenever there is an event dispatched for this tenant.
Note that this can result in a large number of calls; every time there is a state change for one of the <code>Accounts</code>
in this tenant, the callback will be invoked.</p>

<p>In case of error, the system will retry the callback as defined by the system property <code>org.killbill.billing.server.notifications.retries</code>.</p>

<p>See push notification documentation <a href="https://docs.killbill.io/latest/push_notifications.html">here</a> for further information.</p>
<h3 id='tenant-register-a-push-notification'>Register a push notification</h3>
<p>Register a callback URL for this tenant for push notifications.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback?cb=http://demo/callmeback'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">cb</span> <span class="o">=</span> <span class="s">"http://demo/callmeback"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">registerPushNotificationCallback</span><span class="o">(</span><span class="n">cb</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">register_push_notification_callback</span><span class="p">(</span><span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="s">'http://demo/callmeback'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/tenants/registerNotificationCallback
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PUSH_NOTIFICATION_CB</span>
    <span class="nl">values:</span> <span class="o">[</span><span class="nl">http:</span><span class="c1">//demo/callmeback]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>cb</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>callback URL to register</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> item is returned in the header giving the URL for this callback.</p>
<h3 id='tenant-retrieve-a-registered-push-notification'>Retrieve a registered push notification</h3>
<p>Gets the push notification registered for this tenant, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/tenants/registerNotificationCallback"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getPushNotificationCallbacks</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">get_push_notification_callbacks</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"key"</span>: <span class="s2">"PUSH_NOTIFICATION_CB"</span>,
  <span class="s2">"values"</span>: <span class="o">[</span>
    <span class="s2">"http://demo/callmeback"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PUSH_NOTIFICATION_CB</span>
    <span class="nl">values:</span> <span class="o">[</span><span class="nl">http:</span><span class="c1">//demo/callmeback]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'key'</span><span class="p">:</span> <span class="s">'PUSH_NOTIFICATION_CB'</span><span class="p">,</span> <span class="s">'values'</span><span class="p">:</span> <span class="p">[</span><span class="s">'http://demo/callmeback'</span><span class="p">]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a body containing a key-value object as follows:</p>

<p>{
  &quot;key&quot;: &quot;PUSH_NOTIFICATION_CB&quot;,
  &quot;values&quot;: list containing the callback URL, if any
}</p>
<h3 id='tenant-delete-a-registered-push-notification'>Delete a registered push notification</h3>
<p>Deletes the registered callback URL, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deletePushNotificationCallbacks</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_push_notification_callbacks</span><span class="p">(</span><span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='tenant-tenant-key-value-pairs'>Tenant Key-Value Pairs</h2>
<p>These endpoints provide a mechanism to register and manage <code>{key, value}</code> pairs for a given tenant. This functionality
is used internally by the system to keep track of all the per-tenant configuration, including system properties, plugin configuration, and others discussed below. In addition, you can add <em>user</em> keys to keep track of additional information that may be desired. For example, some global setting that would be accessible for all plugins could be stored here.</p>
<h3 id='tenant-add-a-per-tenant-user-key-value'>Add a per tenant user key/value</h3>
<p>This API adds a key-value pair to the tenant database. If the key already exists its value is replaced. The key is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/{keyName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s2">"demo_value"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/demo_value"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">keyName</span> <span class="o">=</span> <span class="s">"demo_value"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"demo_value"</span><span class="o">;</span>
<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">insertUserKeyValue</span><span class="o">(</span><span class="n">keyName</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">key_name</span> <span class="o">=</span> <span class="s2">"demo_value"</span>
<span class="n">key_value</span> <span class="o">=</span> <span class="s2">"demo_value"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">upload_tenant_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span> 
                                                           <span class="n">key_value</span><span class="p">,</span> 
                                                           <span class="n">user</span><span class="p">,</span> 
                                                           <span class="n">reason</span><span class="p">,</span> 
                                                           <span class="n">comment</span><span class="p">,</span> 
                                                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">key_name</span> <span class="o">=</span> <span class="s">'demo_value'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'demo_value'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">insert_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/tenants/userKeyValue/demo_value
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">demo_value</span>
    <span class="nl">values:</span> <span class="o">[</span><span class="n">demo_value</span><span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"key"</span><span class="ss">:"demo_value"</span><span class="p">,</span>
   <span class="s2">"values"</span><span class="p">:[</span>
      <span class="s2">"demo_value"</span>
   <span class="p">]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The body contains a single string representing the value.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> item is returned in the header giving the URL for this key-value pair.</p>
<h3 id='tenant-retrieve-a-per-tenant-user-key-value'>Retrieve a per tenant user key value</h3>
<p>Retrieves the value for a specified key, if it exists, from the tenant database. The key name is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/{keyName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/demo_value"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">keyName</span> <span class="o">=</span> <span class="s">"demo_value"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getUserKeyValue</span><span class="o">(</span><span class="n">keyName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">key_name</span> <span class="o">=</span> <span class="s2">"demo_value"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">get_tenant_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">key_name</span> <span class="o">=</span> <span class="s">'demo_value'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">get_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"key"</span>: <span class="s2">"demo_value"</span>,
  <span class="s2">"values"</span>: <span class="o">[</span>
    <span class="s2">"demo_value"</span>,
    <span class="s2">"demo_value"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">demo_value</span>
    <span class="nl">values:</span> <span class="o">[</span><span class="n">demo_value</span><span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"key"</span><span class="ss">:"demo_value"</span><span class="p">,</span>
   <span class="s2">"values"</span><span class="p">:[</span>
      <span class="s2">"demo_value"</span>
   <span class="p">]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'key'</span><span class="p">:</span> <span class="s">'demo_value'</span><span class="p">,</span> <span class="s">'values'</span><span class="p">:</span> <span class="p">[]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object. The key value object includes the key name and a JSON array containing the value, if any, or a comma-separated list of values. For example:</p>

<p>{
  &quot;key&quot;: &quot;MYKEY&quot;,
  &quot;values&quot;: [
    &quot;value1&quot;,
    &quot;value2&quot;
  ]
}</p>

<p>If the key does not exist no error is signalled but the <code>values</code> list is empty.</p>
<h3 id='tenant-delete-a-per-tenant-user-key-value'>Delete a per tenant user key/value</h3>
<p>Deletes a key and its value, if it exists, from the tenant database. The key is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/{keyName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/demo_value"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">keyName</span> <span class="o">=</span> <span class="s">"demo_value"</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deleteUserKeyValue</span><span class="o">(</span><span class="n">keyName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">key_value</span> <span class="o">=</span> <span class="s2">"demo_value"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">delete_tenant_user_key_value</span><span class="p">(</span><span class="n">key_value</span><span class="p">,</span> 
                                                           <span class="n">user</span><span class="p">,</span>
                                                           <span class="n">reason</span><span class="p">,</span> 
                                                           <span class="n">comment</span><span class="p">,</span> 
                                                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">key_name</span> <span class="o">=</span> <span class="s">'demo_value'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. No error is signalled if the key does not exist.</p>
<h3 id='tenant-retrieve-per-tenant-keys-and-values-based-on-a-key-prefix'>Retrieve per tenant keys and values based on a key prefix</h3>
<p>This API enables searching for existing keys based on a prefix of the key name. For example, a search string of &quot;MYK&quot; would match keys such as <code>MYKEY1</code>, <code>MYKEY2</code>, etc. The search string is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig/{keyPrefix}/search</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig/PER_TENANT/search"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">keyPrefix</span> <span class="o">=</span> <span class="s">"PER_TENANT"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getAllPluginConfiguration</span><span class="o">(</span><span class="n">keyPrefix</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">key_prefix</span> <span class="o">=</span> <span class="s2">"PER_TENANT"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">search_tenant_config</span><span class="p">(</span><span class="n">key_prefix</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">get_all_plugin_configuration</span><span class="p">(</span><span class="n">key_prefix</span><span class="o">=</span><span class="s">'tenant_config'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"key"</span>: <span class="s2">"PER_TENANT_CONFIG"</span>,
  <span class="s2">"values"</span>: <span class="o">[</span>
    <span class="s2">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PER_TENANT_CONFIG</span>
    <span class="nl">values:</span> <span class="o">[</span>
    <span class="s">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'key'</span><span class="p">:</span> <span class="s">'PER_TENANT_CONFIG'</span><span class="p">,</span> <span class="s">'values'</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span>
  <span class="p">]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object containing the key and values for any keys that match the search string.</p>
<h2 id='tenant-system-properties-configuration'>System Properties Configuration</h2>
<p>These endpoints allow setting of some system properties on a per-tenant basis. Please refer to our <a href="https://docs.killbill.io/latest/userguide_configuration.html">configuartion guide</a> to see what can be configured in the system.
Some of the configuration can be overriden at the tenant level to allow for different behaviors.</p>

<p>Note that this is actually a special case of per-tenant key-value pairs; the key is &quot;PER_TENANT_CONFIG&quot; and the value is a comma-separated list of system properties with their values.</p>
<h3 id='tenant-add-a-per-tenant-system-properties-configuration'>Add a per tenant system properties configuration</h3>
<p>This API is used to set the value of specific system properties, overriding the system-wide values.</p>

<p>For example, in order to disable the invoice safety bound mechanism on a per-tenant level, this API could be used to set the per-tenant system property <code>org.killbill.invoice.sanitySafetyBoundEnabled</code> to false.</p>

<p>The API sets the value of the &quot;PER_TENANT_CONFIG&quot; key, replacing any previous value.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s2">"{"</span>org.killbill.invoice.sanitySafetyBoundEnabled<span class="s2">":"</span><span class="nb">false</span><span class="s2">"}"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">invoice</span><span class="o">.</span><span class="na">sanitySafetyBoundEnabled</span><span class="s">":"</span><span class="kc">false</span><span class="s">"}"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">uploadPerTenantConfiguration</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'{"org.killbill.invoice.sanitySafetyBoundEnabled":"false"}'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">upload_per_tenant_configuration</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/tenants/uploadPerTenantConfig
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PER_TENANT_CONFIG</span>
    <span class="nl">values:</span> <span class="o">[</span>
    <span class="s">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='tenant-retrieve-a-per-tenant-system-properties-configuration'>Retrieve a per tenant system properties configuration</h3>
<p>Retrieves the per-tenant system property settings, which are given as the value of the key <code>PER_TENANT_CONFIG</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getPerTenantConfiguration</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">get_per_tenant_configuration</span><span class="p">()</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"key"</span>: <span class="s2">"PER_TENANT_CONFIG"</span>,
  <span class="s2">"values"</span>: <span class="o">[</span>
    <span class="s2">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PER_TENANT_CONFIG</span>
    <span class="nl">values:</span> <span class="o">[</span>
    <span class="s">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'key'</span><span class="p">:</span> <span class="s">'PER_TENANT_CONFIG'</span><span class="p">,</span> <span class="s">'values'</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span>
  <span class="p">]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object for the key <code>PER_TENANT_CONFIG</code>.</p>
<h3 id='tenant-delete-a-per-tenant-system-properties-configuration'>Delete a per tenant system properties configuration</h3>
<p>Deletes any current per tenant system properties configuration parameters, which are given as the values of the <code>PER_TENANT_CONFIG</code> key.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deletePerTenantConfiguration</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_per_tenant_configuration</span><span class="p">(</span><span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='tenant-plugin-configuration'>Plugin Configuration</h2>
<p>Plugins also support configuration on a per-tenant level. Please refer to our <a href="https://docs.killbill.io/latest/plugin_development.html#_plugin_configuration">plugin configuration manual</a> for more details.</p>

<p>An example of the use of such per-tenant properties is to configure a payment plugin with different API keys,
one set of keys for each tenant. This allows for a true multi-tenant deployment where plugins have different configuration
based on the tenant in which they operate.</p>

<p>Upon adding or deleting a new per-tenant plugin configuration, the system will generate a <code>TENANT_CONFIG_CHANGE</code>/<code>TENANT_CONFIG_DELETION</code> event, which can be handled in the plugin to refresh its configuration. In multi-node scenarios, events will be dispatched on each node, that is, on each plugin instance so they end up with a consistent view. A lot of the logic to handle configuration update has been implemented in our plugin frameworks (see <a href="https://github.com/killbill/killbill-plugin-framework-ruby">ruby framework</a> and <a href="https://github.com/killbill/killbill-plugin-framework-java">java framework</a>).</p>

<p>As with the system properties configuration, this is actually a special case of per-tenant key-value pairs. The following endpoints provide the ability to configure plugins on a per-tenant level.</p>
<h3 id='tenant-add-a-per-tenant-configuration-for-a-plugin'>Add a per tenant configuration for a plugin</h3>
<p>Adds a per tenant key-value pair for the specified plugin. The plugin name is given as a path parameter. The key name is <code>PLUGIN_CONFIG_*plugin*</code> where <em>plugin</em> is the plugin name. The API sets the value of this key, replacing any previous value.</p>

<p>The value string uploaded is plugin dependent but typically consists of key/value properties,
or well formatted yml.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d @./config.properties <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"PLUGIN_FOO"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">pluginConfig</span> <span class="o">=</span> <span class="n">getResourceBodyString</span><span class="o">(</span><span class="s">"plugin.yml"</span><span class="o">);</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">uploadPluginConfiguration</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">pluginConfig</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">plugin_name</span> <span class="o">=</span> <span class="s2">"demo_plugin"</span>
<span class="n">plugin_config</span> <span class="o">=</span> <span class="s2">"tenant_config"</span>
<span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">upload_tenant_plugin_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> 
                                                          <span class="n">plugin_config</span><span class="p">,</span> 
                                                          <span class="n">user</span><span class="p">,</span> 
                                                          <span class="n">reason</span><span class="p">,</span> 
                                                          <span class="n">comment</span><span class="p">,</span> 
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'tenant_config'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">upload_plugin_configuration</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/tenants/uploadPluginConfig/demo_plugin
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PLUGIN_CONFIG_PLUGIN_FOO</span>
    <span class="nl">values:</span> 

    <span class="o">:</span><span class="nl">my_plugin:</span>
      <span class="o">:</span><span class="nl">test:</span> <span class="n">True</span>
      <span class="o">:</span><span class="nl">log_file:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">myplugin</span><span class="o">.</span><span class="na">log</span>
      <span class="o">:</span><span class="nl">username:</span> <span class="n">xx</span>
      <span class="o">:</span><span class="nl">password:</span> <span class="n">yoyoyo</span>
      <span class="o">:</span><span class="nl">merchant_id:</span>
        <span class="o">:</span><span class="nl">USD:</span> <span class="err">'</span><span class="mo">06</span><span class="mi">89870</span><span class="err">'</span>

    <span class="o">:</span><span class="nl">database:</span>
      <span class="o">:</span><span class="nl">adapter:</span> <span class="n">sqlite3</span>
      <span class="o">:</span><span class="nl">database:</span> <span class="n">test</span><span class="o">.</span><span class="na">db</span>

    <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"key"</span><span class="ss">:"PLUGIN_CONFIG_demo_plugin"</span><span class="p">,</span>
   <span class="s2">"values"</span><span class="p">:[</span>
      <span class="s2">"tenant_config"</span>
   <span class="p">]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A <code>Location</code> header is also returned giving the URL of the key-value pair.</p>
<h3 id='tenant-retrieve-a-per-tenant-configuration-for-a-plugin'>Retrieve a per tenant configuration for a plugin</h3>
<p>Gets the per tenant configuration value string for a specified plugin. The plugin name is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"PLUGIN_FOO"</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getPluginConfiguration</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">plugin_name</span> <span class="o">=</span> <span class="s2">"demo_plugin"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">get_tenant_plugin_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">get_plugin_configuration</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"key"</span>: <span class="s2">"PLUGIN_CONFIG_demo_plugin"</span>,
  <span class="s2">"values"</span>: <span class="o">[</span>
    <span class="s2">"tenant_config"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PLUGIN_CONFIG_PLUGIN_FOO</span>
    <span class="nl">values:</span> 

    <span class="o">:</span><span class="nl">my_plugin:</span>
      <span class="o">:</span><span class="nl">test:</span> <span class="n">True</span>
      <span class="o">:</span><span class="nl">log_file:</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">myplugin</span><span class="o">.</span><span class="na">log</span>
      <span class="o">:</span><span class="nl">username:</span> <span class="n">xx</span>
      <span class="o">:</span><span class="nl">password:</span> <span class="n">yoyoyo</span>
      <span class="o">:</span><span class="nl">merchant_id:</span>
        <span class="o">:</span><span class="nl">USD:</span> <span class="err">'</span><span class="mo">06</span><span class="mi">89870</span><span class="err">'</span>

    <span class="o">:</span><span class="nl">database:</span>
      <span class="o">:</span><span class="nl">adapter:</span> <span class="n">sqlite3</span>
      <span class="o">:</span><span class="nl">database:</span> <span class="n">test</span><span class="o">.</span><span class="na">db</span>

    <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"key"</span><span class="ss">:"PLUGIN_CONFIG_demo_plugin"</span><span class="p">,</span>
   <span class="s2">"values"</span><span class="p">:[</span>
      <span class="s2">"tenant_config"</span>
   <span class="p">]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'key'</span><span class="p">:</span> <span class="s">'PLUGIN_CONFIG_demo_plugin'</span><span class="p">,</span> <span class="s">'values'</span><span class="p">:</span> <span class="p">[]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object for the key <code>PLUGIN_CONFIG_*plugin*</code>.</p>
<h3 id='tenant-delete-a-per-tenant-configuration-for-a-plugin'>Delete a per tenant configuration for a plugin</h3>
<p>Deletes the per tenant plugin configuration value for the appropriate key. The plugin name is given as a path parameter. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"PLUGIN_FOO"</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deletePluginConfiguration</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s2">"demo_plugin"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">delete_tenant_plugin_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> 
                                                          <span class="n">user</span><span class="p">,</span> 
                                                          <span class="n">reason</span><span class="p">,</span> 
                                                          <span class="n">comment</span><span class="p">,</span> 
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_plugin_configuration</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='tenant-payment-state-machines'>Payment State Machines</h2>
<p>This is a somewhat advanced use case to override the default internal payment state machine within Kill Bill. Please refer to our <a href="https://docs.killbill.io/latest/userguide_payment.html#_payment_states">payment manual</a> for more details about payment states.</p>

<p>The endpoints below allow you to override such state machines on a per-tenant level.</p>
<h3 id='tenant-add-a-per-tenant-payment-state-machine-for-a-plugin'>Add a per tenant payment state machine for a plugin</h3>
<p>Adds a per tenant key-value pair for the specified plugin. The plugin name is given as a path parameter. The key name is <code>PLUGIN_PAYMENT_STATE_MACHINE_*plugin*</code> where <em>plugin</em> is the plugin name. The API sets the value of this key, replacing any previous value.</p>

<p>The state machine is defined in an XML file. The complete XML file becomes the value of the key.</p>

<p><strong>HTTP Request</strong> </p>

<p>Let&#39;s say we want to overwite the default Kill Bill payment state machine for the payment plugin <code>demo_plugin</code>, and assuming
a valid payment state machine XML file is sound in in <code>SimplePaymentStates.xml</code>. Then the HTTP Request would be:</p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'@SimplePaymentStates.xml'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"noop"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">stateMachineConfig</span> <span class="o">=</span> <span class="n">getResourceBodyString</span><span class="o">(</span><span class="s">"SimplePaymentStates.xml"</span><span class="o">);</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">uploadPluginPaymentStateMachineConfig</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> 
                                                                        <span class="n">stateMachineConfig</span><span class="o">,</span> 
                                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'SimplePaymentStates.xml'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">upload_plugin_payment_state_machine_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/demo_plugin
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PLUGIN_PAYMENT_STATE_MACHINE_noop</span>
    <span class="nl">values:</span> <span class="o">[&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">"1.0"</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="o">?&gt;</span>


    <span class="o">&lt;</span><span class="n">stateMachineConfig</span> <span class="nl">xmlns:</span><span class="n">xsi</span><span class="o">=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
                        <span class="nl">xsi:</span><span class="n">noNamespaceSchemaLocation</span><span class="o">=</span><span class="s">"StateMachineConfig.xsd"</span><span class="o">&gt;</span>

        <span class="o">&lt;</span><span class="n">stateMachines</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">stateMachine</span> <span class="n">name</span><span class="o">=</span><span class="s">"BIG_BANG"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">states</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"BIG_BANG_INIT"</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">states</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">transitions</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">transition</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">BIG_BANG_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="n">OP_DUMMY</span><span class="o">&lt;/</span><span class="n">operation</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operationResult</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">operationResult</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">BIG_BANG_INIT</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">transition</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">transitions</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">operations</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">operation</span> <span class="n">name</span><span class="o">=</span><span class="s">"OP_DUMMY"</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">operations</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">stateMachine</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">stateMachine</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTHORIZE"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">states</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTH_INIT"</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTH_SUCCESS"</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTH_FAILED"</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTH_ERRORED"</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">states</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">transitions</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">transition</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">AUTH_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="n">OP_AUTHORIZE</span><span class="o">&lt;/</span><span class="n">operation</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operationResult</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">operationResult</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">AUTH_SUCCESS</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">transition</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">transition</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">AUTH_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="n">OP_AUTHORIZE</span><span class="o">&lt;/</span><span class="n">operation</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operationResult</span><span class="o">&gt;</span><span class="n">FAILURE</span><span class="o">&lt;/</span><span class="n">operationResult</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">AUTH_FAILED</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">transition</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">transition</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">AUTH_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="n">OP_AUTHORIZE</span><span class="o">&lt;/</span><span class="n">operation</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operationResult</span><span class="o">&gt;</span><span class="n">EXCEPTION</span><span class="o">&lt;/</span><span class="n">operationResult</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">AUTH_ERRORED</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">transition</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">transitions</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">operations</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">operation</span> <span class="n">name</span><span class="o">=</span><span class="s">"OP_AUTHORIZE"</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">operations</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">stateMachine</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">stateMachines</span><span class="o">&gt;</span>

        <span class="o">&lt;</span><span class="n">linkStateMachines</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">linkStateMachine</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">initialStateMachine</span><span class="o">&gt;</span><span class="n">BIG_BANG</span><span class="o">&lt;/</span><span class="n">initialStateMachine</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">BIG_BANG_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">finalStateMachine</span><span class="o">&gt;</span><span class="n">AUTHORIZE</span><span class="o">&lt;/</span><span class="n">finalStateMachine</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">AUTH_INIT</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">linkStateMachine</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">linkStateMachines</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">stateMachineConfig</span><span class="o">&gt;</span>
    <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> item is returned in the header giving the URL for the payment state machine.</p>
<h3 id='tenant-retrieve-a-per-tenant-payment-state-machine-for-a-plugin'>Retrieve a per tenant payment state machine for a plugin</h3>
<p>Retrieves the value for the appropriate payment state machine key for the specified plugin. If present, this value should be the complete XML file that defines the state machine.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"noop"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getPluginPaymentStateMachineConfig</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">get_plugin_payment_state_machine_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"key"</span>: <span class="s2">"PLUGIN_PAYMENT_STATE_MACHINE_demo_plugin"</span>,
  <span class="s2">"values"</span>: <span class="o">[</span>&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;

    &lt;stateMachineConfig xmlns:xsi<span class="o">=</span><span class="s2">"http://www.w3.org/2001/XMLSchema-instance"</span>
                        xsi:noNamespaceSchemaLocation<span class="o">=</span><span class="s2">"StateMachineConfig.xsd"</span>&gt;

        &lt;stateMachines&gt;
            &lt;stateMachine <span class="nv">name</span><span class="o">=</span><span class="s2">"BIG_BANG"</span>&gt;
                &lt;states&gt;
                    &lt;state <span class="nv">name</span><span class="o">=</span><span class="s2">"BIG_BANG_INIT"</span>/&gt;
                &lt;/states&gt;
                &lt;transitions&gt;
                    &lt;transition&gt;
                        &lt;initialState&gt;BIG_BANG_INIT&lt;/initialState&gt;
                        &lt;operation&gt;OP_DUMMY&lt;/operation&gt;
                        &lt;operationResult&gt;SUCCESS&lt;/operationResult&gt;
                        &lt;finalState&gt;BIG_BANG_INIT&lt;/finalState&gt;
                    &lt;/transition&gt;
                &lt;/transitions&gt;
                &lt;operations&gt;
                    &lt;operation <span class="nv">name</span><span class="o">=</span><span class="s2">"OP_DUMMY"</span>/&gt;
                &lt;/operations&gt;
            &lt;/stateMachine&gt;
            &lt;stateMachine <span class="nv">name</span><span class="o">=</span><span class="s2">"AUTHORIZE"</span>&gt;
                &lt;states&gt;
                    &lt;state <span class="nv">name</span><span class="o">=</span><span class="s2">"AUTH_INIT"</span>/&gt;
                    &lt;state <span class="nv">name</span><span class="o">=</span><span class="s2">"AUTH_SUCCESS"</span>/&gt;
                    &lt;state <span class="nv">name</span><span class="o">=</span><span class="s2">"AUTH_FAILED"</span>/&gt;
                    &lt;state <span class="nv">name</span><span class="o">=</span><span class="s2">"AUTH_ERRORED"</span>/&gt;
                &lt;/states&gt;
                &lt;transitions&gt;
                    &lt;transition&gt;
                        &lt;initialState&gt;AUTH_INIT&lt;/initialState&gt;
                        &lt;operation&gt;OP_AUTHORIZE&lt;/operation&gt;
                        &lt;operationResult&gt;SUCCESS&lt;/operationResult&gt;
                        &lt;finalState&gt;AUTH_SUCCESS&lt;/finalState&gt;
                    &lt;/transition&gt;
                    &lt;transition&gt;
                        &lt;initialState&gt;AUTH_INIT&lt;/initialState&gt;
                        &lt;operation&gt;OP_AUTHORIZE&lt;/operation&gt;
                        &lt;operationResult&gt;FAILURE&lt;/operationResult&gt;
                        &lt;finalState&gt;AUTH_FAILED&lt;/finalState&gt;
                    &lt;/transition&gt;
                    &lt;transition&gt;
                        &lt;initialState&gt;AUTH_INIT&lt;/initialState&gt;
                        &lt;operation&gt;OP_AUTHORIZE&lt;/operation&gt;
                        &lt;operationResult&gt;EXCEPTION&lt;/operationResult&gt;
                        &lt;finalState&gt;AUTH_ERRORED&lt;/finalState&gt;
                    &lt;/transition&gt;
                &lt;/transitions&gt;
                &lt;operations&gt;
                    &lt;operation <span class="nv">name</span><span class="o">=</span><span class="s2">"OP_AUTHORIZE"</span>/&gt;
                &lt;/operations&gt;
            &lt;/stateMachine&gt;
        &lt;/stateMachines&gt;

        &lt;linkStateMachines&gt;
            &lt;linkStateMachine&gt;
                &lt;initialStateMachine&gt;BIG_BANG&lt;/initialStateMachine&gt;
                &lt;initialState&gt;BIG_BANG_INIT&lt;/initialState&gt;
                &lt;finalStateMachine&gt;AUTHORIZE&lt;/finalStateMachine&gt;
                &lt;finalState&gt;AUTH_INIT&lt;/finalState&gt;
            &lt;/linkStateMachine&gt;
        &lt;/linkStateMachines&gt;
    &lt;/stateMachineConfig&gt;
    <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">TenantKeyValue</span> <span class="o">{</span>
    <span class="nl">key:</span> <span class="n">PLUGIN_PAYMENT_STATE_MACHINE_noop</span>
    <span class="nl">values:</span> <span class="o">[&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">"1.0"</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="o">?&gt;</span>

    <span class="o">&lt;</span><span class="n">stateMachineConfig</span> <span class="nl">xmlns:</span><span class="n">xsi</span><span class="o">=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
                        <span class="nl">xsi:</span><span class="n">noNamespaceSchemaLocation</span><span class="o">=</span><span class="s">"StateMachineConfig.xsd"</span><span class="o">&gt;</span>

        <span class="o">&lt;</span><span class="n">stateMachines</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">stateMachine</span> <span class="n">name</span><span class="o">=</span><span class="s">"BIG_BANG"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">states</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"BIG_BANG_INIT"</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">states</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">transitions</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">transition</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">BIG_BANG_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="n">OP_DUMMY</span><span class="o">&lt;/</span><span class="n">operation</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operationResult</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">operationResult</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">BIG_BANG_INIT</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">transition</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">transitions</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">operations</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">operation</span> <span class="n">name</span><span class="o">=</span><span class="s">"OP_DUMMY"</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">operations</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">stateMachine</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">stateMachine</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTHORIZE"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">states</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTH_INIT"</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTH_SUCCESS"</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTH_FAILED"</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">state</span> <span class="n">name</span><span class="o">=</span><span class="s">"AUTH_ERRORED"</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">states</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">transitions</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">transition</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">AUTH_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="n">OP_AUTHORIZE</span><span class="o">&lt;/</span><span class="n">operation</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operationResult</span><span class="o">&gt;</span><span class="n">SUCCESS</span><span class="o">&lt;/</span><span class="n">operationResult</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">AUTH_SUCCESS</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">transition</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">transition</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">AUTH_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="n">OP_AUTHORIZE</span><span class="o">&lt;/</span><span class="n">operation</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operationResult</span><span class="o">&gt;</span><span class="n">FAILURE</span><span class="o">&lt;/</span><span class="n">operationResult</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">AUTH_FAILED</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">transition</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">transition</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">AUTH_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operation</span><span class="o">&gt;</span><span class="n">OP_AUTHORIZE</span><span class="o">&lt;/</span><span class="n">operation</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">operationResult</span><span class="o">&gt;</span><span class="n">EXCEPTION</span><span class="o">&lt;/</span><span class="n">operationResult</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">AUTH_ERRORED</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">transition</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">transitions</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">operations</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">operation</span> <span class="n">name</span><span class="o">=</span><span class="s">"OP_AUTHORIZE"</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">operations</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">stateMachine</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">stateMachines</span><span class="o">&gt;</span>

        <span class="o">&lt;</span><span class="n">linkStateMachines</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">linkStateMachine</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">initialStateMachine</span><span class="o">&gt;</span><span class="n">BIG_BANG</span><span class="o">&lt;/</span><span class="n">initialStateMachine</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">initialState</span><span class="o">&gt;</span><span class="n">BIG_BANG_INIT</span><span class="o">&lt;/</span><span class="n">initialState</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">finalStateMachine</span><span class="o">&gt;</span><span class="n">AUTHORIZE</span><span class="o">&lt;/</span><span class="n">finalStateMachine</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">finalState</span><span class="o">&gt;</span><span class="n">AUTH_INIT</span><span class="o">&lt;/</span><span class="n">finalState</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">linkStateMachine</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">linkStateMachines</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">stateMachineConfig</span><span class="o">&gt;</span>
    <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'key'</span><span class="p">:</span> <span class="s">'PLUGIN_PAYMENT_STATE_MACHINE_demo_plugin'</span><span class="p">,</span> <span class="s">'values'</span><span class="p">:</span> <span class="p">[]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a key value object for the key <code>PLUGIN_PAYMENT_STATE_MACHINE_*plugin*</code>. The value of this key should be the complete XML file that defines the payment state machine.</p>
<h3 id='tenant-delete-a-per-tenant-payment-state-machine-for-a-plugin'>Delete a per tenant payment state machine for a plugin</h3>
<p>Deletes the payment state machine for the specified plugin for this tenant. The plugin reverts to the default payment state machine.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"noop"</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deletePluginPaymentStateMachineConfig</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_plugin_payment_state_machine_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h1 id='catalog'>Catalog</h1>
<p>The <code>Catalog</code> is at the heart of the Kill Bill subscription and billing systems. It provides complete current information on products available, subscription plans, billing options, and much more. Each tenant has a single catalog, but different tenants may have completely different catalogs.</p>

<p>The catalog for a given tenant may be updated to new versions from time to time. This provides the ability to deprecate old products, add new ones, or change prices for existing products. Older versions remain available in case they are needed. If a new version is uploaded, new subscriptions will use the new version, but existing subscriptions may either depend on their original versions (grandfathering use case) or use the latest version (price update use case). Please refer to the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog">catalog section of our subscription billing documentation</a> for additional details.</p>

<p>KAUI, our admin UI, provides the ability to upload a <em>simple plan</em>. The <em>simple plan</em> provides a way to ease testing and to play with the system. See <a href="https://killbill.github.io/slate/#catalog-simple-plan">API section Simple Plan</a>.</p>

<p>A tenant has several options for setting up their catalog. You can choose the option that best meets your needs:</p>

<ol>
<li>Use the default test catalog that ships with Kill Bill by <a href="https://killbill.github.io/slate/#tenant-create-a-tenant">creating a tenant</a> with <code>useGlobalDefault=true</code></li>
<li>Use the Simple Plan api from KAUI to get started quickly (no need to create an XML catalog, simply use the UI and add the plans you need).</li>
<li>Write your own complete catalog as an XML file and upload it. Some examples of catalog can be found in our <a href="https://github.com/killbill/killbill-docs/tree/v3/catalogs">test repo</a>. For validation, check our <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog-overview">manual</a> or use our <a href="https://cloud.killbill.io/">cloud validation tool</a> after creating an account.</li>
<li>Write a custom Catalog plugin. This is only for advanced users with special needs.</li>
</ol>

<p>For a full discussion of the KillBill catalog, see the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog">Catalog</a> section in the <a href="https://docs.killbill.io/latest/userguide_subscription.html">Subscription Guide</a>.</p>

<p>The <code>Catalog</code> API offers basic CRUD operations, allowing you to upload, retrieve and delete catalog versions. </p>
<h2 id='catalog-catalog-resource'>Catalog Resource</h2>
<p>At a very high level, the Catalog consists of the following main components:</p>

<ul>
<li><strong><code>Products</code></strong> : List of products available - e.g <em>Gold</em> product.</li>
<li><strong><code>Plans</code></strong> : List of subscription plans available for each product - e.g <em>gold-monthly</em>, monthly subscription for the <em>Gold</em> product.</li>
<li><strong><code>Rules</code></strong> : Business rules for subscriptions - e.g. when certain changes should take effect.</li>
<li><strong><code>Price Lists</code></strong> : Lists of applicable Plans.</li>
</ul>

<p>Full details about the elements of a Catalog are given in the links cited above. The Catalog is maintained as an XML file.</p>
<h2 id='catalog-catalog'>Catalog</h2><h3 id='catalog-upload-a-catalog-as-xml'>Upload a catalog as XML</h3>
<p>This endpoint uploads a complete catalog in XML format. This becomes the current version of the Catalog for this Tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/catalog/xml</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;&lt;catalog&gt; ...'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/xml"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="n">getResourceBodyString</span><span class="o">(</span><span class="n">catalog</span><span class="o">);</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="na">uploadCatalogXml</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">catalog_file_xml</span> <span class="o">=</span> <span class="n">resource_file</span><span class="p">.</span><span class="nf">read</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">upload_tenant_catalog</span><span class="p">(</span><span class="n">catalog_file_xml</span><span class="p">,</span> 
                                                     <span class="n">user</span><span class="p">,</span>
                                                     <span class="n">reason</span><span class="p">,</span>
                                                     <span class="n">comment</span><span class="p">,</span>
                                                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>
<span class="n">xml_catalog</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">"../resources/SpyCarBasic.xml"</span><span class="p">,</span> <span class="s">"r+"</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">upload_catalog_xml</span><span class="p">(</span><span class="n">xml_catalog</span><span class="p">,</span> 
                              <span class="n">created_by</span><span class="p">,</span> 
                              <span class="n">api_key</span><span class="p">,</span> 
                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/catalog/xml
&lt; Content-Type: text/xml
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Contains the complete catalog in XML format</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='catalog-retrieve-the-catalog-as-xml'>Retrieve the catalog as XML</h3>
<p>This endpoint retrieves the Catalog for a specified date in XML format. If there are multiple versions, the latest version with an effective date not later than the requested date is returned. If the effective date for all versions is greater than the requested date, the earliest version is returned.</p>

<p>For example, suppose there are two versions of the catalog, the current version dated 2020-01-01 (Jan. 1, 2020) and a previous version dated 2019-01-01. Then</p>

<ul>
<li>A request with no effective date would retrieve the current version</li>
<li>A request with an effective date of 2020-01-01 or later would retrieve the current version</li>
<li>A request with an effective date of 2019-01-01 or later, but before 2020-01-01, would retrieve the previous version</li>
<li>A request with an effective date earlier than 2019-01-01 would retrieve the previous version, as it is the earliest version available.</li>
</ul>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/xml</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/xml"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/catalog/xml"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">String</span> <span class="n">catalog</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getCatalogXml</span><span class="o">(</span><span class="n">requestedDate</span><span class="o">,</span> 
                                          <span class="n">accountId</span><span class="o">,</span> 
                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_tenant_catalog_xml</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span>
                                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_catalog_xml</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/xml

&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span> <span class="nv">standalone</span><span class="o">=</span><span class="s2">"yes"</span>?&gt;
  &lt;catalogs&gt;
    &lt;versions&gt;
      &lt;version&gt;
        &lt;effectiveDate&gt;2013-02-08T00:00:00Z&lt;/effectiveDate&gt;
        &lt;catalogName&gt;SpyCarBasic&lt;/catalogName&gt;
        &lt;currencies&gt;
          &lt;currency&gt;USD&lt;/currency&gt;
          &lt;currency&gt;GBP&lt;/currency&gt;
        &lt;/currencies&gt;
        &lt;units/&gt;
        &lt;products&gt;
          &lt;product <span class="nv">name</span><span class="o">=</span><span class="s2">"Basic"</span> <span class="nv">prettyName</span><span class="o">=</span><span class="s2">"Basic"</span>&gt;
            &lt;category&gt;BASE&lt;/category&gt;
            &lt;included/&gt;
            &lt;available/&gt;
            &lt;limits/&gt;
          &lt;/product&gt;
          &lt;product <span class="nv">name</span><span class="o">=</span><span class="s2">"Sports"</span> <span class="nv">prettyName</span><span class="o">=</span><span class="s2">"Sports"</span>&gt;
            &lt;category&gt;BASE&lt;/category&gt;
            &lt;included/&gt;
            &lt;available/&gt;
            &lt;limits/&gt;
          &lt;/product&gt;
          &lt;product <span class="nv">name</span><span class="o">=</span><span class="s2">"Standard"</span> <span class="nv">prettyName</span><span class="o">=</span><span class="s2">"Standard"</span>&gt;
            &lt;category&gt;BASE&lt;/category&gt;
            &lt;included/&gt;
            &lt;available/&gt;
            &lt;limits/&gt;
          &lt;/product&gt;
          &lt;product <span class="nv">name</span><span class="o">=</span><span class="s2">"Super"</span> <span class="nv">prettyName</span><span class="o">=</span><span class="s2">"Super"</span>&gt;
            &lt;category&gt;ADD_ON&lt;/category&gt;
            &lt;included/&gt;
            &lt;available/&gt;
            &lt;limits/&gt;
          &lt;/product&gt;
        &lt;/products&gt;
        &lt;rules&gt;
          &lt;changePolicy&gt;
            &lt;changePolicyCase&gt;
              &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
            &lt;/changePolicyCase&gt;
          &lt;/changePolicy&gt;
          &lt;changeAlignment&gt;
            &lt;changeAlignmentCase&gt;
              &lt;alignment&gt;START_OF_BUNDLE&lt;/alignment&gt;
            &lt;/changeAlignmentCase&gt;
          &lt;/changeAlignment&gt;
          &lt;cancelPolicy&gt;
            &lt;cancelPolicyCase&gt;
              &lt;policy&gt;IMMEDIATE&lt;/policy&gt;
            &lt;/cancelPolicyCase&gt;
          &lt;/cancelPolicy&gt;
          &lt;createAlignment&gt;
            &lt;createAlignmentCase&gt;
              &lt;alignment&gt;START_OF_BUNDLE&lt;/alignment&gt;
            &lt;/createAlignmentCase&gt;
          &lt;/createAlignment&gt;
          &lt;billingAlignment&gt;
            &lt;billingAlignmentCase&gt;
              &lt;alignment&gt;ACCOUNT&lt;/alignment&gt;
            &lt;/billingAlignmentCase&gt;
          &lt;/billingAlignment&gt;
          &lt;priceList&gt;
            &lt;priceListCase&gt;
              &lt;toPriceList&gt;DEFAULT&lt;/toPriceList&gt;
            &lt;/priceListCase&gt;
          &lt;/priceList&gt;
        &lt;/rules&gt;
        &lt;plans&gt;
          &lt;plan <span class="nv">name</span><span class="o">=</span><span class="s2">"basic-annual"</span> <span class="nv">prettyName</span><span class="o">=</span><span class="s2">"basic-annual"</span>&gt;
            &lt;product&gt;Basic&lt;/product&gt;
            &lt;recurringBillingMode&gt;IN_ADVANCE&lt;/recurringBillingMode&gt;
            &lt;initialPhases/&gt;
            &lt;finalPhase <span class="nb">type</span><span class="o">=</span><span class="s2">"EVERGREEN"</span>&gt;
              &lt;duration&gt;
                &lt;unit&gt;UNLIMITED&lt;/unit&gt;
                &lt;number&gt;-1&lt;/number&gt;
              &lt;/duration&gt;
              &lt;recurring&gt;
                &lt;billingPeriod&gt;ANNUAL&lt;/billingPeriod&gt;
                &lt;recurringPrice&gt;
                  &lt;price&gt;
                    &lt;currency&gt;USD&lt;/currency&gt;
                    &lt;value&gt;1000&lt;/value&gt;
                  &lt;/price&gt;
                &lt;/recurringPrice&gt;
              &lt;/recurring&gt;
              &lt;usages/&gt;
            &lt;/finalPhase&gt;
            &lt;plansAllowedInBundle&gt;-1&lt;/plansAllowedInBundle&gt;
          &lt;/plan&gt;
          &lt;plan <span class="nv">name</span><span class="o">=</span><span class="s2">"sports-monthly"</span> <span class="nv">prettyName</span><span class="o">=</span><span class="s2">"sports-monthly"</span>&gt;
            &lt;product&gt;Sports&lt;/product&gt;
            &lt;recurringBillingMode&gt;IN_ADVANCE&lt;/recurringBillingMode&gt;
            &lt;initialPhases&gt;
              &lt;phase <span class="nb">type</span><span class="o">=</span><span class="s2">"TRIAL"</span>&gt;
                &lt;duration&gt;
                  &lt;unit&gt;DAYS&lt;/unit&gt;
                  &lt;number&gt;30&lt;/number&gt;
                &lt;/duration&gt;
                &lt;fixed <span class="nb">type</span><span class="o">=</span><span class="s2">"ONE_TIME"</span>&gt;
                  &lt;fixedPrice/&gt;
                &lt;/fixed&gt;
                &lt;usages/&gt;
              &lt;/phase&gt;
            &lt;/initialPhases&gt;
            &lt;finalPhase <span class="nb">type</span><span class="o">=</span><span class="s2">"EVERGREEN"</span>&gt;
              &lt;duration&gt;
                &lt;unit&gt;UNLIMITED&lt;/unit&gt;
                &lt;number&gt;-1&lt;/number&gt;
              &lt;/duration&gt;
              &lt;recurring&gt;
                &lt;billingPeriod&gt;MONTHLY&lt;/billingPeriod&gt;
                &lt;recurringPrice&gt;
                  &lt;price&gt;
                    &lt;currency&gt;GBP&lt;/currency&gt;
                    &lt;value&gt;375.00&lt;/value&gt;
                  &lt;/price&gt;
                  &lt;price&gt;
                    &lt;currency&gt;USD&lt;/currency&gt;
                    &lt;value&gt;500.00&lt;/value&gt;
                  &lt;/price&gt;
                &lt;/recurringPrice&gt;
              &lt;/recurring&gt;
              &lt;usages/&gt;
            &lt;/finalPhase&gt;
            &lt;plansAllowedInBundle&gt;-1&lt;/plansAllowedInBundle&gt;
          &lt;/plan&gt;
          &lt;plan <span class="nv">name</span><span class="o">=</span><span class="s2">"standard-monthly"</span> <span class="nv">prettyName</span><span class="o">=</span><span class="s2">"standard-monthly"</span>&gt;
            &lt;product&gt;Standard&lt;/product&gt;
            &lt;recurringBillingMode&gt;IN_ADVANCE&lt;/recurringBillingMode&gt;
            &lt;initialPhases&gt;
              &lt;phase <span class="nb">type</span><span class="o">=</span><span class="s2">"TRIAL"</span>&gt;
                &lt;duration&gt;
                  &lt;unit&gt;DAYS&lt;/unit&gt;
                  &lt;number&gt;30&lt;/number&gt;
                &lt;/duration&gt;
                &lt;fixed <span class="nb">type</span><span class="o">=</span><span class="s2">"ONE_TIME"</span>&gt;
                  &lt;fixedPrice/&gt;
                &lt;/fixed&gt;
                &lt;usages/&gt;
              &lt;/phase&gt;
            &lt;/initialPhases&gt;
            &lt;finalPhase <span class="nb">type</span><span class="o">=</span><span class="s2">"EVERGREEN"</span>&gt;
              &lt;duration&gt;
                &lt;unit&gt;UNLIMITED&lt;/unit&gt;
                &lt;number&gt;-1&lt;/number&gt;
              &lt;/duration&gt;
              &lt;recurring&gt;
                &lt;billingPeriod&gt;MONTHLY&lt;/billingPeriod&gt;
                &lt;recurringPrice&gt;
                  &lt;price&gt;
                    &lt;currency&gt;GBP&lt;/currency&gt;
                    &lt;value&gt;75.00&lt;/value&gt;
                  &lt;/price&gt;
                  &lt;price&gt;
                    &lt;currency&gt;USD&lt;/currency&gt;
                    &lt;value&gt;100.00&lt;/value&gt;
                  &lt;/price&gt;
                &lt;/recurringPrice&gt;
              &lt;/recurring&gt;
              &lt;usages/&gt;
            &lt;/finalPhase&gt;
            &lt;plansAllowedInBundle&gt;-1&lt;/plansAllowedInBundle&gt;
          &lt;/plan&gt;
          &lt;plan <span class="nv">name</span><span class="o">=</span><span class="s2">"super-monthly"</span> <span class="nv">prettyName</span><span class="o">=</span><span class="s2">"super-monthly"</span>&gt;
            &lt;product&gt;Super&lt;/product&gt;
            &lt;recurringBillingMode&gt;IN_ADVANCE&lt;/recurringBillingMode&gt;
            &lt;initialPhases&gt;
              &lt;phase <span class="nb">type</span><span class="o">=</span><span class="s2">"TRIAL"</span>&gt;
                &lt;duration&gt;
                  &lt;unit&gt;DAYS&lt;/unit&gt;
                  &lt;number&gt;30&lt;/number&gt;
                &lt;/duration&gt;
                &lt;fixed <span class="nb">type</span><span class="o">=</span><span class="s2">"ONE_TIME"</span>&gt;
                  &lt;fixedPrice/&gt;
                &lt;/fixed&gt;
                &lt;usages/&gt;
              &lt;/phase&gt;
            &lt;/initialPhases&gt;
            &lt;finalPhase <span class="nb">type</span><span class="o">=</span><span class="s2">"EVERGREEN"</span>&gt;
              &lt;duration&gt;
                &lt;unit&gt;UNLIMITED&lt;/unit&gt;
                &lt;number&gt;-1&lt;/number&gt;
              &lt;/duration&gt;
              &lt;recurring&gt;
                &lt;billingPeriod&gt;MONTHLY&lt;/billingPeriod&gt;
                &lt;recurringPrice&gt;
                  &lt;price&gt;
                    &lt;currency&gt;GBP&lt;/currency&gt;
                    &lt;value&gt;750.00&lt;/value&gt;
                  &lt;/price&gt;
                  &lt;price&gt;
                    &lt;currency&gt;USD&lt;/currency&gt;
                    &lt;value&gt;1000.00&lt;/value&gt;
                  &lt;/price&gt;
                &lt;/recurringPrice&gt;
              &lt;/recurring&gt;
              &lt;usages/&gt;
            &lt;/finalPhase&gt;
            &lt;plansAllowedInBundle&gt;-1&lt;/plansAllowedInBundle&gt;
          &lt;/plan&gt;
        &lt;/plans&gt;
        &lt;priceLists&gt;
          &lt;defaultPriceList <span class="nv">name</span><span class="o">=</span><span class="s2">"DEFAULT"</span>&gt;
            &lt;plans&gt;
              &lt;plan&gt;basic-annual&lt;/plan&gt;
              &lt;plan&gt;sports-monthly&lt;/plan&gt;
              &lt;plan&gt;standard-monthly&lt;/plan&gt;
              &lt;plan&gt;super-monthly&lt;/plan&gt;
            &lt;/plans&gt;
          &lt;/defaultPriceList&gt;
        &lt;/priceLists&gt;
      &lt;/version&gt;
    &lt;/versions&gt;
    &lt;catalogName&gt;SpyCarBasic&lt;/catalogName&gt;
  &lt;/catalogs&gt;
</code></pre><pre class="highlight java tab-java"><code><span class="o">&lt;?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">"1.0"</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"UTF-8"</span> <span class="n">standalone</span><span class="o">=</span><span class="s">"yes"</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="n">catalogs</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">versions</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">effectiveDate</span><span class="o">&gt;</span><span class="mi">2013</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">08</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">&lt;/</span><span class="n">effectiveDate</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">catalogName</span><span class="o">&gt;</span><span class="n">SpyCarBasic</span><span class="o">&lt;/</span><span class="n">catalogName</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">currencies</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">USD</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">GBP</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">currencies</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">units</span><span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="n">products</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">product</span> <span class="n">name</span><span class="o">=</span><span class="s">"Sports"</span> <span class="n">prettyName</span><span class="o">=</span><span class="s">"Sports"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">category</span><span class="o">&gt;</span><span class="n">BASE</span><span class="o">&lt;/</span><span class="n">category</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">included</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">available</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">limits</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">product</span> <span class="n">name</span><span class="o">=</span><span class="s">"Standard"</span> <span class="n">prettyName</span><span class="o">=</span><span class="s">"Standard"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">category</span><span class="o">&gt;</span><span class="n">BASE</span><span class="o">&lt;/</span><span class="n">category</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">included</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">available</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">limits</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">product</span> <span class="n">name</span><span class="o">=</span><span class="s">"Super"</span> <span class="n">prettyName</span><span class="o">=</span><span class="s">"Super"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">category</span><span class="o">&gt;</span><span class="n">BASE</span><span class="o">&lt;/</span><span class="n">category</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">included</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">available</span><span class="o">/&gt;</span>
                    <span class="o">&lt;</span><span class="n">limits</span><span class="o">/&gt;</span>
                <span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">products</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">rules</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">changePolicy</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">changePolicyCase</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="n">IMMEDIATE</span><span class="o">&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">changePolicyCase</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">changePolicy</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">changeAlignment</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">changeAlignmentCase</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">START_OF_BUNDLE</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">changeAlignmentCase</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">changeAlignment</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">cancelPolicy</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="n">IMMEDIATE</span><span class="o">&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">cancelPolicy</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">createAlignment</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">createAlignmentCase</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">START_OF_BUNDLE</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">createAlignmentCase</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">createAlignment</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">billingAlignment</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">billingAlignmentCase</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">ACCOUNT</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">billingAlignmentCase</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">billingAlignment</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">priceList</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">priceListCase</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">toPriceList</span><span class="o">&gt;</span><span class="n">DEFAULT</span><span class="o">&lt;/</span><span class="n">toPriceList</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">priceListCase</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">priceList</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">rules</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">plan</span> <span class="n">name</span><span class="o">=</span><span class="s">"sports-monthly"</span> <span class="n">prettyName</span><span class="o">=</span><span class="s">"sports-monthly"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">product</span><span class="o">&gt;</span><span class="n">Sports</span><span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span><span class="n">IN_ADVANCE</span><span class="o">&lt;/</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">initialPhases</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">phase</span> <span class="n">type</span><span class="o">=</span><span class="s">"TRIAL"</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">DAYS</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="mi">30</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                            <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">fixed</span> <span class="n">type</span><span class="o">=</span><span class="s">"ONE_TIME"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">fixedPrice</span><span class="o">/&gt;</span>
                            <span class="o">&lt;/</span><span class="n">fixed</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">usages</span><span class="o">/&gt;</span>
                        <span class="o">&lt;/</span><span class="n">phase</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">initialPhases</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">finalPhase</span> <span class="n">type</span><span class="o">=</span><span class="s">"EVERGREEN"</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">UNLIMITED</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                        <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">recurring</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">billingPeriod</span><span class="o">&gt;</span><span class="n">MONTHLY</span><span class="o">&lt;/</span><span class="n">billingPeriod</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">GBP</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">375.00</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">USD</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">500.00</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
                            <span class="o">&lt;/</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                        <span class="o">&lt;/</span><span class="n">recurring</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">usages</span><span class="o">/&gt;</span>
                    <span class="o">&lt;/</span><span class="n">finalPhase</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">plan</span> <span class="n">name</span><span class="o">=</span><span class="s">"standard-monthly"</span> <span class="n">prettyName</span><span class="o">=</span><span class="s">"standard-monthly"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">product</span><span class="o">&gt;</span><span class="n">Standard</span><span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span><span class="n">IN_ADVANCE</span><span class="o">&lt;/</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">initialPhases</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">phase</span> <span class="n">type</span><span class="o">=</span><span class="s">"TRIAL"</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">DAYS</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="mi">30</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                            <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">fixed</span> <span class="n">type</span><span class="o">=</span><span class="s">"ONE_TIME"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">fixedPrice</span><span class="o">/&gt;</span>
                            <span class="o">&lt;/</span><span class="n">fixed</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">usages</span><span class="o">/&gt;</span>
                        <span class="o">&lt;/</span><span class="n">phase</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">initialPhases</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">finalPhase</span> <span class="n">type</span><span class="o">=</span><span class="s">"EVERGREEN"</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">UNLIMITED</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                        <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">recurring</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">billingPeriod</span><span class="o">&gt;</span><span class="n">MONTHLY</span><span class="o">&lt;/</span><span class="n">billingPeriod</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">GBP</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">75.00</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">USD</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">100.00</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
                            <span class="o">&lt;/</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                        <span class="o">&lt;/</span><span class="n">recurring</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">usages</span><span class="o">/&gt;</span>
                    <span class="o">&lt;/</span><span class="n">finalPhase</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">plan</span> <span class="n">name</span><span class="o">=</span><span class="s">"super-monthly"</span> <span class="n">prettyName</span><span class="o">=</span><span class="s">"super-monthly"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">product</span><span class="o">&gt;</span><span class="n">Super</span><span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span><span class="n">IN_ADVANCE</span><span class="o">&lt;/</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">initialPhases</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">phase</span> <span class="n">type</span><span class="o">=</span><span class="s">"TRIAL"</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">DAYS</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="mi">30</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                            <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">fixed</span> <span class="n">type</span><span class="o">=</span><span class="s">"ONE_TIME"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">fixedPrice</span><span class="o">/&gt;</span>
                            <span class="o">&lt;/</span><span class="n">fixed</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">usages</span><span class="o">/&gt;</span>
                        <span class="o">&lt;/</span><span class="n">phase</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">initialPhases</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">finalPhase</span> <span class="n">type</span><span class="o">=</span><span class="s">"EVERGREEN"</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">UNLIMITED</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                        <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">recurring</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">billingPeriod</span><span class="o">&gt;</span><span class="n">MONTHLY</span><span class="o">&lt;/</span><span class="n">billingPeriod</span><span class="o">&gt;</span>
                            <span class="o">&lt;</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">GBP</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">750.00</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">USD</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">1000.00</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
                            <span class="o">&lt;/</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                        <span class="o">&lt;/</span><span class="n">recurring</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">usages</span><span class="o">/&gt;</span>
                    <span class="o">&lt;/</span><span class="n">finalPhase</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">priceLists</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">defaultPriceList</span> <span class="n">name</span><span class="o">=</span><span class="s">"DEFAULT"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">plan</span><span class="o">&gt;</span><span class="n">sports</span><span class="o">-</span><span class="n">monthly</span><span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">plan</span><span class="o">&gt;</span><span class="n">standard</span><span class="o">-</span><span class="n">monthly</span><span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">plan</span><span class="o">&gt;</span><span class="kd">super</span><span class="o">-</span><span class="n">monthly</span><span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">defaultPriceList</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">priceLists</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">versions</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">catalogName</span><span class="o">&gt;</span><span class="n">SpyCarBasic</span><span class="o">&lt;/</span><span class="n">catalogName</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">catalogs</span><span class="o">&gt;</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="o">&lt;</span><span class="p">?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span><span class="p">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">catalogs</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">versions</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">effectiveDate</span><span class="o">&gt;</span><span class="mi">2013</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">08</span><span class="no">T00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="no">Z</span><span class="o">&lt;</span><span class="sr">/effectiveDate&gt;
         &lt;catalogName&gt;Movies&lt;/</span><span class="n">catalogName</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span><span class="no">IN_ADVANCE</span><span class="o">&lt;</span><span class="sr">/recurringBillingMode&gt;
         &lt;currencies&gt;
            &lt;currency&gt;USD&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="sr">/currencies&gt;
         &lt;units /</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">products</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">product</span> <span class="nb">name</span><span class="o">=</span><span class="s2">"Basic"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">category</span><span class="o">&gt;</span><span class="no">BASE</span><span class="o">&lt;</span><span class="sr">/category&gt;
               &lt;included /</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">available</span> <span class="sr">/&gt;
               &lt;limits /</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/product&gt;
         &lt;/</span><span class="n">products</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">rules</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">changePolicy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">changePolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="no">END_OF_TERM</span><span class="o">&lt;</span><span class="sr">/policy&gt;
               &lt;/</span><span class="n">changePolicyCase</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/changePolicy&gt;
            &lt;changeAlignment&gt;
               &lt;changeAlignmentCase&gt;
                  &lt;alignment&gt;START_OF_BUNDLE&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/changeAlignmentCase&gt;
            &lt;/</span><span class="n">changeAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">cancelPolicy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">productCategory</span><span class="o">&gt;</span><span class="no">BASE</span><span class="o">&lt;</span><span class="sr">/productCategory&gt;
                  &lt;policy&gt;END_OF_TERM&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/cancelPolicyCase&gt;
               &lt;cancelPolicyCase&gt;
                  &lt;policy&gt;IMMEDIATE&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/cancelPolicyCase&gt;
            &lt;/</span><span class="n">cancelPolicy</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">createAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">createAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="no">START_OF_BUNDLE</span><span class="o">&lt;</span><span class="sr">/alignment&gt;
               &lt;/</span><span class="n">createAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/createAlignment&gt;
            &lt;billingAlignment&gt;
               &lt;billingAlignmentCase&gt;
                  &lt;alignment&gt;ACCOUNT&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/billingAlignmentCase&gt;
            &lt;/</span><span class="n">billingAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">priceList</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">priceListCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">toPriceList</span><span class="o">&gt;</span><span class="no">DEFAULT</span><span class="o">&lt;</span><span class="sr">/toPriceList&gt;
               &lt;/</span><span class="n">priceListCase</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/priceList&gt;
         &lt;/</span><span class="n">rules</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">plan</span> <span class="nb">name</span><span class="o">=</span><span class="s2">"basic-monthly"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">product</span><span class="o">&gt;</span><span class="no">Basic</span><span class="o">&lt;</span><span class="sr">/product&gt;
               &lt;initialPhases /</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">finalPhase</span> <span class="n">type</span><span class="o">=</span><span class="s2">"EVERGREEN"</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="no">UNLIMITED</span><span class="o">&lt;</span><span class="sr">/unit&gt;
                     &lt;number&gt;-1&lt;/num</span><span class="n">ber</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="sr">/duration&gt;
                  &lt;recurring&gt;
                     &lt;billingPeriod&gt;MONTHLY&lt;/</span><span class="n">billingPeriod</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
                           <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="no">USD</span><span class="o">&lt;</span><span class="sr">/currency&gt;
                           &lt;value&gt;1000.00&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="sr">/price&gt;
                     &lt;/</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="sr">/recurring&gt;
                  &lt;usages /</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/finalPhase&gt;
               &lt;plansAllowedInBundle&gt;-1&lt;/</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/plan&gt;
         &lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">priceLists</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">defaultPriceList</span> <span class="nb">name</span><span class="o">=</span><span class="s2">"DEFAULT"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">plan</span><span class="o">&gt;</span><span class="n">basic</span><span class="o">-</span><span class="n">monthly</span><span class="o">&lt;</span><span class="sr">/plan&gt;
               &lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/defaultPriceList&gt;
         &lt;/</span><span class="n">priceLists</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="sr">/version&gt;
      &lt;version&gt;
         &lt;effectiveDate&gt;2013-02-08T00:00:01Z&lt;/e</span><span class="n">ffectiveDate</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">catalogName</span><span class="o">&gt;</span><span class="no">Movies</span><span class="o">&lt;</span><span class="sr">/catalogName&gt;
         &lt;recurringBillingMode&gt;IN_ADVANCE&lt;/</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">currencies</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="no">USD</span><span class="o">&lt;</span><span class="sr">/currency&gt;
         &lt;/</span><span class="n">currencies</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">units</span> <span class="sr">/&gt;
         &lt;products&gt;
            &lt;product name="Basic"&gt;
               &lt;category&gt;BASE&lt;/</span><span class="n">category</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">included</span> <span class="sr">/&gt;
               &lt;available /</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">limits</span> <span class="sr">/&gt;
            &lt;/</span><span class="n">product</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="sr">/products&gt;
         &lt;rules&gt;
            &lt;changePolicy&gt;
               &lt;changePolicyCase&gt;
                  &lt;policy&gt;END_OF_TERM&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/changePolicyCase&gt;
            &lt;/</span><span class="n">changePolicy</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">changeAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">changeAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="no">START_OF_BUNDLE</span><span class="o">&lt;</span><span class="sr">/alignment&gt;
               &lt;/</span><span class="n">changeAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/changeAlignment&gt;
            &lt;cancelPolicy&gt;
               &lt;cancelPolicyCase&gt;
                  &lt;productCategory&gt;BASE&lt;/</span><span class="n">productCategory</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="no">END_OF_TERM</span><span class="o">&lt;</span><span class="sr">/policy&gt;
               &lt;/</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="no">IMMEDIATE</span><span class="o">&lt;</span><span class="sr">/policy&gt;
               &lt;/</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/cancelPolicy&gt;
            &lt;createAlignment&gt;
               &lt;createAlignmentCase&gt;
                  &lt;alignment&gt;START_OF_BUNDLE&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/createAlignmentCase&gt;
            &lt;/</span><span class="n">createAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">billingAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">billingAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="no">ACCOUNT</span><span class="o">&lt;</span><span class="sr">/alignment&gt;
               &lt;/</span><span class="n">billingAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/billingAlignment&gt;
            &lt;priceList&gt;
               &lt;priceListCase&gt;
                  &lt;toPriceList&gt;DEFAULT&lt;/</span><span class="n">toPriceList</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/priceListCase&gt;
            &lt;/</span><span class="n">priceList</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="sr">/rules&gt;
         &lt;plans&gt;
            &lt;plan name="basic-monthly"&gt;
               &lt;product&gt;Basic&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">initialPhases</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">phase</span> <span class="n">type</span><span class="o">=</span><span class="s2">"TRIAL"</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="no">DAYS</span><span class="o">&lt;</span><span class="sr">/unit&gt;
                        &lt;number&gt;30&lt;/num</span><span class="n">ber</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="sr">/duration&gt;
                     &lt;fixed type="ONE_TIME"&gt;
                        &lt;fixedPrice /</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="sr">/fixed&gt;
                     &lt;usages /</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="sr">/phase&gt;
               &lt;/ini</span><span class="n">tialPhases</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">finalPhase</span> <span class="n">type</span><span class="o">=</span><span class="s2">"EVERGREEN"</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="no">UNLIMITED</span><span class="o">&lt;</span><span class="sr">/unit&gt;
                     &lt;number&gt;-1&lt;/num</span><span class="n">ber</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="sr">/duration&gt;
                  &lt;recurring&gt;
                     &lt;billingPeriod&gt;MONTHLY&lt;/</span><span class="n">billingPeriod</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
                           <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="no">USD</span><span class="o">&lt;</span><span class="sr">/currency&gt;
                           &lt;value&gt;1000.00&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="sr">/price&gt;
                     &lt;/</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="sr">/recurring&gt;
                  &lt;usages /</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="sr">/finalPhase&gt;
               &lt;plansAllowedInBundle&gt;-1&lt;/</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/plan&gt;
         &lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">priceLists</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">defaultPriceList</span> <span class="nb">name</span><span class="o">=</span><span class="s2">"DEFAULT"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">plan</span><span class="o">&gt;</span><span class="n">basic</span><span class="o">-</span><span class="n">monthly</span><span class="o">&lt;</span><span class="sr">/plan&gt;
               &lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/defaultPriceList&gt;
         &lt;/</span><span class="n">priceLists</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="sr">/version&gt;
   &lt;/</span><span class="n">versions</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">catalogName</span><span class="o">&gt;</span><span class="no">Movies</span><span class="o">&lt;</span><span class="sr">/catalogName&gt;
   &lt;recurringBillingMode&gt;IN_ADVANCE&lt;/</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/catalogs&gt;
</span></code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="err">?</span><span class="n">xml</span> <span class="n">version</span><span class="o">=</span><span class="s">"1.0"</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="err">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">catalogs</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">versions</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">effectiveDate</span><span class="o">&gt;</span><span class="mi">2013</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span><span class="n">Z</span><span class="o">&lt;/</span><span class="n">effectiveDate</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">catalogName</span><span class="o">&gt;</span><span class="n">Movies</span><span class="o">&lt;/</span><span class="n">catalogName</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span><span class="n">IN_ADVANCE</span><span class="o">&lt;/</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">currencies</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">USD</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">currencies</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">units</span> <span class="o">/&gt;</span>
         <span class="o">&lt;</span><span class="n">products</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">product</span> <span class="n">name</span><span class="o">=</span><span class="s">"Basic"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">category</span><span class="o">&gt;</span><span class="n">BASE</span><span class="o">&lt;/</span><span class="n">category</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">included</span> <span class="o">/&gt;</span>
               <span class="o">&lt;</span><span class="n">available</span> <span class="o">/&gt;</span>
               <span class="o">&lt;</span><span class="n">limits</span> <span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">products</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">rules</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">changePolicy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">changePolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="n">END_OF_TERM</span><span class="o">&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">changePolicyCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">changePolicy</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">changeAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">changeAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">START_OF_BUNDLE</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">changeAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">changeAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">cancelPolicy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">productCategory</span><span class="o">&gt;</span><span class="n">BASE</span><span class="o">&lt;/</span><span class="n">productCategory</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="n">END_OF_TERM</span><span class="o">&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="n">IMMEDIATE</span><span class="o">&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">cancelPolicy</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">createAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">createAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">START_OF_BUNDLE</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">createAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">createAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">billingAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">billingAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">ACCOUNT</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">billingAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">billingAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">priceList</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">priceListCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">toPriceList</span><span class="o">&gt;</span><span class="n">DEFAULT</span><span class="o">&lt;/</span><span class="n">toPriceList</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">priceListCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">priceList</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">rules</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">plan</span> <span class="n">name</span><span class="o">=</span><span class="s">"basic-monthly"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">product</span><span class="o">&gt;</span><span class="n">Basic</span><span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">initialPhases</span> <span class="o">/&gt;</span>
               <span class="o">&lt;</span><span class="n">finalPhase</span> <span class="nb">type</span><span class="o">=</span><span class="s">"EVERGREEN"</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">UNLIMITED</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                  <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">recurring</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">billingPeriod</span><span class="o">&gt;</span><span class="n">MONTHLY</span><span class="o">&lt;/</span><span class="n">billingPeriod</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
                           <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">USD</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
                           <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">1000.00</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
                        <span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
                     <span class="o">&lt;/</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                  <span class="o">&lt;/</span><span class="n">recurring</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">usages</span> <span class="o">/&gt;</span>
               <span class="o">&lt;/</span><span class="n">finalPhase</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">priceLists</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">defaultPriceList</span> <span class="n">name</span><span class="o">=</span><span class="s">"DEFAULT"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">plan</span><span class="o">&gt;</span><span class="n">basic</span><span class="o">-</span><span class="n">monthly</span><span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">defaultPriceList</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">priceLists</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">effectiveDate</span><span class="o">&gt;</span><span class="mi">2013</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">08</span><span class="n">T00</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">01</span><span class="n">Z</span><span class="o">&lt;/</span><span class="n">effectiveDate</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">catalogName</span><span class="o">&gt;</span><span class="n">Movies</span><span class="o">&lt;/</span><span class="n">catalogName</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span><span class="n">IN_ADVANCE</span><span class="o">&lt;/</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">currencies</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">USD</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">currencies</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">units</span> <span class="o">/&gt;</span>
         <span class="o">&lt;</span><span class="n">products</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">product</span> <span class="n">name</span><span class="o">=</span><span class="s">"Basic"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">category</span><span class="o">&gt;</span><span class="n">BASE</span><span class="o">&lt;/</span><span class="n">category</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">included</span> <span class="o">/&gt;</span>
               <span class="o">&lt;</span><span class="n">available</span> <span class="o">/&gt;</span>
               <span class="o">&lt;</span><span class="n">limits</span> <span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">products</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">rules</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">changePolicy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">changePolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="n">END_OF_TERM</span><span class="o">&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">changePolicyCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">changePolicy</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">changeAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">changeAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">START_OF_BUNDLE</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">changeAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">changeAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">cancelPolicy</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">productCategory</span><span class="o">&gt;</span><span class="n">BASE</span><span class="o">&lt;/</span><span class="n">productCategory</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="n">END_OF_TERM</span><span class="o">&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">policy</span><span class="o">&gt;</span><span class="n">IMMEDIATE</span><span class="o">&lt;/</span><span class="n">policy</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">cancelPolicyCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">cancelPolicy</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">createAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">createAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">START_OF_BUNDLE</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">createAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">createAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">billingAlignment</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">billingAlignmentCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">alignment</span><span class="o">&gt;</span><span class="n">ACCOUNT</span><span class="o">&lt;/</span><span class="n">alignment</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">billingAlignmentCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">billingAlignment</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">priceList</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">priceListCase</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">toPriceList</span><span class="o">&gt;</span><span class="n">DEFAULT</span><span class="o">&lt;/</span><span class="n">toPriceList</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">priceListCase</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">priceList</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">rules</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">plan</span> <span class="n">name</span><span class="o">=</span><span class="s">"basic-monthly"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">product</span><span class="o">&gt;</span><span class="n">Basic</span><span class="o">&lt;/</span><span class="n">product</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">initialPhases</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">phase</span> <span class="nb">type</span><span class="o">=</span><span class="s">"TRIAL"</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">DAYS</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;</span><span class="mi">30</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                     <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">fixed</span> <span class="nb">type</span><span class="o">=</span><span class="s">"ONE_TIME"</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">fixedPrice</span> <span class="o">/&gt;</span>
                     <span class="o">&lt;/</span><span class="n">fixed</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">usages</span> <span class="o">/&gt;</span>
                  <span class="o">&lt;/</span><span class="n">phase</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">initialPhases</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">finalPhase</span> <span class="nb">type</span><span class="o">=</span><span class="s">"EVERGREEN"</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">duration</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">unit</span><span class="o">&gt;</span><span class="n">UNLIMITED</span><span class="o">&lt;/</span><span class="n">unit</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">number</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">number</span><span class="o">&gt;</span>
                  <span class="o">&lt;/</span><span class="n">duration</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">recurring</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">billingPeriod</span><span class="o">&gt;</span><span class="n">MONTHLY</span><span class="o">&lt;/</span><span class="n">billingPeriod</span><span class="o">&gt;</span>
                     <span class="o">&lt;</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span>
                           <span class="o">&lt;</span><span class="n">currency</span><span class="o">&gt;</span><span class="n">USD</span><span class="o">&lt;/</span><span class="n">currency</span><span class="o">&gt;</span>
                           <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="mf">1000.00</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
                        <span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
                     <span class="o">&lt;/</span><span class="n">recurringPrice</span><span class="o">&gt;</span>
                  <span class="o">&lt;/</span><span class="n">recurring</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">usages</span> <span class="o">/&gt;</span>
               <span class="o">&lt;/</span><span class="n">finalPhase</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">plansAllowedInBundle</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
         <span class="o">&lt;</span><span class="n">priceLists</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">defaultPriceList</span> <span class="n">name</span><span class="o">=</span><span class="s">"DEFAULT"</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">plans</span><span class="o">&gt;</span>
                  <span class="o">&lt;</span><span class="n">plan</span><span class="o">&gt;</span><span class="n">basic</span><span class="o">-</span><span class="n">monthly</span><span class="o">&lt;/</span><span class="n">plan</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">plans</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">defaultPriceList</span><span class="o">&gt;</span>
         <span class="o">&lt;/</span><span class="n">priceLists</span><span class="o">&gt;</span>
      <span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">versions</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">catalogName</span><span class="o">&gt;</span><span class="n">Movies</span><span class="o">&lt;/</span><span class="n">catalogName</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span><span class="n">IN_ADVANCE</span><span class="o">&lt;/</span><span class="n">recurringBillingMode</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">catalogs</span><span class="o">&gt;</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the catalog for the requested date in XML format.</p>
<h3 id='catalog-retrieve-the-catalog-as-json'>Retrieve the catalog as JSON</h3>
<p>This endpoint retrieves the Catalog for a requested date in JSON format. If there are multiple versions, the latest version with an effective date not later than the requested date is returned. If the effective date for all versions is greater than the requested date, the earliest version is returned. See the previous endpoint for examples.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">DateTime</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Catalogs</span> <span class="n">catalogsJson</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getCatalogJson</span><span class="o">(</span><span class="n">requestedDate</span><span class="o">,</span> 
                                                  <span class="n">accountId</span><span class="o">,</span> 
                                                  <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_tenant_catalog_json</span><span class="o">.</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span> 
                                                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_catalog_json</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"name"</span>: <span class="s2">"SpyCarBasic"</span>,
    <span class="s2">"effectiveDate"</span>: <span class="s2">"2013-02-08T00:00:00.000+0000"</span>,
    <span class="s2">"currencies"</span>: <span class="o">[</span>
      <span class="s2">"USD"</span>,
      <span class="s2">"GBP"</span>
    <span class="o">]</span>,
    <span class="s2">"units"</span>: <span class="o">[]</span>,
    <span class="s2">"products"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"type"</span>: <span class="s2">"ADD_ON"</span>,
        <span class="s2">"name"</span>: <span class="s2">"Super"</span>,
        <span class="s2">"prettyName"</span>: <span class="s2">"Super"</span>,
        <span class="s2">"plans"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"name"</span>: <span class="s2">"super-monthly"</span>,
            <span class="s2">"prettyName"</span>: <span class="s2">"super-monthly"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"phases"</span>: <span class="o">[</span>
              <span class="o">{</span>
                <span class="s2">"type"</span>: <span class="s2">"TRIAL"</span>,
                <span class="s2">"prices"</span>: <span class="o">[]</span>,
                <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
                <span class="s2">"duration"</span>: <span class="o">{</span>
                  <span class="s2">"unit"</span>: <span class="s2">"DAYS"</span>,
                  <span class="s2">"number"</span>: 30
                <span class="o">}</span>,
                <span class="s2">"usages"</span>: <span class="o">[]</span>
              <span class="o">}</span>,
              <span class="o">{</span>
                <span class="s2">"type"</span>: <span class="s2">"EVERGREEN"</span>,
                <span class="s2">"prices"</span>: <span class="o">[</span>
                  <span class="o">{</span>
                    <span class="s2">"currency"</span>: <span class="s2">"GBP"</span>,
                    <span class="s2">"value"</span>: 750
                  <span class="o">}</span>,
                  <span class="o">{</span>
                    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
                    <span class="s2">"value"</span>: 1000
                  <span class="o">}</span>
                <span class="o">]</span>,
                <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
                <span class="s2">"duration"</span>: <span class="o">{</span>
                  <span class="s2">"unit"</span>: <span class="s2">"UNLIMITED"</span>,
                  <span class="s2">"number"</span>: -1
                <span class="o">}</span>,
                <span class="s2">"usages"</span>: <span class="o">[]</span>
              <span class="o">}</span>
            <span class="o">]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"included"</span>: <span class="o">[]</span>,
        <span class="s2">"available"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="o">{</span>
        <span class="s2">"type"</span>: <span class="s2">"BASE"</span>,
        <span class="s2">"name"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"prettyName"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"plans"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"name"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"prettyName"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"phases"</span>: <span class="o">[</span>
              <span class="o">{</span>
                <span class="s2">"type"</span>: <span class="s2">"TRIAL"</span>,
                <span class="s2">"prices"</span>: <span class="o">[]</span>,
                <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
                <span class="s2">"duration"</span>: <span class="o">{</span>
                  <span class="s2">"unit"</span>: <span class="s2">"DAYS"</span>,
                  <span class="s2">"number"</span>: 30
                <span class="o">}</span>,
                <span class="s2">"usages"</span>: <span class="o">[]</span>
              <span class="o">}</span>,
              <span class="o">{</span>
                <span class="s2">"type"</span>: <span class="s2">"EVERGREEN"</span>,
                <span class="s2">"prices"</span>: <span class="o">[</span>
                  <span class="o">{</span>
                    <span class="s2">"currency"</span>: <span class="s2">"GBP"</span>,
                    <span class="s2">"value"</span>: 75
                  <span class="o">}</span>,
                  <span class="o">{</span>
                    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
                    <span class="s2">"value"</span>: 100
                  <span class="o">}</span>
                <span class="o">]</span>,
                <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
                <span class="s2">"duration"</span>: <span class="o">{</span>
                  <span class="s2">"unit"</span>: <span class="s2">"UNLIMITED"</span>,
                  <span class="s2">"number"</span>: -1
                <span class="o">}</span>,
                <span class="s2">"usages"</span>: <span class="o">[]</span>
              <span class="o">}</span>
            <span class="o">]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"included"</span>: <span class="o">[]</span>,
        <span class="s2">"available"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="o">{</span>
        <span class="s2">"type"</span>: <span class="s2">"BASE"</span>,
        <span class="s2">"name"</span>: <span class="s2">"Sports"</span>,
        <span class="s2">"prettyName"</span>: <span class="s2">"Sports"</span>,
        <span class="s2">"plans"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"name"</span>: <span class="s2">"sports-monthly"</span>,
            <span class="s2">"prettyName"</span>: <span class="s2">"sports-monthly"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"phases"</span>: <span class="o">[</span>
              <span class="o">{</span>
                <span class="s2">"type"</span>: <span class="s2">"TRIAL"</span>,
                <span class="s2">"prices"</span>: <span class="o">[]</span>,
                <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
                <span class="s2">"duration"</span>: <span class="o">{</span>
                  <span class="s2">"unit"</span>: <span class="s2">"DAYS"</span>,
                  <span class="s2">"number"</span>: 30
                <span class="o">}</span>,
                <span class="s2">"usages"</span>: <span class="o">[]</span>
              <span class="o">}</span>,
              <span class="o">{</span>
                <span class="s2">"type"</span>: <span class="s2">"EVERGREEN"</span>,
                <span class="s2">"prices"</span>: <span class="o">[</span>
                  <span class="o">{</span>
                    <span class="s2">"currency"</span>: <span class="s2">"GBP"</span>,
                    <span class="s2">"value"</span>: 375
                  <span class="o">}</span>,
                  <span class="o">{</span>
                    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
                    <span class="s2">"value"</span>: 500
                  <span class="o">}</span>
                <span class="o">]</span>,
                <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
                <span class="s2">"duration"</span>: <span class="o">{</span>
                  <span class="s2">"unit"</span>: <span class="s2">"UNLIMITED"</span>,
                  <span class="s2">"number"</span>: -1
                <span class="o">}</span>,
                <span class="s2">"usages"</span>: <span class="o">[]</span>
              <span class="o">}</span>
            <span class="o">]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"included"</span>: <span class="o">[]</span>,
        <span class="s2">"available"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"priceLists"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"name"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"plans"</span>: <span class="o">[</span>
          <span class="s2">"sports-monthly"</span>,
          <span class="s2">"standard-monthly"</span>,
          <span class="s2">"super-monthly"</span>
        <span class="o">]</span>
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Catalog</span> <span class="o">{</span>
    <span class="nl">name:</span> <span class="n">Firearms</span>
    <span class="nl">effectiveDate:</span> <span class="mi">2011</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">00.000</span><span class="n">Z</span>
    <span class="nl">currencies:</span> <span class="o">[</span><span class="n">USD</span><span class="o">,</span> <span class="n">EUR</span><span class="o">,</span> <span class="n">GBP</span><span class="o">]</span>
    <span class="nl">units:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Unit</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">bullets</span>
        <span class="nl">prettyName:</span> <span class="n">bullets</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Unit</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">stones</span>
        <span class="nl">prettyName:</span> <span class="n">stones</span>
    <span class="o">}]</span>
    <span class="nl">products:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">BASE</span>
        <span class="nl">name:</span> <span class="n">Assault</span><span class="o">-</span><span class="n">Rifle</span>
        <span class="nl">prettyName:</span> <span class="n">Assault</span><span class="o">-</span><span class="n">Rifle</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span>
            <span class="nl">prettyName:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">5999.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">3499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">3999.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">prettyName:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">DISCOUNT</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">99.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">99.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">99.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">6</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">5999.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">3499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">3999.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">rescue</span>
            <span class="nl">prettyName:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">rescue</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">DISCOUNT</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">5999.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">3499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">3999.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">YEARS</span>
                    <span class="nl">number:</span> <span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">5999.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">3499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">3999.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">prettyName:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">599.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">349.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">399.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[</span><span class="n">Cleaning</span><span class="o">,</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span><span class="o">]</span>
        <span class="nl">available:</span> <span class="o">[</span><span class="n">Bullets</span><span class="o">,</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">ADD_ON</span>
        <span class="nl">name:</span> <span class="n">Holster</span>
        <span class="nl">prettyName:</span> <span class="n">Holster</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">holster</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">regular</span>
            <span class="nl">prettyName:</span> <span class="n">holster</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">regular</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">holster</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">special</span>
            <span class="nl">prettyName:</span> <span class="n">holster</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">special</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">ADD_ON</span>
        <span class="nl">name:</span> <span class="n">Refurbish</span><span class="o">-</span><span class="n">Maintenance</span>
        <span class="nl">prettyName:</span> <span class="n">Refurbish</span><span class="o">-</span><span class="n">Maintenance</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">refurbish</span><span class="o">-</span><span class="n">maintenance</span>
            <span class="nl">prettyName:</span> <span class="n">refurbish</span><span class="o">-</span><span class="n">maintenance</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">FIXEDTERM</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">599.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">599.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">599.95</span>
                <span class="o">}]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">12</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">BASE</span>
        <span class="nl">name:</span> <span class="n">Trebuchet</span>
        <span class="nl">prettyName:</span> <span class="n">Trebuchet</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">trebuchet</span><span class="o">-</span><span class="n">usage</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">arrear</span>
            <span class="nl">prettyName:</span> <span class="n">Trebuchet</span> <span class="n">Monthly</span> <span class="n">Plan</span>
            <span class="nl">billingPeriod:</span> <span class="n">NO_BILLING_PERIOD</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Usage</span> <span class="o">{</span>
                    <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
                    <span class="nl">tiers:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Tier</span> <span class="o">{</span>
                        <span class="nl">limits:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Limit</span> <span class="o">{</span>
                            <span class="nl">unit:</span> <span class="n">stones</span>
                            <span class="nl">max:</span> <span class="mf">100.0</span>
                            <span class="nl">min:</span> <span class="o">-</span><span class="mf">1.0</span>
                        <span class="o">}]</span>
                        <span class="nl">fixedPrice:</span> <span class="o">[]</span>
                        <span class="nl">recurringPrice:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                            <span class="nl">currency:</span> <span class="n">USD</span>
                            <span class="nl">value:</span> <span class="mi">100</span>
                        <span class="o">}]</span>
                        <span class="nl">blocks:</span> <span class="o">[]</span>
                    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Tier</span> <span class="o">{</span>
                        <span class="nl">limits:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Limit</span> <span class="o">{</span>
                            <span class="nl">unit:</span> <span class="n">stones</span>
                            <span class="nl">max:</span> <span class="o">-</span><span class="mf">1.0</span>
                            <span class="nl">min:</span> <span class="o">-</span><span class="mf">1.0</span>
                        <span class="o">}]</span>
                        <span class="nl">fixedPrice:</span> <span class="o">[]</span>
                        <span class="nl">recurringPrice:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                            <span class="nl">currency:</span> <span class="n">USD</span>
                            <span class="nl">value:</span> <span class="mi">1000</span>
                        <span class="o">}]</span>
                        <span class="nl">blocks:</span> <span class="o">[]</span>
                    <span class="o">}]</span>
                <span class="o">}]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">BASE</span>
        <span class="nl">name:</span> <span class="n">Blowdart</span>
        <span class="nl">prettyName:</span> <span class="n">Blowdart</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">prettyName:</span> <span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">DISCOUNT</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">6</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span>
            <span class="nl">prettyName:</span> <span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">prettyName:</span> <span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">ADD_ON</span>
        <span class="nl">name:</span> <span class="n">Extra</span><span class="o">-</span><span class="n">Ammo</span>
        <span class="nl">prettyName:</span> <span class="n">Extra</span><span class="o">-</span><span class="n">Ammo</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">extra</span><span class="o">-</span><span class="n">ammo</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">prettyName:</span> <span class="n">extra</span><span class="o">-</span><span class="n">ammo</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">999.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">999.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">BASE</span>
        <span class="nl">name:</span> <span class="n">Shotgun</span>
        <span class="nl">prettyName:</span> <span class="n">Shotgun</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span>
            <span class="nl">prettyName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">2399.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">1499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">1699.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">prettyName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">DISCOUNT</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">19.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">49.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">69.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">6</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">2399.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">1499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">1699.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">prettyName:</span> <span class="n">Shotgun</span> <span class="n">Monthly</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">249.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">149.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">169.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[</span><span class="n">Cleaning</span><span class="o">]</span>
        <span class="nl">available:</span> <span class="o">[</span><span class="n">Bullets</span><span class="o">,</span> <span class="n">Holster</span><span class="o">,</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span><span class="o">,</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">ADD_ON</span>
        <span class="nl">name:</span> <span class="n">Cleaning</span>
        <span class="nl">prettyName:</span> <span class="n">Cleaning</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">cleaning</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">prettyName:</span> <span class="n">cleaning</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">2.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">1.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">0.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">ADD_ON</span>
        <span class="nl">name:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
        <span class="nl">prettyName:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">prettyName:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">DISCOUNT</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">999.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">999.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">1999.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">1499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">1999.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">STANDALONE</span>
        <span class="nl">name:</span> <span class="n">Knife</span>
        <span class="nl">prettyName:</span> <span class="n">Knife</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">knife</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span>
            <span class="nl">prettyName:</span> <span class="n">knife</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">BASE</span>
        <span class="nl">name:</span> <span class="n">Pistol</span>
        <span class="nl">prettyName:</span> <span class="n">Pistol</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">annual</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">annual</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">DISCOUNT</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">6</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span><span class="o">-</span><span class="n">notrial</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span><span class="o">-</span><span class="n">notrial</span>
            <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">DISCOUNT</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">9.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">6</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">199.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">fixedterm</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">fixedterm</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">FIXEDTERM</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">12</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">19.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">19.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">19.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">quarterly</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">quarterly</span>
            <span class="nl">billingPeriod:</span> <span class="n">QUARTERLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">69.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">69.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">69.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">thirty</span><span class="o">-</span><span class="n">days</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">thirty</span><span class="o">-</span><span class="n">days</span>
            <span class="nl">billingPeriod:</span> <span class="n">THIRTY_DAYS</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">weekly</span>
            <span class="nl">prettyName:</span> <span class="n">pistol</span><span class="o">-</span><span class="n">weekly</span>
            <span class="nl">billingPeriod:</span> <span class="n">WEEKLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">TRIAL</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">DAYS</span>
                    <span class="nl">number:</span> <span class="mi">30</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">29.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[</span><span class="n">Bullets</span><span class="o">,</span> <span class="n">Cleaning</span><span class="o">,</span> <span class="n">Refurbish</span><span class="o">-</span><span class="n">Maintenance</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">ADD_ON</span>
        <span class="nl">name:</span> <span class="n">Bullets</span>
        <span class="nl">prettyName:</span> <span class="n">Bullets</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">bullets</span><span class="o">-</span><span class="n">usage</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">arrear</span>
            <span class="nl">prettyName:</span> <span class="n">Bullet</span> <span class="n">Monthly</span> <span class="n">Plan</span>
            <span class="nl">billingPeriod:</span> <span class="n">NO_BILLING_PERIOD</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Usage</span> <span class="o">{</span>
                    <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
                    <span class="nl">tiers:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Tier</span> <span class="o">{</span>
                        <span class="nl">limits:</span> <span class="o">[]</span>
                        <span class="nl">fixedPrice:</span> <span class="o">[]</span>
                        <span class="nl">recurringPrice:</span> <span class="o">[]</span>
                        <span class="nl">blocks:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">TieredBlock</span> <span class="o">{</span>
                            <span class="nl">unit:</span> <span class="n">bullets</span>
                            <span class="nl">size:</span> <span class="mf">100.0</span>
                            <span class="nl">max:</span> <span class="mf">10.0</span>
                            <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                                <span class="nl">currency:</span> <span class="n">USD</span>
                                <span class="nl">value:</span> <span class="mf">2.95</span>
                            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                                <span class="nl">currency:</span> <span class="n">EUR</span>
                                <span class="nl">value:</span> <span class="mf">1.95</span>
                            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                                <span class="nl">currency:</span> <span class="n">GBP</span>
                                <span class="nl">value:</span> <span class="mf">0.95</span>
                            <span class="o">}]</span>
                        <span class="o">}]</span>
                    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Tier</span> <span class="o">{</span>
                        <span class="nl">limits:</span> <span class="o">[]</span>
                        <span class="nl">fixedPrice:</span> <span class="o">[]</span>
                        <span class="nl">recurringPrice:</span> <span class="o">[]</span>
                        <span class="nl">blocks:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">TieredBlock</span> <span class="o">{</span>
                            <span class="nl">unit:</span> <span class="n">bullets</span>
                            <span class="nl">size:</span> <span class="mf">1000.0</span>
                            <span class="nl">max:</span> <span class="mf">100.0</span>
                            <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                                <span class="nl">currency:</span> <span class="n">USD</span>
                                <span class="nl">value:</span> <span class="mf">5.95</span>
                            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                                <span class="nl">currency:</span> <span class="n">EUR</span>
                                <span class="nl">value:</span> <span class="mf">4.95</span>
                            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                                <span class="nl">currency:</span> <span class="n">GBP</span>
                                <span class="nl">value:</span> <span class="mf">3.95</span>
                            <span class="o">}]</span>
                        <span class="o">}]</span>
                    <span class="o">}]</span>
                <span class="o">}]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Product</span> <span class="o">{</span>
        <span class="nl">type:</span> <span class="n">ADD_ON</span>
        <span class="nl">name:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
        <span class="nl">prettyName:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Plan</span> <span class="o">{</span>
            <span class="nl">name:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">prettyName:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phases:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">DISCOUNT</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">399.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">299.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">399.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">MONTHS</span>
                    <span class="nl">number:</span> <span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">Phase</span> <span class="o">{</span>
                <span class="nl">type:</span> <span class="n">EVERGREEN</span>
                <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">USD</span>
                    <span class="nl">value:</span> <span class="mf">999.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">EUR</span>
                    <span class="nl">value:</span> <span class="mf">499.95</span>
                <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
                    <span class="nl">currency:</span> <span class="n">GBP</span>
                    <span class="nl">value:</span> <span class="mf">999.95</span>
                <span class="o">}]</span>
                <span class="nl">fixedPrices:</span> <span class="o">[]</span>
                <span class="nl">duration:</span> <span class="kd">class</span> <span class="nc">Duration</span> <span class="o">{</span>
                    <span class="nl">unit:</span> <span class="n">UNLIMITED</span>
                    <span class="nl">number:</span> <span class="o">-</span><span class="mi">1</span>
                <span class="o">}</span>
                <span class="nl">usages:</span> <span class="o">[]</span>
            <span class="o">}]</span>
        <span class="o">}]</span>
        <span class="nl">included:</span> <span class="o">[]</span>
        <span class="nl">available:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">priceLists:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PriceList</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">DEFAULT</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">,</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">monthly</span><span class="o">,</span> <span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span><span class="o">,</span> <span class="n">bullets</span><span class="o">-</span><span class="n">usage</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">arrear</span><span class="o">,</span> <span class="n">cleaning</span><span class="o">-</span><span class="n">monthly</span><span class="o">,</span> <span class="n">extra</span><span class="o">-</span><span class="n">ammo</span><span class="o">-</span><span class="n">monthly</span><span class="o">,</span> <span class="n">holster</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">regular</span><span class="o">,</span> <span class="n">holster</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">special</span><span class="o">,</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">,</span> <span class="n">pistol</span><span class="o">-</span><span class="n">annual</span><span class="o">,</span> <span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span><span class="o">,</span> <span class="n">pistol</span><span class="o">-</span><span class="n">quarterly</span><span class="o">,</span> <span class="n">pistol</span><span class="o">-</span><span class="n">thirty</span><span class="o">-</span><span class="n">days</span><span class="o">,</span> <span class="n">pistol</span><span class="o">-</span><span class="n">weekly</span><span class="o">,</span> <span class="n">refurbish</span><span class="o">-</span><span class="n">maintenance</span><span class="o">,</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">,</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">,</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">,</span> <span class="n">trebuchet</span><span class="o">-</span><span class="n">usage</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">arrear</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PriceList</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">gunclubDiscount</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span><span class="o">,</span> <span class="n">pistol</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span><span class="o">,</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PriceList</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">gunclubDiscountNoTrial</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="n">pistol</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">gunclub</span><span class="o">-</span><span class="n">discount</span><span class="o">-</span><span class="n">notrial</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PriceList</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">rescue</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">rescue</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PriceList</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">fixedTerm</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">fixedterm</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PriceList</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">notrial</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span><span class="o">,</span> <span class="n">knife</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span><span class="o">,</span> <span class="n">pistol</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">notrial</span><span class="o">]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PriceList</span> <span class="o">{</span>
        <span class="nl">name:</span> <span class="n">trial</span>
        <span class="nl">plans:</span> <span class="o">[</span><span class="n">blowdart</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span><span class="o">]</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"name"</span><span class="ss">:"Movies"</span><span class="p">,</span>
      <span class="s2">"effectiveDate"</span><span class="ss">:"2013-02-08T00:00:00.000+0000"</span><span class="p">,</span>
      <span class="s2">"currencies"</span><span class="p">:[</span>
         <span class="s2">"USD"</span>
      <span class="p">],</span>
      <span class="s2">"units"</span><span class="p">:[</span>

      <span class="p">],</span>
      <span class="s2">"products"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"type"</span><span class="ss">:"BASE"</span><span class="p">,</span>
            <span class="s2">"name"</span><span class="ss">:"Basic"</span><span class="p">,</span>
            <span class="s2">"prettyName"</span><span class="ss">:"Basic"</span><span class="p">,</span>
            <span class="s2">"plans"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"name"</span><span class="ss">:"basic-monthly"</span><span class="p">,</span>
                  <span class="s2">"prettyName"</span><span class="ss">:"basic-monthly"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"phases"</span><span class="p">:[</span>
                     <span class="p">{</span>
                        <span class="s2">"type"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
                        <span class="s2">"prices"</span><span class="p">:[</span>
                           <span class="p">{</span>
                              <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
                              <span class="s2">"value"</span><span class="p">:</span><span class="mi">1000</span><span class="o">.</span><span class="mi">0</span>
                           <span class="p">}</span>
                        <span class="p">],</span>
                        <span class="s2">"fixedPrices"</span><span class="p">:[</span>

                        <span class="p">],</span>
                        <span class="s2">"duration"</span><span class="p">:{</span>
                           <span class="s2">"unit"</span><span class="ss">:"UNLIMITED"</span><span class="p">,</span>
                           <span class="s2">"number"</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span>
                        <span class="p">},</span>
                        <span class="s2">"usages"</span><span class="p">:[</span>

                        <span class="p">]</span>
                     <span class="p">}</span>
                  <span class="p">]</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"included"</span><span class="p">:[</span>

            <span class="p">],</span>
            <span class="s2">"available"</span><span class="p">:[</span>

            <span class="p">]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"priceLists"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"name"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"plans"</span><span class="p">:[</span>
               <span class="s2">"basic-monthly"</span>
            <span class="p">]</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'currencies'</span><span class="p">:</span> <span class="p">[</span><span class="s">'USD'</span><span class="p">,</span> <span class="s">'GBP'</span><span class="p">],</span>
 <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'SpyCarBasic'</span><span class="p">,</span>
 <span class="s">'price_lists'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                  <span class="s">'plans'</span><span class="p">:</span> <span class="p">[</span><span class="s">'sports-monthly'</span><span class="p">,</span>
                            <span class="s">'standard-monthly'</span><span class="p">,</span>
                            <span class="s">'super-monthly'</span><span class="p">]}],</span>
 <span class="s">'products'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'available'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'included'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'name'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
               <span class="s">'plans'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'name'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                          <span class="s">'phases'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                                   <span class="s">'unit'</span><span class="p">:</span> <span class="s">'DAYS'</span><span class="p">},</span>
                                      <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                      <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]},</span>
                                     <span class="p">{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                                   <span class="s">'unit'</span><span class="p">:</span> <span class="s">'UNLIMITED'</span><span class="p">},</span>
                                      <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'prices'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'GBP'</span><span class="p">,</span>
                                                  <span class="s">'value'</span><span class="p">:</span> <span class="mf">750.0</span><span class="p">},</span>
                                                 <span class="p">{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                                                  <span class="s">'value'</span><span class="p">:</span> <span class="mf">1000.0</span><span class="p">}],</span>
                                      <span class="s">'type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
                                      <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]}],</span>
                          <span class="s">'pretty_name'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">}],</span>
               <span class="s">'pretty_name'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
               <span class="s">'type'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">},</span>
              <span class="p">{</span><span class="s">'available'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'included'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
               <span class="s">'plans'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'phases'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                                   <span class="s">'unit'</span><span class="p">:</span> <span class="s">'DAYS'</span><span class="p">},</span>
                                      <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                      <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]},</span>
                                     <span class="p">{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                                   <span class="s">'unit'</span><span class="p">:</span> <span class="s">'UNLIMITED'</span><span class="p">},</span>
                                      <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'prices'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'GBP'</span><span class="p">,</span>
                                                  <span class="s">'value'</span><span class="p">:</span> <span class="mf">75.0</span><span class="p">},</span>
                                                 <span class="p">{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                                                  <span class="s">'value'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">}],</span>
                                      <span class="s">'type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
                                      <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]}],</span>
                          <span class="s">'pretty_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">}],</span>
               <span class="s">'pretty_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
               <span class="s">'type'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">},</span>

<span class="p">{</span><span class="s">'available'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'included'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'name'</span><span class="p">:</span> <span class="s">'Sports'</span><span class="p">,</span>
               <span class="s">'plans'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'name'</span><span class="p">:</span> <span class="s">'sports-monthly'</span><span class="p">,</span>
                          <span class="s">'phases'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                                   <span class="s">'unit'</span><span class="p">:</span> <span class="s">'DAYS'</span><span class="p">},</span>
                                      <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                      <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]},</span>
                                     <span class="p">{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                                                   <span class="s">'unit'</span><span class="p">:</span> <span class="s">'UNLIMITED'</span><span class="p">},</span>
                                      <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
                                      <span class="s">'prices'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'GBP'</span><span class="p">,</span>
                                                  <span class="s">'value'</span><span class="p">:</span> <span class="mf">375.0</span><span class="p">},</span>
                                                 <span class="p">{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                                                  <span class="s">'value'</span><span class="p">:</span> <span class="mf">500.0</span><span class="p">}],</span>
                                      <span class="s">'type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
                                      <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]}],</span>
                          <span class="s">'pretty_name'</span><span class="p">:</span> <span class="s">'sports-monthly'</span><span class="p">}],</span>
               <span class="s">'pretty_name'</span><span class="p">:</span> <span class="s">'Sports'</span><span class="p">,</span>
               <span class="s">'type'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">}],</span>
 <span class="s">'units'</span><span class="p">:</span> <span class="p">[]}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>if successful, returns a status code of 200 and the full catalog for the requested date in JSON format.</p>
<h3 id='catalog-retrieve-a-list-of-catalog-versions'>Retrieve a list of catalog versions</h3>
<p>Return a list of the effective dates for all available catalogs versions for this tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/versions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/versions"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">DateTime</span><span class="o">&gt;</span> <span class="n">versions</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getCatalogVersions</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_tenant_catalog_versions</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_catalog_versions</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="s2">"2013-02-08T00:00:00.000Z"</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="mi">2013</span><span class="o">-</span><span class="mo">02</span><span class="o">-</span><span class="mi">08</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">00.000</span><span class="n">Z</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span><span class="s2">"2013-02-08T00:00:00.000Z"</span><span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a comma-separated list of ISO date strings giving the effective date for each available catalog version.</p>
<h3 id='catalog-retrieve-available-base-plans'>Retrieve available base plans</h3>
<p>Returns a list of available base products and associated plans. Each object returned specifies a <code>product</code>, a <code>priceList</code>, a <code>plan</code>selected from the <code>pricelist</code>, and pricing information for the final phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/availableBasePlans</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/availableBasePlans"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">PlanDetail</span><span class="o">&gt;</span> <span class="n">basePlans</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getAvailableBasePlans</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">available_base_plans</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_available_base_plans</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"product"</span>: <span class="s2">"Sports"</span>,
    <span class="s2">"plan"</span>: <span class="s2">"sports-monthly"</span>,
    <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
    <span class="s2">"finalPhaseBillingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
    <span class="s2">"finalPhaseRecurringPrice"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"currency"</span>: <span class="s2">"GBP"</span>,
        <span class="s2">"value"</span>: 375
      <span class="o">}</span>,
      <span class="o">{</span>
        <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
        <span class="s2">"value"</span>: 500
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
    <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
    <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
    <span class="s2">"finalPhaseBillingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
    <span class="s2">"finalPhaseRecurringPrice"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"currency"</span>: <span class="s2">"GBP"</span>,
        <span class="s2">"value"</span>: 75
      <span class="o">}</span>,
      <span class="o">{</span>
        <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
        <span class="s2">"value"</span>: 100
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">PlanDetail</span> <span class="o">{</span>
    <span class="nl">product:</span> <span class="n">Assault</span><span class="o">-</span><span class="n">Rifle</span>
    <span class="nl">plan:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span>
    <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
    <span class="nl">finalPhaseBillingPeriod:</span> <span class="n">ANNUAL</span>
    <span class="nl">finalPhaseRecurringPrice:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">value:</span> <span class="mf">5999.95</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
        <span class="nl">currency:</span> <span class="n">EUR</span>
        <span class="nl">value:</span> <span class="mf">3499.95</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Price</span> <span class="o">{</span>
        <span class="nl">currency:</span> <span class="n">GBP</span>
        <span class="nl">value:</span> <span class="mf">3999.95</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
      <span class="s2">"plan"</span><span class="ss">:"basic-annual"</span><span class="p">,</span>
      <span class="s2">"finalPhaseBillingPeriod"</span><span class="ss">:"ANNUAL"</span><span class="p">,</span>
      <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
      <span class="s2">"finalPhaseRecurringPrice"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
            <span class="s2">"value"</span><span class="p">:</span><span class="mi">10000</span><span class="o">.</span><span class="mi">0</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">},</span>
   <span class="p">{</span>
      <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
      <span class="s2">"plan"</span><span class="ss">:"basic-monthly"</span><span class="p">,</span>
      <span class="s2">"finalPhaseBillingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
      <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
      <span class="s2">"finalPhaseRecurringPrice"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
            <span class="s2">"value"</span><span class="p">:</span><span class="mi">1000</span><span class="o">.</span><span class="mi">0</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'final_phase_billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
 <span class="s">'final_phase_recurring_price'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'GBP'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="mf">375.0</span><span class="p">},</span>
                                 <span class="p">{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="mf">500.0</span><span class="p">}],</span>
 <span class="s">'plan'</span><span class="p">:</span> <span class="s">'sports-monthly'</span><span class="p">,</span>
 <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
 <span class="s">'product'</span><span class="p">:</span> <span class="s">'Sports'</span><span class="p">},</span> <span class="p">{</span><span class="s">'final_phase_billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
 <span class="s">'final_phase_recurring_price'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'GBP'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="mf">75.0</span><span class="p">},</span>
                                 <span class="p">{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">}],</span>
 <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
 <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
 <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">},</span> <span class="p">{</span><span class="s">'final_phase_billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
 <span class="s">'final_phase_recurring_price'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'GBP'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="mf">750.0</span><span class="p">},</span>
                                 <span class="p">{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="mf">1000.0</span><span class="p">}],</span>
 <span class="s">'plan'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
 <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
 <span class="s">'product'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of objects representing the available base products and plans.</p>
<h3 id='catalog-retrieve-available-add-ons-for-a-given-product'>Retrieve available add-ons for a given product</h3>
<p>Returns a list of available add-on products, if any, for a specified base product, and for a specified price list or all price lists. Each object returned specifies a <code>product</code>, a <code>priceList</code>, a <code>plan</code> selected from the <code>pricelist</code>, and pricing information for the final phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/availableAddons</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/availableAddons"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">baseProductName</span> <span class="o">=</span> <span class="s">"Bullets"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">priceListName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">PlanDetail</span><span class="o">&gt;</span> <span class="n">availableAddons</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getAvailableAddons</span><span class="o">(</span><span class="n">baseProductName</span><span class="o">,</span> 
                                                                 <span class="n">priceListName</span><span class="o">,</span> 
                                                                 <span class="n">accountId</span><span class="o">,</span> 
                                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">base_product_name</span> <span class="o">=</span> <span class="s1">'Basic'</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">available_addons</span><span class="p">(</span><span class="n">base_product_name</span><span class="p">,</span> 
                                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_available_addons</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                <span class="n">api_secret</span><span class="p">,</span> 
                                <span class="n">base_product_name</span><span class="o">=</span><span class="s">'Basic'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
   <span class="o">{</span>
      <span class="s2">"product"</span>:<span class="s2">"Basic"</span>,
      <span class="s2">"plan"</span>:<span class="s2">"basic-annual"</span>,
      <span class="s2">"finalPhaseBillingPeriod"</span>:<span class="s2">"ANNUAL"</span>,
      <span class="s2">"priceList"</span>:<span class="s2">"DEFAULT"</span>,
      <span class="s2">"finalPhaseRecurringPrice"</span>:[
         <span class="o">{</span>
            <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
            <span class="s2">"value"</span>:10000.0
         <span class="o">}</span>
      <span class="o">]</span>
   <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">PlanDetail</span> <span class="o">{</span>
    <span class="nl">product:</span> <span class="n">Bullets</span>
    <span class="nl">plan:</span> <span class="n">bullets</span><span class="o">-</span><span class="n">usage</span><span class="o">-</span><span class="n">in</span><span class="o">-</span><span class="n">arrear</span>
    <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
    <span class="nl">finalPhaseBillingPeriod:</span> <span class="n">NO_BILLING_PERIOD</span>
    <span class="nl">finalPhaseRecurringPrice:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
      <span class="s2">"plan"</span><span class="ss">:"basic-annual"</span><span class="p">,</span>
      <span class="s2">"finalPhaseBillingPeriod"</span><span class="ss">:"ANNUAL"</span><span class="p">,</span>
      <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
      <span class="s2">"finalPhaseRecurringPrice"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
            <span class="s2">"value"</span><span class="p">:</span><span class="mi">10000</span><span class="o">.</span><span class="mi">0</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'product'</span><span class="p">:</span> <span class="s">'Basic'</span><span class="p">,</span>
  <span class="s">'plan'</span><span class="p">:</span> <span class="s">'basic-annual'</span><span class="p">,</span>
  <span class="s">'final_phase_billing_period'</span><span class="p">:</span> <span class="s">'ANNUAL'</span><span class="p">,</span>
  <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
  <span class="s">'final_phase_recurring_price'</span><span class="p">:[{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                                  <span class="s">'value'</span><span class="p">:</span> <span class="mf">10000.0</span><span class="p">}]</span>
<span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>baseProductName</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>base product name</td>
</tr>
<tr>
<td><strong>priceListName</strong></td>
<td>string</td>
<td>false</td>
<td>all price lists</td>
<td>price list name</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of objects representing available add-on products.</p>
<h3 id='catalog-delete-all-versions-of-a-per-tenant-catalog'>Delete all versions of a per tenant catalog</h3>
<p>Delete all per-tenant catalog versions. The tenant reverts to the system default catalog.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/catalog</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="na">deleteCatalog</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">delete_catalog</span><span class="p">(</span><span class="n">user</span><span class="p">,</span>
                                              <span class="n">reason</span><span class="p">,</span>
                                              <span class="n">comment</span><span class="p">,</span>
                                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">delete_catalog</span><span class="p">(</span><span class="n">created_by</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returna a status code of 204 and an empty body.</p>
<h2 id='catalog-subscription-info'>Subscription info</h2>
<p>These endpoints return information concerning a particular subscription. They select from the catalog only the items (such as plan, phase, or products) that currently apply to the specified subscription.</p>
<h3 id='catalog-retrieve-the-phase-for-a-given-subscription-and-date'>Retrieve the phase for a given subscription and date</h3>
<p>This API returns information about the current <code>Phase</code> associated with a given subscription. The record returned includes the phase type and information about pricing, duration, and usage.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/phase</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/phase?subscriptionId=8ab101b6-15e8-433b-b4f7-f99eeaa56a77&amp;requestedDate=2018-7-18"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_catalog_phase</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                                 <span class="n">requested_date</span><span class="p">,</span> 
                                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_phase_for_subscription_and_date</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                               <span class="n">api_secret</span><span class="p">,</span> 
                                               <span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"type"</span>: <span class="s2">"TRIAL"</span>,
  <span class="s2">"prices"</span>: <span class="o">[]</span>,
  <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
  <span class="s2">"duration"</span>: <span class="o">{</span>
    <span class="s2">"unit"</span>: <span class="s2">"DAYS"</span>,
    <span class="s2">"number"</span>: 30
  <span class="o">}</span>,
  <span class="s2">"usages"</span>: <span class="o">[]</span>
<span class="o">}</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"duration"</span><span class="p">:{</span>
      <span class="s2">"number"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span>
      <span class="s2">"unit"</span><span class="ss">:"DAYS"</span>
   <span class="p">},</span>
   <span class="s2">"fixed_prices"</span><span class="p">:[</span>

   <span class="p">],</span>
   <span class="s2">"prices"</span><span class="p">:[</span>

   <span class="p">],</span>
   <span class="s2">"type"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
   <span class="s2">"usages"</span><span class="p">:[</span>

   <span class="p">]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s">'unit'</span><span class="p">:</span> <span class="s">'DAYS'</span><span class="p">},</span>
 <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'prices'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
 <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the current phase.</p>
<h3 id='catalog-retrieve-the-plan-for-a-given-subscription-and-date'>Retrieve the plan for a given subscription and date</h3>
<p>This API returns information about the current <code>Plan</code> associated with a given subscription. The record returned includes the plan name and information for each phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/plan</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/plan?subscriptionId=8ab101b6-15e8-433b-b4f7-f99eeaa56a77&amp;requestedDate=2018-7-18"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_catalog_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                                <span class="n">requested_date</span><span class="p">,</span> 
                                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_plan_for_subscription_and_date</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                              <span class="n">api_secret</span><span class="p">,</span> 
                                              <span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
  <span class="s2">"name"</span>: <span class="s2">"standard-monthly"</span>,
  <span class="s2">"prettyName"</span>: <span class="s2">"standard-monthly"</span>,
  <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
  <span class="s2">"phases"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"type"</span>: <span class="s2">"TRIAL"</span>,
      <span class="s2">"prices"</span>: <span class="o">[]</span>,
      <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
      <span class="s2">"duration"</span>: <span class="o">{</span>
        <span class="s2">"unit"</span>: <span class="s2">"DAYS"</span>,
        <span class="s2">"number"</span>: 30
      <span class="o">}</span>,
      <span class="s2">"usages"</span>: <span class="o">[]</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">"type"</span>: <span class="s2">"EVERGREEN"</span>,
      <span class="s2">"prices"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"currency"</span>: <span class="s2">"GBP"</span>,
          <span class="s2">"value"</span>: 75
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
          <span class="s2">"value"</span>: 100
        <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"fixedPrices"</span>: <span class="o">[]</span>,
      <span class="s2">"duration"</span>: <span class="o">{</span>
        <span class="s2">"unit"</span>: <span class="s2">"UNLIMITED"</span>,
        <span class="s2">"number"</span>: -1
      <span class="o">}</span>,
      <span class="s2">"usages"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"billing_period"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
   <span class="s2">"name"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
   <span class="s2">"phases"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"duration"</span><span class="p">:{</span>
            <span class="s2">"number"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span>
            <span class="s2">"unit"</span><span class="ss">:"DAYS"</span>
         <span class="p">},</span>
         <span class="s2">"fixed_prices"</span><span class="p">:[</span>

         <span class="p">],</span>
         <span class="s2">"prices"</span><span class="p">:[</span>

         <span class="p">],</span>
         <span class="s2">"type"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
         <span class="s2">"usages"</span><span class="p">:[</span>

         <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"duration"</span><span class="p">:{</span>
            <span class="s2">"number"</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s2">"unit"</span><span class="ss">:"UNLIMITED"</span>
         <span class="p">},</span>
         <span class="s2">"fixed_prices"</span><span class="p">:[</span>

         <span class="p">],</span>
         <span class="s2">"prices"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"currency"</span><span class="ss">:"GBP"</span><span class="p">,</span>
               <span class="s2">"value"</span><span class="p">:</span><span class="mi">75</span><span class="o">.</span><span class="mi">0</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
               <span class="s2">"value"</span><span class="p">:</span><span class="mi">100</span><span class="o">.</span><span class="mi">0</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"type"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
         <span class="s2">"usages"</span><span class="p">:[</span>

         <span class="p">]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"pretty_name"</span><span class="ss">:"standard-monthly"</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
 <span class="s">'phases'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s">'unit'</span><span class="p">:</span> <span class="s">'DAYS'</span><span class="p">},</span>
             <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'prices'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
             <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]},</span>
            <span class="p">{</span><span class="s">'duration'</span><span class="p">:</span> <span class="p">{</span><span class="s">'number'</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s">'unit'</span><span class="p">:</span> <span class="s">'UNLIMITED'</span><span class="p">},</span>
             <span class="s">'fixed_prices'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'prices'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'GBP'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="mf">75.0</span><span class="p">},</span>
                        <span class="p">{</span><span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span> <span class="s">'value'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">}],</span>
             <span class="s">'type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
             <span class="s">'usages'</span><span class="p">:</span> <span class="p">[]}],</span>
 <span class="s">'pretty_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the plan for this subscription.</p>
<h3 id='catalog-retrieve-the-pricelist-for-a-given-subscription-and-date'>Retrieve the priceList for a given subscription and date</h3>
<p>This API returns information about the current <code>priceList</code> associated with a given subscription. The record returned includes the price list name and the list of plans on this list.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/priceList</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/priceList?subscriptionId=8ab101b6-15e8-433b-b4f7-f99eeaa56a77&amp;requestedDate=2018-7-18"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_catalog_price_list</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                                      <span class="n">requested_date</span><span class="p">,</span> 
                                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_price_list_for_subscription_and_date</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                                    <span class="n">api_secret</span><span class="p">,</span> 
                                                    <span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
  <span class="s2">"name"</span>: <span class="s2">"DEFAULT"</span>,
  <span class="s2">"plans"</span>: <span class="o">[</span>
    <span class="s2">"sports-monthly"</span>,
    <span class="s2">"standard-monthly"</span>,
    <span class="s2">"super-monthly"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"name"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
   <span class="s2">"plans"</span><span class="p">:[</span>
      <span class="s2">"sports-monthly"</span><span class="p">,</span>
      <span class="s2">"standard-monthly"</span><span class="p">,</span>
      <span class="s2">"super-monthly"</span>
   <span class="p">]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
 <span class="s">'plans'</span><span class="p">:</span> <span class="p">[</span><span class="s">'sports-monthly'</span><span class="p">,</span> <span class="s">'standard-monthly'</span><span class="p">,</span> <span class="s">'super-monthly'</span><span class="p">]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the price list for this subscription.</p>
<h3 id='catalog-retrieve-product-for-a-given-subscription-and-date'>Retrieve product for a given subscription and date</h3>
<p>This API returns information about the <code>product</code> associated with a given subscription. The record returned includes the product names, available plans, items included, and available add-ons.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/product</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/product?subscriptionId=8ab101b6-15e8-433b-b4f7-f99eeaa56a77&amp;requestedDate=2018-7-18"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_catalog_product</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                                   <span class="n">requested_date</span><span class="p">,</span> 
                                                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_product_for_subscription_and_date</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                                 <span class="n">api_secret</span><span class="p">,</span> 
                                                 <span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"type"</span>: <span class="s2">"BASE"</span>,
  <span class="s2">"name"</span>: <span class="s2">"Standard"</span>,
  <span class="s2">"prettyName"</span>: <span class="s2">"Standard"</span>,
  <span class="s2">"plans"</span>: <span class="o">[]</span>,
  <span class="s2">"included"</span>: <span class="o">[]</span>,
  <span class="s2">"available"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"available"</span><span class="p">:[</span>

   <span class="p">],</span>
   <span class="s2">"included"</span><span class="p">:[</span>

   <span class="p">],</span>
   <span class="s2">"name"</span><span class="ss">:"Standard"</span><span class="p">,</span>
   <span class="s2">"plans"</span><span class="p">:[</span>

   <span class="p">],</span>
   <span class="s2">"pretty_name"</span><span class="ss">:"Standard"</span><span class="p">,</span>
   <span class="s2">"type"</span><span class="ss">:"BASE"</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'available'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'included'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
 <span class="s">'plans'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'pretty_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
 <span class="s">'type'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the product for this subscription.</p>
<h2 id='catalog-simple-plan'>Simple Plan</h2>
<p>We provide a more basic level of APIs as a quick way to add a <code>Plan</code> into an <strong>existing version</strong> of the catalog.
The intent is mostly to help getting started with Kill Bill by abstracting away more complex topics such as alignements, rules, ...
The functionality is exposed on our admin UI (KAUI) to provide a simple graphical way to configure a simple catalog and get started quickly.</p>

<p>One can directly use our Simple Plan API to add new <code>Plans</code> without the need to create an initial catalog version: If there is no
existing catalog version for the tenant, the system will create such an initial version when the first plan is added; otherwise, the
system will use the existing active catalog version to add the new plan (but it will not create a new catalog version).</p>

<p>Note that because the Simple Plan api is just an abstraction on top of the more complex XML based apis, one can start with such Simple Plan api,
and then download the resulting XML, and edit such catalog by hand (to add entries, modify default rules, ...).</p>

<p>A simple plan has the following limitations:</p>

<ul>
<li>In-advance billing only</li>
<li>Limited to one <code>RECURRING</code> phase  and an optional $0 <code>TRIAL</code> phase</li>
<li>No suport for fixed price</li>
</ul>

<p>Once a simple plan has been uploaded, one can retrieve the associated XML, edit it to configure additional aspects, and then upload
a new version of this catalog. So, this functionality can also be a stepping stone to a full catalog configuration.</p>
<h3 id='catalog-add-a-simple-plan'>Add a simple plan</h3>
<p>Add a (simple) Plan into the current version of the Catalog associated with the tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/catalog/simplePlan</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "planId": "basic-annual", "productName": "Basic", "productCategory": "BASE", "currency": "USD", "amount": 1000, "billingPeriod": "ANNUAL", "trialLength": 0, "trialTimeUnit": "UNLIMITED"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/catalog/simplePlan"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">planId</span> <span class="o">=</span> <span class="s">"foo-monthly"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">productName</span> <span class="o">=</span> <span class="s">"Foo"</span><span class="o">;</span>
<span class="n">Integer</span> <span class="n">trialLength</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

<span class="n">SimplePlan</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimplePlan</span><span class="o">(</span><span class="n">planId</span><span class="o">,</span> 
                                 <span class="n">productName</span><span class="o">,</span> 
                                 <span class="n">ProductCategory</span><span class="o">.</span><span class="na">BASE</span><span class="o">,</span> 
                                 <span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">,</span> 
                                 <span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">,</span> 
                                 <span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">,</span> 
                                 <span class="n">trialLength</span><span class="o">,</span> 
                                 <span class="n">TimeUnit</span><span class="o">.</span><span class="na">UNLIMITED</span><span class="o">,</span> 
                                 <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="n">of</span><span class="o">())</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="na">addSimplePlan</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">simple_plan</span>                  <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">SimplePlanAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">plan_id</span>          <span class="o">=</span> <span class="s1">'basic-annual'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">product_name</span>     <span class="o">=</span> <span class="s1">'Basic'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">product_category</span> <span class="o">=</span> <span class="s1">'BASE'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">currency</span>         <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">amount</span>           <span class="o">=</span> <span class="mi">10000</span><span class="o">.</span><span class="mo">00</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">billing_period</span>   <span class="o">=</span> <span class="s1">'ANNUAL'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">trial_length</span>     <span class="o">=</span> <span class="mi">0</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">trial_time_unit</span>  <span class="o">=</span> <span class="s1">'UNLIMITED'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">add_tenant_catalog_simple_plan</span><span class="p">(</span><span class="n">simple_plan</span><span class="p">,</span>
                                                              <span class="n">user</span><span class="p">,</span>
                                                              <span class="n">reason</span><span class="p">,</span>
                                                              <span class="n">comment</span><span class="p">,</span>
                                                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">SimplePlan</span><span class="p">(</span><span class="n">plan_id</span><span class="o">=</span><span class="s">'basic-annual'</span><span class="p">,</span>
                  <span class="n">product_name</span><span class="o">=</span><span class="s">'Basic'</span><span class="p">,</span>
                  <span class="n">product_category</span><span class="o">=</span><span class="s">'BASE'</span><span class="p">,</span>
                  <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                  <span class="n">amount</span><span class="o">=</span><span class="mf">10000.00</span><span class="p">,</span>
                  <span class="n">billing_period</span><span class="o">=</span><span class="s">'ANNUAL'</span><span class="p">,</span>
                  <span class="n">trial_length</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                  <span class="n">trial_time_unit</span><span class="o">=</span><span class="s">'UNLIMITED'</span><span class="p">)</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">add_simple_plan</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/catalog
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Provides the content for the plan in JSON form. This should be very simple. Note that the &quot;planId&quot; becomes the <code>planName</code> attribute. For example:</p>

<p>{
  &quot;planId&quot;: &quot;newplan&quot;,
  &quot;productName&quot;: &quot;myitem&quot;,
  &quot;productCategory&quot;: &quot;BASE&quot;,
  &quot;currency&quot;: &quot;USD&quot;,
  &quot;amount&quot;: 0,
  &quot;billingPeriod&quot;: &quot;DAILY&quot;,
  &quot;trialLength&quot;: 0,
  &quot;trialTimeUnit&quot;: &quot;DAYS&quot;,
  &quot;availableBaseProducts&quot;: []
}</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h1 id='account'>Account</h1>
<p>Each of your customers is identified by an account. The information for an account is contained in an account resource object. The endpoints in this group manage the account resource and the information it contains. </p>
<h2 id='account-account-resource'>Account Resource</h2>
<p>An <code>Account</code> resource represents a customer. This is the top level per-customer resource. All other per-customer data, such as bundles, subscriptions, invoices and payments, will be linked to this resource. An account resource may contain Personally Identifiable Information (PII) for the customer such as name, address, email, etc. A large number of endpoints are available to manage not only purely account related information -- e.g <code>name</code> -- but other per-account data as well.</p>

<p>The attributes contained in the account resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this account</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key provided by the client</td>
</tr>
<tr>
<td><strong>referenceTime</strong></td>
<td>string</td>
<td>system</td>
<td>ISO date and time this account was created</td>
</tr>
<tr>
<td><strong>parentAccountId</strong></td>
<td>string</td>
<td>user</td>
<td>UUID for the parent account, if any, if the <a href="http://docs.killbill.io/latest/ha.html">hierarchical accounts (HA) model</a> is used</td>
</tr>
<tr>
<td><strong>isPaymentDelegatedToParent</strong></td>
<td>boolean</td>
<td>user</td>
<td>For the hierarchical model, indicates whether the parent account, if any, is handling payments for this account</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user</td>
<td>Default currency for the customer</td>
</tr>
<tr>
<td><strong>billCycleDayLocal</strong></td>
<td>integer</td>
<td>system or user</td>
<td>Default day of the month to bill customers for subscriptions with an <code>ACCOUNT</code> <a href="http://docs.killbill.io/latest/userguide_subscription.html#_billing_alignment_rules">billing alignment</a> and a billing period that is a multiple of one month.</td>
</tr>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>user</td>
<td>UUID for the default payment method used by the system to make recurring payments</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the account</td>
</tr>
<tr>
<td><strong>firstNameLength</strong></td>
<td>integer</td>
<td>user</td>
<td>Length of the first name (first part of <strong>name</strong>)</td>
</tr>
<tr>
<td><strong>company</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s company name</td>
</tr>
<tr>
<td><strong>address1</strong></td>
<td>string</td>
<td>user</td>
<td>Address line 1</td>
</tr>
<tr>
<td><strong>address2</strong></td>
<td>string</td>
<td>user</td>
<td>Address line 2</td>
</tr>
<tr>
<td><strong>city</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s city</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s state, if any</td>
</tr>
<tr>
<td><strong>postalCode</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s postal code, if any</td>
</tr>
<tr>
<td><strong>country</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s ISO country identifier</td>
</tr>
<tr>
<td><strong>locale</strong></td>
<td>string</td>
<td>user</td>
<td>ISO locale code for customer language</td>
</tr>
<tr>
<td><strong>timeZone</strong></td>
<td>string</td>
<td>user</td>
<td>Descriptor for the customer&#39;s time zone. Used by the system to make any required transformation from <code>DateTime</code> to <code>LocalDate</code></td>
</tr>
<tr>
<td><strong>phone</strong></td>
<td>string</td>
<td>user</td>
<td>Phone contact number to reach the customer</td>
</tr>
<tr>
<td><strong>email</strong></td>
<td>string</td>
<td>user</td>
<td>Primary email to reach the customer</td>
</tr>
<tr>
<td><strong>notes</strong></td>
<td>string</td>
<td>user</td>
<td>Additonal notes about the customer, usually set by the customer service department</td>
</tr>
<tr>
<td><strong>isMigrated</strong></td>
<td>boolean</td>
<td>user</td>
<td>Indicates whether this account has been migrated from another system</td>
</tr>
<tr>
<td><strong>accountCBA</strong></td>
<td>integer</td>
<td>system</td>
<td>Account credit, if any</td>
</tr>
<tr>
<td><strong>accountBalance</strong></td>
<td>integer</td>
<td>system</td>
<td>Account balance, if any</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>Array of audit log records for this account</td>
</tr>
</tbody></table>

<p>The <strong>name</strong> is usually the personal name of the account owner. We recommend that this be entered so that the first word is an acceptable short form for the complete name, such as &quot;first name&quot; in most English-speaking cultures. In this case the value <strong>firstNameLength</strong> enables your code to extract this part of the name for informal greetings. For information on name formats in various countries see <a href="https://www.w3.org/International/questions/qa-personal-names">Personal Names around the World</a> by the W3C.</p>

<p>A list of valid <strong>timeZone</strong> strings is given at <a href="https://github.com/rails/rails/blob/23b4aa505d04731c7890e19e8f8996869526f5b3/activesupport/lib/active_support/values/time_zone.rb#L31-L183">timezone strings</a>.</p>

<p>For information about migrating accounts from a previous system see the <a href="http://docs.killbill.io/latest/migration_guide.html">Migration Guide</a>.</p>
<h2 id='account-accounts'>Accounts</h2><h3 id='account-create-an-account'>Create an Account</h3>
<p>Create a new customer <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts</code> </p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "name": "John Doe", "email": "john@laposte.com", "currency": "USD"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">Account</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Account</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"John Doe"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">"john@laposte.com"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>

<span class="n">Account</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">createAccount</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">new</span>
<span class="n">account</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"John Doe"</span>
<span class="n">account</span><span class="p">.</span><span class="nf">email</span> <span class="o">=</span> <span class="s2">"john@laposte.com"</span>
<span class="n">account</span><span class="p">.</span><span class="nf">currency</span> <span class="o">=</span> <span class="s2">"USD"</span>

<span class="n">account</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="s">'example'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'John Doe'</span><span class="p">,</span> 
               <span class="n">email</span><span class="o">=</span><span class="s">'john@laposte.com'</span><span class="p">,</span> 
               <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">create_account</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> 
                          <span class="n">created_by</span><span class="p">,</span> 
                          <span class="n">api_key</span><span class="p">,</span> 
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/accounts/a8984103-b8e1-47cc-9914-4b1c4f9dbeab
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Account</span><span class="err">@</span><span class="mi">3</span><span class="n">f77a367</span>
    <span class="nl">accountId:</span> <span class="n">e1342e5c</span><span class="o">-</span><span class="n">db2a</span><span class="o">-</span><span class="mi">4439</span><span class="o">-</span><span class="n">b52c</span><span class="o">-</span><span class="mi">8597</span><span class="n">fde4390f</span>
    <span class="nl">name:</span> <span class="n">John</span> <span class="n">Doe</span>
    <span class="nl">firstNameLength:</span> <span class="kc">null</span>
    <span class="nl">externalKey:</span> <span class="n">e1342e5c</span><span class="o">-</span><span class="n">db2a</span><span class="o">-</span><span class="mi">4439</span><span class="o">-</span><span class="n">b52c</span><span class="o">-</span><span class="mi">8597</span><span class="n">fde4390f</span>
    <span class="nl">email:</span> <span class="n">john</span><span class="nd">@laposte</span><span class="o">.</span><span class="na">com</span>
    <span class="nl">billCycleDayLocal:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">isPaymentDelegatedToParent:</span> <span class="kc">false</span>
    <span class="nl">paymentMethodId:</span> <span class="kc">null</span>
    <span class="nl">referenceTime:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">02</span><span class="o">:</span><span class="mf">47.000</span><span class="n">Z</span>
    <span class="nl">timeZone:</span> <span class="n">UTC</span>
    <span class="nl">address1:</span> <span class="kc">null</span>
    <span class="nl">address2:</span> <span class="kc">null</span>
    <span class="nl">postalCode:</span> <span class="kc">null</span>
    <span class="nl">company:</span> <span class="kc">null</span>
    <span class="nl">city:</span> <span class="kc">null</span>
    <span class="nl">state:</span> <span class="kc">null</span>
    <span class="nl">country:</span> <span class="kc">null</span>
    <span class="nl">locale:</span> <span class="kc">null</span>
    <span class="nl">phone:</span> <span class="kc">null</span>
    <span class="nl">notes:</span> <span class="kc">null</span>
    <span class="nl">isMigrated:</span> <span class="kc">false</span>
    <span class="nl">accountBalance:</span> <span class="kc">null</span>
    <span class="nl">accountCBA:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"87dccc88-f504-493e-a05f-9b4a702c3add"</span><span class="p">,</span>
   <span class="s2">"name"</span><span class="ss">:"John Doe"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"87dccc88-f504-493e-a05f-9b4a702c3add"</span><span class="p">,</span>
   <span class="s2">"email"</span><span class="ss">:"john@laposte.com"</span><span class="p">,</span>
   <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The body of the request is a JSON string specifying any attributes of the resource that need to be assigned an initial value. No attributes are required. For any attributes omitted, the following defaults are generated:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>System generated UUID</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>Copy of <strong>accountId</strong></td>
</tr>
<tr>
<td><strong>billCycleDayLocal</strong></td>
<td>0</td>
</tr>
<tr>
<td><strong>isPaymentDelegatedToParent</strong></td>
<td>false</td>
</tr>
<tr>
<td><strong>referenceTime</strong></td>
<td>ISO time-date code for the current time in the specified timezone</td>
</tr>
<tr>
<td><strong>timeZone</strong></td>
<td>&quot;UTC&quot;</td>
</tr>
<tr>
<td>all others</td>
<td>null</td>
</tr>
</tbody></table>

<p>All attributes are optional, so it is possible to quickly create a shell account. This account could be used for test purposes, or so its attributes can be filled in later. This also ensures the initial account contains no PII. Note, however, that the <code>currency</code> attribute must have a non-null value, which can be added later, for invoicing to work properly.</p>

<p>A few fields are not updatable; they can only be set once when creating the original <code>Account</code>. These include  <code>externalKey</code>, <code>currency</code>, <code>timeZone</code>, and <code>referenceTime</code>. In addition the <code>billCycleDayLocal</code> can be updated but only <strong>once</strong>, that is one can create an <code>Account</code> without specifying the <code>billCycleDayLocal</code> and later update its value; this, in particular allows the system to update its value to a good default, that is one that will avoid leading prorations, when creating the first subscription.</p>

<p>The <code>accountId</code> and audit logs are generated by the system and cannot be set or modified by the user.</p>

<p><strong>Query Parameters</strong></p>

<p>none</p>

<p><strong>Response</strong></p>

<p>IF successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL for the account object, including the generated <code>accountId</code>.</p>
<h3 id='account-retrieve-an-account-by-its-id'>Retrieve an Account by its ID</h3>
<p>Retrieves the full resource object for an <code>Account</code> using its <code>accountId</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">Account</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                       <span class="n">accountWithBalance</span><span class="o">,</span> 
                                       <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span> 
                                       <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"e8877928-0226-488d-9272-07a5e66d897f"</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">account</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">new</span>
<span class="n">account</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">with_balance</span><span class="p">,</span> 
                   <span class="n">with_balance_and_cba</span><span class="p">,</span>
                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"name"</span>: <span class="s2">"John Doe"</span>,
  <span class="s2">"firstNameLength"</span>: null,
  <span class="s2">"externalKey"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"email"</span>: <span class="s2">"john@laposte.com"</span>,
  <span class="s2">"billCycleDayLocal"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"parentAccountId"</span>: null,
  <span class="s2">"isPaymentDelegatedToParent"</span>: <span class="nb">false</span>,
  <span class="s2">"paymentMethodId"</span>: null,
  <span class="s2">"referenceTime"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
  <span class="s2">"timeZone"</span>: <span class="s2">"UTC"</span>,
  <span class="s2">"address1"</span>: null,
  <span class="s2">"address2"</span>: null,
  <span class="s2">"postalCode"</span>: null,
  <span class="s2">"company"</span>: null,
  <span class="s2">"city"</span>: null,
  <span class="s2">"state"</span>: null,
  <span class="s2">"country"</span>: null,
  <span class="s2">"locale"</span>: null,
  <span class="s2">"phone"</span>: null,
  <span class="s2">"notes"</span>: null,
  <span class="s2">"isMigrated"</span>: null,
  <span class="s2">"accountBalance"</span>: null,
  <span class="s2">"accountCBA"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>

</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Account</span><span class="err">@</span><span class="mi">4</span><span class="n">be0cf3a</span>
    <span class="nl">accountId:</span> <span class="mi">864</span><span class="n">c1418</span><span class="o">-</span><span class="n">e768</span><span class="o">-</span><span class="mi">4</span><span class="n">cd5</span><span class="o">-</span><span class="n">a0db</span><span class="o">-</span><span class="mi">67537144</span><span class="n">b685</span>
    <span class="nl">name:</span> <span class="n">John</span> <span class="n">Doe</span>
    <span class="nl">firstNameLength:</span> <span class="kc">null</span>
    <span class="nl">externalKey:</span> <span class="mi">864</span><span class="n">c1418</span><span class="o">-</span><span class="n">e768</span><span class="o">-</span><span class="mi">4</span><span class="n">cd5</span><span class="o">-</span><span class="n">a0db</span><span class="o">-</span><span class="mi">67537144</span><span class="n">b685</span>
    <span class="nl">email:</span> <span class="n">john</span><span class="nd">@laposte</span><span class="o">.</span><span class="na">com</span>
    <span class="nl">billCycleDayLocal:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">isPaymentDelegatedToParent:</span> <span class="kc">false</span>
    <span class="nl">paymentMethodId:</span> <span class="kc">null</span>
    <span class="nl">referenceTime:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">25.000</span><span class="n">Z</span>
    <span class="nl">timeZone:</span> <span class="n">UTC</span>
    <span class="nl">address1:</span> <span class="kc">null</span>
    <span class="nl">address2:</span> <span class="kc">null</span>
    <span class="nl">postalCode:</span> <span class="kc">null</span>
    <span class="nl">company:</span> <span class="kc">null</span>
    <span class="nl">city:</span> <span class="kc">null</span>
    <span class="nl">state:</span> <span class="kc">null</span>
    <span class="nl">country:</span> <span class="kc">null</span>
    <span class="nl">locale:</span> <span class="kc">null</span>
    <span class="nl">phone:</span> <span class="kc">null</span>
    <span class="nl">notes:</span> <span class="kc">null</span>
    <span class="nl">isMigrated:</span> <span class="kc">false</span>
    <span class="nl">accountBalance:</span> <span class="kc">null</span>
    <span class="nl">accountCBA:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"e8877928-0226-488d-9272-07a5e66d897f"</span><span class="p">,</span>
   <span class="s2">"name"</span><span class="ss">:"John Doe"</span><span class="p">,</span>
   <span class="s2">"firstNameLength"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"e8877928-0226-488d-9272-07a5e66d897f"</span><span class="p">,</span>
   <span class="s2">"email"</span><span class="ss">:"john@laposte.com"</span><span class="p">,</span>
   <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"parentAccountId"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"referenceTime"</span><span class="ss">:"2018-02-05T22:39:53.000Z"</span><span class="p">,</span>
   <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
   <span class="s2">"address1"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"address2"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"postalCode"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"company"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"city"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"state"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"country"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"locale"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"phone"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"notes"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"isMigrated"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"accountBalance"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"accountCBA"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span>
 <span class="s">'account_balance'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_cba'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span><span class="p">,</span>
 <span class="s">'address1'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'address2'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s">'city'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'company'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'country'</span><span class="p">:</span> <span class="s">'USA'</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'email'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'rpwtgr'</span><span class="p">,</span>
 <span class="s">'first_name_length'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'is_migrated'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_notified_for_invoices'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_payment_delegated_to_parent'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'locale'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'John'</span><span class="p">,</span>
 <span class="s">'notes'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'phone'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'postal_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'reference_time'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'state'</span><span class="p">:</span> <span class="s">'CA'</span><span class="p">,</span>
 <span class="s">'time_zone'</span><span class="p">:</span> <span class="s">'UTC'</span>
<span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an account object in the response body.</p>
<h3 id='account-retrieve-an-account-by-its-external-key'>Retrieve an Account by its external key</h3>
<p>Retrieves the resource object for an <code>Account</code> using its <code>externalKey</code> as an identifier.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts?externalKey=2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"example_external_key"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">Account</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountByKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">,</span> 
                                            <span class="n">accountWithBalance</span><span class="o">,</span> 
                                            <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span> 
                                            <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">external_key</span> <span class="o">=</span> <span class="s1">'example_external_key'</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">new</span>
<span class="n">account</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span>
                             <span class="n">with_balance</span><span class="p">,</span>
                             <span class="n">with_balance_and_cba</span><span class="p">,</span> 
                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">external_key</span> <span class="o">=</span> <span class="s">'example_external_key'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"name"</span>: <span class="s2">"John Doe"</span>,
  <span class="s2">"firstNameLength"</span>: null,
  <span class="s2">"externalKey"</span>: <span class="s2">"example_external_key"</span>,
  <span class="s2">"email"</span>: <span class="s2">"john@laposte.com"</span>,
  <span class="s2">"billCycleDayLocal"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"parentAccountId"</span>: null,
  <span class="s2">"isPaymentDelegatedToParent"</span>: <span class="nb">false</span>,
  <span class="s2">"paymentMethodId"</span>: null,
  <span class="s2">"referenceTime"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
  <span class="s2">"timeZone"</span>: <span class="s2">"UTC"</span>,
  <span class="s2">"address1"</span>: null,
  <span class="s2">"address2"</span>: null,
  <span class="s2">"postalCode"</span>: null,
  <span class="s2">"company"</span>: null,
  <span class="s2">"city"</span>: null,
  <span class="s2">"state"</span>: null,
  <span class="s2">"country"</span>: null,
  <span class="s2">"locale"</span>: null,
  <span class="s2">"phone"</span>: null,
  <span class="s2">"notes"</span>: null,
  <span class="s2">"isMigrated"</span>: null,
  <span class="s2">"accountBalance"</span>: null,
  <span class="s2">"accountCBA"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Account</span><span class="err">@</span><span class="mi">4</span><span class="n">be0cf3a</span>
    <span class="nl">accountId:</span> <span class="mi">864</span><span class="n">c1418</span><span class="o">-</span><span class="n">e768</span><span class="o">-</span><span class="mi">4</span><span class="n">cd5</span><span class="o">-</span><span class="n">a0db</span><span class="o">-</span><span class="mi">67537144</span><span class="n">b685</span>
    <span class="nl">name:</span> <span class="n">John</span> <span class="n">Doe</span>
    <span class="nl">firstNameLength:</span> <span class="kc">null</span>
    <span class="nl">externalKey:</span> <span class="n">example_external_key</span>
    <span class="nl">email:</span> <span class="n">john</span><span class="nd">@laposte</span><span class="o">.</span><span class="na">com</span>
    <span class="nl">billCycleDayLocal:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">isPaymentDelegatedToParent:</span> <span class="kc">false</span>
    <span class="nl">paymentMethodId:</span> <span class="kc">null</span>
    <span class="nl">referenceTime:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">25.000</span><span class="n">Z</span>
    <span class="nl">timeZone:</span> <span class="n">UTC</span>
    <span class="nl">address1:</span> <span class="kc">null</span>
    <span class="nl">address2:</span> <span class="kc">null</span>
    <span class="nl">postalCode:</span> <span class="kc">null</span>
    <span class="nl">company:</span> <span class="kc">null</span>
    <span class="nl">city:</span> <span class="kc">null</span>
    <span class="nl">state:</span> <span class="kc">null</span>
    <span class="nl">country:</span> <span class="kc">null</span>
    <span class="nl">locale:</span> <span class="kc">null</span>
    <span class="nl">phone:</span> <span class="kc">null</span>
    <span class="nl">notes:</span> <span class="kc">null</span>
    <span class="nl">isMigrated:</span> <span class="kc">false</span>
    <span class="nl">accountBalance:</span> <span class="kc">null</span>
    <span class="nl">accountCBA:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"e8877928-0226-488d-9272-07a5e66d897f"</span><span class="p">,</span>
   <span class="s2">"name"</span><span class="ss">:"John Doe"</span><span class="p">,</span>
   <span class="s2">"firstNameLength"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"example_external_key"</span><span class="p">,</span>
   <span class="s2">"email"</span><span class="ss">:"john@laposte.com"</span><span class="p">,</span>
   <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"parentAccountId"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"referenceTime"</span><span class="ss">:"2018-02-05T22:39:53.000Z"</span><span class="p">,</span>
   <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
   <span class="s2">"address1"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"address2"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"postalCode"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"company"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"city"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"state"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"country"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"locale"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"phone"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"notes"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"isMigrated"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"accountBalance"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"accountCBA"</span><span class="ss">:null</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span>
 <span class="s">'account_balance'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_cba'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span><span class="p">,</span>
 <span class="s">'address1'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'address2'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s">'city'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'company'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'country'</span><span class="p">:</span> <span class="s">'USA'</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'email'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'example_external_key'</span><span class="p">,</span>
 <span class="s">'first_name_length'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'is_migrated'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_notified_for_invoices'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_payment_delegated_to_parent'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'locale'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'John'</span><span class="p">,</span>
 <span class="s">'notes'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'phone'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'postal_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'reference_time'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'state'</span><span class="p">:</span> <span class="s">'CA'</span><span class="p">,</span>
 <span class="s">'time_zone'</span><span class="p">:</span> <span class="s">'UTC'</span>
<span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>External key to be used for retrieval</td>
</tr>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an account object in the response body.</p>
<h3 id='account-update-an-account'>Update an Account</h3>
<p>Updates selected attributes in an account object. Note that the following fields are not updatable; they can only be set once when creating the original <code>Account</code>:  <code>externalKey</code>, <code>currency</code>, <code>timeZone</code>, and <code>referenceTime</code>. In addition, the <code>billCycleDayLocal</code> can be updated but only <strong>once</strong>, that is, one can create an <code>Account</code> without specifying the <code>billCycleDayLocal</code> and later update its value. This, allows the system to update its value to a good default, that is one that will avoid leading prorations, when creating the first subscription. Also, the audit logs cannot be changed.</p>

<p>The updates are passed in the request body, as an object that only needs to contain the attributes to be changed. Any attribute omitted from the request body will remain unchanged.</p>

<p>If the boolean query parameter <strong>treatNullAsReset</strong> is <code>true</code>, any attribute specified as <code>null</code> in the request will be reset to its default value. If the parameter is <code>false</code>, any attribute specified as <code>null</code> in the request will remain unchanged.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "name": "Another Name"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">Account</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Account</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Another Name"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">treatNullAsReset</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Any null value will be set to null</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">updateAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                         <span class="n">body</span><span class="o">,</span> 
                         <span class="n">treatNullAsReset</span><span class="o">,</span>
                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Another Name'</span>
<span class="n">treat_null_as_reset</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">account</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">treat_null_as_reset</span><span class="p">,</span>
               <span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span> 
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="s">'example'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Another Name'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">update_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                          <span class="n">body</span><span class="p">,</span> 
                          <span class="n">created_by</span><span class="p">,</span> 
                          <span class="n">api_key</span><span class="p">,</span> 
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json

</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"37e759ed-e769-4e81-9e39-afb75a33056d"</span><span class="p">,</span>
   <span class="s2">"name"</span><span class="ss">:"Another Name"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"1521656367-130272"</span><span class="p">,</span>
   <span class="s2">"email"</span><span class="ss">:"kill@bill.com"</span><span class="p">,</span>
   <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
   <span class="s2">"address1"</span><span class="ss">:"7, yoyo road"</span><span class="p">,</span>
   <span class="s2">"address2"</span><span class="ss">:"Apt 5"</span><span class="p">,</span>
   <span class="s2">"postalCode"</span><span class="ss">:"94105"</span><span class="p">,</span>
   <span class="s2">"company"</span><span class="ss">:"Unemployed"</span><span class="p">,</span>
   <span class="s2">"city"</span><span class="ss">:"San Francisco"</span><span class="p">,</span>
   <span class="s2">"state"</span><span class="ss">:"California"</span><span class="p">,</span>
   <span class="s2">"country"</span><span class="ss">:"US"</span><span class="p">,</span>
   <span class="s2">"locale"</span><span class="ss">:"fr_FR"</span><span class="p">,</span>
   <span class="s2">"notes"</span><span class="ss">:"My notes"</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>treatNullAsReset</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, any attribute with a null value in the request body will be set to <code>null</code>. If false, any attribute with a null value in the request body will be unchanged.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body..</p>
<h3 id='account-close-account'>Close account</h3>
<p>This endpoint can be used when no other state change will occur on this <code>Account</code> to bring it to a stable state. Depending on the value of the query parameters it will potentially cancel all active subscriptions, write-off unpaid invoices, etc. <strong>This endpoint is not for account deletion</strong>. We provide no support to remove state through APIs; such deletion operations, if really needed, would have to happen at the database level and are not encouraged. They can be tricky to get right.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/accounts/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/8785164f-b5d7-4da1-9495-33f5105e8d80"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">cancelAllSubscriptions</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will cancel all subscriptions</span>
<span class="n">Boolean</span> <span class="n">writeOffUnpaidInvoices</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will write off unpaid invoices</span>
<span class="n">Boolean</span> <span class="n">itemAdjustUnpaidInvoices</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">// Will not adjust unpaid invoices</span>
<span class="n">Boolean</span> <span class="n">removeFutureNotifications</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will remove future notifications </span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">closeAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                        <span class="n">cancelAllSubscriptions</span><span class="o">,</span> 
                        <span class="n">writeOffUnpaidInvoices</span><span class="o">,</span> 
                        <span class="n">itemAdjustUnpaidInvoices</span><span class="o">,</span> 
                        <span class="n">removeFutureNotifications</span><span class="o">,</span> 
                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">cancel_subscriptions</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">writeoff_unpaid_invoices</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">item_adjust_unpaid_invoices</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span><span class="p">.</span><span class="nf">close</span><span class="p">(</span><span class="n">cancel_subscriptions</span><span class="p">,</span> 
              <span class="n">writeoff_unpaid_invoices</span><span class="p">,</span> 
              <span class="n">item_adjust_unpaid_invoices</span><span class="p">,</span>
              <span class="n">user</span><span class="p">,</span>
              <span class="n">reason</span><span class="p">,</span>
              <span class="n">comment</span><span class="p">,</span> 
              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">close_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                         <span class="n">created_by</span><span class="p">,</span>
                         <span class="n">api_key</span><span class="p">,</span>
                         <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>cancelAllSubscriptions</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, cancel all subscriptions</td>
</tr>
<tr>
<td><strong>writeOffUnpaidInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, write off unpaid invoices</td>
</tr>
<tr>
<td><strong>itemAdjustUnpaidInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, adjust unpaid invoices</td>
</tr>
<tr>
<td><strong>removeFutureNotifications</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, remove future notifications</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>IF successful, eturns a status code of 204 and an empty body.</p>
<h2 id='account-list-and-search'>List and Search</h2>
<p>These endpoints allow you to list all accounts or to search for a specific account.</p>
<h3 id='account-list-accounts'>List accounts</h3>
<p>Retrieve a list of all account records.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/pagination"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">Accounts</span> <span class="n">allAccounts</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccounts</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span>
                                              <span class="n">limit</span><span class="o">,</span>
                                              <span class="n">accountWithBalance</span><span class="o">,</span>
                                              <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span>
                                              <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                        <span class="n">limit</span><span class="p">,</span>
                        <span class="n">with_balance</span><span class="p">,</span>
                        <span class="n">with_balance_and_cba</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_accounts</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"name"</span>: <span class="s2">"John Doe"</span>,
    <span class="s2">"firstNameLength"</span>: null,
    <span class="s2">"externalKey"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"email"</span>: <span class="s2">"john@laposte.com"</span>,
    <span class="s2">"billCycleDayLocal"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"isPaymentDelegatedToParent"</span>: <span class="nb">false</span>,
    <span class="s2">"paymentMethodId"</span>: null,
    <span class="s2">"referenceTime"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
    <span class="s2">"timeZone"</span>: <span class="s2">"UTC"</span>,
    <span class="s2">"address1"</span>: null,
    <span class="s2">"address2"</span>: null,
    <span class="s2">"postalCode"</span>: null,
    <span class="s2">"company"</span>: null,
    <span class="s2">"city"</span>: null,
    <span class="s2">"state"</span>: null,
    <span class="s2">"country"</span>: null,
    <span class="s2">"locale"</span>: null,
    <span class="s2">"phone"</span>: null,
    <span class="s2">"notes"</span>: null,
    <span class="s2">"isMigrated"</span>: null,
    <span class="s2">"accountBalance"</span>: null,
    <span class="s2">"accountCBA"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">// First element of the list</span>
<span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Account</span><span class="nd">@f0247489</span>
    <span class="nl">accountId:</span> <span class="mi">80</span><span class="n">e54c79</span><span class="o">-</span><span class="n">ca2b</span><span class="o">-</span><span class="mi">4</span><span class="n">c82</span><span class="o">-</span><span class="mi">920</span><span class="n">b</span><span class="o">-</span><span class="mo">07</span><span class="mi">822683</span><span class="n">e605</span>
    <span class="nl">name:</span> <span class="mi">34</span><span class="n">bd86b6</span><span class="o">-</span><span class="n">ebc8</span><span class="o">-</span><span class="mi">49</span><span class="n">ea</span><span class="o">-</span><span class="mi">9</span><span class="n">a6e</span><span class="o">-</span><span class="mi">6</span><span class="n">bbbd61ac745</span>
    <span class="nl">firstNameLength:</span> <span class="mi">4</span>
    <span class="nl">externalKey:</span> <span class="mi">23338712</span><span class="o">-</span><span class="mi">3409</span><span class="o">-</span><span class="mi">4</span><span class="n">ad3</span><span class="o">-</span><span class="mi">8</span><span class="n">c6d</span><span class="o">-</span><span class="mi">1</span><span class="n">c95241efef6</span>
    <span class="nl">email:</span> <span class="n">f1a3a</span><span class="err">@</span><span class="mi">44</span><span class="n">a80</span>
    <span class="nl">billCycleDayLocal:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">isPaymentDelegatedToParent:</span> <span class="kc">false</span>
    <span class="nl">paymentMethodId:</span> <span class="kc">null</span>
    <span class="nl">referenceTime:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">01.000</span><span class="n">Z</span>
    <span class="nl">timeZone:</span> <span class="n">UTC</span>
    <span class="nl">address1:</span> <span class="mi">12</span> <span class="n">rue</span> <span class="n">des</span> <span class="n">ecoles</span>
    <span class="nl">address2:</span> <span class="n">Poitier</span>
    <span class="nl">postalCode:</span> <span class="mi">44</span> <span class="mi">567</span>
    <span class="nl">company:</span> <span class="n">Renault</span>
    <span class="nl">city:</span> <span class="n">Quelque</span> <span class="n">part</span>
    <span class="nl">state:</span> <span class="n">Poitou</span>
    <span class="nl">country:</span> <span class="n">France</span>
    <span class="nl">locale:</span> <span class="n">fr</span>
    <span class="nl">phone:</span> <span class="mi">81</span> <span class="mi">53</span> <span class="mi">26</span> <span class="mi">56</span>
    <span class="nl">notes:</span> <span class="n">notes</span>
    <span class="nl">isMigrated:</span> <span class="kc">false</span>
    <span class="nl">accountBalance:</span> <span class="kc">null</span>
    <span class="nl">accountCBA:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"accountId"</span><span class="ss">:"e19c6ab3-1a21-42f2-8ea2-9859c082b093"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"John Doe"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"1522172592-516014"</span><span class="p">,</span>
      <span class="s2">"email"</span><span class="ss">:"John@laposte.com"</span><span class="p">,</span>
      <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
      <span class="s2">"parentAccountId"</span><span class="ss">:"01ab962b-3c66-4b17-b391-ffcc9fe51884"</span><span class="p">,</span>
      <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:true</span><span class="p">,</span>
      <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="ss">:"7, yoyo road"</span><span class="p">,</span>
      <span class="s2">"address2"</span><span class="ss">:"Apt 5"</span><span class="p">,</span>
      <span class="s2">"postalCode"</span><span class="ss">:"94105"</span><span class="p">,</span>
      <span class="s2">"company"</span><span class="ss">:"Unemployed"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="ss">:"San Francisco"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="ss">:"California"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="ss">:"US"</span><span class="p">,</span>
      <span class="s2">"locale"</span><span class="ss">:"fr_FR"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_balance'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_cba'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'224a9677-735b-4902-a4a4-bf77469a0846'</span><span class="p">,</span>
 <span class="s">'address1'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'address2'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s">'city'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'company'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'country'</span><span class="p">:</span> <span class="s">'USA'</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'email'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'fxelpb'</span><span class="p">,</span>
 <span class="s">'first_name_length'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'is_migrated'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_notified_for_invoices'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_payment_delegated_to_parent'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'locale'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'John-0'</span><span class="p">,</span>
 <span class="s">'notes'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'phone'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'postal_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'reference_time'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'state'</span><span class="p">:</span> <span class="s">'CA'</span><span class="p">,</span>
 <span class="s">'time_zone'</span><span class="p">:</span> <span class="s">'UTC'</span><span class="p">},</span> <span class="p">{</span><span class="s">'account_balance'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_cba'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'465f0295-e27e-4341-9eb7-072465e32ee5'</span><span class="p">,</span>
 <span class="s">'address1'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'address2'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s">'city'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'company'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'country'</span><span class="p">:</span> <span class="s">'USA'</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'email'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'cpkwdl'</span><span class="p">,</span>
 <span class="s">'first_name_length'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'is_migrated'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_notified_for_invoices'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_payment_delegated_to_parent'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'locale'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'John-1'</span><span class="p">,</span>
 <span class="s">'notes'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'phone'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'postal_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'reference_time'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'state'</span><span class="p">:</span> <span class="s">'CA'</span><span class="p">,</span>
 <span class="s">'time_zone'</span><span class="p">:</span> <span class="s">'UTC'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>false</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>false</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all accounts.</p>
<h3 id='account-search-accounts'>Search accounts</h3>
<p>Search for an account by a specified search string. The search string is compared to the following attributes: <code>accountId</code>, <code>name</code>, <code>email</code>, <code>companyName</code>, and <code>externalKey</code>. The operation returns all account records in which the search string matches all or part of any one of these attributes.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/search/John%20Doe"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"John-1"</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span> <span class="n">accountsByKey</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">searchAccounts</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                                                        <span class="n">offset</span><span class="o">,</span>
                                                        <span class="n">limit</span><span class="o">,</span>
                                                        <span class="n">accountWithBalance</span><span class="o">,</span>
                                                        <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span>
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'example'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                      <span class="n">offset</span><span class="p">,</span>
                                      <span class="n">limit</span><span class="p">,</span>
                                      <span class="n">with_balance</span><span class="p">,</span>
                                      <span class="n">with_balance_and_cba</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'John-1'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">search_accounts</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"name"</span>: <span class="s2">"John Doe"</span>,
    <span class="s2">"firstNameLength"</span>: null,
    <span class="s2">"externalKey"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"email"</span>: <span class="s2">"john@laposte.com"</span>,
    <span class="s2">"billCycleDayLocal"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"isPaymentDelegatedToParent"</span>: <span class="nb">false</span>,
    <span class="s2">"paymentMethodId"</span>: null,
    <span class="s2">"referenceTime"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
    <span class="s2">"timeZone"</span>: <span class="s2">"UTC"</span>,
    <span class="s2">"address1"</span>: null,
    <span class="s2">"address2"</span>: null,
    <span class="s2">"postalCode"</span>: null,
    <span class="s2">"company"</span>: null,
    <span class="s2">"city"</span>: null,
    <span class="s2">"state"</span>: null,
    <span class="s2">"country"</span>: null,
    <span class="s2">"locale"</span>: null,
    <span class="s2">"phone"</span>: null,
    <span class="s2">"notes"</span>: null,
    <span class="s2">"isMigrated"</span>: null,
    <span class="s2">"accountBalance"</span>: null,
    <span class="s2">"accountCBA"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">// First element of the list</span>
<span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Account</span><span class="err">@</span><span class="mi">24</span><span class="n">e22684</span>
    <span class="nl">accountId:</span> <span class="mi">80</span><span class="n">a454f3</span><span class="o">-</span><span class="mi">182</span><span class="n">f</span><span class="o">-</span><span class="mi">4621</span><span class="o">-</span><span class="mi">812</span><span class="n">e</span><span class="o">-</span><span class="mi">533</span><span class="n">d23e54cb9</span>
    <span class="nl">name:</span> <span class="n">John</span><span class="o">-</span><span class="mi">1</span>
    <span class="nl">firstNameLength:</span> <span class="mi">4</span>
    <span class="nl">externalKey:</span> <span class="mi">94</span><span class="n">a664a3</span><span class="o">-</span><span class="n">eea5</span><span class="o">-</span><span class="mi">43</span><span class="n">fb</span><span class="o">-</span><span class="mi">8788</span><span class="o">-</span><span class="mi">9</span><span class="n">d3129a2c95c</span>
    <span class="nl">email:</span> <span class="mi">33</span><span class="n">b2e</span><span class="nd">@cc77b</span>
    <span class="nl">billCycleDayLocal:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">isPaymentDelegatedToParent:</span> <span class="kc">false</span>
    <span class="nl">paymentMethodId:</span> <span class="kc">null</span>
    <span class="nl">referenceTime:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
    <span class="nl">timeZone:</span> <span class="n">UTC</span>
    <span class="nl">address1:</span> <span class="mi">12</span> <span class="n">rue</span> <span class="n">des</span> <span class="n">ecoles</span>
    <span class="nl">address2:</span> <span class="n">Poitier</span>
    <span class="nl">postalCode:</span> <span class="mi">44</span> <span class="mi">567</span>
    <span class="nl">company:</span> <span class="n">Renault</span>
    <span class="nl">city:</span> <span class="n">Quelque</span> <span class="n">part</span>
    <span class="nl">state:</span> <span class="n">Poitou</span>
    <span class="nl">country:</span> <span class="n">France</span>
    <span class="nl">locale:</span> <span class="n">fr</span>
    <span class="nl">phone:</span> <span class="mi">81</span> <span class="mi">53</span> <span class="mi">26</span> <span class="mi">56</span>
    <span class="nl">notes:</span> <span class="n">notes</span>
    <span class="nl">isMigrated:</span> <span class="kc">false</span>
    <span class="nl">accountBalance:</span> <span class="kc">null</span>
    <span class="nl">accountCBA:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"accountId"</span><span class="ss">:"e19c6ab3-1a21-42f2-8ea2-9859c082b093"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"John Doe"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"1522172592-516014"</span><span class="p">,</span>
      <span class="s2">"email"</span><span class="ss">:"John@laposte.com"</span><span class="p">,</span>
      <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
      <span class="s2">"parentAccountId"</span><span class="ss">:"01ab962b-3c66-4b17-b391-ffcc9fe51884"</span><span class="p">,</span>
      <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:true</span><span class="p">,</span>
      <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="ss">:"7, yoyo road"</span><span class="p">,</span>
      <span class="s2">"address2"</span><span class="ss">:"Apt 5"</span><span class="p">,</span>
      <span class="s2">"postalCode"</span><span class="ss">:"94105"</span><span class="p">,</span>
      <span class="s2">"company"</span><span class="ss">:"Unemployed"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="ss">:"San Francisco"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="ss">:"California"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="ss">:"US"</span><span class="p">,</span>
      <span class="s2">"locale"</span><span class="ss">:"fr_FR"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_balance'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_cba'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'c41bf53b-c6a8-48de-8012-b755e51d5d3e'</span><span class="p">,</span>
 <span class="s">'address1'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'address2'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
 <span class="s">'city'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'company'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'country'</span><span class="p">:</span> <span class="s">'USA'</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'email'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'njisdn'</span><span class="p">,</span>
 <span class="s">'first_name_length'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'is_migrated'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_notified_for_invoices'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_payment_delegated_to_parent'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'locale'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'John-1'</span><span class="p">,</span>
 <span class="s">'notes'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'phone'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'postal_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'reference_time'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'state'</span><span class="p">:</span> <span class="s">'CA'</span><span class="p">,</span>
 <span class="s">'time_zone'</span><span class="p">:</span> <span class="s">'UTC'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>What you want to find</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>false</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>false</td>
<td>100</td>
<td>Maximum number of items to return on this page</td>
</tr>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of accounts that contain a match for the specified search key.</p>
<h2 id='account-email'>Email</h2>
<p>These endpoints manage emails associated with a customer account. <strong>These are secondary emails, distinct from the <code>email</code> attribute in the <code>account</code> object.</strong> It is possible to have
several such emails for one customer account.</p>
<h3 id='account-add-account-email'>Add account email</h3>
<p>Add an email to an account. Existing emails are undisturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/emails</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "email": "email@laposte.com"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"873c26ef-a3fa-4942-b2f5-549b51f20b1a"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="s">"email@laposte.com"</span><span class="o">;</span>

<span class="n">AccountEmail</span> <span class="n">accountEmail</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccountEmail</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                             <span class="n">email</span><span class="o">,</span>
                                             <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">addEmail</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                    <span class="n">accountEmail</span><span class="o">,</span>
                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">email</span> <span class="o">=</span> <span class="s1">'email@laposte.com'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">add_email</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">email</span><span class="p">,</span>
                  <span class="n">user</span><span class="p">,</span>
                  <span class="n">reason</span><span class="p">,</span>
                  <span class="n">comment</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c84de569-b654-4f7f-ab13-17616302d310'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">AccountEmail</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s">'email@laposte.com'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">add_email</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                     <span class="n">body</span><span class="p">,</span>
                     <span class="n">created_by</span><span class="p">,</span>
                     <span class="n">api_key</span><span class="p">,</span>
                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body identifies a subset of the <code>account</code> attributes as a JSON string. The attributes required are <code>accountId</code> and <code>email</code> (the email to be added). <code>accountId</code> is required in the body even though it is given in the path. No other attributes should be included.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty response body.</p>
<h3 id='account-retrieve-account-emails'>Retrieve account emails</h3>
<p>Retrieves all emails for an account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/emails</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cd026587-c93b-471c-a98d-224c21636fbc"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AccountEmail</span><span class="o">&gt;</span> <span class="n">emails</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getEmails</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>
<span class="n">account</span><span class="p">.</span><span class="nf">emails</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c8f51346-562d-429b-8c89-27a0f72009b3'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_emails</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
   <span class="o">{</span>
      <span class="s2">"accountId"</span>:<span class="s2">"e4ca38b3-934d-42e8-a292-ffb0af5549f2"</span>,
      <span class="s2">"email"</span>:<span class="s2">"email@laposte.com"</span>
   <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">AccountEmail</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">AccountEmail</span><span class="nd">@bdc0f8ad</span>
    <span class="nl">accountId:</span> <span class="n">cd026587</span><span class="o">-</span><span class="n">c93b</span><span class="o">-</span><span class="mi">471</span><span class="n">c</span><span class="o">-</span><span class="n">a98d</span><span class="o">-</span><span class="mi">224</span><span class="n">c21636fbc</span>
    <span class="nl">email:</span> <span class="n">email</span><span class="nd">@laposte</span><span class="o">.</span><span class="na">com</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"accountId"</span><span class="ss">:"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span>
      <span class="s2">"email"</span><span class="ss">:"email@laposte.com"</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'c8f51346-562d-429b-8c89-27a0f72009b3'</span><span class="p">,</span>
    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s">'email'</span><span class="p">:</span> <span class="s">'email@laposte.com'</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response Body</strong></p>

<p>If successful, returns a status code of 200 and a list of objects giving the account id and the emails. Note that this is not the full object for each email, and does not include the email ID. This can be obtained only from the account audit log.</p>
<h3 id='account-delete-email'>Delete email</h3>
<p>Deletes an email from an account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/emails/{email}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails/email%40127.0.0.1:8080"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"873c26ef-a3fa-4942-b2f5-549b51f20b1a"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="s">"email@laposte.com"</span><span class="o">;</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">removeEmail</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                       <span class="n">email</span><span class="o">,</span> 
                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">email</span> <span class="o">=</span> <span class="s1">'email@laposte.com'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">remove_email</span><span class="p">(</span><span class="n">email</span><span class="p">,</span>
                     <span class="n">user</span><span class="p">,</span>
                     <span class="n">reason</span><span class="p">,</span>
                     <span class="n">comment</span><span class="p">,</span>
                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c84de569-b654-4f7f-ab13-17616302d310'</span>
<span class="n">email</span> <span class="o">=</span> <span class="s">'email@laposte.com'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">remove_email</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                        <span class="n">email</span><span class="p">,</span>
                        <span class="n">created_by</span><span class="p">,</span>
                        <span class="n">api_key</span><span class="p">,</span>
                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty response body.</p>
<h2 id='account-bundle'>Bundle</h2>
<p>This endpoint provides an API to list the Bundles associated with this account. A Bundle is a set of Subscriptions and related information. See <a href="#bundle">Bundle</a> for details on Bundles.</p>
<h3 id='account-retrieve-bundles-for-account'>Retrieve bundles for account</h3>
<p>This endpoint is used to list all <code>Bundles</code> associated with this account. It is possible to limit the list to a specific Bundle external key, or to a list of Bundle Ids.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/bundles</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/bundles"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"15434b45-54c1-4a44-851c-b1f2f7a52f03"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"123467"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">bundlesFilter</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Bundle</span><span class="o">&gt;</span> <span class="n">accountBundles</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountBundles</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                           <span class="n">externalKey</span><span class="o">,</span> 
                                                           <span class="n">bundlesFilter</span><span class="o">,</span>
                                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">bundles</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_bundles</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"subscriptions"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
        <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
        <span class="s2">"subscriptionId"</span>: <span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span>,
        <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
        <span class="s2">"startDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"productName"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"productCategory"</span>: <span class="s2">"BASE"</span>,
        <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
        <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
        <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
        <span class="s2">"state"</span>: <span class="s2">"ACTIVE"</span>,
        <span class="s2">"sourceType"</span>: <span class="s2">"NATIVE"</span>,
        <span class="s2">"cancelledDate"</span>: null,
        <span class="s2">"chargedThroughDate"</span>: null,
        <span class="s2">"billingStartDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"billingEndDate"</span>: null,
        <span class="s2">"billCycleDayLocal"</span>: 17,
        <span class="s2">"events"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-08-17"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"PHASE"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement+billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"PHASE"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"priceOverrides"</span>: null,
        <span class="s2">"prices"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"phaseName"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
            <span class="s2">"fixedPrice"</span>: 0,
            <span class="s2">"recurringPrice"</span>: null,
            <span class="s2">"usagePrices"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"phaseName"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
            <span class="s2">"phaseType"</span>: <span class="s2">"EVERGREEN"</span>,
            <span class="s2">"fixedPrice"</span>: null,
            <span class="s2">"recurringPrice"</span>: 100,
            <span class="s2">"usagePrices"</span>: <span class="o">[]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"timeline"</span>: <span class="o">{</span>
      <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"events"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-08-17"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"PHASE"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement+billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"PHASE"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Bundle</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Bundle</span><span class="err">@</span><span class="mi">53060</span><span class="n">d66</span>
    <span class="nl">accountId:</span> <span class="mi">15434</span><span class="n">b45</span><span class="o">-</span><span class="mi">54</span><span class="n">c1</span><span class="o">-</span><span class="mi">4</span><span class="n">a44</span><span class="o">-</span><span class="mi">851</span><span class="n">c</span><span class="o">-</span><span class="n">b1f2f7a52f03</span>
    <span class="nl">bundleId:</span> <span class="n">e17a7805</span><span class="o">-</span><span class="mi">42</span><span class="n">cf</span><span class="o">-</span><span class="mi">4464</span><span class="o">-</span><span class="n">aea7</span><span class="o">-</span><span class="mi">963</span><span class="n">cf0078651</span>
    <span class="nl">externalKey:</span> <span class="mi">123467</span>
    <span class="nl">subscriptions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="nd">@e1d5debf</span>
        <span class="nl">accountId:</span> <span class="mi">15434</span><span class="n">b45</span><span class="o">-</span><span class="mi">54</span><span class="n">c1</span><span class="o">-</span><span class="mi">4</span><span class="n">a44</span><span class="o">-</span><span class="mi">851</span><span class="n">c</span><span class="o">-</span><span class="n">b1f2f7a52f03</span>
        <span class="nl">bundleId:</span> <span class="n">e17a7805</span><span class="o">-</span><span class="mi">42</span><span class="n">cf</span><span class="o">-</span><span class="mi">4464</span><span class="o">-</span><span class="n">aea7</span><span class="o">-</span><span class="mi">963</span><span class="n">cf0078651</span>
        <span class="nl">subscriptionId:</span> <span class="mi">7</span><span class="n">b9de82a</span><span class="o">-</span><span class="mi">319</span><span class="n">c</span><span class="o">-</span><span class="mi">4334</span><span class="o">-</span><span class="n">b676</span><span class="o">-</span><span class="n">f1644591077e</span>
        <span class="nl">externalKey:</span> <span class="mi">123467</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">productCategory:</span> <span class="n">BASE</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">ACTIVE</span>
        <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">24</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">6</span><span class="n">ea5e183</span>
            <span class="nl">eventId:</span> <span class="n">a6e0c854</span><span class="o">-</span><span class="mi">16</span><span class="n">b7</span><span class="o">-</span><span class="mi">4729</span><span class="o">-</span><span class="n">bc6c</span><span class="o">-</span><span class="n">cb019b3441ce</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">3635</span><span class="n">a9d5</span>
            <span class="nl">eventId:</span> <span class="mi">2</span><span class="n">cb255be</span><span class="o">-</span><span class="mo">000</span><span class="mi">8</span><span class="o">-</span><span class="mi">44</span><span class="n">b0</span><span class="o">-</span><span class="mi">9161</span><span class="o">-</span><span class="mi">47760</span><span class="n">a5e2828</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@a561e242</span>
            <span class="nl">eventId:</span> <span class="n">a34e0990</span><span class="o">-</span><span class="mi">80</span><span class="n">bb</span><span class="o">-</span><span class="mi">42</span><span class="n">e1</span><span class="o">-</span><span class="n">a593</span><span class="o">-</span><span class="mi">0</span><span class="n">a0bc952ef2c</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
            <span class="nl">fixedPrice:</span> <span class="mi">0</span>
            <span class="nl">recurringPrice:</span> <span class="kc">null</span>
            <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
            <span class="nl">fixedPrice:</span> <span class="kc">null</span>
            <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
            <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">timeline:</span> <span class="kd">class</span> <span class="nc">BundleTimeline</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BundleTimeline</span><span class="nd">@e70542</span>
        <span class="nl">accountId:</span> <span class="mi">15434</span><span class="n">b45</span><span class="o">-</span><span class="mi">54</span><span class="n">c1</span><span class="o">-</span><span class="mi">4</span><span class="n">a44</span><span class="o">-</span><span class="mi">851</span><span class="n">c</span><span class="o">-</span><span class="n">b1f2f7a52f03</span>
        <span class="nl">bundleId:</span> <span class="n">e17a7805</span><span class="o">-</span><span class="mi">42</span><span class="n">cf</span><span class="o">-</span><span class="mi">4464</span><span class="o">-</span><span class="n">aea7</span><span class="o">-</span><span class="mi">963</span><span class="n">cf0078651</span>
        <span class="nl">externalKey:</span> <span class="mi">123467</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">1852601</span><span class="n">c</span>
            <span class="nl">eventId:</span> <span class="n">a6e0c854</span><span class="o">-</span><span class="mi">16</span><span class="n">b7</span><span class="o">-</span><span class="mi">4729</span><span class="o">-</span><span class="n">bc6c</span><span class="o">-</span><span class="n">cb019b3441ce</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">1</span><span class="n">d0ca762</span>
            <span class="nl">eventId:</span> <span class="mi">2</span><span class="n">cb255be</span><span class="o">-</span><span class="mo">000</span><span class="mi">8</span><span class="o">-</span><span class="mi">44</span><span class="n">b0</span><span class="o">-</span><span class="mi">9161</span><span class="o">-</span><span class="mi">47760</span><span class="n">a5e2828</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@a8ba9854</span>
            <span class="nl">eventId:</span> <span class="n">a34e0990</span><span class="o">-</span><span class="mi">80</span><span class="n">bb</span><span class="o">-</span><span class="mi">42</span><span class="n">e1</span><span class="o">-</span><span class="n">a593</span><span class="o">-</span><span class="mi">0</span><span class="n">a0bc952ef2c</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
      <span class="s2">"bundleId"</span><span class="ss">:"a5221798-699a-48ac-a2d1-962839fd8fc9"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"3-6138e5ee-2763-4729-829b-e7de038b46d0-889153"</span><span class="p">,</span>
      <span class="s2">"subscriptions"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
            <span class="s2">"bundleId"</span><span class="ss">:"a5221798-699a-48ac-a2d1-962839fd8fc9"</span><span class="p">,</span>
            <span class="s2">"subscriptionId"</span><span class="ss">:"937ff1a8-2290-4bb5-9166-7b7bb99cbccf"</span><span class="p">,</span>
            <span class="s2">"externalKey"</span><span class="ss">:"3-6138e5ee-2763-4729-829b-e7de038b46d0-889153"</span><span class="p">,</span>
            <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"productName"</span><span class="ss">:"Super"</span><span class="p">,</span>
            <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
            <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
            <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
            <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
            <span class="s2">"events"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"c5ba5861-d4e4-46de-9ac5-d72ddf086ff2"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"2add66b9-cd9f-47c3-906a-899aad32a350"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"86be39b0-0a70-4e15-a891-ed20aed6c12d"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"super-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"priceOverrides"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
                  <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"super-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
                  <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">1000</span><span class="o">.</span><span class="mi">0</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
            <span class="s2">"bundleId"</span><span class="ss">:"a5221798-699a-48ac-a2d1-962839fd8fc9"</span><span class="p">,</span>
            <span class="s2">"subscriptionId"</span><span class="ss">:"cf1c90f9-928c-43c1-9b88-633a0ac6d7f2"</span><span class="p">,</span>
            <span class="s2">"externalKey"</span><span class="ss">:"3-6138e5ee-2763-4729-829b-e7de038b46d0-889153"</span><span class="p">,</span>
            <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"productName"</span><span class="ss">:"Gas"</span><span class="p">,</span>
            <span class="s2">"productCategory"</span><span class="ss">:"ADD_ON"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"NO_BILLING_PERIOD"</span><span class="p">,</span>
            <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"planName"</span><span class="ss">:"gas-monthly"</span><span class="p">,</span>
            <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
            <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
            <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
            <span class="s2">"events"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"08ec39ef-e9f5-4e58-957d-650d174938ab"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"NO_BILLING_PERIOD"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"gas-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Gas"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"gas-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"729268e7-583b-49f2-be84-477ae444c363"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"NO_BILLING_PERIOD"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"gas-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Gas"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"gas-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"priceOverrides"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"gas-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"gas-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"timeline"</span><span class="p">:{</span>
         <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
         <span class="s2">"bundleId"</span><span class="ss">:"a5221798-699a-48ac-a2d1-962839fd8fc9"</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"3-6138e5ee-2763-4729-829b-e7de038b46d0-889153"</span><span class="p">,</span>
         <span class="s2">"events"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"08ec39ef-e9f5-4e58-957d-650d174938ab"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"c5ba5861-d4e4-46de-9ac5-d72ddf086ff2"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"2add66b9-cd9f-47c3-906a-899aad32a350"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"729268e7-583b-49f2-be84-477ae444c363"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"NO_BILLING_PERIOD"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"gas-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Gas"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"gas-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"86be39b0-0a70-4e15-a891-ed20aed6c12d"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"super-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="p">{</span>
      <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
      <span class="s2">"bundleId"</span><span class="ss">:"e71f6dc2-ece9-4d31-8cea-81472784ded3"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"2-6138e5ee-2763-4729-829b-e7de038b46d0-979751"</span><span class="p">,</span>
      <span class="s2">"subscriptions"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
            <span class="s2">"bundleId"</span><span class="ss">:"e71f6dc2-ece9-4d31-8cea-81472784ded3"</span><span class="p">,</span>
            <span class="s2">"subscriptionId"</span><span class="ss">:"2be86a1f-0516-4fda-a094-7467f2171d7f"</span><span class="p">,</span>
            <span class="s2">"externalKey"</span><span class="ss">:"2-6138e5ee-2763-4729-829b-e7de038b46d0-979751"</span><span class="p">,</span>
            <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"productName"</span><span class="ss">:"Standard"</span><span class="p">,</span>
            <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"planName"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
            <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
            <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
            <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
            <span class="s2">"events"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"4e9cff06-c558-48b0-adad-6dda59ac551c"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Standard"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"standard-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"2d32bd25-46d6-448e-a5ca-f07c56dd2feb"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Standard"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"standard-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"d7754b8e-cc06-4bb7-afbf-022860261f14"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Standard"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"standard-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"priceOverrides"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"standard-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
                  <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"standard-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
                  <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">100</span><span class="o">.</span><span class="mi">0</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"timeline"</span><span class="p">:{</span>
         <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
         <span class="s2">"bundleId"</span><span class="ss">:"e71f6dc2-ece9-4d31-8cea-81472784ded3"</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"2-6138e5ee-2763-4729-829b-e7de038b46d0-979751"</span><span class="p">,</span>
         <span class="s2">"events"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"4e9cff06-c558-48b0-adad-6dda59ac551c"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Standard"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"standard-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"2d32bd25-46d6-448e-a5ca-f07c56dd2feb"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Standard"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"standard-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"d7754b8e-cc06-4bb7-afbf-022860261f14"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"standard-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Standard"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"standard-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="p">{</span>
      <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
      <span class="s2">"bundleId"</span><span class="ss">:"3c7d6f02-bd9b-4f23-8a44-d806d3cbe330"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"1-6138e5ee-2763-4729-829b-e7de038b46d0-909112"</span><span class="p">,</span>
      <span class="s2">"subscriptions"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
            <span class="s2">"bundleId"</span><span class="ss">:"3c7d6f02-bd9b-4f23-8a44-d806d3cbe330"</span><span class="p">,</span>
            <span class="s2">"subscriptionId"</span><span class="ss">:"d64a410b-49b6-47af-88a3-cbd203289246"</span><span class="p">,</span>
            <span class="s2">"externalKey"</span><span class="ss">:"1-6138e5ee-2763-4729-829b-e7de038b46d0-909112"</span><span class="p">,</span>
            <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"productName"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
            <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
            <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
            <span class="s2">"events"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"ae420517-05d4-4a5d-bbe9-0f81a433efd3"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"d2179af5-1deb-4e2a-a934-9bad8cac04bd"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"d45754a1-eb41-4a87-9714-80e2975a9f9a"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"priceOverrides"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
                  <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
                  <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
            <span class="s2">"bundleId"</span><span class="ss">:"3c7d6f02-bd9b-4f23-8a44-d806d3cbe330"</span><span class="p">,</span>
            <span class="s2">"subscriptionId"</span><span class="ss">:"b313e0f1-0c2e-4be7-bb6a-b4c8aff36341"</span><span class="p">,</span>
            <span class="s2">"externalKey"</span><span class="ss">:"1-6138e5ee-2763-4729-829b-e7de038b46d0-909112"</span><span class="p">,</span>
            <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"productName"</span><span class="ss">:"OilSlick"</span><span class="p">,</span>
            <span class="s2">"productCategory"</span><span class="ss">:"ADD_ON"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"phaseType"</span><span class="ss">:"DISCOUNT"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"planName"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
            <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
            <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
            <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
            <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
            <span class="s2">"events"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"1f06a132-d7e7-4fb6-ad96-8ef0a55ec38b"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"OilSlick"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"oilslick-monthly-discount"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"d783e243-2aa9-4463-a81b-030772d7945c"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"OilSlick"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"oilslick-monthly-discount"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"267a056b-85b9-4912-8231-597e9905519c"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"OilSlick"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"oilslick-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"priceOverrides"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"oilslick-monthly-discount"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"DISCOUNT"</span><span class="p">,</span>
                  <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">4</span><span class="o">.</span><span class="mi">0</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"planName"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
                  <span class="s2">"phaseName"</span><span class="ss">:"oilslick-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
                  <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">95</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"timeline"</span><span class="p">:{</span>
         <span class="s2">"accountId"</span><span class="ss">:"6138e5ee-2763-4729-829b-e7de038b46d0"</span><span class="p">,</span>
         <span class="s2">"bundleId"</span><span class="ss">:"3c7d6f02-bd9b-4f23-8a44-d806d3cbe330"</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"1-6138e5ee-2763-4729-829b-e7de038b46d0-909112"</span><span class="p">,</span>
         <span class="s2">"events"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"1f06a132-d7e7-4fb6-ad96-8ef0a55ec38b"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"OilSlick"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"oilslick-monthly-discount"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"ae420517-05d4-4a5d-bbe9-0f81a433efd3"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"OilSlick"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"oilslick-monthly-discount"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"d783e243-2aa9-4463-a81b-030772d7945c"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"OilSlick"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"oilslick-monthly-discount"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"d2179af5-1deb-4e2a-a934-9bad8cac04bd"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"d45754a1-eb41-4a87-9714-80e2975a9f9a"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"267a056b-85b9-4912-8231-597e9905519c"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"oilslick-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"OilSlick"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"oilslick-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'d636e7e9-e1e3-43ff-94a6-01a868b064cc'</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'d636e7e9-e1e3-43ff-94a6-01a868b064cc'</span><span class="p">,</span>
 <span class="s">'subscriptions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span><span class="p">,</span>
                    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                    <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                    <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'d636e7e9-e1e3-43ff-94a6-01a868b064cc'</span><span class="p">,</span>
                    <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'efa8c4ae-a514-4950-b6f5-58f1e1d17846'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'94470035-33c0-42bc-a041-58aa13bdae93'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'9d369364-1a5d-4291-9ecd-4cb0617ef5b3'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
                    <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'d636e7e9-e1e3-43ff-94a6-01a868b064cc'</span><span class="p">,</span>
                    <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                    <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                    <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                    <span class="s">'price_overrides'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                         <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                         <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                         <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                         <span class="s">'recurring_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                         <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]},</span>
                                        <span class="p">{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                         <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                         <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
                                         <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                         <span class="s">'recurring_price'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
                                         <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]}],</span>
                    <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
                    <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                    <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
                    <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                    <span class="s">'state'</span><span class="p">:</span> <span class="s">'ACTIVE'</span><span class="p">,</span>
                    <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'a0f6dcd9-4dbc-43d2-876a-9dcc7dfb7d3b'</span><span class="p">}],</span>
 <span class="s">'timeline'</span><span class="p">:</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span><span class="p">,</span>
              <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
              <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'d636e7e9-e1e3-43ff-94a6-01a868b064cc'</span><span class="p">,</span>
              <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'efa8c4ae-a514-4950-b6f5-58f1e1d17846'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'94470035-33c0-42bc-a041-58aa13bdae93'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'9d369364-1a5d-4291-9ecd-4cb0617ef5b3'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
              <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'d636e7e9-e1e3-43ff-94a6-01a868b064cc'</span><span class="p">}}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>false</td>
<td>return all bundles</td>
<td>Bundle external key; if present, return only bundles with this key.</td>
</tr>
<tr>
<td><strong>bundlesFilter</strong></td>
<td>string</td>
<td>false</td>
<td>return all bundles</td>
<td>Comma separated list of bundle ids to return, if found.</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of bundle objects.</p>
<h2 id='account-invoice'>Invoice</h2>
<p>This endpoint provides an API to list the Invoices associated with this account. See section <a href="#invoice">Invoice</a> for details on invoices.</p>
<h3 id='account-retrieve-account-invoices'>Retrieve account invoices</h3>
<p>List the Invoices associated with this account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/invoices</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/invoices"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d3a82897-ae72-4a2e-9bca-e3c1fe087f84"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">startDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">endDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withMigrationInvoices</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not fetch migrated invoice - if any</span>
<span class="n">Boolean</span> <span class="n">unpaidInvoicesOnly</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not restrict to unpaid invoices</span>
<span class="n">Boolean</span> <span class="n">includeVoidedInvoices</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include void invoices</span>

<span class="n">Invoices</span> <span class="n">invoices</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getInvoicesForAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                                     <span class="n">startDate</span><span class="o">,</span> 
                                                     <span class="n">endDate</span><span class="o">,</span>
                                                     <span class="n">withMigrationInvoices</span><span class="o">,</span> 
                                                     <span class="n">unpaidInvoicesOnly</span><span class="o">,</span> 
                                                     <span class="n">includeVoidedInvoices</span><span class="o">,</span> 
                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">invoices</span><span class="p">(</span><span class="n">with_items</span><span class="p">,</span>
                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_invoices_for_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
   <span class="o">{</span>
      <span class="s2">"amount"</span>:50.0,
      <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
      <span class="s2">"status"</span>:<span class="s2">"COMMITTED"</span>,
      <span class="s2">"creditAdj"</span>:0.0,
      <span class="s2">"refundAdj"</span>:0.0,
      <span class="s2">"invoiceId"</span>:<span class="s2">"d981abbb-3622-487a-9564-d594c9d04f83"</span>,
      <span class="s2">"invoiceDate"</span>:<span class="s2">"2013-08-01"</span>,
      <span class="s2">"targetDate"</span>:<span class="s2">"2013-08-01"</span>,
      <span class="s2">"invoiceNumber"</span>:<span class="s2">"1563"</span>,
      <span class="s2">"balance"</span>:0.0,
      <span class="s2">"accountId"</span>:<span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"items"</span>:[
         <span class="o">{</span>
            <span class="s2">"invoiceItemId"</span>:<span class="s2">"5f3b4e9c-66bd-4c5c-b84a-4ae951cc2f1d"</span>,
            <span class="s2">"invoiceId"</span>:<span class="s2">"d981abbb-3622-487a-9564-d594c9d04f83"</span>,
            <span class="s2">"accountId"</span>:<span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
            <span class="s2">"itemType"</span>:<span class="s2">"EXTERNAL_CHARGE"</span>,
            <span class="s2">"description"</span>:<span class="s2">"Some description"</span>,
            <span class="s2">"startDate"</span>:<span class="s2">"2013-08-01"</span>,
            <span class="s2">"amount"</span>:50.0,
            <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
            <span class="s2">"auditLogs"</span>:[]
         <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"isParentInvoice"</span>:false,
      <span class="s2">"auditLogs"</span>:[]
   <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="nd">@df84aad8</span>
    <span class="nl">amount:</span> <span class="mf">0.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="mi">66448454</span><span class="o">-</span><span class="mi">4</span><span class="n">ff2</span><span class="o">-</span><span class="mi">4</span><span class="n">a4c</span><span class="o">-</span><span class="mi">9817</span><span class="o">-</span><span class="mi">167</span><span class="n">c062fcde9</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">1</span>
    <span class="nl">balance:</span> <span class="mf">0.00</span>
    <span class="nl">accountId:</span> <span class="n">d3a82897</span><span class="o">-</span><span class="n">ae72</span><span class="o">-</span><span class="mi">4</span><span class="n">a2e</span><span class="o">-</span><span class="mi">9</span><span class="n">bca</span><span class="o">-</span><span class="n">e3c1fe087f84</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">InvoiceItem</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoiceItem</span><span class="err">@</span><span class="mi">7</span><span class="n">e405309</span>
        <span class="nl">invoiceItemId:</span> <span class="mi">898</span><span class="n">d4b59</span><span class="o">-</span><span class="mi">9</span><span class="n">e85</span><span class="o">-</span><span class="mi">48</span><span class="n">cc</span><span class="o">-</span><span class="n">b05e</span><span class="o">-</span><span class="mi">33</span><span class="n">d2059b6250</span>
        <span class="nl">invoiceId:</span> <span class="mi">66448454</span><span class="o">-</span><span class="mi">4</span><span class="n">ff2</span><span class="o">-</span><span class="mi">4</span><span class="n">a4c</span><span class="o">-</span><span class="mi">9817</span><span class="o">-</span><span class="mi">167</span><span class="n">c062fcde9</span>
        <span class="nl">linkedInvoiceItemId:</span> <span class="kc">null</span>
        <span class="nl">accountId:</span> <span class="n">d3a82897</span><span class="o">-</span><span class="n">ae72</span><span class="o">-</span><span class="mi">4</span><span class="n">a2e</span><span class="o">-</span><span class="mi">9</span><span class="n">bca</span><span class="o">-</span><span class="n">e3c1fe087f84</span>
        <span class="nl">childAccountId:</span> <span class="kc">null</span>
        <span class="nl">bundleId:</span> <span class="mi">823</span><span class="n">db38d</span><span class="o">-</span><span class="mi">864</span><span class="n">f</span><span class="o">-</span><span class="mi">4123</span><span class="o">-</span><span class="mi">96</span><span class="n">e1</span><span class="o">-</span><span class="mi">86218663</span><span class="n">e1bd</span>
        <span class="nl">subscriptionId:</span> <span class="mi">8</span><span class="n">c0b5800</span><span class="o">-</span><span class="n">c892</span><span class="o">-</span><span class="mi">4898</span><span class="o">-</span><span class="mi">9295</span><span class="o">-</span><span class="mi">837</span><span class="n">ecadad2f0</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">usageName:</span> <span class="kc">null</span>
        <span class="nl">prettyProductName:</span> <span class="n">Shotgun</span>
        <span class="nl">prettyPlanName:</span> <span class="n">Shotgun</span> <span class="n">Monthly</span>
        <span class="nl">prettyPhaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">prettyUsageName:</span> <span class="kc">null</span>
        <span class="nl">itemType:</span> <span class="n">FIXED</span>
        <span class="nl">description:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">endDate:</span> <span class="kc">null</span>
        <span class="nl">amount:</span> <span class="mf">0.00</span>
        <span class="nl">rate:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">quantity:</span> <span class="kc">null</span>
        <span class="nl">itemDetails:</span> <span class="kc">null</span>
        <span class="nl">childItems:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
            <span class="nl">changeType:</span> <span class="n">INSERT</span>
            <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">43.000</span><span class="n">Z</span>
            <span class="nl">objectType:</span> <span class="n">INVOICE_ITEM</span>
            <span class="nl">objectId:</span> <span class="mi">898</span><span class="n">d4b59</span><span class="o">-</span><span class="mi">9</span><span class="n">e85</span><span class="o">-</span><span class="mi">48</span><span class="n">cc</span><span class="o">-</span><span class="n">b05e</span><span class="o">-</span><span class="mi">33</span><span class="n">d2059b6250</span>
            <span class="nl">changedBy:</span> <span class="n">SubscriptionBaseTransition</span>
            <span class="nl">reasonCode:</span> <span class="kc">null</span>
            <span class="nl">comments:</span> <span class="kc">null</span>
            <span class="nl">userToken:</span> <span class="n">fc3e7a8d</span><span class="o">-</span><span class="mi">7</span><span class="n">e8c</span><span class="o">-</span><span class="mi">4</span><span class="n">b9d</span><span class="o">-</span><span class="n">a6ac</span><span class="o">-</span><span class="mi">557</span><span class="n">cd2e74ccd</span>
            <span class="nl">history:</span> <span class="kc">null</span>
        <span class="o">}]</span>
    <span class="o">}]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">43.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">INVOICE</span>
        <span class="nl">objectId:</span> <span class="mi">66448454</span><span class="o">-</span><span class="mi">4</span><span class="n">ff2</span><span class="o">-</span><span class="mi">4</span><span class="n">a4c</span><span class="o">-</span><span class="mi">9817</span><span class="o">-</span><span class="mi">167</span><span class="n">c062fcde9</span>
        <span class="nl">changedBy:</span> <span class="n">SubscriptionBaseTransition</span>
        <span class="nl">reasonCode:</span> <span class="kc">null</span>
        <span class="nl">comments:</span> <span class="kc">null</span>
        <span class="nl">userToken:</span> <span class="n">fc3e7a8d</span><span class="o">-</span><span class="mi">7</span><span class="n">e8c</span><span class="o">-</span><span class="mi">4</span><span class="n">b9d</span><span class="o">-</span><span class="n">a6ac</span><span class="o">-</span><span class="mi">557</span><span class="n">cd2e74ccd</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
      <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
      <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"invoiceId"</span><span class="ss">:"d981abbb-3622-487a-9564-d594c9d04f83"</span><span class="p">,</span>
      <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
      <span class="s2">"targetDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
      <span class="s2">"invoiceNumber"</span><span class="ss">:"1563"</span><span class="p">,</span>
      <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"accountId"</span><span class="ss">:"1f310060-dad6-4151-87af-c58a4fe87679"</span><span class="p">,</span>
      <span class="s2">"items"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"invoiceItemId"</span><span class="ss">:"5f3b4e9c-66bd-4c5c-b84a-4ae951cc2f1d"</span><span class="p">,</span>
            <span class="s2">"invoiceId"</span><span class="ss">:"d981abbb-3622-487a-9564-d594c9d04f83"</span><span class="p">,</span>
            <span class="s2">"accountId"</span><span class="ss">:"1f310060-dad6-4151-87af-c58a4fe87679"</span><span class="p">,</span>
            <span class="s2">"itemType"</span><span class="ss">:"EXTERNAL_CHARGE"</span><span class="p">,</span>
            <span class="s2">"description"</span><span class="ss">:"Some description"</span><span class="p">,</span>
            <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
            <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'da4a1c85-c18c-4d88-8005-e3c4039c218b'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'764'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)},</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'00b24709-160b-4472-8741-e0f271a67fe0'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'765'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)},</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'6e2be596-f6f0-4453-9551-3638af9088d2'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'766'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>false</td>
<td>no starting date</td>
<td>Return only invoices issued since this date.</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>date</td>
<td>false</td>
<td>no ending date</td>
<td>Return only invoices issued up to this date.</td>
</tr>
<tr>
<td><strong>withMigrationInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include migration invoices</td>
</tr>
<tr>
<td><strong>unpaidInvoicesOnly</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include unpaid invoices only</td>
</tr>
<tr>
<td><strong>includeVoidedInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include voided invoices</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p>For information about migration and migration invoices, see the <a href="http://docs.killbill.io/latest/migration_guide.html">Migration Guide</a>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status of 200 and a list of invoice objects for this account.</p>
<h2 id='account-payment'>Payment</h2>
<p>These endpoints are used to make or manage payments associated with this account. See section <a href="#payment">Payment</a> for details on payments.</p>
<h3 id='account-trigger-a-payment-for-all-unpaid-invoices'>Trigger a payment for all unpaid invoices</h3>
<p>Initiate payments for any unpaid invoices. This API allows you to make a series of payment calls, one against each unpaid invoice, using a specific payment method.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/invoicePayments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/invoicePayments?paymentMethodId=f835c556-0694-4883-b4c1-d1b6e308409b"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e011caa5-ba35-4ac6-81cb-63b4f08122dc"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">externalPayment</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will use a external payment method</span>
<span class="n">BigDecimal</span> <span class="n">paymentAmount</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">payAllInvoices</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                          <span class="n">paymentMethodId</span><span class="o">,</span> 
                          <span class="n">externalPayment</span><span class="o">,</span> 
                          <span class="n">paymentAmount</span><span class="o">,</span> 
                          <span class="n">targetDate</span><span class="o">,</span>
                          <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_payment</span>                  <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">account_id</span>       <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">purchased_amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">external_payment</span>  <span class="o">=</span> <span class="kp">true</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">target_date</span>       <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">bulk_create</span><span class="p">(</span><span class="n">external_payment</span><span class="p">,</span>
                            <span class="n">payment_method_id</span><span class="p">,</span>
                            <span class="n">target_date</span><span class="p">,</span>
                            <span class="n">user</span><span class="p">,</span>
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span>
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">pay_all_invoices</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                            <span class="n">created_by</span><span class="p">,</span>
                            <span class="n">api_key</span><span class="p">,</span> 
                            <span class="n">api_secret</span><span class="p">,</span> 
                            <span class="n">external_payment</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                            <span class="n">payment_method_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">target_date</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>false</td>
<td>default payment method</td>
<td>Payment method id</td>
</tr>
<tr>
<td><strong>externalPayment</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true if you use a external payment method.</td>
</tr>
<tr>
<td><strong>paymentAmount</strong></td>
<td>string</td>
<td>false</td>
<td>total balance</td>
<td>Total payment amount</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>Date for which payment should be made</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='account-retrieve-account-invoice-payments'>Retrieve account invoice payments</h3>
<p>Retrieve a list of payments made against invoices for this account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/invoicePayments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/invoicePayments"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e011caa5-ba35-4ac6-81cb-63b4f08122dc"</span><span class="o">);</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">InvoicePayments</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getInvoicePayments</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                       <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span><span class="s1">'NONE'</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_attempts</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span><span class="p">.</span><span class="nf">invoice_payments</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span>
                         <span class="n">with_plugin_info</span><span class="p">,</span>
                         <span class="n">with_attempts</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'110952d7-1b7e-482c-b6bb-103e46794927'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_invoice_payments</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
   <span class="o">{</span>
      <span class="s2">"targetInvoiceId"</span>:<span class="s2">"d1d6e8d8-c476-4b53-badf-c23f78c02c09"</span>,
      <span class="s2">"accountId"</span>:<span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"paymentId"</span>:<span class="s2">"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span>,
      <span class="s2">"paymentNumber"</span>:<span class="s2">"319"</span>,
      <span class="s2">"paymentExternalKey"</span>:<span class="s2">"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span>,
      <span class="s2">"authAmount"</span>:0,
      <span class="s2">"capturedAmount"</span>:0,
      <span class="s2">"purchasedAmount"</span>:50.0,
      <span class="s2">"refundedAmount"</span>:0,
      <span class="s2">"creditedAmount"</span>:0,
      <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
      <span class="s2">"paymentMethodId"</span>:<span class="s2">"6c064894-60cb-4d7e-a679-7b2464522968"</span>,
      <span class="s2">"transactions"</span>:[
         <span class="o">{</span>
            <span class="s2">"transactionId"</span>:<span class="s2">"91c7363c-76b9-48f5-aafa-f098d4470a2a"</span>,
            <span class="s2">"transactionExternalKey"</span>:<span class="s2">"91c7363c-76b9-48f5-aafa-f098d4470a2a"</span>,
            <span class="s2">"paymentId"</span>:<span class="s2">"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span>,
            <span class="s2">"paymentExternalKey"</span>:<span class="s2">"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span>,
            <span class="s2">"transactionType"</span>:<span class="s2">"PURCHASE"</span>,
            <span class="s2">"amount"</span>:50.0,
            <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
            <span class="s2">"effectiveDate"</span>:<span class="s2">"2013-08-01T06:00:01.000Z"</span>,
            <span class="s2">"processedAmount"</span>:50.0,
            <span class="s2">"processedCurrency"</span>:<span class="s2">"USD"</span>,
            <span class="s2">"status"</span>:<span class="s2">"SUCCESS"</span>,
            <span class="s2">"auditLogs"</span>:[]
         <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"auditLogs"</span>:[]
   <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">InvoicePayment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoicePayment</span><span class="err">@</span><span class="mi">40</span><span class="n">d72f3f</span>
    <span class="nl">targetInvoiceId:</span> <span class="n">a84bb73f</span><span class="o">-</span><span class="n">bafc</span><span class="o">-</span><span class="mi">48</span><span class="n">cc</span><span class="o">-</span><span class="mi">880</span><span class="n">f</span><span class="o">-</span><span class="mi">3</span><span class="n">b2fa7d80d58</span>
    <span class="nl">accountId:</span> <span class="n">e011caa5</span><span class="o">-</span><span class="n">ba35</span><span class="o">-</span><span class="mi">4</span><span class="n">ac6</span><span class="o">-</span><span class="mi">81</span><span class="n">cb</span><span class="o">-</span><span class="mi">63</span><span class="n">b4f08122dc</span>
    <span class="nl">paymentId:</span> <span class="mi">66</span><span class="n">d4954d</span><span class="o">-</span><span class="n">f8f3</span><span class="o">-</span><span class="mi">4611</span><span class="o">-</span><span class="mi">903</span><span class="n">e</span><span class="o">-</span><span class="mi">371</span><span class="n">a6e6d076c</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">66</span><span class="n">d4954d</span><span class="o">-</span><span class="n">f8f3</span><span class="o">-</span><span class="mi">4611</span><span class="o">-</span><span class="mi">903</span><span class="n">e</span><span class="o">-</span><span class="mi">371</span><span class="n">a6e6d076c</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mf">249.95</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">9934</span><span class="n">bcc5</span><span class="o">-</span><span class="mi">3</span><span class="n">ea5</span><span class="o">-</span><span class="mi">4</span><span class="n">eb9</span><span class="o">-</span><span class="mi">85</span><span class="n">fb</span><span class="o">-</span><span class="n">bef74225e1de</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">5</span><span class="n">ad9bcb6</span>
        <span class="nl">transactionId:</span> <span class="mi">5</span><span class="n">a7b1d87</span><span class="o">-</span><span class="mi">98</span><span class="n">a1</span><span class="o">-</span><span class="mi">4</span><span class="n">cbb</span><span class="o">-</span><span class="mi">8967</span><span class="o">-</span><span class="n">f53733d032be</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">5</span><span class="n">a7b1d87</span><span class="o">-</span><span class="mi">98</span><span class="n">a1</span><span class="o">-</span><span class="mi">4</span><span class="n">cbb</span><span class="o">-</span><span class="mi">8967</span><span class="o">-</span><span class="n">f53733d032be</span>
        <span class="nl">paymentId:</span> <span class="mi">66</span><span class="n">d4954d</span><span class="o">-</span><span class="n">f8f3</span><span class="o">-</span><span class="mi">4611</span><span class="o">-</span><span class="mi">903</span><span class="n">e</span><span class="o">-</span><span class="mi">371</span><span class="n">a6e6d076c</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">66</span><span class="n">d4954d</span><span class="o">-</span><span class="n">f8f3</span><span class="o">-</span><span class="mi">4611</span><span class="o">-</span><span class="mi">903</span><span class="n">e</span><span class="o">-</span><span class="mi">371</span><span class="n">a6e6d076c</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">04.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">249.95</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"targetInvoiceId"</span><span class="ss">:"d1d6e8d8-c476-4b53-badf-c23f78c02c09"</span><span class="p">,</span>
      <span class="s2">"accountId"</span><span class="ss">:"e967f6ac-e713-4bbd-aa7e-473e6d35674c"</span><span class="p">,</span>
      <span class="s2">"paymentId"</span><span class="ss">:"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span><span class="p">,</span>
      <span class="s2">"paymentNumber"</span><span class="ss">:"319"</span><span class="p">,</span>
      <span class="s2">"paymentExternalKey"</span><span class="ss">:"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span><span class="p">,</span>
      <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
      <span class="s2">"paymentMethodId"</span><span class="ss">:"6c064894-60cb-4d7e-a679-7b2464522968"</span><span class="p">,</span>
      <span class="s2">"transactions"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"transactionId"</span><span class="ss">:"91c7363c-76b9-48f5-aafa-f098d4470a2a"</span><span class="p">,</span>
            <span class="s2">"transactionExternalKey"</span><span class="ss">:"91c7363c-76b9-48f5-aafa-f098d4470a2a"</span><span class="p">,</span>
            <span class="s2">"paymentId"</span><span class="ss">:"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span><span class="p">,</span>
            <span class="s2">"paymentExternalKey"</span><span class="ss">:"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span><span class="p">,</span>
            <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
            <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
            <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
            <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
            <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
            <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'110952d7-1b7e-482c-b6bb-103e46794927'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'00ac58a6-7f0e-4149-9682-7d2110a18fb7'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'00ac58a6-7f0e-4149-9682-7d2110a18fb7'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'4a2a793a-48b0-41f1-ab7e-eff4efda3747'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'291'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'target_invoice_id'</span><span class="p">:</span> <span class="s">'9696fb14-6016-484d-b288-f57854d61193'</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'00ac58a6-7f0e-4149-9682-7d2110a18fb7'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'00ac58a6-7f0e-4149-9682-7d2110a18fb7'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'1063f716-cf90-42fe-aa2c-888fa21cf4bb'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'1063f716-cf90-42fe-aa2c-888fa21cf4bb'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'PURCHASE'</span><span class="p">}]}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of invoice payment objects.</p>
<h3 id='account-retrieve-account-payments'>Retrieve account payments</h3>
<p>Retrieve a list of payments made for this account. Payments are listed independent of any invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/payments"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e0fe95af-7d59-4b70-8252-165e1840410c"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payments</span> <span class="n">payments</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getPaymentsForAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                                     <span class="n">withAttempts</span><span class="o">,</span>
                                                     <span class="n">withPluginInfo</span>
                                                     <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">payments</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_payments_for_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
   <span class="o">{</span>
      <span class="s2">"accountId"</span>:<span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"paymentId"</span>:<span class="s2">"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span>,
      <span class="s2">"paymentNumber"</span>:<span class="s2">"325"</span>,
      <span class="s2">"paymentExternalKey"</span>:<span class="s2">"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span>,
      <span class="s2">"authAmount"</span>:0,
      <span class="s2">"capturedAmount"</span>:0,
      <span class="s2">"purchasedAmount"</span>:50.0,
      <span class="s2">"refundedAmount"</span>:0,
      <span class="s2">"creditedAmount"</span>:0,
      <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
      <span class="s2">"paymentMethodId"</span>:<span class="s2">"6041ffab-ae5f-45d3-bdf8-ce8cbfa5fd5c"</span>,
      <span class="s2">"transactions"</span>:[
         <span class="o">{</span>
            <span class="s2">"transactionId"</span>:<span class="s2">"be9dceca-9c5d-4038-818c-57e6fccfbe92"</span>,
            <span class="s2">"transactionExternalKey"</span>:<span class="s2">"be9dceca-9c5d-4038-818c-57e6fccfbe92"</span>,
            <span class="s2">"paymentId"</span>:<span class="s2">"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span>,
            <span class="s2">"paymentExternalKey"</span>:<span class="s2">"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span>,
            <span class="s2">"transactionType"</span>:<span class="s2">"PURCHASE"</span>,
            <span class="s2">"amount"</span>:50.0,
            <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
            <span class="s2">"effectiveDate"</span>:<span class="s2">"2013-08-01T06:00:02.000Z"</span>,
            <span class="s2">"processedAmount"</span>:50.0,
            <span class="s2">"processedCurrency"</span>:<span class="s2">"USD"</span>,
            <span class="s2">"status"</span>:<span class="s2">"SUCCESS"</span>,
            <span class="s2">"auditLogs"</span>:[

            <span class="o">]</span>
         <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"auditLogs"</span>:[]
   <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="err">@</span><span class="mi">1445</span><span class="n">c8b6</span>
    <span class="nl">accountId:</span> <span class="n">e0fe95af</span><span class="o">-</span><span class="mi">7</span><span class="n">d59</span><span class="o">-</span><span class="mi">4</span><span class="n">b70</span><span class="o">-</span><span class="mi">8252</span><span class="o">-</span><span class="mi">165</span><span class="n">e1840410c</span>
    <span class="nl">paymentId:</span> <span class="n">aef920ce</span><span class="o">-</span><span class="mi">6887</span><span class="o">-</span><span class="mi">4</span><span class="n">a00</span><span class="o">-</span><span class="mi">8</span><span class="n">d0a</span><span class="o">-</span><span class="mi">52</span><span class="n">cd6120517a</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="n">aef920ce</span><span class="o">-</span><span class="mi">6887</span><span class="o">-</span><span class="mi">4</span><span class="n">a00</span><span class="o">-</span><span class="mi">8</span><span class="n">d0a</span><span class="o">-</span><span class="mi">52</span><span class="n">cd6120517a</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mf">249.95</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">9782</span><span class="n">b80d</span><span class="o">-</span><span class="mi">6</span><span class="n">a0d</span><span class="o">-</span><span class="mi">4051</span><span class="o">-</span><span class="mi">9</span><span class="n">d05</span><span class="o">-</span><span class="n">b3fcd81c19e7</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">40873</span><span class="n">e28</span>
        <span class="nl">transactionId:</span> <span class="n">d04e8592</span><span class="o">-</span><span class="mi">8638</span><span class="o">-</span><span class="mi">4768</span><span class="o">-</span><span class="mi">9</span><span class="n">ac0</span><span class="o">-</span><span class="mi">87</span><span class="n">b62a3cd516</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">d04e8592</span><span class="o">-</span><span class="mi">8638</span><span class="o">-</span><span class="mi">4768</span><span class="o">-</span><span class="mi">9</span><span class="n">ac0</span><span class="o">-</span><span class="mi">87</span><span class="n">b62a3cd516</span>
        <span class="nl">paymentId:</span> <span class="n">aef920ce</span><span class="o">-</span><span class="mi">6887</span><span class="o">-</span><span class="mi">4</span><span class="n">a00</span><span class="o">-</span><span class="mi">8</span><span class="n">d0a</span><span class="o">-</span><span class="mi">52</span><span class="n">cd6120517a</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">aef920ce</span><span class="o">-</span><span class="mi">6887</span><span class="o">-</span><span class="mi">4</span><span class="n">a00</span><span class="o">-</span><span class="mi">8</span><span class="n">d0a</span><span class="o">-</span><span class="mi">52</span><span class="n">cd6120517a</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">04.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">249.95</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"accountId"</span><span class="ss">:"6577439c-b783-4c60-82b2-c23e7b46eb97"</span><span class="p">,</span>
      <span class="s2">"paymentId"</span><span class="ss">:"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span><span class="p">,</span>
      <span class="s2">"paymentNumber"</span><span class="ss">:"325"</span><span class="p">,</span>
      <span class="s2">"paymentExternalKey"</span><span class="ss">:"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span><span class="p">,</span>
      <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
      <span class="s2">"paymentMethodId"</span><span class="ss">:"6041ffab-ae5f-45d3-bdf8-ce8cbfa5fd5c"</span><span class="p">,</span>
      <span class="s2">"transactions"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"transactionId"</span><span class="ss">:"be9dceca-9c5d-4038-818c-57e6fccfbe92"</span><span class="p">,</span>
            <span class="s2">"transactionExternalKey"</span><span class="ss">:"be9dceca-9c5d-4038-818c-57e6fccfbe92"</span><span class="p">,</span>
            <span class="s2">"paymentId"</span><span class="ss">:"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span><span class="p">,</span>
            <span class="s2">"paymentExternalKey"</span><span class="ss">:"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span><span class="p">,</span>
            <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
            <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
            <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
            <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
            <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
            <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="p">:[</span>

            <span class="p">]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"auditLogs"</span><span class="p">:[</span>

      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'cf34a5e5-b933-4efd-8e6d-502e8ae6be81'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'cf34a5e5-b933-4efd-8e6d-502e8ae6be81'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'58065d90-6fb1-40ff-bbcb-aa21b45c76c0'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'294'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'cf34a5e5-b933-4efd-8e6d-502e8ae6be81'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'cf34a5e5-b933-4efd-8e6d-502e8ae6be81'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'d1d52998-dc41-4f03-93e9-7f9a59445bb7'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'d1d52998-dc41-4f03-93e9-7f9a59445bb7'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'PURCHASE'</span><span class="p">}]}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment objects.</p>
<h3 id='account-trigger-a-payment-authorization-purchase-or-credit'>Trigger a payment (authorization, purchase or credit)</h3>
<p>This endpoint is part of the raw payment APIs, unreleated to subscriptions and invoices. It simply triggers
a payment transaction against a particular payment gateway through the Kill Bill core and through the plugin
communicating with the payment gateway. The transaction could be an authorization, a purchase, or a credit.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "transactionType": "AUTHORIZE", "amount": 0}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/payments?paymentMethodId=c02fa9b0-ae95-42ae-9010-bc11cb160947"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f4087a76-9f8a-4893-abbf-c5bb69975d1b"</span><span class="o">);</span>

<span class="n">PaymentTransaction</span> <span class="n">authTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">account</span><span class="o">.</span><span class="na">getCurrency</span><span class="o">());</span>

<span class="c1">// TransactionType could be 'AUTHORIZE', 'PURCHASE' or 'CREDIT'</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="n">TransactionType</span><span class="o">.</span><span class="na">AUTHORIZE</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1d55ed5f-deea-4109-98b0-beb13a242f7c"</span><span class="o">);</span>
<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">processPayment</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                            <span class="n">authTransaction</span><span class="o">,</span> 
                                            <span class="n">paymentMethodId</span><span class="o">,</span> 
                                            <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span>
                                            <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">payment_method_id</span> <span class="o">=</span> <span class="n">payment_method</span><span class="p">.</span><span class="nf">payment_method_id</span>
<span class="n">refresh_options</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="c1"># Authorization</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">auth</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">account_id</span><span class="p">,</span>
                 <span class="n">payment_method_id</span><span class="p">,</span> 
                 <span class="n">user</span><span class="p">,</span> 
                 <span class="n">reason</span><span class="p">,</span> 
                 <span class="n">comment</span><span class="p">,</span> 
                 <span class="n">options</span><span class="p">,</span> 
                 <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Purchase</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">purchase</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">account_id</span><span class="p">,</span>
                     <span class="n">payment_method_id</span><span class="p">,</span> 
                     <span class="n">user</span><span class="p">,</span> 
                     <span class="n">reason</span><span class="p">,</span> 
                     <span class="n">comment</span><span class="p">,</span> 
                     <span class="n">options</span><span class="p">,</span> 
                     <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Credit</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">credit</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">account_id</span><span class="p">,</span>
                   <span class="n">payment_method_id</span><span class="p">,</span> 
                   <span class="n">user</span><span class="p">,</span> 
                   <span class="n">reason</span><span class="p">,</span> 
                   <span class="n">comment</span><span class="p">,</span> 
                   <span class="n">options</span><span class="p">,</span> 
                   <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'80c7b386-97b2-424c-bb4e-0017f92bc6eb'</span>

<span class="c"># transaction_type could be 'AUTHORIZE', 'PURCHASE' or 'CREDIT'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">transaction_type</span><span class="o">=</span><span class="s">'AUTHORIZE'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">process_payment</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                           <span class="n">body</span><span class="p">,</span> 
                           <span class="n">created_by</span><span class="p">,</span> 
                           <span class="n">api_key</span><span class="p">,</span> 
                           <span class="n">api_secret</span><span class="p">,</span> 
                           <span class="n">payment_method_id</span><span class="o">=</span><span class="n">payment_method_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/payments/7c01a554-7b39-42dc-959f-3111724733d0
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="err">@</span><span class="mi">6816</span><span class="n">b5c8</span>
    <span class="nl">accountId:</span> <span class="n">f4087a76</span><span class="o">-</span><span class="mi">9</span><span class="n">f8a</span><span class="o">-</span><span class="mi">4893</span><span class="o">-</span><span class="n">abbf</span><span class="o">-</span><span class="n">c5bb69975d1b</span>
    <span class="nl">paymentId:</span> <span class="mi">0</span><span class="n">ecd1fdc</span><span class="o">-</span><span class="mi">6</span><span class="n">c3e</span><span class="o">-</span><span class="mi">4</span><span class="n">e06</span><span class="o">-</span><span class="n">b36f</span><span class="o">-</span><span class="mi">9833</span><span class="n">f24ca607</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">0</span><span class="n">ecd1fdc</span><span class="o">-</span><span class="mi">6</span><span class="n">c3e</span><span class="o">-</span><span class="mi">4</span><span class="n">e06</span><span class="o">-</span><span class="n">b36f</span><span class="o">-</span><span class="mi">9833</span><span class="n">f24ca607</span>
    <span class="nl">authAmount:</span> <span class="mf">1.00</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mi">0</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">1</span><span class="n">d55ed5f</span><span class="o">-</span><span class="n">deea</span><span class="o">-</span><span class="mi">4109</span><span class="o">-</span><span class="mi">98</span><span class="n">b0</span><span class="o">-</span><span class="n">beb13a242f7c</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">29</span><span class="n">ef3d69</span>
        <span class="nl">transactionId:</span> <span class="mi">3</span><span class="n">d40bc43</span><span class="o">-</span><span class="mi">72</span><span class="n">ef</span><span class="o">-</span><span class="mi">4</span><span class="n">aa6</span><span class="o">-</span><span class="mi">8</span><span class="n">b3c</span><span class="o">-</span><span class="n">c8f1225a0971</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">3</span><span class="n">d40bc43</span><span class="o">-</span><span class="mi">72</span><span class="n">ef</span><span class="o">-</span><span class="mi">4</span><span class="n">aa6</span><span class="o">-</span><span class="mi">8</span><span class="n">b3c</span><span class="o">-</span><span class="n">c8f1225a0971</span>
        <span class="nl">paymentId:</span> <span class="mi">0</span><span class="n">ecd1fdc</span><span class="o">-</span><span class="mi">6</span><span class="n">c3e</span><span class="o">-</span><span class="mi">4</span><span class="n">e06</span><span class="o">-</span><span class="n">b36f</span><span class="o">-</span><span class="mi">9833</span><span class="n">f24ca607</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">0</span><span class="n">ecd1fdc</span><span class="o">-</span><span class="mi">6</span><span class="n">c3e</span><span class="o">-</span><span class="mi">4</span><span class="n">e06</span><span class="o">-</span><span class="n">b36f</span><span class="o">-</span><span class="mi">9833</span><span class="n">f24ca607</span>
        <span class="nl">transactionType:</span> <span class="n">AUTHORIZE</span>
        <span class="nl">amount:</span> <span class="mf">1.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mo">04</span><span class="nl">T03:</span><span class="mo">05</span><span class="o">:</span><span class="mf">35.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">1.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"2ad4cae9-c44a-43f9-b3f8-2e3e4e097838"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"b4c5b34f-cd3e-4269-9f71-55daf8edde60"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"333"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"b4c5b34f-cd3e-4269-9f71-55daf8edde60"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"132d59c0-8c28-4115-947d-f57d430bc458"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"e038a04e-5304-4570-ab89-b7f04e8f496c"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"e038a04e-5304-4570-ab89-b7f04e8f496c"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"b4c5b34f-cd3e-4269-9f71-55daf8edde60"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"b4c5b34f-cd3e-4269-9f71-55daf8edde60"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"AUTHORIZE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body is a JSON string representing the payment transaction. See section <a href="#payment-transaction">Payment Transaction</a> for details on payment transactions.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>false</td>
<td>default payment method</td>
<td>payment method ID to use, if not default method</td>
</tr>
<tr>
<td><strong>controlPluginName</strong></td>
<td>array of strings</td>
<td>false</td>
<td>omit</td>
<td>list of control plugins, if any</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>omit</td>
<td>list of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a payment object including the new transaction.</p>
<h3 id='account-trigger-a-payment-authorization-purchase-or-credit-using-the-account-external-key'>Trigger a payment (authorization, purchase or credit) using the account external key</h3>
<p>This endpoint performs the same actions as the previous one, but the account is identified by its external key. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "transactionType": "AUTHORIZE", "amount": 0}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/payments?externalKey=2ad52f53-85ae-408a-9879-32a7e59dd03d&amp;paymentMethodId=c02fa9b0-ae95-42ae-9010-bc11cb160947"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s1">'132d59c0-8c28-4115-947d-f57d430bc458'</span>
<span class="n">refresh_options</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="c1"># Authorization</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">auth_by_external_key</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">external_key</span><span class="p">,</span>
                                 <span class="n">payment_method_id</span><span class="p">,</span> 
                                 <span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span> 
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">,</span> 
                                 <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Purchase</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">purchase_by_external_key</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">external_key</span><span class="p">,</span>
                                     <span class="n">payment_method_id</span><span class="p">,</span> 
                                     <span class="n">user</span><span class="p">,</span> 
                                     <span class="n">reason</span><span class="p">,</span> 
                                     <span class="n">comment</span><span class="p">,</span> 
                                     <span class="n">options</span><span class="p">,</span> 
                                     <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Credit</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">credit_by_external_key</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">external_key</span><span class="p">,</span>
                                   <span class="n">payment_method_id</span><span class="p">,</span> 
                                   <span class="n">user</span><span class="p">,</span> 
                                   <span class="n">reason</span><span class="p">,</span> 
                                   <span class="n">comment</span><span class="p">,</span> 
                                   <span class="n">options</span><span class="p">,</span> 
                                   <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'80c7b386-97b2-424c-bb4e-0017f92bc6eb'</span>

<span class="c"># transaction_type could be 'AUTHORIZE', 'PURCHASE' or 'CREDIT'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">transaction_type</span><span class="o">=</span><span class="s">'AUTHORIZE'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">process_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                           <span class="n">external_key</span><span class="p">,</span>
                                           <span class="n">created_by</span><span class="p">,</span>
                                           <span class="n">api_key</span><span class="p">,</span>
                                           <span class="n">api_secret</span><span class="p">)</span>
                                           <span class="n">payment_method_id</span><span class="o">=</span><span class="n">payment_method_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/payments/b4c5b34f-cd3e-4269-9f71-55daf8edde60
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"2ad4cae9-c44a-43f9-b3f8-2e3e4e097838"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"b4c5b34f-cd3e-4269-9f71-55daf8edde60"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"333"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"b4c5b34f-cd3e-4269-9f71-55daf8edde60"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"132d59c0-8c28-4115-947d-f57d430bc458"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"e038a04e-5304-4570-ab89-b7f04e8f496c"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"e038a04e-5304-4570-ab89-b7f04e8f496c"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"b4c5b34f-cd3e-4269-9f71-55daf8edde60"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"b4c5b34f-cd3e-4269-9f71-55daf8edde60"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"AUTHORIZE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body is a JSON string representing the payment transaction. See section <a href="#payment-transaction">Payment Transaction</a> for details on payment transactions.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>the account external key</td>
</tr>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>false</td>
<td>default payment method</td>
<td>payment method ID to use, if not default method</td>
</tr>
<tr>
<td><strong>controlPluginName</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of control plugins, if any</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a payment object including the new transaction.</p>
<h2 id='account-payment-method'>Payment Method</h2>
<p>These endpoints allow you to manage the payment methods for an account. See section <a href="#payment-method">Payment Method</a> for details on payment methods.</p>
<h3 id='account-add-a-payment-method'>Add a payment method</h3>
<p>Add a payment method for a given <code>Account</code>. The payment method is represented by a plugin that must already be registered with KillBill.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/paymentMethods</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "isDefault": false, "pluginName": "__EXTERNAL_PAYMENT__"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/8785164f-b5d7-4da1-9495-33f5105e8d80/paymentMethods"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d751dd57-7644-469a-9e69-f98d36d86f67"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
<span class="n">Boolean</span> <span class="n">isDefault</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will set this new payment method as default</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"__EXTERNAL_PAYMENT__"</span><span class="o">;</span> 
<span class="n">PaymentMethodPluginDetail</span> <span class="n">info</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentMethodPluginDetail</span><span class="o">();</span>
<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">PaymentMethod</span> <span class="n">paymentMethod</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentMethod</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                <span class="n">externalKey</span><span class="o">,</span> 
                                                <span class="n">accountId</span><span class="o">,</span> 
                                                <span class="n">isDefault</span><span class="o">,</span> 
                                                <span class="n">pluginName</span><span class="o">,</span> 
                                                <span class="n">info</span><span class="o">,</span> 
                                                <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">);</span>
<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">PaymentMethod</span> <span class="n">paymentMethodPP</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">createPaymentMethod</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                               <span class="n">paymentMethod</span><span class="o">,</span> 
                                                               <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                               <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">pm</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">new</span>
<span class="n">pm</span><span class="p">.</span><span class="nf">account_id</span>  <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">pm</span><span class="p">.</span><span class="nf">plugin_name</span> <span class="o">=</span> <span class="s1">'__EXTERNAL_PAYMENT__'</span>
<span class="n">pm</span><span class="p">.</span><span class="nf">plugin_info</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">is_default</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">pm</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">is_default</span><span class="p">,</span> 
          <span class="n">user</span><span class="p">,</span> 
          <span class="n">reason</span><span class="p">,</span> 
          <span class="n">comment</span><span class="p">,</span>
          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'059ecfb8-6b4d-4a89-9537-63a687e6cf10'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentMethod</span><span class="p">(</span><span class="n">plugin_name</span><span class="o">=</span><span class="s">'__EXTERNAL_PAYMENT__'</span><span class="p">,</span> <span class="n">plugin_info</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">create_payment_method</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                 <span class="n">body</span><span class="p">,</span> 
                                 <span class="n">created_by</span><span class="p">,</span> 
                                 <span class="n">api_key</span><span class="p">,</span> 
                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/paymentMethods/064cd61b-557d-48ba-8605-8d22912c7dfb
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">PaymentMethod</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentMethod</span><span class="nd">@a820eeea</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">538</span><span class="n">c5a98</span><span class="o">-</span><span class="mi">879</span><span class="n">b</span><span class="o">-</span><span class="mi">4735</span><span class="o">-</span><span class="mi">88</span><span class="n">df</span><span class="o">-</span><span class="n">e58f7a4bf874</span>
    <span class="nl">externalKey:</span> <span class="n">a85a3fbe</span><span class="o">-</span><span class="mi">30</span><span class="n">e8</span><span class="o">-</span><span class="mi">457</span><span class="n">d</span><span class="o">-</span><span class="mi">8</span><span class="n">a5a</span><span class="o">-</span><span class="mi">55</span><span class="n">e16bcd730b</span>
    <span class="nl">accountId:</span> <span class="n">d751dd57</span><span class="o">-</span><span class="mi">7644</span><span class="o">-</span><span class="mi">469</span><span class="n">a</span><span class="o">-</span><span class="mi">9</span><span class="n">e69</span><span class="o">-</span><span class="n">f98d36d86f67</span>
    <span class="nl">isDefault:</span> <span class="kc">false</span>
    <span class="nl">pluginName:</span> <span class="n">__EXTERNAL_PAYMENT__</span>
    <span class="nl">pluginInfo:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"059ecfb8-6b4d-4a89-9537-63a687e6cf10"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"unknown"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"fa488b6e-c52a-450a-94bf-6607ae8b484f"</span><span class="p">,</span>
   <span class="s2">"isDefault"</span><span class="ss">:true</span><span class="p">,</span>
   <span class="s2">"pluginName"</span><span class="ss">:"__EXTERNAL_PAYMENT__"</span><span class="p">,</span>
   <span class="s2">"pluginInfo"</span><span class="p">:{</span>
      <span class="s2">"properties"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>isDefault</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to set new payment as default.</td>
</tr>
<tr>
<td><strong>payAllUnpaidInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to pay all unpaid invoices.</td>
</tr>
<tr>
<td><strong>controlPluginName</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of control plugins, if any</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and a payment method object.</p>
<h3 id='account-retrieve-account-payment-methods'>Retrieve account payment methods</h3>
<p>This API retrieves a list of the payment methods that are associated with this account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/paymentMethods</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/paymentMethods"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"faf239a5-456a-4eb9-aef9-8d2254ef57dc"</span><span class="o">);</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">PaymentMethod</span><span class="o">&gt;</span> <span class="n">paymentMethods</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getPaymentMethodsForAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                            <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">find_all_by_account_id</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                      <span class="n">with_plugin_info</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_payment_methods_for_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"paymentMethodId"</span>: <span class="s2">"f835c556-0694-4883-b4c1-d1b6e308409b"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"unknown"</span>,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"isDefault"</span>: <span class="nb">false</span>,
    <span class="s2">"pluginName"</span>: <span class="s2">"__EXTERNAL_PAYMENT__"</span>,
    <span class="s2">"pluginInfo"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">PaymentMethod</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentMethod</span><span class="err">@</span><span class="mi">5528</span><span class="n">b1ed</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">1</span><span class="n">a4e5b9a</span><span class="o">-</span><span class="mi">5280</span><span class="o">-</span><span class="mi">4624</span><span class="o">-</span><span class="n">b2fc</span><span class="o">-</span><span class="mi">2</span><span class="n">ea6d047d7fa</span>
    <span class="nl">externalKey:</span> <span class="n">eed36074</span><span class="o">-</span><span class="n">d493</span><span class="o">-</span><span class="mi">4335</span><span class="o">-</span><span class="mi">839</span><span class="n">e</span><span class="o">-</span><span class="mi">2</span><span class="n">adca4cb4187</span>
    <span class="nl">accountId:</span> <span class="n">faf239a5</span><span class="o">-</span><span class="mi">456</span><span class="n">a</span><span class="o">-</span><span class="mi">4</span><span class="n">eb9</span><span class="o">-</span><span class="n">aef9</span><span class="o">-</span><span class="mi">8</span><span class="n">d2254ef57dc</span>
    <span class="nl">isDefault:</span> <span class="kc">true</span>
    <span class="nl">pluginName:</span> <span class="n">__EXTERNAL_PAYMENT__</span>
    <span class="nl">pluginInfo:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"059ecfb8-6b4d-4a89-9537-63a687e6cf10"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"unknown"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"fa488b6e-c52a-450a-94bf-6607ae8b484f"</span><span class="p">,</span>
   <span class="s2">"isDefault"</span><span class="ss">:true</span><span class="p">,</span>
   <span class="s2">"pluginName"</span><span class="ss">:"__EXTERNAL_PAYMENT__"</span><span class="p">,</span>
   <span class="s2">"pluginInfo"</span><span class="p">:{</span>
      <span class="s2">"properties"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'unknown'</span><span class="p">,</span>
 <span class="s">'is_default'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'f49b513b-f045-46d8-9886-7f28df87e2a6'</span><span class="p">,</span>
 <span class="s">'plugin_info'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'plugin_name'</span><span class="p">:</span> <span class="s">'__EXTERNAL_PAYMENT__'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include plugin info.</td>
</tr>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include deleted payment methods</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of plugin properties, if any</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment method objects.</p>
<h3 id='account-set-the-default-payment-method'>Set the default payment method</h3>
<p>This API sets an existing payment method to be the default payment method.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/paymentMethods/{paymentMethodId}/setDefault</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/paymentMethods/f835c556-0694-4883-b4c1-d1b6e308409b/setDefault"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"faf239a5-456a-4eb9-aef9-8d2254ef57dc"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"faf239a5-456a-4eb9-aef9-8d2254ef57dc"</span><span class="o">);</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">setDefaultPaymentMethod</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                   <span class="n">paymentMethodId</span><span class="o">,</span> 
                                   <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">set_default</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span>
                                                 <span class="n">account_id</span><span class="p">,</span>
                                                 <span class="n">user</span><span class="p">,</span>
                                                 <span class="n">reason</span><span class="p">,</span>
                                                 <span class="n">comment</span><span class="p">,</span>
                                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4f124c0d-cee7-49b1-a181-3b0738c685d7'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">set_default_payment_method</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                      <span class="n">payment_method_id</span><span class="p">,</span> 
                                      <span class="n">created_by</span><span class="p">,</span> 
                                      <span class="n">api_key</span><span class="p">,</span> 
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payAllUnpaidInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to pay all unpaid invoices</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>List of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='account-refresh-account-payment-methods'>Refresh account payment methods</h3>
<p>This endpoint is for a rare use case where information for a particular payment method is stored inside the third party gateway, and both Kill Bill core and its payment plugin need to have their view updated.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/paymentMethods/refresh</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/paymentMethods/refresh"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"faf239a5-456a-4eb9-aef9-8d2254ef57dc"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"__EXTERNAL_PAYMENT__"</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">refreshPaymentMethods</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                 <span class="n">pluginName</span><span class="o">,</span> 
                                 <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">refresh</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                             <span class="n">user</span><span class="p">,</span> 
                                             <span class="n">reason</span><span class="p">,</span> 
                                             <span class="n">comment</span><span class="p">,</span> 
                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">refresh_payment_methods</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                   <span class="n">created_by</span><span class="p">,</span>
                                   <span class="n">api_key</span><span class="p">,</span>
                                   <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>PluginName</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>List of plugins, if any</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>List of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-overdue'>Overdue</h2>
<p>The system can be configured to move an <code>Account</code> through various <a href="http://docs.killbill.io/latest/userguide_subscription.html#components-overdue">overdue</a> (a.k.a. dunning) states when invoices are left unpaid. </p>
<h3 id='account-retrieve-overdue-state-for-account'>Retrieve overdue state for account</h3>
<p>Retrieve the current overdue/dunning state for an <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/overdue</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/overdue"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d3a82897-ae72-4a2e-9bca-e3c1fe087f84"</span><span class="o">);</span>

<span class="n">OverdueState</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getOverdueAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">overdue</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_overdue_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"name"</span>: <span class="s2">"__KILLBILL__CLEAR__OVERDUE_STATE__"</span>,
  <span class="s2">"externalMessage"</span>: <span class="s2">""</span>,
  <span class="s2">"daysBetweenPaymentRetries"</span>: <span class="o">[</span>
    8,
    8,
    8
  <span class="o">]</span>,
  <span class="s2">"isDisableEntitlementAndChangesBlocked"</span>: <span class="nb">false</span>,
  <span class="s2">"isBlockChanges"</span>: <span class="nb">false</span>,
  <span class="s2">"isClearState"</span>: <span class="nb">true</span>,
  <span class="s2">"reevaluationIntervalDays"</span>: null
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">OverdueState</span> <span class="o">{</span>
    <span class="nl">name:</span> <span class="n">OD3</span>
    <span class="nl">externalMessage:</span> <span class="n">Reached</span> <span class="n">OD3</span>
    <span class="nl">daysBetweenPaymentRetries:</span> <span class="o">[</span><span class="mi">8</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">8</span><span class="o">]</span>
    <span class="nl">isDisableEntitlementAndChangesBlocked:</span> <span class="kc">true</span>
    <span class="nl">isBlockChanges:</span> <span class="kc">true</span>
    <span class="nl">isClearState:</span> <span class="kc">false</span>
    <span class="nl">reevaluationIntervalDays:</span> <span class="mi">5</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"name"</span><span class="ss">:"__KILLBILL__CLEAR__OVERDUE_STATE__"</span><span class="p">,</span>
   <span class="s2">"externalMessage"</span><span class="ss">:""</span><span class="p">,</span>
   <span class="s2">"daysBetweenPaymentRetries"</span><span class="p">:[</span>
      <span class="mi">8</span><span class="p">,</span>
      <span class="mi">8</span><span class="p">,</span>
      <span class="mi">8</span>
   <span class="p">],</span>
   <span class="s2">"disableEntitlementAndChangesBlocked"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"blockChanges"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"clearState"</span><span class="ss">:true</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span>
 <span class="s">'days_between_payment_retries'</span><span class="p">:</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
 <span class="s">'external_message'</span><span class="p">:</span> <span class="s">''</span><span class="p">,</span>
 <span class="s">'is_block_changes'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'is_clear_state'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
 <span class="s">'is_disable_entitlement_and_changes_blocked'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'__KILLBILL__CLEAR__OVERDUE_STATE__'</span><span class="p">,</span>
 <span class="s">'reevaluation_interval_days'</span><span class="p">:</span> <span class="bp">None</span>
<span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an overdue state object.</p>
<h2 id='account-blocking-state'>Blocking State</h2>
<p>As part of the entitlement features, Kill Bill provides an abstraction to include <code>BlockingState</code> events into the per <code>Account</code> event stream. The main idea is to allow billing to be modified, such as by pausing a specific subscription or all subscriptions, and to allow modification of the entitlement state, such as by disabling the service associated with a given subscription. The <a href="http://docs.killbill.io/latest/entitlement_subsystem.html">entitlement internal documentation</a> provides some overview of the mechanism. Blocking states are mostly manipulated from inside Kill Bill core, but the functionality is exposed through the API, with the caveat that it is an advanced feature and can lead to unintented behavior if not used properly.</p>

<p>Note that the term <code>BlockingState</code> seems to indicate that something will be blocked, and this can certainly be the case, but not necessarily; actually the attributes
<code>isBlockChange</code>, <code>isBlockEntitlement</code>, <code>isBlockBilling</code> will drive this behavior. These flags are always considered on a per blocking state <code>service</code>, regardless of the state name. For instance, consider the following two scenarios:</p>

<ul>
<li>Scenario 1

<ul>
<li>T1: Service A, State S1, isBlockBilling=true, isBlockEntitlement=false</li>
<li>T2: Service A, State S1, isBlockBilling=false, isBlockEntitlement=true</li>
<li>T3: Service A, State S2, isBlockBilling=false, isBlockEntitlement=false</li>
<li>T4: Service A, State S2, isBlockBilling=false, isBlockEntitlement=false</li>
</ul></li>
<li>Scenario 2

<ul>
<li>T1: Service A, State S1, isBlockBilling=true, isBlockEntitlement=false</li>
<li>T2: Service B, State S1, isBlockBilling=false, isBlockEntitlement=true</li>
<li>T3: Service A, State S2, isBlockBilling=false, isBlockEntitlement=false</li>
<li>T4: Service B, State S2, isBlockBilling=false, isBlockEntitlement=false</li>
</ul></li>
</ul>

<p>In Scenario 1, billing is blocked between T1 and T2, while entitlement is blocked between T2 and T3. In Scenario 2 however, billing is blocked between T1 and T3, while entitlement is blocked between T2 and T4.</p>
<h3 id='account-block-an-account'>Block an account</h3>
<p>Add a <code>BlockingState</code> event for this account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/block</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "stateName": "STATE1", "service": "ServiceStateService", "isBlockChange": false, "isBlockEntitlement": false, "isBlockBilling": false, "effectiveDate": "2018-07-17T21:17:28.842Z", "type": "ACCOUNT" }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/10483c3a-3394-4667-8519-0d849e9a8ec2/block"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">BlockingState</span> <span class="n">blockingState</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BlockingState</span><span class="o">();</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setStateName</span><span class="o">(</span><span class="s">"STATE1"</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setService</span><span class="o">(</span><span class="s">"ServiceStateService"</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockChange</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockBilling</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockEntitlement</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-08-01"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="n">ImmutableMap</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">BlockingStates</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">addAccountBlockingState</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                                           <span class="n">blockingState</span><span class="o">,</span>
                                                           <span class="n">requestedDate</span><span class="o">,</span>
                                                           <span class="n">pluginProperty</span><span class="o">,</span>
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">state_name</span> <span class="o">=</span> <span class="s2">"STATE1"</span>
<span class="n">service</span> <span class="o">=</span> <span class="s2">"ServiceStateService"</span>
<span class="n">block_change</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_entitlement</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_billing</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="n">account</span><span class="p">.</span><span class="nf">set_blocking_state</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span>
                           <span class="n">service</span><span class="p">,</span>
                           <span class="n">block_change</span><span class="p">,</span> 
                           <span class="n">block_entitlement</span><span class="p">,</span>
                           <span class="n">block_billing</span><span class="p">,</span> 
                           <span class="n">requested_date</span><span class="p">,</span>
                           <span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span> 
                           <span class="n">comment</span><span class="p">,</span>
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">BlockingState</span><span class="p">(</span><span class="n">state_name</span><span class="o">=</span><span class="s">'STATE1'</span><span class="p">,</span>
                     <span class="n">service</span><span class="o">=</span><span class="s">'ServiceStateService'</span><span class="p">,</span>
                     <span class="n">is_block_change</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">is_block_entitlement</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">is_block_billing</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">add_account_blocking_state</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                      <span class="n">body</span><span class="p">,</span> 
                                      <span class="n">created_by</span><span class="p">,</span> 
                                      <span class="n">api_key</span><span class="p">,</span> 
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/accounts/10483c3a-3394-4667-8519-0d849e9a8ec2/block?blockingStateTypes<span class="o">=</span>ACCOUNT
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="o">[</span><span class="kd">class</span> <span class="nc">BlockingState</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BlockingState</span><span class="nd">@be808444</span>
    <span class="nl">blockedId:</span> <span class="mi">864</span><span class="n">c1418</span><span class="o">-</span><span class="n">e768</span><span class="o">-</span><span class="mi">4</span><span class="n">cd5</span><span class="o">-</span><span class="n">a0db</span><span class="o">-</span><span class="mi">67537144</span><span class="n">b685</span>
    <span class="nl">stateName:</span> <span class="n">STATE1</span>
    <span class="nl">service:</span> <span class="n">ServiceStateService</span>
    <span class="nl">isBlockChange:</span> <span class="kc">false</span>
    <span class="nl">isBlockEntitlement:</span> <span class="kc">false</span>
    <span class="nl">isBlockBilling:</span> <span class="kc">false</span>
    <span class="nl">effectiveDate:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mo">01</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">01.000</span><span class="n">Z</span>
    <span class="nl">type:</span> <span class="n">ACCOUNT</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}]</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing the blocking state object to be added. For details on this resource see <a href="#blocking-state">blocking state</a>.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>block immediately</td>
<td>Requested date to block an account</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>List of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and a blocking state object.</p>
<h3 id='account-retrieve-blocking-states-for-account'>Retrieve blocking states for account</h3>
<p>Retrieves the <code>BlockingState</code> associated with a given resource.
<code>BlockingState</code> can be set at the <code>Account</code>, <code>Bundle</code> or <code>Subscription</code> level.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/block</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/10483c3a-3394-4667-8519-0d849e9a8ec2/block?blockingStateTypes=ACCOUNT"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ee6835f0-8347-42d3-958c-9a939383ba28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">BlockingStateType</span><span class="o">&gt;</span> <span class="n">blockingStateTypes</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">BlockingStateType</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">BlockingStateType</span><span class="o">.</span><span class="na">SUBSCRIPTION_BUNDLE</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">blockingStateSvcs</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="s">"service"</span><span class="o">);</span>

<span class="n">BlockingStates</span> <span class="n">blockingStates</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getBlockingStates</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                             <span class="n">blockingStateTypes</span><span class="o">,</span> 
                                                             <span class="n">blockingStateSvcs</span><span class="o">,</span> 
                                                             <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">blocking_state_types</span> <span class="o">=</span> <span class="s1">'ACCOUNT'</span>
<span class="n">blocking_state_svcs</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">blocking_states</span><span class="p">(</span><span class="n">blocking_state_types</span><span class="p">,</span>
                        <span class="n">blocking_state_svcs</span><span class="p">,</span> 
                        <span class="n">audit</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_blocking_states</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"blockedId"</span>: <span class="s2">"10483c3a-3394-4667-8519-0d849e9a8ec2"</span>,
    <span class="s2">"stateName"</span>: <span class="s2">"STATE1"</span>,
    <span class="s2">"service"</span>: <span class="s2">"ServiceStateService"</span>,
    <span class="s2">"isBlockChange"</span>: <span class="nb">false</span>,
    <span class="s2">"isBlockEntitlement"</span>: <span class="nb">false</span>,
    <span class="s2">"isBlockBilling"</span>: <span class="nb">false</span>,
    <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18T14:45:37.000Z"</span>,
    <span class="s2">"type"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">BlockingState</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BlockingState</span><span class="err">@</span><span class="mi">95047</span><span class="n">f38</span>
    <span class="nl">blockedId:</span> <span class="n">e3d9aa57</span><span class="o">-</span><span class="mi">1</span><span class="n">c1e</span><span class="o">-</span><span class="mi">4206</span><span class="o">-</span><span class="n">a44a</span><span class="o">-</span><span class="n">d87e69d5bf2a</span>
    <span class="nl">stateName:</span> <span class="n">block</span>
    <span class="nl">service:</span> <span class="n">service</span>
    <span class="nl">isBlockChange:</span> <span class="kc">false</span>
    <span class="nl">isBlockEntitlement:</span> <span class="kc">true</span>
    <span class="nl">isBlockBilling:</span> <span class="kc">true</span>
    <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">42.000</span><span class="n">Z</span>
    <span class="nl">type:</span> <span class="n">SUBSCRIPTION_BUNDLE</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">45.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">BLOCKING_STATES</span>
        <span class="nl">objectId:</span> <span class="mi">8</span><span class="n">fc09849</span><span class="o">-</span><span class="n">bd98</span><span class="o">-</span><span class="mi">417</span><span class="n">f</span><span class="o">-</span><span class="n">a0ab</span><span class="o">-</span><span class="mi">943</span><span class="n">f9ce8e15d</span>
        <span class="nl">changedBy:</span> <span class="n">Toto</span>
        <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
        <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
        <span class="nl">userToken:</span> <span class="mi">46</span><span class="n">d56616</span><span class="o">-</span><span class="mi">1545</span><span class="o">-</span><span class="mi">424</span><span class="n">a</span><span class="o">-</span><span class="mi">882</span><span class="n">b</span><span class="o">-</span><span class="n">b158442534ff</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"blockedId"</span><span class="ss">:"d13b2272-d182-499c-a393-8efed203ae7d"</span><span class="p">,</span>
      <span class="s2">"stateName"</span><span class="ss">:"STATE1"</span><span class="p">,</span>
      <span class="s2">"service"</span><span class="ss">:"ServiceStateService"</span><span class="p">,</span>
      <span class="s2">"blockChange"</span><span class="ss">:false</span><span class="p">,</span>
      <span class="s2">"blockEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
      <span class="s2">"blockBilling"</span><span class="ss">:false</span><span class="p">,</span>
      <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
      <span class="s2">"type"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s">'blocked_id'</span><span class="p">:</span> <span class="s">'7e7dd5a9-6b65-4f40-a14b-1f4f408ef83c'</span><span class="p">,</span>
    <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
    <span class="s">'is_block_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">'is_block_change'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">'is_block_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">'service'</span><span class="p">:</span> <span class="s">'ServiceStateService'</span><span class="p">,</span>
    <span class="s">'state_name'</span><span class="p">:</span> <span class="s">'STATE1'</span><span class="p">,</span>
    <span class="s">'type'</span><span class="p">:</span> <span class="s">'ACCOUNT'</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>blockingStateTypes</strong></td>
<td>array of strings</td>
<td>false</td>
<td>retrieve all</td>
<td>blocking state types to retrieve: &quot;SUBSCRIPTION&quot;, &quot;SUBSCRIPTION_BUNDLE&quot;, &quot;ACCOUNT&quot;</td>
</tr>
<tr>
<td><strong>blockingStateSvcs</strong></td>
<td>array of strings</td>
<td>false</td>
<td>retrieve all</td>
<td>filter list for blocking state services</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a blocking state object.</p>
<h2 id='account-hierarchical-accounts'>Hierarchical Accounts</h2>
<p>When using the <a href="http://docs.killbill.io/latest/ha.html">hierarchical account</a> feature, this API allows you to retrieve
all the child <code>Accounts</code> for a given parent <code>Account</code>.</p>
<h3 id='account-list-child-accounts'>List child accounts</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/children</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/children"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">parentAccountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ee6835f0-8347-42d3-958c-9a939383ba28"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will include account balance and CBA info</span>

<span class="n">Accounts</span> <span class="n">childrenAccounts</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getChildrenAccounts</span><span class="o">(</span><span class="n">parentAccountId</span><span class="o">,</span> 
                                                           <span class="n">accountWithBalance</span><span class="o">,</span> 
                                                           <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span> 
                                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">childrens_account</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">children</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                            <span class="n">with_balance</span><span class="p">,</span> 
                                                            <span class="n">with_balance_and_cba</span><span class="p">,</span> 
                                                            <span class="n">audit</span><span class="p">,</span> 
                                                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_children_accounts</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
   <span class="o">{</span>
      <span class="s2">"accountId"</span>:<span class="s2">"e19c6ab3-1a21-42f2-8ea2-9859c082b093"</span>,
      <span class="s2">"name"</span>:<span class="s2">"John Doe"</span>,
      <span class="s2">"externalKey"</span>:<span class="s2">"1522172592-516014"</span>,
      <span class="s2">"email"</span>:<span class="s2">"John@laposte.com"</span>,
      <span class="s2">"billCycleDayLocal"</span>:0,
      <span class="s2">"currency"</span>:<span class="s2">"USD"</span>,
      <span class="s2">"parentAccountId"</span>:<span class="s2">"01ab962b-3c66-4b17-b391-ffcc9fe51884"</span>,
      <span class="s2">"isPaymentDelegatedToParent"</span>:true,
      <span class="s2">"timeZone"</span>:<span class="s2">"UTC"</span>,
      <span class="s2">"address1"</span>:<span class="s2">"7, yoyo road"</span>,
      <span class="s2">"address2"</span>:<span class="s2">"Apt 5"</span>,
      <span class="s2">"postalCode"</span>:<span class="s2">"94105"</span>,
      <span class="s2">"company"</span>:<span class="s2">"Unemployed"</span>,
      <span class="s2">"city"</span>:<span class="s2">"San Francisco"</span>,
      <span class="s2">"state"</span>:<span class="s2">"California"</span>,
      <span class="s2">"country"</span>:<span class="s2">"US"</span>,
      <span class="s2">"locale"</span>:<span class="s2">"fr_FR"</span>,
      <span class="s2">"auditLogs"</span>:[]
   <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Account</span><span class="nd">@cfbf4058</span>
    <span class="nl">accountId:</span> <span class="n">b58e1b76</span><span class="o">-</span><span class="mi">461</span><span class="n">c</span><span class="o">-</span><span class="mi">4681</span><span class="o">-</span><span class="mi">9</span><span class="n">ecf</span><span class="o">-</span><span class="mi">3</span><span class="n">a3e5e95fc27</span>
    <span class="nl">name:</span> <span class="mo">01</span><span class="n">f814b3</span><span class="o">-</span><span class="n">b4c2</span><span class="o">-</span><span class="mi">41</span><span class="n">e9</span><span class="o">-</span><span class="mi">9</span><span class="n">d6c</span><span class="o">-</span><span class="mi">4</span><span class="n">a010916424c</span>
    <span class="nl">firstNameLength:</span> <span class="mi">4</span>
    <span class="nl">externalKey:</span> <span class="mi">3</span><span class="n">bf9144f</span><span class="o">-</span><span class="mi">11</span><span class="n">a3</span><span class="o">-</span><span class="mi">4</span><span class="n">a0b</span><span class="o">-</span><span class="mi">9923</span><span class="o">-</span><span class="mo">03</span><span class="n">a1c667ba93</span>
    <span class="nl">email:</span> <span class="mi">8</span><span class="n">c0f9</span><span class="nd">@f059d</span>
    <span class="nl">billCycleDayLocal:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">parentAccountId:</span> <span class="n">e72357f9</span><span class="o">-</span><span class="mi">76</span><span class="n">ff</span><span class="o">-</span><span class="mi">4533</span><span class="o">-</span><span class="n">b846</span><span class="o">-</span><span class="n">b61f39973b70</span>
    <span class="nl">isPaymentDelegatedToParent:</span> <span class="kc">true</span>
    <span class="nl">paymentMethodId:</span> <span class="kc">null</span>
    <span class="nl">referenceTime:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
    <span class="nl">timeZone:</span> <span class="n">UTC</span>
    <span class="nl">address1:</span> <span class="mi">12</span> <span class="n">rue</span> <span class="n">des</span> <span class="n">ecoles</span>
    <span class="nl">address2:</span> <span class="n">Poitier</span>
    <span class="nl">postalCode:</span> <span class="mi">44</span> <span class="mi">567</span>
    <span class="nl">company:</span> <span class="n">Renault</span>
    <span class="nl">city:</span> <span class="n">Quelque</span> <span class="n">part</span>
    <span class="nl">state:</span> <span class="n">Poitou</span>
    <span class="nl">country:</span> <span class="n">France</span>
    <span class="nl">locale:</span> <span class="n">fr</span>
    <span class="nl">phone:</span> <span class="mi">81</span> <span class="mi">53</span> <span class="mi">26</span> <span class="mi">56</span>
    <span class="nl">notes:</span> <span class="n">notes</span>
    <span class="nl">isMigrated:</span> <span class="kc">false</span>
    <span class="nl">accountBalance:</span> <span class="mi">0</span>
    <span class="nl">accountCBA:</span> <span class="mi">0</span><span class="n">E</span><span class="o">-</span><span class="mi">9</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"accountId"</span><span class="ss">:"e19c6ab3-1a21-42f2-8ea2-9859c082b093"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"John Doe"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"1522172592-516014"</span><span class="p">,</span>
      <span class="s2">"email"</span><span class="ss">:"John@laposte.com"</span><span class="p">,</span>
      <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
      <span class="s2">"parentAccountId"</span><span class="ss">:"01ab962b-3c66-4b17-b391-ffcc9fe51884"</span><span class="p">,</span>
      <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:true</span><span class="p">,</span>
      <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="ss">:"7, yoyo road"</span><span class="p">,</span>
      <span class="s2">"address2"</span><span class="ss">:"Apt 5"</span><span class="p">,</span>
      <span class="s2">"postalCode"</span><span class="ss">:"94105"</span><span class="p">,</span>
      <span class="s2">"company"</span><span class="ss">:"Unemployed"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="ss">:"San Francisco"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="ss">:"California"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="ss">:"US"</span><span class="p">,</span>
      <span class="s2">"locale"</span><span class="ss">:"fr_FR"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="p">:[</span>

      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[</span>
    <span class="p">{</span>
     <span class="s">'account_balance'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'account_cba'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span><span class="p">,</span>
     <span class="s">'address1'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'address2'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
     <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
     <span class="s">'city'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'company'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'country'</span><span class="p">:</span> <span class="s">'USA'</span><span class="p">,</span>
     <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
     <span class="s">'email'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'rpwtgr'</span><span class="p">,</span>
     <span class="s">'first_name_length'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'is_migrated'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
     <span class="s">'is_notified_for_invoices'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
     <span class="s">'is_payment_delegated_to_parent'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
     <span class="s">'locale'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'name'</span><span class="p">:</span> <span class="s">'John'</span><span class="p">,</span>
     <span class="s">'notes'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'phone'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'postal_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
     <span class="s">'reference_time'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
     <span class="s">'state'</span><span class="p">:</span> <span class="s">'CA'</span><span class="p">,</span>
     <span class="s">'time_zone'</span><span class="p">:</span> <span class="s">'UTC'</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>if true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>if true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of child account objects.</p>
<h3 id='account-transfer-a-given-child-credit-to-the-parent-level'>Transfer a given child credit to the parent level</h3>
<p>In the context of the Hierarchical Account feature, this allows moving the potential child credit to the parent level.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{childAccountId}/transferCredit</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/transferCredit"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">childAccountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">transferChildCreditToParent</span><span class="o">(</span><span class="n">childAccountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">transfer_child_credit</span><span class="p">(</span><span class="n">user</span><span class="p">,</span>
                              <span class="n">reason</span><span class="p">,</span>
                              <span class="n">comment</span><span class="p">,</span>
                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">child_account_id</span> <span class="o">=</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">transfer_child_credit_to_parent</span><span class="p">(</span><span class="n">child_account_id</span><span class="p">,</span>
                                           <span class="n">created_by</span><span class="p">,</span> 
                                           <span class="n">api_key</span><span class="p">,</span> 
                                           <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to the customer <code>Account</code>. For details on Custom Fields see <a href="#custom-field">Custom Field</a>.</p>
<h3 id='account-add-custom-fields-to-account'>Add custom fields to account</h3>
<p>Add custom fields to a given <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "objectType": "ACCOUNT", "name": "Test Custom Field", "value": "demo_test_value" }] \
    "http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields"
</span></code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"15434b45-54c1-4a44-851c-b1f2f7a52f03"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">accountId</span><span class="o">,</span>
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">createAccountCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'ACCOUNT'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                         <span class="n">user</span><span class="p">,</span>
                         <span class="n">reason</span><span class="p">,</span>
                         <span class="n">comment</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">create_account_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">59860</span><span class="n">a0d</span><span class="o">-</span><span class="n">c032</span><span class="o">-</span><span class="mi">456</span><span class="n">d</span><span class="o">-</span><span class="n">a35e</span><span class="o">-</span><span class="mi">3</span><span class="n">a48fe8579e5</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"6e571e22-b794-413c-be6f-1b2aa4bf9824"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"0149ffc6-fdfd-40b1-8cf4-29a66aef51d4"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing the custom field object to be added.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of custom field objects.</p>
<h3 id='account-retrieve-all-custom-fields'>Retrieve all custom fields</h3>
<p>Retrieves all custom fields attached to various resources owned by the <code>Account</code>.
This endpoint allows you to retrieve all custom fields, or to filter them by type, e.g <code>Subscription</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/allCustomFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/allCustomFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b38de59f-7dd0-447a-a508-9b022b808250"</span><span class="o">);</span>

<span class="n">CustomFields</span> <span class="n">allAccountCustomFields</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAllCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                    <span class="n">ObjectType</span><span class="o">.</span><span class="na">ACCOUNT</span><span class="o">,</span> 
                                                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_all_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                 <span class="n">api_key</span><span class="p">,</span> 
                                 <span class="n">api_secret</span><span class="p">,</span> 
                                 <span class="n">object_type</span><span class="o">=</span><span class="s">'ACCOUNT'</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">object_type</span> <span class="o">=</span> <span class="s1">'ACCOUNT'</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">all_custom_fields</span><span class="p">(</span><span class="n">object_type</span><span class="p">,</span>
                          <span class="n">audit</span><span class="p">,</span> 
                          <span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Test Custom Field"</span>,
    <span class="s2">"value"</span>: <span class="s2">"test_value"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="err">@</span><span class="mi">238</span><span class="n">cc919</span>
    <span class="nl">customFieldId:</span> <span class="n">dba8ec60</span><span class="o">-</span><span class="n">ee02</span><span class="o">-</span><span class="mi">4231</span><span class="o">-</span><span class="mi">9</span><span class="n">fa0</span><span class="o">-</span><span class="mi">6613773</span><span class="n">b4e9e</span>
    <span class="nl">objectId:</span> <span class="n">b38de59f</span><span class="o">-</span><span class="mi">7</span><span class="n">dd0</span><span class="o">-</span><span class="mi">447</span><span class="n">a</span><span class="o">-</span><span class="n">a508</span><span class="o">-</span><span class="mi">9</span><span class="n">b022b808250</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT</span>
    <span class="nl">name:</span> <span class="mi">385</span><span class="n">af</span>
    <span class="nl">value:</span> <span class="mi">8296</span><span class="n">f</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">01.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">CUSTOM_FIELD</span>
        <span class="nl">objectId:</span> <span class="n">dba8ec60</span><span class="o">-</span><span class="n">ee02</span><span class="o">-</span><span class="mi">4231</span><span class="o">-</span><span class="mi">9</span><span class="n">fa0</span><span class="o">-</span><span class="mi">6613773</span><span class="n">b4e9e</span>
        <span class="nl">changedBy:</span> <span class="n">Toto</span>
        <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
        <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
        <span class="nl">userToken:</span> <span class="mi">10</span><span class="n">e278f1</span><span class="o">-</span><span class="mi">61</span><span class="n">b8</span><span class="o">-</span><span class="mi">4885</span><span class="o">-</span><span class="n">b1f6</span><span class="o">-</span><span class="n">d6f4db19c998</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"ce1715f6-35e8-4d86-9063-65a54625992d"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"0f55a05d-9946-41d7-be75-ee71f49829b1"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"00000000-0000-0000-0000-000000000006"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"TEST"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'8f2618dc-9e8e-4df6-b835-68c747a48313'</span><span class="p">,</span>
    <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT'</span><span class="p">,</span>
    <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'00000000-0000-0000-0000-000000000002'</span><span class="p">,</span>
    <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'AUTO_INVOICING_OFF'</span><span class="p">,</span>
    <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'726a64eb-0fc2-4e1b-81c4-ebf879a3b5b6'</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>false</td>
<td>retrieve all</td>
<td>type of object</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p>Possible values for <strong>objectType</strong> are ACCOUNT, ACCOUNT_EMAIL, BLOCKING_STATES, BUNDLE, CUSTOM_FIELD, INVOICE, PAYMENT, TRANSACTION, INVOICE_ITEM, INVOICE_PAYMENT, SUBSCRIPTION, SUBSCRIPTION_EVENT, SERVICE_BROADCAST, PAYMENT_ATTEMPT, PAYMENT_METHOD, TAG, TAG_DEFINITION, TENANT, or TENANT_KVS.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of custom field objects</p>
<h3 id='account-retrieve-account-custom-fields'>Retrieve account custom fields</h3>
<p>Retrieve the custom fields associated with an account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">accountCustomFields</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                                                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Test Custom Field"</span>,
    <span class="s2">"value"</span>: <span class="s2">"test_value"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">59860</span><span class="n">a0d</span><span class="o">-</span><span class="n">c032</span><span class="o">-</span><span class="mi">456</span><span class="n">d</span><span class="o">-</span><span class="n">a35e</span><span class="o">-</span><span class="mi">3</span><span class="n">a48fe8579e5</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[</span>
 <span class="p">{</span>
   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
   <span class="s">'custom_field_id'</span><span class="p">:</span> <span class="s">'d7bb1afb-df19-4db2-ba7f-9a4f71e9b131'</span><span class="p">,</span>
   <span class="s">'name'</span><span class="p">:</span> <span class="s">'Test Custom Field'</span><span class="p">,</span>
   <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'89c45186-8ab0-44f8-8bc9-e670924830a2'</span><span class="p">,</span>
   <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT'</span><span class="p">,</span>
   <span class="s">'value'</span><span class="p">:</span> <span class="s">'test_value'</span>
 <span class="p">}</span>
<span class="p">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of custom field objects</p>
<h3 id='account-modify-custom-fields-for-an-account'>Modify custom fields for an account</h3>
<p>Modify the custom fields associated with an acount.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "customFieldId": "48e24ca0-1cfe-41c3-85e7-0ff0d51679fe", "objectId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "objectType": "ACCOUNT", "name": "Test Custom Field", "value": "test_modify_value", "auditLogs": [] }]'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">modifyAccountCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                     <span class="n">customFieldModified</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">account</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">account</span><span class="o">.</span><span class="n">modify_account_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                     <span class="p">[</span><span class="n">body</span><span class="p">],</span> 
                                     <span class="n">created_by</span><span class="p">,</span> 
                                     <span class="n">api_key</span><span class="p">,</span> 
                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Requst Body</strong></p>

<p>A JSON string representing a list of custom fields to substitute for the existing ones.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, a status code of 204 and an empty body.</p>
<h3 id='account-remove-custom-fields-from-account'>Remove custom fields from account</h3>
<p>Remove a specified set of custom fields from the account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/customField</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields?customField=9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">deleteAccountCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                     <span class="n">customFieldsId</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">account</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span> 
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">account</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">custom_field</span> <span class="o">=</span> <span class="p">[</span><span class="n">custom_field_id</span><span class="p">]</span>

<span class="n">account</span><span class="o">.</span><span class="n">delete_account_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                     <span class="n">created_by</span><span class="p">,</span>
                                     <span class="n">api_key</span><span class="p">,</span>
                                     <span class="n">api_secret</span><span class="p">,</span>
                                     <span class="n">custom_field</span><span class="o">=</span><span class="n">custom_field</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Comma separated list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-tags'>Tags</h2>
<p>While custom fields allow you to attach <code>{key, value}</code> pairs to various objects in the system, single values can also be
attached to various objects in the system by using tags. Tags come in 2 different categories:</p>

<ul>
<li><code>System Tags</code>: These are interpreted by the system to change its behavior. Certain tags can only be attached to specific resource types -- e.g <code>Account</code>. In order to distinguish them from the user tags, the system tags are uppercase symbols.</li>
<li><code>User Tags</code>: These are <strong>not</strong> interpreted by the system and can be anything as long as it a lowercase symbol. Foe example, <code>good_customer</code> could be a tag that can be attached to a customer <code>Account</code>. </li>
</ul>

<p>The APIs to manage tags rely on having an existing tag definition and supplying the <code>tagDefinitionId</code> in the calls. Therefore, for user tags, one should first create a <code>TagDefinition</code>.</p>

<p>The following <strong>system</strong> tags have been defined:</p>

<table><thead>
<tr>
<th>Tag</th>
<th>tagDefinitionId</th>
<th>Object type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>AUTO_PAY_OFF</code></td>
<td><code>00000000-0000-0000-0000-000000000001</code></td>
<td><code>ACCOUNT</code></td>
<td>Suspends payments until removed.</td>
</tr>
<tr>
<td><code>AUTO_INVOICING_OFF</code></td>
<td><code>00000000-0000-0000-0000-000000000002</code></td>
<td><code>ACCOUNT</code></td>
<td>Suspends invoicing until removed.</td>
</tr>
<tr>
<td><code>OVERDUE_ENFORCEMENT_OFF</code></td>
<td><code>00000000-0000-0000-0000-000000000003</code></td>
<td><code>ACCOUNT</code></td>
<td>Suspends overdue enforcement behaviour until removed.</td>
</tr>
<tr>
<td><code>WRITTEN_OFF</code></td>
<td><code>00000000-0000-0000-0000-000000000004</code></td>
<td><code>INVOICE</code></td>
<td>Indicates that an invoice is written off. This has no effect on billing or payment.</td>
</tr>
<tr>
<td><code>MANUAL_PAY</code></td>
<td><code>00000000-0000-0000-0000-000000000005</code></td>
<td><code>ACCOUNT</code></td>
<td>Indicates that Killbill doesn&#39;t process payments for this account. That is, the account uses external payments only.</td>
</tr>
<tr>
<td><code>TEST</code></td>
<td><code>00000000-0000-0000-0000-000000000006</code></td>
<td><code>ACCOUNT</code></td>
<td>Indicates that this is a test account.</td>
</tr>
<tr>
<td><code>PARTNER</code></td>
<td><code>00000000-0000-0000-0000-000000000007</code></td>
<td><code>ACCOUNT</code></td>
<td>Indicates that this is a partner account.</td>
</tr>
<tr>
<td><code>AUTO_INVOICING_DRAFT</code></td>
<td><code>00000000-0000-0000-0000-000000000008</code></td>
<td><code>ACCOUNT</code></td>
<td>Generate account invoices in DRAFT mode.</td>
</tr>
<tr>
<td><code>AUTO_INVOICING_REUSE_DRAFT</code></td>
<td><code>00000000-0000-0000-0000-000000000009</code></td>
<td><code>ACCOUNT</code></td>
<td>Use existing draft invoice if exists.</td>
</tr>
</tbody></table>

<p>To create user tags, one must first create the tag definitions. For instructions see section <a href="#tag-definition">Tag definition</a>.</p>
<h3 id='account-add-tags-to-account'>Add tags to account</h3>
<p>This API adds one or more tags to an account. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill"</span>-CreatedBy: demo<span class="s2">" </span><span class="se">\</span><span class="s2">
    -H "</span>X-Killbill-Reason: demo<span class="s2">" </span><span class="se">\</span><span class="s2">
    -H "</span>X-Killbill-Comment: demo<span class="s2">" </span><span class="se">\</span><span class="s2">
    -d '[ "</span>00000000-0000-0000-0000-000000000002<span class="s2">"]' </span><span class="se">\</span><span class="s2">
    "</span>http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/tags<span class="s2">"
</span></code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f4087a76-9f8a-4893-abbf-c5bb69975d1b"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">autoPayOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">createAccountTags</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                           <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">autoPayOffId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                <span class="n">user</span><span class="p">,</span>
                <span class="n">reason</span><span class="p">,</span>
                <span class="n">comment</span><span class="p">,</span>
                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000002"</span><span class="p">]</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">create_account_tags</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                               <span class="n">tag</span><span class="p">,</span> 
                               <span class="n">created_by</span><span class="p">,</span> 
                               <span class="n">api_key</span><span class="p">,</span> 
                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/tags
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@bd138472</span>
    <span class="nl">tagId:</span> <span class="mi">1</span><span class="n">bb4b638</span><span class="o">-</span><span class="mi">3886</span><span class="o">-</span><span class="mi">4</span><span class="n">f73</span><span class="o">-</span><span class="mi">90</span><span class="n">a5</span><span class="o">-</span><span class="mi">89</span><span class="n">eb6d1bcf7f</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT</span>
    <span class="nl">objectId:</span> <span class="mi">917992</span><span class="n">d3</span><span class="o">-</span><span class="mi">5</span><span class="n">f1f</span><span class="o">-</span><span class="mi">4828</span><span class="o">-</span><span class="mi">9</span><span class="n">fff</span><span class="o">-</span><span class="mi">799</span><span class="n">cc4211aa9</span>
    <span class="nl">tagDefinitionId:</span> <span class="mo">00000000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">000000000001</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">AUTO_PAY_OFF</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"00000000-0000-0000-0000-000000000006"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"TEST"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="p">:[</span>

      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more strings to be added as user tags.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='account-retrieve-all-tags'>Retrieve all tags</h3>
<p>Retrieves all tags attached to resources owned by this <code>Account</code>. This API allows you to retrieve all tags, or only tags attached to a specified resource type. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/allTags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/allTags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ee6835f0-8347-42d3-958c-9a939383ba28"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">allAccountTags</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAllTags</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                            <span class="n">ObjectType</span><span class="o">.</span><span class="na">ACCOUNT</span><span class="o">,</span>
                                            <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_tags</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">object_type</span> <span class="o">=</span> <span class="s1">'ACCOUNT'</span>
<span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">all_tags</span><span class="p">(</span><span class="n">object_type</span><span class="p">,</span> 
                 <span class="n">included_deleted</span><span class="p">,</span> 
                 <span class="n">audit</span><span class="p">,</span> 
                 <span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"0f7c5837-1ed9-41ab-b391-9ef7ea4ab049"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"00000000-0000-0000-0000-000000000002"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"AUTO_INVOICING_OFF"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="err">@</span><span class="mi">45</span><span class="n">e9c8ec</span>
    <span class="nl">tagId:</span> <span class="mi">659</span><span class="n">b37ed</span><span class="o">-</span><span class="mi">59</span><span class="n">d7</span><span class="o">-</span><span class="mi">4</span><span class="n">b46</span><span class="o">-</span><span class="n">b4e4</span><span class="o">-</span><span class="mi">37</span><span class="n">d11cdc0bce</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT</span>
    <span class="nl">objectId:</span> <span class="n">ee6835f0</span><span class="o">-</span><span class="mi">8347</span><span class="o">-</span><span class="mi">42</span><span class="n">d3</span><span class="o">-</span><span class="mi">958</span><span class="n">c</span><span class="o">-</span><span class="mi">9</span><span class="n">a939383ba28</span>
    <span class="nl">tagDefinitionId:</span> <span class="mo">00000000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">000000000001</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">AUTO_PAY_OFF</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"ce1715f6-35e8-4d86-9063-65a54625992d"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"0f55a05d-9946-41d7-be75-ee71f49829b1"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"00000000-0000-0000-0000-000000000006"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"TEST"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'8f2618dc-9e8e-4df6-b835-68c747a48313'</span><span class="p">,</span>
    <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT'</span><span class="p">,</span>
    <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'00000000-0000-0000-0000-000000000002'</span><span class="p">,</span>
    <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'AUTO_INVOICING_OFF'</span><span class="p">,</span>
    <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'726a64eb-0fc2-4e1b-81c4-ebf879a3b5b6'</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>false</td>
<td>all object types</td>
<td>choose type of object</td>
</tr>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>choose true to include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p>Possible values for <strong>objectType</strong> are ACCOUNT, ACCOUNT_EMAIL, BLOCKING_STATES, BUNDLE, CUSTOM_FIELD, INVOICE, PAYMENT, TRANSACTION, INVOICE_ITEM, INVOICE_PAYMENT, SUBSCRIPTION, SUBSCRIPTION_EVENT, SERVICE_BROADCAST, PAYMENT_ATTEMPT, PAYMENT_METHOD, TAG, TAG_DEFINITION, TENANT, or TENANT_KVS.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='account-retrieve-account-tags'>Retrieve account tags</h3>
<p>Retrieve all tags attached to this account itself.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/tags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags1</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountTags</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                            <span class="n">includedDeleted</span><span class="o">,</span> 
                                            <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
             <span class="n">audit</span><span class="p">,</span>
             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_tags</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"0f7c5837-1ed9-41ab-b391-9ef7ea4ab049"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"00000000-0000-0000-0000-000000000002"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"AUTO_INVOICING_OFF"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@cae768d7</span>
    <span class="nl">tagId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT</span>
    <span class="nl">objectId:</span> <span class="n">e659f0f3</span><span class="o">-</span><span class="mi">745</span><span class="n">c</span><span class="o">-</span><span class="mi">46</span><span class="n">d5</span><span class="o">-</span><span class="mi">953</span><span class="n">c</span><span class="o">-</span><span class="mi">28</span><span class="n">fe9282fc7d</span>
    <span class="nl">tagDefinitionId:</span> <span class="mo">00000000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">000000000001</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">AUTO_PAY_OFF</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">TAG</span>
        <span class="nl">objectId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
        <span class="nl">changedBy:</span> <span class="n">Toto</span>
        <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
        <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
        <span class="nl">userToken:</span> <span class="n">e36f7ba5</span><span class="o">-</span><span class="n">fb5b</span><span class="o">-</span><span class="mi">41</span><span class="n">c0</span><span class="o">-</span><span class="n">b47c</span><span class="o">-</span><span class="mi">77</span><span class="n">c48ab37dd9</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"00000000-0000-0000-0000-000000000006"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"TEST"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="p">:[</span>

      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
    <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'2501dd10-8244-4b4f-9356-8cf73f18fbf6'</span><span class="p">,</span>
    <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT'</span><span class="p">,</span>
    <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'00000000-0000-0000-0000-000000000002'</span><span class="p">,</span>
    <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'AUTO_INVOICING_OFF'</span><span class="p">,</span>
    <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'83df059f-7529-43d4-b77b-c91f39a60166'</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>choose true to include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='account-remove-tags-from-account'>Remove tags from account</h3>
<p>This API removes a list of tags attached to an account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/tags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">autoPayOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">deleteAccountTags</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                             <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">autoPayOffId</span><span class="o">),</span> 
                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                   <span class="n">user</span><span class="p">,</span>
                   <span class="n">reason</span><span class="p">,</span>
                   <span class="n">comment</span><span class="p">,</span>
                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000002"</span><span class="p">]</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">delete_account_tags</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                               <span class="n">created_by</span><span class="p">,</span> 
                               <span class="n">api_key</span><span class="p">,</span> 
                               <span class="n">api_secret</span><span class="p">,</span> 
                               <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>true</td>
<td>none</td>
<td>List of tag definition IDs identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='account-retrieve-audit-logs'>Retrieve audit logs</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to any resource associated with the specified account. History information (a copy of the full resource object) is not included.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/auditLogs</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/auditLogs"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e9432491-6558-4007-85ef-cdae171d240c"</span><span class="o">);</span>

<span class="n">AuditLogs</span> <span class="n">auditLogsJson</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountAuditLogs</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'4e4d8acd-c97d-447a-814b-28f995a9106c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_audit_logs</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">audit</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"bca75b40-ffa3-41f8-9fde-06f83ee303e8"</span>,
    <span class="s2">"history"</span>: null
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T18:46:47.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"9a61a1e6-78f3-43d3-addf-e7ada180b23d"</span>,
    <span class="s2">"history"</span>: null
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T18:48:37.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"0c41a04d-4037-4fa9-af71-dfe54af4d3ae"</span>,
    <span class="s2">"history"</span>: null
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T19:07:25.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"c9b9ab11-14b1-41b5-8371-1c425f273336"</span>,
    <span class="s2">"history"</span>: null
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T19:26:46.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"fd26b216-deb2-43d4-b748-dec8e9917ada"</span>,
    <span class="s2">"history"</span>: null
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"DELETE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T20:02:01.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"0d5c8db7-974f-47e0-9332-5d9625f72155"</span>,
    <span class="s2">"history"</span>: null
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
    <span class="nl">changeType:</span> <span class="n">INSERT</span>
    <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">01.000</span><span class="n">Z</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT</span>
    <span class="nl">objectId:</span> <span class="n">e9432491</span><span class="o">-</span><span class="mi">6558</span><span class="o">-</span><span class="mi">4007</span><span class="o">-</span><span class="mi">85</span><span class="n">ef</span><span class="o">-</span><span class="n">cdae171d240c</span>
    <span class="nl">changedBy:</span> <span class="n">Toto</span>
    <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
    <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
    <span class="nl">userToken:</span> <span class="mi">6</span><span class="n">cd7a8ec</span><span class="o">-</span><span class="mo">067</span><span class="mi">8</span><span class="o">-</span><span class="mi">436</span><span class="n">f</span><span class="o">-</span><span class="n">a2cb</span><span class="o">-</span><span class="n">a58f9ee3668b</span>
    <span class="nl">history:</span> <span class="kc">null</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
      <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"ccaf0822-a58b-4f1d-82d2-907439b68054"</span><span class="p">,</span>
      <span class="s2">"changedBy"</span><span class="ss">:"test_account_tags"</span><span class="p">,</span>
      <span class="s2">"userToken"</span><span class="ss">:"17d7807c-5c44-4e57-adc5-d0323c779b1f"</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'change_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'change_type'</span><span class="p">:</span> <span class="s">'INSERT'</span><span class="p">,</span>
 <span class="s">'changed_by'</span><span class="p">:</span> <span class="s">'test'</span><span class="p">,</span>
 <span class="s">'comments'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'4e4d8acd-c97d-447a-814b-28f995a9106c'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT'</span><span class="p">,</span>
 <span class="s">'reason_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'user_token'</span><span class="p">:</span> <span class="s">'89ef6e86-4869-4974-abb9-0d870e8578b2'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs.</p>
<h3 id='account-retrieve-account-audit-logs-with-history'>Retrieve account audit logs with history</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to the specified account itself. History information (a copy of the full account object) is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ecbff3be-3cbf-4e1d-ae05-d323d4597877"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">auditLogWithHistories</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountAuditLogsWithHistory</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_audit_logs_with_history</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">audit_logs_with_history</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"bca75b40-ffa3-41f8-9fde-06f83ee303e8"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
      <span class="s2">"recordId"</span>: 120,
      <span class="s2">"accountRecordId"</span>: 120,
      <span class="s2">"tenantRecordId"</span>: 101,
      <span class="s2">"externalKey"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"email"</span>: <span class="s2">"john@laposte.com"</span>,
      <span class="s2">"name"</span>: <span class="s2">"John Doe"</span>,
      <span class="s2">"firstNameLength"</span>: null,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"parentAccountId"</span>: null,
      <span class="s2">"isPaymentDelegatedToParent"</span>: null,
      <span class="s2">"billingCycleDayLocal"</span>: 0,
      <span class="s2">"paymentMethodId"</span>: null,
      <span class="s2">"referenceTime"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
      <span class="s2">"timeZone"</span>: <span class="s2">"UTC"</span>,
      <span class="s2">"locale"</span>: null,
      <span class="s2">"address1"</span>: null,
      <span class="s2">"address2"</span>: null,
      <span class="s2">"companyName"</span>: null,
      <span class="s2">"city"</span>: null,
      <span class="s2">"stateOrProvince"</span>: null,
      <span class="s2">"country"</span>: null,
      <span class="s2">"postalCode"</span>: null,
      <span class="s2">"phone"</span>: null,
      <span class="s2">"notes"</span>: null,
      <span class="s2">"migrated"</span>: null,
      <span class="s2">"tableName"</span>: <span class="s2">"ACCOUNT"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"ACCOUNT_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T18:46:47.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"9a61a1e6-78f3-43d3-addf-e7ada180b23d"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2018-07-17T18:46:47.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2018-07-17T18:46:47.000Z"</span>,
      <span class="s2">"recordId"</span>: 120,
      <span class="s2">"accountRecordId"</span>: 120,
      <span class="s2">"tenantRecordId"</span>: 101,
      <span class="s2">"externalKey"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"email"</span>: <span class="s2">"john@laposte.com"</span>,
      <span class="s2">"name"</span>: <span class="s2">"Another Name"</span>,
      <span class="s2">"firstNameLength"</span>: null,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"parentAccountId"</span>: null,
      <span class="s2">"isPaymentDelegatedToParent"</span>: <span class="nb">false</span>,
      <span class="s2">"billingCycleDayLocal"</span>: 0,
      <span class="s2">"paymentMethodId"</span>: null,
      <span class="s2">"referenceTime"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
      <span class="s2">"timeZone"</span>: <span class="s2">"UTC"</span>,
      <span class="s2">"locale"</span>: null,
      <span class="s2">"address1"</span>: null,
      <span class="s2">"address2"</span>: null,
      <span class="s2">"companyName"</span>: null,
      <span class="s2">"city"</span>: null,
      <span class="s2">"stateOrProvince"</span>: null,
      <span class="s2">"country"</span>: null,
      <span class="s2">"postalCode"</span>: null,
      <span class="s2">"phone"</span>: null,
      <span class="s2">"notes"</span>: null,
      <span class="s2">"migrated"</span>: null,
      <span class="s2">"tableName"</span>: <span class="s2">"ACCOUNT"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"ACCOUNT_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-17T18:48:37.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"0c41a04d-4037-4fa9-af71-dfe54af4d3ae"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2018-07-17T18:48:37.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2018-07-17T18:48:37.000Z"</span>,
      <span class="s2">"recordId"</span>: 120,
      <span class="s2">"accountRecordId"</span>: 120,
      <span class="s2">"tenantRecordId"</span>: 101,
      <span class="s2">"externalKey"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"email"</span>: <span class="s2">"john@laposte.com"</span>,
      <span class="s2">"name"</span>: <span class="s2">"John Doe"</span>,
      <span class="s2">"firstNameLength"</span>: null,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"parentAccountId"</span>: null,
      <span class="s2">"isPaymentDelegatedToParent"</span>: <span class="nb">false</span>,
      <span class="s2">"billingCycleDayLocal"</span>: 0,
      <span class="s2">"paymentMethodId"</span>: null,
      <span class="s2">"referenceTime"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
      <span class="s2">"timeZone"</span>: <span class="s2">"UTC"</span>,
      <span class="s2">"locale"</span>: null,
      <span class="s2">"address1"</span>: null,
      <span class="s2">"address2"</span>: null,
      <span class="s2">"companyName"</span>: null,
      <span class="s2">"city"</span>: null,
      <span class="s2">"stateOrProvince"</span>: null,
      <span class="s2">"country"</span>: null,
      <span class="s2">"postalCode"</span>: null,
      <span class="s2">"phone"</span>: null,
      <span class="s2">"notes"</span>: null,
      <span class="s2">"migrated"</span>: null,
      <span class="s2">"tableName"</span>: <span class="s2">"ACCOUNT"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"ACCOUNT_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
    <span class="nl">changeType:</span> <span class="n">INSERT</span>
    <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">01.000</span><span class="n">Z</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT</span>
    <span class="nl">objectId:</span> <span class="n">ecbff3be</span><span class="o">-</span><span class="mi">3</span><span class="n">cbf</span><span class="o">-</span><span class="mi">4</span><span class="n">e1d</span><span class="o">-</span><span class="n">ae05</span><span class="o">-</span><span class="n">d323d4597877</span>
    <span class="nl">changedBy:</span> <span class="n">Toto</span>
    <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
    <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
    <span class="nl">userToken:</span> <span class="n">d698ba59</span><span class="o">-</span><span class="n">cacd</span><span class="o">-</span><span class="mi">4739</span><span class="o">-</span><span class="mi">9</span><span class="n">e40</span><span class="o">-</span><span class="mi">68506</span><span class="n">ec046ca</span>
    <span class="nl">history:</span> <span class="o">{</span><span class="n">id</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">createdDate</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">01.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">updatedDate</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">01.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">recordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> <span class="n">accountRecordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">tenantRecordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">externalKey</span><span class="o">=</span><span class="mi">5</span><span class="n">bb29c30</span><span class="o">-</span><span class="n">c83a</span><span class="o">-</span><span class="mi">4237</span><span class="o">-</span><span class="n">b886</span><span class="o">-</span><span class="mi">6605319</span><span class="n">baf8f</span><span class="o">,</span> 
              <span class="n">email</span><span class="o">=</span><span class="n">a946d</span><span class="err">@</span><span class="mi">6</span><span class="n">a7f4</span><span class="o">,</span> 
              <span class="n">name</span><span class="o">=</span><span class="mi">40</span><span class="n">f79b31</span><span class="o">-</span><span class="mi">64</span><span class="n">eb</span><span class="o">-</span><span class="mi">429</span><span class="n">b</span><span class="o">-</span><span class="mi">96</span><span class="n">b5</span><span class="o">-</span><span class="mi">89</span><span class="n">c05a21883f</span><span class="o">,</span> 
              <span class="n">firstNameLength</span><span class="o">=</span><span class="mi">4</span><span class="o">,</span> 
              <span class="n">currency</span><span class="o">=</span><span class="n">USD</span><span class="o">,</span> 
              <span class="n">parentAccountId</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">isPaymentDelegatedToParent</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> 
              <span class="n">billingCycleDayLocal</span><span class="o">=</span><span class="mi">0</span><span class="o">,</span> 
              <span class="n">paymentMethodId</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">referenceTime</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">01.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">timeZone</span><span class="o">=</span><span class="n">UTC</span><span class="o">,</span> 
              <span class="n">locale</span><span class="o">=</span><span class="n">fr</span><span class="o">,</span> 
              <span class="n">address1</span><span class="o">=</span><span class="mi">12</span> <span class="n">rue</span> <span class="n">des</span> <span class="n">ecoles</span><span class="o">,</span> 
              <span class="n">address2</span><span class="o">=</span><span class="n">Poitier</span><span class="o">,</span> 
              <span class="n">companyName</span><span class="o">=</span><span class="n">Renault</span><span class="o">,</span> 
              <span class="n">city</span><span class="o">=</span><span class="n">Quelque</span> <span class="n">part</span><span class="o">,</span> 
              <span class="n">stateOrProvince</span><span class="o">=</span><span class="n">Poitou</span><span class="o">,</span> 
              <span class="n">country</span><span class="o">=</span><span class="n">France</span><span class="o">,</span> 
              <span class="n">postalCode</span><span class="o">=</span><span class="mi">44</span> <span class="mi">567</span><span class="o">,</span> 
              <span class="n">phone</span><span class="o">=</span><span class="mi">81</span> <span class="mi">53</span> <span class="mi">26</span> <span class="mi">56</span><span class="o">,</span> 
              <span class="n">notes</span><span class="o">=</span><span class="n">notes</span><span class="o">,</span> 
              <span class="n">migrated</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> 
              <span class="n">tableName</span><span class="o">=</span><span class="n">ACCOUNT</span><span class="o">,</span> 
              <span class="n">historyTableName</span><span class="o">=</span><span class="n">ACCOUNT_HISTORY</span><span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
      <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"08a1c2e4-687f-48ca-9c38-888108a2ce0a"</span><span class="p">,</span>
      <span class="s2">"changedBy"</span><span class="ss">:"test_account_tags"</span><span class="p">,</span>
      <span class="s2">"userToken"</span><span class="ss">:"5c0632c3-6567-4b0b-8e37-e2a9bb9ab6b2"</span><span class="p">,</span>
      <span class="s2">"history"</span><span class="p">:{</span>
         <span class="s2">"id"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"createdDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"updatedDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"recordId"</span><span class="p">:</span><span class="mi">505</span><span class="p">,</span>
         <span class="s2">"accountRecordId"</span><span class="p">:</span><span class="mi">505</span><span class="p">,</span>
         <span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="mi">822</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"1527086785-621747"</span><span class="p">,</span>
         <span class="s2">"email"</span><span class="ss">:"kill@bill.com"</span><span class="p">,</span>
         <span class="s2">"name"</span><span class="ss">:"KillBillClient"</span><span class="p">,</span>
         <span class="s2">"firstNameLength"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"parentAccountId"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"billingCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"paymentMethodId"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"referenceTime"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
         <span class="s2">"locale"</span><span class="ss">:"fr_FR"</span><span class="p">,</span>
         <span class="s2">"address1"</span><span class="ss">:"7, yoyo road"</span><span class="p">,</span>
         <span class="s2">"address2"</span><span class="ss">:"Apt 5"</span><span class="p">,</span>
         <span class="s2">"companyName"</span><span class="ss">:"Unemployed"</span><span class="p">,</span>
         <span class="s2">"city"</span><span class="ss">:"San Francisco"</span><span class="p">,</span>
         <span class="s2">"stateOrProvince"</span><span class="ss">:"California"</span><span class="p">,</span>
         <span class="s2">"country"</span><span class="ss">:"US"</span><span class="p">,</span>
         <span class="s2">"postalCode"</span><span class="ss">:"94105"</span><span class="p">,</span>
         <span class="s2">"phone"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"notes"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"migrated"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"tableName"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
         <span class="s2">"historyTableName"</span><span class="ss">:"ACCOUNT_HISTORY"</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'change_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'change_type'</span><span class="p">:</span> <span class="s">'INSERT'</span><span class="p">,</span>
 <span class="s">'changed_by'</span><span class="p">:</span> <span class="s">'test'</span><span class="p">,</span>
 <span class="s">'comments'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'history'</span><span class="p">:</span> <span class="p">{</span><span class="s">'created_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
             <span class="s">'id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'updated_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())},</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT'</span><span class="p">,</span>
 <span class="s">'reason_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'user_token'</span><span class="p">:</span> <span class="s">'40e771bf-160e-4ff6-82be-463f2d9e634d'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs.</p>
<h3 id='account-retrieve-account-email-audit-logs-with-history'>Retrieve account email audit logs with history</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified account email. History information (a copy of the full email object) is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/emails/{accountEmailId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails/aa2a5614-88d9-4ec3-a042-a4771bd66670/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"873c26ef-a3fa-4942-b2f5-549b51f20b1a"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">accountEmailId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f637441d-855e-4bf5-bac1-6426bdb116d6"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountEmailAuditLogsWithHistory</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                       <span class="n">accountEmailId</span><span class="o">,</span> 
                                                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span>
<span class="n">account_email_id</span> <span class="o">=</span> <span class="s">'bb390282-6757-4f4f-8dd5-456abd9f30b2'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_email_audit_logs_with_history</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                     <span class="n">account_email_id</span><span class="p">,</span>
                                                     <span class="n">api_key</span><span class="p">,</span>
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_email_id</span> <span class="o">=</span> <span class="s1">'a4627e89-a73b-4167-a7ba-92a2881eb3c4'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">email_audit_logs_with_history</span><span class="p">(</span><span class="n">account_email_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-18T15:13:22.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT_EMAIL"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"aa2a5614-88d9-4ec3-a042-a4771bd66670"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"927546eb-3431-4bcf-8fcc-1787d2130772"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2018-07-18T15:13:22.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2018-07-18T15:13:22.000Z"</span>,
      <span class="s2">"recordId"</span>: 1,
      <span class="s2">"accountRecordId"</span>: 120,
      <span class="s2">"tenantRecordId"</span>: 101,
      <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"email"</span>: <span class="s2">"email@laposte.com"</span>,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"ACCOUNT_EMAIL"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"ACCOUNT_EMAIL_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
    <span class="nl">changeType:</span> <span class="n">INSERT</span>
    <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
    <span class="nl">objectType:</span> <span class="n">ACCOUNT_EMAIL</span>
    <span class="nl">objectId:</span> <span class="n">f637441d</span><span class="o">-</span><span class="mi">855</span><span class="n">e</span><span class="o">-</span><span class="mi">4</span><span class="n">bf5</span><span class="o">-</span><span class="n">bac1</span><span class="o">-</span><span class="mi">6426</span><span class="n">bdb116d6</span>
    <span class="nl">changedBy:</span> <span class="n">Toto</span>
    <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
    <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
    <span class="nl">userToken:</span> <span class="mi">317</span><span class="n">c943b</span><span class="o">-</span><span class="n">f137</span><span class="o">-</span><span class="mi">4866</span><span class="o">-</span><span class="mi">9798</span><span class="o">-</span><span class="mi">33</span><span class="n">c5818339f9</span>
    <span class="nl">history:</span> <span class="o">{</span><span class="n">id</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">createdDate</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">updatedDate</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">recordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">accountRecordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">tenantRecordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">accountId</span><span class="o">=</span><span class="mi">9</span><span class="n">f86c177</span><span class="o">-</span><span class="n">addd</span><span class="o">-</span><span class="mi">48</span><span class="n">da</span><span class="o">-</span><span class="n">b734</span><span class="o">-</span><span class="n">da219b33f655</span><span class="o">,</span> 
              <span class="n">email</span><span class="o">=</span><span class="n">af6c8ec2</span><span class="o">-</span><span class="n">bed8</span><span class="o">-</span><span class="mi">4</span><span class="n">a86</span><span class="o">-</span><span class="n">aa23</span><span class="o">-</span><span class="mi">535276</span><span class="n">aad7ca</span><span class="o">,</span> 
              <span class="n">isActive</span><span class="o">=</span><span class="kc">true</span><span class="o">,</span> 
              <span class="n">tableName</span><span class="o">=</span><span class="n">ACCOUNT_EMAIL</span><span class="o">,</span> 
              <span class="n">historyTableName</span><span class="o">=</span><span class="n">ACCOUNT_EMAIL_HISTORY</span><span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
      <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT_EMAIL"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"a4627e89-a73b-4167-a7ba-92a2881eb3c4"</span><span class="p">,</span>
      <span class="s2">"changedBy"</span><span class="ss">:"test_account_tags"</span><span class="p">,</span>
      <span class="s2">"userToken"</span><span class="ss">:"79005abf-a8cf-44e1-84fc-945381d35bd5"</span><span class="p">,</span>
      <span class="s2">"history"</span><span class="p">:{</span>
         <span class="s2">"id"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"createdDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"updatedDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"recordId"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span>
         <span class="s2">"accountRecordId"</span><span class="p">:</span><span class="mi">525</span><span class="p">,</span>
         <span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="mi">842</span><span class="p">,</span>
         <span class="s2">"accountId"</span><span class="ss">:"1ced5fc2-b032-4969-a38b-d4db9ab5368f"</span><span class="p">,</span>
         <span class="s2">"email"</span><span class="ss">:"email@laposte.com"</span><span class="p">,</span>
         <span class="s2">"isActive"</span><span class="ss">:true</span><span class="p">,</span>
         <span class="s2">"tableName"</span><span class="ss">:"ACCOUNT_EMAIL"</span><span class="p">,</span>
         <span class="s2">"historyTableName"</span><span class="ss">:"ACCOUNT_EMAIL_HISTORY"</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'change_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'change_type'</span><span class="p">:</span> <span class="s">'INSERT'</span><span class="p">,</span>
 <span class="s">'changed_by'</span><span class="p">:</span> <span class="s">'Me'</span><span class="p">,</span>
 <span class="s">'comments'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'history'</span><span class="p">:</span> <span class="p">{</span><span class="s">'created_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
             <span class="s">'id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'updated_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())},</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'bb390282-6757-4f4f-8dd5-456abd9f30b2'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT_EMAIL'</span><span class="p">,</span>
 <span class="s">'reason_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'user_token'</span><span class="p">:</span> <span class="s">'548055b7-2c5e-4315-9293-d76c00bd9737'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of account email audit records, including history (copies of the complete record).</p>
<h3 id='account-retrieve-blocking-state-audit-logs-with-history'>Retrieve blocking state audit logs with history</h3>
<p>Retrieves the audit logs for a specific blocking state, given the blocking state id. History records (blocking state objects) are included.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/block/{blockingId}/auditLogsWithHistory</code></p>

<p>See section <a href="#account-blocking-state">Account Blocking State</a> for an introduction to blocking states. </p>

<blockquote>
<p>Example Request:</p>
</blockquote>

<p>In the example provided, we are using a system-generated event, namely the <code>START_ENTITLEMENT</code>; such event id can be obtained
by fetching the <a href="#account-retrieve-account-timeline">timeline api</a>.</p>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/block/763fd113-1b9b-4d0d-be01-6ee56d3879f5/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"BLOCKING_STATES"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"763fd113-1b9b-4d0d-be01-6ee56d3879f5"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"admin"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"recordId"</span>: 1326,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"blockableId"</span>: <span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span>,
      <span class="s2">"type"</span>: <span class="s2">"SUBSCRIPTION"</span>,
      <span class="s2">"state"</span>: <span class="s2">"ENT_STARTED"</span>,
      <span class="s2">"service"</span>: <span class="s2">"entitlement-service"</span>,
      <span class="s2">"blockChange"</span>: <span class="nb">false</span>,
      <span class="s2">"blockEntitlement"</span>: <span class="nb">false</span>,
      <span class="s2">"blockBilling"</span>: <span class="nb">false</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"BLOCKING_STATES"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"BLOCKING_STATES"</span>,
      <span class="s2">"active"</span>: <span class="nb">true</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>

</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of blocking state audit logs with history.</p>
<h3 id='account-retrieve-account-timeline'>Retrieve account timeline</h3>
<p>This API retrieves the chronological set of events that occurred concerning a specific <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/timeline</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/timeline"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"16364ac4-2a77-4444-b2d8-e980c37a8954"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">parallel</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

<span class="n">AccountTimeline</span> <span class="n">timeline</span> <span class="o">=</span> <span class="n">getAccountTimeline</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                              <span class="n">parallel</span><span class="o">,</span>
                                              <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'MINIMAL'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">AccountTimeline</span><span class="p">.</span><span class="nf">timeline</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                <span class="n">audit</span><span class="p">,</span>
                                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_timeline</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"account"</span>: <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"name"</span>: <span class="s2">"John Doe"</span>,
    <span class="s2">"firstNameLength"</span>: null,
    <span class="s2">"externalKey"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"email"</span>: <span class="s2">"john@laposte.com"</span>,
    <span class="s2">"billCycleDayLocal"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"isPaymentDelegatedToParent"</span>: <span class="nb">false</span>,
    <span class="s2">"paymentMethodId"</span>: null,
    <span class="s2">"referenceTime"</span>: <span class="s2">"2018-07-17T15:02:45.000Z"</span>,
    <span class="s2">"timeZone"</span>: <span class="s2">"UTC"</span>,
    <span class="s2">"address1"</span>: null,
    <span class="s2">"address2"</span>: null,
    <span class="s2">"postalCode"</span>: null,
    <span class="s2">"company"</span>: null,
    <span class="s2">"city"</span>: null,
    <span class="s2">"state"</span>: null,
    <span class="s2">"country"</span>: null,
    <span class="s2">"locale"</span>: null,
    <span class="s2">"phone"</span>: null,
    <span class="s2">"notes"</span>: null,
    <span class="s2">"isMigrated"</span>: null,
    <span class="s2">"accountBalance"</span>: null,
    <span class="s2">"accountCBA"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="s2">"bundles"</span>: <span class="o">[]</span>,
  <span class="s2">"invoices"</span>: <span class="o">[]</span>,
  <span class="s2">"payments"</span>: <span class="o">[]</span>
<span class="o">}</span>

</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">AccountTimeline</span> <span class="o">{</span>
    <span class="nl">account:</span> <span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Account</span><span class="err">@</span><span class="mi">15</span><span class="n">d03da</span>
        <span class="nl">accountId:</span> <span class="mi">16364</span><span class="n">ac4</span><span class="o">-</span><span class="mi">2</span><span class="n">a77</span><span class="o">-</span><span class="mi">4444</span><span class="o">-</span><span class="n">b2d8</span><span class="o">-</span><span class="n">e980c37a8954</span>
        <span class="nl">name:</span> <span class="mi">6</span><span class="n">d3aec15</span><span class="o">-</span><span class="mi">0</span><span class="n">f95</span><span class="o">-</span><span class="mi">4445</span><span class="o">-</span><span class="n">a4b2</span><span class="o">-</span><span class="mo">03</span><span class="n">ba6f312d9f</span>
        <span class="nl">firstNameLength:</span> <span class="mi">4</span>
        <span class="nl">externalKey:</span> <span class="n">bf50b936</span><span class="o">-</span><span class="mi">8909</span><span class="o">-</span><span class="mi">442</span><span class="n">c</span><span class="o">-</span><span class="mi">95</span><span class="n">d9</span><span class="o">-</span><span class="mi">53302</span><span class="n">ac53a73</span>
        <span class="nl">email:</span> <span class="mi">86</span><span class="n">aa8</span><span class="err">@</span><span class="mi">349</span><span class="n">d7</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">parentAccountId:</span> <span class="kc">null</span>
        <span class="nl">isPaymentDelegatedToParent:</span> <span class="kc">false</span>
        <span class="nl">paymentMethodId:</span> <span class="n">ef4e6d42</span><span class="o">-</span><span class="mi">1472</span><span class="o">-</span><span class="mi">4027</span><span class="o">-</span><span class="n">a991</span><span class="o">-</span><span class="n">d611701a6001</span>
        <span class="nl">referenceTime:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">42.000</span><span class="n">Z</span>
        <span class="nl">timeZone:</span> <span class="n">UTC</span>
        <span class="nl">address1:</span> <span class="mi">12</span> <span class="n">rue</span> <span class="n">des</span> <span class="n">ecoles</span>
        <span class="nl">address2:</span> <span class="n">Poitier</span>
        <span class="nl">postalCode:</span> <span class="mi">44</span> <span class="mi">567</span>
        <span class="nl">company:</span> <span class="n">Renault</span>
        <span class="nl">city:</span> <span class="n">Quelque</span> <span class="n">part</span>
        <span class="nl">state:</span> <span class="n">Poitou</span>
        <span class="nl">country:</span> <span class="n">France</span>
        <span class="nl">locale:</span> <span class="n">fr</span>
        <span class="nl">phone:</span> <span class="mi">81</span> <span class="mi">53</span> <span class="mi">26</span> <span class="mi">56</span>
        <span class="nl">notes:</span> <span class="n">notes</span>
        <span class="nl">isMigrated:</span> <span class="kc">false</span>
        <span class="nl">accountBalance:</span> <span class="kc">null</span>
        <span class="nl">accountCBA:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">bundles:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Bundle</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Bundle</span><span class="nd">@b1f3cdff</span>
        <span class="nl">accountId:</span> <span class="mi">16364</span><span class="n">ac4</span><span class="o">-</span><span class="mi">2</span><span class="n">a77</span><span class="o">-</span><span class="mi">4444</span><span class="o">-</span><span class="n">b2d8</span><span class="o">-</span><span class="n">e980c37a8954</span>
        <span class="nl">bundleId:</span> <span class="n">a077e897</span><span class="o">-</span><span class="mi">3</span><span class="n">f75</span><span class="o">-</span><span class="mi">47</span><span class="n">e0</span><span class="o">-</span><span class="n">af54</span><span class="o">-</span><span class="n">eb799c9ed234</span>
        <span class="nl">externalKey:</span> <span class="mi">19149</span><span class="n">cd6</span><span class="o">-</span><span class="mi">60</span><span class="n">fb</span><span class="o">-</span><span class="mi">414</span><span class="n">f</span><span class="o">-</span><span class="n">a720</span><span class="o">-</span><span class="mi">1</span><span class="n">b0c5d41f62a</span>
        <span class="nl">subscriptions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="nd">@be14321</span>
            <span class="nl">accountId:</span> <span class="mi">16364</span><span class="n">ac4</span><span class="o">-</span><span class="mi">2</span><span class="n">a77</span><span class="o">-</span><span class="mi">4444</span><span class="o">-</span><span class="n">b2d8</span><span class="o">-</span><span class="n">e980c37a8954</span>
            <span class="nl">bundleId:</span> <span class="n">a077e897</span><span class="o">-</span><span class="mi">3</span><span class="n">f75</span><span class="o">-</span><span class="mi">47</span><span class="n">e0</span><span class="o">-</span><span class="n">af54</span><span class="o">-</span><span class="n">eb799c9ed234</span>
            <span class="nl">subscriptionId:</span> <span class="mi">510470</span><span class="n">b8</span><span class="o">-</span><span class="mi">4495</span><span class="o">-</span><span class="mi">4215</span><span class="o">-</span><span class="n">b4ff</span><span class="o">-</span><span class="mi">9</span><span class="n">dd3fb952fb6</span>
            <span class="nl">externalKey:</span> <span class="mi">19149</span><span class="n">cd6</span><span class="o">-</span><span class="mi">60</span><span class="n">fb</span><span class="o">-</span><span class="mi">414</span><span class="n">f</span><span class="o">-</span><span class="n">a720</span><span class="o">-</span><span class="mi">1</span><span class="n">b0c5d41f62a</span>
            <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">productName:</span> <span class="n">Shotgun</span>
            <span class="nl">productCategory:</span> <span class="n">BASE</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">state:</span> <span class="n">ACTIVE</span>
            <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
            <span class="nl">cancelledDate:</span> <span class="kc">null</span>
            <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">billingEndDate:</span> <span class="kc">null</span>
            <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
            <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
                <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@c5424137</span>
                <span class="nl">eventId:</span> <span class="n">b7220076</span><span class="o">-</span><span class="n">fe42</span><span class="o">-</span><span class="mi">4</span><span class="n">fc5</span><span class="o">-</span><span class="mi">9843</span><span class="o">-</span><span class="mi">7296044</span><span class="n">e7f17</span>
                <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
                <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
                <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
                <span class="nl">product:</span> <span class="n">Shotgun</span>
                <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
                <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
                <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
                <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
                <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
                <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
                <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
                <span class="nl">auditLogs:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
                <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">90</span><span class="n">c31d8f</span>
                <span class="nl">eventId:</span> <span class="mi">8</span><span class="n">b74b94e</span><span class="o">-</span><span class="n">a41e</span><span class="o">-</span><span class="mi">4018</span><span class="o">-</span><span class="mi">9</span><span class="n">f84</span><span class="o">-</span><span class="n">e86870de337b</span>
                <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
                <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
                <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
                <span class="nl">product:</span> <span class="n">Shotgun</span>
                <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
                <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
                <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
                <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
                <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
                <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
                <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
                <span class="nl">auditLogs:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
                <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@a5e22a9b</span>
                <span class="nl">eventId:</span> <span class="n">e0d9367c</span><span class="o">-</span><span class="n">a94d</span><span class="o">-</span><span class="mi">4</span><span class="n">f9c</span><span class="o">-</span><span class="n">a068</span><span class="o">-</span><span class="mi">4</span><span class="n">b21870d8919</span>
                <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
                <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
                <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
                <span class="nl">product:</span> <span class="n">Shotgun</span>
                <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
                <span class="nl">eventType:</span> <span class="n">PHASE</span>
                <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
                <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
                <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
                <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
                <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
                <span class="nl">auditLogs:</span> <span class="o">[]</span>
            <span class="o">}]</span>
            <span class="nl">priceOverrides:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
                <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
                <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
                <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
                <span class="nl">fixedPrice:</span> <span class="mi">0</span>
                <span class="nl">recurringPrice:</span> <span class="kc">null</span>
                <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
                <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
                <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
                <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
                <span class="nl">fixedPrice:</span> <span class="kc">null</span>
                <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
                <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
            <span class="o">}]</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">timeline:</span> <span class="kd">class</span> <span class="nc">BundleTimeline</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BundleTimeline</span><span class="err">@</span><span class="mi">8354</span><span class="n">e44a</span>
            <span class="nl">accountId:</span> <span class="mi">16364</span><span class="n">ac4</span><span class="o">-</span><span class="mi">2</span><span class="n">a77</span><span class="o">-</span><span class="mi">4444</span><span class="o">-</span><span class="n">b2d8</span><span class="o">-</span><span class="n">e980c37a8954</span>
            <span class="nl">bundleId:</span> <span class="n">a077e897</span><span class="o">-</span><span class="mi">3</span><span class="n">f75</span><span class="o">-</span><span class="mi">47</span><span class="n">e0</span><span class="o">-</span><span class="n">af54</span><span class="o">-</span><span class="n">eb799c9ed234</span>
            <span class="nl">externalKey:</span> <span class="mi">19149</span><span class="n">cd6</span><span class="o">-</span><span class="mi">60</span><span class="n">fb</span><span class="o">-</span><span class="mi">414</span><span class="n">f</span><span class="o">-</span><span class="n">a720</span><span class="o">-</span><span class="mi">1</span><span class="n">b0c5d41f62a</span>
            <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
                <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@aaf34cbe</span>
                <span class="nl">eventId:</span> <span class="n">b7220076</span><span class="o">-</span><span class="n">fe42</span><span class="o">-</span><span class="mi">4</span><span class="n">fc5</span><span class="o">-</span><span class="mi">9843</span><span class="o">-</span><span class="mi">7296044</span><span class="n">e7f17</span>
                <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
                <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
                <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
                <span class="nl">product:</span> <span class="n">Shotgun</span>
                <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
                <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
                <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
                <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
                <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
                <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
                <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
                <span class="nl">auditLogs:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
                <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">719050</span><span class="n">e7</span>
                <span class="nl">eventId:</span> <span class="mi">8</span><span class="n">b74b94e</span><span class="o">-</span><span class="n">a41e</span><span class="o">-</span><span class="mi">4018</span><span class="o">-</span><span class="mi">9</span><span class="n">f84</span><span class="o">-</span><span class="n">e86870de337b</span>
                <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
                <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
                <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
                <span class="nl">product:</span> <span class="n">Shotgun</span>
                <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
                <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
                <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
                <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
                <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
                <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
                <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
                <span class="nl">auditLogs:</span> <span class="o">[]</span>
            <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
                <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@a23e5a2c</span>
                <span class="nl">eventId:</span> <span class="n">e0d9367c</span><span class="o">-</span><span class="n">a94d</span><span class="o">-</span><span class="mi">4</span><span class="n">f9c</span><span class="o">-</span><span class="n">a068</span><span class="o">-</span><span class="mi">4</span><span class="n">b21870d8919</span>
                <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
                <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
                <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
                <span class="nl">product:</span> <span class="n">Shotgun</span>
                <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
                <span class="nl">eventType:</span> <span class="n">PHASE</span>
                <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
                <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
                <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
                <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
                <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
                <span class="nl">auditLogs:</span> <span class="o">[]</span>
            <span class="o">}]</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">invoices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="nd">@be958014</span>
        <span class="nl">amount:</span> <span class="mf">0.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">COMMITTED</span>
        <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
        <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
        <span class="nl">invoiceId:</span> <span class="mi">94</span><span class="n">e03bc3</span><span class="o">-</span><span class="n">ef0a</span><span class="o">-</span><span class="mi">4</span><span class="n">db8</span><span class="o">-</span><span class="mi">9</span><span class="n">e01</span><span class="o">-</span><span class="n">e87cabcf7dfc</span>
        <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">invoiceNumber:</span> <span class="mi">1</span>
        <span class="nl">balance:</span> <span class="mf">0.00</span>
        <span class="nl">accountId:</span> <span class="mi">16364</span><span class="n">ac4</span><span class="o">-</span><span class="mi">2</span><span class="n">a77</span><span class="o">-</span><span class="mi">4444</span><span class="o">-</span><span class="n">b2d8</span><span class="o">-</span><span class="n">e980c37a8954</span>
        <span class="nl">bundleKeys:</span> <span class="mi">19149</span><span class="n">cd6</span><span class="o">-</span><span class="mi">60</span><span class="n">fb</span><span class="o">-</span><span class="mi">414</span><span class="n">f</span><span class="o">-</span><span class="n">a720</span><span class="o">-</span><span class="mi">1</span><span class="n">b0c5d41f62a</span>
        <span class="nl">credits:</span> <span class="o">[]</span>
        <span class="nl">items:</span> <span class="kc">null</span>
        <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
        <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
        <span class="nl">parentAccountId:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="err">@</span><span class="mi">54</span><span class="n">f97871</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">COMMITTED</span>
        <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
        <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
        <span class="nl">invoiceId:</span> <span class="mi">1</span><span class="n">b547802</span><span class="o">-</span><span class="mi">6</span><span class="n">d4a</span><span class="o">-</span><span class="mi">41</span><span class="n">d8</span><span class="o">-</span><span class="n">ae67</span><span class="o">-</span><span class="n">fdb209c8fd8a</span>
        <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">27</span>
        <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">invoiceNumber:</span> <span class="mi">2</span>
        <span class="nl">balance:</span> <span class="mf">0.00</span>
        <span class="nl">accountId:</span> <span class="mi">16364</span><span class="n">ac4</span><span class="o">-</span><span class="mi">2</span><span class="n">a77</span><span class="o">-</span><span class="mi">4444</span><span class="o">-</span><span class="n">b2d8</span><span class="o">-</span><span class="n">e980c37a8954</span>
        <span class="nl">bundleKeys:</span> <span class="mi">19149</span><span class="n">cd6</span><span class="o">-</span><span class="mi">60</span><span class="n">fb</span><span class="o">-</span><span class="mi">414</span><span class="n">f</span><span class="o">-</span><span class="n">a720</span><span class="o">-</span><span class="mi">1</span><span class="n">b0c5d41f62a</span>
        <span class="nl">credits:</span> <span class="o">[]</span>
        <span class="nl">items:</span> <span class="kc">null</span>
        <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
        <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
        <span class="nl">parentAccountId:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">payments:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">InvoicePayment</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoicePayment</span><span class="nd">@e8067ccf</span>
        <span class="nl">targetInvoiceId:</span> <span class="mi">1</span><span class="n">b547802</span><span class="o">-</span><span class="mi">6</span><span class="n">d4a</span><span class="o">-</span><span class="mi">41</span><span class="n">d8</span><span class="o">-</span><span class="n">ae67</span><span class="o">-</span><span class="n">fdb209c8fd8a</span>
        <span class="nl">accountId:</span> <span class="mi">16364</span><span class="n">ac4</span><span class="o">-</span><span class="mi">2</span><span class="n">a77</span><span class="o">-</span><span class="mi">4444</span><span class="o">-</span><span class="n">b2d8</span><span class="o">-</span><span class="n">e980c37a8954</span>
        <span class="nl">paymentId:</span> <span class="n">ff4f3e17</span><span class="o">-</span><span class="mi">708</span><span class="n">c</span><span class="o">-</span><span class="mi">4</span><span class="n">f83</span><span class="o">-</span><span class="n">a648</span><span class="o">-</span><span class="mi">1</span><span class="n">c45a0b9fdf0</span>
        <span class="nl">paymentNumber:</span> <span class="mi">1</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">ff4f3e17</span><span class="o">-</span><span class="mi">708</span><span class="n">c</span><span class="o">-</span><span class="mi">4</span><span class="n">f83</span><span class="o">-</span><span class="n">a648</span><span class="o">-</span><span class="mi">1</span><span class="n">c45a0b9fdf0</span>
        <span class="nl">authAmount:</span> <span class="mi">0</span>
        <span class="nl">capturedAmount:</span> <span class="mi">0</span>
        <span class="nl">purchasedAmount:</span> <span class="mf">249.95</span>
        <span class="nl">refundedAmount:</span> <span class="mi">0</span>
        <span class="nl">creditedAmount:</span> <span class="mi">0</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">paymentMethodId:</span> <span class="n">ef4e6d42</span><span class="o">-</span><span class="mi">1472</span><span class="o">-</span><span class="mi">4027</span><span class="o">-</span><span class="n">a991</span><span class="o">-</span><span class="n">d611701a6001</span>
        <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">868031</span><span class="n">c1</span>
            <span class="nl">transactionId:</span> <span class="mi">50</span><span class="n">b13522</span><span class="o">-</span><span class="mi">6853</span><span class="o">-</span><span class="mi">4</span><span class="n">aa5</span><span class="o">-</span><span class="mi">85</span><span class="n">ba</span><span class="o">-</span><span class="n">aa12bbd643cc</span>
            <span class="nl">transactionExternalKey:</span> <span class="mi">50</span><span class="n">b13522</span><span class="o">-</span><span class="mi">6853</span><span class="o">-</span><span class="mi">4</span><span class="n">aa5</span><span class="o">-</span><span class="mi">85</span><span class="n">ba</span><span class="o">-</span><span class="n">aa12bbd643cc</span>
            <span class="nl">paymentId:</span> <span class="n">ff4f3e17</span><span class="o">-</span><span class="mi">708</span><span class="n">c</span><span class="o">-</span><span class="mi">4</span><span class="n">f83</span><span class="o">-</span><span class="n">a648</span><span class="o">-</span><span class="mi">1</span><span class="n">c45a0b9fdf0</span>
            <span class="nl">paymentExternalKey:</span> <span class="n">ff4f3e17</span><span class="o">-</span><span class="mi">708</span><span class="n">c</span><span class="o">-</span><span class="mi">4</span><span class="n">f83</span><span class="o">-</span><span class="n">a648</span><span class="o">-</span><span class="mi">1</span><span class="n">c45a0b9fdf0</span>
            <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
            <span class="nl">amount:</span> <span class="mf">249.95</span>
            <span class="nl">currency:</span> <span class="n">USD</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">27</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">45.000</span><span class="n">Z</span>
            <span class="nl">processedAmount:</span> <span class="mf">249.95</span>
            <span class="nl">processedCurrency:</span> <span class="n">USD</span>
            <span class="nl">status:</span> <span class="n">SUCCESS</span>
            <span class="nl">gatewayErrorCode:</span> 
            <span class="nl">gatewayErrorMsg:</span> 
            <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
            <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
            <span class="nl">properties:</span> <span class="kc">null</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"account"</span><span class="p">:{</span>
      <span class="s2">"accountId"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"KillBillClient"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"1522173024-759445"</span><span class="p">,</span>
      <span class="s2">"email"</span><span class="ss">:"kill@bill.com"</span><span class="p">,</span>
      <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
      <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
      <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:false</span><span class="p">,</span>
      <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
      <span class="s2">"address1"</span><span class="ss">:"7, yoyo road"</span><span class="p">,</span>
      <span class="s2">"address2"</span><span class="ss">:"Apt 5"</span><span class="p">,</span>
      <span class="s2">"postalCode"</span><span class="ss">:"94105"</span><span class="p">,</span>
      <span class="s2">"company"</span><span class="ss">:"Unemployed"</span><span class="p">,</span>
      <span class="s2">"city"</span><span class="ss">:"San Francisco"</span><span class="p">,</span>
      <span class="s2">"state"</span><span class="ss">:"California"</span><span class="p">,</span>
      <span class="s2">"country"</span><span class="ss">:"US"</span><span class="p">,</span>
      <span class="s2">"locale"</span><span class="ss">:"fr_FR"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
            <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
            <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
            <span class="s2">"userToken"</span><span class="ss">:"07952a10-4283-456a-830d-0b2a1e353eec"</span>
         <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">},</span>
   <span class="s2">"bundles"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"accountId"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69"</span><span class="p">,</span>
         <span class="s2">"bundleId"</span><span class="ss">:"043b06e0-7d61-4891-ab58-63b02eaf0fee"</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69-478447"</span><span class="p">,</span>
         <span class="s2">"subscriptions"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"accountId"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69"</span><span class="p">,</span>
               <span class="s2">"bundleId"</span><span class="ss">:"043b06e0-7d61-4891-ab58-63b02eaf0fee"</span><span class="p">,</span>
               <span class="s2">"subscriptionId"</span><span class="ss">:"c1675495-e899-4e1e-8d81-8ef02b02e0a8"</span><span class="p">,</span>
               <span class="s2">"externalKey"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69-478447"</span><span class="p">,</span>
               <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"productName"</span><span class="ss">:"Super"</span><span class="p">,</span>
               <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
               <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
               <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
               <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-02"</span><span class="p">,</span>
               <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
               <span class="s2">"events"</span><span class="p">:[</span>
                  <span class="p">{</span>
                     <span class="s2">"eventId"</span><span class="ss">:"97a0172a-cb88-467b-bbaf-28cf3a335570"</span><span class="p">,</span>
                     <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                     <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                     <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                     <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                     <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                     <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                     <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                     <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                     <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                     <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                     <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                     <span class="s2">"auditLogs"</span><span class="p">:[</span>
                        <span class="p">{</span>
                           <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                           <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
                           <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                           <span class="s2">"userToken"</span><span class="ss">:"cc3b9ec7-d55b-400b-803c-4a7f9413fe33"</span>
                        <span class="p">}</span>
                     <span class="p">]</span>
                  <span class="p">},</span>
                  <span class="p">{</span>
                     <span class="s2">"eventId"</span><span class="ss">:"b634594b-6680-4456-a083-521301416e31"</span><span class="p">,</span>
                     <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                     <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                     <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                     <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                     <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                     <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                     <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                     <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                     <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                     <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                     <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                     <span class="s2">"auditLogs"</span><span class="p">:[</span>
                        <span class="p">{</span>
                           <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                           <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
                           <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                           <span class="s2">"userToken"</span><span class="ss">:"cc3b9ec7-d55b-400b-803c-4a7f9413fe33"</span>
                        <span class="p">}</span>
                     <span class="p">]</span>
                  <span class="p">},</span>
                  <span class="p">{</span>
                     <span class="s2">"eventId"</span><span class="ss">:"82953028-68c0-4c2e-9596-0248047d2452"</span><span class="p">,</span>
                     <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                     <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-02"</span><span class="p">,</span>
                     <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                     <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
                     <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                     <span class="s2">"eventType"</span><span class="ss">:"CHANGE"</span><span class="p">,</span>
                     <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                     <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                     <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                     <span class="s2">"serviceStateName"</span><span class="ss">:"CHANGE"</span><span class="p">,</span>
                     <span class="s2">"phase"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
                     <span class="s2">"auditLogs"</span><span class="p">:[</span>
                        <span class="p">{</span>
                           <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                           <span class="s2">"changeDate"</span><span class="ss">:"2013-08-02T06:00:03.000Z"</span><span class="p">,</span>
                           <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                           <span class="s2">"userToken"</span><span class="ss">:"7e39f68b-c695-4d38-822b-5e4ad230f130"</span>
                        <span class="p">}</span>
                     <span class="p">]</span>
                  <span class="p">},</span>
                  <span class="p">{</span>
                     <span class="s2">"eventId"</span><span class="ss">:"c2e120b7-af1a-42f4-b16d-2669be94c897"</span><span class="p">,</span>
                     <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                     <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
                     <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                     <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
                     <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                     <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                     <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                     <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                     <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                     <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                     <span class="s2">"phase"</span><span class="ss">:"super-monthly-evergreen"</span><span class="p">,</span>
                     <span class="s2">"auditLogs"</span><span class="p">:[</span>
                        <span class="p">{</span>
                           <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                           <span class="s2">"changeDate"</span><span class="ss">:"2013-08-02T06:00:03.000Z"</span><span class="p">,</span>
                           <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                           <span class="s2">"userToken"</span><span class="ss">:"7e39f68b-c695-4d38-822b-5e4ad230f130"</span>
                        <span class="p">}</span>
                     <span class="p">]</span>
                  <span class="p">}</span>
               <span class="p">],</span>
               <span class="s2">"priceOverrides"</span><span class="p">:[</span>
                  <span class="p">{</span>
                     <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                     <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                     <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
                     <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
                  <span class="p">},</span>
                  <span class="p">{</span>
                     <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                     <span class="s2">"phaseName"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
                     <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
                     <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
                  <span class="p">},</span>
                  <span class="p">{</span>
                     <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                     <span class="s2">"phaseName"</span><span class="ss">:"super-monthly-evergreen"</span><span class="p">,</span>
                     <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
                     <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">1000</span><span class="o">.</span><span class="mi">0</span>
                  <span class="p">}</span>
               <span class="p">],</span>
               <span class="s2">"auditLogs"</span><span class="p">:[</span>
                  <span class="p">{</span>
                     <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                     <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
                     <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                     <span class="s2">"reasonCode"</span><span class="ss">:null</span><span class="p">,</span>
                     <span class="s2">"comments"</span><span class="ss">:null</span><span class="p">,</span>
                     <span class="s2">"userToken"</span><span class="ss">:"cc3b9ec7-d55b-400b-803c-4a7f9413fe33"</span>
                  <span class="p">}</span>
               <span class="p">]</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"timeline"</span><span class="p">:{</span>
            <span class="s2">"accountId"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69"</span><span class="p">,</span>
            <span class="s2">"bundleId"</span><span class="ss">:"043b06e0-7d61-4891-ab58-63b02eaf0fee"</span><span class="p">,</span>
            <span class="s2">"externalKey"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69-478447"</span><span class="p">,</span>
            <span class="s2">"events"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"97a0172a-cb88-467b-bbaf-28cf3a335570"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="p">:[</span>
                     <span class="p">{</span>
                        <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                        <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
                        <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                        <span class="s2">"reasonCode"</span><span class="ss">:null</span><span class="p">,</span>
                        <span class="s2">"comments"</span><span class="ss">:null</span><span class="p">,</span>
                        <span class="s2">"userToken"</span><span class="ss">:"cc3b9ec7-d55b-400b-803c-4a7f9413fe33"</span>
                     <span class="p">}</span>
                  <span class="p">]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"b634594b-6680-4456-a083-521301416e31"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="p">:[</span>
                     <span class="p">{</span>
                        <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                        <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
                        <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                        <span class="s2">"reasonCode"</span><span class="ss">:null</span><span class="p">,</span>
                        <span class="s2">"comments"</span><span class="ss">:null</span><span class="p">,</span>
                        <span class="s2">"userToken"</span><span class="ss">:"cc3b9ec7-d55b-400b-803c-4a7f9413fe33"</span>
                     <span class="p">}</span>
                  <span class="p">]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"82953028-68c0-4c2e-9596-0248047d2452"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-02"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"CHANGE"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"CHANGE"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="p">:[</span>
                     <span class="p">{</span>
                        <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                        <span class="s2">"changeDate"</span><span class="ss">:"2013-08-02T06:00:03.000Z"</span><span class="p">,</span>
                        <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                        <span class="s2">"reasonCode"</span><span class="ss">:null</span><span class="p">,</span>
                        <span class="s2">"comments"</span><span class="ss">:null</span><span class="p">,</span>
                        <span class="s2">"userToken"</span><span class="ss">:"7e39f68b-c695-4d38-822b-5e4ad230f130"</span>
                     <span class="p">}</span>
                  <span class="p">]</span>
               <span class="p">},</span>
               <span class="p">{</span>
                  <span class="s2">"eventId"</span><span class="ss">:"c2e120b7-af1a-42f4-b16d-2669be94c897"</span><span class="p">,</span>
                  <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                  <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
                  <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
                  <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
                  <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                  <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                  <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                  <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                  <span class="s2">"phase"</span><span class="ss">:"super-monthly-evergreen"</span><span class="p">,</span>
                  <span class="s2">"auditLogs"</span><span class="p">:[</span>
                     <span class="p">{</span>
                        <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                        <span class="s2">"changeDate"</span><span class="ss">:"2013-08-02T06:00:03.000Z"</span><span class="p">,</span>
                        <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                        <span class="s2">"reasonCode"</span><span class="ss">:null</span><span class="p">,</span>
                        <span class="s2">"comments"</span><span class="ss">:null</span><span class="p">,</span>
                        <span class="s2">"userToken"</span><span class="ss">:"7e39f68b-c695-4d38-822b-5e4ad230f130"</span>
                     <span class="p">}</span>
                  <span class="p">]</span>
               <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"auditLogs"</span><span class="p">:[</span>
               <span class="p">{</span>
                  <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
                  <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
                  <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
                  <span class="s2">"reasonCode"</span><span class="ss">:null</span><span class="p">,</span>
                  <span class="s2">"comments"</span><span class="ss">:null</span><span class="p">,</span>
                  <span class="s2">"userToken"</span><span class="ss">:"cc3b9ec7-d55b-400b-803c-4a7f9413fe33"</span>
               <span class="p">}</span>
            <span class="p">]</span>
         <span class="p">},</span>
         <span class="s2">"auditLogs"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
               <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:01.000Z"</span><span class="p">,</span>
               <span class="s2">"changedBy"</span><span class="ss">:"test_change_default"</span><span class="p">,</span>
               <span class="s2">"userToken"</span><span class="ss">:"cc3b9ec7-d55b-400b-803c-4a7f9413fe33"</span>
            <span class="p">}</span>
         <span class="p">]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"invoices"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
         <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"invoiceId"</span><span class="ss">:"5f7edbcd-5f38-410b-93e0-d6959c44ca25"</span><span class="p">,</span>
         <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"targetDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"invoiceNumber"</span><span class="ss">:"1631"</span><span class="p">,</span>
         <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"accountId"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69"</span><span class="p">,</span>
         <span class="s2">"bundleKeys"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69-478447"</span><span class="p">,</span>
         <span class="s2">"credits"</span><span class="ss">:[]</span><span class="p">,</span>
         <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
               <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
               <span class="s2">"changedBy"</span><span class="ss">:"SubscriptionBaseTransition"</span><span class="p">,</span>
               <span class="s2">"userToken"</span><span class="ss">:"cc3b9ec7-d55b-400b-803c-4a7f9413fe33"</span>
            <span class="p">}</span>
         <span class="p">]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
         <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"invoiceId"</span><span class="ss">:"c68044ed-7f94-4766-b95b-a04d1484728b"</span><span class="p">,</span>
         <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-02"</span><span class="p">,</span>
         <span class="s2">"targetDate"</span><span class="ss">:"2013-08-02"</span><span class="p">,</span>
         <span class="s2">"invoiceNumber"</span><span class="ss">:"1632"</span><span class="p">,</span>
         <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"accountId"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69"</span><span class="p">,</span>
         <span class="s2">"bundleKeys"</span><span class="ss">:"f5ac6a12-7e24-4b5b-acf0-3f16436faf69-478447"</span><span class="p">,</span>
         <span class="s2">"credits"</span><span class="ss">:[]</span><span class="p">,</span>
         <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
               <span class="s2">"changeDate"</span><span class="ss">:"2013-08-02T06:00:03.000Z"</span><span class="p">,</span>
               <span class="s2">"changedBy"</span><span class="ss">:"SubscriptionBaseTransition"</span><span class="p">,</span>
               <span class="s2">"userToken"</span><span class="ss">:"7e39f68b-c695-4d38-822b-5e4ad230f130"</span>
            <span class="p">}</span>
         <span class="p">]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"payments"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account'</span><span class="p">:</span> <span class="p">{</span><span class="s">'account_balance'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'account_cba'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
             <span class="s">'address1'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'address2'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
             <span class="s">'city'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'company'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'country'</span><span class="p">:</span> <span class="s">'USA'</span><span class="p">,</span>
             <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
             <span class="s">'email'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'hmwgix'</span><span class="p">,</span>
             <span class="s">'first_name_length'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'is_migrated'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'is_notified_for_invoices'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
             <span class="s">'is_payment_delegated_to_parent'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'locale'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'name'</span><span class="p">:</span> <span class="s">'John'</span><span class="p">,</span>
             <span class="s">'notes'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'phone'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'postal_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'reference_time'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
             <span class="s">'state'</span><span class="p">:</span> <span class="s">'CA'</span><span class="p">,</span>
             <span class="s">'time_zone'</span><span class="p">:</span> <span class="s">'UTC'</span><span class="p">},</span>
 <span class="s">'bundles'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
              <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
              <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'b769c9ec-0a13-4a8a-b686-c5bf1e56c158'</span><span class="p">,</span>
              <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'b769c9ec-0a13-4a8a-b686-c5bf1e56c158'</span><span class="p">,</span>
              <span class="s">'subscriptions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
                                 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                 <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                 <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                 <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'b769c9ec-0a13-4a8a-b686-c5bf1e56c158'</span><span class="p">,</span>
                                 <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                 <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                 <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'e2ba3b83-d04a-4128-8dea-b71d0c2a5630'</span><span class="p">,</span>
                                             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                                            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'b6f9c977-a34d-4399-bd7b-c53a16aa56b2'</span><span class="p">,</span>
                                             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                                            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'a870def0-b47f-4513-a8fb-585df3b6b4b8'</span><span class="p">,</span>
                                             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'CHANGE'</span><span class="p">,</span>
                                             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'super-monthly-trial'</span><span class="p">,</span>
                                             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                                             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
                                             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'CHANGE'</span><span class="p">},</span>
                                            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'96a74b51-7d51-4ec7-9386-63a07d007281'</span><span class="p">,</span>
                                             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'STOP_ENTITLEMENT'</span><span class="p">,</span>
                                             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                                             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'super-monthly-trial'</span><span class="p">,</span>
                                             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                                             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
                                             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_CANCELLED'</span><span class="p">},</span>
                                            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'068821fe-165c-4f67-95c1-3f14e872a27c'</span><span class="p">,</span>
                                             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'STOP_BILLING'</span><span class="p">,</span>
                                             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'super-monthly-trial'</span><span class="p">,</span>
                                             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                                             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
                                             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'STOP_BILLING'</span><span class="p">}],</span>
                                 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'b769c9ec-0a13-4a8a-b686-c5bf1e56c158'</span><span class="p">,</span>
                                 <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                 <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                                 <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                 <span class="s">'price_overrides'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                                      <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                                      <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                                      <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                                      <span class="s">'recurring_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                                      <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]},</span>
                                                     <span class="p">{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                                      <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'super-monthly-trial'</span><span class="p">,</span>
                                                      <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                                      <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                                                      <span class="s">'recurring_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                                      <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]}],</span>
                                 <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
                                 <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
                                 <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
                                 <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                 <span class="s">'state'</span><span class="p">:</span> <span class="s">'CANCELLED'</span><span class="p">,</span>
                                 <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'dfd4af5d-a72e-420e-9e0a-ce600d108b3f'</span><span class="p">}],</span>
              <span class="s">'timeline'</span><span class="p">:</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
                           <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                           <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'b769c9ec-0a13-4a8a-b686-c5bf1e56c158'</span><span class="p">,</span>
                           <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                       <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                       <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                       <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'e2ba3b83-d04a-4128-8dea-b71d0c2a5630'</span><span class="p">,</span>
                                       <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                       <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                       <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                       <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                       <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                       <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                       <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                                      <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                       <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                       <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                       <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'b6f9c977-a34d-4399-bd7b-c53a16aa56b2'</span><span class="p">,</span>
                                       <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                       <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                       <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                       <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                       <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                       <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                       <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                                      <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                       <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                       <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                       <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'a870def0-b47f-4513-a8fb-585df3b6b4b8'</span><span class="p">,</span>
                                       <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'CHANGE'</span><span class="p">,</span>
                                       <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'phase'</span><span class="p">:</span> <span class="s">'super-monthly-trial'</span><span class="p">,</span>
                                       <span class="s">'plan'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                                       <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                       <span class="s">'product'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
                                       <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                       <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'CHANGE'</span><span class="p">},</span>
                                      <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                       <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                       <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                       <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'96a74b51-7d51-4ec7-9386-63a07d007281'</span><span class="p">,</span>
                                       <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'STOP_ENTITLEMENT'</span><span class="p">,</span>
                                       <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                                       <span class="s">'phase'</span><span class="p">:</span> <span class="s">'super-monthly-trial'</span><span class="p">,</span>
                                       <span class="s">'plan'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                                       <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                       <span class="s">'product'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
                                       <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                       <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_CANCELLED'</span><span class="p">},</span>
                                      <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                       <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                       <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                       <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'068821fe-165c-4f67-95c1-3f14e872a27c'</span><span class="p">,</span>
                                       <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'STOP_BILLING'</span><span class="p">,</span>
                                       <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'phase'</span><span class="p">:</span> <span class="s">'super-monthly-trial'</span><span class="p">,</span>
                                       <span class="s">'plan'</span><span class="p">:</span> <span class="s">'super-monthly'</span><span class="p">,</span>
                                       <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                       <span class="s">'product'</span><span class="p">:</span> <span class="s">'Super'</span><span class="p">,</span>
                                       <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                       <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'STOP_BILLING'</span><span class="p">}],</span>
                           <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'b769c9ec-0a13-4a8a-b686-c5bf1e56c158'</span><span class="p">}},</span>
             <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
              <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
              <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'c3fbb8a6-f297-41e5-8aa5-8098256b624a'</span><span class="p">,</span>
              <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'c3fbb8a6-f297-41e5-8aa5-8098256b624a'</span><span class="p">,</span>
              <span class="s">'subscriptions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
                                 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                                 <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                 <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'c3fbb8a6-f297-41e5-8aa5-8098256b624a'</span><span class="p">,</span>
                                 <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                 <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'4d4bde32-7bb9-448d-8066-aa67dea56658'</span><span class="p">,</span>
                                             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                                            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'4d8f7354-f4f7-43c5-bfae-353b6b8c2a0c'</span><span class="p">,</span>
                                             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                                            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                                             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'7d22b380-8796-420c-b0c2-3f7b71b7a171'</span><span class="p">,</span>
                                             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                                             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
                                 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'c3fbb8a6-f297-41e5-8aa5-8098256b624a'</span><span class="p">,</span>
                                 <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                 <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                 <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                 <span class="s">'price_overrides'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                                      <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                                      <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                                      <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                                      <span class="s">'recurring_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                                      <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]},</span>
                                                     <span class="p">{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                                      <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                                      <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
                                                      <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                                      <span class="s">'recurring_price'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
                                                      <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]}],</span>
                                 <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
                                 <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                 <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
                                 <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                 <span class="s">'state'</span><span class="p">:</span> <span class="s">'ACTIVE'</span><span class="p">,</span>
                                 <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'1a1f9e33-7720-4655-a74e-0ecf0a8f231e'</span><span class="p">}],</span>
              <span class="s">'timeline'</span><span class="p">:</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
                           <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                           <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'c3fbb8a6-f297-41e5-8aa5-8098256b624a'</span><span class="p">,</span>
                           <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                       <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                       <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                       <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'4d4bde32-7bb9-448d-8066-aa67dea56658'</span><span class="p">,</span>
                                       <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                       <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                       <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                       <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                       <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                       <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                       <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                                      <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                       <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                       <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                                       <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'4d8f7354-f4f7-43c5-bfae-353b6b8c2a0c'</span><span class="p">,</span>
                                       <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                       <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                       <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                       <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                       <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                       <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                       <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                                      <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                       <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                       <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                                       <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'7d22b380-8796-420c-b0c2-3f7b71b7a171'</span><span class="p">,</span>
                                       <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                                       <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                       <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                       <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                       <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                       <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                       <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                       <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
                           <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'c3fbb8a6-f297-41e5-8aa5-8098256b624a'</span><span class="p">}}],</span>
 <span class="s">'invoices'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
               <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="s">'c3fbb8a6-f297-41e5-8aa5-8098256b624a,b769c9ec-0a13-4a8a-b686-c5bf1e56c158'</span><span class="p">,</span>
               <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'credits'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
               <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
               <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'0c047109-6fba-4910-af8d-a200abbba5fb'</span><span class="p">,</span>
               <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'798'</span><span class="p">,</span>
               <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
               <span class="s">'items'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
               <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)},</span>
              <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
               <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="s">'b769c9ec-0a13-4a8a-b686-c5bf1e56c158'</span><span class="p">,</span>
               <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'credits'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
               <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
               <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'fa2f6484-530c-4209-884e-d09af0766663'</span><span class="p">,</span>
               <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'799'</span><span class="p">,</span>
               <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
               <span class="s">'items'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
               <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)},</span>
              <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
               <span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
               <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="s">''</span><span class="p">,</span>
               <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'credits'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
               <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
               <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'f12c98c1-782b-4d1a-bfb0-2e1233cf8cd7'</span><span class="p">,</span>
               <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'800'</span><span class="p">,</span>
               <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
               <span class="s">'items'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
               <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)}],</span>
 <span class="s">'payments'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
               <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
               <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'e9733c81-5d64-4d61-add2-90cb141ddf9d'</span><span class="p">,</span>
               <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'e9733c81-5d64-4d61-add2-90cb141ddf9d'</span><span class="p">,</span>
               <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'53b35b7b-e254-4c4b-b526-202c51a6e650'</span><span class="p">,</span>
               <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'309'</span><span class="p">,</span>
               <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
               <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'target_invoice_id'</span><span class="p">:</span> <span class="s">'f12c98c1-782b-4d1a-bfb0-2e1233cf8cd7'</span><span class="p">,</span>
               <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                                 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                                 <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                                 <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'e9733c81-5d64-4d61-add2-90cb141ddf9d'</span><span class="p">,</span>
                                 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'e9733c81-5d64-4d61-add2-90cb141ddf9d'</span><span class="p">,</span>
                                 <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                                 <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                                 <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                                 <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'74a7f569-8f0f-48c9-a927-a56e5c96f95b'</span><span class="p">,</span>
                                 <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'74a7f569-8f0f-48c9-a927-a56e5c96f95b'</span><span class="p">,</span>
                                 <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'PURCHASE'</span><span class="p">}]},</span>
              <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span><span class="p">,</span>
               <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
               <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
               <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
               <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'f2c8e79f-49cc-4893-98a5-38da61564949'</span><span class="p">,</span>
               <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'f2c8e79f-49cc-4893-98a5-38da61564949'</span><span class="p">,</span>
               <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'53b35b7b-e254-4c4b-b526-202c51a6e650'</span><span class="p">,</span>
               <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'310'</span><span class="p">,</span>
               <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
               <span class="s">'target_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
               <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                                 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                                 <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                                 <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'f2c8e79f-49cc-4893-98a5-38da61564949'</span><span class="p">,</span>
                                 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'f2c8e79f-49cc-4893-98a5-38da61564949'</span><span class="p">,</span>
                                 <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                                 <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                                 <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                 <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                                 <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'0b50c1a2-99df-48df-bd6b-38e30261c233'</span><span class="p">,</span>
                                 <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'0b50c1a2-99df-48df-bd6b-38e30261c233'</span><span class="p">,</span>
                                 <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'AUTHORIZE'</span><span class="p">}]}]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a complete account record including: the account object; bundles with subscriptions and timelines giving all events; invoices; and payments including payment attempts.</p>
<h1 id='payment-method'>Payment Method</h1><h2 id='payment-method-payment-method-resource'>Payment Method Resource</h2>
<p>The <code>Payment Method</code> resource represents the payment methods associated with a customer <code>Account</code>. There are two parts to the state associated with this resource, a first generic set of attributes kept by Kill Bill core subsystem, and another set of attributes kept at the (payment) plugin level.</p>

<ul>
<li>The core Kill Bill attributes shown below mostly track the associated payment plugin that is used to interract with the payment gateway.</li>
<li>The plugin attributes are typically the details about such customer payment method: In the case of a credit card for instance, the plugin would keep track of things like <code>name</code>, <code>address</code>, <code>last4</code>, and <code>token</code>. Not only are such attributes dependent on the payment method, but they are also dependent on the third party payment gateway, and on the tokenization model, which is why they are kept by the plugin (internal tables), and not by the Kill Bill core payment subsystem.</li>
</ul>

<p>Kill Bill also supports a more advanced use case for payment routing, where the choice of the payment gateway is decided at run time
based on custom business rules. Additional information can be found in our <a href="http://docs.killbill.io/latest/userguide_payment.html">Payment Manual</a>.</p>

<p>The Kill Bill attributes are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this payment method</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key provided by the client</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the associated account</td>
</tr>
<tr>
<td><strong>isDefault</strong></td>
<td>boolean</td>
<td>user</td>
<td>Indicates whether this is the default payment method</td>
</tr>
<tr>
<td><strong>pluginName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the associated plugin.</td>
</tr>
<tr>
<td><strong>pluginInfo</strong></td>
<td>string</td>
<td>user</td>
<td>Plugin specific information, as required.</td>
</tr>
</tbody></table>

<p>All payment operations associated with this payment method will be delegated to the plugin specified by <strong>pluginName</strong>.</p>
<h2 id='payment-method-payment-methods'>Payment Methods</h2>
<p>Basic operations to retrieve, list, search and delete payment methods.</p>

<p>Note that the creation of a payment method relies on an operation listed under the <a href="https://killbill.github.io/slate/#account-add-a-payment-method">Account resource</a>. The creation of a Kill Bill PaymentMethod is always associated with a given <code>Account</code> and it identifies (through its <code>pluginName</code> attribute) the payment plugin that will be used by the system when a payment is made. </p>
<h3 id='payment-method-retrieve-a-payment-method-by-id'>Retrieve a payment method by id</h3>
<p>Retrieve information on a payment method, given its payment method ID.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will include plugin info</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">PaymentMethod</span> <span class="n">paymentMethodJson</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethod</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                                    <span class="n">includedDeleted</span><span class="o">,</span> 
                                                                    <span class="n">withPluginInfo</span><span class="o">,</span> 
                                                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_method_id</span> <span class="o">=</span> <span class="s2">"6a0bf13e-d57f-4f79-84bd-3690135f1923"</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> 
                                                <span class="n">with_plugin_info</span><span class="p">,</span> 
                                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'0052cddd-0f61-4f68-b653-ca49b5d7f915'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">get_payment_method</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">{</span>
    <span class="s2">"paymentMethodId"</span>:<span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
    <span class="s2">"externalKey"</span>:<span class="s2">"coolPaymentMethod"</span>,
    <span class="s2">"accountId"</span>:<span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
    <span class="s2">"isDefault"</span>:false,
    <span class="s2">"pluginName"</span>:<span class="s2">"__EXTERNAL_PAYMENT__"</span>,
    <span class="s2">"pluginInfo"</span>:null,
    <span class="s2">"auditLogs"</span>:[]
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">PaymentMethod</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentMethod</span><span class="nd">@c789046</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">3</span><span class="n">c449da6</span><span class="o">-</span><span class="mi">7</span><span class="n">ec4</span><span class="o">-</span><span class="mi">4</span><span class="n">c74</span><span class="o">-</span><span class="mi">813</span><span class="n">f</span><span class="o">-</span><span class="n">f5055739a0b9</span>
    <span class="nl">externalKey:</span> <span class="mi">7</span><span class="n">c13b1fb</span><span class="o">-</span><span class="mi">5</span><span class="n">fa5</span><span class="o">-</span><span class="mi">49</span><span class="n">cb</span><span class="o">-</span><span class="n">bbb6</span><span class="o">-</span><span class="mi">50</span><span class="n">b0fa78a988</span>
    <span class="nl">accountId:</span> <span class="mi">2</span><span class="n">b995dde</span><span class="o">-</span><span class="n">ce30</span><span class="o">-</span><span class="mi">451</span><span class="n">f</span><span class="o">-</span><span class="mi">8</span><span class="n">bbf</span><span class="o">-</span><span class="mi">5</span><span class="n">bb9ed312505</span>
    <span class="nl">isDefault:</span> <span class="kc">true</span>
    <span class="nl">pluginName:</span> <span class="n">noop</span>
    <span class="nl">pluginInfo:</span> <span class="kd">class</span> <span class="nc">PaymentMethodPluginDetail</span> <span class="o">{</span>
        <span class="nl">externalPaymentMethodId:</span> <span class="n">afcdfd42</span><span class="o">-</span><span class="mi">1</span><span class="n">bad</span><span class="o">-</span><span class="mi">4</span><span class="n">caf</span><span class="o">-</span><span class="mi">86</span><span class="n">be</span><span class="o">-</span><span class="mi">93</span><span class="n">a27da51c55</span>
        <span class="nl">isDefaultPaymentMethod:</span> <span class="kc">false</span>
        <span class="nl">properties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_NAME</span>
            <span class="nl">value:</span> <span class="n">Bozo</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_CITY</span>
            <span class="nl">value:</span> <span class="n">SF</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_LAST_4</span>
            <span class="nl">value:</span> <span class="mi">4365</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_STATE</span>
            <span class="nl">value:</span> <span class="n">CA</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_COUNTRY</span>
            <span class="nl">value:</span> <span class="n">Zimbawe</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"6a0bf13e-d57f-4f79-84bd-3690135f1923"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"unknown"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"f9c4801f-0daa-4c46-bea0-59490d07fc5e"</span><span class="p">,</span>
   <span class="s2">"isDefault"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"pluginName"</span><span class="ss">:"__EXTERNAL_PAYMENT__"</span><span class="p">,</span>
   <span class="s2">"pluginInfo"</span><span class="p">:{</span>
      <span class="s2">"properties"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'9f2f95b9-7021-4645-9863-30feac25841a'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'unknown'</span><span class="p">,</span>
 <span class="s">'is_default'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'0052cddd-0f61-4f68-b653-ca49b5d7f915'</span><span class="p">,</span>
 <span class="s">'plugin_info'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'plugin_name'</span><span class="p">:</span> <span class="s">'__EXTERNAL_PAYMENT__'</span><span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted payment methods</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>yes</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>If <strong>withPluginInfo</strong> is set to true, attributes for the active plugin are returned. These are plugin-dependent (see discussion above).
Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a payment method resource object.</p>
<h3 id='payment-method-retrieve-a-payment-method-by-external-key'>Retrieve a payment method by external key</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19?externalKey=coolPaymentMethod'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"foo"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">PaymentMethod</span> <span class="n">paymentMethod</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethodByKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">,</span> 
                                                                     <span class="n">includedDeleted</span><span class="o">,</span>
                                                                     <span class="n">withPluginInfo</span><span class="o">,</span>
                                                                     <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span>
                                                                     <span class="n">equestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_method_ek</span> <span class="o">=</span> <span class="s2">"sample_external_key"</span>
<span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">payment_method_ek</span><span class="p">,</span>
                                                          <span class="n">included_deleted</span><span class="p">,</span>
                                                          <span class="n">with_plugin_info</span><span class="p">,</span>
                                                          <span class="n">audit</span><span class="p">,</span>
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">get_payment_method_by_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">{</span>
    <span class="s2">"paymentMethodId"</span>:<span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
    <span class="s2">"externalKey"</span>:<span class="s2">"coolPaymentMethod"</span>,
    <span class="s2">"accountId"</span>:<span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
    <span class="s2">"isDefault"</span>:false,
    <span class="s2">"pluginName"</span>:<span class="s2">"__EXTERNAL_PAYMENT__"</span>,
    <span class="s2">"pluginInfo"</span>:null,
    <span class="s2">"auditLogs"</span>:[]
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">PaymentMethod</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentMethod</span><span class="err">@</span><span class="mi">360</span><span class="n">d34cd</span>
    <span class="nl">paymentMethodId:</span> <span class="n">c46dbe85</span><span class="o">-</span><span class="n">a14b</span><span class="o">-</span><span class="mi">4</span><span class="n">d5b</span><span class="o">-</span><span class="mi">8</span><span class="n">b0d</span><span class="o">-</span><span class="n">e6a07b7ff111</span>
    <span class="nl">externalKey:</span> <span class="n">foo</span>
    <span class="nl">accountId:</span> <span class="n">dae298f7</span><span class="o">-</span><span class="mi">62</span><span class="n">b0</span><span class="o">-</span><span class="mi">4774</span><span class="o">-</span><span class="n">a213</span><span class="o">-</span><span class="mi">92</span><span class="n">f968693cdc</span>
    <span class="nl">isDefault:</span> <span class="kc">true</span>
    <span class="nl">pluginName:</span> <span class="n">noop</span>
    <span class="nl">pluginInfo:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"4307ac7c-04a7-41e1-9cb0-8a4d4420104c"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"sample_external_key"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"aba041a0-52f3-4d0d-b8e0-dec442dbc51e"</span><span class="p">,</span>
   <span class="s2">"isDefault"</span><span class="ss">:true</span><span class="p">,</span>
   <span class="s2">"pluginName"</span><span class="ss">:"__EXTERNAL_PAYMENT__"</span><span class="p">,</span>
   <span class="s2">"pluginInfo"</span><span class="p">:{</span>
      <span class="s2">"properties"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'1d1c63ae-fd71-4e0c-87d4-24a334335c49'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'sample_external_key'</span><span class="p">,</span>
 <span class="s">'is_default'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'882b2fa0-5946-487a-933c-b2572ea4383c'</span><span class="p">,</span>
 <span class="s">'plugin_info'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'plugin_name'</span><span class="p">:</span> <span class="s">'__EXTERNAL_PAYMENT__'</span><span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>External key</td>
</tr>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted payment methods</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>yes</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>If <strong>withPluginInfo</strong> is set to true, attributes for the active plugin are returned. These are plugin-dependent (see discussion above).
Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a payment method resource object.</p>
<h3 id='payment-method-delete-a-payment-method'>Delete a payment method</h3>
<p>This API deletes a payment method. The default payment method may not be deleted, depending on the query parameters.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19'</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">deleteDefaultPmWithAutoPayOff</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will delete default payment method with auto pay off</span>
<span class="n">Boolean</span> <span class="n">forceDefaultPmDeletion</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will force default payment method deletion</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">deletePaymentMethod</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                     <span class="n">deleteDefaultPmWithAutoPayOff</span><span class="o">,</span> 
                                     <span class="n">forceDefaultPmDeletion</span><span class="o">,</span> 
                                     <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_method_id</span> <span class="o">=</span> <span class="s2">"4307ac7c-04a7-41e1-9cb0-8a4d4420104c"</span>
<span class="n">set_auto_pay_off</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">force_default_deletion</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">destroy</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span>
                                             <span class="n">set_auto_pay_off</span><span class="p">,</span>
                                             <span class="n">force_default_deletion</span><span class="p">,</span>
                                             <span class="n">user</span><span class="p">,</span>
                                             <span class="n">reason</span><span class="p">,</span>
                                             <span class="n">comment</span><span class="p">,</span>
                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'0052cddd-0f61-4f68-b653-ca49b5d7f915'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">delete_payment_method</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> 
                                       <span class="n">created_by</span><span class="p">,</span> 
                                       <span class="n">api_key</span><span class="p">,</span> 
                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>  
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteDefaultPmWithAutoPayOff</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete default payment method only if AUTO_PAY_OFF is set</td>
</tr>
<tr>
<td><strong>forceDefaultPmDeletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, force default payment method deletion</td>
</tr>
</tbody></table>

<p>The query parameters determine the behavior if the payment method specified is the default method: If <strong>forceDefaultPmDeletion</strong> is true, the payment method will be deleted unconditionally. If <strong>deleteDefaultPmWithAutoPayOff</strong> is true, the payment method will also be deleted, and AUTO_PAY_OFF will be set (if not already). If neither parameter is true, the default payment method will not be deleted (the call will fail). </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body. If the payment method is the default and cannot be deleted, an error code of 500 and a suitable message will be returned.</p>
<h2 id='payment-method-list-and-search'>List and Search</h2>
<p>These endpoints provide the ability to list and search for payment methods for a specific tenant</p>
<h3 id='payment-method-list-payment-methods'>List payment methods</h3>
<p>List all payment methods stored for the accounts maintained by this tenant</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/pagination'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>


<span class="n">PaymentMethods</span> <span class="n">allPaymentMethods</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethods</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span>
                                                                      <span class="n">limit</span><span class="o">,</span>
                                                                      <span class="n">pluginName</span><span class="o">,</span>
                                                                      <span class="n">withPluginInfo</span>
                                                                      <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span>
                                                                      <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                               <span class="n">limit</span><span class="p">,</span>
                               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">get_payment_methods</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"paymentMethodId"</span>: <span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"coolPaymentMethod"</span>,
    <span class="s2">"accountId"</span>: <span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
    <span class="s2">"isDefault"</span>: <span class="nb">false</span>,
    <span class="s2">"pluginName"</span>: <span class="s2">"__EXTERNAL_PAYMENT__"</span>,
    <span class="s2">"pluginInfo"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"paymentMethodId"</span>: <span class="s2">"dc89832d-18a3-42fd-b3be-cac074fddb36"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"paypal"</span>,
    <span class="s2">"accountId"</span>: <span class="s2">"ca15adc4-1061-4e54-a9a0-15e773b3b154"</span>,
    <span class="s2">"isDefault"</span>: <span class="nb">false</span>,
    <span class="s2">"pluginName"</span>: <span class="s2">"killbill-paypal-express"</span>,
    <span class="s2">"pluginInfo"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">PaymentMethod</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentMethod</span><span class="err">@</span><span class="mi">3</span><span class="n">b058e2d</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">98420</span><span class="n">efb</span><span class="o">-</span><span class="mi">142</span><span class="n">f</span><span class="o">-</span><span class="mi">4437</span><span class="o">-</span><span class="mi">9</span><span class="n">a93</span><span class="o">-</span><span class="mi">817</span><span class="n">ded413313</span>
    <span class="nl">externalKey:</span> <span class="n">e78ae144</span><span class="o">-</span><span class="mi">8727</span><span class="o">-</span><span class="mi">46</span><span class="n">f4</span><span class="o">-</span><span class="mi">8</span><span class="n">cf2</span><span class="o">-</span><span class="mi">63636813</span><span class="n">f232</span>
    <span class="nl">accountId:</span> <span class="mi">73</span><span class="n">f59eee</span><span class="o">-</span><span class="n">abec</span><span class="o">-</span><span class="mi">4</span><span class="n">d3f</span><span class="o">-</span><span class="n">ab62</span><span class="o">-</span><span class="mi">21</span><span class="n">dba663bd25</span>
    <span class="nl">isDefault:</span> <span class="kc">true</span>
    <span class="nl">pluginName:</span> <span class="n">noop</span>
    <span class="nl">pluginInfo:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
  <span class="p">{</span>
     <span class="s2">"paymentMethodId"</span><span class="ss">:"6a0bf13e-d57f-4f79-84bd-3690135f1923"</span><span class="p">,</span>
     <span class="s2">"externalKey"</span><span class="ss">:"unknown"</span><span class="p">,</span>
     <span class="s2">"accountId"</span><span class="ss">:"f9c4801f-0daa-4c46-bea0-59490d07fc5e"</span><span class="p">,</span>
     <span class="s2">"isDefault"</span><span class="ss">:false</span><span class="p">,</span>
     <span class="s2">"pluginName"</span><span class="ss">:"__EXTERNAL_PAYMENT__"</span><span class="p">,</span>
     <span class="s2">"pluginInfo"</span><span class="p">:{</span>
        <span class="s2">"properties"</span><span class="ss">:[]</span>
     <span class="p">},</span>
     <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'5d82791d-c47f-4c4b-be11-b68233656b96'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'unknown'</span><span class="p">,</span>
 <span class="s">'is_default'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'06955087-e191-4da5-99c9-e712b21f6aa6'</span><span class="p">,</span>
 <span class="s">'plugin_info'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'plugin_name'</span><span class="p">:</span> <span class="s">'__EXTERNAL_PAYMENT__'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting position in list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Max number of items to return</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>pluginName</strong></td>
<td>string</td>
<td>no</td>
<td>all plugins</td>
<td>If present, list only payment methods that use this plugin</td>
</tr>
<tr>
<td><strong>pluginProperties</strong></td>
<td>array of strings</td>
<td>no</td>
<td>no properties</td>
<td>return these properties for this plugin</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>If <strong>withPluginInfo</strong> is set to true, attributes for each payment method&#39;s plugin are returned. These are plugin-dependent (see discussion above). If <strong>pluginName</strong> is given, list only payment methods that use this plugin, and return only the attributes specified by <strong>pluginProperties</strong>.
Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment method resource objects.</p>
<h3 id='payment-method-search-payment-methods'>Search payment methods</h3>
<p>This API searches all payment methods for a specified search string. The search string is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/search/coolPaymentMethod'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"4365"</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">100L</span><span class="o">;</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">PaymentMethod</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">searchPaymentMethods</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                                                                    <span class="n">offset</span><span class="o">,</span> 
                                                                    <span class="n">limit</span><span class="o">,</span> 
                                                                    <span class="n">pluginName</span><span class="o">,</span> 
                                                                    <span class="n">withPluginInfo</span><span class="o">,</span> 
                                                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span>  
                                                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>  
                                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'example'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                             <span class="n">offset</span><span class="p">,</span>
                                             <span class="n">limit</span><span class="p">,</span>
                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'__EXTERNAL_PAYMENT__'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">search_payment_methods</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"paymentMethodId"</span>: <span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"coolPaymentMethod"</span>,
    <span class="s2">"accountId"</span>: <span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
    <span class="s2">"isDefault"</span>: <span class="nb">false</span>,
    <span class="s2">"pluginName"</span>: <span class="s2">"__EXTERNAL_PAYMENT__"</span>,
    <span class="s2">"pluginInfo"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">PaymentMethod</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentMethod</span><span class="err">@</span><span class="mi">6</span><span class="n">b40b41a</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">62</span><span class="n">c434f7</span><span class="o">-</span><span class="mi">41</span><span class="n">fe</span><span class="o">-</span><span class="mi">497</span><span class="n">d</span><span class="o">-</span><span class="mi">8</span><span class="n">fb0</span><span class="o">-</span><span class="n">c35bb6706180</span>
    <span class="nl">externalKey:</span> <span class="mi">4</span><span class="n">ac4162a</span><span class="o">-</span><span class="n">ae9c</span><span class="o">-</span><span class="mi">48</span><span class="n">ca</span><span class="o">-</span><span class="n">bb43</span><span class="o">-</span><span class="mi">8</span><span class="n">a4bcd6c2717</span>
    <span class="nl">accountId:</span> <span class="n">a6941a79</span><span class="o">-</span><span class="mi">8</span><span class="n">b7b</span><span class="o">-</span><span class="mi">4</span><span class="n">da7</span><span class="o">-</span><span class="mi">99</span><span class="n">e0</span><span class="o">-</span><span class="n">bffc3d549f87</span>
    <span class="nl">isDefault:</span> <span class="kc">true</span>
    <span class="nl">pluginName:</span> <span class="n">noop</span>
    <span class="nl">pluginInfo:</span> <span class="kd">class</span> <span class="nc">PaymentMethodPluginDetail</span> <span class="o">{</span>
        <span class="nl">externalPaymentMethodId:</span> <span class="mi">9</span><span class="n">ddcce2d</span><span class="o">-</span><span class="n">b65f</span><span class="o">-</span><span class="mi">4</span><span class="n">e08</span><span class="o">-</span><span class="mi">8006</span><span class="o">-</span><span class="mi">1395</span><span class="n">e47ba97a</span>
        <span class="nl">isDefaultPaymentMethod:</span> <span class="kc">false</span>
        <span class="nl">properties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_NAME</span>
            <span class="nl">value:</span> <span class="n">Bozo</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_CITY</span>
            <span class="nl">value:</span> <span class="n">SF</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_LAST_4</span>
            <span class="nl">value:</span> <span class="mi">4365</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_STATE</span>
            <span class="nl">value:</span> <span class="n">CA</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">CC_COUNTRY</span>
            <span class="nl">value:</span> <span class="n">Zimbawe</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
  <span class="p">{</span>
     <span class="s2">"paymentMethodId"</span><span class="ss">:"6a0bf13e-d57f-4f79-84bd-3690135f1923"</span><span class="p">,</span>
     <span class="s2">"externalKey"</span><span class="ss">:"unknown"</span><span class="p">,</span>
     <span class="s2">"accountId"</span><span class="ss">:"f9c4801f-0daa-4c46-bea0-59490d07fc5e"</span><span class="p">,</span>
     <span class="s2">"isDefault"</span><span class="ss">:false</span><span class="p">,</span>
     <span class="s2">"pluginName"</span><span class="ss">:"__EXTERNAL_PAYMENT__"</span><span class="p">,</span>
     <span class="s2">"pluginInfo"</span><span class="p">:{</span>
        <span class="s2">"properties"</span><span class="ss">:[]</span>
     <span class="p">},</span>
     <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'81d8b04d-dee1-49bf-bc73-48219df21af9'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'unknown'</span><span class="p">,</span>
 <span class="s">'is_default'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'bcecaf3f-16c7-4d65-aed0-b08cc5e34a6b'</span><span class="p">,</span>
 <span class="s">'plugin_info'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'plugin_name'</span><span class="p">:</span> <span class="s">'__EXTERNAL_PAYMENT__'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting position in list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Max number of items to return</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>pluginName</strong></td>
<td>string</td>
<td>no</td>
<td>all plugins</td>
<td>If present, list only payment methods that use this plugin</td>
</tr>
<tr>
<td><strong>pluginProperties</strong></td>
<td>array of strings</td>
<td>no</td>
<td>no properties</td>
<td>return these properties for this plugin</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>If <strong>withPluginInfo</strong> is set to true, attributes for each payment method&#39;s plugin are returned. These are plugin-dependent (see discussion above). If <strong>pluginName</strong> is given, list only payment methods that use this plugin, and return only the attributes specified by <strong>pluginProperties</strong>.
Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment method resource objects that match the search key.</p>
<h2 id='payment-method-custom-fields'>Custom Fields</h2>
<p><code>Custom fields</code> are <code>{key, value}</code> attributes that can be attached to any customer resources. For more on custom fields see <a href="#custom-fields">Custom Fields</a>. These endpoints manage custom fields associated with <code>PaymentMethod</code> objects.</p>
<h3 id='payment-method-add-custom-fields-to-a-payment-method'>Add custom fields to a payment method</h3>
<p>Adds one or more custom fields to a payment method object. Existing custom fields are not disturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "objectId": "916619a4-02bb-4d3d-b3da-2584ac897b19",
            "objectType": "PAYMENT_METHOD",
            "name": "Test Custom Field",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">paymentMethodId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">PAYMENT_METHOD</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">createPaymentMethodCustomFields</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                 <span class="n">customFields</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'PAYMENT_METHOD'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                                <span class="n">user</span><span class="p">,</span>
                                <span class="n">reason</span><span class="p">,</span>
                                <span class="n">comment</span><span class="p">,</span>
                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">create_payment_method_custom_fields</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span>
                                                     <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                     <span class="n">created_by</span><span class="p">,</span>
                                                     <span class="n">api_key</span><span class="p">,</span>
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/customFields
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">3</span><span class="n">c449da6</span><span class="o">-</span><span class="mi">7</span><span class="n">ec4</span><span class="o">-</span><span class="mi">4</span><span class="n">c74</span><span class="o">-</span><span class="mi">813</span><span class="n">f</span><span class="o">-</span><span class="n">f5055739a0b9</span>
    <span class="nl">objectType:</span> <span class="n">PAYMENT_METHOD</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"PAYMENT_METHOD"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects giving the name and value of the custom field, or fields, to be added. For example:</p>

<p>[
  {
    &quot;name&quot;: &quot;CF1&quot;,
    &quot;value&quot;: &quot;123&quot;
  }
]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='payment-method-retrieve-payment-method-custom-fields'>Retrieve payment method custom fields</h3>
<p>Returns any custom field objects associated with the specified payment method</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethodCustomFields</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span>
                                                                               <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">get_payment_method_custom_fields</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> 
                                                  <span class="n">api_key</span><span class="p">,</span> 
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"6d4c073b-fd89-4e39-9802-eba65f42492f"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"PAYMENT_METHOD"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Test Custom Field"</span>,
    <span class="s2">"value"</span>: <span class="s2">"test_value"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">3</span><span class="n">c449da6</span><span class="o">-</span><span class="mi">7</span><span class="n">ec4</span><span class="o">-</span><span class="mi">4</span><span class="n">c74</span><span class="o">-</span><span class="mi">813</span><span class="n">f</span><span class="o">-</span><span class="n">f5055739a0b9</span>
    <span class="nl">objectType:</span> <span class="n">PAYMENT_METHOD</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"PAYMENT_METHOD"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'custom_field_id'</span><span class="p">:</span> <span class="s">'5670b594-9317-4aeb-bfef-2c2342ec172a'</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'Test Custom Field'</span><span class="p">,</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'PAYMENT_METHOD'</span><span class="p">,</span>
 <span class="s">'value'</span><span class="p">:</span> <span class="s">'test_value'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='payment-method-modify-custom-fields-for-payment-method'>Modify custom fields for payment method</h3>
<p>Modifies the value of one or more existing custom fields associated with a payment object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "6d4c073b-fd89-4e39-9802-eba65f42492f",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">modifyPaymentMethodCustomFields</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                 <span class="n">customFieldModified</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                                   <span class="n">user</span><span class="p">,</span> 
                                   <span class="n">reason</span><span class="p">,</span>
                                   <span class="n">comment</span><span class="p">,</span> 
                                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">modify_payment_method_custom_fields</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> 
                                                     <span class="p">[</span><span class="n">body</span><span class="p">],</span> 
                                                     <span class="n">created_by</span><span class="p">,</span> 
                                                     <span class="n">api_key</span><span class="p">,</span> 
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects giving the id and the new value for the custom field, or fields, to be modified. For example:</p>

<p>[<br>
  {<br>
    &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;,<br>
    &quot;value&quot;: &quot;123&quot;<br>
  }<br>
]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, a status code of 204 and an empty body.</p>
<h3 id='payment-method-remove-custom-fields-from-payment-method'>Remove custom fields from payment method</h3>
<p>Delete one or more custom fields from a payment method</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/77e23878-8b9d-403b-bf31-93003e125712/customFields?customField=439ed0f8-9b37-4688-bace-e2595b1d3801'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">deletePaymentMethodCustomFields</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                 <span class="n">customFieldsId</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                                   <span class="n">user</span><span class="p">,</span> 
                                   <span class="n">reason</span><span class="p">,</span>
                                   <span class="n">comment</span><span class="p">,</span> 
                                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">delete_payment_method_custom_fields</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span>
                                                     <span class="n">created_by</span><span class="p">,</span>
                                                     <span class="n">api_key</span><span class="p">,</span> 
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>the list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='payment-method-audit-logs'>Audit Logs</h2>
<p>This endpoint enables access to payment method audit logs. For more on audit logs see the Audit and History section under Using Kill Bill APIs.</p>
<h3 id='payment-method-retrieve-payment-method-audit-logs-with-history-by-id'>Retrieve payment method audit logs with history by id</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/auditLogsWithHistory'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e9d95f16-a426-46d0-b76b-90814792fb36"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethodAuditLogsWithHistory</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span>
<span class="n">account_email_id</span> <span class="o">=</span> <span class="s">'bb390282-6757-4f4f-8dd5-456abd9f30b2'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_email_audit_logs_with_history</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                     <span class="n">account_email_id</span><span class="p">,</span>
                                                     <span class="n">api_key</span><span class="p">,</span>
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_email_id</span> <span class="o">=</span> <span class="s1">'a4627e89-a73b-4167-a7ba-92a2881eb3c4'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">email_audit_logs_with_history</span><span class="p">(</span><span class="n">account_email_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-19T14:56:07.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"PAYMENT_METHOD"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"admin"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"f77892e9-32bd-4d59-8039-5e12798b53fe"</span>,
    <span class="s2">"history"</span>: 
    <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2018-07-19T14:56:07.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2018-07-19T14:56:07.000Z"</span>,
      <span class="s2">"recordId"</span>: 10,
      <span class="s2">"accountRecordId"</span>: 35,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"externalKey"</span>: <span class="s2">"unknown"</span>,
      <span class="s2">"accountId"</span>: <span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
      <span class="s2">"pluginName"</span>: <span class="s2">"__EXTERNAL_PAYMENT__"</span>,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"active"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"PAYMENT_METHODS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"PAYMENT_METHOD_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
    <span class="nl">changeType:</span> <span class="n">INSERT</span>
    <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">03.000</span><span class="n">Z</span>
    <span class="nl">objectType:</span> <span class="n">PAYMENT_METHOD</span>
    <span class="nl">objectId:</span> <span class="n">e9d95f16</span><span class="o">-</span><span class="n">a426</span><span class="o">-</span><span class="mi">46</span><span class="n">d0</span><span class="o">-</span><span class="n">b76b</span><span class="o">-</span><span class="mi">90814792</span><span class="n">fb36</span>
    <span class="nl">changedBy:</span> <span class="n">Toto</span>
    <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
    <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
    <span class="nl">userToken:</span> <span class="mi">081</span><span class="n">ae8a2</span><span class="o">-</span><span class="n">b267</span><span class="o">-</span><span class="mi">4808</span><span class="o">-</span><span class="mi">8</span><span class="n">ae9</span><span class="o">-</span><span class="n">eb60f4e5a2d5</span>
    <span class="nl">history:</span> <span class="o">{</span><span class="n">id</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">createdDate</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">03.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">updatedDate</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">03.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">recordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">accountRecordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">tenantRecordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">externalKey</span><span class="o">=</span><span class="mi">85905</span><span class="n">d6e</span><span class="o">-</span><span class="mi">64</span><span class="n">d6</span><span class="o">-</span><span class="mi">4</span><span class="n">ac9</span><span class="o">-</span><span class="mi">85</span><span class="n">d5</span><span class="o">-</span><span class="mi">0</span><span class="n">ce45d37a426</span><span class="o">,</span> 
              <span class="n">accountId</span><span class="o">=</span><span class="mi">58780</span><span class="n">aff</span><span class="o">-</span><span class="n">a193</span><span class="o">-</span><span class="mi">4544</span><span class="o">-</span><span class="mi">9</span><span class="n">f82</span><span class="o">-</span><span class="mi">6</span><span class="n">b3d91b040ac</span><span class="o">,</span> 
              <span class="n">pluginName</span><span class="o">=</span><span class="n">noop</span><span class="o">,</span> 
              <span class="n">isActive</span><span class="o">=</span><span class="kc">true</span><span class="o">,</span> 
              <span class="n">active</span><span class="o">=</span><span class="kc">true</span><span class="o">,</span> 
              <span class="n">tableName</span><span class="o">=</span><span class="n">PAYMENT_METHODS</span><span class="o">,</span> 
              <span class="n">historyTableName</span><span class="o">=</span><span class="n">PAYMENT_METHOD_HISTORY</span><span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
      <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT_EMAIL"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"a4627e89-a73b-4167-a7ba-92a2881eb3c4"</span><span class="p">,</span>
      <span class="s2">"changedBy"</span><span class="ss">:"test_account_tags"</span><span class="p">,</span>
      <span class="s2">"userToken"</span><span class="ss">:"79005abf-a8cf-44e1-84fc-945381d35bd5"</span><span class="p">,</span>
      <span class="s2">"history"</span><span class="p">:{</span>
         <span class="s2">"id"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"createdDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"updatedDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"recordId"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span>
         <span class="s2">"accountRecordId"</span><span class="p">:</span><span class="mi">525</span><span class="p">,</span>
         <span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="mi">842</span><span class="p">,</span>
         <span class="s2">"accountId"</span><span class="ss">:"1ced5fc2-b032-4969-a38b-d4db9ab5368f"</span><span class="p">,</span>
         <span class="s2">"email"</span><span class="ss">:"email@laposte.com"</span><span class="p">,</span>
         <span class="s2">"isActive"</span><span class="ss">:true</span><span class="p">,</span>
         <span class="s2">"tableName"</span><span class="ss">:"ACCOUNT_EMAIL"</span><span class="p">,</span>
         <span class="s2">"historyTableName"</span><span class="ss">:"ACCOUNT_EMAIL_HISTORY"</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'change_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'change_type'</span><span class="p">:</span> <span class="s">'INSERT'</span><span class="p">,</span>
 <span class="s">'changed_by'</span><span class="p">:</span> <span class="s">'Me'</span><span class="p">,</span>
 <span class="s">'comments'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'history'</span><span class="p">:</span> <span class="p">{</span><span class="s">'created_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
             <span class="s">'id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'updated_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())},</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'bb390282-6757-4f4f-8dd5-456abd9f30b2'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT_EMAIL'</span><span class="p">,</span>
 <span class="s">'reason_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'user_token'</span><span class="p">:</span> <span class="s">'548055b7-2c5e-4315-9293-d76c00bd9737'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of payment method audit logs with history.</p>
<h1 id='subscription'>Subscription</h1>
<p>A <code>Subscription</code> in Kill Bill entitles a customer to the use of a product or service for a period of time in exchange for a specified payment. Every subscription belongs to a <code>Bundle</code> that is associated with a given customer <code>Account</code>.</p>

<p>Subscriptions are created by specifying a <code>Plan</code> from the catalog, and an effective date on which to start. The Plan identifies the <code>Product</code> subscribed along with the terms of service and of billing. These attributes are used by the system to drive the generation of invoices. Kill Bill offers two parallel views of the subscription: one to track the entitlement, i.e the service associated with the subscription, and one to track the billing. These views address the following questions:</p>

<ul>
<li>Given a date, how much should we invoice ?</li>
<li>Given a date, is the service available to the customer? </li>
</ul>

<p>For most use cases, those two views are one and the same; the customer gets invoiced for what she consumes.</p>

<p>Please refer to our <a href="http://docs.killbill.io/latest/userguide_subscription.html">subscription manual</a> for more details.</p>
<h2 id='subscription-subscription-resource'>Subscription Resource</h2>
<p>The <code>Subscription</code> resource represents a subscription. The attributes contained in the subscription resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the bundle</td>
</tr>
<tr>
<td><strong>sunscriptiontId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this subscription</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key for the subscription</td>
</tr>
<tr>
<td><strong>bundleExternalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key for the bundle</td>
</tr>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>user</td>
<td>The date the service (entitlement) starts</td>
</tr>
<tr>
<td><strong>productName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the product subscribed (from catalog)</td>
</tr>
<tr>
<td><strong>productCategory</strong></td>
<td>string</td>
<td>user</td>
<td>Product catgory (see notes below)</td>
</tr>
<tr>
<td><strong>billingPeriod</strong></td>
<td>string</td>
<td>user</td>
<td>Billing period (see notes below)</td>
</tr>
<tr>
<td><strong>phaseType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the current plan phase (see notes below)</td>
</tr>
<tr>
<td><strong>priceList</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the current price list (from catalog)</td>
</tr>
<tr>
<td><strong>planName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the current plan (from catalog)</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>string</td>
<td>system</td>
<td>Current state of the subscription (see notes below)</td>
</tr>
<tr>
<td><strong>sourceType</strong></td>
<td>string</td>
<td>system</td>
<td>Kind of subscription (see notes below)</td>
</tr>
<tr>
<td><strong>cancelledDate</strong></td>
<td>date</td>
<td>user</td>
<td>Date when the service stopped, or will stop</td>
</tr>
<tr>
<td><strong>chargedThroughDate</strong></td>
<td>date</td>
<td>system</td>
<td>Date up to which the subscription has been invoiced (see notes below)</td>
</tr>
<tr>
<td><strong>billingStartDate</strong></td>
<td>date</td>
<td>user</td>
<td>Date on which the system starts invoicing</td>
</tr>
<tr>
<td><strong>billingEndDate</strong></td>
<td>date</td>
<td>user</td>
<td>Date on which the system ends invoicing</td>
</tr>
<tr>
<td><strong>billCycleDayLocal</strong></td>
<td>integer</td>
<td>user or system</td>
<td>Day of the month on which invoices are generated, if applicable (see notes below)</td>
</tr>
<tr>
<td><strong>events</strong></td>
<td>list</td>
<td>system</td>
<td>list of subscription events tracking what happened (see notes below)</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td>list</td>
<td>user</td>
<td>list of prices, one for each phase in the plan</td>
</tr>
<tr>
<td><strong>priceOverrides</strong></td>
<td>list</td>
<td>user</td>
<td>list of prices if this subscription has price overrides</td>
</tr>
</tbody></table>

<p><strong>productCategory</strong>: possible values are BASE, ADD_ON, or STANDALONE</p>

<p><strong>billingPeriod</strong>: possible values are DAILY, WEEKLY, BIWEEKLY, THIRTY_DAYS, SIXTY_DAYS, NINETY_DAYS, MONTHLY, BIMESTRIAL (bimonthly), QUARTERLY, TRIANNUAL, BIANNUAL, ANNUAL, BIENNIAL, or NO_BILLING_PERIOD</p>

<p><strong>phaseType</strong>: possible values are: TRIAL, DISCOUNT, FIXEDTERM, or EVERGREEN</p>

<p><strong>state</strong>: possible values are:</p>

<ul>
<li><code>PENDING</code>: The subscription is not yet created.</li>
<li><code>ACTIVE</code>: The subscription is currently active.</li>
<li><code>BLOCKED</code>: The subscription is currently paused.</li>
<li><code>CANCELLED</code>: The subscription has been cancelled.</li>
</ul>

<p><strong>sourceType</strong>: possible values are NATIVE, MIGRATED, or TRANSFERRED </p>

<p><strong><code>chargedThroughDate</code></strong>: The date up to which the entitlement for this subscription has been invoiced. For <code>IN_ADVANCE</code> billing mode, this date will often be in the future; for <code>IN_ARREAR</code>, this date will often be in the past. For example,</p>

<ol>
<li><p>A subscription is billed each month, on the 15th, in advance. If we check on May 31, the <code>chargedThroughDate</code> will be June 15th, 15 days ahead. If the subscription is ended on May 31, a prorated credit will need to be issued.</p></li>
<li><p>A subscription is billed quarterly, in arrears, on the 10th of Feb., May, Aug., and Nov. If we check on Jul. 20, the <code>chargedThroughDate</code> will be May 10, over 2 months earlier. If the subscription is cancelled on Jul. 20, an additional invoice will need to be issued.</p></li>
</ol>

<p>These use cases assume that invoicing is up to date. If AUTO_INVOICING_OFF is set, invoicing relies on a manual process and may be late. In that situation the first use case may require a smaller credit or none at all, while the second case will have a larger amount to be billed to close out the subscription.</p>

<p><strong><code>billCycleDayLocal</code></strong>: this value is either the overridden subscription billCycleDay (in case of BCD change) or the value at the subscription, bundle or account level (depending on the catalog <a href="http://docs.killbill.io/latest/userguide_subscription.html#_billing_alignment_rules">billing alignments</a>). For <code>ACCOUNT</code> billing alignments, if the account level billCycleDay hasn&#39;t been set yet, the value returned would be null.</p>

<p><strong><code>Events</code></strong>: possible event types are START_ENTITLEMENT, START_BILLING, PAUSE_ENTITLEMENT, PAUSE_BILLING, RESUME_ENTITLEMENT, RESUME_BILLING, PHASE, CHANGE, STOP_ENTITLEMENT, STOP_BILLING, SERVICE_STATE_CHANGE</p>
<h2 id='subscription-subscriptions'>Subscriptions</h2>
<p>These endpoints support the basic CRUD operations on Subscriptions.</p>
<h3 id='subscription-create-a-subscription'>Create a subscription</h3>
<p>This API creates a base product subscription. It also creates a bundle to contain the subscription. See <a href="https://killbill.github.io/slate/#bundle">Bundle</a> for further information.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "accountId": "581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3",
            "externalKey": "somethingSpecial",
            "planName": "super-monthly"
        }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/subscriptions"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">input</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountJson</span><span class="o">.</span><span class="na">getAccountId</span><span class="o">());</span>
<span class="n">input</span><span class="o">.</span><span class="na">setExternalKey</span><span class="o">(</span><span class="s">"somethingSpecial"</span><span class="o">);</span>
<span class="n">input</span><span class="o">.</span><span class="na">setPlanName</span><span class="o">(</span><span class="s">"shotgun-monthly"</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">entitlementDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">billingDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">renameKeyIfExistsAndUnused</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> 
<span class="n">Boolean</span> <span class="n">migrated</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Integer</span> <span class="n">bcd</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">callCompletion</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Subscription</span> <span class="n">subscription</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscription</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> 
                                                               <span class="n">entitlementDate</span><span class="o">,</span> 
                                                               <span class="n">billingDate</span><span class="o">,</span> 
                                                               <span class="n">renameKeyIfExistsAndUnused</span><span class="o">,</span> 
                                                               <span class="n">migrated</span><span class="o">,</span> 
                                                               <span class="n">bcd</span><span class="o">,</span> 
                                                               <span class="n">callCompletion</span><span class="o">,</span> 
                                                               <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span><span class="o">,</span> 
                                                               <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span>              <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">new</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">account_id</span>   <span class="o">=</span> <span class="s2">"e1826665-4524-4d57-81b5-a5eb11146f3f"</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">plan_name</span>    <span class="o">=</span> <span class="s2">"basic-monthly-in-advance"</span>

<span class="n">requested_date</span>  <span class="o">=</span> <span class="kp">nil</span>
<span class="n">call_completion</span> <span class="o">=</span> <span class="kp">nil</span> 

<span class="n">subscription</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">requested_date</span><span class="p">,</span> 
                    <span class="n">call_completion</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'e1826665-4524-4d57-81b5-a5eb11146f3f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span> <span class="n">plan_name</span><span class="o">=</span><span class="s">'standard-monthly'</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                    <span class="n">created_by</span><span class="p">,</span>
                                    <span class="n">api_key</span><span class="p">,</span>
                                    <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="err">@</span><span class="mi">49563466</span>
    <span class="nl">accountId:</span> <span class="n">e8cd6795</span><span class="o">-</span><span class="mi">0</span><span class="n">da1</span><span class="o">-</span><span class="mi">4848</span><span class="o">-</span><span class="mi">831</span><span class="n">f</span><span class="o">-</span><span class="mi">51977</span><span class="n">eed42b1</span>
    <span class="nl">bundleId:</span> <span class="n">eac6eecf</span><span class="o">-</span><span class="mi">2060</span><span class="o">-</span><span class="mi">434</span><span class="n">a</span><span class="o">-</span><span class="n">b472</span><span class="o">-</span><span class="mi">170</span><span class="n">f80a7591c</span>
    <span class="nl">subscriptionId:</span> <span class="n">a74081ee</span><span class="o">-</span><span class="n">d7bb</span><span class="o">-</span><span class="mi">4387</span><span class="o">-</span><span class="n">a1df</span><span class="o">-</span><span class="mi">34</span><span class="n">e962e37699</span>
    <span class="nl">externalKey:</span> <span class="n">somethingSpecial</span>
    <span class="nl">bundleExternalKey:</span> <span class="n">somethingAlsoSpecial</span>
    <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">productName:</span> <span class="n">Shotgun</span>
    <span class="nl">productCategory:</span> <span class="n">BASE</span>
    <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
    <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
    <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
    <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
    <span class="nl">state:</span> <span class="n">ACTIVE</span>
    <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
    <span class="nl">cancelledDate:</span> <span class="kc">null</span>
    <span class="nl">chargedThroughDate:</span> <span class="kc">null</span>
    <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">billingEndDate:</span> <span class="kc">null</span>
    <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
    <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">37</span><span class="n">b70727</span>
        <span class="nl">eventId:</span> <span class="mi">9</span><span class="n">ef798a3</span><span class="o">-</span><span class="mi">95</span><span class="n">f6</span><span class="o">-</span><span class="mi">41</span><span class="n">ac</span><span class="o">-</span><span class="mi">9</span><span class="n">b86</span><span class="o">-</span><span class="mo">00</span><span class="n">c9385c155f</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">product:</span> <span class="n">Shotgun</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
        <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
        <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
        <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
        <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
        <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">410923</span><span class="n">f5</span>
        <span class="nl">eventId:</span> <span class="mi">65</span><span class="n">ec07fa</span><span class="o">-</span><span class="mi">61</span><span class="n">c7</span><span class="o">-</span><span class="mi">4</span><span class="n">f05</span><span class="o">-</span><span class="n">bd6f</span><span class="o">-</span><span class="mi">82</span><span class="n">cea23cf06a</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">product:</span> <span class="n">Shotgun</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
        <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
        <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
        <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
        <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
        <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@cac84db3</span>
        <span class="nl">eventId:</span> <span class="mi">88</span><span class="n">f77a50</span><span class="o">-</span><span class="n">edca</span><span class="o">-</span><span class="mi">4</span><span class="n">cc3</span><span class="o">-</span><span class="n">b234</span><span class="o">-</span><span class="mi">5</span><span class="n">d70c457128c</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">product:</span> <span class="n">Shotgun</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">eventType:</span> <span class="n">PHASE</span>
        <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
        <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
        <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
        <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
        <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">priceOverrides:</span> <span class="kc">null</span>
    <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">fixedPrice:</span> <span class="mi">0</span>
        <span class="nl">recurringPrice:</span> <span class="kc">null</span>
        <span class="nl">usagePrices:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
        <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
        <span class="nl">fixedPrice:</span> <span class="kc">null</span>
        <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
        <span class="nl">usagePrices:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"e1826665-4524-4d57-81b5-a5eb11146f3f"</span><span class="p">,</span>
   <span class="s2">"bundleId"</span><span class="ss">:"f3dea847-1567-467a-8373-838dfdcf6afc"</span><span class="p">,</span>
   <span class="s2">"subscriptionId"</span><span class="ss">:"ee508b5b-46b8-42a7-8988-16c0470de4ae"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"f3dea847-1567-467a-8373-838dfdcf6afc"</span><span class="p">,</span>
   <span class="s2">"bundleExternalKey"</span><span class="ss">:"addea847-1467-167a-1373-988dfdcf7acc"</span><span class="p">,</span>
   <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"productName"</span><span class="ss">:"Basic"</span><span class="p">,</span>
   <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
   <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
   <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
   <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
   <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
   <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
   <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
   <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
   <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
   <span class="s2">"events"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"341fc529-612b-4bb9-b8d7-ee4a9115f577"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"caa54161-c001-44a0-9ff0-80be59989380"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"prices"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"asic-monthly-in-advance-trial"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
         <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"recurringPrice"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"usagePrices"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
         <span class="s2">"fixedPrice"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"usagePrices"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A subscription resource object specifying <code>accountId</code>, optional <code>externalKey</code>, and <code>planName</code>.</p>

<p>Also, note that one can atomically change the per-subscription BCD while making this call by specifying a new date in the field body <code>billCycleDayLocal</code>. This allows changes to be made to realign the billing with the date of the change.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>entitlementDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the entitlement (sevice) starts.</td>
</tr>
<tr>
<td><strong>billingDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the billing starts.</td>
</tr>
<tr>
<td><strong>renameKeyIfExistsAndUnused</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>If true, rename external key if it exists and is unused</td>
</tr>
<tr>
<td><strong>migrated</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, subscription is migrated</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p>Creating a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> parameter is returned in the header which contains the new subscription id.</p>
<h3 id='subscription-create-a-subscription-with-addon-products'>Create a subscription with addon products</h3>
<p>This API creates an addon product subscription. The bundle for the base subscription must be specified.</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionWithAddOns</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[
          {
            "accountId": "581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3",
            "externalKey": "something",
            "bundleExternalKey": "somethingAlso",
            "productName": "Sports",
            "productCategory": "BASE",
            "billingPeriod": "MONTHLY",
            "priceList": "DEFAULT"
        },
        {
          "accountId": "581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3",
          "productName": "OilSlick",
          "productCategory": "ADD_ON",
          "billingPeriod": "MONTHLY",
          "priceList": "DEFAULT"
        }
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionWithAddOns'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"a3087bfb-eb81-466d-afeb-6501c30f8f85"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">base</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">base</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setExternalKey</span><span class="o">(</span><span class="s">"base"</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Shotgun"</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">BASE</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscription</span> <span class="n">addOn1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Telescopic-Scope"</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">ADD_ON</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscription</span> <span class="n">addOn2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Laser-Scope"</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">ADD_ON</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscriptions</span> <span class="n">subscriptions</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscriptions</span><span class="o">();</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">base</span><span class="o">);</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addOn1</span><span class="o">);</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addOn2</span><span class="o">);</span>

<span class="n">BulkSubscriptionsBundles</span> <span class="n">bulkSubscriptionsBundles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulkSubscriptionsBundles</span><span class="o">();</span>

<span class="n">BulkSubscriptionsBundle</span> <span class="n">bulkSubscriptionsBundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulkSubscriptionsBundle</span><span class="o">();</span>
<span class="n">bulkSubscriptionsBundle</span><span class="o">.</span><span class="na">setBaseEntitlementAndAddOns</span><span class="o">(</span><span class="n">subscriptions</span><span class="o">);</span>
<span class="n">bulkSubscriptionsBundles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bulkSubscriptionsBundle</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">entitlementDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">billingDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">renameKeyIfExistsAndUnused</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">migrated</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">callCompletion</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Bundles</span> <span class="n">bundles</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscriptionsWithAddOns</span><span class="o">(</span><span class="n">bulkSubscriptionsBundles</span><span class="o">,</span> 
                                                                <span class="n">entitlementDate</span><span class="o">,</span> 
                                                                <span class="n">billingDate</span><span class="o">,</span> 
                                                                <span class="n">renameKeyIfExistsAndUnused</span><span class="o">,</span> 
                                                                <span class="n">migrated</span><span class="o">,</span> 
                                                                <span class="n">callCompletion</span><span class="o">,</span> 
                                                                <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span><span class="o">,</span>
                                                                <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">entitlement</span> <span class="o">=</span> <span class="p">[</span>
                 <span class="p">{</span>
                    <span class="s2">"baseEntitlementAndAddOns"</span><span class="p">:[</span>
                       <span class="p">{</span>
                          <span class="s2">"accountId"</span><span class="ss">:"16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836"</span><span class="p">,</span>
                          <span class="s2">"externalKey"</span><span class="ss">:"1-16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836-827963"</span><span class="p">,</span>
                          <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
                          <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span>
                       <span class="p">}</span>
                    <span class="p">]</span>
                 <span class="p">}</span>
              <span class="p">]</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">entitlement_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">billing_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">migrated</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">call_completion_sec</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">subscription</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">new</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">create_entitlement_with_add_on</span><span class="p">(</span><span class="n">entitlement</span><span class="p">,</span>
                                            <span class="n">requested_date</span><span class="p">,</span>
                                            <span class="n">entitlement_date</span><span class="p">,</span> 
                                            <span class="n">billing_date</span><span class="p">,</span>
                                            <span class="n">migrated</span><span class="p">,</span> 
                                            <span class="n">call_completion_sec</span><span class="p">,</span>                                            
                                            <span class="n">user</span><span class="p">,</span> 
                                            <span class="n">reason</span><span class="p">,</span> 
                                            <span class="n">comment</span><span class="p">,</span> 
                                            <span class="n">options</span><span class="p">)</span>                                         
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836'</span>
<span class="n">subscription_a</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                              <span class="n">product_category</span><span class="o">=</span><span class="s">'BASE'</span><span class="p">,</span>
                              <span class="n">plan_name</span><span class="o">=</span><span class="s">'sports-monthly'</span><span class="p">)</span>

<span class="n">subscription_b</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                              <span class="n">product_category</span><span class="o">=</span><span class="s">'ADD_ON'</span><span class="p">,</span>
                              <span class="n">plan_name</span><span class="o">=</span><span class="s">'super-monthly'</span><span class="p">)</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">[</span><span class="n">subscription_a</span><span class="p">,</span> <span class="n">subscription_b</span><span class="p">]</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscription_with_add_ons</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                                 <span class="n">created_by</span><span class="p">,</span>
                                                 <span class="n">api_key</span><span class="p">,</span>
                                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/accounts/886adb60-be70-40c8-b97d-1f8ecbc30a64/bundles?bundlesFilter<span class="o">=</span>cbcc7642-1aa5-4609-b89d-5356d05819be
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">BulkSubscriptionsBundle</span> <span class="o">{</span>
    <span class="nl">baseEntitlementAndAddOns:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="err">@</span><span class="mi">23</span><span class="n">b30120</span>
        <span class="nl">accountId:</span> <span class="n">a3087bfb</span><span class="o">-</span><span class="n">eb81</span><span class="o">-</span><span class="mi">466</span><span class="n">d</span><span class="o">-</span><span class="n">afeb</span><span class="o">-</span><span class="mi">6501</span><span class="n">c30f8f85</span>
        <span class="nl">bundleId:</span> <span class="mi">2</span><span class="n">df85b05</span><span class="o">-</span><span class="mi">4</span><span class="n">a69</span><span class="o">-</span><span class="mi">474</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">e10</span><span class="o">-</span><span class="mo">02</span><span class="n">a836674cc8</span>
        <span class="nl">subscriptionId:</span> <span class="kc">null</span>
        <span class="nl">externalKey:</span> <span class="kc">null</span>
        <span class="nl">startDate:</span> <span class="kc">null</span>
        <span class="nl">productName:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
        <span class="nl">productCategory:</span> <span class="n">ADD_ON</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="kc">null</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="kc">null</span>
        <span class="nl">state:</span> <span class="kc">null</span>
        <span class="nl">sourceType:</span> <span class="kc">null</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="kc">null</span>
        <span class="nl">billingStartDate:</span> <span class="kc">null</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="kc">null</span>
        <span class="nl">events:</span> <span class="kc">null</span>
        <span class="nl">priceOverrides:</span> <span class="kc">null</span>
        <span class="nl">prices:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="kc">null</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="err">@</span><span class="mi">1</span><span class="n">b88c7d0</span>
        <span class="nl">accountId:</span> <span class="n">a3087bfb</span><span class="o">-</span><span class="n">eb81</span><span class="o">-</span><span class="mi">466</span><span class="n">d</span><span class="o">-</span><span class="n">afeb</span><span class="o">-</span><span class="mi">6501</span><span class="n">c30f8f85</span>
        <span class="nl">bundleId:</span> <span class="mi">2</span><span class="n">df85b05</span><span class="o">-</span><span class="mi">4</span><span class="n">a69</span><span class="o">-</span><span class="mi">474</span><span class="n">b</span><span class="o">-</span><span class="mi">9</span><span class="n">e10</span><span class="o">-</span><span class="mo">02</span><span class="n">a836674cc8</span>
        <span class="nl">subscriptionId:</span> <span class="kc">null</span>
        <span class="nl">externalKey:</span> <span class="kc">null</span>
        <span class="nl">startDate:</span> <span class="kc">null</span>
        <span class="nl">productName:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
        <span class="nl">productCategory:</span> <span class="n">ADD_ON</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="kc">null</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="kc">null</span>
        <span class="nl">state:</span> <span class="kc">null</span>
        <span class="nl">sourceType:</span> <span class="kc">null</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="kc">null</span>
        <span class="nl">billingStartDate:</span> <span class="kc">null</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="kc">null</span>
        <span class="nl">events:</span> <span class="kc">null</span>
        <span class="nl">priceOverrides:</span> <span class="kc">null</span>
        <span class="nl">prices:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A subscription resource object specifying <code>accountId</code>, optional <code>externalKey</code>, and <code>planName</code>. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>entitlementDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the entitlement (sevice) starts.</td>
</tr>
<tr>
<td><strong>billingDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the billing starts.</td>
</tr>
<tr>
<td><strong>renameKeyIfExistsAndUnused</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>If true, rename external key if it exists and is unused</td>
</tr>
<tr>
<td><strong>migrated</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, subscription is migrated</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p>Creating a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> parameter is returned in the header which contains the new subscription id.</p>
<h3 id='subscription-create-multiple-subscriptions-with-addon-products'>Create multiple subscriptions with addon products</h3>
<p>This API creates multiple addon product subscription. The bundle for the base subscription must be specified.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionsWithAddOns</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[
          {
            "baseEntitlementAndAddOns": [
              {
                "accountId": "886adb60-be70-40c8-b97d-1f8ecbc30a64",
                "externalKey": "base",
                "productName": "Sports",
                "productCategory": "BASE",
                "billingPeriod": "MONTHLY",
                "priceList": "DEFAULT"
              },
              {
                "accountId": "886adb60-be70-40c8-b97d-1f8ecbc30a64",
                "productName": "OilSlick",
                "productCategory": "ADD_ON",
                "billingPeriod": "MONTHLY",
                "priceList": "DEFAULT"
              }
            ]
          }
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionsWithAddOns'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"abfba40d-d2dd-47f0-94f2-8ea3e6bc8794"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">base</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">base</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setExternalKey</span><span class="o">(</span><span class="s">"base"</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Shotgun"</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">BASE</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscription</span> <span class="n">addOn1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Telescopic-Scope"</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">ADD_ON</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscription</span> <span class="n">addOn2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Laser-Scope"</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">ADD_ON</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscriptions</span> <span class="n">subscriptions</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscriptions</span><span class="o">();</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">base</span><span class="o">);</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addOn1</span><span class="o">);</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addOn2</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">entitlementDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">billingDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">migrated</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">renameKeyIfExistsAndUnused</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">callCompletion</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscriptionWithAddOns</span><span class="o">(</span><span class="n">subscriptions</span><span class="o">,</span> 
                                                                   <span class="n">entitlementDate</span><span class="o">,</span> 
                                                                   <span class="n">billingDate</span><span class="o">,</span> 
                                                                   <span class="n">migrated</span><span class="o">,</span> 
                                                                   <span class="n">renameKeyIfExistsAndUnused</span><span class="o">,</span> 
                                                                   <span class="n">callCompletion</span><span class="o">,</span> 
                                                                   <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span><span class="o">,</span> 
                                                                   <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bulk_subscription_list</span> <span class="o">=</span> <span class="p">[</span>
                            <span class="p">{</span>
                               <span class="s2">"baseEntitlementAndAddOns"</span><span class="p">:[</span>
                                  <span class="p">{</span>
                                     <span class="s2">"accountId"</span><span class="ss">:"16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836"</span><span class="p">,</span>
                                     <span class="s2">"externalKey"</span><span class="ss">:"1-16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836-827963"</span><span class="p">,</span>
                                     <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
                                     <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span>
                                  <span class="p">}</span>
                               <span class="p">]</span>
                            <span class="p">},</span>
                            <span class="p">{</span>
                               <span class="s2">"baseEntitlementAndAddOns"</span><span class="p">:[</span>
                                  <span class="p">{</span>
                                     <span class="s2">"accountId"</span><span class="ss">:"16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836"</span><span class="p">,</span>
                                     <span class="s2">"externalKey"</span><span class="ss">:"2-16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836-717751"</span><span class="p">,</span>
                                     <span class="s2">"productCategory"</span><span class="ss">:"ADD_ON"</span><span class="p">,</span>
                                     <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span>
                                  <span class="p">}</span>
                               <span class="p">]</span>
                            <span class="p">}</span>
                         <span class="p">]</span>
<span class="n">entitlement_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">billing_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">call_completion_sec</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">BulkSubscription</span><span class="p">.</span><span class="nf">create_bulk_subscriptions</span><span class="p">(</span><span class="n">bulk_subscription_list</span><span class="p">,</span> 
                                                                  <span class="n">user</span><span class="p">,</span> 
                                                                  <span class="n">reason</span><span class="p">,</span> 
                                                                  <span class="n">comment</span><span class="p">,</span> 
                                                                  <span class="n">entitlement_date</span><span class="p">,</span> 
                                                                  <span class="n">billing_date</span><span class="p">,</span> 
                                                                  <span class="n">call_completion_sec</span><span class="p">,</span> 
                                                                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836'</span>
<span class="n">subscription_a</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                              <span class="n">product_category</span><span class="o">=</span><span class="s">'BASE'</span><span class="p">,</span>
                              <span class="n">plan_name</span><span class="o">=</span><span class="s">'sports-monthly'</span><span class="p">)</span>

<span class="n">subscription_b</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                              <span class="n">product_category</span><span class="o">=</span><span class="s">'ADD_ON'</span><span class="p">,</span>
                              <span class="n">plan_name</span><span class="o">=</span><span class="s">'super-monthly'</span><span class="p">)</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">BulkSubscriptionsBundle</span><span class="p">([</span><span class="n">subscription_a</span><span class="p">,</span> <span class="n">subscription_b</span><span class="p">])</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscriptions_with_add_ons</span><span class="p">([</span><span class="n">body</span><span class="p">],</span>
                                                  <span class="n">created_by</span><span class="p">,</span>
                                                  <span class="n">api_key</span><span class="p">,</span>
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/accounts/886adb60-be70-40c8-b97d-1f8ecbc30a64/bundles?bundlesFilter<span class="o">=</span>cbcc7642-1aa5-4609-b89d-5356d05819be
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Bundle</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Bundle</span><span class="nd">@ddd846f9</span>
    <span class="nl">accountId:</span> <span class="n">abfba40d</span><span class="o">-</span><span class="n">d2dd</span><span class="o">-</span><span class="mi">47</span><span class="n">f0</span><span class="o">-</span><span class="mi">94</span><span class="n">f2</span><span class="o">-</span><span class="mi">8</span><span class="n">ea3e6bc8794</span>
    <span class="nl">bundleId:</span> <span class="mi">83</span><span class="n">f3a7b5</span><span class="o">-</span><span class="mi">63</span><span class="n">c9</span><span class="o">-</span><span class="mi">4</span><span class="n">b06</span><span class="o">-</span><span class="n">a1f5</span><span class="o">-</span><span class="mi">7140</span><span class="n">fec67558</span>
    <span class="nl">externalKey:</span> <span class="n">base</span>
    <span class="nl">subscriptions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="nd">@bb1bf160</span>
        <span class="nl">accountId:</span> <span class="n">abfba40d</span><span class="o">-</span><span class="n">d2dd</span><span class="o">-</span><span class="mi">47</span><span class="n">f0</span><span class="o">-</span><span class="mi">94</span><span class="n">f2</span><span class="o">-</span><span class="mi">8</span><span class="n">ea3e6bc8794</span>
        <span class="nl">bundleId:</span> <span class="mi">83</span><span class="n">f3a7b5</span><span class="o">-</span><span class="mi">63</span><span class="n">c9</span><span class="o">-</span><span class="mi">4</span><span class="n">b06</span><span class="o">-</span><span class="n">a1f5</span><span class="o">-</span><span class="mi">7140</span><span class="n">fec67558</span>
        <span class="nl">subscriptionId:</span> <span class="mi">6</span><span class="n">fcf439b</span><span class="o">-</span><span class="mi">4198</span><span class="o">-</span><span class="mi">4963</span><span class="o">-</span><span class="mi">8</span><span class="n">f0e</span><span class="o">-</span><span class="mi">7</span><span class="n">e3054525a24</span>
        <span class="nl">externalKey:</span> <span class="n">base</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">productCategory:</span> <span class="n">BASE</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">ACTIVE</span>
        <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@a6789138</span>
            <span class="nl">eventId:</span> <span class="n">fb7d653a</span><span class="o">-</span><span class="n">cadb</span><span class="o">-</span><span class="mi">46</span><span class="n">f6</span><span class="o">-</span><span class="n">a04f</span><span class="o">-</span><span class="n">dbe7043385ed</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@b4b456ed</span>
            <span class="nl">eventId:</span> <span class="n">b5c00fdf</span><span class="o">-</span><span class="mi">6</span><span class="n">ce4</span><span class="o">-</span><span class="mi">46</span><span class="n">ad</span><span class="o">-</span><span class="n">b996</span><span class="o">-</span><span class="mi">5513146</span><span class="n">d8acd</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@fb1cc392</span>
            <span class="nl">eventId:</span> <span class="n">edd91628</span><span class="o">-</span><span class="mi">323</span><span class="n">d</span><span class="o">-</span><span class="mi">4</span><span class="n">a3a</span><span class="o">-</span><span class="n">b07e</span><span class="o">-</span><span class="n">bef09a2623a2</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="kc">null</span>
        <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
            <span class="nl">fixedPrice:</span> <span class="mi">0</span>
            <span class="nl">recurringPrice:</span> <span class="kc">null</span>
            <span class="nl">usagePrices:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
            <span class="nl">fixedPrice:</span> <span class="kc">null</span>
            <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
            <span class="nl">usagePrices:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="err">@</span><span class="mi">37</span><span class="n">a59f88</span>
        <span class="nl">accountId:</span> <span class="n">abfba40d</span><span class="o">-</span><span class="n">d2dd</span><span class="o">-</span><span class="mi">47</span><span class="n">f0</span><span class="o">-</span><span class="mi">94</span><span class="n">f2</span><span class="o">-</span><span class="mi">8</span><span class="n">ea3e6bc8794</span>
        <span class="nl">bundleId:</span> <span class="mi">83</span><span class="n">f3a7b5</span><span class="o">-</span><span class="mi">63</span><span class="n">c9</span><span class="o">-</span><span class="mi">4</span><span class="n">b06</span><span class="o">-</span><span class="n">a1f5</span><span class="o">-</span><span class="mi">7140</span><span class="n">fec67558</span>
        <span class="nl">subscriptionId:</span> <span class="n">a490a1c8</span><span class="o">-</span><span class="n">ca78</span><span class="o">-</span><span class="mi">4</span><span class="n">cbd</span><span class="o">-</span><span class="n">bb5a</span><span class="o">-</span><span class="mi">1</span><span class="n">ce214cc2f23</span>
        <span class="nl">externalKey:</span> <span class="n">base</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
        <span class="nl">productCategory:</span> <span class="n">ADD_ON</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">DISCOUNT</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">ACTIVE</span>
        <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">9</span><span class="n">c41861a</span>
            <span class="nl">eventId:</span> <span class="mi">6</span><span class="n">be47e8c</span><span class="o">-</span><span class="mi">0</span><span class="n">ff6</span><span class="o">-</span><span class="mi">45</span><span class="n">ee</span><span class="o">-</span><span class="mi">9</span><span class="n">b79</span><span class="o">-</span><span class="mi">7</span><span class="n">a91c6867e6c</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@a386d43d</span>
            <span class="nl">eventId:</span> <span class="mi">0</span><span class="n">c6b12cb</span><span class="o">-</span><span class="mi">9390</span><span class="o">-</span><span class="mi">4</span><span class="n">d64</span><span class="o">-</span><span class="n">b98a</span><span class="o">-</span><span class="mi">93</span><span class="n">a8c9a6b67b</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">429</span><span class="n">a9148</span>
            <span class="nl">eventId:</span> <span class="mi">27</span><span class="n">ce7282</span><span class="o">-</span><span class="n">c84c</span><span class="o">-</span><span class="mi">495</span><span class="n">a</span><span class="o">-</span><span class="n">a7fc</span><span class="o">-</span><span class="n">be393cfcf3a7</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="kc">null</span>
        <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
            <span class="nl">fixedPrice:</span> <span class="mi">0</span>
            <span class="nl">recurringPrice:</span> <span class="kc">null</span>
            <span class="nl">usagePrices:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
            <span class="nl">fixedPrice:</span> <span class="kc">null</span>
            <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
            <span class="nl">usagePrices:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="err">@</span><span class="mi">10</span><span class="n">da5c43</span>
        <span class="nl">accountId:</span> <span class="n">abfba40d</span><span class="o">-</span><span class="n">d2dd</span><span class="o">-</span><span class="mi">47</span><span class="n">f0</span><span class="o">-</span><span class="mi">94</span><span class="n">f2</span><span class="o">-</span><span class="mi">8</span><span class="n">ea3e6bc8794</span>
        <span class="nl">bundleId:</span> <span class="mi">83</span><span class="n">f3a7b5</span><span class="o">-</span><span class="mi">63</span><span class="n">c9</span><span class="o">-</span><span class="mi">4</span><span class="n">b06</span><span class="o">-</span><span class="n">a1f5</span><span class="o">-</span><span class="mi">7140</span><span class="n">fec67558</span>
        <span class="nl">subscriptionId:</span> <span class="mi">8</span><span class="n">f957bfa</span><span class="o">-</span><span class="mi">61</span><span class="n">da</span><span class="o">-</span><span class="mi">45</span><span class="n">ca</span><span class="o">-</span><span class="n">ae4c</span><span class="o">-</span><span class="n">ed34b045f18e</span>
        <span class="nl">externalKey:</span> <span class="n">base</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
        <span class="nl">productCategory:</span> <span class="n">ADD_ON</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">DISCOUNT</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">ACTIVE</span>
        <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">6615</span><span class="n">c622</span>
            <span class="nl">eventId:</span> <span class="n">eb05b9d5</span><span class="o">-</span><span class="n">a055</span><span class="o">-</span><span class="mi">426</span><span class="n">c</span><span class="o">-</span><span class="mi">8411</span><span class="o">-</span><span class="mi">7</span><span class="n">fd9b4728d45</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">41</span><span class="n">ddb948</span>
            <span class="nl">eventId:</span> <span class="mi">6</span><span class="n">fbe3e71</span><span class="o">-</span><span class="mi">7</span><span class="n">e3b</span><span class="o">-</span><span class="mi">4</span><span class="n">c3b</span><span class="o">-</span><span class="mi">8</span><span class="n">bdd</span><span class="o">-</span><span class="mi">27</span><span class="n">c8dc71e044</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">182</span><span class="n">c6fd0</span>
            <span class="nl">eventId:</span> <span class="n">bec40e45</span><span class="o">-</span><span class="mi">6</span><span class="n">ffb</span><span class="o">-</span><span class="mi">49</span><span class="n">f3</span><span class="o">-</span><span class="mi">831</span><span class="n">d</span><span class="o">-</span><span class="mi">722</span><span class="n">f19d8ed09</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="kc">null</span>
        <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
            <span class="nl">fixedPrice:</span> <span class="mi">0</span>
            <span class="nl">recurringPrice:</span> <span class="kc">null</span>
            <span class="nl">usagePrices:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
            <span class="nl">fixedPrice:</span> <span class="kc">null</span>
            <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
            <span class="nl">usagePrices:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">timeline:</span> <span class="kd">class</span> <span class="nc">BundleTimeline</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BundleTimeline</span><span class="err">@</span><span class="mi">8</span><span class="n">a202296</span>
        <span class="nl">accountId:</span> <span class="n">abfba40d</span><span class="o">-</span><span class="n">d2dd</span><span class="o">-</span><span class="mi">47</span><span class="n">f0</span><span class="o">-</span><span class="mi">94</span><span class="n">f2</span><span class="o">-</span><span class="mi">8</span><span class="n">ea3e6bc8794</span>
        <span class="nl">bundleId:</span> <span class="mi">83</span><span class="n">f3a7b5</span><span class="o">-</span><span class="mi">63</span><span class="n">c9</span><span class="o">-</span><span class="mi">4</span><span class="n">b06</span><span class="o">-</span><span class="n">a1f5</span><span class="o">-</span><span class="mi">7140</span><span class="n">fec67558</span>
        <span class="nl">externalKey:</span> <span class="n">base</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">5</span><span class="n">aa4f7e9</span>
            <span class="nl">eventId:</span> <span class="n">eb05b9d5</span><span class="o">-</span><span class="n">a055</span><span class="o">-</span><span class="mi">426</span><span class="n">c</span><span class="o">-</span><span class="mi">8411</span><span class="o">-</span><span class="mi">7</span><span class="n">fd9b4728d45</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">1</span><span class="n">df149f3</span>
            <span class="nl">eventId:</span> <span class="mi">6</span><span class="n">be47e8c</span><span class="o">-</span><span class="mi">0</span><span class="n">ff6</span><span class="o">-</span><span class="mi">45</span><span class="n">ee</span><span class="o">-</span><span class="mi">9</span><span class="n">b79</span><span class="o">-</span><span class="mi">7</span><span class="n">a91c6867e6c</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">68</span><span class="n">a2bc3b</span>
            <span class="nl">eventId:</span> <span class="n">fb7d653a</span><span class="o">-</span><span class="n">cadb</span><span class="o">-</span><span class="mi">46</span><span class="n">f6</span><span class="o">-</span><span class="n">a04f</span><span class="o">-</span><span class="n">dbe7043385ed</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">787</span><span class="n">b414d</span>
            <span class="nl">eventId:</span> <span class="mi">6</span><span class="n">fbe3e71</span><span class="o">-</span><span class="mi">7</span><span class="n">e3b</span><span class="o">-</span><span class="mi">4</span><span class="n">c3b</span><span class="o">-</span><span class="mi">8</span><span class="n">bdd</span><span class="o">-</span><span class="mi">27</span><span class="n">c8dc71e044</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">5</span><span class="n">ba02249</span>
            <span class="nl">eventId:</span> <span class="mi">0</span><span class="n">c6b12cb</span><span class="o">-</span><span class="mi">9390</span><span class="o">-</span><span class="mi">4</span><span class="n">d64</span><span class="o">-</span><span class="n">b98a</span><span class="o">-</span><span class="mi">93</span><span class="n">a8c9a6b67b</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">discount</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@d45c4b96</span>
            <span class="nl">eventId:</span> <span class="n">b5c00fdf</span><span class="o">-</span><span class="mi">6</span><span class="n">ce4</span><span class="o">-</span><span class="mi">46</span><span class="n">ad</span><span class="o">-</span><span class="n">b996</span><span class="o">-</span><span class="mi">5513146</span><span class="n">d8acd</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">2360</span><span class="n">e010</span>
            <span class="nl">eventId:</span> <span class="n">bec40e45</span><span class="o">-</span><span class="mi">6</span><span class="n">ffb</span><span class="o">-</span><span class="mi">49</span><span class="n">f3</span><span class="o">-</span><span class="mi">831</span><span class="n">d</span><span class="o">-</span><span class="mi">722</span><span class="n">f19d8ed09</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Laser</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">laser</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">49</span><span class="n">d428fe</span>
            <span class="nl">eventId:</span> <span class="mi">27</span><span class="n">ce7282</span><span class="o">-</span><span class="n">c84c</span><span class="o">-</span><span class="mi">495</span><span class="n">a</span><span class="o">-</span><span class="n">a7fc</span><span class="o">-</span><span class="n">be393cfcf3a7</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Telescopic</span><span class="o">-</span><span class="n">Scope</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">telescopic</span><span class="o">-</span><span class="n">scope</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@aebff2be</span>
            <span class="nl">eventId:</span> <span class="n">edd91628</span><span class="o">-</span><span class="mi">323</span><span class="n">d</span><span class="o">-</span><span class="mi">4</span><span class="n">a3a</span><span class="o">-</span><span class="n">b07e</span><span class="o">-</span><span class="n">bef09a2623a2</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A subscription resource object specifying <code>accountId</code>, optional <code>externalKey</code>, and <code>planName</code>. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>entitlementDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the entitlement (sevice) starts.</td>
</tr>
<tr>
<td><strong>billingDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the billing starts.</td>
</tr>
<tr>
<td><strong>renameKeyIfExistsAndUnused</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>If true, rename external key if it exists and is unused</td>
</tr>
<tr>
<td><strong>migrated</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, subscription is migrated</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p>Creating a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> parameter is returned in the header which contains the new subscription id.</p>
<h3 id='subscription-retrieve-a-subscription-by-id'>Retrieve a subscription by id</h3>
<p>This API retrieves a subscription resource object based on its subscription id </p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/d4a919f4-7459-494f-85e5-af8880f63e90'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">objFromJson</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscription</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription_id</span> <span class="o">=</span> <span class="s2">"161692a4-c293-410c-a92f-939c5e3dcba7"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'4aab9b96-c2e7-4641-a6d9-db984969201e'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">get_subscription</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json
&lt;
<span class="o">{</span>
    <span class="s2">"accountId"</span>:<span class="s2">"581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3"</span>,
    <span class="s2">"bundleId"</span>:<span class="s2">"3b7a754c-4fe3-49a4-a56c-c8f56fc4116c"</span>,
    <span class="s2">"subscriptionId"</span>:<span class="s2">"d4a919f4-7459-494f-85e5-af8880f63e90"</span>,
    <span class="s2">"externalKey"</span>:<span class="s2">"somethingSpecial"</span>,
    <span class="s2">"bundleExternalKey"</span>:<span class="s2">"somethingAlsoSpecial"</span>,
    <span class="s2">"startDate"</span>:<span class="s2">"2018-07-19"</span>,
    <span class="s2">"productName"</span>:<span class="s2">"Super"</span>,
    <span class="s2">"productCategory"</span>:<span class="s2">"BASE"</span>,
    <span class="s2">"billingPeriod"</span>:<span class="s2">"MONTHLY"</span>,
    <span class="s2">"phaseType"</span>:<span class="s2">"TRIAL"</span>,
    <span class="s2">"priceList"</span>:<span class="s2">"DEFAULT"</span>,
    <span class="s2">"planName"</span>:<span class="s2">"super-monthly"</span>,
    <span class="s2">"state"</span>:<span class="s2">"ACTIVE"</span>,
    <span class="s2">"sourceType"</span>:<span class="s2">"NATIVE"</span>,
    <span class="s2">"cancelledDate"</span>:null,
    <span class="s2">"chargedThroughDate"</span>:<span class="s2">"2018-07-19"</span>,
    <span class="s2">"billingStartDate"</span>:<span class="s2">"2018-07-19"</span>,
    <span class="s2">"billingEndDate"</span>:null,
    <span class="s2">"billCycleDayLocal"</span>:18,
    <span class="s2">"events"</span>:
    <span class="o">[</span>
        <span class="o">{</span><span class="s2">"
            eventId"</span>:<span class="s2">"d1fc7c9a-bdcd-447c-90f4-72c8de37d457"</span>,
            <span class="s2">"billingPeriod"</span>:<span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>:<span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>:<span class="s2">"super-monthly"</span>,
            <span class="s2">"product"</span>:<span class="s2">"Super"</span>,
            <span class="s2">"priceList"</span>:<span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>:<span class="s2">"START_ENTITLEMENT"</span>,
            <span class="s2">"isBlockedBilling"</span>:false,
            <span class="s2">"isBlockedEntitlement"</span>:false,
            <span class="s2">"serviceName"</span>:<span class="s2">"entitlement-service"</span>,
            <span class="s2">"serviceStateName"</span>:<span class="s2">"ENT_STARTED"</span>,
            <span class="s2">"phase"</span>:<span class="s2">"super-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>:[]
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"eventId"</span>:<span class="s2">"e1cea834-9c21-450a-8ff5-8e1ebef705d1"</span>,
            <span class="s2">"billingPeriod"</span>:<span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>:<span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>:<span class="s2">"super-monthly"</span>,
            <span class="s2">"product"</span>:<span class="s2">"Super"</span>,
            <span class="s2">"priceList"</span>:<span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>:<span class="s2">"START_BILLING"</span>,
            <span class="s2">"isBlockedBilling"</span>:false,
            <span class="s2">"isBlockedEntitlement"</span>:false,
            <span class="s2">"serviceName"</span>:<span class="s2">"billing-service"</span>,
            <span class="s2">"serviceStateName"</span>:<span class="s2">"START_BILLING"</span>,
            <span class="s2">"phase"</span>:<span class="s2">"super-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>:[]
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"eventId"</span>:<span class="s2">"c9045227-4638-46ca-9a4a-2d3086168505"</span>,
            <span class="s2">"billingPeriod"</span>:<span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>:<span class="s2">"2018-08-18"</span>,
            <span class="s2">"plan"</span>:<span class="s2">"super-monthly"</span>,
            <span class="s2">"product"</span>:<span class="s2">"Super"</span>,
            <span class="s2">"priceList"</span>:<span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>:<span class="s2">"PHASE"</span>,
            <span class="s2">"isBlockedBilling"</span>:false,
            <span class="s2">"isBlockedEntitlement"</span>:false,
            <span class="s2">"serviceName"</span>:<span class="s2">"entitlement+billing-service"</span>,
            <span class="s2">"serviceStateName"</span>:<span class="s2">"PHASE"</span>,
            <span class="s2">"phase"</span>:<span class="s2">"super-monthly-evergreen"</span>,
            <span class="s2">"auditLogs"</span>:[]
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"priceOverrides"</span>:null,
    <span class="s2">"prices"</span>:
    <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"planName"</span>:<span class="s2">"super-monthly"</span>,
            <span class="s2">"phaseName"</span>:<span class="s2">"super-monthly-trial"</span>,
            <span class="s2">"phaseType"</span>:<span class="s2">"TRIAL"</span>,
            <span class="s2">"fixedPrice"</span>:0,
            <span class="s2">"recurringPrice"</span>:null,
            <span class="s2">"usagePrices"</span>:[]
        <span class="o">}</span>,
        <span class="o">{</span>
            <span class="s2">"planName"</span>:<span class="s2">"super-monthly"</span>,
            <span class="s2">"phaseName"</span>:<span class="s2">"super-monthly-evergreen"</span>,
            <span class="s2">"phaseType"</span>:<span class="s2">"EVERGREEN"</span>,
            <span class="s2">"fixedPrice"</span>:null,
            <span class="s2">"recurringPrice"</span>:1000.00,
            <span class="s2">"usagePrices"</span>:[]
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"auditLogs"</span>:[]<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="nd">@c620bf78</span>
    <span class="nl">accountId:</span> <span class="n">e903d1d6</span><span class="o">-</span><span class="mi">7423</span><span class="o">-</span><span class="mi">40</span><span class="n">fe</span><span class="o">-</span><span class="mi">8</span><span class="n">ab7</span><span class="o">-</span><span class="n">d9d449484cda</span>
    <span class="nl">bundleId:</span> <span class="mi">603</span><span class="n">db1e6</span><span class="o">-</span><span class="mi">299</span><span class="n">e</span><span class="o">-</span><span class="mi">4</span><span class="n">b8b</span><span class="o">-</span><span class="mi">9</span><span class="n">dfc</span><span class="o">-</span><span class="n">beecccca39b2</span>
    <span class="nl">subscriptionId:</span> <span class="n">b0f8f527</span><span class="o">-</span><span class="mi">78</span><span class="n">c6</span><span class="o">-</span><span class="mi">4</span><span class="n">fef</span><span class="o">-</span><span class="mi">8</span><span class="n">fb2</span><span class="o">-</span><span class="mi">53</span><span class="n">c9ed60a714</span>
    <span class="nl">externalKey:</span> <span class="mi">99999</span>
    <span class="nl">bundleExternalKey:</span> <span class="mi">88888</span>
    <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">productName:</span> <span class="n">Shotgun</span>
    <span class="nl">productCategory:</span> <span class="n">BASE</span>
    <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
    <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
    <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
    <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span>
    <span class="nl">state:</span> <span class="n">ACTIVE</span>
    <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
    <span class="nl">cancelledDate:</span> <span class="kc">null</span>
    <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">billingEndDate:</span> <span class="kc">null</span>
    <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
    <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@c8078c46</span>
        <span class="nl">eventId:</span> <span class="mi">7227</span><span class="n">bab2</span><span class="o">-</span><span class="n">b394</span><span class="o">-</span><span class="mi">42</span><span class="n">de</span><span class="o">-</span><span class="n">b40c</span><span class="o">-</span><span class="mi">97</span><span class="n">cecfd1d9ae</span>
        <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span>
        <span class="nl">product:</span> <span class="n">Shotgun</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
        <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
        <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
        <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
        <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
        <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">1</span><span class="n">be0ca21</span>
        <span class="nl">eventId:</span> <span class="n">ce8578e7</span><span class="o">-</span><span class="mi">553</span><span class="n">f</span><span class="o">-</span><span class="mi">45</span><span class="n">d7</span><span class="o">-</span><span class="n">a4d1</span><span class="o">-</span><span class="mi">2</span><span class="n">abb7e625f64</span>
        <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span>
        <span class="nl">product:</span> <span class="n">Shotgun</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
        <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
        <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
        <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
        <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
        <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@f0472744</span>
        <span class="nl">eventId:</span> <span class="mi">26</span><span class="n">d5ea05</span><span class="o">-</span><span class="n">b91d</span><span class="o">-</span><span class="mi">43</span><span class="n">e6</span><span class="o">-</span><span class="mi">8</span><span class="n">aa2</span><span class="o">-</span><span class="n">ac0ac82f6a95</span>
        <span class="nl">billingPeriod:</span> <span class="n">ANNUAL</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span>
        <span class="nl">product:</span> <span class="n">Shotgun</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">eventType:</span> <span class="n">PHASE</span>
        <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
        <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
        <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
        <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
        <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">evergreen</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">priceOverrides:</span> <span class="kc">null</span>
    <span class="nl">prices:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span>
        <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">fixedPrice:</span> <span class="mi">0</span>
        <span class="nl">recurringPrice:</span> <span class="kc">null</span>
        <span class="nl">usagePrices:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePrice</span> <span class="o">{</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span>
        <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">evergreen</span>
        <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
        <span class="nl">fixedPrice:</span> <span class="kc">null</span>
        <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
        <span class="nl">usagePrices:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"0cdaeca7-4984-47dc-b245-7c32627f26cd"</span><span class="p">,</span>
   <span class="s2">"bundleId"</span><span class="ss">:"d1f4ca8d-be47-4e64-84ce-f697b42d4182"</span><span class="p">,</span>
   <span class="s2">"subscriptionId"</span><span class="ss">:"161692a4-c293-410c-a92f-939c5e3dcba7"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"d1f4ca8d-be47-4e64-84ce-f697b42d4182"</span><span class="p">,</span>
   <span class="s2">"bundleExternalKey"</span><span class="ss">:"a4f4ca8d-3447-4e64-84ce-6697b42d419c"</span><span class="p">,</span>
   <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"productName"</span><span class="ss">:"Basic"</span><span class="p">,</span>
   <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
   <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
   <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
   <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
   <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
   <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
   <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
   <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
   <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
   <span class="s2">"events"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"dda11bf3-f74a-4c42-83e1-0f43a41389af"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"6901117c-4ce0-4eb6-8642-380823490fae"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"prices"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"asic-monthly-in-advance-trial"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
         <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"recurringPrice"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"usagePrices"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
         <span class="s2">"fixedPrice"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"usagePrices"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'3b1a5a67-f0ac-475c-9aad-735d309f0c1f'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
 <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
 <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'e5590623-ccd4-4a8a-be26-008ce7c02b3b'</span><span class="p">,</span>
 <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'46335d3d-8234-49c3-af1a-dcf8cd354ef3'</span><span class="p">,</span>
             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'a14d6512-7479-46e0-b72b-81dff575d1d4'</span><span class="p">,</span>
             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'27408c65-46b8-4bc9-a7ee-c80d6e5fb9b5'</span><span class="p">,</span>
             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'e5590623-ccd4-4a8a-be26-008ce7c02b3b'</span><span class="p">,</span>
 <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
 <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
 <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
 <span class="s">'prices'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
              <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
              <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
              <span class="s">'recurring_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
              <span class="s">'usage_prices'</span><span class="p">:</span> <span class="p">[]},</span>
             <span class="p">{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
              <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
              <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
              <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
              <span class="s">'recurring_price'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
              <span class="s">'usage_prices'</span><span class="p">:</span> <span class="p">[]}],</span>  
 <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
 <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
 <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
 <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
 <span class="s">'state'</span><span class="p">:</span> <span class="s">'ACTIVE'</span><span class="p">,</span>
 <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'4aab9b96-c2e7-4641-a6d9-db984969201e'</span><span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a subscription resource object.</p>
<h3 id='subscription-retrieve-a-subscription-by-key'>Retrieve a subscription by key</h3>
<p>This API retrieves a subscription resource object based on its external key </p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s1">'http://localhost:8080/1.0/kb/subscriptions?externalKey=somethingSpecial'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"somethingSpecial"</span><span class="o">;</span>
<span class="n">Subscription</span> <span class="n">objFromJson</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscriptionByKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">external_key</span> <span class="o">=</span> <span class="s2">"somethingSpecial"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">external_key</span> <span class="o">=</span> <span class="s">'somethingSpecial'</span>
<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">get_subscription_by_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json
&lt;
<span class="o">{</span>
  <span class="s2">"accountId"</span>: <span class="s2">"1f979085-1765-471b-878a-5f640db4d831"</span>,
  <span class="s2">"bundleId"</span>: <span class="s2">"8815e8c0-afab-41b9-b793-cb8fef2382e4"</span>,
  <span class="s2">"bundleExternalKey"</span>: <span class="s2">"8815e8c0-afab-41b9-b793-cb8fef2382e4"</span>,
  <span class="s2">"subscriptionId"</span>: <span class="s2">"8e5c5339-1cad-46c6-ab18-3d5ddc1b2414"</span>,
  <span class="s2">"externalKey"</span>: <span class="s2">"somethingSpecial"</span>,
  <span class="s2">"startDate"</span>: <span class="s2">"2020-01-08"</span>,
  <span class="s2">"productName"</span>: <span class="s2">"Pistol"</span>,
  <span class="s2">"productCategory"</span>: <span class="s2">"BASE"</span>,
  <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
  <span class="s2">"phaseType"</span>: <span class="s2">"EVERGREEN"</span>,
  <span class="s2">"priceList"</span>: <span class="s2">"notrial"</span>,
  <span class="s2">"planName"</span>: <span class="s2">"pistol-monthly-notrial"</span>,
  <span class="s2">"state"</span>: <span class="s2">"ACTIVE"</span>,
  <span class="s2">"sourceType"</span>: <span class="s2">"NATIVE"</span>,
  <span class="s2">"cancelledDate"</span>: null,
  <span class="s2">"chargedThroughDate"</span>: <span class="s2">"2020-05-08"</span>,
  <span class="s2">"billingStartDate"</span>: <span class="s2">"2020-01-08"</span>,
  <span class="s2">"billingEndDate"</span>: null,
  <span class="s2">"billCycleDayLocal"</span>: 8,
  <span class="s2">"events"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"eventId"</span>: <span class="s2">"1d24928e-790d-4dc9-8a88-c4eaa56de392"</span>,
      <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2020-01-08"</span>,
      <span class="s2">"plan"</span>: <span class="s2">"pistol-monthly-notrial"</span>,
      <span class="s2">"product"</span>: <span class="s2">"Pistol"</span>,
      <span class="s2">"priceList"</span>: <span class="s2">"notrial"</span>,
      <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
      <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
      <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
      <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
      <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
      <span class="s2">"phase"</span>: <span class="s2">"pistol-monthly-notrial-evergreen"</span>,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>,
    <span class="o">{</span>
      <span class="s2">"eventId"</span>: <span class="s2">"3aaa3239-2bc6-4f04-977b-fce5de098af8"</span>,
      <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2020-01-08"</span>,
      <span class="s2">"plan"</span>: <span class="s2">"pistol-monthly-notrial"</span>,
      <span class="s2">"product"</span>: <span class="s2">"Pistol"</span>,
      <span class="s2">"priceList"</span>: <span class="s2">"notrial"</span>,
      <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
      <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
      <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
      <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
      <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
      <span class="s2">"phase"</span>: <span class="s2">"pistol-monthly-notrial-evergreen"</span>,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"priceOverrides"</span>: null,
  <span class="s2">"prices"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"planName"</span>: <span class="s2">"pistol-monthly-notrial"</span>,
      <span class="s2">"phaseName"</span>: <span class="s2">"pistol-monthly-notrial-evergreen"</span>,
      <span class="s2">"phaseType"</span>: <span class="s2">"EVERGREEN"</span>,
      <span class="s2">"fixedPrice"</span>: null,
      <span class="s2">"recurringPrice"</span>: 19.95,
      <span class="s2">"usagePrices"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"0cdaeca7-4984-47dc-b245-7c32627f26cd"</span><span class="p">,</span>
   <span class="s2">"bundleId"</span><span class="ss">:"d1f4ca8d-be47-4e64-84ce-f697b42d4182"</span><span class="p">,</span>
   <span class="s2">"subscriptionId"</span><span class="ss">:"161692a4-c293-410c-a92f-939c5e3dcba7"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"somethingSpecial"</span><span class="p">,</span>
   <span class="s2">"bundleExternalKey"</span><span class="ss">:"a4f4ca8d-3447-4e64-84ce-6697b42d419c"</span><span class="p">,</span>
   <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"productName"</span><span class="ss">:"Basic"</span><span class="p">,</span>
   <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
   <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
   <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
   <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
   <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
   <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
   <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
   <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
   <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
   <span class="s2">"events"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"dda11bf3-f74a-4c42-83e1-0f43a41389af"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"6901117c-4ce0-4eb6-8642-380823490fae"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Basic"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"prices"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"asic-monthly-in-advance-trial"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
         <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"recurringPrice"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"usagePrices"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"planName"</span><span class="ss">:"basic-monthly-in-advance"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"basic-monthly-in-advance-evergreen"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
         <span class="s2">"fixedPrice"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"usagePrices"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'3b1a5a67-f0ac-475c-9aad-735d309f0c1f'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
 <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
 <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'e5590623-ccd4-4a8a-be26-008ce7c02b3b'</span><span class="p">,</span>
 <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'46335d3d-8234-49c3-af1a-dcf8cd354ef3'</span><span class="p">,</span>
             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'a14d6512-7479-46e0-b72b-81dff575d1d4'</span><span class="p">,</span>
             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
            <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
             <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
             <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
             <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'27408c65-46b8-4bc9-a7ee-c80d6e5fb9b5'</span><span class="p">,</span>
             <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
             <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
             <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
             <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
             <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
             <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
             <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
             <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'somethingSpecial'</span><span class="p">,</span>
 <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
 <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
 <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
 <span class="s">'prices'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
              <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
              <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
              <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
              <span class="s">'recurring_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
              <span class="s">'usage_prices'</span><span class="p">:</span> <span class="p">[]},</span>
             <span class="p">{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
              <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
              <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
              <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
              <span class="s">'recurring_price'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
              <span class="s">'usage_prices'</span><span class="p">:</span> <span class="p">[]}],</span>
 <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
 <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
 <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
 <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
 <span class="s">'state'</span><span class="p">:</span> <span class="s">'ACTIVE'</span><span class="p">,</span>
 <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'4aab9b96-c2e7-4641-a6d9-db984969201e'</span><span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>String</td>
<td>yes</td>
<td>none</td>
<td>The subscription external key</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a subscription resource object.</p>
<h3 id='subscription-update-the-bcd-associated-with-a-subscription'>Update the BCD associated with a subscription</h3>
<p>This API allows you to change the Bill Cycle Date, BCD, for a given subscription.
This only applies to subscriptions whose recurring term is month based -- e.g <code>MONTHLY</code>, <code>ANNUAL</code>, ... </p>

<p>For example if a given subscription was invoiced on the 1st, then one could use this API
to realign invoicing, let&#39;s say on the 16th. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/bcd</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "billCycleDayLocal": 16 }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/bcd'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">updatedSubscription</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">updatedSubscription</span><span class="o">.</span><span class="na">setSubscriptionId</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">);</span>
<span class="n">updatedSubscription</span><span class="o">.</span><span class="na">setBillCycleDayLocal</span><span class="o">(</span><span class="mi">9</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">effectiveFromDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">updateSubscriptionBCD</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                      <span class="n">updatedSubscription</span><span class="o">,</span> 
                                      <span class="n">effectiveFromDate</span><span class="o">,</span> 
                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">new</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">subscription_id</span>      <span class="o">=</span> <span class="s2">"161692a4-c293-410c-a92f-939c5e3dcba7"</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">bill_cycle_day_local</span> <span class="o">=</span> <span class="mi">16</span>

<span class="n">effective_from_date</span>  <span class="o">=</span> <span class="s1">'2018-08-16'</span>
<span class="n">force_past_effective_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">update_bcd</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                        <span class="n">reason</span><span class="p">,</span> 
                        <span class="n">comment</span><span class="p">,</span> 
                        <span class="n">effective_from_date</span><span class="p">,</span> 
                        <span class="n">force_past_effective_date</span><span class="p">,</span> 
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'161692a4-c293-410c-a92f-939c5e3dcba7'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">,</span>
                    <span class="n">bill_cycle_day_local</span><span class="o">=</span><span class="mi">26</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">update_subscription_bcd</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                        <span class="n">body</span><span class="p">,</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>effectiveFromDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date on which this change becomes effective</td>
</tr>
<tr>
<td><strong>forceNewBcdWithPastEffectiveDate</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>See below</td>
</tr>
</tbody></table>

<p>By default the effective date must be in the future so as to not modify existing invoices. Setting <strong>forceNewBcdWithPastEffectiveDate</strong> to true allows the date to be set in the past. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-change-subscription-plan'>Change subscription plan</h3>
<p>This API allows you to upgrade or downgrade a given subscription to a new <code>Plan</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "productName": "Sports", 
            "billingPeriod": "MONTHLY", 
            "priceList": "DEFAULT"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">newInput</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setSubscriptionId</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">);</span>

<span class="c1">// Specify the product, billing period and price list</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Shotgun"</span><span class="o">);</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="c1">// Alternatively, you can specify the plan name</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setPlanName</span><span class="o">(</span><span class="s">"shotgun-monthly"</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">changeSubscriptionPlan</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                       <span class="n">newInput</span><span class="o">,</span> 
                                       <span class="n">requestedDate</span><span class="o">,</span> 
                                       <span class="n">BillingActionPolicy</span><span class="o">.</span><span class="na">IMMEDIATE</span><span class="o">,</span> 
                                       <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">input</span> <span class="o">=</span> <span class="p">{</span>
           <span class="ss">:productName</span> <span class="o">=&gt;</span> <span class="s1">'Super'</span><span class="p">,</span> 
           <span class="ss">:billingPeriod</span> <span class="o">=&gt;</span> <span class="s1">'MONTHLY'</span><span class="p">,</span> 
           <span class="ss">:priceList</span> <span class="o">=&gt;</span> <span class="s1">'DEFAULT'</span>
         <span class="p">}</span>

<span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">billing_policy</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">call_completion</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">target_phase_type</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">change_plan</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> 
                         <span class="n">user</span><span class="p">,</span> 
                         <span class="n">reason</span><span class="p">,</span> 
                         <span class="n">comment</span><span class="p">,</span> 
                         <span class="n">requested_date</span><span class="p">,</span> 
                         <span class="n">billing_policy</span><span class="p">,</span>
                         <span class="n">target_phase_type</span><span class="p">,</span> 
                         <span class="n">call_completion</span><span class="p">,</span> 
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'97278000-72fd-45d7-9b67-e44690bdb074'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">product_name</span><span class="o">=</span><span class="s">'Super'</span><span class="p">,</span>
                    <span class="n">billing_period</span><span class="o">=</span><span class="s">'MONTHLY'</span><span class="p">,</span>
                    <span class="n">price_list</span><span class="o">=</span><span class="s">'DEFAULT'</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">change_subscription_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                         <span class="n">body</span><span class="p">,</span>
                                         <span class="n">created_by</span><span class="p">,</span>
                                         <span class="n">api_key</span><span class="p">,</span>
                                         <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"986c5d4e-b322-4d71-ad24-e3bf6e38734a"</span><span class="p">,</span>
   <span class="s2">"bundleId"</span><span class="ss">:"b0b9da5f-6844-417b-ac97-d7e8df07c26a"</span><span class="p">,</span>
   <span class="s2">"subscriptionId"</span><span class="ss">:"97278000-72fd-45d7-9b67-e44690bdb074"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"986c5d4e-b322-4d71-ad24-e3bf6e38734a-452347"</span><span class="p">,</span>
   <span class="s2">"bundleExternalKey"</span><span class="ss">:"765c5d4e-b322-4d71-6544-e3bf6e38734a-cd2347"</span><span class="p">,</span>
   <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"productName"</span><span class="ss">:"Super"</span><span class="p">,</span>
   <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
   <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
   <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
   <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
   <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
   <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
   <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
   <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
   <span class="s2">"events"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"b2c4195a-0888-44e4-91a7-537b20b08bd8"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"0c15d9ba-f0f3-40e6-83d7-2d84af703d06"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"b675c39f-eeef-4cc1-8ffc-e50f51e8a84a"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-02"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"CHANGE"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"CHANGE"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"super-monthly-trial"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"eventId"</span><span class="ss">:"e411fe3e-6d38-4256-bd96-867f3a50c634"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
         <span class="s2">"plan"</span><span class="ss">:"super-monthly"</span><span class="p">,</span>
         <span class="s2">"product"</span><span class="ss">:"Super"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
         <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
         <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
         <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
         <span class="s2">"phase"</span><span class="ss">:"super-monthly-evergreen"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"prices"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
         <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"recurringPrice"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"usagePrices"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
         <span class="s2">"fixedPrice"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"usagePrices"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A subscription resource object specifying a <code>planName</code>`. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>no</td>
<td>default</td>
<td>Billing policy that will be used to make this change effective (see below)</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date at which this change should become effective.</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p><strong>billingPolicy</strong>: Possible values are START_OF_TERM, END_OF_TERM, IMMEDIATE, or ILLEGAL</p>

<p><strong>requestedDate</strong>: This date is only used if no billingPolicy was specified.</p>

<p>Changing the plan associated to a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-undo-a-pending-change-plan-on-a-subscription'>Undo a pending change plan on a subscription</h3>
<p>This endpoint allows a pending change of <code>Plan</code> for a given subscription to be canceled.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/undoChangePlan</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/undoChangePlan'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">undoChangeSubscriptionPlan</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                           <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span><span class="p">.</span><span class="nf">undo_change_plan</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                              <span class="n">reason</span><span class="p">,</span> 
                              <span class="n">comment</span><span class="p">,</span> 
                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">undo_change_subscription_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-cancel-a-subscription'>Cancel a subscription</h3>
<p>This API cancels an existing subscription.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">EntitlementActionPolicy</span> <span class="n">entitlementPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">BillingActionPolicy</span> <span class="n">billingPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">cancelSubscriptionPlan</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                       <span class="n">requestedDate</span><span class="o">,</span> 
                                       <span class="n">entitlementPolicy</span><span class="o">,</span> 
                                       <span class="n">billingPolicy</span><span class="o">,</span> 
                                       <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">entitlement_policy</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">billing_policy</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">use_requested_date_for_billing</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">cancel</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">requested_date</span><span class="p">,</span> 
                    <span class="n">entitlement_policy</span><span class="p">,</span> 
                    <span class="n">billing_policy</span><span class="p">,</span> 
                    <span class="n">use_requested_date_for_billing</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'ee508b5b-46b8-42a7-8988-16c0470de4ae'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">cancel_subscription_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                         <span class="n">created_by</span><span class="p">,</span>
                                         <span class="n">api_key</span><span class="p">,</span>
                                         <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date at which this change should become effective.</td>
</tr>
<tr>
<td><strong>entitlementPolicy</strong></td>
<td>string</td>
<td>no</td>
<td>default policy</td>
<td>entitlement policy</td>
</tr>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>no</td>
<td>default policy</td>
<td>billing policy</td>
</tr>
<tr>
<td><strong>useRequestedDateForBilling</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>use <strong>requestedDate</strong> for billing</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p><strong>entitlementPolicy</strong>: Possible values are IMMEDIATE, END_OF_TERM</p>

<p><strong>billingPolicy</strong>: Possible values are START_OF_TERM, END_OF_TERM, or IMMEDIATE</p>

<p>Creating a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p>Since we offer the ability to control the cancelation date for both entitlement (service) and billing either through policies, dates or null values (now), it is important to understand how those parameters work:</p>

<ul>
<li>If <code>entitlementPolicy</code> has been defined, the <code>requestedDate</code> is ignored, and we either default to the catalog defined <code>billingPolicy</code> for this <code>Plan</code>, or use the one provided in this API.</li>
<li>If not, the <code>requestedDate</code> is used to compute the entitlement cancelation date, and the null value means change should be immediate. The billing date will then be computed the following way:

<ul>
<li>If <code>billingPolicy</code> has been specified, it is used to compute the billing cancelation date</li>
<li>If <code>billingPolicy</code> has not been specified, we either use the <code>requestedDate</code> when <code>useRequestedDateForBilling</code> is true or default to the catalog defined <code>billingPolicy</code> for this <code>Plan</code></li>
</ul></li>
</ul>

<p>So, the common use case would require the following:</p>

<ul>
<li><strong>Immediate cancelation</strong>: This will create a prorated credit unless this aligns with the subscription charged through date (<code>CTD</code>), that is, the date up to which it was invoiced, and then from an entitlement point of view it will deactivate service immediately. In order to achieve this result, one can pass the following parameters: <code>entitlementPolicy</code>=<code>IMMEDIATE</code> and <code>billingPolicy</code>=<code>IMMEDIATE</code>; alternatively passing no parameters and therefore a null <code>requestedDate</code> would produce the same result.</li>
<li><strong>EOT cancelation</strong>: This will not create any proration and will keep the service active until the end of the period (<code>CTD</code>). In order to achieve this result, one can pass the following parameters: <code>entitlementPolicy</code>=<code>END_OF_TERM</code> and <code>billingPolicy</code>=<code>END_OF_TERM</code>.</li>
</ul>

<p>The reason for all this complexity is to allow to control entitlement and billing date separately, and also avoid users to have to compute dates to achieve certain behavior by relying on well defined policies.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-un-cancel-a-subscription'>Un-cancel a subscription</h3>
<p>This endpoint allows you to undo a pending cancelation for a given subscription.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/uncancel</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/uncancel'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">uncancelSubscriptionPlan</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                         <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span><span class="p">.</span><span class="nf">uncancel</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                      <span class="n">reason</span><span class="p">,</span> 
                      <span class="n">comment</span><span class="p">,</span> 
                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">uncancel_subscription_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                           <span class="n">created_by</span><span class="p">,</span>
                                           <span class="n">api_key</span><span class="p">,</span>
                                           <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='subscription-blocking-state'>Blocking State</h2>
<p>See section <a href="#account-blocking-state">Account Blocing State</a> for an introduction to blocking states.</p>
<h3 id='subscription-block-a-subscription'>Block a subscription</h3>
<p>Provides a low level interface to add a <code>BlockingState</code> event for this subscription. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/block</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "stateName": "STATE",
            "service": "ServiceStateService",
            "isBlockChange": false,
            "isBlockEntitlement": false,
            "isBlockBilling": false
    }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/block'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"161692a4-c293-410c-a92f-939c5e3dcba7"</span><span class="o">);</span>

<span class="n">BlockingState</span> <span class="n">blockingState</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BlockingState</span><span class="o">();</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setStateName</span><span class="o">(</span><span class="s">"STATE1"</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setService</span><span class="o">(</span><span class="s">"ServiceStateService"</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockChange</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockBilling</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockEntitlement</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-08-01"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="n">ImmutableMap</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">BlockingStates</span> <span class="n">result</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">addSubscriptionBlockingState</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                                                     <span class="n">blockingState</span><span class="o">,</span>
                                                                     <span class="n">requestedDate</span><span class="o">,</span>
                                                                     <span class="n">pluginProperty</span><span class="o">,</span>
                                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">new</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">subscription_id</span> <span class="o">=</span> <span class="s2">"161692a4-c293-410c-a92f-939c5e3dcba7"</span>

<span class="n">state_name</span> <span class="o">=</span> <span class="s1">'STATE1'</span>
<span class="n">service</span> <span class="o">=</span> <span class="s1">'ServiceStateService'</span>
<span class="n">block_change</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_entitlement</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_billing</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">set_blocking_state</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span> 
                                <span class="n">service</span><span class="p">,</span> 
                                <span class="n">block_change</span><span class="p">,</span> 
                                <span class="n">block_entitlement</span><span class="p">,</span> 
                                <span class="n">block_billing</span><span class="p">,</span> 
                                <span class="n">requested_date</span><span class="p">,</span> 
                                <span class="n">user</span><span class="p">,</span> 
                                <span class="n">reason</span><span class="p">,</span>
                                <span class="n">comment</span><span class="p">,</span> 
                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">BlockingState</span><span class="p">(</span><span class="n">state_name</span><span class="o">=</span><span class="s">'STATE1'</span><span class="p">,</span>
                     <span class="n">service</span><span class="o">=</span><span class="s">'ServiceStateService'</span><span class="p">,</span>
                     <span class="n">is_block_change</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">is_block_entitlement</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">is_block_billing</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">add_subscription_blocking_state</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                <span class="n">body</span><span class="p">,</span>
                                                <span class="n">created_by</span><span class="p">,</span>
                                                <span class="n">api_key</span><span class="p">,</span>
                                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Location: http://127.0.0.1:8080/1.0/kb/accounts/581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3/block?blockingStateTypes<span class="o">=</span>SUBSCRIPTION
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="o">[</span><span class="kd">class</span> <span class="nc">BlockingState</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BlockingState</span><span class="nd">@bf898dea</span>
    <span class="nl">blockedId:</span> <span class="mi">161692</span><span class="n">a4</span><span class="o">-</span><span class="n">c293</span><span class="o">-</span><span class="mi">410</span><span class="n">c</span><span class="o">-</span><span class="n">a92f</span><span class="o">-</span><span class="mi">939</span><span class="n">c5e3dcba7</span>
    <span class="nl">stateName:</span> <span class="n">ENT_STARTED</span>
    <span class="nl">service:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
    <span class="nl">isBlockChange:</span> <span class="kc">false</span>
    <span class="nl">isBlockEntitlement:</span> <span class="kc">false</span>
    <span class="nl">isBlockBilling:</span> <span class="kc">false</span>
    <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">42.000</span><span class="n">Z</span>
    <span class="nl">type:</span> <span class="n">SUBSCRIPTION</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">},</span> <span class="kd">class</span> <span class="nc">BlockingState</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BlockingState</span><span class="nd">@fd3732d8</span>
    <span class="nl">blockedId:</span> <span class="mi">161692</span><span class="n">a4</span><span class="o">-</span><span class="n">c293</span><span class="o">-</span><span class="mi">410</span><span class="n">c</span><span class="o">-</span><span class="n">a92f</span><span class="o">-</span><span class="mi">939</span><span class="n">c5e3dcba7</span>
    <span class="nl">stateName:</span> <span class="n">STATE1</span>
    <span class="nl">service:</span> <span class="n">ServiceStateService</span>
    <span class="nl">isBlockChange:</span> <span class="kc">false</span>
    <span class="nl">isBlockEntitlement:</span> <span class="kc">false</span>
    <span class="nl">isBlockBilling:</span> <span class="kc">false</span>
    <span class="nl">effectiveDate:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mo">01</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">42.000</span><span class="n">Z</span>
    <span class="nl">type:</span> <span class="n">SUBSCRIPTION</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}]</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Response Body</strong></p>

<p>A blocking state resource representing the intended new blocking state. For example,</p>

<p>{
  &quot;blockedId&quot;: &quot;943c4fd0-9000-4975-a3a8-09712223e1f8&quot;,
  &quot;stateName&quot;: &quot;STATE1&quot;,
  &quot;service&quot;: &quot;ServiceStateService&quot;,
  &quot;isBlockChange&quot;: false,
  &quot;isBlockEntitlement&quot;: false,
  &quot;isBlockBilling&quot;: true,
  &quot;effectiveDate&quot;: &quot;2020-07-18T18:22:30.376Z&quot;,
  &quot;type&quot;: &quot;SUBSCRIPTION&quot;
}</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date to begin blocking</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h2 id='subscription-custom-fields'>Custom Fields</h2>
<p><code>Custom fields</code> are <code>{key, value}</code> attributes that can be attached to any customer resources. For more on custom fields see <a href="#custom-fields">Custom Fields</a>. These endpoints manage custom fields associated with <code>Subscription</code> objects.</p>
<h3 id='subscription-add-custom-fields-to-subscription'>Add custom fields to subscription</h3>
<p>Adds one or more custom fields to a subscription object. Existing custom fields are not disturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "objectId": "77e23878-8b9d-403b-bf31-93003e125712",
            "objectType": "SUBSCRIPTION",
            "name": "Test Custom Field",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">subscriptionId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">SUBSCRIPTION</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscriptionCustomFields</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                               <span class="n">customFields</span><span class="o">,</span> 
                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'SUBSCRIPTION'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                              <span class="n">user</span><span class="p">,</span>
                              <span class="n">reason</span><span class="p">,</span>
                              <span class="n">comment</span><span class="p">,</span>
                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscription_custom_fields</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                  <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                  <span class="n">created_by</span><span class="p">,</span>
                                                  <span class="n">api_key</span><span class="p">,</span>
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
    <span class="nl">objectType:</span> <span class="n">SUBSCRIPTION</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"SUBSCRIPTION"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects giving the name and value of the custom field, or fields, to be added. For example:</p>

<p>[
      {
        &quot;name&quot;: &quot;CF1&quot;,
        &quot;value&quot;: &quot;123&quot;
      }
    ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='subscription-retrieve-subscription-custom-fields'>Retrieve subscription custom fields</h3>
<p>Returns any custom field objects associated with the specified subscription</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscriptionCustomFields</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                                                             <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'642ee0ac-972b-4cdf-b9ae-ab8f9bb9bc05'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">get_subscription_custom_fields</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                               <span class="n">api_key</span><span class="p">,</span>
                                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 Ok
&lt; Content-Type: application/json
&lt;
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"customFieldId"</span>:<span class="s2">"439ed0f8-9b37-4688-bace-e2595b1d3801"</span>,
        <span class="s2">"objectId"</span>:<span class="s2">"77e23878-8b9d-403b-bf31-93003e125712"</span>,
        <span class="s2">"objectType"</span>:<span class="s2">"SUBSCRIPTION"</span>,
        <span class="s2">"name"</span>:<span class="s2">"Test Custom Field"</span>,
        <span class="s2">"value"</span>:<span class="s2">"test_value"</span>,
        <span class="s2">"auditLogs"</span>:[]
    <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
    <span class="nl">objectType:</span> <span class="n">SUBSCRIPTION</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"SUBSCRIPTION"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'custom_field_id'</span><span class="p">:</span> <span class="s">'31a21da4-1eae-4f83-b9e4-49c53217d33e'</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'Test Custom Field'</span><span class="p">,</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'642ee0ac-972b-4cdf-b9ae-ab8f9bb9bc05'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'SUBSCRIPTION'</span><span class="p">,</span>
 <span class="s">'value'</span><span class="p">:</span> <span class="s">'test_value'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='subscription-modify-custom-fields-for-a-subscription'>Modify custom fields for a subscription</h3>
<p>Modifies the value of one or more existing custom fields associated with a subscription</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "439ed0f8-9b37-4688-bace-e2595b1d3801",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">modifySubscriptionCustomFields</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                               <span class="n">customFieldModified</span><span class="o">,</span> 
                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                                 <span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span>
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">modify_subscription_custom_fields</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                  <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                  <span class="n">created_by</span><span class="p">,</span>
                                                  <span class="n">api_key</span><span class="p">,</span>
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-remove-custom-fields-from-subscription'>Remove custom fields from subscription</h3>
<p>Delete one or more custom fields from a subscription</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields?customField=439ed0f8-9b37-4688-bace-e2595b1d3801'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">deleteSubscriptionCustomFields</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                               <span class="n">customFieldsId</span><span class="o">,</span> 
                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                                 <span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span>
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">delete_subscription_custom_fields</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                  <span class="n">created_by</span><span class="p">,</span>
                                                  <span class="n">api_key</span><span class="p">,</span>
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>the list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='subscription-tags'>Tags</h2>
<p>See section <a href="#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable for a <code>Subscription</code>.</p>
<h3 id='subscription-add-tags-to-subscription'>Add tags to subscription</h3>
<p>This API adds one or more tags to a subscription. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[
            "353752dd-9041-4450-b782-a8bb03a923c8"
        ]'</span> <span class="se">\</span>
  <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscriptionTags</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                                     <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                     <span class="n">user</span><span class="p">,</span>
                     <span class="n">reason</span><span class="p">,</span>
                     <span class="n">comment</span><span class="p">,</span>
                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscription_tags</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                         <span class="n">tag</span><span class="p">,</span>
                                         <span class="n">created_by</span><span class="p">,</span>
                                         <span class="n">api_key</span><span class="p">,</span>
                                         <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/tags
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@bd138472</span>
    <span class="nl">tagId:</span> <span class="mi">1</span><span class="n">bb4b638</span><span class="o">-</span><span class="mi">3886</span><span class="o">-</span><span class="mi">4</span><span class="n">f73</span><span class="o">-</span><span class="mi">90</span><span class="n">a5</span><span class="o">-</span><span class="mi">89</span><span class="n">eb6d1bcf7f</span>
    <span class="nl">objectType:</span> <span class="n">SUBSCRIPTION</span>
    <span class="nl">objectId:</span> <span class="mi">917992</span><span class="n">d3</span><span class="o">-</span><span class="mi">5</span><span class="n">f1f</span><span class="o">-</span><span class="mi">4828</span><span class="o">-</span><span class="mi">9</span><span class="n">fff</span><span class="o">-</span><span class="mi">799</span><span class="n">cc4211aa9</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"SUBSCRIPTION"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"foo"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more strings giving the UUID of tag definitions for the user tags to be added.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='subscription-retrieve-subscription-tags'>Retrieve subscription tags</h3>
<p>Retrieve all tags attached to this subscription.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscriptionTags</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                                     <span class="n">includedDeleted</span><span class="o">,</span> 
                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
                  <span class="n">audit</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">get_subscription_tags</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
    <span class="o">{</span>
        <span class="s2">"tagId"</span>:<span class="s2">"d0513754-56a9-4694-abb1-3ac46c72e861"</span>,
        <span class="s2">"objectType"</span>:<span class="s2">"SUBSCRIPTION"</span>,
        <span class="s2">"objectId"</span>:<span class="s2">"77e23878-8b9d-403b-bf31-93003e125712"</span>,
        <span class="s2">"tagDefinitionId"</span>:<span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span>,
        <span class="s2">"tagDefinitionName"</span>:<span class="s2">"foo"</span>,
        <span class="s2">"auditLogs"</span>:[]
    <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@bd138472</span>
    <span class="nl">tagId:</span> <span class="mi">1</span><span class="n">bb4b638</span><span class="o">-</span><span class="mi">3886</span><span class="o">-</span><span class="mi">4</span><span class="n">f73</span><span class="o">-</span><span class="mi">90</span><span class="n">a5</span><span class="o">-</span><span class="mi">89</span><span class="n">eb6d1bcf7f</span>
    <span class="nl">objectType:</span> <span class="n">SUBSCRIPTION</span>
    <span class="nl">objectId:</span> <span class="mi">917992</span><span class="n">d3</span><span class="o">-</span><span class="mi">5</span><span class="n">f1f</span><span class="o">-</span><span class="mi">4828</span><span class="o">-</span><span class="mi">9</span><span class="n">fff</span><span class="o">-</span><span class="mi">799</span><span class="n">cc4211aa9</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"SUBSCRIPTION"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"foo"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'SUBSCRIPTION'</span><span class="p">,</span>
 <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'353752dd-9041-4450-b782-a8bb03a923c8'</span><span class="p">,</span>
 <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'foo'</span><span class="p">,</span>
 <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'a1fd0122-1ec8-4bc3-b71e-ab2a76ae5957'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='subscription-remove-tags-from-subscription'>Remove tags from subscription</h3>
<p>This API removes a list of tags attached to a subscription.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8'</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">deleteSubscriptionTags</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                       <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                        <span class="n">user</span><span class="p">,</span>
                        <span class="n">reason</span><span class="p">,</span>
                        <span class="n">comment</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">delete_subscription_tags</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                         <span class="n">created_by</span><span class="p">,</span>
                                         <span class="n">api_key</span><span class="p">,</span>
                                         <span class="n">api_secret</span><span class="p">,</span>
                                         <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of strings</td>
<td>true</td>
<td>none</td>
<td>List of tag definition IDs identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='subscription-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='subscription-retrieve-subscription-audit-logs-with-history-by-subscription-id'>Retrieve subscription audit logs with history by subscription id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to the subscription. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/subscriptions/70b6856e-6938-495f-9ae9-0a8ec0571c37/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"SUBSCRIPTION"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"admin"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"recordId"</span>: 465,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"bundleId"</span>: <span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span>,
      <span class="s2">"category"</span>: <span class="s2">"BASE"</span>,
      <span class="s2">"startDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"bundleStartDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"chargedThroughDate"</span>: null,
      <span class="s2">"migrated"</span>: <span class="nb">false</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"SUBSCRIPTIONS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"SUBSCRIPTION_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"SUBSCRIPTION"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"SubscriptionBaseTransition"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"recordId"</span>: 465,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"bundleId"</span>: <span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span>,
      <span class="s2">"category"</span>: <span class="s2">"BASE"</span>,
      <span class="s2">"startDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"bundleStartDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"chargedThroughDate"</span>: <span class="s2">"2019-03-22T23:35:14.000Z"</span>,
      <span class="s2">"migrated"</span>: <span class="nb">false</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"SUBSCRIPTIONS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"SUBSCRIPTION_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>

</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs.</p>
<h3 id='subscription-retrieve-subscription-event-audit-logs-with-history-by-subscription-event-id'>Retrieve subscription event audit logs with history by subscription event id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to the subscription, based on a subscription event id. History information (a copy of the full subscription object) is included with each record. The id of a subscription event comes from the <a href="#account-retrieve-account-timeline">timeline api</a>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/events/{subscriptionEventId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/subscriptions/events/9a1c85d5-beba-40c8-9268-f73e09c24007/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"SUBSCRIPTION_EVENT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"9a1c85d5-beba-40c8-9268-f73e09c24007"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"admin"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"recordId"</span>: 1358,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"totalOrdering"</span>: 0,
      <span class="s2">"eventType"</span>: <span class="s2">"API_USER"</span>,
      <span class="s2">"userType"</span>: <span class="s2">"CREATE"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"subscriptionId"</span>: <span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span>,
      <span class="s2">"planName"</span>: <span class="s2">"foo-monthly"</span>,
      <span class="s2">"phaseName"</span>: <span class="s2">"foo-monthly-evergreen"</span>,
      <span class="s2">"priceListName"</span>: <span class="s2">"DEFAULT"</span>,
      <span class="s2">"billingCycleDayLocal"</span>: 0,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"SUBSCRIPTION_EVENTS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"SUBSCRIPTION_EVENT_HISTORY"</span>,
      <span class="s2">"active"</span>: <span class="nb">true</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h1 id='bundle'>Bundle</h1>
<p>A Bundle is a collection of subscriptions. Grouping certain subscriptions into a bundle is useful to ensure
that certain operations propagate to the group. A common example is cancellation. When cancelling a <code>BASE</code> subscription, which is part of a bundle,
any <code>ADD_ON</code> subscriptions in the same bundle are also cancelled automatically.</p>

<p>A Bundle is automatically created by the system when creating the intial (BASE) subscription. To add additional subscriptions in the same bundle, one must specify the <code>bundleId</code> for the bundle previously created.</p>
<h2 id='bundle-bundle-resource'>Bundle Resource</h2>
<p>The <code>Bundle</code> resource represents a bundle. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the bundle</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key for the bundle</td>
</tr>
<tr>
<td><strong>subscriptions</strong></td>
<td>array</td>
<td>system</td>
<td>List of subscriptions in the bundle</td>
</tr>
<tr>
<td><strong>timeline</strong></td>
<td>array</td>
<td>system</td>
<td>List of events for the bundle.</td>
</tr>
</tbody></table>

<p><strong>subscriptions</strong> is a read-only array of subscription resources for the subscriptions in this bundle.</p>

<p><strong>timeline</strong> is a read-only array of event resources for the events that have occurred for this bundle.</p>
<h2 id='bundle-bundle'>Bundle</h2>
<p>These endpoints support the basic operations on bundles. There is no create operation, because a bundle is automatically created when a BASE subscription is created.</p>
<h3 id='bundle-retrieve-a-bundle-by-id'>Retrieve a bundle by id</h3>
<p>This API retrieves a bundle resource object based on its bundle Id. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"90ec582a-5da8-49d5-a656-c63cbc9d30fd"</span><span class="o">);</span>

<span class="n">Bundle</span> <span class="n">result</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bundle_id</span> <span class="o">=</span> <span class="s2">"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span>

<span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
  <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
  <span class="s2">"subscriptions"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"subscriptionId"</span>: <span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span>,
      <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"startDate"</span>: <span class="s2">"2018-07-18"</span>,
      <span class="s2">"productName"</span>: <span class="s2">"Standard"</span>,
      <span class="s2">"productCategory"</span>: <span class="s2">"BASE"</span>,
      <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
      <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
      <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
      <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
      <span class="s2">"state"</span>: <span class="s2">"ACTIVE"</span>,
      <span class="s2">"sourceType"</span>: <span class="s2">"NATIVE"</span>,
      <span class="s2">"cancelledDate"</span>: null,
      <span class="s2">"chargedThroughDate"</span>: null,
      <span class="s2">"billingStartDate"</span>: <span class="s2">"2018-07-18"</span>,
      <span class="s2">"billingEndDate"</span>: null,
      <span class="s2">"billCycleDayLocal"</span>: 17,
      <span class="s2">"events"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-08-17"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"PHASE"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement+billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"PHASE"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"priceOverrides"</span>: null,
      <span class="s2">"prices"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"phaseName"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
          <span class="s2">"fixedPrice"</span>: 0,
          <span class="s2">"recurringPrice"</span>: null,
          <span class="s2">"usagePrices"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"phaseName"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
          <span class="s2">"phaseType"</span>: <span class="s2">"EVERGREEN"</span>,
          <span class="s2">"fixedPrice"</span>: null,
          <span class="s2">"recurringPrice"</span>: 100,
          <span class="s2">"usagePrices"</span>: <span class="o">[]</span>
        <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"timeline"</span>: <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"events"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
        <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
        <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
        <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
        <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
        <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
        <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
        <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
        <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="o">{</span>
        <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
        <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
        <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
        <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
        <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
        <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
        <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
        <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
        <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="o">{</span>
        <span class="s2">"eventId"</span>: <span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span>,
        <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
        <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-08-17"</span>,
        <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
        <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"eventType"</span>: <span class="s2">"PHASE"</span>,
        <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
        <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
        <span class="s2">"serviceName"</span>: <span class="s2">"entitlement+billing-service"</span>,
        <span class="s2">"serviceStateName"</span>: <span class="s2">"PHASE"</span>,
        <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Bundle</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Bundle</span><span class="nd">@efd93c26</span>
    <span class="nl">accountId:</span> <span class="mi">11</span><span class="n">d96ccc</span><span class="o">-</span><span class="mi">9</span><span class="n">bfb</span><span class="o">-</span><span class="mi">4349</span><span class="o">-</span><span class="mi">8</span><span class="n">d75</span><span class="o">-</span><span class="mi">0</span><span class="n">ae5a7ed8d14</span>
    <span class="nl">bundleId:</span> <span class="mi">90</span><span class="n">ec582a</span><span class="o">-</span><span class="mi">5</span><span class="n">da8</span><span class="o">-</span><span class="mi">49</span><span class="n">d5</span><span class="o">-</span><span class="n">a656</span><span class="o">-</span><span class="n">c63cbc9d30fd</span>
    <span class="nl">externalKey:</span> <span class="mi">93199</span>
    <span class="nl">subscriptions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="err">@</span><span class="mi">256</span><span class="n">a98cc</span>
        <span class="nl">accountId:</span> <span class="mi">11</span><span class="n">d96ccc</span><span class="o">-</span><span class="mi">9</span><span class="n">bfb</span><span class="o">-</span><span class="mi">4349</span><span class="o">-</span><span class="mi">8</span><span class="n">d75</span><span class="o">-</span><span class="mi">0</span><span class="n">ae5a7ed8d14</span>
        <span class="nl">bundleId:</span> <span class="mi">90</span><span class="n">ec582a</span><span class="o">-</span><span class="mi">5</span><span class="n">da8</span><span class="o">-</span><span class="mi">49</span><span class="n">d5</span><span class="o">-</span><span class="n">a656</span><span class="o">-</span><span class="n">c63cbc9d30fd</span>
        <span class="nl">subscriptionId:</span> <span class="mi">2</span><span class="n">a95b238</span><span class="o">-</span><span class="mi">719</span><span class="n">f</span><span class="o">-</span><span class="mi">4</span><span class="n">c2d</span><span class="o">-</span><span class="n">a63e</span><span class="o">-</span><span class="n">f1f34f11dd53</span>
        <span class="nl">externalKey:</span> <span class="mi">93199</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">productCategory:</span> <span class="n">BASE</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">CANCELLED</span>
        <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
        <span class="nl">cancelledDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@a883ef63</span>
            <span class="nl">eventId:</span> <span class="mi">18719</span><span class="n">cae</span><span class="o">-</span><span class="n">eab1</span><span class="o">-</span><span class="mi">4</span><span class="n">f75</span><span class="o">-</span><span class="mi">9</span><span class="n">ea7</span><span class="o">-</span><span class="n">f1e3135a3e7c</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">856</span><span class="n">f5bdf</span>
            <span class="nl">eventId:</span> <span class="mi">81518934</span><span class="o">-</span><span class="mi">4418</span><span class="o">-</span><span class="mi">491</span><span class="n">b</span><span class="o">-</span><span class="mi">819</span><span class="n">c</span><span class="o">-</span><span class="mi">72</span><span class="n">ab7c840bd6</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">3</span><span class="n">ced19b8</span>
            <span class="nl">eventId:</span> <span class="n">c0a8f0ce</span><span class="o">-</span><span class="n">db27</span><span class="o">-</span><span class="mi">4371</span><span class="o">-</span><span class="mi">81</span><span class="n">f0</span><span class="o">-</span><span class="mi">74148</span><span class="n">e36663f</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">STOP_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">true</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_CANCELLED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">401111</span><span class="n">f4</span>
            <span class="nl">eventId:</span> <span class="mi">762</span><span class="n">e80db</span><span class="o">-</span><span class="n">d75e</span><span class="o">-</span><span class="mi">4</span><span class="n">b67</span><span class="o">-</span><span class="mi">9</span><span class="n">ccc</span><span class="o">-</span><span class="n">b816a00181b7</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">STOP_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">STOP_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
            <span class="nl">fixedPrice:</span> <span class="mi">0</span>
            <span class="nl">recurringPrice:</span> <span class="kc">null</span>
            <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">timeline:</span> <span class="kd">class</span> <span class="nc">BundleTimeline</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BundleTimeline</span><span class="nd">@b8eeb095</span>
        <span class="nl">accountId:</span> <span class="mi">11</span><span class="n">d96ccc</span><span class="o">-</span><span class="mi">9</span><span class="n">bfb</span><span class="o">-</span><span class="mi">4349</span><span class="o">-</span><span class="mi">8</span><span class="n">d75</span><span class="o">-</span><span class="mi">0</span><span class="n">ae5a7ed8d14</span>
        <span class="nl">bundleId:</span> <span class="mi">90</span><span class="n">ec582a</span><span class="o">-</span><span class="mi">5</span><span class="n">da8</span><span class="o">-</span><span class="mi">49</span><span class="n">d5</span><span class="o">-</span><span class="n">a656</span><span class="o">-</span><span class="n">c63cbc9d30fd</span>
        <span class="nl">externalKey:</span> <span class="mi">93199</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@d88c1e6d</span>
            <span class="nl">eventId:</span> <span class="mi">18719</span><span class="n">cae</span><span class="o">-</span><span class="n">eab1</span><span class="o">-</span><span class="mi">4</span><span class="n">f75</span><span class="o">-</span><span class="mi">9</span><span class="n">ea7</span><span class="o">-</span><span class="n">f1e3135a3e7c</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">92</span><span class="n">c880de</span>
            <span class="nl">eventId:</span> <span class="mi">81518934</span><span class="o">-</span><span class="mi">4418</span><span class="o">-</span><span class="mi">491</span><span class="n">b</span><span class="o">-</span><span class="mi">819</span><span class="n">c</span><span class="o">-</span><span class="mi">72</span><span class="n">ab7c840bd6</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">4871</span><span class="n">bbf6</span>
            <span class="nl">eventId:</span> <span class="n">c0a8f0ce</span><span class="o">-</span><span class="n">db27</span><span class="o">-</span><span class="mi">4371</span><span class="o">-</span><span class="mi">81</span><span class="n">f0</span><span class="o">-</span><span class="mi">74148</span><span class="n">e36663f</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">STOP_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">true</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_CANCELLED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">3</span><span class="n">be2d635</span>
            <span class="nl">eventId:</span> <span class="mi">762</span><span class="n">e80db</span><span class="o">-</span><span class="n">d75e</span><span class="o">-</span><span class="mi">4</span><span class="n">b67</span><span class="o">-</span><span class="mi">9</span><span class="n">ccc</span><span class="o">-</span><span class="n">b816a00181b7</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">STOP_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">STOP_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
   <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
   <span class="s2">"subscriptions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
         <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
         <span class="s2">"subscriptionId"</span><span class="ss">:"e29573cc-d0e6-4d26-b97e-1a9c02d520ad"</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
         <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"productName"</span><span class="ss">:"Sports"</span><span class="p">,</span>
         <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
         <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
         <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
         <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
         <span class="s2">"events"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"e0136144-a852-4eaa-b721-c8b585dcb4a6"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"72a51773-9e1d-4ad7-beeb-03139f60ea3d"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"341992e2-4565-4457-9d20-d2803d11aa61"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"priceOverrides"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
               <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
               <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"timeline"</span><span class="p">:{</span>
      <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
      <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
      <span class="s2">"events"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"eventId"</span><span class="ss">:"e0136144-a852-4eaa-b721-c8b585dcb4a6"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
            <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
            <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
            <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">"eventId"</span><span class="ss">:"72a51773-9e1d-4ad7-beeb-03139f60ea3d"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
            <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
            <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
            <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">"eventId"</span><span class="ss">:"341992e2-4565-4457-9d20-d2803d11aa61"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
            <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
            <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
            <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
            <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8ef95bea-9306-4b26-a43c-090de8779599'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
 <span class="s">'subscriptions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8ef95bea-9306-4b26-a43c-090de8779599'</span><span class="p">,</span>
                    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                    <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                    <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
                    <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'80ca6915-0293-4b1d-8bc6-b3c9fe1bee03'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'ce26b570-0a9f-463e-b65c-96a9fd67f124'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'c7af9fa3-5465-4e69-8a84-6977c711921c'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
                    <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
                    <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                    <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                    <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                    <span class="s">'price_overrides'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                         <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                         <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                         <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                         <span class="s">'recurring_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                         <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]},</span>
                                        <span class="p">{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                         <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                         <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
                                         <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                         <span class="s">'recurring_price'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
                                         <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]}],</span>
                    <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
                    <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                    <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
                    <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="s">'state'</span><span class="p">:</span> <span class="s">'ACTIVE'</span><span class="p">,</span>
                    <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'6f6cab9d-dfe0-4b89-9a09-b16055f72f5c'</span><span class="p">}],</span>
 <span class="s">'timeline'</span><span class="p">:</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8ef95bea-9306-4b26-a43c-090de8779599'</span><span class="p">,</span>
              <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
              <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
              <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'80ca6915-0293-4b1d-8bc6-b3c9fe1bee03'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'ce26b570-0a9f-463e-b65c-96a9fd67f124'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'c7af9fa3-5465-4e69-8a84-6977c711921c'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
              <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">}}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a bundle resource object.</p>
<h3 id='bundle-retrieve-a-bundle-by-external-key'>Retrieve a bundle by external key</h3>
<p>This API retrieves a bundle resource object based on its external key </p>

<p><strong>HTTP Request</strong> </p>

<p>Retrieves the details information for the <code>Bundle</code> using its <code>externalKey</code>.</p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles?externalKey=2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"93199"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted bundles</span>

<span class="n">Bundles</span> <span class="n">bundles</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundleByKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">,</span> 
                                           <span class="n">includedDeleted</span><span class="o">,</span>
                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">external_key</span> <span class="o">=</span> <span class="s1">'4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135'</span>
<span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> 
                            <span class="n">included_deleted</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_external_key</span> <span class="o">=</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundle_by_key</span><span class="p">(</span><span class="n">bundle_external_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"subscriptions"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
        <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
        <span class="s2">"subscriptionId"</span>: <span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span>,
        <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
        <span class="s2">"startDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"productName"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"productCategory"</span>: <span class="s2">"BASE"</span>,
        <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
        <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
        <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
        <span class="s2">"state"</span>: <span class="s2">"ACTIVE"</span>,
        <span class="s2">"sourceType"</span>: <span class="s2">"NATIVE"</span>,
        <span class="s2">"cancelledDate"</span>: null,
        <span class="s2">"chargedThroughDate"</span>: null,
        <span class="s2">"billingStartDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"billingEndDate"</span>: null,
        <span class="s2">"billCycleDayLocal"</span>: 17,
        <span class="s2">"events"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-08-17"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"PHASE"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement+billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"PHASE"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"priceOverrides"</span>: null,
        <span class="s2">"prices"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"phaseName"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
            <span class="s2">"fixedPrice"</span>: 0,
            <span class="s2">"recurringPrice"</span>: null,
            <span class="s2">"usagePrices"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"phaseName"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
            <span class="s2">"phaseType"</span>: <span class="s2">"EVERGREEN"</span>,
            <span class="s2">"fixedPrice"</span>: null,
            <span class="s2">"recurringPrice"</span>: 100,
            <span class="s2">"usagePrices"</span>: <span class="o">[]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"timeline"</span>: <span class="o">{</span>
      <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"events"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-08-17"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"PHASE"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement+billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"PHASE"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Bundle</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Bundle</span><span class="err">@</span><span class="mi">2</span><span class="n">b6e1c9d</span>
    <span class="nl">accountId:</span> <span class="n">a7c0b70d</span><span class="o">-</span><span class="n">fbc3</span><span class="o">-</span><span class="mi">43</span><span class="n">cf</span><span class="o">-</span><span class="mi">98</span><span class="n">e7</span><span class="o">-</span><span class="mi">0</span><span class="n">af57c1a93fb</span>
    <span class="nl">bundleId:</span> <span class="mi">4</span><span class="n">a2fcd90</span><span class="o">-</span><span class="mi">7</span><span class="n">c8c</span><span class="o">-</span><span class="mi">4877</span><span class="o">-</span><span class="mi">93</span><span class="n">f9</span><span class="o">-</span><span class="mi">9</span><span class="n">e99e8cd6953</span>
    <span class="nl">externalKey:</span> <span class="mi">93199</span>
    <span class="nl">subscriptions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="err">@</span><span class="mi">22</span><span class="n">dc8662</span>
        <span class="nl">accountId:</span> <span class="n">a7c0b70d</span><span class="o">-</span><span class="n">fbc3</span><span class="o">-</span><span class="mi">43</span><span class="n">cf</span><span class="o">-</span><span class="mi">98</span><span class="n">e7</span><span class="o">-</span><span class="mi">0</span><span class="n">af57c1a93fb</span>
        <span class="nl">bundleId:</span> <span class="mi">4</span><span class="n">a2fcd90</span><span class="o">-</span><span class="mi">7</span><span class="n">c8c</span><span class="o">-</span><span class="mi">4877</span><span class="o">-</span><span class="mi">93</span><span class="n">f9</span><span class="o">-</span><span class="mi">9</span><span class="n">e99e8cd6953</span>
        <span class="nl">subscriptionId:</span> <span class="mi">9</span><span class="n">a55b6f3</span><span class="o">-</span><span class="n">ada7</span><span class="o">-</span><span class="mi">4</span><span class="n">a78</span><span class="o">-</span><span class="mi">915</span><span class="n">f</span><span class="o">-</span><span class="mi">373</span><span class="n">af56cbb00</span>
        <span class="nl">externalKey:</span> <span class="mi">93199</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">productCategory:</span> <span class="n">BASE</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">ACTIVE</span>
        <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@ebe2ab4a</span>
            <span class="nl">eventId:</span> <span class="mi">37</span><span class="n">b7e919</span><span class="o">-</span><span class="mi">08</span><span class="n">ba</span><span class="o">-</span><span class="mi">4</span><span class="n">c7d</span><span class="o">-</span><span class="n">a902</span><span class="o">-</span><span class="mi">8</span><span class="n">d7a10b47157</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">9</span><span class="n">e770028</span>
            <span class="nl">eventId:</span> <span class="mi">2</span><span class="n">a994af7</span><span class="o">-</span><span class="mi">8</span><span class="n">faf</span><span class="o">-</span><span class="mi">444</span><span class="n">f</span><span class="o">-</span><span class="n">a1df</span><span class="o">-</span><span class="n">fd6c68a9dbab</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">54</span><span class="n">e085c2</span>
            <span class="nl">eventId:</span> <span class="mi">95</span><span class="n">ddcc14</span><span class="o">-</span><span class="n">ea6d</span><span class="o">-</span><span class="mi">4</span><span class="n">a5c</span><span class="o">-</span><span class="n">b057</span><span class="o">-</span><span class="mi">3</span><span class="n">a0d33341ab9</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
            <span class="nl">fixedPrice:</span> <span class="mi">0</span>
            <span class="nl">recurringPrice:</span> <span class="kc">null</span>
            <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
            <span class="nl">fixedPrice:</span> <span class="kc">null</span>
            <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
            <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">timeline:</span> <span class="kd">class</span> <span class="nc">BundleTimeline</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BundleTimeline</span><span class="err">@</span><span class="mi">7</span><span class="n">ea930a8</span>
        <span class="nl">accountId:</span> <span class="n">a7c0b70d</span><span class="o">-</span><span class="n">fbc3</span><span class="o">-</span><span class="mi">43</span><span class="n">cf</span><span class="o">-</span><span class="mi">98</span><span class="n">e7</span><span class="o">-</span><span class="mi">0</span><span class="n">af57c1a93fb</span>
        <span class="nl">bundleId:</span> <span class="mi">4</span><span class="n">a2fcd90</span><span class="o">-</span><span class="mi">7</span><span class="n">c8c</span><span class="o">-</span><span class="mi">4877</span><span class="o">-</span><span class="mi">93</span><span class="n">f9</span><span class="o">-</span><span class="mi">9</span><span class="n">e99e8cd6953</span>
        <span class="nl">externalKey:</span> <span class="mi">93199</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">89</span><span class="n">e50f83</span>
            <span class="nl">eventId:</span> <span class="mi">37</span><span class="n">b7e919</span><span class="o">-</span><span class="mi">08</span><span class="n">ba</span><span class="o">-</span><span class="mi">4</span><span class="n">c7d</span><span class="o">-</span><span class="n">a902</span><span class="o">-</span><span class="mi">8</span><span class="n">d7a10b47157</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@cb989fa0</span>
            <span class="nl">eventId:</span> <span class="mi">2</span><span class="n">a994af7</span><span class="o">-</span><span class="mi">8</span><span class="n">faf</span><span class="o">-</span><span class="mi">444</span><span class="n">f</span><span class="o">-</span><span class="n">a1df</span><span class="o">-</span><span class="n">fd6c68a9dbab</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">5</span><span class="n">fe74ae5</span>
            <span class="nl">eventId:</span> <span class="mi">95</span><span class="n">ddcc14</span><span class="o">-</span><span class="n">ea6d</span><span class="o">-</span><span class="mi">4</span><span class="n">a5c</span><span class="o">-</span><span class="n">b057</span><span class="o">-</span><span class="mi">3</span><span class="n">a0d33341ab9</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
   <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
   <span class="s2">"subscriptions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
         <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
         <span class="s2">"subscriptionId"</span><span class="ss">:"e29573cc-d0e6-4d26-b97e-1a9c02d520ad"</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
         <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"productName"</span><span class="ss">:"Sports"</span><span class="p">,</span>
         <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
         <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
         <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
         <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
         <span class="s2">"events"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"e0136144-a852-4eaa-b721-c8b585dcb4a6"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"72a51773-9e1d-4ad7-beeb-03139f60ea3d"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"341992e2-4565-4457-9d20-d2803d11aa61"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"priceOverrides"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
               <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
               <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
               <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"timeline"</span><span class="p">:{</span>
      <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
      <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
      <span class="s2">"events"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"eventId"</span><span class="ss">:"e0136144-a852-4eaa-b721-c8b585dcb4a6"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
            <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
            <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
            <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">"eventId"</span><span class="ss">:"72a51773-9e1d-4ad7-beeb-03139f60ea3d"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
            <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
            <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
            <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
            <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">"eventId"</span><span class="ss">:"341992e2-4565-4457-9d20-d2803d11aa61"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
            <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
            <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
            <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
            <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8ef95bea-9306-4b26-a43c-090de8779599'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
 <span class="s">'subscriptions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8ef95bea-9306-4b26-a43c-090de8779599'</span><span class="p">,</span>
                    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                    <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                    <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
                    <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'80ca6915-0293-4b1d-8bc6-b3c9fe1bee03'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'ce26b570-0a9f-463e-b65c-96a9fd67f124'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'c7af9fa3-5465-4e69-8a84-6977c711921c'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
                    <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
                    <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                    <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                    <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                    <span class="s">'price_overrides'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                                         <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                         <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                                         <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                         <span class="s">'recurring_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                         <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]},</span>
                                        <span class="p">{</span><span class="s">'fixed_price'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                                         <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                         <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'EVERGREEN'</span><span class="p">,</span>
                                         <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                         <span class="s">'recurring_price'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
                                         <span class="s">'usage_price_overrides'</span><span class="p">:</span> <span class="p">[]}],</span>
                    <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
                    <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                    <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
                    <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="s">'state'</span><span class="p">:</span> <span class="s">'ACTIVE'</span><span class="p">,</span>
                    <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'6f6cab9d-dfe0-4b89-9a09-b16055f72f5c'</span><span class="p">}],</span>
 <span class="s">'timeline'</span><span class="p">:</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8ef95bea-9306-4b26-a43c-090de8779599'</span><span class="p">,</span>
              <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
              <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">,</span>
              <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'80ca6915-0293-4b1d-8bc6-b3c9fe1bee03'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'ce26b570-0a9f-463e-b65c-96a9fd67f124'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'c7af9fa3-5465-4e69-8a84-6977c711921c'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
              <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span><span class="p">}}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>String</td>
<td>yes</td>
<td>none</td>
<td>The subscription external key</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a subscription resource object.</p>
<h3 id='bundle-update-a-bundle-externalkey'>Update a bundle externalKey</h3>
<p>THis API sets a new external key for a bundle</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/renameKey</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d", "externalKey": "another_external_key"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/renameKey"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>    
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">bundle_id</span> <span class="o">=</span> <span class="n">bundle_id</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">external_key</span> <span class="o">=</span> <span class="s2">"new_external_key"</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">rename_external_key</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span> 
                           <span class="n">comment</span><span class="p">,</span> 
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="o">=</span><span class="n">bundle_id</span><span class="p">,</span> 
              <span class="n">external_key</span><span class="o">=</span><span class="s">'new_external_key'</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">rename_external_key</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span>
                              <span class="n">body</span><span class="p">,</span>
                              <span class="n">created_by</span><span class="p">,</span>
                              <span class="n">api_key</span><span class="p">,</span>
                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A bundle resource containing the new external key</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='bundle-transfer'>Transfer</h2>
<p>Transfer a bundle to another account.</p>
<h3 id='bundle-transfer-a-bundle-to-another-account'>Transfer a bundle to another account</h3>
<p>This API &quot;transfers&quot; a bundle to another existing account. This is carried out as follows:</p>

<ol>
<li><p>A new bundle is created in the destination account. The new bundle is assigned a new id but receives the same external key from the original bundle.</p></li>
<li><p>All subscriptions in the original bundle are copied to the new bundle. The <strong>sourceType</strong> of these subscriptions is set to TRANSFERRED.</p></li>
<li><p>All subscriptions in the original bundle are marked cancelled as of the transfer date but are not deleted. Billing is terminated on the transfer date or later according to the billing policy.</p></li>
<li><p>The subscriptions in the new bundle are assigned a start date as of the time of transfer, and inherit all of the terms and remaining dates from the original subscription.</p></li>
</ol>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "accountId": "8785164f-b5d7-4da1-9495-33f5105e8d80", "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.01:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b84a8af9-73d4-4749-8d81-38dbcc2d7fb1"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d82d3638-fca7-4c16-9e68-8f8db75997cc"</span><span class="o">);</span>

<span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
<span class="n">bundle</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">bundle</span><span class="o">.</span><span class="na">setBundleId</span><span class="o">(</span><span class="n">bundleId</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">BillingActionPolicy</span> <span class="n">billingPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Bundle</span> <span class="n">result</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">transferBundle</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                         <span class="n">bundle</span><span class="o">,</span> 
                                         <span class="n">requestedDate</span><span class="o">,</span> 
                                         <span class="n">billingPolicy</span><span class="o">,</span>
                                         <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>
<span class="n">billing_policy</span> <span class="o">=</span> <span class="s2">"END_OF_TERM"</span>

<span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="n">new_account_id</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">bundle_id</span> <span class="o">=</span> <span class="n">bundle_id</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">transfer</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span> 
                <span class="n">billing_policy</span><span class="p">,</span> 
                <span class="n">user</span><span class="p">,</span> 
                <span class="n">reason</span><span class="p">,</span> 
                <span class="n">comment</span><span class="p">,</span> 
                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span>
<span class="n">new_account_id</span> <span class="o">=</span> <span class="s">'71499886-296d-4b0f-8b76-0eed352d8801'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="o">=</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">account_id</span><span class="o">=</span><span class="n">new_account_id</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">transfer_bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                          <span class="n">body</span><span class="p">,</span> 
                          <span class="n">created_by</span><span class="p">,</span> 
                          <span class="n">api_key</span><span class="p">,</span> 
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d?billingPolicy<span class="o">=</span>END_OF_TERM
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Bundle</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Bundle</span><span class="err">@</span><span class="mi">222591</span><span class="n">c5</span>
    <span class="nl">accountId:</span> <span class="n">d82d3638</span><span class="o">-</span><span class="n">fca7</span><span class="o">-</span><span class="mi">4</span><span class="n">c16</span><span class="o">-</span><span class="mi">9</span><span class="n">e68</span><span class="o">-</span><span class="mi">8</span><span class="n">f8db75997cc</span>
    <span class="nl">bundleId:</span> <span class="n">b84a8af9</span><span class="o">-</span><span class="mi">73</span><span class="n">d4</span><span class="o">-</span><span class="mi">4749</span><span class="o">-</span><span class="mi">8</span><span class="n">d81</span><span class="o">-</span><span class="mi">38</span><span class="n">dbcc2d7fb1</span>
    <span class="nl">externalKey:</span> <span class="mi">93199</span>
    <span class="nl">subscriptions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="nd">@a668d933</span>
        <span class="nl">accountId:</span> <span class="n">d82d3638</span><span class="o">-</span><span class="n">fca7</span><span class="o">-</span><span class="mi">4</span><span class="n">c16</span><span class="o">-</span><span class="mi">9</span><span class="n">e68</span><span class="o">-</span><span class="mi">8</span><span class="n">f8db75997cc</span>
        <span class="nl">bundleId:</span> <span class="n">b84a8af9</span><span class="o">-</span><span class="mi">73</span><span class="n">d4</span><span class="o">-</span><span class="mi">4749</span><span class="o">-</span><span class="mi">8</span><span class="n">d81</span><span class="o">-</span><span class="mi">38</span><span class="n">dbcc2d7fb1</span>
        <span class="nl">subscriptionId:</span> <span class="mi">373</span><span class="n">e7cce</span><span class="o">-</span><span class="mo">055</span><span class="mi">8</span><span class="o">-</span><span class="mi">4</span><span class="n">c31</span><span class="o">-</span><span class="mi">98</span><span class="n">af</span><span class="o">-</span><span class="n">aab54b67c4a6</span>
        <span class="nl">externalKey:</span> <span class="mi">93199</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">productCategory:</span> <span class="n">BASE</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">ACTIVE</span>
        <span class="nl">sourceType:</span> <span class="n">TRANSFERRED</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="kc">null</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">1</span><span class="n">e1bbe63</span>
            <span class="nl">eventId:</span> <span class="mi">1779</span><span class="n">fcae</span><span class="o">-</span><span class="n">a6ca</span><span class="o">-</span><span class="mi">43</span><span class="n">dd</span><span class="o">-</span><span class="mi">9429</span><span class="o">-</span><span class="mi">85</span><span class="n">f946fa4055</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">54887921</span>
            <span class="nl">eventId:</span> <span class="n">b242eda1</span><span class="o">-</span><span class="n">dc26</span><span class="o">-</span><span class="mi">4875</span><span class="o">-</span><span class="n">b92c</span><span class="o">-</span><span class="n">a99c76084a06</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">5652</span><span class="n">e31d</span>
            <span class="nl">eventId:</span> <span class="mi">5</span><span class="n">b59caa3</span><span class="o">-</span><span class="n">d996</span><span class="o">-</span><span class="mi">4</span><span class="n">c9c</span><span class="o">-</span><span class="n">afc1</span><span class="o">-</span><span class="n">cc932e5a0ff8</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
            <span class="nl">fixedPrice:</span> <span class="mi">0</span>
            <span class="nl">recurringPrice:</span> <span class="kc">null</span>
            <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">PhasePriceOverride</span> <span class="o">{</span>
            <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">phaseType:</span> <span class="n">EVERGREEN</span>
            <span class="nl">fixedPrice:</span> <span class="kc">null</span>
            <span class="nl">recurringPrice:</span> <span class="mf">249.95</span>
            <span class="nl">usagePriceOverrides:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">timeline:</span> <span class="kd">class</span> <span class="nc">BundleTimeline</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BundleTimeline</span><span class="err">@</span><span class="mi">8</span><span class="n">ad5adda</span>
        <span class="nl">accountId:</span> <span class="n">d82d3638</span><span class="o">-</span><span class="n">fca7</span><span class="o">-</span><span class="mi">4</span><span class="n">c16</span><span class="o">-</span><span class="mi">9</span><span class="n">e68</span><span class="o">-</span><span class="mi">8</span><span class="n">f8db75997cc</span>
        <span class="nl">bundleId:</span> <span class="n">b84a8af9</span><span class="o">-</span><span class="mi">73</span><span class="n">d4</span><span class="o">-</span><span class="mi">4749</span><span class="o">-</span><span class="mi">8</span><span class="n">d81</span><span class="o">-</span><span class="mi">38</span><span class="n">dbcc2d7fb1</span>
        <span class="nl">externalKey:</span> <span class="mi">93199</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">49</span><span class="n">f9e293</span>
            <span class="nl">eventId:</span> <span class="mi">1779</span><span class="n">fcae</span><span class="o">-</span><span class="n">a6ca</span><span class="o">-</span><span class="mi">43</span><span class="n">dd</span><span class="o">-</span><span class="mi">9429</span><span class="o">-</span><span class="mi">85</span><span class="n">f946fa4055</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">55</span><span class="n">e764b4</span>
            <span class="nl">eventId:</span> <span class="n">b242eda1</span><span class="o">-</span><span class="n">dc26</span><span class="o">-</span><span class="mi">4875</span><span class="o">-</span><span class="n">b92c</span><span class="o">-</span><span class="n">a99c76084a06</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">16</span><span class="n">aec25d</span>
            <span class="nl">eventId:</span> <span class="mi">5</span><span class="n">b59caa3</span><span class="o">-</span><span class="n">d996</span><span class="o">-</span><span class="mi">4</span><span class="n">c9c</span><span class="o">-</span><span class="n">afc1</span><span class="o">-</span><span class="n">cc932e5a0ff8</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"71499886-296d-4b0f-8b76-0eed352d8801"</span><span class="p">,</span>
   <span class="s2">"bundleId"</span><span class="ss">:"cff04ff5-19ba-4bdc-8aca-ed486d4b845c"</span><span class="p">,</span>
   <span class="s2">"externalKey"</span><span class="ss">:"25f2de6b-2443-4d7c-8487-22bf6df5a5ec-73709"</span><span class="p">,</span>
   <span class="s2">"subscriptions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"accountId"</span><span class="ss">:"71499886-296d-4b0f-8b76-0eed352d8801"</span><span class="p">,</span>
         <span class="s2">"bundleId"</span><span class="ss">:"cff04ff5-19ba-4bdc-8aca-ed486d4b845c"</span><span class="p">,</span>
         <span class="s2">"subscriptionId"</span><span class="ss">:"46e6fcdc-9f63-4ffc-a091-0cde70f964f0"</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"25f2de6b-2443-4d7c-8487-22bf6df5a5ec-73709"</span><span class="p">,</span>
         <span class="s2">"startDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
         <span class="s2">"productName"</span><span class="ss">:"Sports"</span><span class="p">,</span>
         <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
         <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
         <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
         <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
         <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
         <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
         <span class="s2">"sourceType"</span><span class="ss">:"TRANSFERRED"</span><span class="p">,</span>
         <span class="s2">"billingStartDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
         <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
         <span class="s2">"events"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"605c5696-4046-4597-8a67-7e50d26856cd"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">},</span>
            <span class="p">{</span>
               <span class="s2">"eventId"</span><span class="ss">:"fbc53e69-0683-4904-bc77-5d244b9ad1c9"</span><span class="p">,</span>
               <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
               <span class="s2">"effectiveDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
               <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
               <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
               <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
               <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
               <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
               <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"priceOverrides"</span><span class="p">:[</span>
            <span class="p">{</span>
               <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
               <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
               <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
               <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span>
            <span class="p">}</span>
         <span class="p">],</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"timeline"</span><span class="p">:{</span>
      <span class="s2">"accountId"</span><span class="ss">:"71499886-296d-4b0f-8b76-0eed352d8801"</span><span class="p">,</span>
      <span class="s2">"bundleId"</span><span class="ss">:"cff04ff5-19ba-4bdc-8aca-ed486d4b845c"</span><span class="p">,</span>
      <span class="s2">"externalKey"</span><span class="ss">:"25f2de6b-2443-4d7c-8487-22bf6df5a5ec-73709"</span><span class="p">,</span>
      <span class="s2">"events"</span><span class="p">:[</span>
         <span class="p">{</span>
            <span class="s2">"eventId"</span><span class="ss">:"605c5696-4046-4597-8a67-7e50d26856cd"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
            <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
            <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
            <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
            <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">},</span>
         <span class="p">{</span>
            <span class="s2">"eventId"</span><span class="ss">:"fbc53e69-0683-4904-bc77-5d244b9ad1c9"</span><span class="p">,</span>
            <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
            <span class="s2">"effectiveDate"</span><span class="ss">:"2013-09-01"</span><span class="p">,</span>
            <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
            <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
            <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
            <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
            <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
            <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
            <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
            <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
            <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
         <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">},</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A bundle resource containing the new account id</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>Requested date for the transfer of the bundle</td>
</tr>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>no</td>
<td>IMMEDIATE</td>
<td>When billing should occur (see below)</td>
</tr>
</tbody></table>

<p><strong>billingPolicy</strong>: options are START_OF_TERM, END_OF_TERM, or IMMEDIATE.</p>

<p><strong>Response</strong></p>

<p>IF successful, returns a status code of 201 and an empty body.</p>
<h2 id='bundle-blocking-state'>Blocking State</h2>
<p>See section <a href="#account-blocking-state">Account Blocking State</a> for an introduction.</p>
<h3 id='bundle-pause-a-bundle'>Pause a bundle</h3>
<p>Provides a simple interface to pause both billing and entitlement for all subscriptions in a bundle. The <strong>state</strong> attribute in the bundle resource is set to BLOCKED.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/pause</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/pause"</span> <span class="se">\</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>    
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">bundle_id</span> <span class="o">=</span> <span class="n">bundle_id</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">pause</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span> 
             <span class="n">user</span><span class="p">,</span> 
             <span class="n">reason</span><span class="p">,</span> 
             <span class="n">comment</span><span class="p">,</span> 
             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">pause_bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                       <span class="n">created_by</span><span class="p">,</span> 
                       <span class="n">api_key</span><span class="p">,</span> 
                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date for pausing</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='bundle-resume-a-bundle'>Resume a bundle</h3>
<p>Provides a simple interface to resume both billing and entitlement for all subscriptions in the bundle. The state of the bundle resource is set to ACTIVE.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/resume</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/resume"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>    
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">bundle_id</span> <span class="o">=</span> <span class="n">bundle_id</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">resume</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span> 
              <span class="n">user</span><span class="p">,</span> 
              <span class="n">reason</span><span class="p">,</span> 
              <span class="n">comment</span><span class="p">,</span> 
              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">resume_bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                        <span class="n">created_by</span><span class="p">,</span> 
                        <span class="n">api_key</span><span class="p">,</span> 
                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date to resume</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='bundle-block-a-bundle'>Block a bundle</h3>
<p>Provides a low level interface to add a <code>BlockingState</code> event for this bundle. Note that the previous <a href="#bundle-pause-a-bundle">pause</a> and <a href="#bundle-resume-a-bundle">resume</a> operations can be achieved using this API.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/block</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "stateName": "STATE1", "service": "ServiceStateService", "isBlockChange": false, "isBlockEntitlement": false, "isBlockBilling": false, "effectiveDate": "2018-07-17T21:17:28.842Z", "type": "SUBSCRIPTION" }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/block"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b84a8af9-73d4-4749-8d81-38dbcc2d7fb1"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">stateName</span> <span class="o">=</span> <span class="s">"block"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">service</span> <span class="o">=</span> <span class="s">"service"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">isBlockChange</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">isBlockEntitlement</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">isBlockBilling</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">DateTime</span> <span class="n">effectiveDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">auditLogs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">BlockingState</span> <span class="n">blockingState</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BlockingState</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                                <span class="n">stateName</span><span class="o">,</span> 
                                                <span class="n">service</span><span class="o">,</span> 
                                                <span class="n">isBlockChange</span><span class="o">,</span> 
                                                <span class="n">isBlockEntitlement</span><span class="o">,</span> 
                                                <span class="n">isBlockBilling</span><span class="o">,</span> 
                                                <span class="n">effectiveDate</span><span class="o">,</span> 
                                                <span class="n">BlockingStateType</span><span class="o">.</span><span class="na">SUBSCRIPTION_BUNDLE</span><span class="o">,</span> 
                                                <span class="n">auditLogs</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="na">getToday</span><span class="o">(</span><span class="n">DateTimeZone</span><span class="o">.</span><span class="na">forID</span><span class="o">(</span><span class="n">account</span><span class="o">.</span><span class="na">getTimeZone</span><span class="o">()));</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="n">ImmutableMap</span><span class="o">.&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="na">addBundleBlockingState</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                 <span class="n">blockingState</span><span class="o">,</span> 
                                 <span class="n">requestedDate</span><span class="o">,</span> 
                                 <span class="n">pluginProperty</span><span class="o">,</span> 
                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">state_name</span> <span class="o">=</span> <span class="s2">"STATE1"</span>
<span class="n">service</span> <span class="o">=</span> <span class="s2">"ServiceStateService"</span>
<span class="n">block_change</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_entitlement</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_billing</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">set_blocking_state</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span>
                          <span class="n">service</span><span class="p">,</span>
                          <span class="n">block_change</span><span class="p">,</span> 
                          <span class="n">block_entitlement</span><span class="p">,</span>
                          <span class="n">block_billing</span><span class="p">,</span> 
                          <span class="n">requested_date</span><span class="p">,</span>
                          <span class="n">user</span><span class="p">,</span> 
                          <span class="n">reason</span><span class="p">,</span> 
                          <span class="n">comment</span><span class="p">,</span>
                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">BlockingState</span><span class="p">(</span><span class="n">state_name</span><span class="o">=</span><span class="s">'STATE1'</span><span class="p">,</span> 
                     <span class="n">service</span><span class="o">=</span><span class="s">'ServiceStateService'</span><span class="p">,</span> 
                     <span class="n">is_block_change</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
                     <span class="n">is_block_entitlement</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
                     <span class="n">is_block_billing</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">add_bundle_blocking_state</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span>
                                    <span class="n">body</span><span class="p">,</span>
                                    <span class="n">created_by</span><span class="p">,</span>
                                    <span class="n">api_key</span><span class="p">,</span>
                                    <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/block?blockingStateTypes<span class="o">=</span>SUBSCRIPTION_BUNDLE
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A blocking state resource representing the intended new blocking state. For example,</p>

<p>{
      &quot;blockedId&quot;: &quot;943c4fd0-9000-4975-a3a8-09712223e1f8&quot;,<br>
      &quot;stateName&quot;: &quot;STATE1&quot;,<br>
      &quot;service&quot;: &quot;ServiceStateService&quot;,<br>
      &quot;isBlockChange&quot;: false,<br>
      &quot;isBlockEntitlement&quot;: false,<br>
      &quot;isBlockBilling&quot;: true,
      &quot;effectiveDate&quot;: &quot;2020-07-18T18:22:30.376Z&quot;,
      &quot;type&quot;: &quot;SUBSCRIPTION_BUNDLE&quot;
    }</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>requested date for blocking</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h2 id='bundle-custom-fields'>Custom Fields</h2>
<p><code>Custom fields</code> are <code>{key, value}</code> attributes that can be attached to any customer resources. For more on custom fields see <a href="#custom-fields">Custom Fields</a>. These endpoints manage custom fields associated with <code>Bundle</code> objects.</p>
<h3 id='bundle-add-custom-fields-to-bundle'>Add custom fields to bundle</h3>
<p>Adds one or more custom fields to a subscription object. Existing custom fields are not disturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "objectType": "BUNDLE", "name": "Test Custom Field", "value": "demo_test_value" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b84a8af9-73d4-4749-8d81-38dbcc2d7fb1"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">bundleId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">BUNDLE</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="na">createBundleCustomFields</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                   <span class="n">customFields</span><span class="o">,</span> 
                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'BUNDLE'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                        <span class="n">user</span><span class="p">,</span>
                        <span class="n">reason</span><span class="p">,</span>
                        <span class="n">comment</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">create_bundle_custom_fields</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span>
                                      <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                      <span class="n">created_by</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">59860</span><span class="n">a0d</span><span class="o">-</span><span class="n">c032</span><span class="o">-</span><span class="mi">456</span><span class="n">d</span><span class="o">-</span><span class="n">a35e</span><span class="o">-</span><span class="mi">3</span><span class="n">a48fe8579e5</span>
    <span class="nl">objectType:</span> <span class="n">BUNDLE</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"6e571e22-b794-413c-be6f-1b2aa4bf9824"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"0149ffc6-fdfd-40b1-8cf4-29a66aef51d4"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"BUNDLE"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects giving the name and value of the custom field, or fields, to be added. For example:</p>

<p>[
      {
        &quot;name&quot;: &quot;CF1&quot;,
        &quot;value&quot;: &quot;123&quot;
      }
    ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='bundle-retrieve-bundle-custom-fields'>Retrieve bundle custom fields</h3>
<p>Retrieves any custom field objects associated with the specified bundle</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">bundleCustomFields</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundleCustomFields</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span>
                                                                       <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundle_custom_fields</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"349de10f-4bb1-4e1a-93f6-11b745200bf5"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"BUNDLE"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Test Custom Field"</span>,
    <span class="s2">"value"</span>: <span class="s2">"demo_test_value"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">59860</span><span class="n">a0d</span><span class="o">-</span><span class="n">c032</span><span class="o">-</span><span class="mi">456</span><span class="n">d</span><span class="o">-</span><span class="n">a35e</span><span class="o">-</span><span class="mi">3</span><span class="n">a48fe8579e5</span>
    <span class="nl">objectType:</span> <span class="n">BUNDLE</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"BUNDLE"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'custom_field_id'</span><span class="p">:</span> <span class="s">'5670b594-9317-4aeb-bfef-2c2342ec172a'</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'Test Custom Field'</span><span class="p">,</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'BUNDLE'</span><span class="p">,</span>
 <span class="s">'value'</span><span class="p">:</span> <span class="s">'test_value'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='bundle-modify-custom-fields-for-a-bundle'>Modify custom fields for a bundle</h3>
<p>Modifies the value of one or more existing custom fields associated with a bundle</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "customFieldId": "349de10f-4bb1-4e1a-93f6-11b745200bf5", "objectId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d", "objectType": "BUNDLE", "name": "Test Custom Field", "value": "test_modify_value", "auditLogs": [] }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="na">modifyBundleCustomFields</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                   <span class="n">customFieldModified</span><span class="o">,</span> 
                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                           <span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span>
                           <span class="n">comment</span><span class="p">,</span> 
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">modify_bundle_custom_fields</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                                      <span class="p">[</span><span class="n">body</span><span class="p">],</span> 
                                      <span class="n">created_by</span><span class="p">,</span> 
                                      <span class="n">api_key</span><span class="p">,</span> 
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='bundle-remove-custom-fields-from-bundle'>Remove custom fields from bundle</h3>
<p>Delete one or more custom fields from a bundle</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields?customField=349de10f-4bb1-4e1a-93f6-11b745200bf5"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="na">deleteBundleCustomFields</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                   <span class="n">customFieldsId</span><span class="o">,</span> 
                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span> 
                           <span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span>
                           <span class="n">comment</span><span class="p">,</span> 
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span> 

<span class="n">bundleApi</span><span class="o">.</span><span class="n">delete_bundle_custom_fields</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                                      <span class="n">created_by</span><span class="p">,</span> 
                                      <span class="n">api_key</span><span class="p">,</span> 
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>List of object IDs for the custom fields that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='bundle-tags'>Tags</h2>
<p>See section <a href="#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable for a <code>Bundle</code>.</p>

<p>Let&#39;s assume there is an existing <code>user</code> tagDefintion already created with <code>tagDefinitionId</code>=<code>353752dd-9041-4450-b782-a8bb03a923c8</code>.</p>
<h3 id='bundle-add-tags-to-bundle'>Add tags to bundle</h3>
<p>This API adds one or more tags to a subscription. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ "353752dd-9041-4450-b782-a8bb03a923c8"]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">createBundleTags</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                         <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
               <span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span>
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">create_bundle_tags</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                             <span class="n">tag</span><span class="p">,</span> 
                             <span class="n">created_by</span><span class="p">,</span> 
                             <span class="n">api_key</span><span class="p">,</span> 
                             <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@bd138472</span>
    <span class="nl">tagId:</span> <span class="mi">1</span><span class="n">bb4b638</span><span class="o">-</span><span class="mi">3886</span><span class="o">-</span><span class="mi">4</span><span class="n">f73</span><span class="o">-</span><span class="mi">90</span><span class="n">a5</span><span class="o">-</span><span class="mi">89</span><span class="n">eb6d1bcf7f</span>
    <span class="nl">objectType:</span> <span class="n">BUNDLE</span>
    <span class="nl">objectId:</span> <span class="mi">917992</span><span class="n">d3</span><span class="o">-</span><span class="mi">5</span><span class="n">f1f</span><span class="o">-</span><span class="mi">4828</span><span class="o">-</span><span class="mi">9</span><span class="n">fff</span><span class="o">-</span><span class="mi">799</span><span class="n">cc4211aa9</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"BUNDLE"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"foo"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="p">:[</span>

      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more strings giving the UUID of tag definitions for the user tags to be added.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='bundle-retrieve-bundle-tags'>Retrieve bundle tags</h3>
<p>Retrieve all tags attached to this bundle.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags1</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundleTags</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                          <span class="n">includedDeleted</span><span class="o">,</span> 
                                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
            <span class="n">audit</span><span class="p">,</span>
            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundle_tags</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"e054c84a-0518-4611-92a8-53e849f0affd"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"BUNDLE"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"foo"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@cae768d7</span>
    <span class="nl">tagId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
    <span class="nl">objectType:</span> <span class="n">BUNDLE</span>
    <span class="nl">objectId:</span> <span class="n">e659f0f3</span><span class="o">-</span><span class="mi">745</span><span class="n">c</span><span class="o">-</span><span class="mi">46</span><span class="n">d5</span><span class="o">-</span><span class="mi">953</span><span class="n">c</span><span class="o">-</span><span class="mi">28</span><span class="n">fe9282fc7d</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">TAG</span>
        <span class="nl">objectId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
        <span class="nl">changedBy:</span> <span class="n">Toto</span>
        <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
        <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
        <span class="nl">userToken:</span> <span class="n">e36f7ba5</span><span class="o">-</span><span class="n">fb5b</span><span class="o">-</span><span class="mi">41</span><span class="n">c0</span><span class="o">-</span><span class="n">b47c</span><span class="o">-</span><span class="mi">77</span><span class="n">c48ab37dd9</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"BUNDLE"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"foo"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="p">:[</span>

      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'3e94fccf-0f37-40aa-90a4-122a4f381ebc'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'BUNDLE'</span><span class="p">,</span>
 <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'353752dd-9041-4450-b782-a8bb03a923c8'</span><span class="p">,</span>
 <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'foo'</span><span class="p">,</span>
 <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'fc7fab6e-751c-4dd3-b7fa-e93a66e42822'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='bundle-remove-tags-from-bundle'>Remove tags from bundle</h3>
<p>This API removes a list of tags attached to a bundle.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="na">deleteBundleTags</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                           <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                  <span class="n">user</span><span class="p">,</span>
                  <span class="n">reason</span><span class="p">,</span>
                  <span class="n">comment</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">delete_bundle_tags</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                             <span class="n">created_by</span><span class="p">,</span> 
                             <span class="n">api_key</span><span class="p">,</span> 
                             <span class="n">api_secret</span><span class="p">,</span>
                             <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of strings</td>
<td>true</td>
<td>none</td>
<td>List of tag definition IDs identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='bundle-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='bundle-retrieve-bundle-audit-logs-with-history-by-bundle-id'>Retrieve bundle audit logs with history by bundle id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to the bundle. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/d1b329c7-7dcf-466c-aaca-47bff304dab0/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"BUNDLE"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"admin"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"recordId"</span>: 316,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"externalKey"</span>: <span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span>,
      <span class="s2">"accountId"</span>: <span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span>,
      <span class="s2">"lastSysUpdateDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"originalCreatedDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"BUNDLES"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"BUNDLE_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"BUNDLE"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"SubscriptionBaseTransition"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"recordId"</span>: 316,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"externalKey"</span>: <span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span>,
      <span class="s2">"accountId"</span>: <span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span>,
      <span class="s2">"lastSysUpdateDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"originalCreatedDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"BUNDLES"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"BUNDLE_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>

</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs.</p>
<h2 id='bundle-list-search'>List/Search</h2><h3 id='bundle-list-bundles'>List bundles</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/bundles/pagination"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

<span class="n">Bundles</span> <span class="n">allBundles</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundles</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span> 
                                          <span class="n">limit</span><span class="o">,</span> 
                                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                       <span class="n">limit</span><span class="p">,</span>
                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundles</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"another_external_key"</span>,
    <span class="s2">"subscriptions"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
        <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
        <span class="s2">"subscriptionId"</span>: <span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span>,
        <span class="s2">"externalKey"</span>: <span class="s2">"another_external_key"</span>,
        <span class="s2">"startDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"productName"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"productCategory"</span>: <span class="s2">"BASE"</span>,
        <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
        <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
        <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
        <span class="s2">"state"</span>: <span class="s2">"CANCELLED"</span>,
        <span class="s2">"sourceType"</span>: <span class="s2">"NATIVE"</span>,
        <span class="s2">"cancelledDate"</span>: <span class="s2">"2018-07-19"</span>,
        <span class="s2">"chargedThroughDate"</span>: null,
        <span class="s2">"billingStartDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"billingEndDate"</span>: <span class="s2">"2018-07-19"</span>,
        <span class="s2">"billCycleDayLocal"</span>: 17,
        <span class="s2">"events"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"01387e92-8b6c-4c74-811f-3d2698646049"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"STOP_ENTITLEMENT"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">true</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_CANCELLED"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"1d605f2d-e605-47d5-b55c-904a0cba12f8"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"STOP_BILLING"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"STOP_BILLING"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"e9f343aa-3650-4709-a09d-8a3df908bd47"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"SERVICE_STATE_CHANGE"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"ServiceStateService"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"STATE1"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"priceOverrides"</span>: null,
        <span class="s2">"prices"</span>: <span class="o">[]</span>,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"timeline"</span>: <span class="o">{</span>
      <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"externalKey"</span>: <span class="s2">"another_external_key"</span>,
      <span class="s2">"events"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"01387e92-8b6c-4c74-811f-3d2698646049"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"STOP_ENTITLEMENT"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">true</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_CANCELLED"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"1d605f2d-e605-47d5-b55c-904a0cba12f8"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"STOP_BILLING"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"STOP_BILLING"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"e9f343aa-3650-4709-a09d-8a3df908bd47"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"SERVICE_STATE_CHANGE"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"ServiceStateService"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"STATE1"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span>,
    <span class="s2">"bundleId"</span>: <span class="s2">"02134ca5-8254-4c73-aaf2-89ed99a28fce"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"subscriptions"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"accountId"</span>: <span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span>,
        <span class="s2">"bundleId"</span>: <span class="s2">"02134ca5-8254-4c73-aaf2-89ed99a28fce"</span>,
        <span class="s2">"subscriptionId"</span>: <span class="s2">"3b78a8c1-30fb-4b4e-a247-b131cbf6fa71"</span>,
        <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
        <span class="s2">"startDate"</span>: <span class="s2">"2018-07-19"</span>,
        <span class="s2">"productName"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"productCategory"</span>: <span class="s2">"BASE"</span>,
        <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
        <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
        <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
        <span class="s2">"state"</span>: <span class="s2">"ACTIVE"</span>,
        <span class="s2">"sourceType"</span>: <span class="s2">"TRANSFERRED"</span>,
        <span class="s2">"cancelledDate"</span>: null,
        <span class="s2">"chargedThroughDate"</span>: <span class="s2">"2018-07-19"</span>,
        <span class="s2">"billingStartDate"</span>: <span class="s2">"2018-07-19"</span>,
        <span class="s2">"billingEndDate"</span>: null,
        <span class="s2">"billCycleDayLocal"</span>: 18,
        <span class="s2">"events"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"f247597d-deac-468e-8b18-9a04c633ec71"</span>,
            <span class="s2">"billingPeriod"</span>: null,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: null,
            <span class="s2">"product"</span>: null,
            <span class="s2">"priceList"</span>: null,
            <span class="s2">"eventType"</span>: <span class="s2">"SERVICE_STATE_CHANGE"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"account-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"CLOSE_ACCOUNT"</span>,
            <span class="s2">"phase"</span>: null,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"15987747-2c28-4475-965c-3b1cff08faa9"</span>,
            <span class="s2">"billingPeriod"</span>: null,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: null,
            <span class="s2">"product"</span>: null,
            <span class="s2">"priceList"</span>: null,
            <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
            <span class="s2">"phase"</span>: null,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"51c53d93-d3c1-4906-b295-c5a1b0d761e7"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"2cf6cd36-d0d1-461b-b525-f2a36a73be76"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-08-17"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"PHASE"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement+billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"PHASE"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"priceOverrides"</span>: null,
        <span class="s2">"prices"</span>: <span class="o">[]</span>,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"timeline"</span>: <span class="o">{</span>
      <span class="s2">"accountId"</span>: <span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span>,
      <span class="s2">"bundleId"</span>: <span class="s2">"02134ca5-8254-4c73-aaf2-89ed99a28fce"</span>,
      <span class="s2">"externalKey"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"events"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"f247597d-deac-468e-8b18-9a04c633ec71"</span>,
          <span class="s2">"billingPeriod"</span>: null,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: null,
          <span class="s2">"product"</span>: null,
          <span class="s2">"priceList"</span>: null,
          <span class="s2">"eventType"</span>: <span class="s2">"SERVICE_STATE_CHANGE"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"account-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"CLOSE_ACCOUNT"</span>,
          <span class="s2">"phase"</span>: null,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"15987747-2c28-4475-965c-3b1cff08faa9"</span>,
          <span class="s2">"billingPeriod"</span>: null,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: null,
          <span class="s2">"product"</span>: null,
          <span class="s2">"priceList"</span>: null,
          <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
          <span class="s2">"phase"</span>: null,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"51c53d93-d3c1-4906-b295-c5a1b0d761e7"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"2cf6cd36-d0d1-461b-b525-f2a36a73be76"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-08-17"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"PHASE"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement+billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"PHASE"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-evergreen"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Bundle</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Bundle</span><span class="err">@</span><span class="mi">2659</span><span class="n">bf49</span>
    <span class="nl">accountId:</span> <span class="n">b99980fb</span><span class="o">-</span><span class="mi">331</span><span class="n">f</span><span class="o">-</span><span class="mi">4129</span><span class="o">-</span><span class="mi">834</span><span class="n">b</span><span class="o">-</span><span class="mi">3522</span><span class="n">e845a4e3</span>
    <span class="nl">bundleId:</span> <span class="n">b424e3d6</span><span class="o">-</span><span class="n">d747</span><span class="o">-</span><span class="mi">4309</span><span class="o">-</span><span class="mi">954</span><span class="n">d</span><span class="o">-</span><span class="mi">1</span><span class="n">acb41bc690c</span>
    <span class="nl">externalKey:</span> <span class="mi">757</span><span class="n">e352e</span><span class="o">-</span><span class="n">dd97</span><span class="o">-</span><span class="mi">4800</span><span class="o">-</span><span class="mi">93</span><span class="n">a8</span><span class="o">-</span><span class="n">d2c38e407140</span>
    <span class="nl">subscriptions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="nd">@ec70e97d</span>
        <span class="nl">accountId:</span> <span class="n">b99980fb</span><span class="o">-</span><span class="mi">331</span><span class="n">f</span><span class="o">-</span><span class="mi">4129</span><span class="o">-</span><span class="mi">834</span><span class="n">b</span><span class="o">-</span><span class="mi">3522</span><span class="n">e845a4e3</span>
        <span class="nl">bundleId:</span> <span class="n">b424e3d6</span><span class="o">-</span><span class="n">d747</span><span class="o">-</span><span class="mi">4309</span><span class="o">-</span><span class="mi">954</span><span class="n">d</span><span class="o">-</span><span class="mi">1</span><span class="n">acb41bc690c</span>
        <span class="nl">subscriptionId:</span> <span class="n">bacec1ee</span><span class="o">-</span><span class="mi">7815</span><span class="o">-</span><span class="mi">485</span><span class="n">f</span><span class="o">-</span><span class="n">bec2</span><span class="o">-</span><span class="mi">0</span><span class="n">a875a8d68ad</span>
        <span class="nl">externalKey:</span> <span class="mi">757</span><span class="n">e352e</span><span class="o">-</span><span class="n">dd97</span><span class="o">-</span><span class="mi">4800</span><span class="o">-</span><span class="mi">93</span><span class="n">a8</span><span class="o">-</span><span class="n">d2c38e407140</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">productCategory:</span> <span class="n">BASE</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">ACTIVE</span>
        <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">24</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">324</span><span class="n">b0f94</span>
            <span class="nl">eventId:</span> <span class="mi">9</span><span class="n">b35680c</span><span class="o">-</span><span class="n">c63c</span><span class="o">-</span><span class="mi">47</span><span class="n">c8</span><span class="o">-</span><span class="mi">9</span><span class="n">fe5</span><span class="o">-</span><span class="mi">671</span><span class="n">b4bfa4e69</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@a1eefba7</span>
            <span class="nl">eventId:</span> <span class="n">b24494ca</span><span class="o">-</span><span class="mi">755</span><span class="n">c</span><span class="o">-</span><span class="mi">4432</span><span class="o">-</span><span class="mi">8</span><span class="n">b21</span><span class="o">-</span><span class="mi">6923</span><span class="n">d5fdd30f</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">66</span><span class="n">e2bfa7</span>
            <span class="nl">eventId:</span> <span class="n">a306143d</span><span class="o">-</span><span class="n">d2a3</span><span class="o">-</span><span class="mi">4</span><span class="n">f72</span><span class="o">-</span><span class="mi">95</span><span class="n">c8</span><span class="o">-</span><span class="mi">91</span><span class="n">b97ee7e6ca</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="o">[]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">timeline:</span> <span class="kd">class</span> <span class="nc">BundleTimeline</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BundleTimeline</span><span class="nd">@d6ec82ea</span>
        <span class="nl">accountId:</span> <span class="n">b99980fb</span><span class="o">-</span><span class="mi">331</span><span class="n">f</span><span class="o">-</span><span class="mi">4129</span><span class="o">-</span><span class="mi">834</span><span class="n">b</span><span class="o">-</span><span class="mi">3522</span><span class="n">e845a4e3</span>
        <span class="nl">bundleId:</span> <span class="n">b424e3d6</span><span class="o">-</span><span class="n">d747</span><span class="o">-</span><span class="mi">4309</span><span class="o">-</span><span class="mi">954</span><span class="n">d</span><span class="o">-</span><span class="mi">1</span><span class="n">acb41bc690c</span>
        <span class="nl">externalKey:</span> <span class="mi">757</span><span class="n">e352e</span><span class="o">-</span><span class="n">dd97</span><span class="o">-</span><span class="mi">4800</span><span class="o">-</span><span class="mi">93</span><span class="n">a8</span><span class="o">-</span><span class="n">d2c38e407140</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">43676058</span>
            <span class="nl">eventId:</span> <span class="mi">9</span><span class="n">b35680c</span><span class="o">-</span><span class="n">c63c</span><span class="o">-</span><span class="mi">47</span><span class="n">c8</span><span class="o">-</span><span class="mi">9</span><span class="n">fe5</span><span class="o">-</span><span class="mi">671</span><span class="n">b4bfa4e69</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">2</span><span class="n">e29a294</span>
            <span class="nl">eventId:</span> <span class="n">b24494ca</span><span class="o">-</span><span class="mi">755</span><span class="n">c</span><span class="o">-</span><span class="mi">4432</span><span class="o">-</span><span class="mi">8</span><span class="n">b21</span><span class="o">-</span><span class="mi">6923</span><span class="n">d5fdd30f</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">9</span><span class="n">c578f29</span>
            <span class="nl">eventId:</span> <span class="n">a306143d</span><span class="o">-</span><span class="n">d2a3</span><span class="o">-</span><span class="mi">4</span><span class="n">f72</span><span class="o">-</span><span class="mi">95</span><span class="n">c8</span><span class="o">-</span><span class="mi">91</span><span class="n">b97ee7e6ca</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
  <span class="p">{</span>
     <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
     <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
     <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
     <span class="s2">"subscriptions"</span><span class="p">:[</span>
        <span class="p">{</span>
           <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
           <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
           <span class="s2">"subscriptionId"</span><span class="ss">:"e29573cc-d0e6-4d26-b97e-1a9c02d520ad"</span><span class="p">,</span>
           <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
           <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
           <span class="s2">"productName"</span><span class="ss">:"Sports"</span><span class="p">,</span>
           <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
           <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
           <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
           <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
           <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
           <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
           <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
           <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
           <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
           <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
           <span class="s2">"events"</span><span class="p">:[</span>
              <span class="p">{</span>
                 <span class="s2">"eventId"</span><span class="ss">:"e0136144-a852-4eaa-b721-c8b585dcb4a6"</span><span class="p">,</span>
                 <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                 <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                 <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                 <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                 <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                 <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                 <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                 <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                 <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
              <span class="p">},</span>
              <span class="p">{</span>
                 <span class="s2">"eventId"</span><span class="ss">:"72a51773-9e1d-4ad7-beeb-03139f60ea3d"</span><span class="p">,</span>
                 <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                 <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                 <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                 <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                 <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                 <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                 <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                 <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                 <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
              <span class="p">},</span>
              <span class="p">{</span>
                 <span class="s2">"eventId"</span><span class="ss">:"341992e2-4565-4457-9d20-d2803d11aa61"</span><span class="p">,</span>
                 <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                 <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
                 <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                 <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                 <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                 <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                 <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                 <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
                 <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
              <span class="p">}</span>
           <span class="p">],</span>
           <span class="s2">"priceOverrides"</span><span class="p">:[</span>
              <span class="p">{</span>
                 <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                 <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
                 <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
              <span class="p">},</span>
              <span class="p">{</span>
                 <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
                 <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
                 <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span>
              <span class="p">}</span>
           <span class="p">],</span>
           <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
        <span class="p">}</span>
     <span class="p">],</span>
     <span class="s2">"timeline"</span><span class="p">:{</span>
        <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
        <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
        <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
        <span class="s2">"events"</span><span class="p">:[</span>
           <span class="p">{</span>
              <span class="s2">"eventId"</span><span class="ss">:"e0136144-a852-4eaa-b721-c8b585dcb4a6"</span><span class="p">,</span>
              <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
              <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
              <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
              <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
              <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
              <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
              <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
              <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
              <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
              <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
           <span class="p">},</span>
           <span class="p">{</span>
              <span class="s2">"eventId"</span><span class="ss">:"72a51773-9e1d-4ad7-beeb-03139f60ea3d"</span><span class="p">,</span>
              <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
              <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
              <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
              <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
              <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
              <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
              <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
              <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
              <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
              <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
           <span class="p">},</span>
           <span class="p">{</span>
              <span class="s2">"eventId"</span><span class="ss">:"341992e2-4565-4457-9d20-d2803d11aa61"</span><span class="p">,</span>
              <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
              <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
              <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
              <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
              <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
              <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
              <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
              <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
              <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
              <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
           <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
     <span class="p">},</span>
     <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'7c86f63a-3380-4487-99e1-1865108a3e6c'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'e700381c-3af4-479a-af92-485c5ac89e41'</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'e700381c-3af4-479a-af92-485c5ac89e41'</span><span class="p">,</span>
 <span class="s">'subscriptions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'7c86f63a-3380-4487-99e1-1865108a3e6c'</span><span class="p">,</span>
                    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                    <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                    <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'e700381c-3af4-479a-af92-485c5ac89e41'</span><span class="p">,</span>
                    <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'3639baf9-57a5-4c52-92da-d13432b48919'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'2b3efee7-6cb5-4801-8abd-c11936b69439'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'2dbbf736-1c24-42f7-83fc-fbc2a8059e96'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
                    <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'e700381c-3af4-479a-af92-485c5ac89e41'</span><span class="p">,</span>
                    <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                    <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                    <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                    <span class="s">'price_overrides'</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
                    <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                    <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
                    <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="s">'state'</span><span class="p">:</span> <span class="s">'ACTIVE'</span><span class="p">,</span>
                    <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'5ce4f7e1-5f82-4b6b-8ff6-a25ff64e7bdd'</span><span class="p">}],</span>
 <span class="s">'timeline'</span><span class="p">:</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'7c86f63a-3380-4487-99e1-1865108a3e6c'</span><span class="p">,</span>
              <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
              <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'e700381c-3af4-479a-af92-485c5ac89e41'</span><span class="p">,</span>
              <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'3639baf9-57a5-4c52-92da-d13432b48919'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'2b3efee7-6cb5-4801-8abd-c11936b69439'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'2dbbf736-1c24-42f7-83fc-fbc2a8059e96'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
              <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'e700381c-3af4-479a-af92-485c5ac89e41'</span><span class="p">}}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>maximum number of items listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list with all bundles.</p>
<h3 id='bundle-search-bundles'>Search bundles</h3>
<p>Search for a bundle by a specified search string.  The search string is compared to the <code>accountId</code>, the <code>bundleId</code>, and the bundle <code>externalKey</code>. The operation returns all bundle resources in which the search string matches any one of these attributes. Note: the string must match the <em>entire</em> attribute, not just a part of it.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/bundles/search/another_external_key"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"93199"</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

<span class="n">Bundles</span> <span class="n">result</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">searchBundles</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                                         <span class="n">offset</span><span class="o">,</span> 
                                         <span class="n">limit</span><span class="o">,</span> 
                                         <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'example'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                     <span class="n">offset</span><span class="p">,</span>
                                     <span class="n">limit</span><span class="p">,</span>
                                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'7b26b0ce-a495-4c0c-9dd5-11a556f03e8c'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">search_bundles</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"externalKey"</span>: <span class="s2">"another_external_key"</span>,
    <span class="s2">"subscriptions"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
        <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
        <span class="s2">"subscriptionId"</span>: <span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span>,
        <span class="s2">"externalKey"</span>: <span class="s2">"another_external_key"</span>,
        <span class="s2">"startDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"productName"</span>: <span class="s2">"Standard"</span>,
        <span class="s2">"productCategory"</span>: <span class="s2">"BASE"</span>,
        <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
        <span class="s2">"phaseType"</span>: <span class="s2">"TRIAL"</span>,
        <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
        <span class="s2">"planName"</span>: <span class="s2">"standard-monthly"</span>,
        <span class="s2">"state"</span>: <span class="s2">"CANCELLED"</span>,
        <span class="s2">"sourceType"</span>: <span class="s2">"NATIVE"</span>,
        <span class="s2">"cancelledDate"</span>: <span class="s2">"2018-07-19"</span>,
        <span class="s2">"chargedThroughDate"</span>: null,
        <span class="s2">"billingStartDate"</span>: <span class="s2">"2018-07-18"</span>,
        <span class="s2">"billingEndDate"</span>: <span class="s2">"2018-07-19"</span>,
        <span class="s2">"billCycleDayLocal"</span>: 17,
        <span class="s2">"events"</span>: <span class="o">[</span>
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"01387e92-8b6c-4c74-811f-3d2698646049"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"STOP_ENTITLEMENT"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">true</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_CANCELLED"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"1d605f2d-e605-47d5-b55c-904a0cba12f8"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"STOP_BILLING"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"STOP_BILLING"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>,
          <span class="o">{</span>
            <span class="s2">"eventId"</span>: <span class="s2">"e9f343aa-3650-4709-a09d-8a3df908bd47"</span>,
            <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
            <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
            <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
            <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
            <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
            <span class="s2">"eventType"</span>: <span class="s2">"SERVICE_STATE_CHANGE"</span>,
            <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
            <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
            <span class="s2">"serviceName"</span>: <span class="s2">"ServiceStateService"</span>,
            <span class="s2">"serviceStateName"</span>: <span class="s2">"STATE1"</span>,
            <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
            <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
          <span class="o">}</span>
        <span class="o">]</span>,
        <span class="s2">"priceOverrides"</span>: null,
        <span class="s2">"prices"</span>: <span class="o">[]</span>,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"timeline"</span>: <span class="o">{</span>
      <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
      <span class="s2">"bundleId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
      <span class="s2">"externalKey"</span>: <span class="s2">"another_external_key"</span>,
      <span class="s2">"events"</span>: <span class="o">[</span>
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_ENTITLEMENT"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_STARTED"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"START_BILLING"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"01387e92-8b6c-4c74-811f-3d2698646049"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"STOP_ENTITLEMENT"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">true</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"entitlement-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"ENT_CANCELLED"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"1d605f2d-e605-47d5-b55c-904a0cba12f8"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"STOP_BILLING"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"billing-service"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"STOP_BILLING"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>,
        <span class="o">{</span>
          <span class="s2">"eventId"</span>: <span class="s2">"e9f343aa-3650-4709-a09d-8a3df908bd47"</span>,
          <span class="s2">"billingPeriod"</span>: <span class="s2">"MONTHLY"</span>,
          <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19"</span>,
          <span class="s2">"plan"</span>: <span class="s2">"standard-monthly"</span>,
          <span class="s2">"product"</span>: <span class="s2">"Standard"</span>,
          <span class="s2">"priceList"</span>: <span class="s2">"DEFAULT"</span>,
          <span class="s2">"eventType"</span>: <span class="s2">"SERVICE_STATE_CHANGE"</span>,
          <span class="s2">"isBlockedBilling"</span>: <span class="nb">false</span>,
          <span class="s2">"isBlockedEntitlement"</span>: <span class="nb">false</span>,
          <span class="s2">"serviceName"</span>: <span class="s2">"ServiceStateService"</span>,
          <span class="s2">"serviceStateName"</span>: <span class="s2">"STATE1"</span>,
          <span class="s2">"phase"</span>: <span class="s2">"standard-monthly-trial"</span>,
          <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
        <span class="o">}</span>
      <span class="o">]</span>,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Bundle</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Bundle</span><span class="err">@</span><span class="mi">6</span><span class="n">c335adf</span>
    <span class="nl">accountId:</span> <span class="mi">132</span><span class="n">f0ce0</span><span class="o">-</span><span class="n">b3ae</span><span class="o">-</span><span class="mi">4</span><span class="n">e49</span><span class="o">-</span><span class="mi">90</span><span class="n">fd</span><span class="o">-</span><span class="n">b265ae8515b6</span>
    <span class="nl">bundleId:</span> <span class="mi">23</span><span class="n">a23ae2</span><span class="o">-</span><span class="mi">5</span><span class="n">b41</span><span class="o">-</span><span class="mi">4</span><span class="n">b88</span><span class="o">-</span><span class="n">a731</span><span class="o">-</span><span class="mi">98</span><span class="n">cb6f6f3f21</span>
    <span class="nl">externalKey:</span> <span class="mi">93199</span>
    <span class="nl">subscriptions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">Subscription</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Subscription</span><span class="err">@</span><span class="mi">30</span><span class="n">aa99f</span>
        <span class="nl">accountId:</span> <span class="mi">132</span><span class="n">f0ce0</span><span class="o">-</span><span class="n">b3ae</span><span class="o">-</span><span class="mi">4</span><span class="n">e49</span><span class="o">-</span><span class="mi">90</span><span class="n">fd</span><span class="o">-</span><span class="n">b265ae8515b6</span>
        <span class="nl">bundleId:</span> <span class="mi">23</span><span class="n">a23ae2</span><span class="o">-</span><span class="mi">5</span><span class="n">b41</span><span class="o">-</span><span class="mi">4</span><span class="n">b88</span><span class="o">-</span><span class="n">a731</span><span class="o">-</span><span class="mi">98</span><span class="n">cb6f6f3f21</span>
        <span class="nl">subscriptionId:</span> <span class="n">bc39131f</span><span class="o">-</span><span class="mi">538</span><span class="n">d</span><span class="o">-</span><span class="mi">406</span><span class="n">c</span><span class="o">-</span><span class="mi">96</span><span class="n">f2</span><span class="o">-</span><span class="mi">38</span><span class="n">db68dd328a</span>
        <span class="nl">externalKey:</span> <span class="mi">93199</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">productCategory:</span> <span class="n">BASE</span>
        <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
        <span class="nl">phaseType:</span> <span class="n">TRIAL</span>
        <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">state:</span> <span class="n">ACTIVE</span>
        <span class="nl">sourceType:</span> <span class="n">NATIVE</span>
        <span class="nl">cancelledDate:</span> <span class="kc">null</span>
        <span class="nl">chargedThroughDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingStartDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">billingEndDate:</span> <span class="kc">null</span>
        <span class="nl">billCycleDayLocal:</span> <span class="mi">25</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">850</span><span class="n">eec8c</span>
            <span class="nl">eventId:</span> <span class="mo">03</span><span class="n">b54e77</span><span class="o">-</span><span class="n">da03</span><span class="o">-</span><span class="mi">4</span><span class="n">efb</span><span class="o">-</span><span class="mi">823</span><span class="n">c</span><span class="o">-</span><span class="mo">03</span><span class="n">d4a42557f4</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@c9d2600</span>
            <span class="nl">eventId:</span> <span class="mi">81</span><span class="n">afc2cd</span><span class="o">-</span><span class="n">ac13</span><span class="o">-</span><span class="mi">4</span><span class="n">b48</span><span class="o">-</span><span class="mi">86</span><span class="n">c9</span><span class="o">-</span><span class="mi">920443291</span><span class="n">ff7</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@e7c34c4e</span>
            <span class="nl">eventId:</span> <span class="mi">0</span><span class="n">bd9e27d</span><span class="o">-</span><span class="mi">50</span><span class="n">fe</span><span class="o">-</span><span class="mi">4144</span><span class="o">-</span><span class="mi">9</span><span class="n">b52</span><span class="o">-</span><span class="mo">01</span><span class="n">a0964d2306</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">priceOverrides:</span> <span class="o">[]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">timeline:</span> <span class="kd">class</span> <span class="nc">BundleTimeline</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">BundleTimeline</span><span class="err">@</span><span class="mi">92</span><span class="n">a9f4c7</span>
        <span class="nl">accountId:</span> <span class="mi">132</span><span class="n">f0ce0</span><span class="o">-</span><span class="n">b3ae</span><span class="o">-</span><span class="mi">4</span><span class="n">e49</span><span class="o">-</span><span class="mi">90</span><span class="n">fd</span><span class="o">-</span><span class="n">b265ae8515b6</span>
        <span class="nl">bundleId:</span> <span class="mi">23</span><span class="n">a23ae2</span><span class="o">-</span><span class="mi">5</span><span class="n">b41</span><span class="o">-</span><span class="mi">4</span><span class="n">b88</span><span class="o">-</span><span class="n">a731</span><span class="o">-</span><span class="mi">98</span><span class="n">cb6f6f3f21</span>
        <span class="nl">externalKey:</span> <span class="mi">93199</span>
        <span class="nl">events:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">9</span><span class="n">fa4b25a</span>
            <span class="nl">eventId:</span> <span class="mo">03</span><span class="n">b54e77</span><span class="o">-</span><span class="n">da03</span><span class="o">-</span><span class="mi">4</span><span class="n">efb</span><span class="o">-</span><span class="mi">823</span><span class="n">c</span><span class="o">-</span><span class="mo">03</span><span class="n">d4a42557f4</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_ENTITLEMENT</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">ENT_STARTED</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="err">@</span><span class="mi">77</span><span class="n">fd66a</span>
            <span class="nl">eventId:</span> <span class="mi">81</span><span class="n">afc2cd</span><span class="o">-</span><span class="n">ac13</span><span class="o">-</span><span class="mi">4</span><span class="n">b48</span><span class="o">-</span><span class="mi">86</span><span class="n">c9</span><span class="o">-</span><span class="mi">920443291</span><span class="n">ff7</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">START_BILLING</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">START_BILLING</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">},</span> <span class="kd">class</span> <span class="nc">EventSubscription</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">EventSubscription</span><span class="nd">@b5670810</span>
            <span class="nl">eventId:</span> <span class="mi">0</span><span class="n">bd9e27d</span><span class="o">-</span><span class="mi">50</span><span class="n">fe</span><span class="o">-</span><span class="mi">4144</span><span class="o">-</span><span class="mi">9</span><span class="n">b52</span><span class="o">-</span><span class="mo">01</span><span class="n">a0964d2306</span>
            <span class="nl">billingPeriod:</span> <span class="n">MONTHLY</span>
            <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">25</span>
            <span class="nl">plan:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
            <span class="nl">product:</span> <span class="n">Shotgun</span>
            <span class="nl">priceList:</span> <span class="n">DEFAULT</span>
            <span class="nl">eventType:</span> <span class="n">PHASE</span>
            <span class="nl">isBlockedBilling:</span> <span class="kc">false</span>
            <span class="nl">isBlockedEntitlement:</span> <span class="kc">false</span>
            <span class="nl">serviceName:</span> <span class="n">entitlement</span><span class="o">+</span><span class="n">billing</span><span class="o">-</span><span class="n">service</span>
            <span class="nl">serviceStateName:</span> <span class="n">PHASE</span>
            <span class="nl">phase:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">evergreen</span>
            <span class="nl">auditLogs:</span> <span class="o">[]</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
  <span class="p">{</span>
     <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
     <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
     <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
     <span class="s2">"subscriptions"</span><span class="p">:[</span>
        <span class="p">{</span>
           <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
           <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
           <span class="s2">"subscriptionId"</span><span class="ss">:"e29573cc-d0e6-4d26-b97e-1a9c02d520ad"</span><span class="p">,</span>
           <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
           <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
           <span class="s2">"productName"</span><span class="ss">:"Sports"</span><span class="p">,</span>
           <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
           <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
           <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
           <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
           <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
           <span class="s2">"state"</span><span class="ss">:"ACTIVE"</span><span class="p">,</span>
           <span class="s2">"sourceType"</span><span class="ss">:"NATIVE"</span><span class="p">,</span>
           <span class="s2">"chargedThroughDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
           <span class="s2">"billingStartDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
           <span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span>
           <span class="s2">"events"</span><span class="p">:[</span>
              <span class="p">{</span>
                 <span class="s2">"eventId"</span><span class="ss">:"e0136144-a852-4eaa-b721-c8b585dcb4a6"</span><span class="p">,</span>
                 <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                 <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                 <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                 <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                 <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
                 <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
                 <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
                 <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                 <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
              <span class="p">},</span>
              <span class="p">{</span>
                 <span class="s2">"eventId"</span><span class="ss">:"72a51773-9e1d-4ad7-beeb-03139f60ea3d"</span><span class="p">,</span>
                 <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                 <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
                 <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                 <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                 <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                 <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
                 <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
                 <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                 <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
              <span class="p">},</span>
              <span class="p">{</span>
                 <span class="s2">"eventId"</span><span class="ss">:"341992e2-4565-4457-9d20-d2803d11aa61"</span><span class="p">,</span>
                 <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
                 <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
                 <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
                 <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
                 <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                 <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
                 <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
                 <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
                 <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
                 <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
              <span class="p">}</span>
           <span class="p">],</span>
           <span class="s2">"priceOverrides"</span><span class="p">:[</span>
              <span class="p">{</span>
                 <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
                 <span class="s2">"phaseType"</span><span class="ss">:"TRIAL"</span><span class="p">,</span>
                 <span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span>
              <span class="p">},</span>
              <span class="p">{</span>
                 <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
                 <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
                 <span class="s2">"phaseType"</span><span class="ss">:"EVERGREEN"</span><span class="p">,</span>
                 <span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span>
              <span class="p">}</span>
           <span class="p">],</span>
           <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
        <span class="p">}</span>
     <span class="p">],</span>
     <span class="s2">"timeline"</span><span class="p">:{</span>
        <span class="s2">"accountId"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995"</span><span class="p">,</span>
        <span class="s2">"bundleId"</span><span class="ss">:"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span><span class="p">,</span>
        <span class="s2">"externalKey"</span><span class="ss">:"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135"</span><span class="p">,</span>
        <span class="s2">"events"</span><span class="p">:[</span>
           <span class="p">{</span>
              <span class="s2">"eventId"</span><span class="ss">:"e0136144-a852-4eaa-b721-c8b585dcb4a6"</span><span class="p">,</span>
              <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
              <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
              <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
              <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
              <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
              <span class="s2">"eventType"</span><span class="ss">:"START_ENTITLEMENT"</span><span class="p">,</span>
              <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"serviceName"</span><span class="ss">:"entitlement-service"</span><span class="p">,</span>
              <span class="s2">"serviceStateName"</span><span class="ss">:"ENT_STARTED"</span><span class="p">,</span>
              <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
              <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
           <span class="p">},</span>
           <span class="p">{</span>
              <span class="s2">"eventId"</span><span class="ss">:"72a51773-9e1d-4ad7-beeb-03139f60ea3d"</span><span class="p">,</span>
              <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
              <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
              <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
              <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
              <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
              <span class="s2">"eventType"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
              <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"serviceName"</span><span class="ss">:"billing-service"</span><span class="p">,</span>
              <span class="s2">"serviceStateName"</span><span class="ss">:"START_BILLING"</span><span class="p">,</span>
              <span class="s2">"phase"</span><span class="ss">:"sports-monthly-trial"</span><span class="p">,</span>
              <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
           <span class="p">},</span>
           <span class="p">{</span>
              <span class="s2">"eventId"</span><span class="ss">:"341992e2-4565-4457-9d20-d2803d11aa61"</span><span class="p">,</span>
              <span class="s2">"billingPeriod"</span><span class="ss">:"MONTHLY"</span><span class="p">,</span>
              <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
              <span class="s2">"plan"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
              <span class="s2">"product"</span><span class="ss">:"Sports"</span><span class="p">,</span>
              <span class="s2">"priceList"</span><span class="ss">:"DEFAULT"</span><span class="p">,</span>
              <span class="s2">"eventType"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
              <span class="s2">"isBlockedBilling"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"isBlockedEntitlement"</span><span class="ss">:false</span><span class="p">,</span>
              <span class="s2">"serviceName"</span><span class="ss">:"entitlement+billing-service"</span><span class="p">,</span>
              <span class="s2">"serviceStateName"</span><span class="ss">:"PHASE"</span><span class="p">,</span>
              <span class="s2">"phase"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
              <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
           <span class="p">}</span>
        <span class="p">],</span>
        <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
     <span class="p">},</span>
     <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'7b26b0ce-a495-4c0c-9dd5-11a556f03e8c'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'69328cf3-f088-4684-b440-4e2969531930'</span><span class="p">,</span>
 <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'69328cf3-f088-4684-b440-4e2969531930'</span><span class="p">,</span>
 <span class="s">'subscriptions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'7b26b0ce-a495-4c0c-9dd5-11a556f03e8c'</span><span class="p">,</span>
                    <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s">'bill_cycle_day_local'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
                    <span class="s">'billing_end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                    <span class="s">'billing_start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'69328cf3-f088-4684-b440-4e2969531930'</span><span class="p">,</span>
                    <span class="s">'cancelled_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'charged_through_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                    <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'8a449d77-6894-4903-a048-e625bfec0acd'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'996d3548-110c-4870-afa6-a8f0d448b184'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                               <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                                <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                                <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'e8d24a7d-d463-44dc-ac9d-b41ebbb16a91'</span><span class="p">,</span>
                                <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                                <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                                <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                                <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                                <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                                <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                                <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
                    <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'69328cf3-f088-4684-b440-4e2969531930'</span><span class="p">,</span>
                    <span class="s">'phase_type'</span><span class="p">:</span> <span class="s">'TRIAL'</span><span class="p">,</span>
                    <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                    <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                    <span class="s">'price_overrides'</span><span class="p">:</span> <span class="p">[],</span>
                    <span class="s">'product_category'</span><span class="p">:</span> <span class="s">'BASE'</span><span class="p">,</span>
                    <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                    <span class="s">'source_type'</span><span class="p">:</span> <span class="s">'NATIVE'</span><span class="p">,</span>
                    <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                    <span class="s">'state'</span><span class="p">:</span> <span class="s">'ACTIVE'</span><span class="p">,</span>
                    <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'24f54c5b-ee87-407d-a079-22b5d359f2fd'</span><span class="p">}],</span>
 <span class="s">'timeline'</span><span class="p">:</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'7b26b0ce-a495-4c0c-9dd5-11a556f03e8c'</span><span class="p">,</span>
              <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
              <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'69328cf3-f088-4684-b440-4e2969531930'</span><span class="p">,</span>
              <span class="s">'events'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'8a449d77-6894-4903-a048-e625bfec0acd'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_ENTITLEMENT'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'ENT_STARTED'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'996d3548-110c-4870-afa6-a8f0d448b184'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'START_BILLING'</span><span class="p">},</span>
                         <span class="p">{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                          <span class="s">'billing_period'</span><span class="p">:</span> <span class="s">'MONTHLY'</span><span class="p">,</span>
                          <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                          <span class="s">'event_id'</span><span class="p">:</span> <span class="s">'e8d24a7d-d463-44dc-ac9d-b41ebbb16a91'</span><span class="p">,</span>
                          <span class="s">'event_type'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">,</span>
                          <span class="s">'is_blocked_billing'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'is_blocked_entitlement'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s">'phase'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
                          <span class="s">'plan'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
                          <span class="s">'price_list'</span><span class="p">:</span> <span class="s">'DEFAULT'</span><span class="p">,</span>
                          <span class="s">'product'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
                          <span class="s">'service_name'</span><span class="p">:</span> <span class="s">'entitlement+billing-service'</span><span class="p">,</span>
                          <span class="s">'service_state_name'</span><span class="p">:</span> <span class="s">'PHASE'</span><span class="p">}],</span>
              <span class="s">'external_key'</span><span class="p">:</span> <span class="s">'69328cf3-f088-4684-b440-4e2969531930'</span><span class="p">}}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>String to be matched</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>maximum number of items listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list with all bundles that are matched by the search key.</p>
<h1 id='invoice'>Invoice</h1>
<p>An invoice is a bill provided to a customer for charges that are payable on the customer&#39;s account. A single invoice consolidates charges for all subscriptions held by that customer for a specified time period. Invoices may be set to be paid automatically, or may be paid manually by the customer.</p>

<p>An invoice contains a list of <code>InvoiceItem</code>s. The system will always invoice at the <code>Account</code> level, and will therefore create as many items on a given
invoice as there are things to invoice. Given an active <code>Subscription</code>, one could see multiple items for that subscription on a single invoice including recurring items, usage items, fixed price items, etc. There can also be items for different subscriptions on the same invoice, as well as items that are unrelated to subscriptions such as adjustments and taxes.</p>

<p>An invoice can be generated manually if there are any outstanding charges. In addition, charges can be explicitly added that will also result in an invoice being generated. Invoices can also be automatically generated by the system when there are existing active subscriptions for the <code>Account</code>. In the latter case, the <code>targetDate</code> will determine up to which point to invoice, and the billing mode (<code>IN_ADVANCE</code> or <code>IN_ARREAR</code>) will determine which period to charge for.</p>

<p>An invoice can have one of the following status values: DRAFT, COMMITTED, or VOID.</p>

<ul>
<li><p>An invoice in DRAFT status is open to receive additional items, and is not considered by the rest of the system when computing account balances or related values.</p></li>
<li><p>A COMMITTED invoice is immutable, and its balance is reflected at the Account level. Payments can only happen against COMMITTED invoices.</p></li>
<li><p>A VOID invoice is ignored by the rest of the system. A DRAFT or COMMITTED invoice may be voided, but only if there are no successful payments against that invoice. Thus before voiding an invoice, any successful payments need to be refunded.</p></li>
</ul>
<h2 id='invoice-invoice-resource'>Invoice Resource</h2>
<p>An <code>Invoice</code> resource represents an invoice associated with a specific account. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Sum of all item amounts</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>string</td>
<td>system</td>
<td>Status of the invoice: DRAFT, COMMITTED or VOID</td>
</tr>
<tr>
<td><strong>creditAdj</strong></td>
<td>number</td>
<td>system</td>
<td>Sum of all current credits</td>
</tr>
<tr>
<td><strong>refundAdj</strong></td>
<td>number</td>
<td>system</td>
<td>Sum of all current refunds associated with payments</td>
</tr>
<tr>
<td><strong>invoiceDate</strong></td>
<td>date</td>
<td>system</td>
<td>Date when this invoice was generated</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>date</td>
<td>user or system</td>
<td>Date up to which the account has been invoiced</td>
</tr>
<tr>
<td><strong>invoiceNumber</strong></td>
<td>number</td>
<td>system</td>
<td>Invoice number</td>
</tr>
<tr>
<td><strong>balance</strong></td>
<td>number</td>
<td>system</td>
<td>Sum of all item amounts minus the payment amount</td>
</tr>
<tr>
<td><strong>bundleKeys</strong></td>
<td>list</td>
<td>system</td>
<td>List of bundles invoiced. Deprecated.</td>
</tr>
<tr>
<td><strong>credits</strong></td>
<td>list</td>
<td>system</td>
<td>List of credits associated with this invoice. Deprecated.</td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>list</td>
<td>system</td>
<td>List of invoice items on this invoice</td>
</tr>
<tr>
<td><strong>isParentInvoice</strong></td>
<td>boolean</td>
<td>system</td>
<td>If true, this invoice is the parent in the hierarchical model</td>
</tr>
<tr>
<td><strong>parentInvoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>In the hierarchical model, UUID of the parent invoice</td>
</tr>
<tr>
<td><strong>parentAccountId</strong></td>
<td>string</td>
<td>system</td>
<td>In the hierarchical model, UUID of the parent account</td>
</tr>
</tbody></table>
<h2 id='invoice-invoiceitem-resouece'>InvoiceItem Resouece</h2>
<p>An <code>InvoiceItem</code> resource represents a single item charged on an invoice. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoiceItemId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice item</td>
</tr>
<tr>
<td><strong>invoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice</td>
</tr>
<tr>
<td><strong>linkedInvoiceItemId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the linked item, if any (see below)</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>childAccountId</strong></td>
<td>string</td>
<td>system</td>
<td>In the hierarchical model, the UUID of the child account</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the bundle</td>
</tr>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the subscription</td>
</tr>
<tr>
<td><strong>planName</strong></td>
<td>string</td>
<td>system</td>
<td>Name of the <code>Plan</code> for this subscription</td>
</tr>
<tr>
<td><strong>phaseName</strong></td>
<td>string</td>
<td>system</td>
<td>Name of the <code>PlanPhase</code> for this subscription</td>
</tr>
<tr>
<td><strong>usageName</strong></td>
<td>string</td>
<td>system</td>
<td>Name of the <code>Usage</code> section for this subscription</td>
</tr>
<tr>
<td><strong>prettyPlanName</strong></td>
<td>string</td>
<td>system</td>
<td>Pretty name of the <code>Plan</code> for this subscription</td>
</tr>
<tr>
<td><strong>prettyPhaseName</strong></td>
<td>string</td>
<td>system</td>
<td>Pretty name of the <code>PlanPhase</code> for this subscription</td>
</tr>
<tr>
<td><strong>prettyUsageName</strong></td>
<td>string</td>
<td>system</td>
<td>Pretty name of the <code>Usage</code> section for this subscription</td>
</tr>
<tr>
<td><strong>itemType</strong></td>
<td>string</td>
<td>system</td>
<td>Item type (see below)</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>string</td>
<td>user or system</td>
<td>Optional description of the item</td>
</tr>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>user or system</td>
<td>Start date of the period invoiced</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>date</td>
<td>user or system</td>
<td>End date of the period invoiced</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Amount being invoiced</td>
</tr>
<tr>
<td><strong>quantity</strong></td>
<td>number</td>
<td>user or system</td>
<td>Rate associated with the <code>Plan</code></td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>itemDetails</strong></td>
<td>string</td>
<td>user or system</td>
<td>In usage mode, details about what was invoiced.</td>
</tr>
<tr>
<td><strong>childItems</strong></td>
<td>list</td>
<td>user or system</td>
<td>In the hierarchical model, the items for the children.</td>
</tr>
</tbody></table>

<p><strong>linkedInvoiceItemId</strong>: This ID is used to link to another item. For example, an item representing an adjustment would link to the item being adjusted.</p>

<p><strong>itemType</strong>: The following invoice item types are currently supported:</p>

<ul>
<li><code>EXTERNAL_CHARGE</code>: Charge independent of any subscription state - typically added using invoice APIs.</li>
<li><code>FIXED</code>: Fixed (one-time) charge associated with a subscription.</li>
<li><code>RECURRING</code>: Recurring charge associated with a subscription.</li>
<li><code>REPAIR_ADJ</code>: Internal adjustment generated by the system, used for billing in advance when the subscription state changed.</li>
<li><code>CBA_ADJ</code>: Credit (positive or negative) generated by the system.</li>
<li><code>ITEM_ADJ</code>: Invoice item adjustment -- by itself or triggered by a refund.</li>
<li><code>USAGE</code>: Usage item</li>
<li><code>TAX</code>: Tax item -- this can only be added through an invoice plugin</li>
<li><code>PARENT_SUMMARY</code>: In the hierarchical model, represents the summary across all children</li>
</ul>
<h2 id='invoice-invoicedryrun-resource'>InvoiceDryRun Resource</h2>
<p>An <code>InvoiceDryRun</code> object represents an invoice preview generated to determine what would be in the invoice scheduled on a certain date, or if certain changes are made. A dry run has no actual effect on the system. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>dryRunType</strong></td>
<td>string</td>
<td>user</td>
<td>Category for this dry run (see notes below)</td>
</tr>
<tr>
<td><strong>dryRunAction</strong></td>
<td>string</td>
<td>user</td>
<td>Action on which the dry run should be based, if any (see notes below)</td>
</tr>
<tr>
<td><strong>phaseType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the plan phase (see notes below)</td>
</tr>
<tr>
<td><strong>productName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the product subscribed</td>
</tr>
<tr>
<td><strong>productCategory</strong></td>
<td>string</td>
<td>user</td>
<td>Product category (see notes below)</td>
</tr>
<tr>
<td><strong>billingPeriod</strong></td>
<td>string</td>
<td>user</td>
<td>Billing period (see notes below)</td>
</tr>
<tr>
<td><strong>priceListName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the applicable price list</td>
</tr>
<tr>
<td><strong>subscriptiontId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for a subscription. If specified, only this subscription is used for the dry run</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for a bundle. If specified, only this subscription is used for the dry run</td>
</tr>
<tr>
<td><strong>effectiveDate</strong></td>
<td>date</td>
<td>user</td>
<td>The date the change takes effect</td>
</tr>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>user</td>
<td>The billing policy (see notes below)</td>
</tr>
<tr>
<td><strong>priceOverrides</strong></td>
<td>list</td>
<td>user</td>
<td>list of prices if this subscription has price overrides</td>
</tr>
</tbody></table>

<p><strong>dryRunType</strong>: possible values are:</p>

<ul>
<li><p>TARGET_DATE -- Preview the invoice as of the given target date </p></li>
<li><p>UPCOMING_INVOICE -- Preview the next scheduled invoice </p></li>
<li><p>SUBSCRIPTION_ACTION -- Preview the invoice that would be generated if the specified <strong>dryRunAction</strong> is taken</p></li>
</ul>

<p><strong>dryRunAction</strong>: possible values are: START_BILLING, CHANGE (of <code>Plan</code>), or STOP_BILLING</p>

<p><strong>phaseType</strong>: possible values are: TRIAL, DISCOUNT, FIXEDTERM, or EVERGREEN</p>

<p><strong>productCategory</strong>: possible values are BASE, ADD_ON, or STANDALONE</p>

<p><strong>billingPeriod</strong>: possible values are DAILY, WEEKLY, BIWEEKLY, THIRTY_DAYS, SIXTY_DAYS, NINETY_DAYS, MONTHLY, BIMESTRIAL (bimonthly), QUARTERLY, TRIANNUAL, BIANNUAL, ANNUAL, BIENNIAL, or NO_BILLING_PERIOD</p>

<p><strong>billingPolicy</strong>: possible values are START_OF_TERM, END_OF_TERM, or IMMEDIATE</p>
<h2 id='invoice-invoice'>Invoice</h2>
<p>These endpoints provide basic operations on invoices.</p>
<h3 id='invoice-trigger-an-invoice-run'>Trigger an invoice run</h3>
<p>Create an invoice run for the associated account. This may result in the creation of a new invoice if there is anything to invoice for, or nothing, if the account is up to date. If an invoice is created, all necessary attributes are determined by the system.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices?accountId=29fd0a00-f08b-4886-849b-3f4b98c8df27"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"5f1e9142-b4de-4409-9366-9920cc1683e9"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="n">today</span><span class="o">.</span><span class="na">plus</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">ChronoUnit</span><span class="o">.</span><span class="na">DAYS</span><span class="o">);</span>

<span class="n">Invoice</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createFutureInvoice</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                <span class="n">targetDate</span><span class="o">,</span> 
                                                <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">trigger_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                               <span class="n">target_date</span><span class="p">,</span> 
                                               <span class="n">user</span><span class="p">,</span> 
                                               <span class="n">reason</span><span class="p">,</span> 
                                               <span class="n">comment</span><span class="p">,</span> 
                                               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_future_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                 <span class="n">created_by</span><span class="p">,</span> 
                                 <span class="n">api_key</span><span class="p">,</span> 
                                 <span class="n">api_secret</span><span class="p">,</span> 
                                 <span class="n">target_date</span><span class="o">=</span><span class="n">target_date</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="err">@</span><span class="mi">8673</span><span class="n">fcce</span>
    <span class="nl">amount:</span> <span class="mf">249.95</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="mi">139</span><span class="n">cb81c</span><span class="o">-</span><span class="mi">6611</span><span class="o">-</span><span class="mi">4</span><span class="n">ddf</span><span class="o">-</span><span class="n">bb1a</span><span class="o">-</span><span class="n">d2c3c47b7a98</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">27</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">06</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">3</span>
    <span class="nl">balance:</span> <span class="mf">249.95</span>
    <span class="nl">accountId:</span> <span class="mi">5</span><span class="n">f1e9142</span><span class="o">-</span><span class="n">b4de</span><span class="o">-</span><span class="mi">4409</span><span class="o">-</span><span class="mi">9366</span><span class="o">-</span><span class="mi">9920</span><span class="n">cc1683e9</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>target date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location item is also returned in the header, giving the UUID of the generated invoice (if any).</p>
<h3 id='invoice-create-a-migration-invoice'>Create a migration invoice</h3>
<p>This endpoint is used to insert existing invoices that are being migrated from either a third party system or an in-house billing system into Kill Bill.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/migration/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "invoiceItemId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "invoiceId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "linkedInvoiceItemId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "itemType": "EXTERNAL_CHARGE", "amount": 10, "rate": 0, "currency": "USD" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/migration/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"fe1a6f86-9ec5-4ac3-8d39-15f024cc8339"</span><span class="o">);</span>

<span class="n">BigDecimal</span> <span class="n">chargeAmount</span> <span class="o">=</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">;</span>
<span class="n">InvoiceItem</span> <span class="n">externalCharge</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setStartDate</span><span class="o">(</span><span class="k">new</span> <span class="n">LocalDate</span><span class="o">());</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">chargeAmount</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setItemType</span><span class="o">(</span><span class="n">InvoiceItemType</span><span class="o">.</span><span class="na">EXTERNAL_CHARGE</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">InvoiceItems</span> <span class="n">inputInvoice</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItems</span><span class="o">();</span>
<span class="n">inputInvoice</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">externalCharge</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Invoice</span> <span class="n">migrationInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createMigrationInvoice</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                             <span class="n">inputInvoice</span><span class="o">,</span> 
                                                             <span class="n">targetDate</span><span class="o">,</span>
                                                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"be19b229-c076-47aa-aa4d-f53bec505dc7"</span>
<span class="n">invoices</span> <span class="o">=</span> <span class="s2">"external_invoice_list"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="s2">"2018-03-15"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">create_migration_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                                        <span class="n">invoices</span><span class="p">,</span> 
                                                        <span class="n">target_date</span><span class="p">,</span> 
                                                        <span class="n">user</span><span class="p">,</span> 
                                                        <span class="n">reason</span><span class="p">,</span> 
                                                        <span class="n">comment</span><span class="p">,</span> 
                                                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'external_invoice_list'</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_migration_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                    <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                    <span class="n">created_by</span><span class="p">,</span>
                                    <span class="n">api_key</span><span class="p">,</span>
                                    <span class="n">api_secret</span><span class="p">,</span>
                                    <span class="n">target_date</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/71742c60-273f-4c91-8b8c-7555a3554b0a/ 
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An invoice resource object with all fields filled in representing the invoice to be migrated.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>target date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location item is also returned in the header, giving the UUID of the generated invoice (if any).</p>
<h3 id='invoice-create-external-charge-s'>Create external charge(s)</h3>
<p>Create a charge for a given account. This will result in the creation of a new invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/charges/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "description": "My charge", "amount": 50, "currency": "USD" }]'</span>    <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/charges/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"616789aa-4004-4681-b38c-b95871d534fc"</span><span class="o">);</span>

<span class="n">InvoiceItem</span> <span class="n">externalCharge</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"My charge"</span><span class="o">);</span>

<span class="n">InvoiceItems</span> <span class="n">externalCharges</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItems</span><span class="o">();</span>
<span class="n">externalCharges</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">externalCharge</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="na">getUTCToday</span><span class="o">();</span>
<span class="n">Boolean</span> <span class="n">payInvoice</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">autoCommit</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">InvoiceItem</span><span class="o">&gt;</span> <span class="n">createdExternalCharges</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createExternalCharges</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                            <span class="n">externalCharges</span><span class="o">,</span> 
                                                                            <span class="n">requestedDate</span><span class="o">,</span>
                                                                            <span class="n">autoCommit</span>
                                                                            <span class="n">pluginProperty</span><span class="o">,</span> 
                                                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>  <span class="o">=</span> <span class="s2">"83e5e82d-fe72-4873-9b8b-946f4d250b0d"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>      <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>    <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span> <span class="o">=</span> <span class="s1">'My charge'</span>

<span class="n">auto_commit</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">auto_commit</span><span class="p">,</span> 
                    <span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'My charge'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_external_charges</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                   <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                   <span class="n">created_by</span><span class="p">,</span>
                                   <span class="n">api_key</span><span class="p">,</span>
                                   <span class="n">api_secret</span><span class="p">,</span>
                                   <span class="n">auto_commit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>&lt; HTTP/1.1 201 Created
&lt; Content-Type: application/json
&lt; Content-Length: 0

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"invoiceItemId"</span>: <span class="s2">"3aaadeeb-5ffe-4226-a8b6-57723f1f8c12"</span>,
    <span class="s2">"invoiceId"</span>: <span class="s2">"c6fe2246-62e2-450d-b9fc-a27003771535"</span>,
    <span class="s2">"linkedInvoiceItemId"</span>: null,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"childAccountId"</span>: null,
    <span class="s2">"bundleId"</span>: null,
    <span class="s2">"subscriptionId"</span>: null,
    <span class="s2">"productName"</span>: null,
    <span class="s2">"planName"</span>: null,
    <span class="s2">"phaseName"</span>: null,
    <span class="s2">"usageName"</span>: null,
    <span class="s2">"prettyProductName"</span>: null,
    <span class="s2">"prettyPlanName"</span>: null,
    <span class="s2">"prettyPhaseName"</span>: null,
    <span class="s2">"prettyUsageName"</span>: null,
    <span class="s2">"itemType"</span>: <span class="s2">"EXTERNAL_CHARGE"</span>,
    <span class="s2">"description"</span>: <span class="s2">"My charge"</span>,
    <span class="s2">"startDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"endDate"</span>: null,
    <span class="s2">"amount"</span>: 50,
    <span class="s2">"rate"</span>: null,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"quantity"</span>: null,
    <span class="s2">"itemDetails"</span>: null,
    <span class="s2">"childItems"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">InvoiceItem</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoiceItem</span><span class="nd">@a39beab1</span>
    <span class="nl">invoiceItemId:</span> <span class="mi">836</span><span class="n">d08c4</span><span class="o">-</span><span class="mi">2</span><span class="n">bc8</span><span class="o">-</span><span class="mi">485</span><span class="n">f</span><span class="o">-</span><span class="mi">91</span><span class="n">c1</span><span class="o">-</span><span class="mi">2</span><span class="n">dd81b18844e</span>
    <span class="nl">invoiceId:</span> <span class="mi">3006</span><span class="n">fe16</span><span class="o">-</span><span class="mi">3641</span><span class="o">-</span><span class="mi">47</span><span class="n">b6</span><span class="o">-</span><span class="mi">804</span><span class="n">e</span><span class="o">-</span><span class="mi">2719</span><span class="n">f8f40c87</span>
    <span class="nl">linkedInvoiceItemId:</span> <span class="mi">2781</span><span class="n">cefd</span><span class="o">-</span><span class="n">fc73</span><span class="o">-</span><span class="mi">41</span><span class="n">d2</span><span class="o">-</span><span class="mi">9823</span><span class="o">-</span><span class="n">f8f0d0b60e2b</span>
    <span class="nl">accountId:</span> <span class="mi">616789</span><span class="n">aa</span><span class="o">-</span><span class="mi">4004</span><span class="o">-</span><span class="mi">4681</span><span class="o">-</span><span class="n">b38c</span><span class="o">-</span><span class="n">b95871d534fc</span>
    <span class="nl">childAccountId:</span> <span class="kc">null</span>
    <span class="nl">bundleId:</span> <span class="kc">null</span>
    <span class="nl">subscriptionId:</span> <span class="kc">null</span>
    <span class="nl">productName:</span> <span class="kc">null</span>
    <span class="nl">planName:</span> <span class="kc">null</span>
    <span class="nl">phaseName:</span> <span class="kc">null</span>
    <span class="nl">usageName:</span> <span class="kc">null</span>
    <span class="nl">prettyProductName:</span> <span class="kc">null</span>
    <span class="nl">prettyPlanName:</span> <span class="kc">null</span>
    <span class="nl">prettyPhaseName:</span> <span class="kc">null</span>
    <span class="nl">prettyUsageName:</span> <span class="kc">null</span>
    <span class="nl">itemType:</span> <span class="n">EXTERNAL_CHARGE</span>
    <span class="nl">description:</span> <span class="n">b1b7442b</span><span class="o">-</span><span class="n">cd1b</span><span class="o">-</span><span class="mi">4</span><span class="n">bb7</span><span class="o">-</span><span class="mi">9</span><span class="n">d30</span><span class="o">-</span><span class="mi">6</span><span class="n">b50ea469202</span>
    <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">endDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">05</span>
    <span class="nl">amount:</span> <span class="mf">10.00</span>
    <span class="nl">rate:</span> <span class="kc">null</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">quantity:</span> <span class="kc">null</span>
    <span class="nl">itemDetails:</span> <span class="n">Item</span> <span class="n">Details</span>
    <span class="nl">childItems:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"invoiceItemId"</span><span class="ss">:"4661b7a9-f19f-431e-80ed-547932527fbe"</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"d27bca74-7e08-4eff-9479-51e8009fe3d0"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"83e5e82d-fe72-4873-9b8b-946f4d250b0d"</span><span class="p">,</span>
   <span class="s2">"itemType"</span><span class="ss">:"EXTERNAL_CHARGE"</span><span class="p">,</span>
   <span class="s2">"description"</span><span class="ss">:"My charge"</span><span class="p">,</span>
   <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An invoiceItem resource object with at least the following attributes: accountId, itemType=EXTERNAL_CHARGE, description, amount, and currency.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
<tr>
<td><strong>autoCommit</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the resulting invoice should be COMMITTED.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location item is also returned in the header, giving the UUID of the generated invoice (if any).</p>
<h3 id='invoice-create-tax-items'>Create tax items</h3>
<p>Normally, tax items are added to an invoice by a plugin, which intercepts the invoice during its creation and adds the required tax items on the fly. However, sometimes you may want to add tax items directly. This API adds a tax item to an account, which will result in the creation of a new invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/taxes/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "amount": 50, "currency": "USD" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/taxes/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"eb36c64c-b575-4538-b26f-a89c473984da"</span><span class="o">);</span>
<span class="n">UID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"28723cec-5510-49be-9e87-3a36d246f25e"</span><span class="o">);</span>

<span class="n">InvoiceItem</span> <span class="n">taxItem</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setBundleId</span><span class="o">(</span><span class="n">bundleId</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">InvoiceItems</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItems</span><span class="o">();</span>
<span class="n">input</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">taxItem</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">autoCommit</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="na">getUTCToday</span><span class="o">();</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">InvoiceItem</span><span class="o">&gt;</span> <span class="n">createdExternalCharges</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createTaxItems</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                     <span class="n">input</span><span class="o">,</span>
                                                                     <span class="n">autoCommit</span><span class="o">,</span>
                                                                     <span class="n">requestedDate</span><span class="o">,</span>
                                                                     <span class="n">pluginProperty</span><span class="o">,</span>
                                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>  <span class="o">=</span> <span class="s2">"29ef0d50-90d1-4163-bb46-ef1b82675ae6"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>      <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>    <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span> <span class="o">=</span> <span class="s1">'My charge'</span>

<span class="n">auto_commit</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">create_tax_items</span><span class="p">(</span><span class="n">auto_commit</span><span class="p">,</span> 
                              <span class="n">user</span><span class="p">,</span> 
                              <span class="n">reason</span><span class="p">,</span> 
                              <span class="n">comment</span><span class="p">,</span> 
                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'My charge'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_tax_items</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                            <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                            <span class="n">created_by</span><span class="p">,</span>
                            <span class="n">api_key</span><span class="p">,</span>
                            <span class="n">api_secret</span><span class="p">,</span>
                            <span class="n">auto_commit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Content-Type: application/json
&lt; Content-Length: 0

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"invoiceItemId"</span>: <span class="s2">"e91e8d48-d8de-4931-9758-6cfff86cb2f4"</span>,
    <span class="s2">"invoiceId"</span>: <span class="s2">"434dd357-099d-45f8-9b48-79dcd20c61ce"</span>,
    <span class="s2">"linkedInvoiceItemId"</span>: null,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"childAccountId"</span>: null,
    <span class="s2">"bundleId"</span>: null,
    <span class="s2">"subscriptionId"</span>: null,
    <span class="s2">"productName"</span>: null,
    <span class="s2">"planName"</span>: null,
    <span class="s2">"phaseName"</span>: null,
    <span class="s2">"usageName"</span>: null,
    <span class="s2">"prettyProductName"</span>: null,
    <span class="s2">"prettyPlanName"</span>: null,
    <span class="s2">"prettyPhaseName"</span>: null,
    <span class="s2">"prettyUsageName"</span>: null,
    <span class="s2">"itemType"</span>: <span class="s2">"TAX"</span>,
    <span class="s2">"description"</span>: <span class="s2">"Tax"</span>,
    <span class="s2">"startDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"endDate"</span>: null,
    <span class="s2">"amount"</span>: 50,
    <span class="s2">"rate"</span>: null,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"quantity"</span>: null,
    <span class="s2">"itemDetails"</span>: null,
    <span class="s2">"childItems"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">InvoiceItem</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoiceItem</span><span class="nd">@bedd818e</span>
    <span class="nl">invoiceItemId:</span> <span class="mo">04</span><span class="n">ebfae8</span><span class="o">-</span><span class="mi">7898</span><span class="o">-</span><span class="mi">4</span><span class="n">c1b</span><span class="o">-</span><span class="n">b10e</span><span class="o">-</span><span class="mi">6</span><span class="n">fad862e7077</span>
    <span class="nl">invoiceId:</span> <span class="mo">00010</span><span class="mi">8</span><span class="n">b4</span><span class="o">-</span><span class="n">d0e3</span><span class="o">-</span><span class="mi">452</span><span class="n">f</span><span class="o">-</span><span class="mi">8537</span><span class="o">-</span><span class="mi">13</span><span class="n">f6669f8767</span>
    <span class="nl">linkedInvoiceItemId:</span> <span class="kc">null</span>
    <span class="nl">accountId:</span> <span class="n">eb36c64c</span><span class="o">-</span><span class="n">b575</span><span class="o">-</span><span class="mi">4538</span><span class="o">-</span><span class="n">b26f</span><span class="o">-</span><span class="n">a89c473984da</span>
    <span class="nl">childAccountId:</span> <span class="kc">null</span>
    <span class="nl">bundleId:</span> <span class="mi">28723</span><span class="n">cec</span><span class="o">-</span><span class="mi">5510</span><span class="o">-</span><span class="mi">49</span><span class="n">be</span><span class="o">-</span><span class="mi">9</span><span class="n">e87</span><span class="o">-</span><span class="mi">3</span><span class="n">a36d246f25e</span>
    <span class="nl">subscriptionId:</span> <span class="kc">null</span>
    <span class="nl">productName:</span> <span class="kc">null</span>
    <span class="nl">planName:</span> <span class="kc">null</span>
    <span class="nl">phaseName:</span> <span class="kc">null</span>
    <span class="nl">usageName:</span> <span class="kc">null</span>
    <span class="nl">prettyProductName:</span> <span class="kc">null</span>
    <span class="nl">prettyPlanName:</span> <span class="kc">null</span>
    <span class="nl">prettyPhaseName:</span> <span class="kc">null</span>
    <span class="nl">prettyUsageName:</span> <span class="kc">null</span>
    <span class="nl">itemType:</span> <span class="n">TAX</span>
    <span class="nl">description:</span> <span class="n">Tax</span>
    <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">endDate:</span> <span class="kc">null</span>
    <span class="nl">amount:</span> <span class="mf">10.00</span>
    <span class="nl">rate:</span> <span class="kc">null</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">quantity:</span> <span class="kc">null</span>
    <span class="nl">itemDetails:</span> <span class="kc">null</span>
    <span class="nl">childItems:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"invoiceItemId"</span><span class="ss">:"20d3bdc8-48c1-48f5-9d9f-5cf0d273dff6"</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"40655121-ac13-4fe4-af49-02ba668ff4bb"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"29ef0d50-90d1-4163-bb46-ef1b82675ae6"</span><span class="p">,</span>
   <span class="s2">"itemType"</span><span class="ss">:"TAX"</span><span class="p">,</span>
   <span class="s2">"description"</span><span class="ss">:"My charge"</span><span class="p">,</span>
   <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An invoiceItem resource object with at least the following attributes: accountId, itemType=TAX, amount, and currency.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
<tr>
<td><strong>autoCommit</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the resulting invoice should be COMMITTED.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location item is also returned in the header, giving the UUID of the generated invoice (if any).</p>
<h3 id='invoice-retrieve-an-invoice-by-id'>Retrieve an invoice by id</h3>
<p>Retrieves an invoice based on the <code>invoiceId</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"922a83f4-ae08-4732-9dd9-35e13c332393"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//  Will include children items</span>

<span class="n">Invoice</span> <span class="n">invoiceWithItems</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                                 <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                 <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_id</span> <span class="o">=</span> <span class="s2">"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span>
<span class="n">with_items</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                                          <span class="n">with_items</span><span class="p">,</span> 
                                          <span class="n">audit</span><span class="p">,</span> 
                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'43da4e9c-03c6-4f15-8943-b9a3af3ecacb'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"amount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"status"</span>: <span class="s2">"DRAFT"</span>,
  <span class="s2">"creditAdj"</span>: 50,
  <span class="s2">"refundAdj"</span>: 0,
  <span class="s2">"invoiceId"</span>: <span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>,
  <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
  <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
  <span class="s2">"invoiceNumber"</span>: <span class="s2">"310"</span>,
  <span class="s2">"balance"</span>: 0,
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"bundleKeys"</span>: null,
  <span class="s2">"credits"</span>: null,
  <span class="s2">"items"</span>: <span class="o">[]</span>,
  <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
  <span class="s2">"parentInvoiceId"</span>: null,
  <span class="s2">"parentAccountId"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="nd">@d6d47bb7</span>
    <span class="nl">amount:</span> <span class="mf">10.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="mi">922</span><span class="n">a83f4</span><span class="o">-</span><span class="n">ae08</span><span class="o">-</span><span class="mi">4732</span><span class="o">-</span><span class="mi">9</span><span class="n">dd9</span><span class="o">-</span><span class="mi">35</span><span class="n">e13c332393</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">3</span>
    <span class="nl">balance:</span> <span class="mf">10.00</span>
    <span class="nl">accountId:</span> <span class="mi">3</span><span class="n">db9ebae</span><span class="o">-</span><span class="mi">3</span><span class="n">a8e</span><span class="o">-</span><span class="mi">4</span><span class="n">cba</span><span class="o">-</span><span class="n">ac94</span><span class="o">-</span><span class="mi">730</span><span class="n">aeda9a6c3</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">InvoiceItem</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoiceItem</span><span class="nd">@aae429f6</span>
        <span class="nl">invoiceItemId:</span> <span class="mi">6288</span><span class="n">c2a3</span><span class="o">-</span><span class="n">d5c6</span><span class="o">-</span><span class="mi">4</span><span class="n">f43</span><span class="o">-</span><span class="n">bbf4</span><span class="o">-</span><span class="mi">7</span><span class="n">e6bf91369d1</span>
        <span class="nl">invoiceId:</span> <span class="mi">922</span><span class="n">a83f4</span><span class="o">-</span><span class="n">ae08</span><span class="o">-</span><span class="mi">4732</span><span class="o">-</span><span class="mi">9</span><span class="n">dd9</span><span class="o">-</span><span class="mi">35</span><span class="n">e13c332393</span>
        <span class="nl">linkedInvoiceItemId:</span> <span class="mi">83716126</span><span class="o">-</span><span class="mi">1</span><span class="n">cd4</span><span class="o">-</span><span class="mi">42</span><span class="n">bf</span><span class="o">-</span><span class="mi">907</span><span class="n">a</span><span class="o">-</span><span class="mi">22</span><span class="n">aae31897e7</span>
        <span class="nl">accountId:</span> <span class="mi">3</span><span class="n">db9ebae</span><span class="o">-</span><span class="mi">3</span><span class="n">a8e</span><span class="o">-</span><span class="mi">4</span><span class="n">cba</span><span class="o">-</span><span class="n">ac94</span><span class="o">-</span><span class="mi">730</span><span class="n">aeda9a6c3</span>
        <span class="nl">childAccountId:</span> <span class="kc">null</span>
        <span class="nl">bundleId:</span> <span class="kc">null</span>
        <span class="nl">subscriptionId:</span> <span class="kc">null</span>
        <span class="nl">productName:</span> <span class="kc">null</span>
        <span class="nl">planName:</span> <span class="kc">null</span>
        <span class="nl">phaseName:</span> <span class="kc">null</span>
        <span class="nl">usageName:</span> <span class="kc">null</span>
        <span class="nl">prettyProductName:</span> <span class="kc">null</span>
        <span class="nl">prettyPlanName:</span> <span class="kc">null</span>
        <span class="nl">prettyPhaseName:</span> <span class="kc">null</span>
        <span class="nl">prettyUsageName:</span> <span class="kc">null</span>
        <span class="nl">itemType:</span> <span class="n">EXTERNAL_CHARGE</span>
        <span class="nl">description:</span> <span class="n">a8fdf3e2</span><span class="o">-</span><span class="n">e071</span><span class="o">-</span><span class="mi">4</span><span class="n">f09</span><span class="o">-</span><span class="n">b4a4</span><span class="o">-</span><span class="mi">997</span><span class="n">c02541366</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">endDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">05</span>
        <span class="nl">amount:</span> <span class="mf">10.00</span>
        <span class="nl">rate:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">quantity:</span> <span class="kc">null</span>
        <span class="nl">itemDetails:</span> <span class="n">Item</span> <span class="n">Details</span>
        <span class="nl">childItems:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
   <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
   <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"targetDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"invoiceNumber"</span><span class="ss">:"1913"</span><span class="p">,</span>
   <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
   <span class="s2">"items"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"invoiceItemId"</span><span class="ss">:"f641ce8a-a874-4e98-ada5-2bd8fdb74945"</span><span class="p">,</span>
         <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
         <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
         <span class="s2">"itemType"</span><span class="ss">:"EXTERNAL_CHARGE"</span><span class="p">,</span>
         <span class="s2">"description"</span><span class="ss">:"My first charge"</span><span class="p">,</span>
         <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'78bd2ed3-2dc8-4d7c-92da-2a319fd40881'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'43da4e9c-03c6-4f15-8943-b9a3af3ecacb'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'972'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='invoice-retrieve-an-invoice-by-number'>Retrieve an invoice by number</h3>
<p>Retrieves an invoice based on the <code>invoiceNumber</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/byNumber/{invoiceNumber</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/byNumber/310"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">Integer</span> <span class="n">invoiceNumber</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//  Will include children items</span>

<span class="n">Invoice</span> <span class="n">invoiceByNumber</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceByNumber</span><span class="o">(</span><span class="n">invoiceNumber</span><span class="o">,</span> 
                                                        <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                        <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_number</span> <span class="o">=</span> <span class="s2">"1913"</span>
<span class="n">with_items</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_number</span><span class="p">(</span><span class="n">invoice_number</span><span class="p">,</span> 
                                              <span class="n">with_items</span><span class="p">,</span> 
                                              <span class="n">audit</span><span class="p">,</span> 
                                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_number</span> <span class="o">=</span> <span class="s">'972'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_by_number</span><span class="p">(</span><span class="n">invoice_number</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"amount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"status"</span>: <span class="s2">"DRAFT"</span>,
  <span class="s2">"creditAdj"</span>: 50,
  <span class="s2">"refundAdj"</span>: 0,
  <span class="s2">"invoiceId"</span>: <span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>,
  <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
  <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
  <span class="s2">"invoiceNumber"</span>: <span class="s2">"310"</span>,
  <span class="s2">"balance"</span>: 0,
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"bundleKeys"</span>: null,
  <span class="s2">"credits"</span>: null,
  <span class="s2">"items"</span>: <span class="o">[]</span>,
  <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
  <span class="s2">"parentInvoiceId"</span>: null,
  <span class="s2">"parentAccountId"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="nd">@fde9afb7</span>
    <span class="nl">amount:</span> <span class="mf">0.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="mi">35285</span><span class="n">f91</span><span class="o">-</span><span class="mo">07</span><span class="n">be</span><span class="o">-</span><span class="mi">4161</span><span class="o">-</span><span class="mi">8</span><span class="n">b80</span><span class="o">-</span><span class="mi">34</span><span class="n">c8336020df</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">1</span>
    <span class="nl">balance:</span> <span class="mf">0.00</span>
    <span class="nl">accountId:</span> <span class="n">b2fd467c</span><span class="o">-</span><span class="mi">182</span><span class="n">e</span><span class="o">-</span><span class="mi">4</span><span class="n">ba4</span><span class="o">-</span><span class="n">ad93</span><span class="o">-</span><span class="n">b12ee43a1dee</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">InvoiceItem</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoiceItem</span><span class="nd">@d77b0a66</span>
        <span class="nl">invoiceItemId:</span> <span class="n">da1d65b0</span><span class="o">-</span><span class="mi">0</span><span class="n">b27</span><span class="o">-</span><span class="mi">45</span><span class="n">bd</span><span class="o">-</span><span class="n">b1c9</span><span class="o">-</span><span class="n">ef1caea6c08a</span>
        <span class="nl">invoiceId:</span> <span class="mi">35285</span><span class="n">f91</span><span class="o">-</span><span class="mo">07</span><span class="n">be</span><span class="o">-</span><span class="mi">4161</span><span class="o">-</span><span class="mi">8</span><span class="n">b80</span><span class="o">-</span><span class="mi">34</span><span class="n">c8336020df</span>
        <span class="nl">linkedInvoiceItemId:</span> <span class="kc">null</span>
        <span class="nl">accountId:</span> <span class="n">b2fd467c</span><span class="o">-</span><span class="mi">182</span><span class="n">e</span><span class="o">-</span><span class="mi">4</span><span class="n">ba4</span><span class="o">-</span><span class="n">ad93</span><span class="o">-</span><span class="n">b12ee43a1dee</span>
        <span class="nl">childAccountId:</span> <span class="kc">null</span>
        <span class="nl">bundleId:</span> <span class="mi">5</span><span class="n">f0282c9</span><span class="o">-</span><span class="mi">28</span><span class="n">ab</span><span class="o">-</span><span class="mi">45</span><span class="n">e1</span><span class="o">-</span><span class="n">ba70</span><span class="o">-</span><span class="mi">53</span><span class="n">fdf69c2983</span>
        <span class="nl">subscriptionId:</span> <span class="mi">4</span><span class="n">e05f40f</span><span class="o">-</span><span class="mi">905</span><span class="n">f</span><span class="o">-</span><span class="mi">47</span><span class="n">db</span><span class="o">-</span><span class="n">a470</span><span class="o">-</span><span class="n">a3c601053741</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">usageName:</span> <span class="kc">null</span>
        <span class="nl">prettyProductName:</span> <span class="n">Shotgun</span>
        <span class="nl">prettyPlanName:</span> <span class="n">Shotgun</span> <span class="n">Monthly</span>
        <span class="nl">prettyPhaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">prettyUsageName:</span> <span class="kc">null</span>
        <span class="nl">itemType:</span> <span class="n">FIXED</span>
        <span class="nl">description:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">endDate:</span> <span class="kc">null</span>
        <span class="nl">amount:</span> <span class="mf">0.00</span>
        <span class="nl">rate:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">quantity:</span> <span class="kc">null</span>
        <span class="nl">itemDetails:</span> <span class="kc">null</span>
        <span class="nl">childItems:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
            <span class="nl">changeType:</span> <span class="n">INSERT</span>
            <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">44.000</span><span class="n">Z</span>
            <span class="nl">objectType:</span> <span class="n">INVOICE_ITEM</span>
            <span class="nl">objectId:</span> <span class="n">da1d65b0</span><span class="o">-</span><span class="mi">0</span><span class="n">b27</span><span class="o">-</span><span class="mi">45</span><span class="n">bd</span><span class="o">-</span><span class="n">b1c9</span><span class="o">-</span><span class="n">ef1caea6c08a</span>
            <span class="nl">changedBy:</span> <span class="n">SubscriptionBaseTransition</span>
            <span class="nl">reasonCode:</span> <span class="kc">null</span>
            <span class="nl">comments:</span> <span class="kc">null</span>
            <span class="nl">userToken:</span> <span class="mi">6</span><span class="n">cef0bbb</span><span class="o">-</span><span class="mi">4378</span><span class="o">-</span><span class="mi">43</span><span class="n">f7</span><span class="o">-</span><span class="mi">9</span><span class="n">d4f</span><span class="o">-</span><span class="mi">0</span><span class="n">c70cba8afb0</span>
            <span class="nl">history:</span> <span class="kc">null</span>
        <span class="o">}]</span>
    <span class="o">}]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">44.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">INVOICE</span>
        <span class="nl">objectId:</span> <span class="mi">35285</span><span class="n">f91</span><span class="o">-</span><span class="mo">07</span><span class="n">be</span><span class="o">-</span><span class="mi">4161</span><span class="o">-</span><span class="mi">8</span><span class="n">b80</span><span class="o">-</span><span class="mi">34</span><span class="n">c8336020df</span>
        <span class="nl">changedBy:</span> <span class="n">SubscriptionBaseTransition</span>
        <span class="nl">reasonCode:</span> <span class="kc">null</span>
        <span class="nl">comments:</span> <span class="kc">null</span>
        <span class="nl">userToken:</span> <span class="mi">6</span><span class="n">cef0bbb</span><span class="o">-</span><span class="mi">4378</span><span class="o">-</span><span class="mi">43</span><span class="n">f7</span><span class="o">-</span><span class="mi">9</span><span class="n">d4f</span><span class="o">-</span><span class="mi">0</span><span class="n">c70cba8afb0</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
   <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
   <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"targetDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"invoiceNumber"</span><span class="ss">:"1913"</span><span class="p">,</span>
   <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
   <span class="s2">"items"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"invoiceItemId"</span><span class="ss">:"f641ce8a-a874-4e98-ada5-2bd8fdb74945"</span><span class="p">,</span>
         <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
         <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
         <span class="s2">"itemType"</span><span class="ss">:"EXTERNAL_CHARGE"</span><span class="p">,</span>
         <span class="s2">"description"</span><span class="ss">:"My first charge"</span><span class="p">,</span>
         <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'78bd2ed3-2dc8-4d7c-92da-2a319fd40881'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'43da4e9c-03c6-4f15-8943-b9a3af3ecacb'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'972'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='invoice-retrieve-an-invoice-by-invoice-item-id'>Retrieve an invoice by invoice item id</h3>
<p>Retrieves an invoice based on the <code>invoiceItemId</code> for an invoice item.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/byItemId/{itemId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/byItemId/3f0aa8f7-ca75-40cc-8c78-15a15cdbb977"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceItemId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"111732ad-196d-423f-8ccd-de44109dc944"</span><span class="o">)</span>
<span class="n">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//  Will include children items</span>

<span class="n">Invoice</span> <span class="n">invoiceByItemId</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceByItemId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">,</span> 
                                                        <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                        <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item_id</span> <span class="o">=</span> <span class="s2">"f641ce8a-a874-4e98-ada5-2bd8fdb74945"</span>
<span class="n">with_items</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">with_children_items</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_invoice_item_id</span><span class="p">(</span><span class="n">invoice_item_id</span><span class="p">,</span> 
                                                       <span class="n">with_items</span><span class="p">,</span>
                                                       <span class="n">with_children_items</span><span class="p">,</span> 
                                                       <span class="n">audit</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_item_id</span> <span class="o">=</span> <span class="s">'8fae6721-3ebc-4103-85f5-aa13dde0e4f5'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_by_item_id</span><span class="p">(</span><span class="n">invoice_item_id</span><span class="p">,</span> 
                                  <span class="n">api_key</span><span class="p">,</span> 
                                  <span class="n">api_secret</span><span class="p">,</span> 
                                  <span class="n">with_items</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"amount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"status"</span>: <span class="s2">"DRAFT"</span>,
  <span class="s2">"creditAdj"</span>: 50,
  <span class="s2">"refundAdj"</span>: 0,
  <span class="s2">"invoiceId"</span>: <span class="s2">"18e9b3d9-9083-4725-9e8a-27d3a57c2e88"</span>,
  <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
  <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
  <span class="s2">"invoiceNumber"</span>: <span class="s2">"311"</span>,
  <span class="s2">"balance"</span>: 0,
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"bundleKeys"</span>: null,
  <span class="s2">"credits"</span>: null,
  <span class="s2">"items"</span>: <span class="o">[]</span>,
  <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
  <span class="s2">"parentInvoiceId"</span>: null,
  <span class="s2">"parentAccountId"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="err">@</span><span class="mi">5</span><span class="n">c66117a</span>
    <span class="nl">amount:</span> <span class="mf">0.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="mi">3</span><span class="n">a51917b</span><span class="o">-</span><span class="n">c0f9</span><span class="o">-</span><span class="mi">4</span><span class="n">d9d</span><span class="o">-</span><span class="mi">972</span><span class="n">e</span><span class="o">-</span><span class="mi">1</span><span class="n">c5db7906b1b</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">1</span>
    <span class="nl">balance:</span> <span class="mf">0.00</span>
    <span class="nl">accountId:</span> <span class="mi">3</span><span class="n">c186380</span><span class="o">-</span><span class="n">b31a</span><span class="o">-</span><span class="mi">4934</span><span class="o">-</span><span class="n">b25b</span><span class="o">-</span><span class="mi">717056219</span><span class="n">e73</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">InvoiceItem</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoiceItem</span><span class="err">@</span><span class="mi">74</span><span class="n">f2032c</span>
        <span class="nl">invoiceItemId:</span> <span class="mi">111732</span><span class="n">ad</span><span class="o">-</span><span class="mi">196</span><span class="n">d</span><span class="o">-</span><span class="mi">423</span><span class="n">f</span><span class="o">-</span><span class="mi">8</span><span class="n">ccd</span><span class="o">-</span><span class="n">de44109dc944</span>
        <span class="nl">invoiceId:</span> <span class="mi">3</span><span class="n">a51917b</span><span class="o">-</span><span class="n">c0f9</span><span class="o">-</span><span class="mi">4</span><span class="n">d9d</span><span class="o">-</span><span class="mi">972</span><span class="n">e</span><span class="o">-</span><span class="mi">1</span><span class="n">c5db7906b1b</span>
        <span class="nl">linkedInvoiceItemId:</span> <span class="kc">null</span>
        <span class="nl">accountId:</span> <span class="mi">3</span><span class="n">c186380</span><span class="o">-</span><span class="n">b31a</span><span class="o">-</span><span class="mi">4934</span><span class="o">-</span><span class="n">b25b</span><span class="o">-</span><span class="mi">717056219</span><span class="n">e73</span>
        <span class="nl">childAccountId:</span> <span class="kc">null</span>
        <span class="nl">bundleId:</span> <span class="mi">66</span><span class="n">ebdda5</span><span class="o">-</span><span class="mi">741</span><span class="n">a</span><span class="o">-</span><span class="mi">4284</span><span class="o">-</span><span class="mi">942</span><span class="n">a</span><span class="o">-</span><span class="mi">62</span><span class="n">b2d576b014</span>
        <span class="nl">subscriptionId:</span> <span class="n">c8c63a23</span><span class="o">-</span><span class="n">f7fd</span><span class="o">-</span><span class="mi">413</span><span class="n">a</span><span class="o">-</span><span class="n">a8be</span><span class="o">-</span><span class="mi">4</span><span class="n">a692c4c7e62</span>
        <span class="nl">productName:</span> <span class="n">Shotgun</span>
        <span class="nl">planName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span>
        <span class="nl">phaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">usageName:</span> <span class="kc">null</span>
        <span class="nl">prettyProductName:</span> <span class="n">Shotgun</span>
        <span class="nl">prettyPlanName:</span> <span class="n">Shotgun</span> <span class="n">Monthly</span>
        <span class="nl">prettyPhaseName:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">prettyUsageName:</span> <span class="kc">null</span>
        <span class="nl">itemType:</span> <span class="n">FIXED</span>
        <span class="nl">description:</span> <span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">endDate:</span> <span class="kc">null</span>
        <span class="nl">amount:</span> <span class="mf">0.00</span>
        <span class="nl">rate:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">quantity:</span> <span class="kc">null</span>
        <span class="nl">itemDetails:</span> <span class="kc">null</span>
        <span class="nl">childItems:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
   <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
   <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"targetDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"invoiceNumber"</span><span class="ss">:"1913"</span><span class="p">,</span>
   <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
   <span class="s2">"items"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"invoiceItemId"</span><span class="ss">:"f641ce8a-a874-4e98-ada5-2bd8fdb74945"</span><span class="p">,</span>
         <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
         <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
         <span class="s2">"itemType"</span><span class="ss">:"EXTERNAL_CHARGE"</span><span class="p">,</span>
         <span class="s2">"description"</span><span class="ss">:"My first charge"</span><span class="p">,</span>
         <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'4d5d7a84-e04e-41ea-80be-871c4eda3610'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'f14b8e48-aadc-4a68-9d2c-b7e45758e156'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'306'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'4d5d7a84-e04e-41ea-80be-871c4eda3610'</span><span class="p">,</span>
            <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'25b289db-a0e8-4796-a1e3-6c87ee8fef44'</span><span class="p">,</span>
            <span class="s">'child_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'child_items'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
            <span class="s">'description'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
            <span class="s">'end_date'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'f14b8e48-aadc-4a68-9d2c-b7e45758e156'</span><span class="p">,</span>
            <span class="s">'invoice_item_id'</span><span class="p">:</span> <span class="s">'8fae6721-3ebc-4103-85f5-aa13dde0e4f5'</span><span class="p">,</span>
            <span class="s">'item_details'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'item_type'</span><span class="p">:</span> <span class="s">'FIXED'</span><span class="p">,</span>
            <span class="s">'linked_invoice_item_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
            <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
            <span class="s">'pretty_phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-trial'</span><span class="p">,</span>
            <span class="s">'pretty_plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
            <span class="s">'pretty_product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
            <span class="s">'pretty_usage_name'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'product_name'</span><span class="p">:</span> <span class="s">'Standard'</span><span class="p">,</span>
            <span class="s">'quantity'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'rate'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
            <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'fec6602d-3d11-4039-b09e-86fd488c7082'</span><span class="p">,</span>
            <span class="s">'usage_name'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">13</span><span class="p">)}</span>                                                                                                                                                                                                                                                                                                        
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='invoice-render-an-invoice-as-html'>Render an invoice as HTML</h3>
<p>This API formats an invoice as an HTML page, that can be displayed or printed for a customer.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/html</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/html"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">htmlInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceAsHTML</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_id</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">as_html</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="vi">@options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'2c98cfa2-7929-4cc2-9397-1624fb72c6d5'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_as_html</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/html

&lt;html&gt;
    &lt;head&gt;
        &lt;style <span class="nb">type</span><span class="o">=</span><span class="s2">"text/css"</span>&gt;
            th <span class="o">{</span><span class="nv">align</span><span class="o">=</span>left; <span class="nv">width</span><span class="o">=</span>225px; border-bottom: solid 2px black;<span class="o">}</span>
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1&gt;invoiceTitle&lt;/h1&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;td <span class="nv">rowspan</span><span class="o">=</span>3 <span class="nv">width</span><span class="o">=</span>350px&gt;Insert image here&lt;/td&gt;
                &lt;td <span class="nv">width</span><span class="o">=</span>100px/&gt;
                &lt;td <span class="nv">width</span><span class="o">=</span>225px/&gt;
                &lt;td <span class="nv">width</span><span class="o">=</span>225px/&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td /&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;invoiceDate&lt;/td&gt;
                &lt;td&gt;Jul 20, 2018&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td /&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;invoiceNumber&lt;/td&gt;
                &lt;td&gt;310&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyName&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;accountOwnerName&lt;/td&gt;
                &lt;td&gt;Another Name&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyAddress&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td&gt;john@127.0.0.1:8080&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyCityProvincePostalCode&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyCountry&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td /&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;companyUrl&lt;/td&gt;
                &lt;td /&gt;
                &lt;td /&gt;
                &lt;td /&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;invoiceItemBundleName&lt;/td&gt;
                &lt;th&gt;invoiceItemDescription&lt;/td&gt;
                &lt;th&gt;invoiceItemServicePeriod&lt;/td&gt;
                &lt;th&gt;invoiceItemAmount&lt;/td&gt;
            &lt;/tr&gt;

            &lt;tr&gt;
                &lt;td&gt;Adjustment <span class="o">(</span>account credit<span class="o">)</span>&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;Jul 20, 2018 - Jul 20, 2018&lt;/td&gt;
                &lt;td&gt;USD 50.00&lt;/td&gt;
            &lt;/tr&gt;

            &lt;tr&gt;
                &lt;td&gt;example&lt;/td&gt;
                &lt;td&gt;&lt;/td&gt;
                &lt;td&gt;Jul 20, 2018 - Jul 20, 2018&lt;/td&gt;
                &lt;td&gt;USD -50.00&lt;/td&gt;
            &lt;/tr&gt;

            &lt;tr&gt;
                &lt;td <span class="nv">colspan</span><span class="o">=</span>4 /&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td <span class="nv">colspan</span><span class="o">=</span>2 /&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;&lt;strong&gt;invoiceAmount&lt;/strong&gt;&lt;/td&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;&lt;strong&gt;0.00&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td <span class="nv">colspan</span><span class="o">=</span>2 /&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;&lt;strong&gt;invoiceAmountPaid&lt;/strong&gt;&lt;/td&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;&lt;strong&gt;0.00&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td <span class="nv">colspan</span><span class="o">=</span>2 /&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;&lt;strong&gt;invoiceBalance&lt;/strong&gt;&lt;/td&gt;
                &lt;td <span class="nv">align</span><span class="o">=</span>right&gt;&lt;strong&gt;0&lt;/strong&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><pre class="highlight java tab-java"><code><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">style</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span><span class="o">&gt;</span>
            <span class="n">th</span> <span class="o">{</span><span class="n">align</span><span class="o">=</span><span class="n">left</span><span class="o">;</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="o">;</span> <span class="n">border</span><span class="o">-</span><span class="nl">bottom:</span> <span class="n">solid</span> <span class="mi">2</span><span class="n">px</span> <span class="n">black</span><span class="o">;}</span>
        <span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">invoiceTitle</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">rowspan</span><span class="o">=</span><span class="mi">3</span> <span class="n">width</span><span class="o">=</span><span class="mi">350</span><span class="n">px</span><span class="o">&gt;</span><span class="n">Insert</span> <span class="n">image</span> <span class="n">here</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="n">px</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;</span><span class="n">invoiceDate</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="mi">25</span> <span class="n">avr</span><span class="o">.</span> <span class="mi">2012</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;</span><span class="n">invoiceNumber</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyName</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;</span><span class="n">accountOwnerName</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="mi">74</span><span class="n">c97b13</span><span class="o">-</span><span class="n">f1dc</span><span class="o">-</span><span class="mi">4307</span><span class="o">-</span><span class="n">b324</span><span class="o">-</span><span class="mi">885795</span><span class="n">bad326</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyAddress</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="mi">64549</span><span class="nd">@d1fb9</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyCityProvincePostalCode</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="mi">81</span> <span class="mi">53</span> <span class="mi">26</span> <span class="mi">56</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyCountry</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">companyUrl</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemBundleName</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemDescription</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemServicePeriod</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemAmount</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>

            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">shotgun</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">Monthly</span> <span class="n">shotgun</span> <span class="n">plan</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="mi">25</span> <span class="n">avr</span><span class="o">.</span> <span class="mi">2012</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">USD</span> <span class="mf">0.00</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>

            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">4</span> <span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceAmount</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mf">0.00</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceAmountPaid</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mf">0.00</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceBalance</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mf">0.00</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">style</span> <span class="n">type</span><span class="o">=</span><span class="s2">"text/css"</span><span class="o">&gt;</span>
            <span class="n">th</span> <span class="p">{</span><span class="n">align</span><span class="o">=</span><span class="n">left</span><span class="p">;</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="p">;</span> <span class="n">border</span><span class="o">-</span><span class="ss">bottom: </span><span class="n">solid</span> <span class="mi">2</span><span class="n">px</span> <span class="n">black</span><span class="p">;}</span>
        <span class="o">&lt;</span><span class="sr">/style&gt;
    &lt;/</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">invoiceTitle</span><span class="o">&lt;</span><span class="sr">/h1&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="n">px</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
            &lt;tr&gt;
                &lt;td /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;</span><span class="n">invoiceDate</span><span class="o">&lt;</span><span class="sr">/td&gt;
                &lt;td&gt;1 aot 2013&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
            &lt;tr&gt;
                &lt;td /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;</span><span class="n">invoiceNumber</span><span class="o">&lt;</span><span class="sr">/td&gt;
                &lt;td&gt;2038&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyName&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="sr">/td&gt;
                &lt;td align=right&gt;accountOwnerName&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="no">KillBillClient</span><span class="o">&lt;</span><span class="sr">/td&gt;
            &lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyAddress</span><span class="o">&lt;</span><span class="sr">/td&gt;
                &lt;td /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="sr">/&gt;
                &lt;td&gt;kill@bill.com&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;companyCityProvincePostalCode&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="sr">/&gt;
                &lt;td /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="sr">/td&gt;
            &lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyCountry</span><span class="o">&lt;</span><span class="sr">/td&gt;
                &lt;td /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="sr">/&gt;
                &lt;td /</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;companyUrl&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="sr">/&gt;
                &lt;td /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="sr">/&gt;
            &lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="sr">/table&gt;
        &lt;br /</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">br</span> <span class="sr">/&gt;
        &lt;br /</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemBundleName</span><span class="o">&lt;</span><span class="sr">/td&gt;
                &lt;th&gt;invoiceItemDescription&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemServicePeriod</span><span class="o">&lt;</span><span class="sr">/td&gt;
                &lt;th&gt;invoiceItemAmount&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;

            &lt;tr&gt;
                &lt;td&gt;My charge&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="sr">/td&gt;
                &lt;td&gt;1 aot 2013&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="no">USD</span> <span class="mi">50</span><span class="o">.</span><span class="mo">00</span><span class="o">&lt;</span><span class="sr">/td&gt;
            &lt;/</span><span class="n">tr</span><span class="o">&gt;</span>

            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">4</span> <span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceAmount</span><span class="o">&lt;</span><span class="sr">/strong&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mi">50</span><span class="o">.</span><span class="mo">00</span><span class="o">&lt;</span><span class="sr">/strong&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceAmountPaid</span><span class="o">&lt;</span><span class="sr">/strong&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mi">50</span><span class="o">.</span><span class="mo">00</span><span class="o">&lt;</span><span class="sr">/strong&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
            &lt;tr&gt;
                &lt;td colspan=2 /</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceBalance</span><span class="o">&lt;</span><span class="sr">/strong&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">.</span><span class="mo">00</span><span class="o">&lt;</span><span class="sr">/strong&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/tr&gt;
        &lt;/</span><span class="n">table</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/body&gt;
&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre><pre class="highlight python tab-python"><code><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">style</span> <span class="nb">type</span><span class="o">=</span><span class="s">"text/css"</span><span class="o">&gt;</span>
            <span class="n">th</span> <span class="p">{</span><span class="n">align</span><span class="o">=</span><span class="n">left</span><span class="p">;</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="p">;</span> <span class="n">border</span><span class="o">-</span><span class="n">bottom</span><span class="p">:</span> <span class="n">solid</span> <span class="mi">2</span><span class="n">px</span> <span class="n">black</span><span class="p">;}</span>
        <span class="o">&lt;/</span><span class="n">style</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">invoiceTitle</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">rowspan</span><span class="o">=</span><span class="mi">3</span> <span class="n">width</span><span class="o">=</span><span class="mi">350</span><span class="n">px</span><span class="o">&gt;</span><span class="n">Insert</span> <span class="n">image</span> <span class="n">here</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">100</span><span class="n">px</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="mi">225</span><span class="n">px</span><span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;</span><span class="n">invoiceDate</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">May</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2018</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;</span><span class="n">invoiceNumber</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="mi">974</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyName</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;</span><span class="n">accountOwnerName</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">John</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyAddress</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyCityProvincePostalCode</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">companyCountry</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">companyUrl</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">br</span> <span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">table</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemBundleName</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemDescription</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemServicePeriod</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">th</span><span class="o">&gt;</span><span class="n">invoiceItemAmount</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>

            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">standard</span><span class="o">-</span><span class="n">monthly</span><span class="o">-</span><span class="n">trial</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">standard</span><span class="o">-</span><span class="n">monthly</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">May</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2018</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="n">USD</span> <span class="mf">0.00</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>

            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">4</span> <span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceAmount</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mf">0.00</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceAmountPaid</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mf">0.00</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span> <span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">invoiceBalance</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="n">right</span><span class="o">&gt;&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="mf">0.00</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoice rendered as HTML.</p>
<h3 id='invoice-change-invoice-status-from-draft-to-committed'>Change invoice status from DRAFT to COMMITTED</h3>
<p>Commit a DRAFT invoice by changing its staus to COMMITTED. The invoice becomes immutable and its balance is now included in account totals.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/commitInvoice</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/commitInvoice"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ca09d09a-59b2-4ada-8c15-597c9efde46c"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">commitInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">commit</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
               <span class="n">reason</span><span class="p">,</span> 
               <span class="n">comment</span><span class="p">,</span> 
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">commit_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                          <span class="n">created_by</span><span class="p">,</span> 
                          <span class="n">api_key</span><span class="p">,</span> 
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='invoice-void-an-invoice'>Void an invoice</h3>
<p>Change the status of an invoice to VOID. this can only be done if there are no successful payments on the account. A void invoice is ignored by the rest of the system.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/voidInvoice</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/18e9b3d9-9083-4725-9e8a-27d3a57c2e88/voidInvoice"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">voidInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">void_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                        <span class="n">created_by</span><span class="p">,</span> 
                        <span class="n">api_key</span><span class="p">,</span> 
                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='invoice-adjust-an-invoice-item'>Adjust an invoice item</h3>
<p>Adjust the amount for an invoice item</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "invoiceItemId": "903e55d3-8072-47f1-80fc-32857dbdbcc5", "invoiceId": "903e55d3-8072-47f1-80fc-32857dbdbcc5", "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "description": "Free adjustment: good customer", "amount": 50, "currency": "USD"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"53805dbc-720a-4eaf-9072-ade723ee860f"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"4be08988-35a1-4fce-bebc-699af2a95b18"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">invoiceItemId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"5f1e9142-b4de-4409-9366-9920cc1683e9"</span><span class="o">);</span>
<span class="n">BigDecimal</span> <span class="n">adjustedAmount</span> <span class="o">=</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">;</span>

<span class="n">InvoiceItem</span> <span class="n">adjustmentInvoiceItem</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setInvoiceId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setInvoiceItemId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">adjustedAmount</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Invoice</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">adjustInvoiceItem</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                              <span class="n">adjustmentInvoiceItem</span><span class="o">,</span> 
                                              <span class="n">requestedDate</span><span class="o">,</span>
                                              <span class="n">pluginProperty</span><span class="o">,</span>
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item</span>                 <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>      <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_id</span>      <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_item_id</span> <span class="o">=</span> <span class="s2">"b311f709-ad51-4f67-8722-18ce04334c31"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>          <span class="o">=</span> <span class="mi">100</span><span class="o">.</span><span class="mo">00</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>        <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span>     <span class="o">=</span> <span class="s1">'Free adjustment: good customer'</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="s">'3ee3aa82-1d45-4bbc-b36b-74d628e095d0'</span><span class="p">,</span>
                   <span class="n">invoice_id</span><span class="o">=</span><span class="s">'2c98cfa2-7929-4cc2-9397-1624fb72c6d5'</span><span class="p">,</span>
                   <span class="n">invoice_item_id</span><span class="o">=</span><span class="s">'b311f709-ad51-4f67-8722-18ce04334c31'</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'Free adjustment: good customer'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">adjust_invoice_item</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                               <span class="n">body</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="p">,</span>
                               <span class="n">api_key</span><span class="p">,</span>
                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="err">@</span><span class="mi">7</span><span class="n">ae5a94f</span>
    <span class="nl">amount:</span> <span class="mf">224.95</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="mi">4</span><span class="n">be08988</span><span class="o">-</span><span class="mi">35</span><span class="n">a1</span><span class="o">-</span><span class="mi">4</span><span class="n">fce</span><span class="o">-</span><span class="n">bebc</span><span class="o">-</span><span class="mi">699</span><span class="n">af2a95b18</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">2</span>
    <span class="nl">balance:</span> <span class="mf">224.95</span>
    <span class="nl">accountId:</span> <span class="mi">53805</span><span class="n">dbc</span><span class="o">-</span><span class="mi">720</span><span class="n">a</span><span class="o">-</span><span class="mi">4</span><span class="n">eaf</span><span class="o">-</span><span class="mi">9072</span><span class="o">-</span><span class="n">ade723ee860f</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">400</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
   <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span><span class="p">,</span>
   <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
   <span class="s2">"targetDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
   <span class="s2">"invoiceNumber"</span><span class="ss">:"1884"</span><span class="p">,</span>
   <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span><span class="p">,</span>
   <span class="s2">"items"</span><span class="ss">:[]</span><span class="p">,</span>
   <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-delete-a-cba-item'>Delete a CBA item</h3>
<p>Delete a Credit Balance Adjust invoice item</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/{invoiceItemId}/cba</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/404a98a8-4dd8-4737-a39f-be871e916a8c/a35fb7b5-aec8-489e-aadf-c86107aa1d92/cba?accountId=8785164f-b5d7-4da1-9495-33f5105e8d80"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item</span>                 <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>      <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_id</span>      <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_item_id</span> <span class="o">=</span> <span class="s2">"b311f709-ad51-4f67-8722-18ce04334c31"</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span><span class="o">=</span><span class="s">'2c98cfa2-7929-4cc2-9397-1624fb72c6d5'</span><span class="p">,</span>
<span class="n">invoice_item_id</span><span class="o">=</span><span class="s">'b311f709-ad51-4f67-8722-18ce04334c31'</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'3ee3aa82-1d45-4bbc-b36b-74d628e095d0'</span><span class="p">,</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">delete_cba</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                      <span class="n">invoice_item_id</span><span class="p">,</span>
                      <span class="n">account_id</span><span class="p">,</span>
                      <span class="n">created_by</span><span class="p">,</span>
                      <span class="n">api_key</span><span class="p">,</span>
                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-dry-run'>Dry-run</h2>
<p>In some situations, it is necessary to preview what a given customer will be invoiced for before making changes, or to verify what the system will generate at a future date. Kill Bill provides a dry-run invoice API to accomplish these goals. This API can be used to answer several distinct questions:</p>

<ul>
<li>When is the next upcoming invoice for a given customer, and what will this invoice contain?</li>
<li>When is the next upcoming invoice associated with a given subscription or bundle, and what will this invoice contain?</li>
<li>Given a <code>targetDate</code>, what invoice will the system generate?</li>
<li>Given a change in a subscription, such as a new subscription, change of plan, or cancellation, what invoice will the system generate?</li>
</ul>

<p>A dry run is based on a <a href="https://killbill.github.io/slate/#invoice-invoicedryrun-resource">dry run resource object</a>.</p>
<h3 id='invoice-generate-a-dry-run-invoice'>Generate a dry run invoice</h3>
<p>This endpoint creates a dry-run invoice. Based on its parameters you can obtain answers to the different questions listed above.
Note: This endpoint is rather expensive, as it creates a full invoice run for the designated account, but no invoice will be created or persisted
in the system.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/dryRun</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "dryRunType": "UPCOMING_INVOICE"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">DryRunType</span> <span class="n">dryRunType</span> <span class="o">=</span> <span class="n">DryRunType</span><span class="o">.</span><span class="na">SUBSCRIPTION_ACTION</span><span class="o">;</span>
<span class="n">SubscriptionEventType</span> <span class="n">dryRunAction</span> <span class="o">=</span> <span class="n">SubscriptionEventType</span><span class="o">.</span><span class="na">START_BILLING</span><span class="o">;</span>
<span class="n">PhaseType</span> <span class="n">phaseType</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">productName</span> <span class="o">=</span> <span class="s">"Assault-Rifle"</span><span class="o">;</span>
<span class="n">ProductCategory</span> <span class="n">productCategory</span> <span class="o">=</span> <span class="n">ProductCategory</span><span class="o">.</span><span class="na">BASE</span><span class="o">;</span>
<span class="n">BillingPeriod</span> <span class="n">billingPeriod</span> <span class="o">=</span> <span class="n">BillingPeriod</span><span class="o">.</span><span class="na">ANNUAL</span><span class="o">;</span>
<span class="n">String</span> <span class="n">priceListName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">effectiveDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">BillingActionPolicy</span> <span class="n">billingPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">PhasePriceOverride</span><span class="o">&gt;</span> <span class="n">priceOverrides</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">InvoiceDryRun</span> <span class="n">dryRunArg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceDryRun</span><span class="o">(</span><span class="n">dryRunType</span><span class="o">,</span> 
                                            <span class="n">dryRunAction</span><span class="o">,</span>
                                            <span class="n">phaseType</span><span class="o">,</span> 
                                            <span class="n">productName</span><span class="o">,</span> 
                                            <span class="n">productCategory</span><span class="o">,</span> 
                                            <span class="n">billingPeriod</span><span class="o">,</span> 
                                            <span class="n">priceListName</span><span class="o">,</span> 
                                            <span class="n">subscriptionId</span><span class="o">,</span> 
                                            <span class="n">bundleId</span><span class="o">,</span> 
                                            <span class="n">effectiveDate</span><span class="o">,</span> 
                                            <span class="n">billingPolicy</span><span class="o">,</span>
                                            <span class="n">priceOverrides</span><span class="o">);</span>


<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"fe1a6f86-9ec5-4ac3-8d39-15f024cc8339"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="n">today</span><span class="o">.</span><span class="na">plus</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">ChronoUnit</span><span class="o">.</span><span class="na">DAYS</span><span class="o">);</span>

<span class="n">Invoice</span> <span class="n">dryRunInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">generateDryRunInvoice</span><span class="o">(</span><span class="n">dryRunArg</span><span class="o">,</span> 
                                                         <span class="n">accountId</span><span class="o">,</span> 
                                                         <span class="n">targetDate</span><span class="o">,</span> 
                                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="c1">#</span>
<span class="c1"># This case is when you create a dry-run invoice with UPCOMING_INVOICE, </span>
<span class="c1"># to see what is the next invoice that the system will generate for this account </span>
<span class="c1"># </span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s2">"5527abbc-d83d-447f-bf3d-ab9542ea631e"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">upcoming_invoice_target_date</span> <span class="o">=</span> <span class="kp">true</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">trigger_invoice_dry_run</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                                       <span class="n">target_date</span><span class="p">,</span> 
                                                       <span class="n">upcoming_invoice_target_date</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="c">#</span>
<span class="c"># This case is when you create a dry-run invoice with UPCOMING_INVOICE, </span>
<span class="c"># to see what is the next invoice that the system will generate for this account </span>
<span class="c"># </span>
<span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceDryRun</span><span class="p">(</span><span class="n">dry_run_type</span><span class="o">=</span><span class="s">'UPCOMING_INVOICE'</span><span class="p">)</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'00e87495-92dc-4640-8490-e2c794748151'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">generate_dry_run_invoice</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                    <span class="n">account_id</span><span class="p">,</span>
                                    <span class="n">created_by</span><span class="p">,</span>
                                    <span class="n">api_key</span><span class="p">,</span>
                                    <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="err">@</span><span class="mi">2</span><span class="n">e7ac6ec</span>
    <span class="nl">amount:</span> <span class="mf">0.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="n">ef25cb16</span><span class="o">-</span><span class="mi">08</span><span class="n">ef</span><span class="o">-</span><span class="mi">4945</span><span class="o">-</span><span class="n">a875</span><span class="o">-</span><span class="n">c6ffa3c1fd77</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">invoiceNumber:</span> <span class="kc">null</span>
    <span class="nl">balance:</span> <span class="mf">0.00</span>
    <span class="nl">accountId:</span> <span class="n">fe1a6f86</span><span class="o">-</span><span class="mi">9</span><span class="n">ec5</span><span class="o">-</span><span class="mi">4</span><span class="n">ac3</span><span class="o">-</span><span class="mi">8</span><span class="n">d39</span><span class="o">-</span><span class="mi">15</span><span class="n">f024cc8339</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">InvoiceItem</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoiceItem</span><span class="err">@</span><span class="mi">8</span><span class="n">be409a8</span>
        <span class="nl">invoiceItemId:</span> <span class="mi">514</span><span class="n">a2e5c</span><span class="o">-</span><span class="n">b3d4</span><span class="o">-</span><span class="mi">4</span><span class="n">d67</span><span class="o">-</span><span class="mi">8825</span><span class="o">-</span><span class="n">f56968b84493</span>
        <span class="nl">invoiceId:</span> <span class="n">ef25cb16</span><span class="o">-</span><span class="mi">08</span><span class="n">ef</span><span class="o">-</span><span class="mi">4945</span><span class="o">-</span><span class="n">a875</span><span class="o">-</span><span class="n">c6ffa3c1fd77</span>
        <span class="nl">linkedInvoiceItemId:</span> <span class="kc">null</span>
        <span class="nl">accountId:</span> <span class="n">fe1a6f86</span><span class="o">-</span><span class="mi">9</span><span class="n">ec5</span><span class="o">-</span><span class="mi">4</span><span class="n">ac3</span><span class="o">-</span><span class="mi">8</span><span class="n">d39</span><span class="o">-</span><span class="mi">15</span><span class="n">f024cc8339</span>
        <span class="nl">childAccountId:</span> <span class="kc">null</span>
        <span class="nl">bundleId:</span> <span class="n">ca41fb1a</span><span class="o">-</span><span class="n">e8ff</span><span class="o">-</span><span class="mi">4</span><span class="n">adc</span><span class="o">-</span><span class="n">a481</span><span class="o">-</span><span class="mi">96510</span><span class="n">d9726b0</span>
        <span class="nl">subscriptionId:</span> <span class="mi">3</span><span class="n">e8f647c</span><span class="o">-</span><span class="mi">2</span><span class="n">e8c</span><span class="o">-</span><span class="mi">4256</span><span class="o">-</span><span class="mi">9</span><span class="n">afd</span><span class="o">-</span><span class="mi">86</span><span class="n">dd640486d8</span>
        <span class="nl">productName:</span> <span class="n">Assault</span><span class="o">-</span><span class="n">Rifle</span>
        <span class="nl">planName:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span>
        <span class="nl">phaseName:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">usageName:</span> <span class="kc">null</span>
        <span class="nl">prettyProductName:</span> <span class="kc">null</span>
        <span class="nl">prettyPlanName:</span> <span class="kc">null</span>
        <span class="nl">prettyPhaseName:</span> <span class="kc">null</span>
        <span class="nl">prettyUsageName:</span> <span class="kc">null</span>
        <span class="nl">itemType:</span> <span class="n">FIXED</span>
        <span class="nl">description:</span> <span class="n">assault</span><span class="o">-</span><span class="n">rifle</span><span class="o">-</span><span class="n">annual</span><span class="o">-</span><span class="n">trial</span>
        <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">04</span><span class="o">-</span><span class="mi">25</span>
        <span class="nl">endDate:</span> <span class="kc">null</span>
        <span class="nl">amount:</span> <span class="mf">0.00</span>
        <span class="nl">rate:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">quantity:</span> <span class="kc">null</span>
        <span class="nl">itemDetails:</span> <span class="kc">null</span>
        <span class="nl">childItems:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
   <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"8c62095e-898d-444e-a05b-a498f8bd9d1b"</span><span class="p">,</span>
   <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"targetDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
   <span class="s2">"balance"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"5527abbc-d83d-447f-bf3d-ab9542ea631e"</span><span class="p">,</span>
   <span class="s2">"items"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"invoiceItemId"</span><span class="ss">:"a45f76a2-7775-4053-bd7c-50a7542e52d3"</span><span class="p">,</span>
         <span class="s2">"invoiceId"</span><span class="ss">:"8c62095e-898d-444e-a05b-a498f8bd9d1b"</span><span class="p">,</span>
         <span class="s2">"accountId"</span><span class="ss">:"5527abbc-d83d-447f-bf3d-ab9542ea631e"</span><span class="p">,</span>
         <span class="s2">"bundleId"</span><span class="ss">:"8e26532b-e5c0-4d4a-b2f0-2eeec8668ada"</span><span class="p">,</span>
         <span class="s2">"subscriptionId"</span><span class="ss">:"466e26d9-6e44-4afb-9c2f-2b93a4f52329"</span><span class="p">,</span>
         <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span><span class="p">,</span>
         <span class="s2">"phaseName"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
         <span class="s2">"itemType"</span><span class="ss">:"RECURRING"</span><span class="p">,</span>
         <span class="s2">"description"</span><span class="ss">:"sports-monthly-evergreen"</span><span class="p">,</span>
         <span class="s2">"startDate"</span><span class="ss">:"2013-08-31"</span><span class="p">,</span>
         <span class="s2">"endDate"</span><span class="ss">:"2013-09-30"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">500</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"isParentInvoice"</span><span class="ss">:false</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'00e87495-92dc-4640-8490-e2c794748151'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'a1c2ab02-d5d8-450d-bb7c-e8f169018570'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'00e87495-92dc-4640-8490-e2c794748151'</span><span class="p">,</span>
            <span class="s">'amount'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
            <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s">'bundle_id'</span><span class="p">:</span> <span class="s">'3c02be83-3c2d-4f5a-827e-edfe85266d54'</span><span class="p">,</span>
            <span class="s">'child_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'child_items'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
            <span class="s">'description'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
            <span class="s">'end_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
            <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'a1c2ab02-d5d8-450d-bb7c-e8f169018570'</span><span class="p">,</span>
            <span class="s">'invoice_item_id'</span><span class="p">:</span> <span class="s">'fe1ec859-dbb9-4851-a030-709a32672bca'</span><span class="p">,</span>
            <span class="s">'item_details'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'item_type'</span><span class="p">:</span> <span class="s">'RECURRING'</span><span class="p">,</span>
            <span class="s">'linked_invoice_item_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'phase_name'</span><span class="p">:</span> <span class="s">'standard-monthly-evergreen'</span><span class="p">,</span>
            <span class="s">'plan_name'</span><span class="p">:</span> <span class="s">'standard-monthly'</span><span class="p">,</span>
            <span class="s">'pretty_phase_name'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'pretty_plan_name'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'pretty_usage_name'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'quantity'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
            <span class="s">'rate'</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span>
            <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
            <span class="s">'subscription_id'</span><span class="p">:</span> <span class="s">'99e4caa5-d5da-4243-8c91-a38c5cd29632'</span><span class="p">,</span>
            <span class="s">'usage_name'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)}</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A <a href="https://killbill.github.io/slate/#invoice-invoicedryrun-resource">dry run resource object</a>. The <strong>dryRunType</strong> and sometimes <strong>dryRunAction</strong> must be specified. Other attributes depend on these:</p>

<table><thead>
<tr>
<th><strong>dryRunType</strong></th>
<th><strong>dryRunAction</strong></th>
<th>Other Required Attributes</th>
</tr>
</thead><tbody>
<tr>
<td>TARGET_DATE</td>
<td>N/A</td>
<td>none</td>
</tr>
<tr>
<td>UPCOMING_INVOICE</td>
<td>N/A</td>
<td>optional subscriptionId or bundleId</td>
</tr>
<tr>
<td>SUBSCRIPTION_ACTION</td>
<td>START_BILING or CHANGE</td>
<td>effectiveDate, productName, productCategory, priceListName, billingPeriod, billingPolicy</td>
</tr>
<tr>
<td>SUBSCRIPTION_ACTION</td>
<td>STOP_BILLING</td>
<td>effectiveDate</td>
</tr>
</tbody></table>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>*</td>
<td>none</td>
<td>Target date, if <strong>dryRunType</strong> is TARGET_DATE. Otherwise not needed</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h2 id='invoice-payments'>Payments</h2>
<p>These endpoints relate to payments on an invoice. More information can be found at <a href="https://killbill.github.io/slate/#invoice-payment">Invoice Payments</a>.</p>
<h3 id='invoice-trigger-a-payment-for-an-invoice'>Trigger a payment for an invoice</h3>
<p>This API causes the system to generate a payment for an invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "purchasedAmount": 50, "targetInvoiceId": "903e55d3-8072-47f1-80fc-32857dbdbcc5"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/payments?externalPayment=false"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"4defec0a-3ecb-4d6f-9b97-c3842734d95f"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"14eadca7-dc35-4bbf-bb2b-fabad9bfebcf"</span><span class="o">);</span>

<span class="n">InvoicePayment</span> <span class="n">invoicePayment</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoicePayment</span><span class="o">();</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setPurchasedAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setTargetInvoiceId</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">externalPayment</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will use a external payment method</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">InvoicePayment</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInstantPayment</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                                        <span class="n">invoicePayment</span><span class="o">,</span> 
                                                        <span class="n">externalPayment</span><span class="o">,</span> 
                                                        <span class="n">pluginProperty</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment</span>                  <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">new</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">account_id</span>       <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">purchased_amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">external_payment</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">external_payment</span><span class="p">,</span> 
               <span class="n">user</span><span class="p">,</span> 
               <span class="n">reason</span><span class="p">,</span> 
               <span class="n">comment</span><span class="p">,</span> 
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoicePayment</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                      <span class="n">purchased_amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                      <span class="n">target_invoice_id</span><span class="o">=</span><span class="n">invoice_id</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_instant_payment</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                                  <span class="n">body</span><span class="p">,</span>
                                  <span class="n">created_by</span><span class="p">,</span>
                                  <span class="n">api_key</span><span class="p">,</span>
                                  <span class="n">api_secret</span><span class="p">,</span>
                                  <span class="n">external_payment</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">InvoicePayment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoicePayment</span><span class="nd">@abf605f2</span>
    <span class="nl">targetInvoiceId:</span> <span class="mi">4</span><span class="n">defec0a</span><span class="o">-</span><span class="mi">3</span><span class="n">ecb</span><span class="o">-</span><span class="mi">4</span><span class="n">d6f</span><span class="o">-</span><span class="mi">9</span><span class="n">b97</span><span class="o">-</span><span class="n">c3842734d95f</span>
    <span class="nl">accountId:</span> <span class="mi">14</span><span class="n">eadca7</span><span class="o">-</span><span class="n">dc35</span><span class="o">-</span><span class="mi">4</span><span class="n">bbf</span><span class="o">-</span><span class="n">bb2b</span><span class="o">-</span><span class="n">fabad9bfebcf</span>
    <span class="nl">paymentId:</span> <span class="mi">67547</span><span class="n">a02</span><span class="o">-</span><span class="mi">2</span><span class="n">d82</span><span class="o">-</span><span class="mi">4</span><span class="n">f39</span><span class="o">-</span><span class="n">bff5</span><span class="o">-</span><span class="n">ecd1c8a43749</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">67547</span><span class="n">a02</span><span class="o">-</span><span class="mi">2</span><span class="n">d82</span><span class="o">-</span><span class="mi">4</span><span class="n">f39</span><span class="o">-</span><span class="n">bff5</span><span class="o">-</span><span class="n">ecd1c8a43749</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mf">10.00</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="n">a6655592</span><span class="o">-</span><span class="mi">994</span><span class="n">e</span><span class="o">-</span><span class="mi">4975</span><span class="o">-</span><span class="mi">888</span><span class="n">e</span><span class="o">-</span><span class="n">c86bda52f2b4</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">2452</span><span class="n">e8fa</span>
        <span class="nl">transactionId:</span> <span class="n">ce51186f</span><span class="o">-</span><span class="n">c908</span><span class="o">-</span><span class="mi">41</span><span class="n">a3</span><span class="o">-</span><span class="mi">8</span><span class="n">ba8</span><span class="o">-</span><span class="n">bff57806891f</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">ce51186f</span><span class="o">-</span><span class="n">c908</span><span class="o">-</span><span class="mi">41</span><span class="n">a3</span><span class="o">-</span><span class="mi">8</span><span class="n">ba8</span><span class="o">-</span><span class="n">bff57806891f</span>
        <span class="nl">paymentId:</span> <span class="mi">67547</span><span class="n">a02</span><span class="o">-</span><span class="mi">2</span><span class="n">d82</span><span class="o">-</span><span class="mi">4</span><span class="n">f39</span><span class="o">-</span><span class="n">bff5</span><span class="o">-</span><span class="n">ecd1c8a43749</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">67547</span><span class="n">a02</span><span class="o">-</span><span class="mi">2</span><span class="n">d82</span><span class="o">-</span><span class="mi">4</span><span class="n">f39</span><span class="o">-</span><span class="n">bff5</span><span class="o">-</span><span class="n">ecd1c8a43749</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">10.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">08.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">10.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> <span class="kc">null</span>
        <span class="nl">gatewayErrorMsg:</span> <span class="kc">null</span>
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An invoicePayment resource object, with at least the following attributes: targetInvoiceId, accountId, and purchasedAmount.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalPayment</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the payment method should be defaulted to the (system provided) external payment method.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-retrieve-payments-associated-with-an-invoice'>Retrieve payments associated with an invoice</h3>
<p>Retrieves a list of invoicePayment objects for payments associated with the invoice</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/payments"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ca09d09a-59b2-4ada-8c15-597c9efde46c"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>

<span class="n">InvoicePayments</span> <span class="n">invoicePayments</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getPaymentsForInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span>
                                                                   <span class="n">withPluginInfo</span><span class="o">,</span>
                                                                   <span class="n">withAttempts</span><span class="o">,</span>
                                                                   <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                   <span class="n">inputOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'8291871e-b16e-45e6-a971-577d44727327'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_payments_for_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"targetInvoiceId"</span>: <span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>,
  <span class="s2">"accountId"</span>: <span class="s2">"8b66b9f9-bfb4-463a-86c7-e267128a294a"</span>,
  <span class="s2">"paymentId"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
  <span class="s2">"paymentNumber"</span>: <span class="s2">"19"</span>,
  <span class="s2">"paymentExternalKey"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
  <span class="s2">"authAmount"</span>: 0,
  <span class="s2">"capturedAmount"</span>: 0,
  <span class="s2">"purchasedAmount"</span>: 500,
  <span class="s2">"refundedAmount"</span>: 0,
  <span class="s2">"creditedAmount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"paymentMethodId"</span>: <span class="s2">"39f3461c-5357-42f7-a8a9-ec79502fdb6b"</span>,
  <span class="s2">"transactions"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"transactionId"</span>: <span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span>,
      <span class="s2">"transactionExternalKey"</span>: <span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span>,
      <span class="s2">"paymentId"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
      <span class="s2">"paymentExternalKey"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
      <span class="s2">"transactionType"</span>: <span class="s2">"PURCHASE"</span>,
      <span class="s2">"amount"</span>: 500,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19T20:48:34.000Z"</span>,
      <span class="s2">"processedAmount"</span>: 500,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"status"</span>: <span class="s2">"SUCCESS"</span>,
      <span class="s2">"gatewayErrorCode"</span>: null,
      <span class="s2">"gatewayErrorMsg"</span>: null,
      <span class="s2">"firstPaymentReferenceId"</span>: null,
      <span class="s2">"secondPaymentReferenceId"</span>: null,
      <span class="s2">"properties"</span>: null,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"paymentAttempts"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">InvoicePayment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoicePayment</span><span class="nd">@c52fce27</span>
    <span class="nl">targetInvoiceId:</span> <span class="n">ca09d09a</span><span class="o">-</span><span class="mi">59</span><span class="n">b2</span><span class="o">-</span><span class="mi">4</span><span class="n">ada</span><span class="o">-</span><span class="mi">8</span><span class="n">c15</span><span class="o">-</span><span class="mi">597</span><span class="n">c9efde46c</span>
    <span class="nl">accountId:</span> <span class="n">e4ba4753</span><span class="o">-</span><span class="mi">8627</span><span class="o">-</span><span class="mi">4490</span><span class="o">-</span><span class="mi">8</span><span class="n">cda</span><span class="o">-</span><span class="n">e225701b8ea9</span>
    <span class="nl">paymentId:</span> <span class="n">c65bf687</span><span class="o">-</span><span class="mi">6</span><span class="n">bae</span><span class="o">-</span><span class="mi">4</span><span class="n">af3</span><span class="o">-</span><span class="n">b356</span><span class="o">-</span><span class="mi">113594</span><span class="n">a9d794</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="n">c65bf687</span><span class="o">-</span><span class="mi">6</span><span class="n">bae</span><span class="o">-</span><span class="mi">4</span><span class="n">af3</span><span class="o">-</span><span class="n">b356</span><span class="o">-</span><span class="mi">113594</span><span class="n">a9d794</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mi">0</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mo">00</span><span class="n">e485a5</span><span class="o">-</span><span class="mi">4</span><span class="n">ee9</span><span class="o">-</span><span class="mi">47</span><span class="n">d2</span><span class="o">-</span><span class="mi">8108</span><span class="o">-</span><span class="mi">47697</span><span class="n">c07b17c</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@ab8c2dc0</span>
        <span class="nl">transactionId:</span> <span class="mi">92</span><span class="n">ba850a</span><span class="o">-</span><span class="mi">615</span><span class="n">b</span><span class="o">-</span><span class="mi">4435</span><span class="o">-</span><span class="n">bdc1</span><span class="o">-</span><span class="n">f1abf507fa26</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">92</span><span class="n">ba850a</span><span class="o">-</span><span class="mi">615</span><span class="n">b</span><span class="o">-</span><span class="mi">4435</span><span class="o">-</span><span class="n">bdc1</span><span class="o">-</span><span class="n">f1abf507fa26</span>
        <span class="nl">paymentId:</span> <span class="n">c65bf687</span><span class="o">-</span><span class="mi">6</span><span class="n">bae</span><span class="o">-</span><span class="mi">4</span><span class="n">af3</span><span class="o">-</span><span class="n">b356</span><span class="o">-</span><span class="mi">113594</span><span class="n">a9d794</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">c65bf687</span><span class="o">-</span><span class="mi">6</span><span class="n">bae</span><span class="o">-</span><span class="mi">4</span><span class="n">af3</span><span class="o">-</span><span class="n">b356</span><span class="o">-</span><span class="mi">113594</span><span class="n">a9d794</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">06.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">0.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">PAYMENT_FAILURE</span>
        <span class="nl">gatewayErrorCode:</span> <span class="n">gatewayErrorCode</span>
        <span class="nl">gatewayErrorMsg:</span> <span class="n">gatewayError</span>
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentAttempt</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentAttempt</span><span class="err">@</span><span class="mi">811</span><span class="n">fb24d</span>
        <span class="nl">accountId:</span> <span class="n">e4ba4753</span><span class="o">-</span><span class="mi">8627</span><span class="o">-</span><span class="mi">4490</span><span class="o">-</span><span class="mi">8</span><span class="n">cda</span><span class="o">-</span><span class="n">e225701b8ea9</span>
        <span class="nl">paymentMethodId:</span> <span class="mo">00</span><span class="n">e485a5</span><span class="o">-</span><span class="mi">4</span><span class="n">ee9</span><span class="o">-</span><span class="mi">47</span><span class="n">d2</span><span class="o">-</span><span class="mi">8108</span><span class="o">-</span><span class="mi">47697</span><span class="n">c07b17c</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">c65bf687</span><span class="o">-</span><span class="mi">6</span><span class="n">bae</span><span class="o">-</span><span class="mi">4</span><span class="n">af3</span><span class="o">-</span><span class="n">b356</span><span class="o">-</span><span class="mi">113594</span><span class="n">a9d794</span>
        <span class="nl">transactionId:</span> <span class="mi">92</span><span class="n">ba850a</span><span class="o">-</span><span class="mi">615</span><span class="n">b</span><span class="o">-</span><span class="mi">4435</span><span class="o">-</span><span class="n">bdc1</span><span class="o">-</span><span class="n">f1abf507fa26</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">92</span><span class="n">ba850a</span><span class="o">-</span><span class="mi">615</span><span class="n">b</span><span class="o">-</span><span class="mi">4435</span><span class="o">-</span><span class="n">bdc1</span><span class="o">-</span><span class="n">f1abf507fa26</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">06.000</span><span class="n">Z</span>
        <span class="nl">stateName:</span> <span class="n">RETRIED</span>
        <span class="nl">amount:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">pluginName:</span> <span class="n">__INVOICE_PAYMENT_CONTROL_PLUGIN__</span>
        <span class="nl">pluginProperties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">IPCD_INVOICE_ID</span>
            <span class="nl">value:</span> <span class="n">ca09d09a</span><span class="o">-</span><span class="mi">59</span><span class="n">b2</span><span class="o">-</span><span class="mi">4</span><span class="n">ada</span><span class="o">-</span><span class="mi">8</span><span class="n">c15</span><span class="o">-</span><span class="mi">597</span><span class="n">c9efde46c</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentAttempt</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentAttempt</span><span class="err">@</span><span class="mi">37</span><span class="n">ee17f0</span>
        <span class="nl">accountId:</span> <span class="n">e4ba4753</span><span class="o">-</span><span class="mi">8627</span><span class="o">-</span><span class="mi">4490</span><span class="o">-</span><span class="mi">8</span><span class="n">cda</span><span class="o">-</span><span class="n">e225701b8ea9</span>
        <span class="nl">paymentMethodId:</span> <span class="mo">00</span><span class="n">e485a5</span><span class="o">-</span><span class="mi">4</span><span class="n">ee9</span><span class="o">-</span><span class="mi">47</span><span class="n">d2</span><span class="o">-</span><span class="mi">8108</span><span class="o">-</span><span class="mi">47697</span><span class="n">c07b17c</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">c65bf687</span><span class="o">-</span><span class="mi">6</span><span class="n">bae</span><span class="o">-</span><span class="mi">4</span><span class="n">af3</span><span class="o">-</span><span class="n">b356</span><span class="o">-</span><span class="mi">113594</span><span class="n">a9d794</span>
        <span class="nl">transactionId:</span> <span class="kc">null</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">92</span><span class="n">ba850a</span><span class="o">-</span><span class="mi">615</span><span class="n">b</span><span class="o">-</span><span class="mi">4435</span><span class="o">-</span><span class="n">bdc1</span><span class="o">-</span><span class="n">f1abf507fa26</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">06.000</span><span class="n">Z</span>
        <span class="nl">stateName:</span> <span class="n">SCHEDULED</span>
        <span class="nl">amount:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">pluginName:</span> <span class="n">__INVOICE_PAYMENT_CONTROL_PLUGIN__</span>
        <span class="nl">pluginProperties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">IPCD_INVOICE_ID</span>
            <span class="nl">value:</span> <span class="n">ca09d09a</span><span class="o">-</span><span class="mi">59</span><span class="n">b2</span><span class="o">-</span><span class="mi">4</span><span class="n">ada</span><span class="o">-</span><span class="mi">8</span><span class="n">c15</span><span class="o">-</span><span class="mi">597</span><span class="n">c9efde46c</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8a758318-25fb-46e1-a385-a8f8354ec903'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'eb737a51-d230-46fe-ad95-8ddf0b8effe3'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'337'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'target_invoice_id'</span><span class="p">:</span> <span class="s">'8291871e-b16e-45e6-a971-577d44727327'</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'70a36a47-878e-4fd8-8401-1ab2f4403d41'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'70a36a47-878e-4fd8-8401-1ab2f4403d41'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'PURCHASE'</span><span class="p">}]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, plugin info is included</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, payment attempts are included</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoicePayment resource object.</p>
<h2 id='invoice-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to invoices. For details on Custom Fields see <a href="https://killbill.github.io/slate/#custom-field">Custom Field</a>.</p>
<h3 id='invoice-add-custom-fields-to-an-invoice'>Add custom fields to an invoice</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "objectType": "INVOICE", "name": "Test Custom Field", "value": "demo_test_value" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">invoiceId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">INVOICE</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'INVOICE'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                         <span class="n">user</span><span class="p">,</span>
                         <span class="n">reason</span><span class="p">,</span>
                         <span class="n">comment</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">59860</span><span class="n">a0d</span><span class="o">-</span><span class="n">c032</span><span class="o">-</span><span class="mi">456</span><span class="n">d</span><span class="o">-</span><span class="n">a35e</span><span class="o">-</span><span class="mi">3</span><span class="n">a48fe8579e5</span>
    <span class="nl">objectType:</span> <span class="n">INVOICE</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"INVOICE"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing the custom field object to be added.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-retrieve-invoice-custom-fields'>Retrieve invoice custom fields</h3>
<p>Retrieve the custom fields associated with an invoice</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span>
                                                                   <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"349de10f-4bb1-4e1a-93f6-11b745200bf5"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"INVOICE"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Test Custom Field"</span>,
    <span class="s2">"value"</span>: <span class="s2">"demo_test_value"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">59860</span><span class="n">a0d</span><span class="o">-</span><span class="n">c032</span><span class="o">-</span><span class="mi">456</span><span class="n">d</span><span class="o">-</span><span class="n">a35e</span><span class="o">-</span><span class="mi">3</span><span class="n">a48fe8579e5</span>
    <span class="nl">objectType:</span> <span class="n">INVOICE</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"INVOICE"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'custom_field_id'</span><span class="p">:</span> <span class="s">'5670b594-9317-4aeb-bfef-2c2342ec172a'</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'Test Custom Field'</span><span class="p">,</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'INVOICE'</span><span class="p">,</span>
 <span class="s">'value'</span><span class="p">:</span> <span class="s">'test_value'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of custom field objects</p>
<h3 id='invoice-modify-custom-fields-for-an-invoice'>Modify custom fields for an invoice</h3>
<p>Modify the custom fields associated with an account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "customFieldId": "349de10f-4bb1-4e1a-93f6-11b745200bf5", "objectId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d", "objectType": "INVOICE", "name": "Test Custom Field", "value": "test_modify_value", "auditLogs": [] }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">modifyInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFieldModified</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">modify_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span> 
                                        <span class="n">created_by</span><span class="p">,</span> 
                                        <span class="n">api_key</span><span class="p">,</span> 
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Requst Body</strong></p>

<p>A JSON string representing a list of custom fields to substitute for the existing ones.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='invoice-remove-custom-fields-from-invoice'>Remove custom fields from invoice</h3>
<p>Remove a specified set of custom fields from the invoice</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields?customField=349de10f-4bb1-4e1a-93f6-11b745200bf5"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">deleteInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFieldsId</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span> 

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">delete_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                                        <span class="n">created_by</span><span class="p">,</span> 
                                        <span class="n">api_key</span><span class="p">,</span> 
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Comma separated list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-tags'>Tags</h2>
<p>See <a href="https://killbill.github.io/slate/#account-tags">Account Tags</a> for an introduction.</p>

<p>The only <code>system</code> tag applicable for an <code>Invoice</code> is <code>WRITTEN_OFF</code> (<code>00000000-0000-0000-0000-000000000004</code>), which as it&#39;s name indicates, is used to write off an unpaid invoice, bringing its balance to $0.</p>
<h3 id='invoice-add-tags-to-invoice'>Add tags to invoice</h3>
<p>This API adds one or more tags to an invoice. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ "00000000-0000-0000-0000-000000000004"]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"45d6f4c5-21be-49b1-99c5-7b0c3c985bf0"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">writtenOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000004"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                           <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">writtenOffId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
               <span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span>
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000004"</span><span class="p">]</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                               <span class="n">tag</span><span class="p">,</span> 
                               <span class="n">created_by</span><span class="p">,</span> 
                               <span class="n">api_key</span><span class="p">,</span> 
                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@bd138472</span>
    <span class="nl">tagId:</span> <span class="mi">1</span><span class="n">bb4b638</span><span class="o">-</span><span class="mi">3886</span><span class="o">-</span><span class="mi">4</span><span class="n">f73</span><span class="o">-</span><span class="mi">90</span><span class="n">a5</span><span class="o">-</span><span class="mi">89</span><span class="n">eb6d1bcf7f</span>
    <span class="nl">objectType:</span> <span class="n">INVOICE</span>
    <span class="nl">objectId:</span> <span class="mi">45</span><span class="n">d6f4c5</span><span class="o">-</span><span class="mi">21</span><span class="n">be</span><span class="o">-</span><span class="mi">49</span><span class="n">b1</span><span class="o">-</span><span class="mi">99</span><span class="n">c5</span><span class="o">-</span><span class="mi">7</span><span class="n">b0c3c985bf0</span>
    <span class="nl">tagDefinitionId:</span> <span class="mo">00000000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">000000000004</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">WRITTEN_OFF</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"INVOICE"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"00000000-0000-0000-0000-000000000004"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"WRITTEN_OFF"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="p">:[</span>

      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-retrieve-invoice-tags'>Retrieve invoice tags</h3>
<p>Retrieve all tags attached to this invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                           <span class="n">includedDeleted</span><span class="o">,</span> 
                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
             <span class="n">audit</span><span class="p">,</span>
             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'3e94fccf-0f37-40aa-90a4-122a4f381ebc'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"e054c84a-0518-4611-92a8-53e849f0affd"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"INVOICE"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"00000000-0000-0000-0000-000000000002"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"AUTO_INVOICING_OFF"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@cae768d7</span>
    <span class="nl">tagId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
    <span class="nl">objectType:</span> <span class="n">INVOICE</span>
    <span class="nl">objectId:</span> <span class="n">e659f0f3</span><span class="o">-</span><span class="mi">745</span><span class="n">c</span><span class="o">-</span><span class="mi">46</span><span class="n">d5</span><span class="o">-</span><span class="mi">953</span><span class="n">c</span><span class="o">-</span><span class="mi">28</span><span class="n">fe9282fc7d</span>
    <span class="nl">tagDefinitionId:</span> <span class="mo">00000000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">0000</span><span class="o">-</span><span class="mo">000000000001</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">AUTO_PAY_OFF</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">TAG</span>
        <span class="nl">objectId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
        <span class="nl">changedBy:</span> <span class="n">Toto</span>
        <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
        <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
        <span class="nl">userToken:</span> <span class="n">e36f7ba5</span><span class="o">-</span><span class="n">fb5b</span><span class="o">-</span><span class="mi">41</span><span class="n">c0</span><span class="o">-</span><span class="n">b47c</span><span class="o">-</span><span class="mi">77</span><span class="n">c48ab37dd9</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"INVOICE"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"00000000-0000-0000-0000-000000000006"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"TEST"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'3e94fccf-0f37-40aa-90a4-122a4f381ebc'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'INVOICE'</span><span class="p">,</span>
 <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'00000000-0000-0000-0000-000000000002'</span><span class="p">,</span>
 <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'AUTO_INVOICING_OFF'</span><span class="p">,</span>
 <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'fc7fab6e-751c-4dd3-b7fa-e93a66e42822'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='invoice-remove-tags-from-invoice'>Remove tags from invoice</h3>
<p>Removes a list of tags attached to an invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags?tagDef=00000000-0000-0000-0000-000000000002"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">autoPayOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">deleteInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                             <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">autoPayOffId</span><span class="o">),</span> 
                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                  <span class="n">user</span><span class="p">,</span>
                  <span class="n">reason</span><span class="p">,</span>
                  <span class="n">comment</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">delete_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                               <span class="n">created_by</span><span class="p">,</span> 
                               <span class="n">api_key</span><span class="p">,</span> 
                               <span class="n">api_secret</span><span class="p">,</span>
                               <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>yes</td>
<td>none</td>
<td>List of tag definition IDs identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-translation'>Translation</h2>
<p>These endpoints support translation of invoices to a different language when required by the customer. Refer to our <a href="http://docs.killbill.io/latest/internationalization.html#_invoice_templates">Internationalization manual</a> for an introduction.</p>

<p>Translation replaces words and phrases in an invoice or catalog with the equivalent words or phrases in a different language. A tenant may upload translation tables for specific locales (e.g., locale <code>fr_FR</code> for French). When a customer accesses an invoice, that invoice will be generated from the system data, formatted using the appropriate template (see below), and translated according to the locale of the customer&#39;s account, if a translation table exists for that locale.</p>
<h3 id='invoice-upload-the-catalog-translation-for-the-tenant'>Upload the catalog translation for the tenant</h3>
<p>Uploads a catalog transaltion table that will be saved under a specified locale. The translation table gives a translation for specific names in the current catalog.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/catalogTranslation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'"sports-monthly = Voiture Sport"'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/catalogTranslation/fr_FR"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">catalog_translation</span> <span class="o">=</span> <span class="s1">'sports-monthly = Voiture Sport'</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_catalog_translation</span><span class="p">(</span><span class="n">catalog_translation</span><span class="p">,</span> 
                                                          <span class="n">locale</span><span class="p">,</span> 
                                                          <span class="n">delete_if_exists</span><span class="p">,</span> 
                                                          <span class="n">user</span><span class="p">,</span> 
                                                          <span class="n">reason</span><span class="p">,</span> 
                                                          <span class="n">comment</span><span class="p">,</span> 
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">"sports-monthly = Voiture Sport"</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">upload_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span>
                                      <span class="n">body</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/catalogTranslation/fr_FR/ 
&lt; Content-Type: text/plain
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="s2">"sports-monthly = Voiture Sport"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Response Body</strong></p>

<p>A table of translation items. For example:</p>

<p>gold-monthly = plan Or mensuel
silver-monthly = plan d&#39;argent mensuel</p>

<p>Note that this table does not use a special syntax such as JSON. The equals sign is the only punctuation. There are no brackets or quotation marks.</p>

<p>The names translated would be primarily plan names, product names, and other items that may appear on an invoice.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing translations</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-retrieve-the-catalog-translation-for-the-tenant'>Retrieve the catalog translation for the tenant</h3>
<p>Retrieves the catalog translation table that was previously uploaded for a particular locale, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/catalogTranslation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/catalogTranslation/fr_FR"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: text/plain
<span class="s2">"sports-monthly = Voiture Sport"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="s2">"sports-monthly = Voiture Sport"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">sports</span><span class="o">-</span><span class="n">monthly</span> <span class="o">=</span> <span class="n">Voiture</span> <span class="n">Sport</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the translation table. A status code of 404 means no table was found for the specified locale.</p>
<h3 id='invoice-upload-the-invoice-translation-for-the-tenant'>Upload the invoice translation for the tenant</h3>
<p>Uploads an invoice translation table that will be saved under a specified locale. The translation table gives a translation for specific names in the corresponding invoice template.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/translation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s2">"sports-monthly = Voiture Sport"</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/translation/fr_FR"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_translation</span> <span class="o">=</span> <span class="n">get_resource_as_string</span><span class="p">(</span><span class="s2">"InvoiceTranslation_fr_FR.properties"</span><span class="p">)</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_translation</span><span class="p">(</span><span class="n">invoice_translation</span><span class="p">,</span>
                                                          <span class="n">locale</span><span class="p">,</span>
                                                          <span class="n">delete_if_exists</span><span class="p">,</span> 
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">"sports-monthly = Voiture Sport"</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">upload_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span>
                                      <span class="n">body</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/translation/fr_FR/
&lt; Content-Type: text/plain
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoiceTitle</span><span class="o">=</span><span class="no">FACTURE</span>
<span class="n">invoiceDate</span><span class="o">=</span><span class="no">Date</span><span class="p">:</span>
<span class="n">invoiceNumber</span><span class="o">=</span><span class="no">Facture</span> <span class="c1">#</span>
<span class="n">invoiceAmount</span><span class="o">=</span><span class="no">XXXMontant</span> <span class="err"></span> <span class="n">payer</span>
<span class="n">invoiceAmountPaid</span><span class="o">=</span><span class="no">XXXMontant</span> <span class="n">pay</span><span class="err"></span>
<span class="n">invoiceBalance</span><span class="o">=</span><span class="no">Nouveau</span> <span class="n">montant</span>

<span class="n">accountOwnerName</span><span class="o">=</span><span class="no">Chauffeur</span>

<span class="n">companyName</span><span class="o">=</span><span class="no">Killbill</span><span class="p">,</span> <span class="no">Inc</span><span class="p">.</span>
<span class="nf">companyAddress</span><span class="o">=</span><span class="no">P</span><span class="o">.</span><span class="no">O</span><span class="o">.</span> <span class="no">Box</span> <span class="mi">1234</span>
<span class="n">companyCityProvincePostalCode</span><span class="o">=</span><span class="no">Springfield</span>
<span class="n">companyCountry</span><span class="o">=</span><span class="no">USA</span>
<span class="n">companyUrl</span><span class="o">=</span><span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">killbilling</span><span class="p">.</span><span class="nf">org</span>

<span class="n">invoiceItemBundleName</span><span class="o">=</span><span class="no">Armes</span>
<span class="n">invoiceItemDescription</span><span class="o">=</span><span class="no">Description</span>
<span class="n">invoiceItemServicePeriod</span><span class="o">=</span><span class="no">Periode</span> <span class="n">de</span> <span class="n">facturation</span>
<span class="n">invoiceItemAmount</span><span class="o">=</span><span class="no">Montant</span>

<span class="n">processedPaymentCurrency</span><span class="o">=</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="no">Le</span> <span class="n">payment</span> <span class="err"></span> <span class="err"></span><span class="n">t</span><span class="err"></span> <span class="n">pay</span><span class="err"></span> <span class="n">en</span>
<span class="n">processedPaymentRate</span><span class="o">=</span><span class="no">Le</span> <span class="n">taux</span> <span class="n">de</span> <span class="n">conversion</span> <span class="n">est</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Response Body</strong></p>

<p>A table of translation items. For example:</p>

<p>invoiceTitle=FACTURE
invoiceDate=Date:
invoiceNumber=Facture #
invoiceAmount=Montant  payer</p>

<p>Note that this table does not use a special syntax such as JSON. The equals sign is the only punctuation. There are no brackets or quotation marks.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>delete translation if exists</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-retrieve-the-invoice-translation-for-the-tenant'>Retrieve the invoice translation for the tenant</h3>
<p>Retrieves the invoice translation table that was previously uploaded for a particular locale, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/translation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/translation/fr_FR"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span>
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/plain

sports-monthly <span class="o">=</span> Voiture Sport
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoiceTitle</span><span class="o">=</span><span class="no">FACTURE</span>
<span class="n">invoiceDate</span><span class="o">=</span><span class="no">Date</span><span class="p">:</span>
<span class="n">invoiceNumber</span><span class="o">=</span><span class="no">Facture</span> <span class="c1">#</span>
<span class="n">invoiceAmount</span><span class="o">=</span><span class="no">XXXMontant</span> <span class="err"></span> <span class="n">payer</span>
<span class="n">invoiceAmountPaid</span><span class="o">=</span><span class="no">XXXMontant</span> <span class="n">pay</span><span class="err"></span>
<span class="n">invoiceBalance</span><span class="o">=</span><span class="no">Nouveau</span> <span class="n">montant</span>

<span class="n">accountOwnerName</span><span class="o">=</span><span class="no">Chauffeur</span>

<span class="n">companyName</span><span class="o">=</span><span class="no">Killbill</span><span class="p">,</span> <span class="no">Inc</span><span class="p">.</span>
<span class="nf">companyAddress</span><span class="o">=</span><span class="no">P</span><span class="o">.</span><span class="no">O</span><span class="o">.</span> <span class="no">Box</span> <span class="mi">1234</span>
<span class="n">companyCityProvincePostalCode</span><span class="o">=</span><span class="no">Springfield</span>
<span class="n">companyCountry</span><span class="o">=</span><span class="no">USA</span>
<span class="n">companyUrl</span><span class="o">=</span><span class="n">http</span><span class="ss">:/</span><span class="o">/</span><span class="n">killbilling</span><span class="p">.</span><span class="nf">org</span>

<span class="n">invoiceItemBundleName</span><span class="o">=</span><span class="no">Armes</span>
<span class="n">invoiceItemDescription</span><span class="o">=</span><span class="no">Description</span>
<span class="n">invoiceItemServicePeriod</span><span class="o">=</span><span class="no">Periode</span> <span class="n">de</span> <span class="n">facturation</span>
<span class="n">invoiceItemAmount</span><span class="o">=</span><span class="no">Montant</span>

<span class="n">processedPaymentCurrency</span><span class="o">=</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="no">Le</span> <span class="n">payment</span> <span class="err"></span> <span class="err"></span><span class="n">t</span><span class="err"></span> <span class="n">pay</span><span class="err"></span> <span class="n">en</span>
<span class="n">processedPaymentRate</span><span class="o">=</span><span class="no">Le</span> <span class="n">taux</span> <span class="n">de</span> <span class="n">conversion</span> <span class="n">est</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">sports</span><span class="o">-</span><span class="n">monthly</span> <span class="o">=</span> <span class="n">Voiture</span> <span class="n">Sport</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the translation table. A status code of 404 means no table was found for the specified locale.</p>
<h2 id='invoice-template'>Template</h2>
<p>A template is a document based on <a href="https://mustache.github.io/"><strong>mustache</strong></a> that provides the layout information for invoices. The template will be trnslated according to the translation table, if any, and the invoice data will be filled in by the Kill Bill system. Refer to our <a href="http://docs.killbill.io/latest/internationalization.html#_invoice_templates">Internationalization manual</a> for an introduction.</p>
<h3 id='invoice-upload-the-manualpay-invoice-template-for-the-tenant'>Upload the manualPay invoice template for the tenant</h3>
<p>Uploads an invoice template based on the manual pay option, for accounts that have the MANUAL_PAY tag. These accounts manually pay their invoices (e.g. ACH). Typically, this template will contain extra information like the company bank account details, PO number, etc.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/manualPayTemplate</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/html"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'"Some_HTML_String"'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/manualPayTemplate?deleteIfExists=false"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_template</span> <span class="o">=</span> <span class="s2">"Some_HTML_String"</span>
<span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_template</span><span class="p">(</span><span class="n">invoice_template</span><span class="p">,</span> 
                                                       <span class="n">is_manual_pay</span><span class="p">,</span> 
                                                       <span class="n">delete_if_exists</span><span class="p">,</span> 
                                                       <span class="n">user</span><span class="p">,</span> 
                                                       <span class="n">reason</span><span class="p">,</span> 
                                                       <span class="n">comment</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'Some_HTML_String'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">upload_invoice_mp_template</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/manualPayTemplate/%7Blocale:.<span class="k">*</span>%7D/ 
&lt; Content-Type: text/html
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="s2">"
&lt;meta charset=</span><span class="se">\"</span><span class="s2">UTF-8</span><span class="se">\"</span><span class="s2">&gt;

&lt;html&gt;

   &lt;head&gt;

      &lt;style type=</span><span class="se">\"</span><span class="s2">text/css</span><span class="se">\"</span><span class="s2">&gt; th {align=left; width=225px; border-bottom: solid 2px black;} &lt;/style&gt;

   &lt;/head&gt;

   &lt;body&gt;

      &lt;h1&gt;Tenant template: {{text.invoiceTitle}}&lt;/h1&gt;

      &lt;table&gt;

         &lt;tr&gt;

            &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;

            &lt;td width=100px/&gt;                
            &lt;td width=225px/&gt;                
            &lt;td width=225px/&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td /&gt;                
            &lt;td align=right&gt;{{text.invoiceDate}}&lt;/td&gt;

            &lt;td&gt;{{invoice.formattedInvoiceDate}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td /&gt;                
            &lt;td align=right&gt;{{text.invoiceNumber}}&lt;/td&gt;

            &lt;td&gt;{{invoice.invoiceNumber}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyName}}&lt;/td&gt;

            &lt;td&gt;&lt;/td&gt;

            &lt;td align=right&gt;{{text.accountOwnerName}}&lt;/td&gt;

            &lt;td&gt;{{account.name}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyAddress}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td&gt;{{account.email}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyCityProvincePostalCode}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td&gt;{{account.phone}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyCountry}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td /&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;&lt;{{text.companyUrl}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td /&gt;            
         &lt;/tr&gt;

      &lt;/table&gt;
              &lt;br /&gt;        &lt;br /&gt;        &lt;br /&gt;        
      &lt;table&gt;

         &lt;tr&gt;

            &lt;th&gt;{{text.invoiceItemBundleName}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemDescription}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemServicePeriod}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemAmount}}&lt;/td&gt;            
         &lt;/tr&gt;
                     {{#invoice.invoiceItems}}            
         &lt;tr&gt;

            &lt;td&gt;{{description}}&lt;/td&gt;

            &lt;td&gt;{{planName}}&lt;/td&gt;

            &lt;td&gt;{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}&lt;/td&gt;

            &lt;td&gt;{{invoice.currency}} {{amount}}&lt;/td&gt;

         &lt;/tr&gt;
                     {{/invoice.invoiceItems}}            
         &lt;tr&gt;

            &lt;td colspan=4 /&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmount}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.chargedAmount}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmountPaid}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.paidAmount}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceBalance}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.balance}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

      &lt;/table&gt;

   &lt;/body&gt;

&lt;/html&gt;
"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Contains a mustache manual pay template in HTML format.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing manual pay template</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an empty body.</p>
<h3 id='invoice-retrieve-the-manualpay-invoice-template-for-the-tenant'>Retrieve the manualPay invoice template for the tenant</h3>
<p>Retrieves the manual pay invoice template previously uploaded for this tenant, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/manualPayTemplate</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/manualPayTemplate/%257Blocale%3A.*%257D"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">true</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_template</span><span class="p">(</span><span class="n">is_manual_pay</span><span class="p">,</span>
                                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_mp_template</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/html

<span class="s2">"Some_HTML_String"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="s2">"
&lt;meta charset=</span><span class="se">\"</span><span class="s2">UTF-8</span><span class="se">\"</span><span class="s2">&gt;

&lt;html&gt;

   &lt;head&gt;

      &lt;style type=</span><span class="se">\"</span><span class="s2">text/css</span><span class="se">\"</span><span class="s2">&gt; th {align=left; width=225px; border-bottom: solid 2px black;} &lt;/style&gt;

   &lt;/head&gt;

   &lt;body&gt;

      &lt;h1&gt;Tenant template: {{text.invoiceTitle}}&lt;/h1&gt;

      &lt;table&gt;

         &lt;tr&gt;

            &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;

            &lt;td width=100px/&gt;                
            &lt;td width=225px/&gt;                
            &lt;td width=225px/&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td /&gt;                
            &lt;td align=right&gt;{{text.invoiceDate}}&lt;/td&gt;

            &lt;td&gt;{{invoice.formattedInvoiceDate}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td /&gt;                
            &lt;td align=right&gt;{{text.invoiceNumber}}&lt;/td&gt;

            &lt;td&gt;{{invoice.invoiceNumber}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyName}}&lt;/td&gt;

            &lt;td&gt;&lt;/td&gt;

            &lt;td align=right&gt;{{text.accountOwnerName}}&lt;/td&gt;

            &lt;td&gt;{{account.name}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyAddress}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td&gt;{{account.email}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyCityProvincePostalCode}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td&gt;{{account.phone}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyCountry}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td /&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;&lt;{{text.companyUrl}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td /&gt;            
         &lt;/tr&gt;

      &lt;/table&gt;
              &lt;br /&gt;        &lt;br /&gt;        &lt;br /&gt;        
      &lt;table&gt;

         &lt;tr&gt;

            &lt;th&gt;{{text.invoiceItemBundleName}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemDescription}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemServicePeriod}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemAmount}}&lt;/td&gt;            
         &lt;/tr&gt;
                     {{#invoice.invoiceItems}}            
         &lt;tr&gt;

            &lt;td&gt;{{description}}&lt;/td&gt;

            &lt;td&gt;{{planName}}&lt;/td&gt;

            &lt;td&gt;{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}&lt;/td&gt;

            &lt;td&gt;{{invoice.currency}} {{amount}}&lt;/td&gt;

         &lt;/tr&gt;
                     {{/invoice.invoiceItems}}            
         &lt;tr&gt;

            &lt;td colspan=4 /&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmount}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.chargedAmount}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmountPaid}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.paidAmount}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceBalance}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.balance}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

      &lt;/table&gt;

   &lt;/body&gt;

&lt;/html&gt;
"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="s">"&lt;meta charset=</span><span class="se">\"</span><span class="s">UTF-8</span><span class="se">\"</span><span class="s">&gt;</span><span class="err">

</span><span class="s"> &lt;html&gt;</span><span class="err">

</span><span class="s">   &lt;head&gt;</span><span class="err">

</span><span class="s">      &lt;style type=</span><span class="se">\"</span><span class="s">text/css</span><span class="se">\"</span><span class="s">&gt; th {align=left; width=225px; border-bottom: solid 2px black;} &lt;/style&gt;</span><span class="err">

</span><span class="s">   &lt;/head&gt;</span><span class="err">

</span><span class="s">   &lt;body&gt;</span><span class="err">

</span><span class="s">      &lt;h1&gt;Tenant template: {{text.invoiceTitle}}&lt;/h1&gt;</span><span class="err">

</span><span class="s">      &lt;table&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td width=100px/&gt;                </span><span class="err">
</span><span class="s">            &lt;td width=225px/&gt;                </span><span class="err">
</span><span class="s">            &lt;td width=225px/&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;{{text.invoiceDate}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{invoice.formattedInvoiceDate}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;{{text.invoiceNumber}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{invoice.invoiceNumber}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{text.companyName}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td align=right&gt;{{text.accountOwnerName}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{account.name}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{text.companyAddress}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td&gt;{{account.email}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{text.companyCityProvincePostalCode}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td&gt;{{account.phone}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{text.companyCountry}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;&lt;{{text.companyUrl}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">      &lt;/table&gt;</span><span class="err">
</span><span class="s">              &lt;br /&gt;        &lt;br /&gt;        &lt;br /&gt;        </span><span class="err">
</span><span class="s">      &lt;table&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;th&gt;{{text.invoiceItemBundleName}}&lt;/td&gt;                </span><span class="err">
</span><span class="s">            &lt;th&gt;{{text.invoiceItemDescription}}&lt;/td&gt;                </span><span class="err">
</span><span class="s">            &lt;th&gt;{{text.invoiceItemServicePeriod}}&lt;/td&gt;                </span><span class="err">
</span><span class="s">            &lt;th&gt;{{text.invoiceItemAmount}}&lt;/td&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">
</span><span class="s">                     {{#invoice.invoiceItems}}            </span><span class="err">
</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{description}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{planName}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{invoice.currency}} {{amount}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">
</span><span class="s">                     {{/invoice.invoiceItems}}            </span><span class="err">
</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td colspan=4 /&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td colspan=2 /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmount}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{invoice.chargedAmount}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td colspan=2 /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmountPaid}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{invoice.paidAmount}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td colspan=2 /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceBalance}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{invoice.balance}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">      &lt;/table&gt;</span><span class="err">

</span><span class="s">   &lt;/body&gt;</span><span class="err">

</span><span class="s">&lt;/html&gt;</span><span class="err">
</span><span class="s">"</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and the manual pay template.</p>
<h3 id='invoice-upload-the-invoice-template-for-the-tenant'>Upload the invoice template for the tenant</h3>
<p>Uploads an invoice template based on an automatic payment method. This is appropriate for accounts without the MANUAL_PAY tag.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/template</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/html"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s2">"Some_HTML_String"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/template"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_template</span> <span class="o">=</span> <span class="s2">"Some_HTML_String"</span>
<span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_template</span><span class="p">(</span><span class="n">invoice_template</span><span class="p">,</span> 
                                                       <span class="n">is_manual_pay</span><span class="p">,</span> 
                                                       <span class="n">delete_if_exists</span><span class="p">,</span> 
                                                       <span class="n">user</span><span class="p">,</span> 
                                                       <span class="n">reason</span><span class="p">,</span> 
                                                       <span class="n">comment</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'Some_HTML_String'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">upload_invoice_template</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                   <span class="n">created_by</span><span class="p">,</span>
                                   <span class="n">api_key</span><span class="p">,</span>
                                   <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://localhost:8080/1.0/kb/invoices/template
&lt; Content-Type: text/html
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="s2">"
&lt;meta charset=</span><span class="se">\"</span><span class="s2">UTF-8</span><span class="se">\"</span><span class="s2">&gt;

&lt;html&gt;

   &lt;head&gt;

      &lt;style type=</span><span class="se">\"</span><span class="s2">text/css</span><span class="se">\"</span><span class="s2">&gt; th {align=left; width=225px; border-bottom: solid 2px black;} &lt;/style&gt;

   &lt;/head&gt;

   &lt;body&gt;

      &lt;h1&gt;Tenant template: {{text.invoiceTitle}}&lt;/h1&gt;

      &lt;table&gt;

         &lt;tr&gt;

            &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;

            &lt;td width=100px/&gt;                
            &lt;td width=225px/&gt;                
            &lt;td width=225px/&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td /&gt;                
            &lt;td align=right&gt;{{text.invoiceDate}}&lt;/td&gt;

            &lt;td&gt;{{invoice.formattedInvoiceDate}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td /&gt;                
            &lt;td align=right&gt;{{text.invoiceNumber}}&lt;/td&gt;

            &lt;td&gt;{{invoice.invoiceNumber}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyName}}&lt;/td&gt;

            &lt;td&gt;&lt;/td&gt;

            &lt;td align=right&gt;{{text.accountOwnerName}}&lt;/td&gt;

            &lt;td&gt;{{account.name}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyAddress}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td&gt;{{account.email}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyCityProvincePostalCode}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td&gt;{{account.phone}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyCountry}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td /&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;&lt;{{text.companyUrl}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td /&gt;            
         &lt;/tr&gt;

      &lt;/table&gt;
              &lt;br /&gt;        &lt;br /&gt;        &lt;br /&gt;        
      &lt;table&gt;

         &lt;tr&gt;

            &lt;th&gt;{{text.invoiceItemBundleName}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemDescription}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemServicePeriod}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemAmount}}&lt;/td&gt;            
         &lt;/tr&gt;
                     {{#invoice.invoiceItems}}            
         &lt;tr&gt;

            &lt;td&gt;{{description}}&lt;/td&gt;

            &lt;td&gt;{{planName}}&lt;/td&gt;

            &lt;td&gt;{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}&lt;/td&gt;

            &lt;td&gt;{{invoice.currency}} {{amount}}&lt;/td&gt;

         &lt;/tr&gt;
                     {{/invoice.invoiceItems}}            
         &lt;tr&gt;

            &lt;td colspan=4 /&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmount}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.chargedAmount}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmountPaid}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.paidAmount}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceBalance}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.balance}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

      &lt;/table&gt;

   &lt;/body&gt;

&lt;/html&gt;
"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Contains a mustache automatic pay template in HTML format.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing manual pay template</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an empty body.</p>
<h3 id='invoice-retrieve-the-invoice-template-for-the-tenant'>Retrieve the invoice template for the tenant</h3>
<p>Retrieves the automatic pay invoice template previously uploaded for this tenant, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/template</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/template"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_template</span><span class="p">(</span><span class="n">is_manual_pay</span><span class="p">,</span>
                                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_template</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: text/html

Some_HTML_String
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="s2">"
&lt;meta charset=</span><span class="se">\"</span><span class="s2">UTF-8</span><span class="se">\"</span><span class="s2">&gt;

&lt;html&gt;

   &lt;head&gt;

      &lt;style type=</span><span class="se">\"</span><span class="s2">text/css</span><span class="se">\"</span><span class="s2">&gt; th {align=left; width=225px; border-bottom: solid 2px black;} &lt;/style&gt;

   &lt;/head&gt;

   &lt;body&gt;

      &lt;h1&gt;Tenant template: {{text.invoiceTitle}}&lt;/h1&gt;

      &lt;table&gt;

         &lt;tr&gt;

            &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;

            &lt;td width=100px/&gt;                
            &lt;td width=225px/&gt;                
            &lt;td width=225px/&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td /&gt;                
            &lt;td align=right&gt;{{text.invoiceDate}}&lt;/td&gt;

            &lt;td&gt;{{invoice.formattedInvoiceDate}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td /&gt;                
            &lt;td align=right&gt;{{text.invoiceNumber}}&lt;/td&gt;

            &lt;td&gt;{{invoice.invoiceNumber}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyName}}&lt;/td&gt;

            &lt;td&gt;&lt;/td&gt;

            &lt;td align=right&gt;{{text.accountOwnerName}}&lt;/td&gt;

            &lt;td&gt;{{account.name}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyAddress}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td&gt;{{account.email}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyCityProvincePostalCode}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td&gt;{{account.phone}}&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;{{text.companyCountry}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td /&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td&gt;&lt;{{text.companyUrl}}&lt;/td&gt;

            &lt;td /&gt;                
            &lt;td /&gt;                
            &lt;td /&gt;            
         &lt;/tr&gt;

      &lt;/table&gt;
              &lt;br /&gt;        &lt;br /&gt;        &lt;br /&gt;        
      &lt;table&gt;

         &lt;tr&gt;

            &lt;th&gt;{{text.invoiceItemBundleName}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemDescription}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemServicePeriod}}&lt;/td&gt;                
            &lt;th&gt;{{text.invoiceItemAmount}}&lt;/td&gt;            
         &lt;/tr&gt;
                     {{#invoice.invoiceItems}}            
         &lt;tr&gt;

            &lt;td&gt;{{description}}&lt;/td&gt;

            &lt;td&gt;{{planName}}&lt;/td&gt;

            &lt;td&gt;{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}&lt;/td&gt;

            &lt;td&gt;{{invoice.currency}} {{amount}}&lt;/td&gt;

         &lt;/tr&gt;
                     {{/invoice.invoiceItems}}            
         &lt;tr&gt;

            &lt;td colspan=4 /&gt;            
         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmount}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.chargedAmount}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmountPaid}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.paidAmount}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

         &lt;tr&gt;

            &lt;td colspan=2 /&gt;                
            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceBalance}}&lt;/strong&gt;&lt;/td&gt;

            &lt;td align=right&gt;&lt;strong&gt;{{invoice.balance}}&lt;/strong&gt;&lt;/td&gt;

         &lt;/tr&gt;

      &lt;/table&gt;

   &lt;/body&gt;

&lt;/html&gt;
"</span>
</code></pre><pre class="highlight python tab-python"><code><span class="s">"&lt;meta charset=</span><span class="se">\"</span><span class="s">UTF-8</span><span class="se">\"</span><span class="s">&gt;</span><span class="err">

</span><span class="s"> &lt;html&gt;</span><span class="err">

</span><span class="s">   &lt;head&gt;</span><span class="err">

</span><span class="s">      &lt;style type=</span><span class="se">\"</span><span class="s">text/css</span><span class="se">\"</span><span class="s">&gt; th {align=left; width=225px; border-bottom: solid 2px black;} &lt;/style&gt;</span><span class="err">

</span><span class="s">   &lt;/head&gt;</span><span class="err">

</span><span class="s">   &lt;body&gt;</span><span class="err">

</span><span class="s">      &lt;h1&gt;Tenant template: {{text.invoiceTitle}}&lt;/h1&gt;</span><span class="err">

</span><span class="s">      &lt;table&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td rowspan=3 width=350px&gt;Insert image here&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td width=100px/&gt;                </span><span class="err">
</span><span class="s">            &lt;td width=225px/&gt;                </span><span class="err">
</span><span class="s">            &lt;td width=225px/&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;{{text.invoiceDate}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{invoice.formattedInvoiceDate}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;{{text.invoiceNumber}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{invoice.invoiceNumber}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{text.companyName}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td align=right&gt;{{text.accountOwnerName}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{account.name}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{text.companyAddress}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td&gt;{{account.email}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{text.companyCityProvincePostalCode}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td&gt;{{account.phone}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{text.companyCountry}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;&lt;{{text.companyUrl}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;                </span><span class="err">
</span><span class="s">            &lt;td /&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">      &lt;/table&gt;</span><span class="err">
</span><span class="s">              &lt;br /&gt;        &lt;br /&gt;        &lt;br /&gt;        </span><span class="err">
</span><span class="s">      &lt;table&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;th&gt;{{text.invoiceItemBundleName}}&lt;/td&gt;                </span><span class="err">
</span><span class="s">            &lt;th&gt;{{text.invoiceItemDescription}}&lt;/td&gt;                </span><span class="err">
</span><span class="s">            &lt;th&gt;{{text.invoiceItemServicePeriod}}&lt;/td&gt;                </span><span class="err">
</span><span class="s">            &lt;th&gt;{{text.invoiceItemAmount}}&lt;/td&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">
</span><span class="s">                     {{#invoice.invoiceItems}}            </span><span class="err">
</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{description}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{planName}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td&gt;{{invoice.currency}} {{amount}}&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">
</span><span class="s">                     {{/invoice.invoiceItems}}            </span><span class="err">
</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td colspan=4 /&gt;            </span><span class="err">
</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td colspan=2 /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmount}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{invoice.chargedAmount}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td colspan=2 /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceAmountPaid}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{invoice.paidAmount}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">         &lt;tr&gt;</span><span class="err">

</span><span class="s">            &lt;td colspan=2 /&gt;                </span><span class="err">
</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{text.invoiceBalance}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">            &lt;td align=right&gt;&lt;strong&gt;{{invoice.balance}}&lt;/strong&gt;&lt;/td&gt;</span><span class="err">

</span><span class="s">         &lt;/tr&gt;</span><span class="err">

</span><span class="s">      &lt;/table&gt;</span><span class="err">

</span><span class="s">   &lt;/body&gt;</span><span class="err">

</span><span class="s">&lt;/html&gt;</span><span class="err">
</span><span class="s">"</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and the automatic pay template.</p>
<h2 id='invoice-example'>Example</h2>
<p>The translation and templating process may seem a little complex. Here is a simple example for the use of a template with translation.</p>

<ol>
<li><p>To begin, a tenant should upload suitable manual pay and autopay templates reflecting her desired layout for the invoice. If this is not done a default template will be used.</p></li>
<li><p>Suppose the tenant does business with German customers. She then should upload translation tables, perhaps provided by customers, designated for the German locale (de_DE). Tables are needed for both invoice items and catalog items. The invoice items to be translated are the names of the fields on the template, such as invoiceTitle, invoiceAmount, etc. The catalog items to be translated are the names for actual items such as product name and plan name. There can be translation tables for any number of distinct locales.</p></li>
</ol>

<p>Catalog translation example (German):</p>

<p>gold plan = Goldplan
        sports car = Sportwagen</p>

<p>Invoice transaltion example (German):</p>

<p>invoiceTitle = Rechnung
    invoiceNumber = Rechnungsnumber
    invoiceBalance = Rechnungssaldo</p>

<ol>
<li>Each account has a designated locale. When an invoice is retrieved for an account, the appropriate translation tables, if any, are used to translate the invoice.</li>
</ol>
<h2 id='invoice-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='invoice-retrieve-invoice-audit-logs-with-history-by-invoice-id'>Retrieve invoice audit logs with history by invoice id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified invoice. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/d456a9b3-7e48-4f56-b387-1d65a492e75e/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"INVOICE"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"SubscriptionBaseTransition"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"updatedDate"</span>: null,
      <span class="s2">"recordId"</span>: 2121,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"accountId"</span>: <span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span>,
      <span class="s2">"invoiceNumber"</span>: null,
      <span class="s2">"invoiceDate"</span>: <span class="s2">"2019-02-22"</span>,
      <span class="s2">"targetDate"</span>: <span class="s2">"2019-02-22"</span>,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"migrated"</span>: <span class="nb">false</span>,
      <span class="s2">"status"</span>: <span class="s2">"COMMITTED"</span>,
      <span class="s2">"invoiceItems"</span>: <span class="o">[]</span>,
      <span class="s2">"invoicePayments"</span>: <span class="o">[]</span>,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"parentInvoice"</span>: null,
      <span class="s2">"isWrittenOff"</span>: <span class="nb">false</span>,
      <span class="s2">"writtenOff"</span>: <span class="nb">false</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"INVOICES"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"INVOICE_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>

</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h3 id='invoice-retrieve-invoice-item-audit-logs-with-history-by-invoice-item-id'>Retrieve invoice item audit logs with history by invoice item id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified invoice item. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoiceItems/{invoiceItemId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoiceItems/b45ef2ac-e4b7-4e79-89d8-1c2e95838300/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"INVOICE_ITEM"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"b45ef2ac-e4b7-4e79-89d8-1c2e95838300"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"SubscriptionBaseTransition"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T22:38:10.000Z"</span>,
      <span class="s2">"updatedDate"</span>: null,
      <span class="s2">"recordId"</span>: 2698,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"type"</span>: <span class="s2">"RECURRING"</span>,
      <span class="s2">"invoiceId"</span>: <span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span>,
      <span class="s2">"accountId"</span>: <span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span>,
      <span class="s2">"childAccountId"</span>: null,
      <span class="s2">"bundleId"</span>: <span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span>,
      <span class="s2">"subscriptionId"</span>: <span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span>,
      <span class="s2">"description"</span>: <span class="s2">"foo-monthly-evergreen"</span>,
      <span class="s2">"productName"</span>: <span class="s2">"Foo"</span>,
      <span class="s2">"planName"</span>: <span class="s2">"foo-monthly"</span>,
      <span class="s2">"phaseName"</span>: <span class="s2">"foo-monthly-evergreen"</span>,
      <span class="s2">"usageName"</span>: null,
      <span class="s2">"startDate"</span>: <span class="s2">"2019-02-22"</span>,
      <span class="s2">"endDate"</span>: <span class="s2">"2019-03-22"</span>,
      <span class="s2">"amount"</span>: 10,
      <span class="s2">"rate"</span>: 10,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"linkedItemId"</span>: null,
      <span class="s2">"quantity"</span>: null,
      <span class="s2">"itemDetails"</span>: null,
      <span class="s2">"tableName"</span>: <span class="s2">"INVOICE_ITEMS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"INVOICE_ITEM_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h3 id='invoice-retrieve-invoice-payment-audit-logs-with-history-by-invoice-payment-id'>Retrieve invoice payment audit logs with history by invoice payment id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified invoice payment. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{invoicePaymentId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoicePayments/5eedf918-b418-4d14-8dba-51c977a3f700/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T23:23:21.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"INVOICE_PAYMENT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"5eedf918-b418-4d14-8dba-51c977a3f700"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"admin"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"39b3f8a2-d782-41cd-adcd-460b5f560192"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T23:23:21.000Z"</span>,
      <span class="s2">"updatedDate"</span>: null,
      <span class="s2">"recordId"</span>: 219,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"type"</span>: <span class="s2">"ATTEMPT"</span>,
      <span class="s2">"invoiceId"</span>: <span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span>,
      <span class="s2">"paymentId"</span>: null,
      <span class="s2">"paymentDate"</span>: <span class="s2">"2019-02-22T23:23:21.000Z"</span>,
      <span class="s2">"amount"</span>: 10,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"paymentCookieId"</span>: <span class="s2">"4d83dd1b-b053-4a4d-99de-9a9e6e0405af"</span>,
      <span class="s2">"linkedInvoicePaymentId"</span>: null,
      <span class="s2">"success"</span>: <span class="nb">false</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"INVOICE_PAYMENTS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"INVOICE_PAYMENT_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-22T23:23:21.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"INVOICE_PAYMENT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"5eedf918-b418-4d14-8dba-51c977a3f700"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"admin"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"39b3f8a2-d782-41cd-adcd-460b5f560192"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-22T23:23:21.000Z"</span>,
      <span class="s2">"updatedDate"</span>: null,
      <span class="s2">"recordId"</span>: 219,
      <span class="s2">"accountRecordId"</span>: 10,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"type"</span>: <span class="s2">"ATTEMPT"</span>,
      <span class="s2">"invoiceId"</span>: <span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span>,
      <span class="s2">"paymentId"</span>: <span class="s2">"3ac3de91-0d94-463d-8286-8060846f229d"</span>,
      <span class="s2">"paymentDate"</span>: <span class="s2">"2019-02-22T23:23:21.000Z"</span>,
      <span class="s2">"amount"</span>: 10,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"paymentCookieId"</span>: <span class="s2">"4d83dd1b-b053-4a4d-99de-9a9e6e0405af"</span>,
      <span class="s2">"linkedInvoicePaymentId"</span>: null,
      <span class="s2">"success"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"INVOICE_PAYMENTS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"INVOICE_PAYMENT_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>

</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h2 id='invoice-list-and-search'>List and Search</h2>
<p>These endpoints allow you to list all invoices or to search for a specific invoice.</p>
<h3 id='invoice-list-invoices'>List invoices</h3>
<p>Retrieve a list of all invoice records for this tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/pagination"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="n">Invoices</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoices</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span> 
                                         <span class="n">limit</span><span class="o">,</span> 
                                         <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                        <span class="n">limit</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoices</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"amount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"status"</span>: <span class="s2">"COMMITTED"</span>,
    <span class="s2">"creditAdj"</span>: 0,
    <span class="s2">"refundAdj"</span>: 0,
    <span class="s2">"invoiceId"</span>: <span class="s2">"404a98a8-4dd8-4737-a39f-be871e916a8c"</span>,
    <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-19"</span>,
    <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-19"</span>,
    <span class="s2">"invoiceNumber"</span>: <span class="s2">"309"</span>,
    <span class="s2">"balance"</span>: 0,
    <span class="s2">"accountId"</span>: <span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span>,
    <span class="s2">"bundleKeys"</span>: null,
    <span class="s2">"credits"</span>: null,
    <span class="s2">"items"</span>: <span class="o">[]</span>,
    <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
    <span class="s2">"parentInvoiceId"</span>: null,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"amount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"status"</span>: <span class="s2">"COMMITTED"</span>,
    <span class="s2">"creditAdj"</span>: 0,
    <span class="s2">"refundAdj"</span>: 0,
    <span class="s2">"invoiceId"</span>: <span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>,
    <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"invoiceNumber"</span>: <span class="s2">"310"</span>,
    <span class="s2">"balance"</span>: 0,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleKeys"</span>: null,
    <span class="s2">"credits"</span>: null,
    <span class="s2">"items"</span>: <span class="o">[]</span>,
    <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
    <span class="s2">"parentInvoiceId"</span>: null,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"amount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"status"</span>: <span class="s2">"VOID"</span>,
    <span class="s2">"creditAdj"</span>: 0,
    <span class="s2">"refundAdj"</span>: 0,
    <span class="s2">"invoiceId"</span>: <span class="s2">"18e9b3d9-9083-4725-9e8a-27d3a57c2e88"</span>,
    <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"invoiceNumber"</span>: <span class="s2">"311"</span>,
    <span class="s2">"balance"</span>: 0,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleKeys"</span>: null,
    <span class="s2">"credits"</span>: null,
    <span class="s2">"items"</span>: <span class="o">[]</span>,
    <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
    <span class="s2">"parentInvoiceId"</span>: null,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"amount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"status"</span>: <span class="s2">"DRAFT"</span>,
    <span class="s2">"creditAdj"</span>: 0,
    <span class="s2">"refundAdj"</span>: 0,
    <span class="s2">"invoiceId"</span>: <span class="s2">"c6fe2246-62e2-450d-b9fc-a27003771535"</span>,
    <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"invoiceNumber"</span>: <span class="s2">"312"</span>,
    <span class="s2">"balance"</span>: 0,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleKeys"</span>: null,
    <span class="s2">"credits"</span>: null,
    <span class="s2">"items"</span>: <span class="o">[]</span>,
    <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
    <span class="s2">"parentInvoiceId"</span>: null,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"amount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"status"</span>: <span class="s2">"DRAFT"</span>,
    <span class="s2">"creditAdj"</span>: 0,
    <span class="s2">"refundAdj"</span>: 0,
    <span class="s2">"invoiceId"</span>: <span class="s2">"d6c7b6b9-f048-4266-bde6-4c381e69f432"</span>,
    <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"invoiceNumber"</span>: <span class="s2">"313"</span>,
    <span class="s2">"balance"</span>: 0,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleKeys"</span>: null,
    <span class="s2">"credits"</span>: null,
    <span class="s2">"items"</span>: <span class="o">[]</span>,
    <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
    <span class="s2">"parentInvoiceId"</span>: null,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"amount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"status"</span>: <span class="s2">"COMMITTED"</span>,
    <span class="s2">"creditAdj"</span>: 0,
    <span class="s2">"refundAdj"</span>: 0,
    <span class="s2">"invoiceId"</span>: <span class="s2">"71742c60-273f-4c91-8b8c-7555a3554b0a"</span>,
    <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"invoiceNumber"</span>: <span class="s2">"314"</span>,
    <span class="s2">"balance"</span>: 0,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleKeys"</span>: null,
    <span class="s2">"credits"</span>: null,
    <span class="s2">"items"</span>: <span class="o">[]</span>,
    <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
    <span class="s2">"parentInvoiceId"</span>: null,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"amount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"status"</span>: <span class="s2">"COMMITTED"</span>,
    <span class="s2">"creditAdj"</span>: 0,
    <span class="s2">"refundAdj"</span>: 0,
    <span class="s2">"invoiceId"</span>: <span class="s2">"e8032d7d-4354-46f7-82fa-8e635cc61fc5"</span>,
    <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-20"</span>,
    <span class="s2">"invoiceNumber"</span>: <span class="s2">"315"</span>,
    <span class="s2">"balance"</span>: 0,
    <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
    <span class="s2">"bundleKeys"</span>: null,
    <span class="s2">"credits"</span>: null,
    <span class="s2">"items"</span>: <span class="o">[]</span>,
    <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
    <span class="s2">"parentInvoiceId"</span>: null,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="err">@</span><span class="mi">30849</span><span class="n">f9</span>
    <span class="nl">amount:</span> <span class="mf">0.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="mi">1</span><span class="n">a49101b</span><span class="o">-</span><span class="mi">305</span><span class="n">e</span><span class="o">-</span><span class="mi">4</span><span class="n">b4d</span><span class="o">-</span><span class="mi">8403</span><span class="o">-</span><span class="mi">7377596407</span><span class="n">b6</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">1</span>
    <span class="nl">balance:</span> <span class="mf">0.00</span>
    <span class="nl">accountId:</span> <span class="mi">715</span><span class="n">c9695</span><span class="o">-</span><span class="mi">4730</span><span class="o">-</span><span class="mi">4</span><span class="n">fd7</span><span class="o">-</span><span class="mi">80</span><span class="n">db</span><span class="o">-</span><span class="n">d5e38dfc9aa0</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
    <span class="p">{</span>
       <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
       <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
       <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
       <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
       <span class="s2">"targetDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
       <span class="s2">"invoiceNumber"</span><span class="ss">:"1913"</span><span class="p">,</span>
       <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
       <span class="s2">"items"</span><span class="p">:[</span>
          <span class="p">{</span>
             <span class="s2">"invoiceItemId"</span><span class="ss">:"f641ce8a-a874-4e98-ada5-2bd8fdb74945"</span><span class="p">,</span>
             <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
             <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
             <span class="s2">"itemType"</span><span class="ss">:"EXTERNAL_CHARGE"</span><span class="p">,</span>
             <span class="s2">"description"</span><span class="ss">:"My first charge"</span><span class="p">,</span>
             <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
             <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
          <span class="p">}</span>
       <span class="p">],</span>
       <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
       <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'40d6c91b-13f4-4689-8acc-b3455ab956ac'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'14f2bbf3-bd2d-4e32-86eb-b9d32ce4be74'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'1015'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)},</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'7f6894df-d1d6-499b-8cd0-a09da4d3beaf'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'cd98fb3b-25a4-4e1c-8426-0c1080531ad9'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'1016'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all accounts.</p>
<h3 id='invoice-search-invoices'>Search invoices</h3>
<p>Search for an account by a specified search string. If the search string is a number, it is compared to the <code>invoiceNumber</code> attribute. An exact match is required. Otherwise, it is compared to the following attributes: <code>invoiceId</code>, <code>accountId</code>, or <code>currency</code>. The operation returns all account records in which the search string matches all or part of any one of these attributes.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/search/404a98a8-4dd8-4737-a39f-be871e916a8c"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"1a49101b-305e-4b4d-8403-7377596407b6"</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">searchInvoices</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                          <span class="n">offset</span><span class="o">,</span>
                          <span class="n">limit</span><span class="o">,</span> 
                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'COMMITTED'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                      <span class="n">offset</span><span class="p">,</span>
                                      <span class="n">limit</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'USD'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">search_invoices</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"amount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"status"</span>: <span class="s2">"COMMITTED"</span>,
    <span class="s2">"creditAdj"</span>: 0,
    <span class="s2">"refundAdj"</span>: 0,
    <span class="s2">"invoiceId"</span>: <span class="s2">"404a98a8-4dd8-4737-a39f-be871e916a8c"</span>,
    <span class="s2">"invoiceDate"</span>: <span class="s2">"2018-07-19"</span>,
    <span class="s2">"targetDate"</span>: <span class="s2">"2018-07-19"</span>,
    <span class="s2">"invoiceNumber"</span>: <span class="s2">"309"</span>,
    <span class="s2">"balance"</span>: 0,
    <span class="s2">"accountId"</span>: <span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span>,
    <span class="s2">"bundleKeys"</span>: null,
    <span class="s2">"credits"</span>: null,
    <span class="s2">"items"</span>: <span class="o">[]</span>,
    <span class="s2">"isParentInvoice"</span>: <span class="nb">false</span>,
    <span class="s2">"parentInvoiceId"</span>: null,
    <span class="s2">"parentAccountId"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Invoice</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Invoice</span><span class="err">@</span><span class="mi">30849</span><span class="n">f9</span>
    <span class="nl">amount:</span> <span class="mf">0.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">status:</span> <span class="n">COMMITTED</span>
    <span class="nl">creditAdj:</span> <span class="mf">0.00</span>
    <span class="nl">refundAdj:</span> <span class="mf">0.00</span>
    <span class="nl">invoiceId:</span> <span class="mi">1</span><span class="n">a49101b</span><span class="o">-</span><span class="mi">305</span><span class="n">e</span><span class="o">-</span><span class="mi">4</span><span class="n">b4d</span><span class="o">-</span><span class="mi">8403</span><span class="o">-</span><span class="mi">7377596407</span><span class="n">b6</span>
    <span class="nl">invoiceDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">targetDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">1</span>
    <span class="nl">balance:</span> <span class="mf">0.00</span>
    <span class="nl">accountId:</span> <span class="mi">715</span><span class="n">c9695</span><span class="o">-</span><span class="mi">4730</span><span class="o">-</span><span class="mi">4</span><span class="n">fd7</span><span class="o">-</span><span class="mi">80</span><span class="n">db</span><span class="o">-</span><span class="n">d5e38dfc9aa0</span>
    <span class="nl">bundleKeys:</span> <span class="kc">null</span>
    <span class="nl">credits:</span> <span class="kc">null</span>
    <span class="nl">items:</span> <span class="o">[]</span>
    <span class="nl">isParentInvoice:</span> <span class="kc">false</span>
    <span class="nl">parentInvoiceId:</span> <span class="kc">null</span>
    <span class="nl">parentAccountId:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
    <span class="p">{</span>
       <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
       <span class="s2">"status"</span><span class="ss">:"COMMITTED"</span><span class="p">,</span>
       <span class="s2">"creditAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"refundAdj"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
       <span class="s2">"invoiceDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
       <span class="s2">"targetDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
       <span class="s2">"invoiceNumber"</span><span class="ss">:"1913"</span><span class="p">,</span>
       <span class="s2">"balance"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
       <span class="s2">"items"</span><span class="p">:[</span>
          <span class="p">{</span>
             <span class="s2">"invoiceItemId"</span><span class="ss">:"f641ce8a-a874-4e98-ada5-2bd8fdb74945"</span><span class="p">,</span>
             <span class="s2">"invoiceId"</span><span class="ss">:"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span><span class="p">,</span>
             <span class="s2">"accountId"</span><span class="ss">:"be19b229-c076-47aa-aa4d-f53bec505dc7"</span><span class="p">,</span>
             <span class="s2">"itemType"</span><span class="ss">:"EXTERNAL_CHARGE"</span><span class="p">,</span>
             <span class="s2">"description"</span><span class="ss">:"My first charge"</span><span class="p">,</span>
             <span class="s2">"startDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
             <span class="s2">"amount"</span><span class="p">:</span><span class="mi">7</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
          <span class="p">}</span>
       <span class="p">],</span>
       <span class="s2">"isParentInvoice"</span><span class="ss">:false</span><span class="p">,</span>
       <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'554f89d7-c9bd-4e48-a28d-5d2d88f0ea19'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'5ffe67ba-322a-407c-8051-0a5839774a1c'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'1017'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)},</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'58e8ffe1-d01e-4716-bf46-c76b881b6574'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'balance'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'bundle_keys'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'credit_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credits'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'invoice_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'4a836b76-447c-4d5c-9dc7-96f1c9b0cf9c'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'1018'</span><span class="p">,</span>
 <span class="s">'is_parent_invoice'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
 <span class="s">'items'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'parent_account_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'parent_invoice_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'refund_adj'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'status'</span><span class="p">:</span> <span class="s">'COMMITTED'</span><span class="p">,</span>
 <span class="s">'target_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>What you want to find</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>none</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>none</td>
<td>100</td>
<td>Maximum number of items to return on this page</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a list of all invoices matched with the search key entered.</p>
<h1 id='credit'>Credit</h1><h2 id='credit-credit-resource'>Credit Resource</h2>
<p>The <code>Credit</code> resource represents the credits created on behalf of the customer <code>Account</code>. Credits are tracked inside invoices, as a specical kind of
invoice item. The credits are visible at the level of the <code>Account</code>, i.e account credit, and those will automatically be consumed by the system on
subsequent invoices to bring the balance to zero -- or reduce the balance if there is not enough credit to pay the full amount.</p>

<p>See section <a href="#invoice">Invoice Resource</a> for the description of the <code>InvoiceItem</code> attributes.</p>
<h2 id='credit-credit'>Credit</h2>
<p>Basic endpoints to create and retrieve credit invoice items</p>
<h3 id='credit-create-credits'>Create credits</h3>
<p>Create one or more credits for a specified account. These credits will appear as <code>invoiceItem</code>s. They may be added to an existing DRAFT invoice, or they may result in the creation of a new invoice. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/credits</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[{"amount": 50.0, "currency": "USD", "accountId": "1f979085-1765-471b-878a-5f640db4d831", "description": "example"}]'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/credits?autoCommit=true"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CreditApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CreditApi</span> <span class="n">creditApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">Credit</span> <span class="n">credit</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">credit</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">credit</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">credit</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"description"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">autoCommit</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">InvoiceItems</span> <span class="n">credits</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItems</span><span class="o">();</span>
<span class="n">credits</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">credit</span><span class="o">);</span>
<span class="n">InvoiceItems</span> <span class="n">createdCredits</span> <span class="o">=</span> <span class="n">creditApi</span><span class="o">.</span><span class="na">createCredits</span><span class="o">(</span><span class="n">credits</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">credit_item</span>                 <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">credit_item</span><span class="p">.</span><span class="nf">account_id</span>      <span class="o">=</span> <span class="s1">'da3769a8-58c4-4dc0-b4e8-7b534e349624'</span>
<span class="n">credit_item</span><span class="p">.</span><span class="nf">amount</span>          <span class="o">=</span> <span class="mi">50</span><span class="o">.</span><span class="mi">0</span>
<span class="n">credit_item</span><span class="p">.</span><span class="nf">currency</span>        <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">credit_item</span><span class="p">.</span><span class="nf">description</span>     <span class="o">=</span> <span class="s1">'description'</span>

<span class="n">auto_commit</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">credit_item</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">auto_commit</span><span class="p">,</span> 
                   <span class="n">user</span><span class="p">,</span>
                   <span class="n">reason</span><span class="p">,</span>
                   <span class="n">comment</span><span class="p">,</span>
                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">creditApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CreditApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Credit</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span> 
              <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> 
              <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span> 
              <span class="n">description</span><span class="o">=</span><span class="s">'example'</span><span class="p">)</span>

<span class="n">creditApi</span><span class="o">.</span><span class="n">create_credits</span><span class="p">([</span><span class="n">body</span><span class="p">],</span> <span class="n">created_by</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>    &lt; HTTP/1.1 200 OK
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"invoiceItemId"</span>: <span class="s2">"2a7746a3-abad-42d9-9f54-fe50c0b18802"</span>,
    <span class="s2">"invoiceId"</span>: <span class="s2">"e3caf986-8909-4677-afd4-ba03deeae8f0"</span>,
    <span class="s2">"linkedInvoiceItemId"</span>: null,
    <span class="s2">"accountId"</span>: <span class="s2">"1f979085-1765-471b-878a-5f640db4d831"</span>,
    <span class="s2">"childAccountId"</span>: null,
    <span class="s2">"bundleId"</span>: null,
    <span class="s2">"subscriptionId"</span>: null,
    <span class="s2">"productName"</span>: null,
    <span class="s2">"planName"</span>: null,
    <span class="s2">"phaseName"</span>: null,
    <span class="s2">"usageName"</span>: null,
    <span class="s2">"prettyProductName"</span>: null,
    <span class="s2">"prettyPlanName"</span>: null,
    <span class="s2">"prettyPhaseName"</span>: null,
    <span class="s2">"prettyUsageName"</span>: null,
    <span class="s2">"itemType"</span>: <span class="s2">"CREDIT_ADJ"</span>,
    <span class="s2">"description"</span>: <span class="s2">"example"</span>,
    <span class="s2">"startDate"</span>: <span class="s2">"2020-01-17"</span>,
    <span class="s2">"endDate"</span>: <span class="s2">"2020-01-17"</span>,
    <span class="s2">"amount"</span>: 50,
    <span class="s2">"rate"</span>: null,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"quantity"</span>: null,
    <span class="s2">"itemDetails"</span>: null,
    <span class="s2">"catalogEffectiveDate"</span>: null,
    <span class="s2">"childItems"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Credit</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Credit</span><span class="nd">@a32400a5</span>
    <span class="nl">creditId:</span> <span class="n">d2edf4c0</span><span class="o">-</span><span class="mi">9929</span><span class="o">-</span><span class="mi">4</span><span class="n">e2f</span><span class="o">-</span><span class="n">b3a9</span><span class="o">-</span><span class="n">feb9bd9d60ba</span>
    <span class="nl">creditAmount:</span> <span class="mf">1.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">invoiceId:</span> <span class="mi">41</span><span class="n">c87837</span><span class="o">-</span><span class="n">ec1d</span><span class="o">-</span><span class="mi">4095</span><span class="o">-</span><span class="mi">8</span><span class="n">d20</span><span class="o">-</span><span class="n">a56e6237cb0c</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">3</span>
    <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>
    <span class="nl">accountId:</span> <span class="mi">7</span><span class="n">cf30d01</span><span class="o">-</span><span class="mi">84</span><span class="n">f1</span><span class="o">-</span><span class="mi">4</span><span class="n">d9d</span><span class="o">-</span><span class="mi">94</span><span class="n">c2</span><span class="o">-</span><span class="mi">3</span><span class="n">a3277374960</span>
    <span class="nl">description:</span> <span class="n">description</span>
    <span class="nl">itemDetails:</span> <span class="n">itemDetails</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"creditId"</span><span class="ss">:"fd5669a8-68c1-8dl0-m4e8-8y535e349324"</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"c57e1a2b-1a6b-4053-be2c-cc5fad2b5cbf"</span><span class="p">,</span>
   <span class="s2">"invoiceNumber"</span><span class="ss">:"1285"</span><span class="p">,</span>
   <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"da3769a8-58c4-4dc0-b4e8-7b534e349624"</span><span class="p">,</span>
   <span class="s2">"description"</span><span class="ss">:"description"</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of one or more invoiceItem objects. Each object requires at least the following attributes: accountId and amount. If an invoiceId is given, the item will be added to the specified invoice. This invoice must be in DRAFT status or an error will occur.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>autoCommit</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, the resulting invoice will be <code>COMMITTED</code>.</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of invoiceItem resource objects representing the credit(s).</p>
<h3 id='credit-retrieve-a-credit-by-id'>Retrieve a credit by id</h3>
<p>Retrieve an invoiceItem representing a credit given the invoiceItemId.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/credits/{invoiceItemId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/credits/c8bfa9d1-76e5-4a42-92d0-b106c0902c16"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CreditApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CreditApi</span> <span class="n">creditApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">creditId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d2edf4c0-9929-4e2f-b3a9-feb9bd9d60ba"</span><span class="o">);</span>

<span class="n">Credit</span> <span class="n">result</span> <span class="o">=</span> <span class="n">creditApi</span><span class="o">.</span><span class="na">getCredit</span><span class="o">(</span><span class="n">creditId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">credit_id</span> <span class="o">=</span> <span class="s1">'fd5669a8-68c1-8dl0-m4e8-8y535e349324'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">credit_id</span> <span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">creditApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CreditApi</span><span class="p">()</span>

<span class="n">creditApi</span><span class="o">.</span><span class="n">get_credit</span><span class="p">(</span><span class="n">credit_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"invoiceItemId"</span>: <span class="s2">"c8bfa9d1-76e5-4a42-92d0-b106c0902c16"</span>,
  <span class="s2">"amount"</span>: 50,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"invoiceId"</span>: <span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>,
  <span class="s2">"invoiceNumber"</span>: <span class="s2">"310"</span>,
  <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-20"</span>,
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"description"</span>: <span class="s2">"example"</span>,
  <span class="s2">"itemDetails"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Credit</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoiceItem</span><span class="nd">@a32400a5</span>
    <span class="nl">invoiceItemId:</span> <span class="n">d2edf4c0</span><span class="o">-</span><span class="mi">9929</span><span class="o">-</span><span class="mi">4</span><span class="n">e2f</span><span class="o">-</span><span class="n">b3a9</span><span class="o">-</span><span class="n">feb9bd9d60ba</span>
    <span class="nl">amount:</span> <span class="mf">1.00</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">invoiceId:</span> <span class="mi">41</span><span class="n">c87837</span><span class="o">-</span><span class="n">ec1d</span><span class="o">-</span><span class="mi">4095</span><span class="o">-</span><span class="mi">8</span><span class="n">d20</span><span class="o">-</span><span class="n">a56e6237cb0c</span>
    <span class="nl">invoiceNumber:</span> <span class="mi">3</span>
    <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span>
    <span class="nl">accountId:</span> <span class="mi">7</span><span class="n">cf30d01</span><span class="o">-</span><span class="mi">84</span><span class="n">f1</span><span class="o">-</span><span class="mi">4</span><span class="n">d9d</span><span class="o">-</span><span class="mi">94</span><span class="n">c2</span><span class="o">-</span><span class="mi">3</span><span class="n">a3277374960</span>
    <span class="nl">description:</span> <span class="n">description</span>
    <span class="nl">itemDetails:</span> <span class="n">itemDetails</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"invoiceItemId"</span><span class="ss">:"fd5669a8-68c1-8dl0-m4e8-8y535e349324"</span>
   <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"invoiceId"</span><span class="ss">:"c57e1a2b-1a6b-4053-be2c-cc5fad2b5cbf"</span><span class="p">,</span>
   <span class="s2">"invoiceNumber"</span><span class="ss">:"1285"</span><span class="p">,</span>
   <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"da3769a8-58c4-4dc0-b4e8-7b534e349624"</span><span class="p">,</span>
   <span class="s2">"description"</span><span class="ss">:"description"</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'invoice_item_id'</span> <span class="p">:</span> <span class="s">'fd5669a8-68c1-8dl0-m4e8-8y535e349328'</span>
 <span class="s">'account_id'</span><span class="p">:</span> <span class="s">'da3769a8-58c4-4dc0-b4e8-7b534e349624'</span><span class="p">,</span>
 <span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'description'</span><span class="p">:</span> <span class="s">'example'</span><span class="p">,</span>
 <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),,</span>
 <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'c57e1a2b-1a6b-4053-be2c-cc5fad2b5cbf'</span><span class="p">,</span>
 <span class="s">'invoice_number'</span><span class="p">:</span> <span class="s">'1285'</span>
<span class="p">}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an invoiceItem resource object with itemType CREDIT_ADJ representing a credit.</p>
<h1 id='payment'>Payment</h1>
<p>A Payment in Kill Bill is an amount paid or payable on a specific account due to an invoice or independent of any invoice.</p>

<p>A Payment may be associated with a series of <code>PaymentTransaction</code>s, such as authorization, payment attempt, chargeback, etc. each of which may succeed or fail.</p>

<p>A Payment Transaction takes place using a <code>PaymentMethod</code> such as a credit card. The transaction is processed by a plugin, which provides access to the appropriate payment gateway. The payment gateway processes the transaction, using the Payment Method provided in the request.</p>

<p>A Payment Attempt is an attempt to perform a Payment Transaction. A Payment Attempt may succeed or fail, and a Payment Transaction may have more than one Payment Attempt. In some cases a Payment Transaction may be in a PENDING state waiting for completion of its processing by the plugin.</p>

<p>Please refer to the <a href="http://docs.killbill.io/latest/userguide_payment.html">payment manual</a> for more details.</p>
<h2 id='payment-payment-resource'>Payment Resource</h2>
<p>A Payment is represented by a <code>Payment</code> resource object. The attributes for the Payment resource are as follows:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>paymentId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>paymentNumber</strong></td>
<td>number</td>
<td>user or system</td>
<td>User&#39;s ID number for the payment</td>
</tr>
<tr>
<td><strong>paymentExternalKey</strong></td>
<td>string</td>
<td>user or system</td>
<td>Optional external key</td>
</tr>
<tr>
<td><strong>authAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount authorized (see below)</td>
</tr>
<tr>
<td><strong>capturedAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount captured (see below)</td>
</tr>
<tr>
<td><strong>purchasedAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount purchased (see below)</td>
</tr>
<tr>
<td><strong>refundedAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount refunded (see below)</td>
</tr>
<tr>
<td><strong>creditedAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount credited (see below)</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment method</td>
</tr>
<tr>
<td><strong>transactions</strong></td>
<td>list</td>
<td>system</td>
<td><strong>PaymentTransactions</strong> associated with this payment (see below)</td>
</tr>
<tr>
<td><strong>paymentAttempts</strong></td>
<td>list</td>
<td>system</td>
<td>Payment retries (see below)</td>
</tr>
</tbody></table>

<ul>
<li><p><strong>authAmount</strong>: Total amount that is authorized for this payment. Often this is the amount authorized by a single AUTHORIZATION Payment Transaction.</p></li>
<li><p><strong>capturedAmount</strong>: Total amount that has been captured (that is, successfully paid).</p></li>
<li><p><strong>purchasedAmount</strong>: Total amount that has been purchased. A PURCHASE transaction combines authorization and capture.</p></li>
<li><p><strong>refundedAmount</strong>: Total amount that has been refunded.</p></li>
<li><p><strong>creditedAmount</strong>: Total amount that has been credited.</p></li>
<li><p><strong>paymentAttempts</strong>: Number of payment attempts; this is only effective when the system has been configured to retry failed transactions.</p></li>
</ul>

<p>The attributes for a <code>PaymentTransaction</code> are described <a href="#payment-transaction-payments-transactions">here</a>.</p>
<h2 id='payment-payments'>Payments</h2>
<p>These endpoints initiate transactions on an existing Payment. To begin a new Payment, see <a href="https://killbill.github.io/slate/?shell#account-trigger-a-payment-authorization-purchase-or-credit">Trigger a Payment</a> in the Account API. </p>
<h3 id='payment-capture-an-existing-authorization-using-paymentid'>Capture an existing authorization [using paymentId]</h3>
<p>Attempts to capture a payment amount based on a prior authorization. The Payment is identified by its <code>paymentId</code> provided as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "amount": 5
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"33eae7eb-0ad4-45d6-a12a-940e0b460be4"</span><span class="o">);</span>

<span class="n">PaymentTransaction</span> <span class="n">captureTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"d86ecaaa-10ad-4b00-afa8-e469dd3d4bb3"</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setTransactionExternalKey</span><span class="o">(</span><span class="s">"9cc6ebab-9a92-44f1-a0dc-e111aa7c368d"</span><span class="o">);</span>

<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">capturedPayment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">captureAuthorization</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                          <span class="n">captureTransaction</span><span class="o">,</span> 
                                                          <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                          <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>            <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span> <span class="o">=</span> <span class="s2">"b2a187b8-0028-4de8-b349-0ebe4e714a5a"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>     <span class="o">=</span> <span class="s2">"483.22"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">currency</span>   <span class="o">=</span> <span class="s2">"BTC"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">capture</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'b2a187b8-0028-4de8-b349-0ebe4e714a5a'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">,</span> 
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> 
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">capture_authorization</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                 <span class="n">body</span><span class="p">,</span>
                                 <span class="n">created_by</span><span class="p">,</span>
                                 <span class="n">api_key</span><span class="p">,</span>
                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="nd">@e53497ae</span>
    <span class="nl">accountId:</span> <span class="n">c810059c</span><span class="o">-</span><span class="n">e90d</span><span class="o">-</span><span class="mi">4</span><span class="n">cad</span><span class="o">-</span><span class="n">ba19</span><span class="o">-</span><span class="mi">74</span><span class="n">acefd783b8</span>
    <span class="nl">paymentId:</span> <span class="mi">33</span><span class="n">eae7eb</span><span class="o">-</span><span class="mi">0</span><span class="n">ad4</span><span class="o">-</span><span class="mi">45</span><span class="n">d6</span><span class="o">-</span><span class="n">a12a</span><span class="o">-</span><span class="mi">940</span><span class="n">e0b460be4</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="n">d86ecaaa</span><span class="o">-</span><span class="mi">10</span><span class="n">ad</span><span class="o">-</span><span class="mi">4</span><span class="n">b00</span><span class="o">-</span><span class="n">afa8</span><span class="o">-</span><span class="n">e469dd3d4bb3</span>
    <span class="nl">authAmount:</span> <span class="mf">10.00</span>
    <span class="nl">capturedAmount:</span> <span class="mf">1.00</span>
    <span class="nl">purchasedAmount:</span> <span class="mi">0</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">30456139</span><span class="o">-</span><span class="mi">9</span><span class="n">a6f</span><span class="o">-</span><span class="mi">4</span><span class="n">abc</span><span class="o">-</span><span class="n">aa21</span><span class="o">-</span><span class="mi">08</span><span class="n">ce115a150f</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">70</span><span class="n">dc2d6</span>
        <span class="nl">transactionId:</span> <span class="mi">6</span><span class="n">c723fdd</span><span class="o">-</span><span class="mi">1</span><span class="n">cd8</span><span class="o">-</span><span class="mi">4515</span><span class="o">-</span><span class="mi">8228</span><span class="o">-</span><span class="mi">6</span><span class="n">b990af63c5d</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">9</span><span class="n">cc6ebab</span><span class="o">-</span><span class="mi">9</span><span class="n">a92</span><span class="o">-</span><span class="mi">44</span><span class="n">f1</span><span class="o">-</span><span class="n">a0dc</span><span class="o">-</span><span class="n">e111aa7c368d</span>
        <span class="nl">paymentId:</span> <span class="mi">33</span><span class="n">eae7eb</span><span class="o">-</span><span class="mi">0</span><span class="n">ad4</span><span class="o">-</span><span class="mi">45</span><span class="n">d6</span><span class="o">-</span><span class="n">a12a</span><span class="o">-</span><span class="mi">940</span><span class="n">e0b460be4</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">d86ecaaa</span><span class="o">-</span><span class="mi">10</span><span class="n">ad</span><span class="o">-</span><span class="mi">4</span><span class="n">b00</span><span class="o">-</span><span class="n">afa8</span><span class="o">-</span><span class="n">e469dd3d4bb3</span>
        <span class="nl">transactionType:</span> <span class="n">AUTHORIZE</span>
        <span class="nl">amount:</span> <span class="mf">10.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">09.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">10.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@af3af9a3</span>
        <span class="nl">transactionId:</span> <span class="mi">518</span><span class="n">c64b6</span><span class="o">-</span><span class="n">e863</span><span class="o">-</span><span class="mi">494</span><span class="n">b</span><span class="o">-</span><span class="n">ad74</span><span class="o">-</span><span class="n">ba4fd2c0e768</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">cdfd3aa2</span><span class="o">-</span><span class="mi">362</span><span class="n">e</span><span class="o">-</span><span class="mi">4</span><span class="n">cd1</span><span class="o">-</span><span class="mi">927</span><span class="n">e</span><span class="o">-</span><span class="n">c4ca517a432a</span>
        <span class="nl">paymentId:</span> <span class="mi">33</span><span class="n">eae7eb</span><span class="o">-</span><span class="mi">0</span><span class="n">ad4</span><span class="o">-</span><span class="mi">45</span><span class="n">d6</span><span class="o">-</span><span class="n">a12a</span><span class="o">-</span><span class="mi">940</span><span class="n">e0b460be4</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">d86ecaaa</span><span class="o">-</span><span class="mi">10</span><span class="n">ad</span><span class="o">-</span><span class="mi">4</span><span class="n">b00</span><span class="o">-</span><span class="n">afa8</span><span class="o">-</span><span class="n">e469dd3d4bb3</span>
        <span class="nl">transactionType:</span> <span class="n">CAPTURE</span>
        <span class="nl">amount:</span> <span class="mf">1.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">26.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">1.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"fc82dba5-69e0-492c-be50-bc7e1642f987"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"b2a187b8-0028-4de8-b349-0ebe4e714a5a"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"63"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"payment1-323475"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">240922</span><span class="o">.</span><span class="mi">1504832</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"395cfcd1-7a7d-40a6-bc5d-f722833072d2"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"41c95fbc-c9a2-4981-a7ef-7f16f20055ae"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"payment1-323475-auth1"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"b2a187b8-0028-4de8-b349-0ebe4e714a5a"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"payment1-323475"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"AUTHORIZE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">240922</span><span class="o">.</span><span class="mi">1504832</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">240922</span><span class="o">.</span><span class="mi">1504832</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"a6afaec2-4e6f-4e4c-af94-9a03c39c6032"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"payment1-323475-capture1"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"b2a187b8-0028-4de8-b349-0ebe4e714a5a"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"payment1-323475"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CAPTURE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A <code>PaymentTransaction</code> object containing, as a minimum, the <code>amount</code> to be captured.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A PaymentTransaction of type CAPTURE is created.</p>
<h3 id='payment-capture-an-existing-authorization-using-paymentexternalkey'>Capture an existing authorization [using paymentExternalKey]</h3>
<p>Requests a payment amount based on a prior authorization. The payment is identified by its external key given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "paymentExternalKey",
          "amount": 1
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments'</span>     
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">PaymentTransaction</span> <span class="n">captureTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"8e0c507a-05f9-4572-a57d-3f742cdc040d"</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setTransactionExternalKey</span><span class="o">(</span><span class="s">"9b4dbbe7-749d-4c96-a2e7-57b8bff3bf05"</span><span class="o">);</span>

<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">capturedPayment2</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">captureAuthorizationByExternalKey</span><span class="o">(</span><span class="n">captureTransaction</span><span class="o">,</span> 
                                                                        <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                                        <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                          <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>                   <span class="o">=</span> <span class="s2">"483.22"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">currency</span>                 <span class="o">=</span> <span class="s2">"BTC"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_external_key</span> <span class="o">=</span> <span class="s2">"payment1-323475"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">capture</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">capture_authorization_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> 
                                                 <span class="n">created_by</span><span class="p">,</span> 
                                                 <span class="n">api_key</span><span class="p">,</span> 
                                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="err">@</span><span class="mi">1</span><span class="n">fcfe41c</span>
    <span class="nl">accountId:</span> <span class="mo">017</span><span class="mi">92680</span><span class="o">-</span><span class="mi">3</span><span class="n">c3c</span><span class="o">-</span><span class="mi">4</span><span class="n">d4f</span><span class="o">-</span><span class="mi">9</span><span class="n">ac4</span><span class="o">-</span><span class="mi">51</span><span class="n">b82c1f76e8</span>
    <span class="nl">paymentId:</span> <span class="n">f0f6129d</span><span class="o">-</span><span class="n">f236</span><span class="o">-</span><span class="mi">4</span><span class="n">d6c</span><span class="o">-</span><span class="mi">93</span><span class="n">b6</span><span class="o">-</span><span class="mi">63</span><span class="n">c8fcf7b7a5</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">8</span><span class="n">e0c507a</span><span class="o">-</span><span class="mo">05</span><span class="n">f9</span><span class="o">-</span><span class="mi">4572</span><span class="o">-</span><span class="n">a57d</span><span class="o">-</span><span class="mi">3</span><span class="n">f742cdc040d</span>
    <span class="nl">authAmount:</span> <span class="mf">10.00</span>
    <span class="nl">capturedAmount:</span> <span class="mf">2.00</span>
    <span class="nl">purchasedAmount:</span> <span class="mi">0</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="n">bd24759f</span><span class="o">-</span><span class="n">b403</span><span class="o">-</span><span class="mi">443</span><span class="n">a</span><span class="o">-</span><span class="n">bc5b</span><span class="o">-</span><span class="mi">1</span><span class="n">fe6a18fa2f3</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@e42a70ce</span>
        <span class="nl">transactionId:</span> <span class="n">fddec163</span><span class="o">-</span><span class="mi">6</span><span class="n">fb7</span><span class="o">-</span><span class="mi">42</span><span class="n">f5</span><span class="o">-</span><span class="mi">9</span><span class="n">b8f</span><span class="o">-</span><span class="mi">20</span><span class="n">ae7b63dbf4</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">27427503</span><span class="o">-</span><span class="mi">7</span><span class="n">be2</span><span class="o">-</span><span class="mi">4</span><span class="n">e61</span><span class="o">-</span><span class="n">b188</span><span class="o">-</span><span class="mi">08480</span><span class="n">f72565f</span>
        <span class="nl">paymentId:</span> <span class="n">f0f6129d</span><span class="o">-</span><span class="n">f236</span><span class="o">-</span><span class="mi">4</span><span class="n">d6c</span><span class="o">-</span><span class="mi">93</span><span class="n">b6</span><span class="o">-</span><span class="mi">63</span><span class="n">c8fcf7b7a5</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">8</span><span class="n">e0c507a</span><span class="o">-</span><span class="mo">05</span><span class="n">f9</span><span class="o">-</span><span class="mi">4572</span><span class="o">-</span><span class="n">a57d</span><span class="o">-</span><span class="mi">3</span><span class="n">f742cdc040d</span>
        <span class="nl">transactionType:</span> <span class="n">AUTHORIZE</span>
        <span class="nl">amount:</span> <span class="mf">10.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">07.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">10.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">2</span><span class="n">dacb8e7</span>
        <span class="nl">transactionId:</span> <span class="mi">702</span><span class="n">f6edf</span><span class="o">-</span><span class="n">fb9e</span><span class="o">-</span><span class="mi">4</span><span class="n">f91</span><span class="o">-</span><span class="mi">9</span><span class="n">b6d</span><span class="o">-</span><span class="mi">0</span><span class="n">b851a05ea6d</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">9</span><span class="n">b4dbbe7</span><span class="o">-</span><span class="mi">749</span><span class="n">d</span><span class="o">-</span><span class="mi">4</span><span class="n">c96</span><span class="o">-</span><span class="n">a2e7</span><span class="o">-</span><span class="mi">57</span><span class="n">b8bff3bf05</span>
        <span class="nl">paymentId:</span> <span class="n">f0f6129d</span><span class="o">-</span><span class="n">f236</span><span class="o">-</span><span class="mi">4</span><span class="n">d6c</span><span class="o">-</span><span class="mi">93</span><span class="n">b6</span><span class="o">-</span><span class="mi">63</span><span class="n">c8fcf7b7a5</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">8</span><span class="n">e0c507a</span><span class="o">-</span><span class="mo">05</span><span class="n">f9</span><span class="o">-</span><span class="mi">4572</span><span class="o">-</span><span class="n">a57d</span><span class="o">-</span><span class="mi">3</span><span class="n">f742cdc040d</span>
        <span class="nl">transactionType:</span> <span class="n">CAPTURE</span>
        <span class="nl">amount:</span> <span class="mf">1.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">08.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">1.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">867</span><span class="n">e1b5f</span>
        <span class="nl">transactionId:</span> <span class="n">f1b753c7</span><span class="o">-</span><span class="mi">76</span><span class="n">aa</span><span class="o">-</span><span class="mi">4584</span><span class="o">-</span><span class="mi">8</span><span class="n">a91</span><span class="o">-</span><span class="mi">6</span><span class="n">c2990dd9bda</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">5</span><span class="n">c2dc6ae</span><span class="o">-</span><span class="n">ae71</span><span class="o">-</span><span class="mi">4882</span><span class="o">-</span><span class="n">ab57</span><span class="o">-</span><span class="n">b29d47a54cc0</span>
        <span class="nl">paymentId:</span> <span class="n">f0f6129d</span><span class="o">-</span><span class="n">f236</span><span class="o">-</span><span class="mi">4</span><span class="n">d6c</span><span class="o">-</span><span class="mi">93</span><span class="n">b6</span><span class="o">-</span><span class="mi">63</span><span class="n">c8fcf7b7a5</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">8</span><span class="n">e0c507a</span><span class="o">-</span><span class="mo">05</span><span class="n">f9</span><span class="o">-</span><span class="mi">4572</span><span class="o">-</span><span class="n">a57d</span><span class="o">-</span><span class="mi">3</span><span class="n">f742cdc040d</span>
        <span class="nl">transactionType:</span> <span class="n">CAPTURE</span>
        <span class="nl">amount:</span> <span class="mf">1.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">17.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">1.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"fc82dba5-69e0-492c-be50-bc7e1642f987"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"b2a187b8-0028-4de8-b349-0ebe4e714a5a"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"63"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"payment1-323475"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"395cfcd1-7a7d-40a6-bc5d-f722833072d2"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"41c95fbc-c9a2-4981-a7ef-7f16f20055ae"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"payment1-323475-auth1"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"b2a187b8-0028-4de8-b349-0ebe4e714a5a"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"payment1-323475"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"AUTHORIZE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"a6afaec2-4e6f-4e4c-af94-9a03c39c6032"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"payment1-323475-capture1"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"b2a187b8-0028-4de8-b349-0ebe4e714a5a"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"payment1-323475"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CAPTURE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">483</span><span class="o">.</span><span class="mi">22</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"BTC"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A <code>PaymentTransaction</code> object containing, as a minimum, the <code>paymentExternalKey</code> and the<code>amount</code> to be captured.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A paymentTransaction of type CAPTURE is created.</p>
<h3 id='payment-retrieve-a-payment-using-paymentid'>Retrieve a payment [using paymentId]</h3>
<p>Retrieves a <code>Payment</code> object based on its <code>paymentId</code> given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will reflect payment attempts</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                        <span class="n">withPluginInfo</span><span class="o">,</span> 
                                        <span class="n">withAttempts</span><span class="o">,</span> 
                                        <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                        <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s2">"12c70604-cede-4df3-a321-38be4d176e9a"</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_attempts</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Payment</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                          <span class="n">with_plugin_info</span><span class="p">,</span> 
                                          <span class="n">with_attempts</span><span class="p">,</span> 
                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'ce88ae5b-7ec0-4e14-9ea1-fffe4411278e'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">{</span>
  <span class="s2">"accountId"</span>: <span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
  <span class="s2">"paymentId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
  <span class="s2">"paymentNumber"</span>: <span class="s2">"14"</span>,
  <span class="s2">"paymentExternalKey"</span>: <span class="s2">"paymentExternalKey"</span>,
  <span class="s2">"authAmount"</span>: 1,
  <span class="s2">"capturedAmount"</span>: 6,
  <span class="s2">"purchasedAmount"</span>: 0,
  <span class="s2">"refundedAmount"</span>: 0,
  <span class="s2">"creditedAmount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"paymentMethodId"</span>: <span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
  <span class="s2">"transactions"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"transactionId"</span>: <span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span>,
      <span class="s2">"transactionExternalKey"</span>: <span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span>,
      <span class="s2">"paymentId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
      <span class="s2">"paymentExternalKey"</span>: <span class="s2">"paymentExternalKey"</span>,
      <span class="s2">"transactionType"</span>: <span class="s2">"AUTHORIZE"</span>,
      <span class="s2">"amount"</span>: 1,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19T16:39:00.000Z"</span>,
      <span class="s2">"processedAmount"</span>: 1,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"status"</span>: <span class="s2">"SUCCESS"</span>,
      <span class="s2">"gatewayErrorCode"</span>: null,
      <span class="s2">"gatewayErrorMsg"</span>: null,
      <span class="s2">"firstPaymentReferenceId"</span>: null,
      <span class="s2">"secondPaymentReferenceId"</span>: null,
      <span class="s2">"properties"</span>: null,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"paymentAttempts"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="nd">@b45dd4ce</span>
    <span class="nl">accountId:</span> <span class="n">c468fd02</span><span class="o">-</span><span class="mi">8</span><span class="n">c07</span><span class="o">-</span><span class="mi">4</span><span class="n">dad</span><span class="o">-</span><span class="n">b11a</span><span class="o">-</span><span class="n">a0daf927a4b9</span>
    <span class="nl">paymentId:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mi">0</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">0</span><span class="n">ccbb24b</span><span class="o">-</span><span class="mi">6279</span><span class="o">-</span><span class="mi">43</span><span class="n">ab</span><span class="o">-</span><span class="mi">9322</span><span class="o">-</span><span class="n">bdf07f18b601</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@d7a9d32e</span>
        <span class="nl">transactionId:</span> <span class="mo">03</span><span class="n">be8f74</span><span class="o">-</span><span class="mi">0</span><span class="n">ca9</span><span class="o">-</span><span class="mi">479</span><span class="n">a</span><span class="o">-</span><span class="mi">993</span><span class="n">d</span><span class="o">-</span><span class="n">e6fbb35af281</span>
        <span class="nl">transactionExternalKey:</span> <span class="mo">03</span><span class="n">be8f74</span><span class="o">-</span><span class="mi">0</span><span class="n">ca9</span><span class="o">-</span><span class="mi">479</span><span class="n">a</span><span class="o">-</span><span class="mi">993</span><span class="n">d</span><span class="o">-</span><span class="n">e6fbb35af281</span>
        <span class="nl">paymentId:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">04.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">0.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">PAYMENT_FAILURE</span>
        <span class="nl">gatewayErrorCode:</span> <span class="n">gatewayErrorCode</span>
        <span class="nl">gatewayErrorMsg:</span> <span class="n">gatewayError</span>
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentAttempt</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentAttempt</span><span class="nd">@da337892</span>
        <span class="nl">accountId:</span> <span class="n">c468fd02</span><span class="o">-</span><span class="mi">8</span><span class="n">c07</span><span class="o">-</span><span class="mi">4</span><span class="n">dad</span><span class="o">-</span><span class="n">b11a</span><span class="o">-</span><span class="n">a0daf927a4b9</span>
        <span class="nl">paymentMethodId:</span> <span class="mi">0</span><span class="n">ccbb24b</span><span class="o">-</span><span class="mi">6279</span><span class="o">-</span><span class="mi">43</span><span class="n">ab</span><span class="o">-</span><span class="mi">9322</span><span class="o">-</span><span class="n">bdf07f18b601</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
        <span class="nl">transactionId:</span> <span class="mo">03</span><span class="n">be8f74</span><span class="o">-</span><span class="mi">0</span><span class="n">ca9</span><span class="o">-</span><span class="mi">479</span><span class="n">a</span><span class="o">-</span><span class="mi">993</span><span class="n">d</span><span class="o">-</span><span class="n">e6fbb35af281</span>
        <span class="nl">transactionExternalKey:</span> <span class="mo">03</span><span class="n">be8f74</span><span class="o">-</span><span class="mi">0</span><span class="n">ca9</span><span class="o">-</span><span class="mi">479</span><span class="n">a</span><span class="o">-</span><span class="mi">993</span><span class="n">d</span><span class="o">-</span><span class="n">e6fbb35af281</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">04.000</span><span class="n">Z</span>
        <span class="nl">stateName:</span> <span class="n">RETRIED</span>
        <span class="nl">amount:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">pluginName:</span> <span class="n">__INVOICE_PAYMENT_CONTROL_PLUGIN__</span>
        <span class="nl">pluginProperties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">IPCD_INVOICE_ID</span>
            <span class="nl">value:</span> <span class="mo">052</span><span class="n">a9fae</span><span class="o">-</span><span class="mi">2</span><span class="n">bc5</span><span class="o">-</span><span class="mi">44</span><span class="n">e0</span><span class="o">-</span><span class="mi">81</span><span class="n">da</span><span class="o">-</span><span class="mi">181</span><span class="n">aae56d869</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentAttempt</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentAttempt</span><span class="nd">@c492f721</span>
        <span class="nl">accountId:</span> <span class="n">c468fd02</span><span class="o">-</span><span class="mi">8</span><span class="n">c07</span><span class="o">-</span><span class="mi">4</span><span class="n">dad</span><span class="o">-</span><span class="n">b11a</span><span class="o">-</span><span class="n">a0daf927a4b9</span>
        <span class="nl">paymentMethodId:</span> <span class="mi">0</span><span class="n">ccbb24b</span><span class="o">-</span><span class="mi">6279</span><span class="o">-</span><span class="mi">43</span><span class="n">ab</span><span class="o">-</span><span class="mi">9322</span><span class="o">-</span><span class="n">bdf07f18b601</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
        <span class="nl">transactionId:</span> <span class="kc">null</span>
        <span class="nl">transactionExternalKey:</span> <span class="mo">03</span><span class="n">be8f74</span><span class="o">-</span><span class="mi">0</span><span class="n">ca9</span><span class="o">-</span><span class="mi">479</span><span class="n">a</span><span class="o">-</span><span class="mi">993</span><span class="n">d</span><span class="o">-</span><span class="n">e6fbb35af281</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">stateName:</span> <span class="n">SCHEDULED</span>
        <span class="nl">amount:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">pluginName:</span> <span class="n">__INVOICE_PAYMENT_CONTROL_PLUGIN__</span>
        <span class="nl">pluginProperties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">IPCD_INVOICE_ID</span>
            <span class="nl">value:</span> <span class="mo">052</span><span class="n">a9fae</span><span class="o">-</span><span class="mi">2</span><span class="n">bc5</span><span class="o">-</span><span class="mi">44</span><span class="n">e0</span><span class="o">-</span><span class="mi">81</span><span class="n">da</span><span class="o">-</span><span class="mi">181</span><span class="n">aae56d869</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"7fd39735-87a2-4190-84a0-d28a53347bd4"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"65"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"c8d9199f-c62d-46d3-b94e-1544bbe2a5c9"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"a48855a4-bbe5-43d0-9e81-016ca719abeb"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"a48855a4-bbe5-43d0-9e81-016ca719abeb"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"dff69d54-9593-4d19-893e-287720272175"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"dff69d54-9593-4d19-893e-287720272175"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"REFUND"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:06.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'1686f19d-bc3a-4a4b-987f-837b0547df50'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'ce88ae5b-7ec0-4e14-9ea1-fffe4411278e'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'ce88ae5b-7ec0-4e14-9ea1-fffe4411278e'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'54c9a68e-155d-44ec-b5a0-694f9a4e0962'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'428'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'ce88ae5b-7ec0-4e14-9ea1-fffe4411278e'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'ce88ae5b-7ec0-4e14-9ea1-fffe4411278e'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'0eff43b1-133e-4a8b-ab75-061d72a1879c'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'0eff43b1-133e-4a8b-ab75-061d72a1879c'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'AUTHORIZE'</span><span class="p">}]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a <code>Payment</code> object.</p>
<h3 id='payment-retrieve-a-payment-using-paymentexternalkey'>Retrieve a payment [using paymentExternalKey]</h3>
<p>Retrieves a Payment object based on its external key given as a query parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments?externalKey=paymentExternalKey'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalPaymentKey</span> <span class="o">=</span> <span class="s">"11b28b2e-a377-4b95-b712-d71cbcb28f80"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentByExternalKey</span><span class="o">(</span><span class="n">externalPaymentKey</span><span class="o">,</span>
                                                     <span class="n">withPluginInfo</span><span class="o">,</span> 
                                                     <span class="n">withAttempts</span><span class="o">,</span> 
                                                     <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                     <span class="n">requestOptions</span><span class="o">);</span><span class="err">`</span> <span class="err">`</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_attempts</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Payment</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> 
                                                    <span class="n">with_plugin_info</span><span class="p">,</span> 
                                                    <span class="n">with_attempts</span><span class="p">,</span> 
                                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span> 

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payment_by_external_key</span><span class="p">(</span><span class="n">payment_external_key</span><span class="p">,</span>
                                       <span class="n">api_key</span><span class="p">,</span>
                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">{</span>
  <span class="s2">"accountId"</span>: <span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
  <span class="s2">"paymentId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
  <span class="s2">"paymentNumber"</span>: <span class="s2">"14"</span>,
  <span class="s2">"paymentExternalKey"</span>: <span class="s2">"paymentExternalKey"</span>,
  <span class="s2">"authAmount"</span>: 1,
  <span class="s2">"capturedAmount"</span>: 6,
  <span class="s2">"purchasedAmount"</span>: 0,
  <span class="s2">"refundedAmount"</span>: 0,
  <span class="s2">"creditedAmount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"paymentMethodId"</span>: <span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
  <span class="s2">"transactions"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"transactionId"</span>: <span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span>,
      <span class="s2">"transactionExternalKey"</span>: <span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span>,
      <span class="s2">"paymentId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
      <span class="s2">"paymentExternalKey"</span>: <span class="s2">"paymentExternalKey"</span>,
      <span class="s2">"transactionType"</span>: <span class="s2">"AUTHORIZE"</span>,
      <span class="s2">"amount"</span>: 1,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19T16:39:00.000Z"</span>,
      <span class="s2">"processedAmount"</span>: 1,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"status"</span>: <span class="s2">"SUCCESS"</span>,
      <span class="s2">"gatewayErrorCode"</span>: null,
      <span class="s2">"gatewayErrorMsg"</span>: null,
      <span class="s2">"firstPaymentReferenceId"</span>: null,
      <span class="s2">"secondPaymentReferenceId"</span>: null,
      <span class="s2">"properties"</span>: null,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"paymentAttempts"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="nd">@d49bf96c</span>
    <span class="nl">accountId:</span> <span class="n">e13ed77c</span><span class="o">-</span><span class="mi">79</span><span class="n">a8</span><span class="o">-</span><span class="mi">4</span><span class="n">cb5</span><span class="o">-</span><span class="mi">9</span><span class="n">fbf</span><span class="o">-</span><span class="mi">66</span><span class="n">d053920d14</span>
    <span class="nl">paymentId:</span> <span class="mi">48</span><span class="n">f8bc99</span><span class="o">-</span><span class="mi">43</span><span class="n">a7</span><span class="o">-</span><span class="mi">4</span><span class="n">d79</span><span class="o">-</span><span class="mi">980</span><span class="n">c</span><span class="o">-</span><span class="mi">24</span><span class="n">cfa8d0c2f4</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">11</span><span class="n">b28b2e</span><span class="o">-</span><span class="n">a377</span><span class="o">-</span><span class="mi">4</span><span class="n">b95</span><span class="o">-</span><span class="n">b712</span><span class="o">-</span><span class="n">d71cbcb28f80</span>
    <span class="nl">authAmount:</span> <span class="mf">10.00</span>
    <span class="nl">capturedAmount:</span> <span class="mf">2.00</span>
    <span class="nl">purchasedAmount:</span> <span class="mi">0</span>
    <span class="nl">refundedAmount:</span> <span class="mf">2.00</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">14</span><span class="n">b727a5</span><span class="o">-</span><span class="mi">794</span><span class="n">b</span><span class="o">-</span><span class="mi">4</span><span class="n">ea8</span><span class="o">-</span><span class="mi">82</span><span class="n">da</span><span class="o">-</span><span class="mi">5942</span><span class="n">f54f6432</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@cf9f2f67</span>
        <span class="nl">transactionId:</span> <span class="mi">39</span><span class="n">b27abc</span><span class="o">-</span><span class="n">a657</span><span class="o">-</span><span class="mi">4</span><span class="n">b10</span><span class="o">-</span><span class="mi">838</span><span class="n">d</span><span class="o">-</span><span class="mi">7</span><span class="n">c69dba49853</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">9</span><span class="n">bf756e6</span><span class="o">-</span><span class="n">e758</span><span class="o">-</span><span class="mi">4092</span><span class="o">-</span><span class="n">a2b5</span><span class="o">-</span><span class="n">faa1c4e74038</span>
        <span class="nl">paymentId:</span> <span class="mi">48</span><span class="n">f8bc99</span><span class="o">-</span><span class="mi">43</span><span class="n">a7</span><span class="o">-</span><span class="mi">4</span><span class="n">d79</span><span class="o">-</span><span class="mi">980</span><span class="n">c</span><span class="o">-</span><span class="mi">24</span><span class="n">cfa8d0c2f4</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">11</span><span class="n">b28b2e</span><span class="o">-</span><span class="n">a377</span><span class="o">-</span><span class="mi">4</span><span class="n">b95</span><span class="o">-</span><span class="n">b712</span><span class="o">-</span><span class="n">d71cbcb28f80</span>
        <span class="nl">transactionType:</span> <span class="n">AUTHORIZE</span>
        <span class="nl">amount:</span> <span class="mf">10.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">04.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">10.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">11</span><span class="n">a2380d</span>
        <span class="nl">transactionId:</span> <span class="n">d67d8daf</span><span class="o">-</span><span class="mi">1</span><span class="n">bb3</span><span class="o">-</span><span class="mi">495</span><span class="n">a</span><span class="o">-</span><span class="mi">9</span><span class="n">d9f</span><span class="o">-</span><span class="mo">020</span><span class="n">f51a152a2</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">f1895ba0</span><span class="o">-</span><span class="mi">3</span><span class="n">b53</span><span class="o">-</span><span class="mi">45</span><span class="n">b4</span><span class="o">-</span><span class="mi">8</span><span class="n">ae1</span><span class="o">-</span><span class="mi">64</span><span class="n">c9e9618dea</span>
        <span class="nl">paymentId:</span> <span class="mi">48</span><span class="n">f8bc99</span><span class="o">-</span><span class="mi">43</span><span class="n">a7</span><span class="o">-</span><span class="mi">4</span><span class="n">d79</span><span class="o">-</span><span class="mi">980</span><span class="n">c</span><span class="o">-</span><span class="mi">24</span><span class="n">cfa8d0c2f4</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">11</span><span class="n">b28b2e</span><span class="o">-</span><span class="n">a377</span><span class="o">-</span><span class="mi">4</span><span class="n">b95</span><span class="o">-</span><span class="n">b712</span><span class="o">-</span><span class="n">d71cbcb28f80</span>
        <span class="nl">transactionType:</span> <span class="n">CAPTURE</span>
        <span class="nl">amount:</span> <span class="mf">1.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">1.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">7</span><span class="n">a6b1a43</span>
        <span class="nl">transactionId:</span> <span class="mi">2</span><span class="n">ead1581</span><span class="o">-</span><span class="mi">22</span><span class="n">c1</span><span class="o">-</span><span class="mi">4</span><span class="n">a69</span><span class="o">-</span><span class="n">a576</span><span class="o">-</span><span class="mi">8</span><span class="n">df55e765071</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">1</span><span class="n">e968315</span><span class="o">-</span><span class="n">f363</span><span class="o">-</span><span class="mi">42</span><span class="n">fb</span><span class="o">-</span><span class="n">b9e8</span><span class="o">-</span><span class="mi">3</span><span class="n">ea3cbf0fc84</span>
        <span class="nl">paymentId:</span> <span class="mi">48</span><span class="n">f8bc99</span><span class="o">-</span><span class="mi">43</span><span class="n">a7</span><span class="o">-</span><span class="mi">4</span><span class="n">d79</span><span class="o">-</span><span class="mi">980</span><span class="n">c</span><span class="o">-</span><span class="mi">24</span><span class="n">cfa8d0c2f4</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">11</span><span class="n">b28b2e</span><span class="o">-</span><span class="n">a377</span><span class="o">-</span><span class="mi">4</span><span class="n">b95</span><span class="o">-</span><span class="n">b712</span><span class="o">-</span><span class="n">d71cbcb28f80</span>
        <span class="nl">transactionType:</span> <span class="n">CAPTURE</span>
        <span class="nl">amount:</span> <span class="mf">1.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">1.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">1606355</span><span class="n">a</span>
        <span class="nl">transactionId:</span> <span class="mi">8</span><span class="n">a50cc62</span><span class="o">-</span><span class="mi">9063</span><span class="o">-</span><span class="mi">4581</span><span class="o">-</span><span class="n">a9ab</span><span class="o">-</span><span class="mi">320</span><span class="n">dc1b8f0c9</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">0942</span><span class="n">d27a</span><span class="o">-</span><span class="mi">0</span><span class="n">d38</span><span class="o">-</span><span class="mi">498</span><span class="n">e</span><span class="o">-</span><span class="n">a58d</span><span class="o">-</span><span class="mo">0733</span><span class="n">b70454c7</span>
        <span class="nl">paymentId:</span> <span class="mi">48</span><span class="n">f8bc99</span><span class="o">-</span><span class="mi">43</span><span class="n">a7</span><span class="o">-</span><span class="mi">4</span><span class="n">d79</span><span class="o">-</span><span class="mi">980</span><span class="n">c</span><span class="o">-</span><span class="mi">24</span><span class="n">cfa8d0c2f4</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">11</span><span class="n">b28b2e</span><span class="o">-</span><span class="n">a377</span><span class="o">-</span><span class="mi">4</span><span class="n">b95</span><span class="o">-</span><span class="n">b712</span><span class="o">-</span><span class="n">d71cbcb28f80</span>
        <span class="nl">transactionType:</span> <span class="n">REFUND</span>
        <span class="nl">amount:</span> <span class="mf">2.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">06.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">2.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"7fd39735-87a2-4190-84a0-d28a53347bd4"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"65"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"example_payment_external_key"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"c8d9199f-c62d-46d3-b94e-1544bbe2a5c9"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"a48855a4-bbe5-43d0-9e81-016ca719abeb"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"a48855a4-bbe5-43d0-9e81-016ca719abeb"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"dff69d54-9593-4d19-893e-287720272175"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"dff69d54-9593-4d19-893e-287720272175"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"REFUND"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:06.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'35e08817-3fcd-46a2-aa35-148bbe47c2d9'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'sample_external_key'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'14002a0b-3b78-4c94-9297-6b79fe805d0c'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'41cc673a-2030-4ad1-ad91-0a2a22b8732b'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'430'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'14002a0b-3b78-4c94-9297-6b79fe805d0c'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'14002a0b-3b78-4c94-9297-6b79fe805d0c'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'8c0bfe29-44b2-4aaf-937a-e368c233dccf'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'8c0bfe29-44b2-4aaf-937a-e368c233dccf'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'AUTHORIZE'</span><span class="p">}]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Payment external key</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a <code>Payment</code> object.</p>
<h3 id='payment-complete-an-existing-transaction-using-paymentid'>Complete an existing transaction [using paymentId]</h3>
<p>Completes any existing PaymentTransaction that is in a PENDING state, based on its <code>paymentId</code> given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/payments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>

<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">completeTransaction</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                               <span class="n">body</span><span class="o">,</span> 
                               <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                               <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>            <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span> <span class="o">=</span> <span class="s2">"7dcda896-808b-414c-aad4-74ddc98e3dcb"</span>
<span class="n">refresh_options</span>        <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">complete_initial_transaction</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                         <span class="n">reason</span><span class="p">,</span> 
                                         <span class="n">comment</span><span class="p">,</span> 
                                         <span class="n">options</span><span class="p">,</span> 
                                         <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'7dcda896-808b-414c-aad4-74ddc98e3dcb'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">complete_transaction</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                <span class="n">body</span><span class="p">,</span>
                                <span class="n">created_by</span><span class="p">,</span>
                                <span class="n">api_key</span><span class="p">,</span>
                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"f25f5fe5-63ab-4478-89f1-cc868982f19a"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"7dcda896-808b-414c-aad4-74ddc98e3dcb"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"84"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"example_payment_external_key"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"0c6f5c90-3b90-4a35-b378-c22a2bea598b"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"bfc95df3-fbaa-427d-a398-fe66c319a55b"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"bfc95df3-fbaa-427d-a398-fe66c319a55b"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"7dcda896-808b-414c-aad4-74ddc98e3dcb"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"7dcda896-808b-414c-aad4-74ddc98e3dcb"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-complete-an-existing-transaction-using-paymentexternalkey'>Complete an existing transaction [using paymentExternalKey]</h3>
<p>Completes any existing PaymentTransaction that is in a PENDING state, based on its <code>paymentExternalKey</code> given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "paymentExternalKey"
      }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalPaymentKey</span> <span class="o">=</span> <span class="s">"11b28b2e-a377-4b95-b712-d71cbcb28f80"</span><span class="o">;</span>
<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="n">externalPaymentKey</span><span class="o">);</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">completeTransactionByExternalKey</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> 
                                            <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                            <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>
<span class="n">refresh_options</span>                  <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">complete_initial_transaction</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                         <span class="n">reason</span><span class="p">,</span> 
                                         <span class="n">comment</span><span class="p">,</span> 
                                         <span class="n">options</span><span class="p">,</span> 
                                         <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">complete_transaction_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                                <span class="n">created_by</span><span class="p">,</span>
                                                <span class="n">api_key</span><span class="p">,</span>
                                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"f25f5fe5-63ab-4478-89f1-cc868982f19a"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"7dcda896-808b-414c-aad4-74ddc98e3dcb"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"84"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"example_payment_external_key"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"0c6f5c90-3b90-4a35-b378-c22a2bea598b"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"bfc95df3-fbaa-427d-a398-fe66c319a55b"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"bfc95df3-fbaa-427d-a398-fe66c319a55b"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"7dcda896-808b-414c-aad4-74ddc98e3dcb"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"7dcda896-808b-414c-aad4-74ddc98e3dcb"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A Payment object containing, at least, the <code>paymentExternalKey</code></p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-void-an-existing-payment-using-paymentid'>Void an existing payment [using paymentId]</h3>
<p>Voids a Payment, providing it is in a voidable state. For example, a Payment with only an AUTHORIZE transaction can be voided. No further transactions are possible on a voided Payment. The Payment is identified by its <code>paymentId</code>, which is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>

<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">voidPayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                       <span class="n">body</span><span class="o">,</span> 
                       <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                       <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span>  <span class="o">=</span> <span class="s2">"29b34a3d-d301-4e57-8fc2-2c0a201c4fd0"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">void</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                 <span class="n">reason</span><span class="p">,</span> 
                 <span class="n">comment</span><span class="p">,</span> 
                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'29b34a3d-d301-4e57-8fc2-2c0a201c4fd0'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">void_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                        <span class="n">body</span><span class="p">,</span>
                        <span class="n">created_by</span><span class="p">,</span>
                        <span class="n">api_key</span><span class="p">,</span>
                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"transactionId"</span><span class="ss">:"29b34a3d-d301-4e57-8fc2-2c0a201c4fd0"</span><span class="p">,</span>
   <span class="s2">"transactionExternalKey"</span><span class="ss">:"payment2-121268-void"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"275889ca-60aa-4801-9b53-8b2e0b9844ca"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"payment2-121268"</span><span class="p">,</span>
   <span class="s2">"transactionType"</span><span class="ss">:"VOID"</span><span class="p">,</span>
   <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:07.000Z"</span><span class="p">,</span>
   <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. a PaymentTransaction of type VOID is created.</p>
<h3 id='payment-void-an-existing-payment-using-paymentexternalkey'>Void an existing payment [using paymentExternalKey]</h3>
<p>Voids a Payment, providing it is in a voidable state. For example, a Payment with only an AUTHORIZE transaction can be voided. can be voided. No further transactions are possible on a voided payment. The payment is identified by its <code>paymentExternalKey</code>, which is given as a query parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "paymentExternalKey"
      }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments'</span>     
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">paymentExternalKey</span> <span class="o">=</span> <span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">;</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="n">paymentExternalKey</span><span class="o">);</span>

<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">voidPaymentByExternalKey</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> 
                                    <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                          <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_external_key</span> <span class="o">=</span> <span class="s2">"payment2-121268-void"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">void</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                 <span class="n">reason</span><span class="p">,</span> 
                 <span class="n">comment</span><span class="p">,</span> 
                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">void_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"transactionId"</span><span class="ss">:"29b34a3d-d301-4e57-8fc2-2c0a201c4fd0"</span><span class="p">,</span>
   <span class="s2">"transactionExternalKey"</span><span class="ss">:"payment2-121268-void"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"275889ca-60aa-4801-9b53-8b2e0b9844ca"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"payment2-121268"</span><span class="p">,</span>
   <span class="s2">"transactionType"</span><span class="ss">:"VOID"</span><span class="p">,</span>
   <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:07.000Z"</span><span class="p">,</span>
   <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A Payment object containing, at least, the <code>paymentExternalKey</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. A PaymentTransaction of type VOID is created.</p>
<h3 id='payment-record-a-chargeback-using-paymentid'>Record a chargeback [using paymentId]</h3>
<p>Creates a CHARGEBACK PaymentTransaction for a specified Payment. The Payment is identified by its <code>paymentId</code> given as a path parameter. The captured amount is reduced by the chargeback amount.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/chargebacks</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "amount": 5
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/chargebacks'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span>     <span class="o">=</span> <span class="s2">"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>         <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">currency</span>       <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">effective_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">refresh_options</span>            <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">chargeback</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                       <span class="n">reason</span><span class="p">,</span> 
                       <span class="n">comment</span><span class="p">,</span> 
                       <span class="n">options</span><span class="p">,</span> 
                       <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'42ab1653-051f-416c-8c70-bf5d4061d4fa'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                          <span class="n">effective_date</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">chargeback_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                              <span class="n">body</span><span class="p">,</span>
                              <span class="n">created_by</span><span class="p">,</span>
                              <span class="n">api_key</span><span class="p">,</span>
                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"82d3625e-65f0-403e-a3aa-8077accb4295"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"67"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"bde4c67d-4069-4d1c-bd46-029ddda0532f"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"78591b50-a828-456b-a6c2-fefe89a356f3"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"78591b50-a828-456b-a6c2-fefe89a356f3"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"59d9f016-a63a-4dac-bf9a-0464658d99e1"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"59d9f016-a63a-4dac-bf9a-0464658d99e1"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A Payment Transaction object containing, at least, the <code>amount</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. A Payment Transaction is created with type CHARGEBACK.</p>
<h3 id='payment-record-a-chargeback-using-paymentexternalkey'>Record a chargeback [using paymentExternalKey]</h3>
<p>Creates a CHARGEBACK PaymentTransaction for a specified Payment. The Payment is identified by its <code>paymentExternalKey</code> given in the request body. The captured amount is reduced by the chargeback amount.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/chargebacks</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "a187746f-841a-481c-8d6c-4497080ed968",
          "amount": 5,
          "currency": "USD"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/chargebacks'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>               <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">currency</span>             <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">effective_date</span>       <span class="o">=</span> <span class="kp">nil</span>
<span class="n">refresh_options</span>                  <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">chargeback</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                       <span class="n">reason</span><span class="p">,</span> 
                       <span class="n">comment</span><span class="p">,</span> 
                       <span class="n">options</span><span class="p">,</span> 
                       <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                          <span class="n">effective_date</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">chargeback_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"82d3625e-65f0-403e-a3aa-8077accb4295"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"67"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"example_payment_external_key"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"bde4c67d-4069-4d1c-bd46-029ddda0532f"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"78591b50-a828-456b-a6c2-fefe89a356f3"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"78591b50-a828-456b-a6c2-fefe89a356f3"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"59d9f016-a63a-4dac-bf9a-0464658d99e1"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"59d9f016-a63a-4dac-bf9a-0464658d99e1"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>paymentExternalKey</code> and the <code>amount</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. A PaymentTransaction is created with type CHARGEBACK.</p>
<h3 id='payment-record-a-chargeback-reversal-using-paymentid'>Record a chargeback reversal [using paymentId]</h3>
<p>Reverses a CHARGEBACK PaymentTransaction, if permitted by the Payment plugin. The chargeback amount is added back to the captured amount. The payment is identified by its <code>paymentId</code> which is given as a path parameter. The CHARGEBACK transaction is identified by its <code>transactionExternalKey</code> which is given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/chargebackReversals</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "transactionExternalKey": "7ff346e8-24cc-4437-acfa-c79d96d54ee2"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/chargebackReversals'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                          <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_external_key</span> <span class="o">=</span> <span class="s2">"9ceb96a2-5407-482b-8847-7b08cc64213f"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span>               <span class="o">=</span> <span class="s2">"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">chargeback_reversals</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span> 
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'74a82e25-120a-4a39-a7f7-7b5c2b4ac05d'</span>
<span class="n">transaction_external_key</span> <span class="o">=</span> <span class="s">'9ceb96a2-5407-482b-8847-7b08cc64213f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">,</span>
                          <span class="n">transaction_external_key</span><span class="o">=</span><span class="n">transaction_external_key</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">chargeback_reversal_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                       <span class="n">body</span><span class="p">,</span>
                                       <span class="n">created_by</span><span class="p">,</span>
                                       <span class="n">api_key</span><span class="p">,</span>
                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"d513c084-2ee4-4e65-aea5-b47dde03d2d4"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"66"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"c5676241-85dd-47ba-be4c-5dec75fade33"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"9ceb96a2-5407-482b-8847-7b08cc64213f"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"9ceb96a2-5407-482b-8847-7b08cc64213f"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"597efe9b-b713-41fb-9ea1-4b2faf80f49c"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"597efe9b-b713-41fb-9ea1-4b2faf80f49c"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"112ad9f1-5a36-447c-aadc-ac20c6e56feb"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"597efe9b-b713-41fb-9ea1-4b2faf80f49c"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"PAYMENT_FAILURE"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>transactionExternalKey</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='payment-record-a-chargeback-reversal-using-paymnetexternalkey'>Record a chargeback reversal [using paymnetExternalKey]</h3>
<p>Reverses a CHARGEBACK PaymentTransaction, if permitted by the Payment plugin. The chargeback amount is added back to the captured amount. The Payment is identified by its <code>paymentExternalKey</code> which is given in the request body. The CHARGEBACK transaction is identified by its <code>transactionExternalKey</code> which is also given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/chargebackReversals</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "transactionExternalKey": "7ff346e8-24cc-4437-acfa-c79d96d54ee2",
          "paymentExternalKey": "paymentExternalKey",
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/chargebackReversals'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">chargeback_reversals</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span> 
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">,</span>
                          <span class="n">transaction_external_key</span><span class="o">=</span><span class="n">transaction_external_key</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">chargeback_reversal_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"58f01daa-df0f-424e-b430-ad54c3653d70"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"82a8a5eb-7953-4654-b3ff-f3d935ed0c37"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"71"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"example_payment_external_key"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"29b3f923-5985-496e-835a-c26f3742c13d"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"231d2bbc-7ce3-4946-b6d9-f24f9a25ff6c"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"231d2bbc-7ce3-4946-b6d9-f24f9a25ff6c"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"82a8a5eb-7953-4654-b3ff-f3d935ed0c37"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"82a8a5eb-7953-4654-b3ff-f3d935ed0c37"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"5c9be310-6508-40ff-9553-2b88d1707eef"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"5c9be310-6508-40ff-9553-2b88d1707eef"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"82a8a5eb-7953-4654-b3ff-f3d935ed0c37"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"82a8a5eb-7953-4654-b3ff-f3d935ed0c37"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"b193f299-9788-4dc9-abc8-b1971bee68e1"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"5c9be310-6508-40ff-9553-2b88d1707eef"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"82a8a5eb-7953-4654-b3ff-f3d935ed0c37"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"82a8a5eb-7953-4654-b3ff-f3d935ed0c37"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"PAYMENT_FAILURE"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>paymentExternalKey</code> and the <code>TransactionExternalKey</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='payment-refund-an-existing-payment-using-paymentid'>Refund an existing payment [using paymentId]</h3>
<p>Refunds part or all of the balance of an existing Payment. The Payment is identified by its <code>paymentId</code>, which is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/refunds</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "amount": 5
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/refunds'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"89614849-9bd6-43ba-93d0-e9deb1acf575"</span><span class="o">);</span>

<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"de924e98-2c76-4e90-b9d6-2ced262bc251"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setTransactionExternalKey</span><span class="o">(</span><span class="s">"c4de33be-1c2b-4cf8-be75-6371f08738de"</span><span class="o">);</span>

<span class="n">Payment</span> <span class="n">refundPayment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">refundPayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                 <span class="n">body</span><span class="o">,</span> 
                                                 <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                 <span class="n">pluginProperties</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>            <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span> <span class="o">=</span> <span class="s2">"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>     <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">refresh_options</span>        <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">refund</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                   <span class="n">reason</span><span class="p">,</span> 
                   <span class="n">comment</span><span class="p">,</span> 
                   <span class="n">options</span><span class="p">,</span> 
                   <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'dce5b2a0-0f0f-430b-9427-545ba4be5c7f'</span> 
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">refund_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                          <span class="n">body</span><span class="p">,</span>
                          <span class="n">created_by</span><span class="p">,</span>
                          <span class="n">api_key</span><span class="p">,</span>
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="nd">@deaa66b1</span>
    <span class="nl">accountId:</span> <span class="mi">73</span><span class="n">a443d6</span><span class="o">-</span><span class="n">e145</span><span class="o">-</span><span class="mi">4</span><span class="n">db3</span><span class="o">-</span><span class="mi">9</span><span class="n">c86</span><span class="o">-</span><span class="n">f0d53374846c</span>
    <span class="nl">paymentId:</span> <span class="mi">89614849</span><span class="o">-</span><span class="mi">9</span><span class="n">bd6</span><span class="o">-</span><span class="mi">43</span><span class="n">ba</span><span class="o">-</span><span class="mi">93</span><span class="n">d0</span><span class="o">-</span><span class="n">e9deb1acf575</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="n">de924e98</span><span class="o">-</span><span class="mi">2</span><span class="n">c76</span><span class="o">-</span><span class="mi">4</span><span class="n">e90</span><span class="o">-</span><span class="n">b9d6</span><span class="o">-</span><span class="mi">2</span><span class="n">ced262bc251</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mf">10.00</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">92</span><span class="n">b3c0bf</span><span class="o">-</span><span class="n">f5f0</span><span class="o">-</span><span class="mi">4</span><span class="n">be0</span><span class="o">-</span><span class="n">aad0</span><span class="o">-</span><span class="n">c2fd419561cf</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@f6a5a1e2</span>
        <span class="nl">transactionId:</span> <span class="mi">1848</span><span class="n">bd1f</span><span class="o">-</span><span class="n">dbb8</span><span class="o">-</span><span class="mi">4</span><span class="n">e7b</span><span class="o">-</span><span class="n">bd48</span><span class="o">-</span><span class="n">d6763ef86932</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">c4de33be</span><span class="o">-</span><span class="mi">1</span><span class="n">c2b</span><span class="o">-</span><span class="mi">4</span><span class="n">cf8</span><span class="o">-</span><span class="n">be75</span><span class="o">-</span><span class="mi">6371</span><span class="n">f08738de</span>
        <span class="nl">paymentId:</span> <span class="mi">89614849</span><span class="o">-</span><span class="mi">9</span><span class="n">bd6</span><span class="o">-</span><span class="mi">43</span><span class="n">ba</span><span class="o">-</span><span class="mi">93</span><span class="n">d0</span><span class="o">-</span><span class="n">e9deb1acf575</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">de924e98</span><span class="o">-</span><span class="mi">2</span><span class="n">c76</span><span class="o">-</span><span class="mi">4</span><span class="n">e90</span><span class="o">-</span><span class="n">b9d6</span><span class="o">-</span><span class="mi">2</span><span class="n">ced262bc251</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">10.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">10.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@cd051079</span>
        <span class="nl">transactionId:</span> <span class="n">ec26f9bf</span><span class="o">-</span><span class="mi">8</span><span class="n">b32</span><span class="o">-</span><span class="mi">493</span><span class="n">c</span><span class="o">-</span><span class="mi">9</span><span class="n">dfe</span><span class="o">-</span><span class="mi">15188</span><span class="n">c0f24c7</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">c81aa30a</span><span class="o">-</span><span class="mi">48</span><span class="n">e3</span><span class="o">-</span><span class="mi">4150</span><span class="o">-</span><span class="mi">9789</span><span class="o">-</span><span class="n">d4585e95353f</span>
        <span class="nl">paymentId:</span> <span class="mi">89614849</span><span class="o">-</span><span class="mi">9</span><span class="n">bd6</span><span class="o">-</span><span class="mi">43</span><span class="n">ba</span><span class="o">-</span><span class="mi">93</span><span class="n">d0</span><span class="o">-</span><span class="n">e9deb1acf575</span>
        <span class="nl">paymentExternalKey:</span> <span class="n">de924e98</span><span class="o">-</span><span class="mi">2</span><span class="n">c76</span><span class="o">-</span><span class="mi">4</span><span class="n">e90</span><span class="o">-</span><span class="n">b9d6</span><span class="o">-</span><span class="mi">2</span><span class="n">ced262bc251</span>
        <span class="nl">transactionType:</span> <span class="n">REFUND</span>
        <span class="nl">amount:</span> <span class="mf">10.00</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">32.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">10.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">PENDING</span>
        <span class="nl">gatewayErrorCode:</span> <span class="n">gatewayErrorCode</span>
        <span class="nl">gatewayErrorMsg:</span> <span class="n">gatewayError</span>
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"6c297750-3a6d-42a4-9d75-c900fbc75ddf"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"69"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"ba2b0bd4-43f2-4b4a-839c-5a2fa40ea0de"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"d58f9801-e0e6-4b8d-99fb-e19f5b29a313"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"d58f9801-e0e6-4b8d-99fb-e19f5b29a313"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"28740a66-834a-4005-81d5-55a4550751b9"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"28740a66-834a-4005-81d5-55a4550751b9"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"REFUND"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A Payment object including, as a minimum, the <code>amount</code> to be refunded.</p>

<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A new paymentTransaction of type REFUND is created.</p>
<h3 id='payment-refund-an-existing-payment-using-paymentexternalkey'>Refund an existing payment [using paymentExternalKey]</h3>
<p>Refunds part or all of the balance of an existing payment. The payment is identified by its <code>paymentExternalKey</code>, which is given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/refunds</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "paymentExternalKey",
          "amount": 5,
          "currency": "USD"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/refunds'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>               <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">refresh_options</span>                  <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">refund_by_external_key</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                   <span class="n">reason</span><span class="p">,</span> 
                                   <span class="n">comment</span><span class="p">,</span> 
                                   <span class="n">options</span><span class="p">,</span> 
                                   <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'example_payment_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">refund_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                          <span class="n">created_by</span><span class="p">,</span>
                                          <span class="n">api_key</span><span class="p">,</span>
                                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"6c297750-3a6d-42a4-9d75-c900fbc75ddf"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"69"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"example_payment_external_key"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"ba2b0bd4-43f2-4b4a-839c-5a2fa40ea0de"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"d58f9801-e0e6-4b8d-99fb-e19f5b29a313"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"d58f9801-e0e6-4b8d-99fb-e19f5b29a313"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"28740a66-834a-4005-81d5-55a4550751b9"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"28740a66-834a-4005-81d5-55a4550751b9"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"REFUND"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A payment object including, as a minimum, the <code>paymentExternalKey</code> and the <code>amount</code> to be refunded.</p>

<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A new PaymentTransaction of type REFUND is created.</p>
<h3 id='payment-cancel-a-scheduled-payment-attempt-retry-using-transactionid'>Cancel a scheduled payment attempt retry [using transactionId]</h3>
<p>Cancels a scheduled attempt to retry a PaymentTransaction. The transaction is identified by its <code>transactionId</code>, which is provided as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/{paymentTransactionId}/cancelScheduledPaymentTransaction</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/208d38df-8d5a-4e20-89df-15db4b3516b4/cancelScheduledPaymentTransaction'</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_id</span> <span class="o">=</span> <span class="s2">"231d2bbc-7ce3-4946-b6d9-f24f9a25ff6c"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">cancel_scheduled_payment</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                     <span class="n">reason</span><span class="p">,</span> 
                                     <span class="n">comment</span><span class="p">,</span> 
                                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'231d2bbc-7ce3-4946-b6d9-f24f9a25ff6c'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">cancel_scheduled_payment_transaction_by_id</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                                      <span class="n">created_by</span><span class="p">,</span>
                                                      <span class="n">api_key</span><span class="p">,</span>
                                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-cancel-a-scheduled-payment-attempt-retry-using-transactionexternalkey'>Cancel a scheduled payment attempt retry [using transactionExternalKey]</h3>
<p>Cancels a scheduled attempt to retry a PaymentTransaction. The transaction is identified by its <code>transactionExternalKey</code>, which is provided in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/cancelScheduledPaymentTransaction</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/cancelScheduledPaymentTransaction?transactionExternalKey=transaction'</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">transactionExternalKey</span> <span class="o">=</span> <span class="s">"example_payment_external_key"</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">cancelScheduledPaymentTransactionByExternalKey</span><span class="o">(</span><span class="n">transactionExternalKey</span><span class="o">,</span> <span class="n">inputOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                          <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">cancel_scheduled_payment</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                     <span class="n">reason</span><span class="p">,</span> 
                                     <span class="n">comment</span><span class="p">,</span> 
                                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">transaction_external_key</span> <span class="o">=</span> <span class="s">'example_payment_external_key'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">cancel_scheduled_payment_transaction_by_external_key</span><span class="p">(</span><span class="n">transaction_external_key</span><span class="p">,</span>
                                                                <span class="n">created_by</span><span class="p">,</span>
                                                                <span class="n">api_key</span><span class="p">,</span>
                                                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A payment transaction object including, as a minimum, the <code>transactionExternalKey</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-combo-api-to-create-a-new-payment-transaction-on-a-existing-or-not-account'>Combo api to create a new payment transaction on a existing (or not) account</h3>
<p>This API creates a PaymentTransaction of type AUTHORIZE, PURCHASE, or CREDIT. This is the same as the API <a href="https://killbill.github.io/slate/#account-trigger-a-payment-authorization-purchase-or-credit">Trigger a Payment</a> described with the Account endpoints. However, this API can optionally create a new Account and register a new PaymentMethod at the same time.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/combo</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
            "account": 
            {
                "name": "John Doe"
            },
            "paymentMethod": 
            {
                "pluginName": "__EXTERNAL_PAYMENT__"
            },
            "transaction":
            {
                "transactionExternalKey": "somedTransactionExternalKey",
                "transactionType": "AUTHORIZE",
                "amount": 5,
                "currency": "USD"
            }
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/combo'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">Account</span> <span class="n">account</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                        <span class="n">accountWithBalance</span><span class="o">,</span> 
                                        <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span> 
                                        <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                        <span class="n">requestOptions</span><span class="o">);</span>

<span class="n">String</span> <span class="n">paymentExternalKey</span> <span class="o">=</span> <span class="s">"5f216d82-dcc4-4e7b-9110-f3896bf6f49a"</span><span class="o">;</span>

<span class="n">ComboPaymentTransaction</span> <span class="n">result</span> <span class="o">=</span> <span class="n">createComboPaymentTransaction</span><span class="o">(</span><span class="n">account</span><span class="o">,</span> <span class="n">paymentExternalKey</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">combo_transaction</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">ComboTransaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">account</span> <span class="o">=</span> <span class="n">account_obj</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">payment_method</span> <span class="o">=</span> <span class="n">payment_method_obj</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">transaction</span> <span class="o">=</span> <span class="n">transaction_obj</span>

<span class="n">refresh_options</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="c1"># Authorization</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">auth</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                       <span class="n">reason</span><span class="p">,</span> 
                       <span class="n">comment</span><span class="p">,</span> 
                       <span class="n">options</span><span class="p">,</span> 
                       <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Purchase</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">purchase</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span> 
                           <span class="n">comment</span><span class="p">,</span> 
                           <span class="n">options</span><span class="p">,</span> 
                           <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Credit</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">credit</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                         <span class="n">reason</span><span class="p">,</span> 
                         <span class="n">comment</span><span class="p">,</span> 
                         <span class="n">options</span><span class="p">,</span> 
                         <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">ComboPaymentTransaction</span><span class="p">(</span><span class="n">account_obj</span><span class="p">,</span> <span class="n">payment_method_obj</span><span class="p">,</span> <span class="n">payment_transaction_obj</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">create_combo_payment</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                <span class="n">created_by</span><span class="p">,</span>
                                <span class="n">api_key</span><span class="p">,</span>
                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/5bebc4c3-7c64-404b-8cd4-0a2150279db8/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">ComboPaymentTransaction</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">ComboPaymentTransaction</span><span class="err">@</span><span class="mi">631731</span><span class="n">cc</span>
    <span class="nl">account:</span> <span class="kd">class</span> <span class="nc">Account</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Account</span><span class="err">@</span><span class="mi">9507</span><span class="n">aa91</span>
        <span class="nl">accountId:</span> <span class="mi">864</span><span class="n">c1418</span><span class="o">-</span><span class="n">e768</span><span class="o">-</span><span class="mi">4</span><span class="n">cd5</span><span class="o">-</span><span class="n">a0db</span><span class="o">-</span><span class="mi">67537144</span><span class="n">b685</span>
        <span class="nl">name:</span> <span class="mi">1</span><span class="n">af27661</span><span class="o">-</span><span class="n">dec0</span><span class="o">-</span><span class="mi">4903</span><span class="o">-</span><span class="n">ae76</span><span class="o">-</span><span class="mi">1783</span><span class="n">ae8f7d11</span>
        <span class="nl">firstNameLength:</span> <span class="mi">4</span>
        <span class="nl">externalKey:</span> <span class="mi">7</span><span class="n">cf53480</span><span class="o">-</span><span class="n">de54</span><span class="o">-</span><span class="mi">4428</span><span class="o">-</span><span class="n">b72e</span><span class="o">-</span><span class="mi">789</span><span class="n">b1c91e13a</span>
        <span class="nl">email:</span> <span class="n">aa2c2</span><span class="nd">@da6c8</span>
        <span class="nl">billCycleDayLocal:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">parentAccountId:</span> <span class="kc">null</span>
        <span class="nl">isPaymentDelegatedToParent:</span> <span class="kc">false</span>
        <span class="nl">paymentMethodId:</span> <span class="kc">null</span>
        <span class="nl">referenceTime:</span> <span class="kc">null</span>
        <span class="nl">timeZone:</span> <span class="n">UTC</span>
        <span class="nl">address1:</span> <span class="mi">12</span> <span class="n">rue</span> <span class="n">des</span> <span class="n">ecoles</span>
        <span class="nl">address2:</span> <span class="n">Poitier</span>
        <span class="nl">postalCode:</span> <span class="mi">44</span> <span class="mi">567</span>
        <span class="nl">company:</span> <span class="n">Renault</span>
        <span class="nl">city:</span> <span class="n">Quelque</span> <span class="n">part</span>
        <span class="nl">state:</span> <span class="n">Poitou</span>
        <span class="nl">country:</span> <span class="n">France</span>
        <span class="nl">locale:</span> <span class="n">fr</span>
        <span class="nl">phone:</span> <span class="mi">81</span> <span class="mi">53</span> <span class="mi">26</span> <span class="mi">56</span>
        <span class="nl">notes:</span> <span class="n">notes</span>
        <span class="nl">isMigrated:</span> <span class="kc">false</span>
        <span class="nl">accountBalance:</span> <span class="kc">null</span>
        <span class="nl">accountCBA:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}</span>
    <span class="nl">paymentMethod:</span> <span class="kd">class</span> <span class="nc">PaymentMethod</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentMethod</span><span class="err">@</span><span class="mi">1619</span><span class="n">f5f6</span>
        <span class="nl">paymentMethodId:</span> <span class="kc">null</span>
        <span class="nl">externalKey:</span> <span class="mi">5</span><span class="n">f216d82</span><span class="o">-</span><span class="n">dcc4</span><span class="o">-</span><span class="mi">4</span><span class="n">e7b</span><span class="o">-</span><span class="mi">9110</span><span class="o">-</span><span class="n">f3896bf6f49a</span>
        <span class="nl">accountId:</span> <span class="kc">null</span>
        <span class="nl">isDefault:</span> <span class="kc">false</span>
        <span class="nl">pluginName:</span> <span class="n">noop</span>
        <span class="nl">pluginInfo:</span> <span class="kd">class</span> <span class="nc">PaymentMethodPluginDetail</span> <span class="o">{</span>
            <span class="nl">externalPaymentMethodId:</span> <span class="kc">null</span>
            <span class="nl">isDefaultPaymentMethod:</span> <span class="kc">false</span>
            <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="o">}</span>
        <span class="nl">auditLogs:</span> <span class="kc">null</span>
    <span class="o">}</span>
    <span class="nl">transaction:</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@c4d46526</span>
        <span class="nl">transactionId:</span> <span class="kc">null</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">2</span><span class="n">eea894a</span><span class="o">-</span><span class="mi">2</span><span class="n">e1e</span><span class="o">-</span><span class="mi">44</span><span class="n">e1</span><span class="o">-</span><span class="mi">942</span><span class="n">a</span><span class="o">-</span><span class="n">eed5a40d3ee0</span>
        <span class="nl">paymentId:</span> <span class="kc">null</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">2</span><span class="n">f5fbec7</span><span class="o">-</span><span class="mi">7</span><span class="n">f32</span><span class="o">-</span><span class="mi">493</span><span class="n">c</span><span class="o">-</span><span class="n">a203</span><span class="o">-</span><span class="n">d9281f422e72</span>
        <span class="nl">transactionType:</span> <span class="n">AUTHORIZE</span>
        <span class="nl">amount:</span> <span class="mi">10</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="kc">null</span>
        <span class="nl">processedAmount:</span> <span class="kc">null</span>
        <span class="nl">processedCurrency:</span> <span class="kc">null</span>
        <span class="nl">status:</span> <span class="kc">null</span>
        <span class="nl">gatewayErrorCode:</span> <span class="kc">null</span>
        <span class="nl">gatewayErrorMsg:</span> <span class="kc">null</span>
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="kc">null</span>
    <span class="o">}</span>
    <span class="nl">paymentMethodPluginProperties:</span> <span class="o">[]</span>
    <span class="nl">transactionPluginProperties:</span> <span class="o">[]</span>
    <span class="nl">auditLogs:</span> <span class="kc">null</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"accountId"</span><span class="ss">:"86bb6cbc-1324-47fe-99f6-f0f2bf47f3da"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"125de719-c4db-4c8c-be98-2a75f0d09011"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"83"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"test_key"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"3a61344c-c9b5-4ef6-92cc-581bcb8b20de"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"a93d034b-ef54-4664-88c4-5be20272b330"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"a93d034b-ef54-4664-88c4-5be20272b330"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"125de719-c4db-4c8c-be98-2a75f0d09011"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"test_key"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body is a JSON string that represents three distinct objects: account, paymentMethod, and transaction. For example:</p>

<p>{
  &quot;account&quot;: {
  },
  &quot;paymentMethod&quot;: {
    &quot;pluginName&quot;: &quot;<strong>EXTERNAL_PAYMENT</strong>&quot;
  &quot;transaction&quot;: {
    &quot;transactionType&quot;: &quot;AUTHORIZE&quot;,
    &quot;amount&quot;: 500,
    &quot;currency&quot;: &quot;USD&quot;
  }
}</p>

<p>This example assumes that a new Account is to be created.</p>

<ol>
<li><p>No attributes are required for the account; however if the <code>currency</code> attribute is not given here it must be given for the transaction.</p></li>
<li><p>If a new account is created, a new paymentMethod must be registered for that account.  The only attribute required here is the pluginName.</p></li>
<li><p>The transaction object contains, as a minimum, the transaction type, the amount, and the currency, unless given with the account.</p></li>
</ol>

<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h2 id='payment-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to Payment objects. For details on Custom Fields see <a href="https://killbill.github.io/slate/#custom-field">Custom Field</a>.</p>
<h3 id='payment-add-custom-fields-to-payment'>Add custom fields to payment</h3>
<p>Adds one or more custom fields to a payment object. Existing custom fields are not modified.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "name": "Test Custom Field",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">paymentId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">PAYMENT</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">createPaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'PAYMENT'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                         <span class="n">user</span><span class="p">,</span>
                         <span class="n">reason</span><span class="p">,</span>
                         <span class="n">comment</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">create_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
    <span class="nl">objectType:</span> <span class="n">PAYMENT</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"PAYMENT"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing the custom field object or objects to be added.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='payment-retrieve-payment-custom-fields'>Retrieve payment custom fields</h3>
<p>Retrieves the custom fields associated with a payment</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span>
                                                                   <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"e4bac228-872d-4966-8072-2c3ac06442ed"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"PAYMENT"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Test Custom Field"</span>,
    <span class="s2">"value"</span>: <span class="s2">"test_value"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
    <span class="nl">objectType:</span> <span class="n">PAYMENT</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"PAYMENT"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'custom_field_id'</span><span class="p">:</span> <span class="s">'893e0286-2b48-493b-99af-aac9b172dc75'</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'Test Custom Field'</span><span class="p">,</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'924bebe7-58e7-40e8-a5ed-192efb59d8ee'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'PAYMENT'</span><span class="p">,</span>
 <span class="s">'value'</span><span class="p">:</span> <span class="s">'test_value'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of custom field objects</p>
<h3 id='payment-modify-custom-fields-for-a-payment'>Modify custom fields for a payment</h3>
<p>Modifies the custom fields associated with a payment object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "e4bac228-872d-4966-8072-2c3ac06442ed",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">modifyPaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                     <span class="n">customFieldModified</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Test Modify'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_modify_value'</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">modify_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Requst Body</strong></p>

<p>A JSON string representing a list of custom fields to substitute for the existing ones.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-remove-custom-fields-from-a-payment'>Remove custom fields from a payment</h3>
<p>Removes a specified set of custom fields from a payment object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/77e23878-8b9d-403b-bf31-93003e125712/customFields?customField=e4bac228-872d-4966-8072-2c3ac06442ed'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">deletePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                     <span class="n">customFieldsId</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">delete_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Comma separated list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='payment-tags'>Tags</h2>
<p>See <a href="https://killbill.github.io/slate/#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable to a Payment.</p>
<h3 id='payment-add-tags-to-a-payment'>Add tags to a payment</h3>
<p>Adds one or more tags to a payment object. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[
            "353752dd-9041-4450-b782-a8bb03a923c8"
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">createPaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                           <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                <span class="n">user</span><span class="p">,</span>
                <span class="n">reason</span><span class="p">,</span>
                <span class="n">comment</span><span class="p">,</span>
                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">create_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                               <span class="n">tag</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="p">,</span>
                               <span class="n">api_key</span><span class="p">,</span>
                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@bd138472</span>
    <span class="nl">tagId:</span> <span class="mi">1</span><span class="n">bb4b638</span><span class="o">-</span><span class="mi">3886</span><span class="o">-</span><span class="mi">4</span><span class="n">f73</span><span class="o">-</span><span class="mi">90</span><span class="n">a5</span><span class="o">-</span><span class="mi">89</span><span class="n">eb6d1bcf7f</span>
    <span class="nl">objectType:</span> <span class="n">PAYMENT</span>
    <span class="nl">objectId:</span> <span class="mi">917992</span><span class="n">d3</span><span class="o">-</span><span class="mi">5</span><span class="n">f1f</span><span class="o">-</span><span class="mi">4828</span><span class="o">-</span><span class="mi">9</span><span class="n">fff</span><span class="o">-</span><span class="mi">799</span><span class="n">cc4211aa9</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"PAYMENT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"foo"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Provides a list of tag definition Ids in JSON format</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='payment-retrieve-payment-tags'>Retrieve payment tags</h3>
<p>Retrieves all tags attached to this payment.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                           <span class="n">includedDeleted</span><span class="o">,</span> 
                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
             <span class="n">audit</span><span class="p">,</span>
             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"890e3b13-3114-478b-9365-50f1a2682143"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"PAYMENT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"foo"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@cae768d7</span>
    <span class="nl">tagId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
    <span class="nl">objectType:</span> <span class="n">PAYMENT</span>
    <span class="nl">objectId:</span> <span class="n">e659f0f3</span><span class="o">-</span><span class="mi">745</span><span class="n">c</span><span class="o">-</span><span class="mi">46</span><span class="n">d5</span><span class="o">-</span><span class="mi">953</span><span class="n">c</span><span class="o">-</span><span class="mi">28</span><span class="n">fe9282fc7d</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">TAG</span>
        <span class="nl">objectId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
        <span class="nl">changedBy:</span> <span class="n">Toto</span>
        <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
        <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
        <span class="nl">userToken:</span> <span class="n">e36f7ba5</span><span class="o">-</span><span class="n">fb5b</span><span class="o">-</span><span class="mi">41</span><span class="n">c0</span><span class="o">-</span><span class="n">b47c</span><span class="o">-</span><span class="mi">77</span><span class="n">c48ab37dd9</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"PAYMENT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"foo"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'41b6b214-c3f7-40ea-89cd-6a4ecbd9083b'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'PAYMENT'</span><span class="p">,</span>
 <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'353752dd-9041-4450-b782-a8bb03a923c8'</span><span class="p">,</span>
 <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'foo'</span><span class="p">,</span>
 <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'865e0c77-def7-4880-ac80-11c21a5e571d'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='payment-remove-tags-from-a-payment'>Remove tags from a payment</h3>
<p>Removes a list of tags attached to an invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8'</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">deletePaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                             <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                   <span class="n">user</span><span class="p">,</span>
                   <span class="n">reason</span><span class="p">,</span>
                   <span class="n">comment</span><span class="p">,</span>
                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'dce5b2a0-0f0f-430b-9427-545ba4be5c7f'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span> 

<span class="n">paymentApi</span><span class="o">.</span><span class="n">delete_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="p">,</span>
                               <span class="n">api_key</span><span class="p">,</span>
                               <span class="n">api_secret</span><span class="p">,</span>
                               <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>yes</td>
<td>none</td>
<td>List of tag definition IDs identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='payment-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='payment-retrieve-payment-audit-logs-with-history-by-id'>Retrieve payment audit logs with history by id</h3>
<p>Retrieves a list of audit log records showing events that occurred involving changes to a specified payment. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/auditLogsWithHistory'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">paymentAuditLogWithHistory</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentAuditLogsWithHistory</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_audit_logs_with_history</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">audit_logs_with_history</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-19T16:39:00.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"PAYMENT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"5d32d0ab-3c08-47b2-8c6d-bb9d2a7fd62c"</span>,
    <span class="s2">"history"</span>: 
    <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2018-07-19T16:39:00.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2018-07-19T16:39:00.000Z"</span>,
      <span class="s2">"recordId"</span>: 14,
      <span class="s2">"accountRecordId"</span>: 35,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"accountId"</span>: <span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
      <span class="s2">"paymentNumber"</span>: null,
      <span class="s2">"paymentMethodId"</span>: <span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
      <span class="s2">"externalKey"</span>: <span class="s2">"paymentExternalKey"</span>,
      <span class="s2">"stateName"</span>: null,
      <span class="s2">"lastSuccessStateName"</span>: null,
      <span class="s2">"tableName"</span>: <span class="s2">"PAYMENTS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"PAYMENT_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
    <span class="nl">changeType:</span> <span class="n">INSERT</span>
    <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
    <span class="nl">objectType:</span> <span class="n">PAYMENT</span>
    <span class="nl">objectId:</span> <span class="mi">5</span><span class="n">f8d8211</span><span class="o">-</span><span class="mi">973</span><span class="n">b</span><span class="o">-</span><span class="mi">40</span><span class="n">c2</span><span class="o">-</span><span class="n">b996</span><span class="o">-</span><span class="n">eb64c545a651</span>
    <span class="nl">changedBy:</span> <span class="n">Toto</span>
    <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
    <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
    <span class="nl">userToken:</span> <span class="mi">2529</span><span class="n">c9c2</span><span class="o">-</span><span class="mi">9916</span><span class="o">-</span><span class="mi">4306</span><span class="o">-</span><span class="mi">9270</span><span class="o">-</span><span class="n">d2bfa8bfb44b</span>
    <span class="nl">history:</span> <span class="o">{</span><span class="n">id</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">createdDate</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">updatedDate</span><span class="o">=</span><span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span><span class="o">,</span> 
              <span class="n">recordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">accountRecordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">tenantRecordId</span><span class="o">=</span><span class="mi">1</span><span class="o">,</span> 
              <span class="n">accountId</span><span class="o">=</span><span class="n">d6bf4cff</span><span class="o">-</span><span class="mi">9</span><span class="n">e13</span><span class="o">-</span><span class="mi">460</span><span class="n">f</span><span class="o">-</span><span class="n">b375</span><span class="o">-</span><span class="n">f71f7daaaa83</span><span class="o">,</span> 
              <span class="n">paymentNumber</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">paymentMethodId</span><span class="o">=</span><span class="n">abd4eb92</span><span class="o">-</span><span class="mi">5518</span><span class="o">-</span><span class="mi">4</span><span class="n">aff</span><span class="o">-</span><span class="mi">8568</span><span class="o">-</span><span class="n">dac97fe81586</span><span class="o">,</span> 
              <span class="n">externalKey</span><span class="o">=</span><span class="n">fa5bb343</span><span class="o">-</span><span class="n">ad44</span><span class="o">-</span><span class="mi">41</span><span class="n">d3</span><span class="o">-</span><span class="n">b6f0</span><span class="o">-</span><span class="mi">21</span><span class="n">a61efcbb5b</span><span class="o">,</span> 
              <span class="n">stateName</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">lastSuccessStateName</span><span class="o">=</span><span class="kc">null</span><span class="o">,</span> 
              <span class="n">tableName</span><span class="o">=</span><span class="n">PAYMENTS</span><span class="o">,</span> 
              <span class="n">historyTableName</span><span class="o">=</span><span class="n">PAYMENT_HISTORY</span><span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"changeType"</span><span class="ss">:"INSERT"</span><span class="p">,</span>
      <span class="s2">"changeDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"08a1c2e4-687f-48ca-9c38-888108a2ce0a"</span><span class="p">,</span>
      <span class="s2">"changedBy"</span><span class="ss">:"test_account_tags"</span><span class="p">,</span>
      <span class="s2">"userToken"</span><span class="ss">:"5c0632c3-6567-4b0b-8e37-e2a9bb9ab6b2"</span><span class="p">,</span>
      <span class="s2">"history"</span><span class="p">:{</span>
         <span class="s2">"id"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"createdDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"updatedDate"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"recordId"</span><span class="p">:</span><span class="mi">505</span><span class="p">,</span>
         <span class="s2">"accountRecordId"</span><span class="p">:</span><span class="mi">505</span><span class="p">,</span>
         <span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="mi">822</span><span class="p">,</span>
         <span class="s2">"externalKey"</span><span class="ss">:"1527086785-621747"</span><span class="p">,</span>
         <span class="s2">"email"</span><span class="ss">:"kill@bill.com"</span><span class="p">,</span>
         <span class="s2">"name"</span><span class="ss">:"KillBillClient"</span><span class="p">,</span>
         <span class="s2">"firstNameLength"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"parentAccountId"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"isPaymentDelegatedToParent"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"billingCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"paymentMethodId"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"referenceTime"</span><span class="ss">:"2013-08-01T06:00:00.000Z"</span><span class="p">,</span>
         <span class="s2">"timeZone"</span><span class="ss">:"UTC"</span><span class="p">,</span>
         <span class="s2">"locale"</span><span class="ss">:"fr_FR"</span><span class="p">,</span>
         <span class="s2">"address1"</span><span class="ss">:"7, yoyo road"</span><span class="p">,</span>
         <span class="s2">"address2"</span><span class="ss">:"Apt 5"</span><span class="p">,</span>
         <span class="s2">"companyName"</span><span class="ss">:"Unemployed"</span><span class="p">,</span>
         <span class="s2">"city"</span><span class="ss">:"San Francisco"</span><span class="p">,</span>
         <span class="s2">"stateOrProvince"</span><span class="ss">:"California"</span><span class="p">,</span>
         <span class="s2">"country"</span><span class="ss">:"US"</span><span class="p">,</span>
         <span class="s2">"postalCode"</span><span class="ss">:"94105"</span><span class="p">,</span>
         <span class="s2">"phone"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"notes"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"migrated"</span><span class="ss">:null</span><span class="p">,</span>
         <span class="s2">"tableName"</span><span class="ss">:"ACCOUNT"</span><span class="p">,</span>
         <span class="s2">"historyTableName"</span><span class="ss">:"ACCOUNT_HISTORY"</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'change_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
 <span class="s">'change_type'</span><span class="p">:</span> <span class="s">'INSERT'</span><span class="p">,</span>
 <span class="s">'changed_by'</span><span class="p">:</span> <span class="s">'test'</span><span class="p">,</span>
 <span class="s">'comments'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'history'</span><span class="p">:</span> <span class="p">{</span><span class="s">'created_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
             <span class="s">'id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
             <span class="s">'updated_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">())},</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'ACCOUNT'</span><span class="p">,</span>
 <span class="s">'reason_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'user_token'</span><span class="p">:</span> <span class="s">'40e771bf-160e-4ff6-82be-463f2d9e634d'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of account audit logs with history.</p>
<h3 id='payment-retrieve-payment-attempt-audit-logs-with-history-by-id'>Retrieve payment attempt audit logs with history by id</h3>
<p>Retrieves a list of audit log records showing events that occurred related to a specified payment attempt. History information is included with each record.</p>

<blockquote>
<p>Example Request:</p>

<p>Example Response:</p>
</blockquote>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of account audit logs with history.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/auditLogsWithHistory</code></p>
<h2 id='payment-list-and-search'>List and Search</h2>
<p>These endpoints allow you to list all payments or to search for a specific payment.</p>
<h3 id='payment-get-payments'>Get payments</h3>
<p>Retrieve a list of all payments for this tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/pagination'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">100L</span><span class="o">;</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not fetch plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will reflect payment attempts</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payments</span> <span class="n">payments</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPayments</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span> 
                                           <span class="n">limit</span><span class="o">,</span> 
                                           <span class="n">pluginName</span><span class="o">,</span> 
                                           <span class="n">withPluginInfo</span><span class="o">,</span> 
                                           <span class="n">withAttempts</span><span class="o">,</span> 
                                           <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> 
                        <span class="n">limit</span><span class="p">,</span> 
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payments</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"ca15adc4-1061-4e54-a9a0-15e773b3b154"</span>,
    <span class="s2">"paymentId"</span>: <span class="s2">"4634b2ae-5263-4139-99b2-e2005f09a9fd"</span>,
    <span class="s2">"paymentNumber"</span>: <span class="s2">"7"</span>,
    <span class="s2">"paymentExternalKey"</span>: <span class="s2">"4634b2ae-5263-4139-99b2-e2005f09a9fd"</span>,
    <span class="s2">"authAmount"</span>: 0,
    <span class="s2">"capturedAmount"</span>: 0,
    <span class="s2">"purchasedAmount"</span>: 0,
    <span class="s2">"refundedAmount"</span>: 0,
    <span class="s2">"creditedAmount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"paymentMethodId"</span>: <span class="s2">"dc89832d-18a3-42fd-b3be-cac074fddb36"</span>,
    <span class="s2">"transactions"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"transactionId"</span>: <span class="s2">"92935e84-fd79-4672-98bf-df84566153c6"</span>,
        <span class="s2">"transactionExternalKey"</span>: <span class="s2">"92935e84-fd79-4672-98bf-df84566153c6"</span>,
        <span class="s2">"paymentId"</span>: <span class="s2">"4634b2ae-5263-4139-99b2-e2005f09a9fd"</span>,
        <span class="s2">"paymentExternalKey"</span>: <span class="s2">"4634b2ae-5263-4139-99b2-e2005f09a9fd"</span>,
        <span class="s2">"transactionType"</span>: <span class="s2">"PURCHASE"</span>,
        <span class="s2">"amount"</span>: 1,
        <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
        <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18T15:04:05.000Z"</span>,
        <span class="s2">"processedAmount"</span>: 0,
        <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
        <span class="s2">"status"</span>: <span class="s2">"PLUGIN_FAILURE"</span>,
        <span class="s2">"gatewayErrorCode"</span>: <span class="s2">"RuntimeError"</span>,
        <span class="s2">"gatewayErrorMsg"</span>: <span class="s2">"Could not retrieve the payer info: the token is missing"</span>,
        <span class="s2">"firstPaymentReferenceId"</span>: null,
        <span class="s2">"secondPaymentReferenceId"</span>: null,
        <span class="s2">"properties"</span>: null,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"paymentAttempts"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="err">@</span><span class="mi">1</span><span class="n">f07a0c4</span>
    <span class="nl">accountId:</span> <span class="mi">7</span><span class="n">f13319c</span><span class="o">-</span><span class="mi">0</span><span class="n">beb</span><span class="o">-</span><span class="mi">4</span><span class="n">c6d</span><span class="o">-</span><span class="mi">9</span><span class="n">ef3</span><span class="o">-</span><span class="n">d26c20b1c183</span>
    <span class="nl">paymentId:</span> <span class="mi">2933</span><span class="n">e208</span><span class="o">-</span><span class="mi">4</span><span class="n">bbb</span><span class="o">-</span><span class="mi">4898</span><span class="o">-</span><span class="mi">981</span><span class="n">d</span><span class="o">-</span><span class="n">dc487fdc6e1f</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">2933</span><span class="n">e208</span><span class="o">-</span><span class="mi">4</span><span class="n">bbb</span><span class="o">-</span><span class="mi">4898</span><span class="o">-</span><span class="mi">981</span><span class="n">d</span><span class="o">-</span><span class="n">dc487fdc6e1f</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mi">0</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">8</span><span class="n">cd62a90</span><span class="o">-</span><span class="mi">48</span><span class="n">a7</span><span class="o">-</span><span class="mi">428</span><span class="n">d</span><span class="o">-</span><span class="n">b360</span><span class="o">-</span><span class="mi">9804</span><span class="n">bb85edff</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="err">@</span><span class="mi">50</span><span class="n">cedfc2</span>
        <span class="nl">transactionId:</span> <span class="mi">135100</span><span class="n">a0</span><span class="o">-</span><span class="n">b192</span><span class="o">-</span><span class="mi">45</span><span class="n">a0</span><span class="o">-</span><span class="n">b8b6</span><span class="o">-</span><span class="mi">961</span><span class="n">d31d0b492</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">135100</span><span class="n">a0</span><span class="o">-</span><span class="n">b192</span><span class="o">-</span><span class="mi">45</span><span class="n">a0</span><span class="o">-</span><span class="n">b8b6</span><span class="o">-</span><span class="mi">961</span><span class="n">d31d0b492</span>
        <span class="nl">paymentId:</span> <span class="mi">2933</span><span class="n">e208</span><span class="o">-</span><span class="mi">4</span><span class="n">bbb</span><span class="o">-</span><span class="mi">4898</span><span class="o">-</span><span class="mi">981</span><span class="n">d</span><span class="o">-</span><span class="n">dc487fdc6e1f</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">2933</span><span class="n">e208</span><span class="o">-</span><span class="mi">4</span><span class="n">bbb</span><span class="o">-</span><span class="mi">4898</span><span class="o">-</span><span class="mi">981</span><span class="n">d</span><span class="o">-</span><span class="n">dc487fdc6e1f</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">0.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">PAYMENT_FAILURE</span>
        <span class="nl">gatewayErrorCode:</span> <span class="n">gatewayErrorCode</span>
        <span class="nl">gatewayErrorMsg:</span> <span class="n">gatewayError</span>
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentAttempt</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentAttempt</span><span class="nd">@d3d09824</span>
        <span class="nl">accountId:</span> <span class="mi">7</span><span class="n">f13319c</span><span class="o">-</span><span class="mi">0</span><span class="n">beb</span><span class="o">-</span><span class="mi">4</span><span class="n">c6d</span><span class="o">-</span><span class="mi">9</span><span class="n">ef3</span><span class="o">-</span><span class="n">d26c20b1c183</span>
        <span class="nl">paymentMethodId:</span> <span class="mi">8</span><span class="n">cd62a90</span><span class="o">-</span><span class="mi">48</span><span class="n">a7</span><span class="o">-</span><span class="mi">428</span><span class="n">d</span><span class="o">-</span><span class="n">b360</span><span class="o">-</span><span class="mi">9804</span><span class="n">bb85edff</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">2933</span><span class="n">e208</span><span class="o">-</span><span class="mi">4</span><span class="n">bbb</span><span class="o">-</span><span class="mi">4898</span><span class="o">-</span><span class="mi">981</span><span class="n">d</span><span class="o">-</span><span class="n">dc487fdc6e1f</span>
        <span class="nl">transactionId:</span> <span class="mi">135100</span><span class="n">a0</span><span class="o">-</span><span class="n">b192</span><span class="o">-</span><span class="mi">45</span><span class="n">a0</span><span class="o">-</span><span class="n">b8b6</span><span class="o">-</span><span class="mi">961</span><span class="n">d31d0b492</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">135100</span><span class="n">a0</span><span class="o">-</span><span class="n">b192</span><span class="o">-</span><span class="mi">45</span><span class="n">a0</span><span class="o">-</span><span class="n">b8b6</span><span class="o">-</span><span class="mi">961</span><span class="n">d31d0b492</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">stateName:</span> <span class="n">RETRIED</span>
        <span class="nl">amount:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">pluginName:</span> <span class="n">__INVOICE_PAYMENT_CONTROL_PLUGIN__</span>
        <span class="nl">pluginProperties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">IPCD_INVOICE_ID</span>
            <span class="nl">value:</span> <span class="n">dd27083e</span><span class="o">-</span><span class="mi">6150</span><span class="o">-</span><span class="mi">41</span><span class="n">e8</span><span class="o">-</span><span class="n">a503</span><span class="o">-</span><span class="n">f35f971dc347</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentAttempt</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentAttempt</span><span class="err">@</span><span class="mi">733</span><span class="n">e1442</span>
        <span class="nl">accountId:</span> <span class="mi">7</span><span class="n">f13319c</span><span class="o">-</span><span class="mi">0</span><span class="n">beb</span><span class="o">-</span><span class="mi">4</span><span class="n">c6d</span><span class="o">-</span><span class="mi">9</span><span class="n">ef3</span><span class="o">-</span><span class="n">d26c20b1c183</span>
        <span class="nl">paymentMethodId:</span> <span class="mi">8</span><span class="n">cd62a90</span><span class="o">-</span><span class="mi">48</span><span class="n">a7</span><span class="o">-</span><span class="mi">428</span><span class="n">d</span><span class="o">-</span><span class="n">b360</span><span class="o">-</span><span class="mi">9804</span><span class="n">bb85edff</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">2933</span><span class="n">e208</span><span class="o">-</span><span class="mi">4</span><span class="n">bbb</span><span class="o">-</span><span class="mi">4898</span><span class="o">-</span><span class="mi">981</span><span class="n">d</span><span class="o">-</span><span class="n">dc487fdc6e1f</span>
        <span class="nl">transactionId:</span> <span class="kc">null</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">135100</span><span class="n">a0</span><span class="o">-</span><span class="n">b192</span><span class="o">-</span><span class="mi">45</span><span class="n">a0</span><span class="o">-</span><span class="n">b8b6</span><span class="o">-</span><span class="mi">961</span><span class="n">d31d0b492</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">stateName:</span> <span class="n">SCHEDULED</span>
        <span class="nl">amount:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">pluginName:</span> <span class="n">__INVOICE_PAYMENT_CONTROL_PLUGIN__</span>
        <span class="nl">pluginProperties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">IPCD_INVOICE_ID</span>
            <span class="nl">value:</span> <span class="n">dd27083e</span><span class="o">-</span><span class="mi">6150</span><span class="o">-</span><span class="mi">41</span><span class="n">e8</span><span class="o">-</span><span class="n">a503</span><span class="o">-</span><span class="n">f35f971dc347</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
    <span class="p">{</span>
       <span class="s2">"accountId"</span><span class="ss">:"7fd39735-87a2-4190-84a0-d28a53347bd4"</span><span class="p">,</span>
       <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
       <span class="s2">"paymentNumber"</span><span class="ss">:"65"</span><span class="p">,</span>
       <span class="s2">"paymentExternalKey"</span><span class="ss">:"example_payment_external_key"</span><span class="p">,</span>
       <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
       <span class="s2">"paymentMethodId"</span><span class="ss">:"c8d9199f-c62d-46d3-b94e-1544bbe2a5c9"</span><span class="p">,</span>
       <span class="s2">"transactions"</span><span class="p">:[</span>
          <span class="p">{</span>
             <span class="s2">"transactionId"</span><span class="ss">:"a48855a4-bbe5-43d0-9e81-016ca719abeb"</span><span class="p">,</span>
             <span class="s2">"transactionExternalKey"</span><span class="ss">:"a48855a4-bbe5-43d0-9e81-016ca719abeb"</span><span class="p">,</span>
             <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
             <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
             <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
             <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
             <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
             <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
          <span class="p">},</span>
          <span class="p">{</span>
             <span class="s2">"transactionId"</span><span class="ss">:"dff69d54-9593-4d19-893e-287720272175"</span><span class="p">,</span>
             <span class="s2">"transactionExternalKey"</span><span class="ss">:"dff69d54-9593-4d19-893e-287720272175"</span><span class="p">,</span>
             <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
             <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
             <span class="s2">"transactionType"</span><span class="ss">:"REFUND"</span><span class="p">,</span>
             <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:06.000Z"</span><span class="p">,</span>
             <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
             <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
          <span class="p">}</span>
       <span class="p">],</span>
       <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'5b23cc61-4afc-48bd-9fe8-0fafda02a00f'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'9e283f36-269b-4d51-8341-1ff354b8c631'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'9e283f36-269b-4d51-8341-1ff354b8c631'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'4acc1167-22f9-4c89-a8e7-051814ba78f0'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'533'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'9e283f36-269b-4d51-8341-1ff354b8c631'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'9e283f36-269b-4d51-8341-1ff354b8c631'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'b144e485-7570-4748-b5d2-7c25d720b264'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'b144e485-7570-4748-b5d2-7c25d720b264'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'PURCHASE'</span><span class="p">}]},</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'5b23cc61-4afc-48bd-9fe8-0fafda02a00f'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'078b62a4-1197-44b1-801d-3a0c01a53702'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'078b62a4-1197-44b1-801d-3a0c01a53702'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'4acc1167-22f9-4c89-a8e7-051814ba78f0'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'534'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'078b62a4-1197-44b1-801d-3a0c01a53702'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'078b62a4-1197-44b1-801d-3a0c01a53702'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'9c184ba0-723b-4d5b-ad57-be26fb15fd40'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'9c184ba0-723b-4d5b-ad57-be26fb15fd40'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'AUTHORIZE'</span><span class="p">}]}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all payments for this tenant.</p>
<h3 id='payment-search-payments'>Search payments</h3>
<p>Search for a payment using a specified search string. The operation returns all payment records which are matched by the search string.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/search/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"ccbc67f5-91cb-4b9a-9648-fa6aedaf0890"</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">100L</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>  <span class="c1">// Will reflect payment attempts</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payments</span> <span class="n">payments</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">searchPayments</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                                              <span class="n">offset</span><span class="o">,</span> 
                                              <span class="n">limit</span><span class="o">,</span> 
                                              <span class="n">withPluginInfo</span><span class="o">,</span> 
                                              <span class="n">withAttempts</span><span class="o">,</span> 
                                              <span class="n">pluginName</span><span class="o">,</span> 
                                              <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                              <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'PURCHASE'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                      <span class="n">offset</span><span class="p">,</span>
                                      <span class="n">limit</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'SUCCESS'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">search_payments</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"accountId"</span>: <span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span>,
    <span class="s2">"paymentId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
    <span class="s2">"paymentNumber"</span>: <span class="s2">"14"</span>,
    <span class="s2">"paymentExternalKey"</span>: <span class="s2">"paymentExternalKey"</span>,
    <span class="s2">"authAmount"</span>: 1,
    <span class="s2">"capturedAmount"</span>: 6,
    <span class="s2">"purchasedAmount"</span>: 0,
    <span class="s2">"refundedAmount"</span>: 10,
    <span class="s2">"creditedAmount"</span>: 0,
    <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
    <span class="s2">"paymentMethodId"</span>: <span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span>,
    <span class="s2">"transactions"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"transactionId"</span>: <span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span>,
        <span class="s2">"transactionExternalKey"</span>: <span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span>,
        <span class="s2">"paymentId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
        <span class="s2">"paymentExternalKey"</span>: <span class="s2">"paymentExternalKey"</span>,
        <span class="s2">"transactionType"</span>: <span class="s2">"AUTHORIZE"</span>,
        <span class="s2">"amount"</span>: 1,
        <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
        <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19T16:39:00.000Z"</span>,
        <span class="s2">"processedAmount"</span>: 1,
        <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
        <span class="s2">"status"</span>: <span class="s2">"SUCCESS"</span>,
        <span class="s2">"gatewayErrorCode"</span>: null,
        <span class="s2">"gatewayErrorMsg"</span>: null,
        <span class="s2">"firstPaymentReferenceId"</span>: null,
        <span class="s2">"secondPaymentReferenceId"</span>: null,
        <span class="s2">"properties"</span>: null,
        <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
      <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">"paymentAttempts"</span>: null,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Payment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Payment</span><span class="err">@</span><span class="mi">9</span><span class="n">e017939</span>
    <span class="nl">accountId:</span> <span class="n">ccbc67f5</span><span class="o">-</span><span class="mi">91</span><span class="n">cb</span><span class="o">-</span><span class="mi">4</span><span class="n">b9a</span><span class="o">-</span><span class="mi">9648</span><span class="o">-</span><span class="n">fa6aedaf0890</span>
    <span class="nl">paymentId:</span> <span class="mi">0</span><span class="n">f8ecfc9</span><span class="o">-</span><span class="mi">48</span><span class="n">f4</span><span class="o">-</span><span class="mi">48</span><span class="n">da</span><span class="o">-</span><span class="n">a01a</span><span class="o">-</span><span class="mi">929</span><span class="n">f5d466351</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">0</span><span class="n">f8ecfc9</span><span class="o">-</span><span class="mi">48</span><span class="n">f4</span><span class="o">-</span><span class="mi">48</span><span class="n">da</span><span class="o">-</span><span class="n">a01a</span><span class="o">-</span><span class="mi">929</span><span class="n">f5d466351</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mi">0</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="n">ac1c90d5</span><span class="o">-</span><span class="mi">30</span><span class="n">d4</span><span class="o">-</span><span class="mi">484</span><span class="n">e</span><span class="o">-</span><span class="mi">9</span><span class="n">da0</span><span class="o">-</span><span class="mi">918</span><span class="n">a8fff5f7d</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@dd504973</span>
        <span class="nl">transactionId:</span> <span class="n">d4bde19e</span><span class="o">-</span><span class="mi">299</span><span class="n">e</span><span class="o">-</span><span class="mi">402</span><span class="n">f</span><span class="o">-</span><span class="mi">8105</span><span class="o">-</span><span class="mi">3</span><span class="n">f241cc21db0</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">d4bde19e</span><span class="o">-</span><span class="mi">299</span><span class="n">e</span><span class="o">-</span><span class="mi">402</span><span class="n">f</span><span class="o">-</span><span class="mi">8105</span><span class="o">-</span><span class="mi">3</span><span class="n">f241cc21db0</span>
        <span class="nl">paymentId:</span> <span class="mi">0</span><span class="n">f8ecfc9</span><span class="o">-</span><span class="mi">48</span><span class="n">f4</span><span class="o">-</span><span class="mi">48</span><span class="n">da</span><span class="o">-</span><span class="n">a01a</span><span class="o">-</span><span class="mi">929</span><span class="n">f5d466351</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">0</span><span class="n">f8ecfc9</span><span class="o">-</span><span class="mi">48</span><span class="n">f4</span><span class="o">-</span><span class="mi">48</span><span class="n">da</span><span class="o">-</span><span class="n">a01a</span><span class="o">-</span><span class="mi">929</span><span class="n">f5d466351</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">0.00</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">PAYMENT_FAILURE</span>
        <span class="nl">gatewayErrorCode:</span> <span class="n">gatewayErrorCode</span>
        <span class="nl">gatewayErrorMsg:</span> <span class="n">gatewayError</span>
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentAttempt</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentAttempt</span><span class="nd">@a9c18de</span>
        <span class="nl">accountId:</span> <span class="n">ccbc67f5</span><span class="o">-</span><span class="mi">91</span><span class="n">cb</span><span class="o">-</span><span class="mi">4</span><span class="n">b9a</span><span class="o">-</span><span class="mi">9648</span><span class="o">-</span><span class="n">fa6aedaf0890</span>
        <span class="nl">paymentMethodId:</span> <span class="n">ac1c90d5</span><span class="o">-</span><span class="mi">30</span><span class="n">d4</span><span class="o">-</span><span class="mi">484</span><span class="n">e</span><span class="o">-</span><span class="mi">9</span><span class="n">da0</span><span class="o">-</span><span class="mi">918</span><span class="n">a8fff5f7d</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">0</span><span class="n">f8ecfc9</span><span class="o">-</span><span class="mi">48</span><span class="n">f4</span><span class="o">-</span><span class="mi">48</span><span class="n">da</span><span class="o">-</span><span class="n">a01a</span><span class="o">-</span><span class="mi">929</span><span class="n">f5d466351</span>
        <span class="nl">transactionId:</span> <span class="n">d4bde19e</span><span class="o">-</span><span class="mi">299</span><span class="n">e</span><span class="o">-</span><span class="mi">402</span><span class="n">f</span><span class="o">-</span><span class="mi">8105</span><span class="o">-</span><span class="mi">3</span><span class="n">f241cc21db0</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">d4bde19e</span><span class="o">-</span><span class="mi">299</span><span class="n">e</span><span class="o">-</span><span class="mi">402</span><span class="n">f</span><span class="o">-</span><span class="mi">8105</span><span class="o">-</span><span class="mi">3</span><span class="n">f241cc21db0</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">stateName:</span> <span class="n">RETRIED</span>
        <span class="nl">amount:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">pluginName:</span> <span class="n">__INVOICE_PAYMENT_CONTROL_PLUGIN__</span>
        <span class="nl">pluginProperties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">IPCD_INVOICE_ID</span>
            <span class="nl">value:</span> <span class="mi">4</span><span class="n">aafe2fe</span><span class="o">-</span><span class="mi">0</span><span class="n">bd0</span><span class="o">-</span><span class="mi">47</span><span class="n">d6</span><span class="o">-</span><span class="n">b58a</span><span class="o">-</span><span class="mi">7</span><span class="n">a12a15ccdea</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentAttempt</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentAttempt</span><span class="err">@</span><span class="mi">4</span><span class="n">d117a78</span>
        <span class="nl">accountId:</span> <span class="n">ccbc67f5</span><span class="o">-</span><span class="mi">91</span><span class="n">cb</span><span class="o">-</span><span class="mi">4</span><span class="n">b9a</span><span class="o">-</span><span class="mi">9648</span><span class="o">-</span><span class="n">fa6aedaf0890</span>
        <span class="nl">paymentMethodId:</span> <span class="n">ac1c90d5</span><span class="o">-</span><span class="mi">30</span><span class="n">d4</span><span class="o">-</span><span class="mi">484</span><span class="n">e</span><span class="o">-</span><span class="mi">9</span><span class="n">da0</span><span class="o">-</span><span class="mi">918</span><span class="n">a8fff5f7d</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">0</span><span class="n">f8ecfc9</span><span class="o">-</span><span class="mi">48</span><span class="n">f4</span><span class="o">-</span><span class="mi">48</span><span class="n">da</span><span class="o">-</span><span class="n">a01a</span><span class="o">-</span><span class="mi">929</span><span class="n">f5d466351</span>
        <span class="nl">transactionId:</span> <span class="kc">null</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">d4bde19e</span><span class="o">-</span><span class="mi">299</span><span class="n">e</span><span class="o">-</span><span class="mi">402</span><span class="n">f</span><span class="o">-</span><span class="mi">8105</span><span class="o">-</span><span class="mi">3</span><span class="n">f241cc21db0</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mo">04</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">stateName:</span> <span class="n">SCHEDULED</span>
        <span class="nl">amount:</span> <span class="kc">null</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">pluginName:</span> <span class="n">__INVOICE_PAYMENT_CONTROL_PLUGIN__</span>
        <span class="nl">pluginProperties:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PluginProperty</span> <span class="o">{</span>
            <span class="nl">key:</span> <span class="n">IPCD_INVOICE_ID</span>
            <span class="nl">value:</span> <span class="mi">4</span><span class="n">aafe2fe</span><span class="o">-</span><span class="mi">0</span><span class="n">bd0</span><span class="o">-</span><span class="mi">47</span><span class="n">d6</span><span class="o">-</span><span class="n">b58a</span><span class="o">-</span><span class="mi">7</span><span class="n">a12a15ccdea</span>
            <span class="nl">isUpdatable:</span> <span class="kc">false</span>
        <span class="o">}]</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
    <span class="p">{</span>
       <span class="s2">"accountId"</span><span class="ss">:"7fd39735-87a2-4190-84a0-d28a53347bd4"</span><span class="p">,</span>
       <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
       <span class="s2">"paymentNumber"</span><span class="ss">:"65"</span><span class="p">,</span>
       <span class="s2">"paymentExternalKey"</span><span class="ss">:"example_payment_external_key"</span><span class="p">,</span>
       <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
       <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
       <span class="s2">"paymentMethodId"</span><span class="ss">:"c8d9199f-c62d-46d3-b94e-1544bbe2a5c9"</span><span class="p">,</span>
       <span class="s2">"transactions"</span><span class="p">:[</span>
          <span class="p">{</span>
             <span class="s2">"transactionId"</span><span class="ss">:"a48855a4-bbe5-43d0-9e81-016ca719abeb"</span><span class="p">,</span>
             <span class="s2">"transactionExternalKey"</span><span class="ss">:"a48855a4-bbe5-43d0-9e81-016ca719abeb"</span><span class="p">,</span>
             <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
             <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
             <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
             <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
             <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
             <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
          <span class="p">},</span>
          <span class="p">{</span>
             <span class="s2">"transactionId"</span><span class="ss">:"dff69d54-9593-4d19-893e-287720272175"</span><span class="p">,</span>
             <span class="s2">"transactionExternalKey"</span><span class="ss">:"dff69d54-9593-4d19-893e-287720272175"</span><span class="p">,</span>
             <span class="s2">"paymentId"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
             <span class="s2">"paymentExternalKey"</span><span class="ss">:"12c70604-cede-4df3-a321-38be4d176e9a"</span><span class="p">,</span>
             <span class="s2">"transactionType"</span><span class="ss">:"REFUND"</span><span class="p">,</span>
             <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:06.000Z"</span><span class="p">,</span>
             <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
             <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
             <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
             <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
          <span class="p">}</span>
       <span class="p">],</span>
       <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
    <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'494df5a9-d8da-4e56-852a-459fdaca85d1'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'9988364a-3f86-4fcf-8a49-35ba6d1c1a93'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'9988364a-3f86-4fcf-8a49-35ba6d1c1a93'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'b7c26570-3515-4055-a8a8-4d6d4b45dc28'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'537'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'9988364a-3f86-4fcf-8a49-35ba6d1c1a93'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'9988364a-3f86-4fcf-8a49-35ba6d1c1a93'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'0fa4d97d-086b-43b3-a9f2-085c9cc382c2'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'0fa4d97d-086b-43b3-a9f2-085c9cc382c2'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'PURCHASE'</span><span class="p">}]},</span> <span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'494df5a9-d8da-4e56-852a-459fdaca85d1'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'b937a96e-36b4-46fa-a609-64d568403551'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'b937a96e-36b4-46fa-a609-64d568403551'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'b7c26570-3515-4055-a8a8-4d6d4b45dc28'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'538'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'b937a96e-36b4-46fa-a609-64d568403551'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'b937a96e-36b4-46fa-a609-64d568403551'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'49884122-aa64-4518-b2de-55fe4fbde856'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'49884122-aa64-4518-b2de-55fe4fbde856'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'AUTHORIZE'</span><span class="p">}]}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>What you want to find</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all payments matched with the search key entered.</p>
<h1 id='payment-transaction'>Payment Transaction</h1>
<p>Payment transactions belong to a <a href="https://killbill.github.io/slate/#payment-payment-resource">Payment</a> object.</p>

<p>They represent a particular payment operation, and while most operations happen at the <code>Payment</code> level, there are a few endpoints
that work directly at the transaction level.</p>
<h2 id='payment-transaction-payments-transaction'>Payments Transaction</h2><h4 id='payment-transaction-paymenttransaction'>PaymentTransaction</h4>
<ul>
<li><strong><code>transactionId</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: The <code>ID</code> allocated by Kill Bill upon creation.</li>
<li><strong><code>transactionExternalKey</code></strong> <span style="color:#32A9C7"><em>[User generated, default transactionId, immutable]</em></span>: The external key provided from client.</li>
<li><strong><code>paymentId</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: The <code>ID</code> allocated by Kill Bill upon creation.</li>
<li><strong><code>paymentExternalKey</code></strong> <span style="color:#32A9C7"><em>[User generated, default null, immutable]</em></span>: The (<code>Payment</code>) external key provided from client.</li>
<li><strong><code>amount</code></strong> <span style="color:#32A9C7"><em>[User generated, immutable]</em></span>: Amount for this transaction.</li>
<li><strong><code>currency</code></strong> <span style="color:#32A9C7"><em>[User generated, immutable]</em></span>: Currency for this transaction.</li>
<li><strong><code>effectiveDate</code></strong> <span style="color:#32A9C7"><em>[User generated, immutable]</em></span>: The effective date of the transaction.</li>
<li><strong><code>processedAmount</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: The amount processed by the gateway -- will often match the <code>amount</code>, but could be different - e.g currency conversion</li>
<li><strong><code>processedCurrency</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: The currency processed by the gateway -- will often match the <code>currency</code>, but could be different - e.g currency conversion</li>
<li><strong><code>status</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: Transaction status </li>
<li><strong><code>gatewayErrorCode</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: Error code returned by the payment gateway.</li>
<li><strong><code>gatewayErrorMsg</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: Error message returned by the payment gateway.</li>
<li><strong><code>firstPaymentReferenceId</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: Payment gateway reference.</li>
<li><strong><code>secondPaymentReferenceId</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: This is typically the <code>ID</code> from the actual payment processor, when the gateway is a PSP.</li>
<li><strong><code>properties</code></strong> <span style="color:#32A9C7"><em>[User generated, immutable]</em></span>: Properties passed during payment operation to be interpreted by the plugin - those are plugin specific.</li>
</ul>
<h3 id='payment-transaction-retrieve-a-payment-by-transaction-external-key'>Retrieve a payment by transaction external key</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/paymentTransactions?transactionExternalKey=07655b3c-7f17-4172-b193-ece48e5741ad"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"paymentId"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
  <span class="s2">"paymentNumber"</span>: <span class="s2">"47"</span>,
  <span class="s2">"paymentExternalKey"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
  <span class="s2">"authAmount"</span>: 0,
  <span class="s2">"capturedAmount"</span>: 0,
  <span class="s2">"purchasedAmount"</span>: 0,
  <span class="s2">"refundedAmount"</span>: 0,
  <span class="s2">"creditedAmount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"paymentMethodId"</span>: <span class="s2">"c02fa9b0-ae95-42ae-9010-bc11cb160947"</span>,
  <span class="s2">"transactions"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"transactionId"</span>: <span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span>,
      <span class="s2">"transactionExternalKey"</span>: <span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span>,
      <span class="s2">"paymentId"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
      <span class="s2">"paymentExternalKey"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
      <span class="s2">"transactionType"</span>: <span class="s2">"AUTHORIZE"</span>,
      <span class="s2">"amount"</span>: 0,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
      <span class="s2">"processedAmount"</span>: 0,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"status"</span>: <span class="s2">"SUCCESS"</span>,
      <span class="s2">"gatewayErrorCode"</span>: null,
      <span class="s2">"gatewayErrorMsg"</span>: null,
      <span class="s2">"firstPaymentReferenceId"</span>: null,
      <span class="s2">"secondPaymentReferenceId"</span>: null,
      <span class="s2">"properties"</span>: null,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"paymentAttempts"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>transactionExternalKey</strong></td>
<td>string</td>
<td>true</td>
<td>transaction external key</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>true</td>
<td>choose true if you want plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>true</td>
<td>choose true if you want payment attempts</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a payment transaction object.</p>
<h3 id='payment-transaction-retrieve-a-payment-by-transaction-id'>Retrieve a payment by transaction id</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/paymentTransactions/07655b3c-7f17-4172-b193-ece48e5741ad"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">{</span>
  <span class="s2">"accountId"</span>: <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>,
  <span class="s2">"paymentId"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
  <span class="s2">"paymentNumber"</span>: <span class="s2">"47"</span>,
  <span class="s2">"paymentExternalKey"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
  <span class="s2">"authAmount"</span>: 0,
  <span class="s2">"capturedAmount"</span>: 0,
  <span class="s2">"purchasedAmount"</span>: 0,
  <span class="s2">"refundedAmount"</span>: 0,
  <span class="s2">"creditedAmount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"paymentMethodId"</span>: <span class="s2">"c02fa9b0-ae95-42ae-9010-bc11cb160947"</span>,
  <span class="s2">"transactions"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"transactionId"</span>: <span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span>,
      <span class="s2">"transactionExternalKey"</span>: <span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span>,
      <span class="s2">"paymentId"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
      <span class="s2">"paymentExternalKey"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
      <span class="s2">"transactionType"</span>: <span class="s2">"AUTHORIZE"</span>,
      <span class="s2">"amount"</span>: 0,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
      <span class="s2">"processedAmount"</span>: 0,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"status"</span>: <span class="s2">"SUCCESS"</span>,
      <span class="s2">"gatewayErrorCode"</span>: null,
      <span class="s2">"gatewayErrorMsg"</span>: null,
      <span class="s2">"firstPaymentReferenceId"</span>: null,
      <span class="s2">"secondPaymentReferenceId"</span>: null,
      <span class="s2">"properties"</span>: null,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"paymentAttempts"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>true</td>
<td>choose true if you want plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>true</td>
<td>choose true if you want payment attempts</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a payment transaction object.</p>
<h3 id='payment-transaction-mark-a-pending-payment-transaction-as-succeeded-or-failed'>Mark a pending payment transaction as succeeded or failed</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[{"paymentId": "e8edd4c6-2f85-4375-95f3-e78ca4d85b82", "status": "SUCCESS"}]'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/paymentTransactions/07655b3c-7f17-4172-b193-ece48e5741ad"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A 201 http status without content.</p>
<h3 id='payment-transaction-retrieve-payment-transaction-audit-logs-with-history-by-id'>Retrieve payment transaction audit logs with history by id</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/paymentTransactions/07655b3c-7f17-4172-b193-ece48e5741ad/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"TRANSACTION"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"84ac4088-dc76-4fde-9ff0-63e228b5e6fc"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
      <span class="s2">"recordId"</span>: 63,
      <span class="s2">"accountRecordId"</span>: 120,
      <span class="s2">"tenantRecordId"</span>: 101,
      <span class="s2">"attemptId"</span>: null,
      <span class="s2">"paymentId"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
      <span class="s2">"transactionExternalKey"</span>: <span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span>,
      <span class="s2">"transactionType"</span>: <span class="s2">"AUTHORIZE"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
      <span class="s2">"transactionStatus"</span>: <span class="s2">"UNKNOWN"</span>,
      <span class="s2">"amount"</span>: 0,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"processedAmount"</span>: null,
      <span class="s2">"processedCurrency"</span>: null,
      <span class="s2">"gatewayErrorCode"</span>: null,
      <span class="s2">"gatewayErrorMsg"</span>: null,
      <span class="s2">"tableName"</span>: <span class="s2">"PAYMENT_TRANSACTIONS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"PAYMENT_TRANSACTION_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"TRANSACTION"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"84ac4088-dc76-4fde-9ff0-63e228b5e6fc"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
      <span class="s2">"recordId"</span>: 63,
      <span class="s2">"accountRecordId"</span>: 120,
      <span class="s2">"tenantRecordId"</span>: 101,
      <span class="s2">"attemptId"</span>: null,
      <span class="s2">"paymentId"</span>: <span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span>,
      <span class="s2">"transactionExternalKey"</span>: <span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span>,
      <span class="s2">"transactionType"</span>: <span class="s2">"AUTHORIZE"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-18T18:58:11.000Z"</span>,
      <span class="s2">"transactionStatus"</span>: <span class="s2">"SUCCESS"</span>,
      <span class="s2">"amount"</span>: 0,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"processedAmount"</span>: 0,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"gatewayErrorCode"</span>: null,
      <span class="s2">"gatewayErrorMsg"</span>: null,
      <span class="s2">"tableName"</span>: <span class="s2">"PAYMENT_TRANSACTIONS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"PAYMENT_TRANSACTION_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>true</td>
<td>choose true if you want plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>true</td>
<td>choose true if you want payment attempts</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a payment transaction object.</p>
<h2 id='payment-transaction-custom-fields'>Custom Fields</h2>
<p>Custom fields are {key, value} attributes that can be attached to any customer resources, and in particularly on the <code>PaymentTransaction</code> objects.</p>
<h3 id='payment-transaction-add-custom-fields-to-payment-transaction'>Add custom fields to payment transaction</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "objectId": "8fe697d4-2c25-482c-aa45-f6cd5a48186d",
            "objectType": "TRANSACTION",
            "name": "Test Custom Field",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">paymentTransactionId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">TRANSACTION</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">PaymentTransactionApi</span><span class="o">.</span><span class="na">createTransactionCustomFields</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                    <span class="n">customFields</span><span class="o">,</span> 
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">create_transaction_custom_fields</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                                       <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
    <span class="nl">objectType:</span> <span class="n">TRANSACTION</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a custom field object.</p>
<h3 id='payment-transaction-retrieve-payment-transaction-custom-fields'>Retrieve payment transaction custom fields</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">getTransactionCustomFields</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span>
                                                                                  <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                                  <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">get_transaction_custom_fields</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"e4bac228-872d-4966-8072-2c3ac06442ed"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"TRANSACTION"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Test Custom Field"</span>,
    <span class="s2">"value"</span>: <span class="s2">"test_value"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="n">cca08349</span><span class="o">-</span><span class="mi">8</span><span class="n">b26</span><span class="o">-</span><span class="mi">41</span><span class="n">c7</span><span class="o">-</span><span class="n">bfcc</span><span class="o">-</span><span class="mi">2</span><span class="n">e3cf70a0f28</span>
    <span class="nl">objectType:</span> <span class="n">TRANSACTION</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'custom_field_id'</span><span class="p">:</span> <span class="s">'893e0286-2b48-493b-99af-aac9b172dc75'</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'Test Custom Field'</span><span class="p">,</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'924bebe7-58e7-40e8-a5ed-192efb59d8ee'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'TRANSACTION'</span><span class="p">,</span>
 <span class="s">'value'</span><span class="p">:</span> <span class="s">'test_value'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>enum</td>
<td>false</td>
<td>level of audit logs returned</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of custom field objects.</p>
<h3 id='payment-transaction-modify-custom-fields-to-payment-transaction'>Modify custom fields to payment transaction</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "e4bac228-872d-4966-8072-2c3ac06442ed",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">modifyTransactionCustomFields</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                    <span class="n">customFieldModified</span><span class="o">,</span> 
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Test Modify'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_modify_value'</span><span class="p">)</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">modify_transaction_custom_fields</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                                       <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A <code>204</code> http status without content.</p>
<h3 id='payment-transaction-remove-custom-fields-from-payment-transaction'>Remove custom fields from payment transaction</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/77e23878-8b9d-403b-bf31-93003e125712/customFields?customField=e4bac228-872d-4966-8072-2c3ac06442ed'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">deleteTransactionCustomFields</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                    <span class="n">customFieldsId</span><span class="o">,</span> 
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">delete_transaction_custom_fields</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>true</td>
<td>the list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>A <code>204</code> http status without content.</p>
<h2 id='payment-transaction-tags'>Tags</h2>
<p>See section <a href="#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable for an <code>PaymentTransaction</code>.</p>

<p>Let&#39;s assume there is an existing <code>user</code> tagDefintion already created with <code>tagDefinitionId</code>=<code>353752dd-9041-4450-b782-a8bb03a923c8</code>.</p>
<h3 id='payment-transaction-add-tags-to-payment-transaction'>Add tags to payment transaction</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[
            "353752dd-9041-4450-b782-a8bb03a923c8"
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">PaymentTransactionApi</span><span class="o">.</span><span class="na">createTransactionTags</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                          <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">create_transaction_tags</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                              <span class="n">tag</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@bd138472</span>
    <span class="nl">tagId:</span> <span class="mi">1</span><span class="n">bb4b638</span><span class="o">-</span><span class="mi">3886</span><span class="o">-</span><span class="mi">4</span><span class="n">f73</span><span class="o">-</span><span class="mi">90</span><span class="n">a5</span><span class="o">-</span><span class="mi">89</span><span class="n">eb6d1bcf7f</span>
    <span class="nl">objectType:</span> <span class="n">TRANSACTION</span>
    <span class="nl">objectId:</span> <span class="mi">917992</span><span class="n">d3</span><span class="o">-</span><span class="mi">5</span><span class="n">f1f</span><span class="o">-</span><span class="mi">4828</span><span class="o">-</span><span class="mi">9</span><span class="n">fff</span><span class="o">-</span><span class="mi">799</span><span class="n">cc4211aa9</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">AUTO_PAY_OFF</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A <code>201</code> http status without content.</p>
<h3 id='payment-transaction-retrieve-payment-transaction-tags'>Retrieve payment transaction tags</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">getTransactionTags</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                          <span class="n">includedDeleted</span><span class="o">,</span> 
                                                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">get_transaction_tags</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"890e3b13-3114-478b-9365-50f1a2682143"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"TRANSACTION"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"foo"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@cae768d7</span>
    <span class="nl">tagId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
    <span class="nl">objectType:</span> <span class="n">TRANSACTION</span>
    <span class="nl">objectId:</span> <span class="n">e659f0f3</span><span class="o">-</span><span class="mi">745</span><span class="n">c</span><span class="o">-</span><span class="mi">46</span><span class="n">d5</span><span class="o">-</span><span class="mi">953</span><span class="n">c</span><span class="o">-</span><span class="mi">28</span><span class="n">fe9282fc7d</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">TAG</span>
        <span class="nl">objectId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
        <span class="nl">changedBy:</span> <span class="n">Toto</span>
        <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
        <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
        <span class="nl">userToken:</span> <span class="n">e36f7ba5</span><span class="o">-</span><span class="n">fb5b</span><span class="o">-</span><span class="mi">41</span><span class="n">c0</span><span class="o">-</span><span class="n">b47c</span><span class="o">-</span><span class="mi">77</span><span class="n">c48ab37dd9</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'41b6b214-c3f7-40ea-89cd-6a4ecbd9083b'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'TRANSACTION'</span><span class="p">,</span>
 <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'353752dd-9041-4450-b782-a8bb03a923c8'</span><span class="p">,</span>
 <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'foo'</span><span class="p">,</span>
 <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'865e0c77-def7-4880-ac80-11c21a5e571d'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>enum</td>
<td>false</td>
<td>level of audit logs returned</td>
</tr>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>false</td>
<td>choose true if you want to include deleted tags</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of bundle tag objects.</p>
<h3 id='payment-transaction-remove-tags-from-payment-transaction'>Remove tags from payment transaction</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/tags</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>string</td>
<td>true</td>
<td>the list of tag definition ID identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8'</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">deleteTransactionTags</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                            <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'dce5b2a0-0f0f-430b-9427-545ba4be5c7f'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span> 

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">delete_transaction_tags</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">,</span>
                                              <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>string</td>
<td>true</td>
<td>list with tag definition id&#39;s that you want to remove it</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>A <code>204</code> http status without content.</p>
<h1 id='invoice-payment'>Invoice Payment</h1><h2 id='invoice-payment-invoice-payment-resource'>Invoice Payment Resource</h2>
<p>The <code>Invoice Payment</code> resource represents a given payment associated with a given invoice. Kill Bill allows to have multiple partial payments against a given invoice, however in the default recurring mode for instance, the system will always attempt to make a full payment.</p>

<p>Partial payments can be made against unpaid - or partially paid - invoices by triggerring a payment against the <code>Invoice</code> resource -- see below. Note that, while Kill Bill supports multiple partial payments against a given invoice, the reverse is not true: A payment across multiple invoices is not (yet) supported. The description of the <code>System</code> v.s <code>User</code> generated fields below match those from the associated <code>Payment</code> and <code>Invoice</code> resources.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>targetInvoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice to be paid</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account to be paid</td>
</tr>
<tr>
<td><strong>paymentId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment</td>
</tr>
<tr>
<td><strong>paymentNumber</strong></td>
<td>number</td>
<td>user</td>
<td>User&#39;s ID number for the payment</td>
</tr>
<tr>
<td><strong>paymentExternalKey</strong></td>
<td>string</td>
<td>user</td>
<td>optional external key</td>
</tr>
<tr>
<td><strong>authAmonunt</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total authorized amount</td>
</tr>
<tr>
<td><strong>capturedAmonunt</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total captured amount</td>
</tr>
<tr>
<td><strong>purchasedAmonunt</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total purchased amount</td>
</tr>
<tr>
<td><strong>refundedAmount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total refunded amount</td>
</tr>
<tr>
<td><strong>creditedAmount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total credited amount (see note below)</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user</td>
<td>currency to be used</td>
</tr>
<tr>
<td><strong>paymentMethod</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment method used</td>
</tr>
<tr>
<td><strong>transactions</strong></td>
<td>list</td>
<td>system</td>
<td>list of paymentTransactions, if any</td>
</tr>
<tr>
<td><strong>paymentAttempts</strong></td>
<td>list</td>
<td>system</td>
<td>list of paymentAttempts, if any</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>list</td>
<td>system</td>
<td>audit event logs, if any</td>
</tr>
</tbody></table>

<p>The attributes are the following:</p>

<ul>
<li><strong><code>paymentId</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>. The <code>ID</code> allocated by Kill Bill upon creation.</li>
<li><strong><code>accountId</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>. The <code>ID</code> allocated by Kill Bill upon creation.</li>
<li><strong><code>targetInvoiceId</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>. The <code>ID</code> allocated by Kill Bill upon creation.</li>
<li><strong><code>paymentNumber</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>. Unique reference number.</li>
<li><strong><code>paymentExternalKey</code></strong> <span style="color:#32A9C7"><em>[User generated, default <code>paymentId</code>, immutable]</em></span>. Unique key specified by the user or generated by the system.</li>
<li><strong><code>authAmount</code></strong> <span style="color:#32A9C7"><em>[User or system generated]</em></span>. Total authorization amount across the transactions associated with the <code>Payment</code></li>
<li><strong><code>capturedAmount</code></strong> <span style="color:#32A9C7"><em>[User or system generated]</em></span>. Total capture amount across the transactions associated with the <code>Payment</code></li>
<li><strong><code>purchasedAmount</code></strong> <span style="color:#32A9C7"><em>[User or system generated]</em></span>. Total purchase amount across the transactions associated with the <code>Payment</code></li>
<li><strong><code>refundedAmount</code></strong> <span style="color:#32A9C7"><em>[User or system generated]</em></span>. Total refund amount across the transactions associated with the <code>Payment</code></li>
<li><strong><code>creditedAmount</code></strong> <span style="color:#32A9C7">&quot;<em>[User or system generated]</em></span>. Total credit amount across the transactions associated with the <code>Payment</code>. Beware, this credit represents the actual money send back by the merchant to the user -- extremely rare --, and is unrelated to the associated invoice or account credits.</li>
<li><strong><code>currency</code></strong> <span style="color:#32A9C7"><em>[User or system generated]</em></span>. Currency associated with the <code>Account</code>.</li>
<li><strong><code>paymentMethodId</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>. The <code>ID</code> of the payment method that was used to make this payment.</li>
<li><strong><code>transactions</code></strong> <span style="color:#32A9C7"><em>[See <code>PaymentTransaction</code> below]</em></span>. A list of payment transactions, which could be of different types - e.g <code>PURCHASE</code>, <code>REFUND</code></li>
<li><strong><code>paymentAttempts</code></strong> <span style="color:#32A9C7"><em>[See <code>PaymentAttempt</code> below]</em></span>. A list of payment attempts when the system is configured to retry failed payments.</li>
</ul>
<h2 id='invoice-payment-invoice-payment'>Invoice Payment</h2><h3 id='invoice-payment-retrieve-a-payment-by-id'>Retrieve a payment by id</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"80f5bfca-e142-4320-b8f2-ae4530ca7172"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">InvoicePayment</span> <span class="n">invoicePayment</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">getInvoicePayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                                    <span class="n">withPluginInfo</span><span class="o">,</span>
                                                                    <span class="n">withAttempts</span><span class="o">,</span>
                                                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span>
                                                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'28aef37a-7655-4351-985a-02b961ae4ac7'</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_attempts</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                 <span class="n">with_plugin_info</span><span class="p">,</span> 
                                                 <span class="n">with_attempts</span><span class="p">,</span> 
                                                 <span class="vi">@options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">get_invoice_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">{</span>
  <span class="s2">"targetInvoiceId"</span>: <span class="s2">"4be34fe4-5845-4a35-afd8-632ad04cccf9"</span>,
  <span class="s2">"accountId"</span>: <span class="s2">"8b66b9f9-bfb4-463a-86c7-e267128a294a"</span>,
  <span class="s2">"paymentId"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
  <span class="s2">"paymentNumber"</span>: <span class="s2">"19"</span>,
  <span class="s2">"paymentExternalKey"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
  <span class="s2">"authAmount"</span>: 0,
  <span class="s2">"capturedAmount"</span>: 0,
  <span class="s2">"purchasedAmount"</span>: 500,
  <span class="s2">"refundedAmount"</span>: 0,
  <span class="s2">"creditedAmount"</span>: 0,
  <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
  <span class="s2">"paymentMethodId"</span>: <span class="s2">"39f3461c-5357-42f7-a8a9-ec79502fdb6b"</span>,
  <span class="s2">"transactions"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"transactionId"</span>: <span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span>,
      <span class="s2">"transactionExternalKey"</span>: <span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span>,
      <span class="s2">"paymentId"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
      <span class="s2">"paymentExternalKey"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
      <span class="s2">"transactionType"</span>: <span class="s2">"PURCHASE"</span>,
      <span class="s2">"amount"</span>: 500,
      <span class="s2">"currency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"effectiveDate"</span>: <span class="s2">"2018-07-19T20:48:34.000Z"</span>,
      <span class="s2">"processedAmount"</span>: 500,
      <span class="s2">"processedCurrency"</span>: <span class="s2">"USD"</span>,
      <span class="s2">"status"</span>: <span class="s2">"SUCCESS"</span>,
      <span class="s2">"gatewayErrorCode"</span>: null,
      <span class="s2">"gatewayErrorMsg"</span>: null,
      <span class="s2">"firstPaymentReferenceId"</span>: null,
      <span class="s2">"secondPaymentReferenceId"</span>: null,
      <span class="s2">"properties"</span>: null,
      <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
    <span class="o">}</span>
  <span class="o">]</span>,
  <span class="s2">"paymentAttempts"</span>: null,
  <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">InvoicePayment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoicePayment</span><span class="err">@</span><span class="mi">47</span><span class="n">ec807</span>
    <span class="nl">targetInvoiceId:</span> <span class="mi">8</span><span class="n">ff7ded6</span><span class="o">-</span><span class="n">e524</span><span class="o">-</span><span class="mi">4</span><span class="n">f38</span><span class="o">-</span><span class="mi">94</span><span class="n">f7</span><span class="o">-</span><span class="n">d9aacef8b88b</span>
    <span class="nl">accountId:</span> <span class="n">ed1029e6</span><span class="o">-</span><span class="n">dcc0</span><span class="o">-</span><span class="mi">4</span><span class="n">b1e</span><span class="o">-</span><span class="n">ae94</span><span class="o">-</span><span class="n">e00fb14efd41</span>
    <span class="nl">paymentId:</span> <span class="mi">80</span><span class="n">f5bfca</span><span class="o">-</span><span class="n">e142</span><span class="o">-</span><span class="mi">4320</span><span class="o">-</span><span class="n">b8f2</span><span class="o">-</span><span class="n">ae4530ca7172</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">80</span><span class="n">f5bfca</span><span class="o">-</span><span class="n">e142</span><span class="o">-</span><span class="mi">4320</span><span class="o">-</span><span class="n">b8f2</span><span class="o">-</span><span class="n">ae4530ca7172</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mf">249.95</span>
    <span class="nl">refundedAmount:</span> <span class="mf">249.95</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">083</span><span class="n">cc55b</span><span class="o">-</span><span class="mi">65</span><span class="n">e9</span><span class="o">-</span><span class="mi">484</span><span class="n">c</span><span class="o">-</span><span class="mi">9</span><span class="n">c33</span><span class="o">-</span><span class="mi">0</span><span class="n">d6956540a0e</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@a0308e7f</span>
        <span class="nl">transactionId:</span> <span class="n">b9a795f0</span><span class="o">-</span><span class="n">c9d0</span><span class="o">-</span><span class="mi">4</span><span class="n">e89</span><span class="o">-</span><span class="n">a0b2</span><span class="o">-</span><span class="mi">783</span><span class="n">d8844bb44</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">b9a795f0</span><span class="o">-</span><span class="n">c9d0</span><span class="o">-</span><span class="mi">4</span><span class="n">e89</span><span class="o">-</span><span class="n">a0b2</span><span class="o">-</span><span class="mi">783</span><span class="n">d8844bb44</span>
        <span class="nl">paymentId:</span> <span class="mi">80</span><span class="n">f5bfca</span><span class="o">-</span><span class="n">e142</span><span class="o">-</span><span class="mi">4320</span><span class="o">-</span><span class="n">b8f2</span><span class="o">-</span><span class="n">ae4530ca7172</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">80</span><span class="n">f5bfca</span><span class="o">-</span><span class="n">e142</span><span class="o">-</span><span class="mi">4320</span><span class="o">-</span><span class="n">b8f2</span><span class="o">-</span><span class="n">ae4530ca7172</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">27</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">46.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">249.95</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@c4c601f0</span>
        <span class="nl">transactionId:</span> <span class="mi">5</span><span class="n">c59f93d</span><span class="o">-</span><span class="mi">7</span><span class="n">f6d</span><span class="o">-</span><span class="mi">406</span><span class="n">b</span><span class="o">-</span><span class="n">b499</span><span class="o">-</span><span class="mi">7</span><span class="n">a1547c00c9f</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">f4e8c3dc</span><span class="o">-</span><span class="mi">9</span><span class="n">e97</span><span class="o">-</span><span class="mi">4000</span><span class="o">-</span><span class="n">b82c</span><span class="o">-</span><span class="mi">1</span><span class="n">f0dcd1cf84e</span>
        <span class="nl">paymentId:</span> <span class="mi">80</span><span class="n">f5bfca</span><span class="o">-</span><span class="n">e142</span><span class="o">-</span><span class="mi">4320</span><span class="o">-</span><span class="n">b8f2</span><span class="o">-</span><span class="n">ae4530ca7172</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">80</span><span class="n">f5bfca</span><span class="o">-</span><span class="n">e142</span><span class="o">-</span><span class="mi">4320</span><span class="o">-</span><span class="n">b8f2</span><span class="o">-</span><span class="n">ae4530ca7172</span>
        <span class="nl">transactionType:</span> <span class="n">REFUND</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mo">05</span><span class="o">-</span><span class="mi">27</span><span class="nl">T00:</span><span class="mo">03</span><span class="o">:</span><span class="mf">47.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">249.95</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"targetInvoiceId"</span><span class="ss">:"375f1ade-b4eb-4344-bb64-e44fe7a5dea1"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"db0d9182-c7cf-4bb7-aa3e-73a9f7105606"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"28aef37a-7655-4351-985a-02b961ae4ac7"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"595"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"28aef37a-7655-4351-985a-02b961ae4ac7"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"0e47ceb2-8cfc-4005-86ac-5fe88ecce8ce"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"37c0189d-737c-435c-bfbd-944aabe27d1b"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"37c0189d-737c-435c-bfbd-944aabe27d1b"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"28aef37a-7655-4351-985a-02b961ae4ac7"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"28aef37a-7655-4351-985a-02b961ae4ac7"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">'account_id'</span><span class="p">:</span> <span class="s">'8a758318-25fb-46e1-a385-a8f8354ec903'</span><span class="p">,</span>
 <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'auth_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'captured_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'credited_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
 <span class="s">'payment_attempts'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
 <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span><span class="p">,</span>
 <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span><span class="p">,</span>
 <span class="s">'payment_method_id'</span><span class="p">:</span> <span class="s">'eb737a51-d230-46fe-ad95-8ddf0b8effe3'</span><span class="p">,</span>
 <span class="s">'payment_number'</span><span class="p">:</span> <span class="s">'337'</span><span class="p">,</span>
 <span class="s">'purchased_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
 <span class="s">'refunded_amount'</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
 <span class="s">'target_invoice_id'</span><span class="p">:</span> <span class="s">'8291871e-b16e-45e6-a971-577d44727327'</span><span class="p">,</span>
 <span class="s">'transactions'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
                   <span class="s">'currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'effective_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzutc</span><span class="p">()),</span>
                   <span class="s">'first_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_code'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'gateway_error_msg'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'payment_external_key'</span><span class="p">:</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span><span class="p">,</span>
                   <span class="s">'payment_id'</span><span class="p">:</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span><span class="p">,</span>
                   <span class="s">'processed_amount'</span><span class="p">:</span> <span class="mf">50.0</span><span class="p">,</span>
                   <span class="s">'processed_currency'</span><span class="p">:</span> <span class="s">'USD'</span><span class="p">,</span>
                   <span class="s">'properties'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'second_payment_reference_id'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span>
                   <span class="s">'status'</span><span class="p">:</span> <span class="s">'SUCCESS'</span><span class="p">,</span>
                   <span class="s">'transaction_external_key'</span><span class="p">:</span> <span class="s">'70a36a47-878e-4fd8-8401-1ab2f4403d41'</span><span class="p">,</span>
                   <span class="s">'transaction_id'</span><span class="p">:</span> <span class="s">'70a36a47-878e-4fd8-8401-1ab2f4403d41'</span><span class="p">,</span>
                   <span class="s">'transaction_type'</span><span class="p">:</span> <span class="s">'PURCHASE'</span><span class="p">}]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>true</td>
<td>choose true if you want plugin info  (default: false)</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>true</td>
<td>choose true if you want payment attempts  (default: false)</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a invoice payment object.</p>
<h3 id='invoice-payment-refund-a-payment-and-adjust-the-invoice-if-needed'>Refund a payment, and adjust the invoice if needed</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/refunds</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentId": "cc7fcd4d-e701-4679-9741-41289103db83",
          "amount": 50,
          "currency": "USD"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/refunds'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"45d6f4c5-21be-49b1-99c5-7b0c3c985bf0"</span><span class="o">);</span>

<span class="n">InvoicePaymentTransaction</span> <span class="n">refund</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoicePaymentTransaction</span><span class="o">();</span>
<span class="n">refund</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>
<span class="n">refund</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"28a3ed1a-7a58-4ac2-b864-2ca723abb864"</span><span class="o">);</span>

<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">createRefundWithAdjustments</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                              <span class="n">refund</span><span class="o">,</span> 
                                              <span class="n">paymentMethodId</span><span class="o">,</span> 
                                              <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'8d85a8e8-c94b-438f-aac1-e8cb436b2c05'</span>
<span class="n">amount</span> <span class="o">=</span><span class="s1">'50.0'</span>
<span class="n">adjustments</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">refund</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                             <span class="n">amount</span><span class="p">,</span> 
                                             <span class="n">adjustments</span><span class="p">,</span> 
                                             <span class="n">user</span><span class="p">,</span> 
                                             <span class="n">reason</span><span class="p">,</span> 
                                             <span class="n">comment</span><span class="p">,</span> 
                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'8d85a8e8-c94b-438f-aac1-e8cb436b2c05'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_refund_with_adjustments</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                 <span class="n">body</span><span class="p">,</span>
                                                 <span class="n">created_by</span><span class="p">,</span>
                                                 <span class="n">api_key</span><span class="p">,</span>
                                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">InvoicePayment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoicePayment</span><span class="err">@</span><span class="mi">916</span><span class="n">e89e1</span>
    <span class="nl">targetInvoiceId:</span> <span class="mi">5</span><span class="n">de44543</span><span class="o">-</span><span class="mi">2</span><span class="n">cd9</span><span class="o">-</span><span class="mi">4781</span><span class="o">-</span><span class="n">b6a3</span><span class="o">-</span><span class="mi">12</span><span class="n">c47a9244ed</span>
    <span class="nl">accountId:</span> <span class="mi">9</span><span class="n">b535e8a</span><span class="o">-</span><span class="n">dbfe</span><span class="o">-</span><span class="mi">479</span><span class="n">a</span><span class="o">-</span><span class="mi">8936</span><span class="o">-</span><span class="mi">75</span><span class="n">c8b5e9cf45</span>
    <span class="nl">paymentId:</span> <span class="mi">45</span><span class="n">d6f4c5</span><span class="o">-</span><span class="mi">21</span><span class="n">be</span><span class="o">-</span><span class="mi">49</span><span class="n">b1</span><span class="o">-</span><span class="mi">99</span><span class="n">c5</span><span class="o">-</span><span class="mi">7</span><span class="n">b0c3c985bf0</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">45</span><span class="n">d6f4c5</span><span class="o">-</span><span class="mi">21</span><span class="n">be</span><span class="o">-</span><span class="mi">49</span><span class="n">b1</span><span class="o">-</span><span class="mi">99</span><span class="n">c5</span><span class="o">-</span><span class="mi">7</span><span class="n">b0c3c985bf0</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mf">249.95</span>
    <span class="nl">refundedAmount:</span> <span class="mi">1</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="mi">28</span><span class="n">a3ed1a</span><span class="o">-</span><span class="mi">7</span><span class="n">a58</span><span class="o">-</span><span class="mi">4</span><span class="n">ac2</span><span class="o">-</span><span class="n">b864</span><span class="o">-</span><span class="mi">2</span><span class="n">ca723abb864</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@ab430f5e</span>
        <span class="nl">transactionId:</span> <span class="mi">6727</span><span class="n">a8db</span><span class="o">-</span><span class="n">ec00</span><span class="o">-</span><span class="mi">4</span><span class="n">d85</span><span class="o">-</span><span class="mi">89</span><span class="n">f2</span><span class="o">-</span><span class="n">cda778b21ddf</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">6727</span><span class="n">a8db</span><span class="o">-</span><span class="n">ec00</span><span class="o">-</span><span class="mi">4</span><span class="n">d85</span><span class="o">-</span><span class="mi">89</span><span class="n">f2</span><span class="o">-</span><span class="n">cda778b21ddf</span>
        <span class="nl">paymentId:</span> <span class="mi">45</span><span class="n">d6f4c5</span><span class="o">-</span><span class="mi">21</span><span class="n">be</span><span class="o">-</span><span class="mi">49</span><span class="n">b1</span><span class="o">-</span><span class="mi">99</span><span class="n">c5</span><span class="o">-</span><span class="mi">7</span><span class="n">b0c3c985bf0</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">45</span><span class="n">d6f4c5</span><span class="o">-</span><span class="mi">21</span><span class="n">be</span><span class="o">-</span><span class="mi">49</span><span class="n">b1</span><span class="o">-</span><span class="mi">99</span><span class="n">c5</span><span class="o">-</span><span class="mi">7</span><span class="n">b0c3c985bf0</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">05.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">249.95</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">},</span> <span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@d404a66c</span>
        <span class="nl">transactionId:</span> <span class="n">a29e0204</span><span class="o">-</span><span class="n">a4db</span><span class="o">-</span><span class="mi">400</span><span class="n">f</span><span class="o">-</span><span class="mi">9</span><span class="n">f5f</span><span class="o">-</span><span class="mi">3</span><span class="n">de1e57169d8</span>
        <span class="nl">transactionExternalKey:</span> <span class="n">b4903f2e</span><span class="o">-</span><span class="n">ea23</span><span class="o">-</span><span class="mi">4</span><span class="n">c95</span><span class="o">-</span><span class="n">a2c8</span><span class="o">-</span><span class="n">a3d81b7dfd60</span>
        <span class="nl">paymentId:</span> <span class="mi">45</span><span class="n">d6f4c5</span><span class="o">-</span><span class="mi">21</span><span class="n">be</span><span class="o">-</span><span class="mi">49</span><span class="n">b1</span><span class="o">-</span><span class="mi">99</span><span class="n">c5</span><span class="o">-</span><span class="mi">7</span><span class="n">b0c3c985bf0</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">45</span><span class="n">d6f4c5</span><span class="o">-</span><span class="mi">21</span><span class="n">be</span><span class="o">-</span><span class="mi">49</span><span class="n">b1</span><span class="o">-</span><span class="mi">99</span><span class="n">c5</span><span class="o">-</span><span class="mi">7</span><span class="n">b0c3c985bf0</span>
        <span class="nl">transactionType:</span> <span class="n">REFUND</span>
        <span class="nl">amount:</span> <span class="mi">1</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">10.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mi">1</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"targetInvoiceId"</span><span class="ss">:"045900ff-5b2a-4709-b7bd-d70501998dd5"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"dc7d2b03-d989-4cfa-96db-f02b6475950e"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"8d85a8e8-c94b-438f-aac1-e8cb436b2c05"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"347"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"8d85a8e8-c94b-438f-aac1-e8cb436b2c05"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">20</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"4103cf10-08b4-4685-b3c2-1c2c88b0f32f"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"1cd767ed-b3c1-4369-a447-09308f3bebf4"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"1cd767ed-b3c1-4369-a447-09308f3bebf4"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"8d85a8e8-c94b-438f-aac1-e8cb436b2c05"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"8d85a8e8-c94b-438f-aac1-e8cb436b2c05"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"69f72535-dd5d-4784-b0a6-05d6f64359cf"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"d7118799-0268-45c9-a0e0-455fa2731a8b"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"8d85a8e8-c94b-438f-aac1-e8cb436b2c05"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"8d85a8e8-c94b-438f-aac1-e8cb436b2c05"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"REFUND"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">20</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">20</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalPayment</strong></td>
<td>boolean</td>
<td>false</td>
<td>choose true if the payment method is external</td>
</tr>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>false</td>
<td>payment method id</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a invoice payment object.</p>
<h3 id='invoice-payment-record-a-chargeback'>Record a chargeback</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/chargebacks</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentId": "cc7fcd4d-e701-4679-9741-41289103db83",
          "amount": 5,
          "currency": "USD"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/chargebacks'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"96930ff3-82e1-4556-888a-0cb07ec120d6"</span><span class="o">);</span>

<span class="n">InvoicePaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoicePaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"50.00"</span><span class="o">));</span>

<span class="n">InvoicePayment</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">createChargeback</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                           <span class="n">body</span><span class="o">,</span> 
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'2276b3c9-4e51-41b2-b5bf-9ddc11582ee4'</span>
<span class="n">amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">currency</span> <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">effective_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">chargeback</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                 <span class="n">amount</span><span class="p">,</span>
                                                 <span class="n">currency</span><span class="p">,</span>
                                                 <span class="n">effective_date</span><span class="p">,</span>
                                                 <span class="n">user</span><span class="p">,</span> 
                                                 <span class="n">reason</span><span class="p">,</span>
                                                 <span class="n">comment</span><span class="p">,</span> 
                                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'2276b3c9-4e51-41b2-b5bf-9ddc11582ee4'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_chargeback</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                    <span class="n">body</span><span class="p">,</span> 
                                    <span class="n">created_by</span><span class="p">,</span> 
                                    <span class="n">api_key</span><span class="p">,</span> 
                                    <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">InvoicePayment</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">InvoicePayment</span><span class="nd">@e920eb58</span>
    <span class="nl">targetInvoiceId:</span> <span class="mi">84</span><span class="n">ae9d9a</span><span class="o">-</span><span class="n">badf</span><span class="o">-</span><span class="mi">45</span><span class="n">c2</span><span class="o">-</span><span class="n">b53b</span><span class="o">-</span><span class="mi">7</span><span class="n">b8a077e42ea</span>
    <span class="nl">accountId:</span> <span class="mi">4</span><span class="n">dd59373</span><span class="o">-</span><span class="n">be7a</span><span class="o">-</span><span class="mi">409</span><span class="n">e</span><span class="o">-</span><span class="n">beaa</span><span class="o">-</span><span class="n">a17e8b234591</span>
    <span class="nl">paymentId:</span> <span class="mi">96930</span><span class="n">ff3</span><span class="o">-</span><span class="mi">82</span><span class="n">e1</span><span class="o">-</span><span class="mi">4556</span><span class="o">-</span><span class="mi">888</span><span class="n">a</span><span class="o">-</span><span class="mi">0</span><span class="n">cb07ec120d6</span>
    <span class="nl">paymentNumber:</span> <span class="mi">1</span>
    <span class="nl">paymentExternalKey:</span> <span class="mi">96930</span><span class="n">ff3</span><span class="o">-</span><span class="mi">82</span><span class="n">e1</span><span class="o">-</span><span class="mi">4556</span><span class="o">-</span><span class="mi">888</span><span class="n">a</span><span class="o">-</span><span class="mi">0</span><span class="n">cb07ec120d6</span>
    <span class="nl">authAmount:</span> <span class="mi">0</span>
    <span class="nl">capturedAmount:</span> <span class="mi">0</span>
    <span class="nl">purchasedAmount:</span> <span class="mf">0.00</span>
    <span class="nl">refundedAmount:</span> <span class="mi">0</span>
    <span class="nl">creditedAmount:</span> <span class="mi">0</span>
    <span class="nl">currency:</span> <span class="n">USD</span>
    <span class="nl">paymentMethodId:</span> <span class="n">a9408abd</span><span class="o">-</span><span class="n">d505</span><span class="o">-</span><span class="mi">4462</span><span class="o">-</span><span class="n">afe6</span><span class="o">-</span><span class="mi">0</span><span class="n">d29a202d8b3</span>
    <span class="nl">transactions:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">PaymentTransaction</span> <span class="o">{</span>
        <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">PaymentTransaction</span><span class="nd">@e72668f3</span>
        <span class="nl">transactionId:</span> <span class="mi">583</span><span class="n">ba30d</span><span class="o">-</span><span class="n">c6f4</span><span class="o">-</span><span class="mi">4600</span><span class="o">-</span><span class="mi">934</span><span class="n">e</span><span class="o">-</span><span class="mi">73</span><span class="n">ef9782e444</span>
        <span class="nl">transactionExternalKey:</span> <span class="mi">583</span><span class="n">ba30d</span><span class="o">-</span><span class="n">c6f4</span><span class="o">-</span><span class="mi">4600</span><span class="o">-</span><span class="mi">934</span><span class="n">e</span><span class="o">-</span><span class="mi">73</span><span class="n">ef9782e444</span>
        <span class="nl">paymentId:</span> <span class="mi">96930</span><span class="n">ff3</span><span class="o">-</span><span class="mi">82</span><span class="n">e1</span><span class="o">-</span><span class="mi">4556</span><span class="o">-</span><span class="mi">888</span><span class="n">a</span><span class="o">-</span><span class="mi">0</span><span class="n">cb07ec120d6</span>
        <span class="nl">paymentExternalKey:</span> <span class="mi">96930</span><span class="n">ff3</span><span class="o">-</span><span class="mi">82</span><span class="n">e1</span><span class="o">-</span><span class="mi">4556</span><span class="o">-</span><span class="mi">888</span><span class="n">a</span><span class="o">-</span><span class="mi">0</span><span class="n">cb07ec120d6</span>
        <span class="nl">transactionType:</span> <span class="n">PURCHASE</span>
        <span class="nl">amount:</span> <span class="mf">249.95</span>
        <span class="nl">currency:</span> <span class="n">USD</span>
        <span class="nl">effectiveDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">26</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">08.000</span><span class="n">Z</span>
        <span class="nl">processedAmount:</span> <span class="mf">249.95</span>
        <span class="nl">processedCurrency:</span> <span class="n">USD</span>
        <span class="nl">status:</span> <span class="n">SUCCESS</span>
        <span class="nl">gatewayErrorCode:</span> 
        <span class="nl">gatewayErrorMsg:</span> 
        <span class="nl">firstPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">secondPaymentReferenceId:</span> <span class="kc">null</span>
        <span class="nl">properties:</span> <span class="kc">null</span>
        <span class="nl">auditLogs:</span> <span class="o">[]</span>
    <span class="o">}]</span>
    <span class="nl">paymentAttempts:</span> <span class="kc">null</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"targetInvoiceId"</span><span class="ss">:"dd185d1c-a4c5-4420-b06a-df42af446975"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"bb43a670-c644-4121-a981-ba5f5dac3b94"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"2276b3c9-4e51-41b2-b5bf-9ddc11582ee4"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"339"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"2276b3c9-4e51-41b2-b5bf-9ddc11582ee4"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"a9e97ad3-ef17-4475-8464-25d09e3b5290"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"49eff7ec-2982-428a-b4f0-ed99dcbfbb82"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"49eff7ec-2982-428a-b4f0-ed99dcbfbb82"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"2276b3c9-4e51-41b2-b5bf-9ddc11582ee4"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"2276b3c9-4e51-41b2-b5bf-9ddc11582ee4"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"16d55de4-5dd8-4306-87c3-d05db796d90f"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"d18943b1-96b7-49fd-9f11-78d55f361b18"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"2276b3c9-4e51-41b2-b5bf-9ddc11582ee4"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"2276b3c9-4e51-41b2-b5bf-9ddc11582ee4"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:03.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a invoice payment object.</p>
<h3 id='invoice-payment-complete-an-existing-transaction'>Complete an existing transaction</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
            "paymentId": "cc7fcd4d-e701-4679-9741-41289103db83"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"80f5bfca-e142-4320-b8f2-ae4530ca7172"</span><span class="o">);</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">ImmutableMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">completeInvoicePaymentTransaction</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                    <span class="n">body</span><span class="o">,</span> 
                                                    <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'2276b3c9-4e51-41b2-b5bf-9ddc11582ee4'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">complete_invoice_payment_transaction</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                                           <span class="n">user</span><span class="p">,</span> 
                                                                           <span class="n">reason</span><span class="p">,</span> 
                                                                           <span class="n">comment</span><span class="p">,</span> 
                                                                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">complete_invoice_payment_transaction</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                       <span class="n">body</span><span class="p">,</span> 
                                                       <span class="n">created_by</span><span class="p">,</span> 
                                                       <span class="n">api_key</span><span class="p">,</span> 
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A <code>204</code> http status without content.</p>
<h3 id='invoice-payment-record-a-chargeback-reversal'>Record a chargeback reversal</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/chargebackReversals</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "transactionExternalKey": "a335f7d2-e115-436f-8c63-2b0114d974de",
          "paymentId": "cc7fcd4d-e701-4679-9741-41289103db83",
          "effectiveDate": "2018-07-20T15:05:36.853Z"        
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/chargebackReversals'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'7a5d4997-5d44-4a82-8371-a410ea5615f4'</span>
<span class="n">chargeback_transaction_external_key</span> <span class="o">=</span> <span class="s1">'99c45d07-abe4-4bc7-a207-0524548c1b08'</span>
<span class="n">effective_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">chargeback_reversal</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                          <span class="n">chargeback_transaction_external_key</span><span class="p">,</span> 
                                                          <span class="n">effective_date</span><span class="p">,</span> 
                                                          <span class="n">user</span><span class="p">,</span> 
                                                          <span class="n">reason</span><span class="p">,</span> 
                                                          <span class="n">comment</span><span class="p">,</span> 
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'7a5d4997-5d44-4a82-8371-a410ea5615f4'</span>
<span class="n">transaction_external_key</span> <span class="o">=</span> <span class="s">'99c45d07-abe4-4bc7-a207-0524548c1b08'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> 
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span> 
                          <span class="n">transaction_external_key</span><span class="o">=</span><span class="n">transaction_external_key</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_chargeback_reversal</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                             <span class="n">body</span><span class="p">,</span> 
                                             <span class="n">created_by</span><span class="p">,</span> 
                                             <span class="n">api_key</span><span class="p">,</span> 
                                             <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
   <span class="s2">"targetInvoiceId"</span><span class="ss">:"dee84f4e-5781-442c-845e-423a6bcb6b2b"</span><span class="p">,</span>
   <span class="s2">"accountId"</span><span class="ss">:"93182158-c000-4c8d-893e-1e758e975a2a"</span><span class="p">,</span>
   <span class="s2">"paymentId"</span><span class="ss">:"7a5d4997-5d44-4a82-8371-a410ea5615f4"</span><span class="p">,</span>
   <span class="s2">"paymentNumber"</span><span class="ss">:"338"</span><span class="p">,</span>
   <span class="s2">"paymentExternalKey"</span><span class="ss">:"7a5d4997-5d44-4a82-8371-a410ea5615f4"</span><span class="p">,</span>
   <span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
   <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
   <span class="s2">"paymentMethodId"</span><span class="ss">:"5d32f8f4-24b1-4519-85e4-356b5c087f76"</span><span class="p">,</span>
   <span class="s2">"transactions"</span><span class="p">:[</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"ef824f7f-30f6-4b08-82d4-5add7e7a773f"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"ef824f7f-30f6-4b08-82d4-5add7e7a773f"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"7a5d4997-5d44-4a82-8371-a410ea5615f4"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"7a5d4997-5d44-4a82-8371-a410ea5615f4"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"PURCHASE"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:02.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"90fef451-10d6-4ebd-a126-43c3ab4315c2"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"99c45d07-abe4-4bc7-a207-0524548c1b08"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"7a5d4997-5d44-4a82-8371-a410ea5615f4"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"7a5d4997-5d44-4a82-8371-a410ea5615f4"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"amount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"currency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:04.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">50</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"processedCurrency"</span><span class="ss">:"USD"</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"SUCCESS"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">},</span>
      <span class="p">{</span>
         <span class="s2">"transactionId"</span><span class="ss">:"a1c3648c-f3c0-4c0f-9eb0-e56c7ab9c798"</span><span class="p">,</span>
         <span class="s2">"transactionExternalKey"</span><span class="ss">:"99c45d07-abe4-4bc7-a207-0524548c1b08"</span><span class="p">,</span>
         <span class="s2">"paymentId"</span><span class="ss">:"7a5d4997-5d44-4a82-8371-a410ea5615f4"</span><span class="p">,</span>
         <span class="s2">"paymentExternalKey"</span><span class="ss">:"7a5d4997-5d44-4a82-8371-a410ea5615f4"</span><span class="p">,</span>
         <span class="s2">"transactionType"</span><span class="ss">:"CHARGEBACK"</span><span class="p">,</span>
         <span class="s2">"effectiveDate"</span><span class="ss">:"2013-08-01T06:00:05.000Z"</span><span class="p">,</span>
         <span class="s2">"processedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">"status"</span><span class="ss">:"PAYMENT_FAILURE"</span><span class="p">,</span>
         <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
      <span class="p">}</span>
   <span class="p">],</span>
   <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a invoice payment object.</p>
<h2 id='invoice-payment-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resources, and in particularly on the <code>Payment</code> objects.</p>
<h3 id='invoice-payment-add-custom-fields-to-payment'>Add custom fields to payment</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "objectId": "2495e35e-2b96-434c-8877-62dbbf20f7e9",
            "objectType": "INVOICE_PAYMENT",
            "name": "Test Custom Fields",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span><span class="n">of</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">paymentId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">INVOICE_PAYMENT</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">createInvoicePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                   <span class="n">customFields</span><span class="o">,</span> 
                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'INVOICE_PAYMENT'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                                 <span class="n">user</span><span class="p">,</span>
                                 <span class="n">reason</span><span class="p">,</span>
                                 <span class="n">comment</span><span class="p">,</span>
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_invoice_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                       <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">59860</span><span class="n">a0d</span><span class="o">-</span><span class="n">c032</span><span class="o">-</span><span class="mi">456</span><span class="n">d</span><span class="o">-</span><span class="n">a35e</span><span class="o">-</span><span class="mi">3</span><span class="n">a48fe8579e5</span>
    <span class="nl">objectType:</span> <span class="n">INVOICE_PAYMENT</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"INVOICE_PAYMENT"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a custom field object.</p>
<h3 id='invoice-payment-retrieve-payment-custom-fields'>Retrieve payment custom fields</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">getInvoicePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span>
                                                                                 <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">get_invoice_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"3fbf75aa-6f22-4a02-974b-55eeded2cf6b"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"2495e35e-2b96-434c-8877-62dbbf20f7e9"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"PAYMENT"</span>,
    <span class="s2">"name"</span>: <span class="s2">"Test Custom Field"</span>,
    <span class="s2">"value"</span>: <span class="s2">"test_value"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">CustomField</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">CustomField</span><span class="nd">@c7d0c38a</span>
    <span class="nl">customFieldId:</span> <span class="kc">null</span>
    <span class="nl">objectId:</span> <span class="mi">59860</span><span class="n">a0d</span><span class="o">-</span><span class="n">c032</span><span class="o">-</span><span class="mi">456</span><span class="n">d</span><span class="o">-</span><span class="n">a35e</span><span class="o">-</span><span class="mi">3</span><span class="n">a48fe8579e5</span>
    <span class="nl">objectType:</span> <span class="n">INVOICE_PAYMENT</span>
    <span class="nl">name:</span> <span class="n">Test</span> <span class="n">Custom</span> <span class="n">Field</span>
    <span class="nl">value:</span> <span class="n">test_value</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"customFieldId"</span><span class="ss">:"7fb3dde7-0911-4477-99e3-69d142509bb9"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"4927c1a2-3959-4f71-98e7-ce3ba19c92ac"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"INVOICE_PAYMENT"</span><span class="p">,</span>
      <span class="s2">"name"</span><span class="ss">:"Test Custom Field"</span><span class="p">,</span>
      <span class="s2">"value"</span><span class="ss">:"test_value"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'custom_field_id'</span><span class="p">:</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span><span class="p">,</span>
 <span class="s">'name'</span><span class="p">:</span> <span class="s">'Test Custom Field'</span><span class="p">,</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'PAYMENT'</span><span class="p">,</span>
 <span class="s">'value'</span><span class="p">:</span> <span class="s">'test_value'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>enum</td>
<td>false</td>
<td>level of audit logs returned</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of custom field objects.</p>
<h3 id='invoice-payment-modify-custom-fields-to-payment'>Modify custom fields to payment</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "e2408cac-931b-43eb-855b-9f2902615c39",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">modifyInvoicePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                   <span class="n">customFieldModified</span><span class="o">,</span> 
                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                                    <span class="n">user</span><span class="p">,</span> 
                                    <span class="n">reason</span><span class="p">,</span>
                                    <span class="n">comment</span><span class="p">,</span> 
                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Test Modify'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_modify_value'</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">modify_invoice_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                       <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A <code>204</code> http status without content.</p>
<h3 id='invoice-payment-remove-custom-fields-from-payment'>Remove custom fields from payment</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields?customField=e2408cac-931b-43eb-855b-9f2902615c39'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">deleteInvoicePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                   <span class="n">customFieldsId</span><span class="o">,</span> 
                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                                    <span class="n">user</span><span class="p">,</span> 
                                    <span class="n">reason</span><span class="p">,</span>
                                    <span class="n">comment</span><span class="p">,</span> 
                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">custom_field</span> <span class="o">=</span> <span class="p">[</span><span class="n">custom_field_id</span><span class="p">]</span>
<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">delete_invoice_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">,</span>
                                                       <span class="n">custom_field</span><span class="o">=</span><span class="n">custom_field</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>true</td>
<td>the list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>A <code>204</code> http status without content.</p>
<h2 id='invoice-payment-tags'>Tags</h2>
<p>See section <a href="#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable for an <code>InvoicePayment</code>.</p>

<p>Let&#39;s assume there is an existing <code>user</code> tagDefintion already created with <code>tagDefinitionId</code>=<code>353752dd-9041-4450-b782-a8bb03a923c8</code>.</p>
<h3 id='invoice-payment-add-tags-to-payment'>Add tags to payment</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[
            "353752dd-9041-4450-b782-a8bb03a923c8"
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"45d6f4c5-21be-49b1-99c5-7b0c3c985bf0"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">createInvoicePaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                         <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                        <span class="n">user</span><span class="p">,</span>
                        <span class="n">reason</span><span class="p">,</span>
                        <span class="n">comment</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'8d85a8e8-c94b-438f-aac1-e8cb436b2c05'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_invoice_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                              <span class="n">tag</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 Created
&lt; Location: http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/tags
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@bd138472</span>
    <span class="nl">tagId:</span> <span class="mi">1</span><span class="n">bb4b638</span><span class="o">-</span><span class="mi">3886</span><span class="o">-</span><span class="mi">4</span><span class="n">f73</span><span class="o">-</span><span class="mi">90</span><span class="n">a5</span><span class="o">-</span><span class="mi">89</span><span class="n">eb6d1bcf7f</span>
    <span class="nl">objectType:</span> <span class="n">INVOICE_PAYMENT</span>
    <span class="nl">objectId:</span> <span class="mi">45</span><span class="n">d6f4c5</span><span class="o">-</span><span class="mi">21</span><span class="n">be</span><span class="o">-</span><span class="mi">49</span><span class="n">b1</span><span class="o">-</span><span class="mi">99</span><span class="n">c5</span><span class="o">-</span><span class="mi">7</span><span class="n">b0c3c985bf0</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"INVOICE_PAYMENT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"foo"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A <code>201</code> http status without content.</p>
<h3 id='invoice-payment-retrieve-payment-tags'>Retrieve payment tags</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">getInvoicePaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                         <span class="n">includedDeleted</span><span class="o">,</span> 
                                                         <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
                     <span class="n">audit</span><span class="p">,</span>
                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'2a1ffd2c-0de1-4f5c-b2a9-27d8deebe596'</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">get_invoice_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt;
<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"e7f68cab-3b9a-4150-909a-5f1c17f1fb2b"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"PAYMENT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"foo"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">//First element of the list</span>
<span class="kd">class</span> <span class="nc">Tag</span> <span class="o">{</span>
    <span class="n">org</span><span class="o">.</span><span class="na">killbill</span><span class="o">.</span><span class="na">billing</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">model</span><span class="o">.</span><span class="na">gen</span><span class="o">.</span><span class="na">Tag</span><span class="nd">@cae768d7</span>
    <span class="nl">tagId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
    <span class="nl">objectType:</span> <span class="n">INVOICE_PAYMENT</span>
    <span class="nl">objectId:</span> <span class="n">e659f0f3</span><span class="o">-</span><span class="mi">745</span><span class="n">c</span><span class="o">-</span><span class="mi">46</span><span class="n">d5</span><span class="o">-</span><span class="mi">953</span><span class="n">c</span><span class="o">-</span><span class="mi">28</span><span class="n">fe9282fc7d</span>
    <span class="nl">tagDefinitionId:</span> <span class="mi">353752</span><span class="n">dd</span><span class="o">-</span><span class="mi">9041</span><span class="o">-</span><span class="mi">4450</span><span class="o">-</span><span class="n">b782</span><span class="o">-</span><span class="n">a8bb03a923c8</span>
    <span class="nl">tagDefinitionName:</span> <span class="n">foo</span>
    <span class="nl">auditLogs:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">AuditLog</span> <span class="o">{</span>
        <span class="nl">changeType:</span> <span class="n">INSERT</span>
        <span class="nl">changeDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span><span class="nl">T00:</span><span class="mo">00</span><span class="o">:</span><span class="mf">02.000</span><span class="n">Z</span>
        <span class="nl">objectType:</span> <span class="n">TAG</span>
        <span class="nl">objectId:</span> <span class="n">d724f79d</span><span class="o">-</span><span class="n">fad1</span><span class="o">-</span><span class="mi">4758</span><span class="o">-</span><span class="n">b35e</span><span class="o">-</span><span class="n">d62708450d90</span>
        <span class="nl">changedBy:</span> <span class="n">Toto</span>
        <span class="nl">reasonCode:</span> <span class="n">i</span> <span class="n">am</span> <span class="n">god</span>
        <span class="nl">comments:</span> <span class="n">no</span> <span class="n">comment</span>
        <span class="nl">userToken:</span> <span class="n">e36f7ba5</span><span class="o">-</span><span class="n">fb5b</span><span class="o">-</span><span class="mi">41</span><span class="n">c0</span><span class="o">-</span><span class="n">b47c</span><span class="o">-</span><span class="mi">77</span><span class="n">c48ab37dd9</span>
        <span class="nl">history:</span> <span class="kc">null</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">[</span>
   <span class="p">{</span>
      <span class="s2">"tagId"</span><span class="ss">:"a46cfeb6-e175-42db-be62-7f117326ab4e"</span><span class="p">,</span>
      <span class="s2">"objectType"</span><span class="ss">:"INVOICE_PAYMENT"</span><span class="p">,</span>
      <span class="s2">"objectId"</span><span class="ss">:"28af3cb9-275b-4ac4-a55d-a0536e479069"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionId"</span><span class="ss">:"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span>
      <span class="s2">"tagDefinitionName"</span><span class="ss">:"foo"</span><span class="p">,</span>
      <span class="s2">"auditLogs"</span><span class="ss">:[]</span>
   <span class="p">}</span>
<span class="p">]</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">[{</span><span class="s">'audit_logs'</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s">'object_id'</span><span class="p">:</span> <span class="s">'2a1ffd2c-0de1-4f5c-b2a9-27d8deebe596'</span><span class="p">,</span>
 <span class="s">'object_type'</span><span class="p">:</span> <span class="s">'PAYMENT'</span><span class="p">,</span>
 <span class="s">'tag_definition_id'</span><span class="p">:</span> <span class="s">'353752dd-9041-4450-b782-a8bb03a923c8'</span><span class="p">,</span>
 <span class="s">'tag_definition_name'</span><span class="p">:</span> <span class="s">'foo'</span><span class="p">,</span>
 <span class="s">'tag_id'</span><span class="p">:</span> <span class="s">'864ee6aa-1439-4037-8f65-aa114739f09f'</span><span class="p">}]</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>enum</td>
<td>false</td>
<td>level of audit logs returned</td>
</tr>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>false</td>
<td>choose true if you want to include deleted tags</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of invoice payment tag objects.</p>
<h3 id='invoice-payment-remove-tags-from-payment'>Remove tags from payment</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/tags?tagDef=00000000-0000-0000-0000-000000000001'</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">autoPayOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">deleteInvoicePaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                           <span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UUID</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">autoPayOffId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                           <span class="n">user</span><span class="p">,</span>
                           <span class="n">reason</span><span class="p">,</span>
                           <span class="n">comment</span><span class="p">,</span>
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'8d85a8e8-c94b-438f-aac1-e8cb436b2c05'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000002"</span><span class="p">]</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">delete_invoice_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                              <span class="n">created_by</span><span class="p">,</span> 
                                              <span class="n">api_key</span><span class="p">,</span> 
                                              <span class="n">api_secret</span><span class="p">,</span> 
                                              <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>string</td>
<td>true</td>
<td>the list of tag definition ID identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>A <code>204</code> http status without content.</p>
<h1 id='usage'>Usage</h1><h2 id='usage-usage-resource'>Usage Resource</h2>
<p>When invoicing usage-based subscriptions, you need to record usage data into Kill Bill. Note that Kill Bill is not designed to be a metering system, i.e. it shouldn&#39;t contain all data points. Instead, it expects that you record a usage summary on a daily basis (1 API call per subscription per day). For a telco company for instance, instead of recording all phone calls, only record the number of minutes effectively used at the end of the day for that day.</p>

<p>For more information, see our <a href="http://docs.killbill.io/latest/userguide_subscription.html#components-catalog-usage">catalog usage documentation</a> and our <a href="http://docs.killbill.io/latest/userguide_subscription.html#components-invoicing-usage">invoice usage documentation</a>.</p>

<p>Recording and retrieve usage data points is the purpose of the APIs below.</p>
<h2 id='usage-usage'>Usage</h2><h3 id='usage-record-usage-for-a-subscription'>Record usage for a subscription</h3>
<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/usages</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
     -d <span class="s1">'{"subscriptionId":"365987b2-5443-47e4-a467-c8962fc6995c", "trackingId": "my-unique-tracking-id", "unitUsageRecords":[{"unitType":"chocolate-videos","usageRecords":[{"recordDate":"2013-03-14","amount":1}]}]}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/usages"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.UsageApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">UsageApi</span> <span class="n">usageApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="o">);</span>

<span class="n">UsageRecord</span> <span class="n">usageRecord1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UsageRecord</span><span class="o">();</span>
<span class="n">usageRecord1</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="mi">1L</span><span class="o">);</span>
<span class="n">usageRecord1</span><span class="o">.</span><span class="na">setRecordDate</span><span class="o">(</span><span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-03-14"</span><span class="o">));</span>

<span class="n">UnitUsageRecord</span> <span class="n">unitUsageRecord</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UnitUsageRecord</span><span class="o">();</span>
<span class="n">unitUsageRecord</span><span class="o">.</span><span class="na">setUnitType</span><span class="o">(</span><span class="s">"chocolate-videos"</span><span class="o">);</span>
<span class="n">unitUsageRecord</span><span class="o">.</span><span class="na">setUsageRecords</span><span class="o">(</span><span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UsageRecord</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">usageRecord1</span><span class="o">));</span>

<span class="n">SubscriptionUsageRecord</span> <span class="n">usage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubscriptionUsageRecord</span><span class="o">();</span>
<span class="n">usage</span><span class="o">.</span><span class="na">setSubscriptionId</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">);</span>
<span class="n">usage</span><span class="o">.</span><span class="na">setUnitUsageRecords</span><span class="o">(</span><span class="n">ImmutableList</span><span class="o">.&lt;</span><span class="n">UnitUsageRecord</span><span class="o">&gt;</span><span class="n">of</span><span class="o">(</span><span class="n">unitUsageRecord</span><span class="o">));</span>

<span class="n">usageApi</span><span class="o">.</span><span class="na">recordUsage</span><span class="o">(</span><span class="n">usage</span><span class="o">,</span>
                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">usage_record</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">UsageRecordAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">usage_record</span><span class="p">.</span><span class="nf">amount</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">usage_record</span><span class="p">.</span><span class="nf">record_date</span> <span class="o">=</span> <span class="s2">"2013-03-14"</span>

<span class="n">unit_usage_record</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">UnitUsageRecordAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">unit_usage_record</span><span class="p">.</span><span class="nf">unit_type</span> <span class="o">=</span> <span class="s2">"chocolate-videos"</span>
<span class="n">unit_usage_record</span><span class="p">.</span><span class="nf">usage_records</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">unit_usage_record</span><span class="p">.</span><span class="nf">usage_records</span> <span class="o">&lt;&lt;</span> <span class="n">usage_record</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">UsageRecord</span><span class="p">.</span><span class="nf">new</span>
<span class="n">result</span><span class="p">.</span><span class="nf">subscription_id</span> <span class="o">=</span> <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span>
<span class="n">result</span><span class="p">.</span><span class="nf">unit_usage_records</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">result</span><span class="p">.</span><span class="nf">unit_usage_records</span> <span class="o">&lt;&lt;</span> <span class="n">unit_usage_record</span>

<span class="n">result</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Returns</strong></p>

<p>A 201 http status without content.</p>
<h3 id='usage-retrieve-usage-for-a-subscription-and-unit-type'>Retrieve usage for a subscription and unit type</h3>
<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/usages/{subscriptionId}/{unitType}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/usages/365987b2-5443-47e4-a467-c8962fc6995c/chocolate-videos?startDate=2012-08-25&amp;endDate=2013-08-26"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.UsageApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">UsageApi</span> <span class="n">usageApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">unitType</span> <span class="o">=</span> <span class="s">"chocolate-videos"</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">startDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2012-08-25"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">endDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-08-26"</span><span class="o">);</span>

<span class="n">RolledUpUsage</span> <span class="n">retrievedUsage</span> <span class="o">=</span> <span class="n">usageApi</span><span class="o">.</span><span class="na">getUsage</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                                 <span class="n">unitType</span><span class="o">,</span>
                                                 <span class="n">startDate</span><span class="o">,</span>
                                                 <span class="n">endDate</span><span class="o">,</span>
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription_id</span> <span class="o">=</span> <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s2">"2012-08-25"</span>
<span class="n">end_date_</span> <span class="o">=</span> <span class="s2">"2013-08-26"</span>
<span class="n">unit_type</span> <span class="o">=</span> <span class="s2">"chocolate-videos"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">RolledUpUsage</span><span class="p">.</span><span class="nf">find_by_subscription_id_and_type</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                                      <span class="n">start_date</span><span class="p">,</span>
                                                                      <span class="n">end_date</span><span class="p">,</span>
                                                                      <span class="n">unit_type</span><span class="p">,</span>
                                                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
  <span class="s2">"subscriptionId"</span>: <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span>,
  <span class="s2">"startDate"</span>: <span class="s2">"2012-08-25"</span>,
  <span class="s2">"endDate"</span>: <span class="s2">"2013-08-26"</span>,
  <span class="s2">"rolledUpUnits"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"unitType"</span>: <span class="s2">"chocolate-videos"</span>,
      <span class="s2">"amount"</span>: 1
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">RolledUpUsage</span> <span class="o">{</span>
    <span class="nl">subscriptionId:</span> <span class="mi">365987</span><span class="n">b2</span><span class="o">-</span><span class="mi">5443</span><span class="o">-</span><span class="mi">47</span><span class="n">e4</span><span class="o">-</span><span class="n">a467</span><span class="o">-</span><span class="n">c8962fc6995c</span>
    <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">endDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">26</span>
    <span class="nl">rolledUpUnits:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">RolledUpUnit</span> <span class="o">{</span>
        <span class="nl">unitType:</span> <span class="n">chocolate</span><span class="o">-</span><span class="n">videos</span>
        <span class="nl">amount:</span> <span class="mi">1</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
  <span class="s2">"subscriptionId"</span><span class="p">:</span> <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="p">,</span>
  <span class="s2">"startDate"</span><span class="p">:</span> <span class="s2">"2012-08-25"</span><span class="p">,</span>
  <span class="s2">"endDate"</span><span class="p">:</span> <span class="s2">"2013-08-26"</span><span class="p">,</span>
  <span class="s2">"rolledUpUnits"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"unitType"</span><span class="p">:</span> <span class="s2">"chocolate-videos"</span><span class="p">,</span>
      <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>true</td>
<td>Oldest data point to retrieve</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>date</td>
<td>true</td>
<td>Newest data point to retrieve (exclusive)</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns recorded data points for the specified period and unit type.</p>
<h3 id='usage-retrieve-usage-for-a-subscription'>Retrieve usage for a subscription</h3>
<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/usages/{subscriptionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/usages/365987b2-5443-47e4-a467-c8962fc6995c?startDate=2012-08-25&amp;endDate=2013-08-26"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.UsageApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">UsageApi</span> <span class="n">usageApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">startDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2012-08-25"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">endDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-08-26"</span><span class="o">);</span>

<span class="n">RolledUpUsage</span> <span class="n">retrievedUsage</span> <span class="o">=</span> <span class="n">usageApi</span><span class="o">.</span><span class="na">getAllUsage</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                                    <span class="n">startDate</span><span class="o">,</span>
                                                    <span class="n">endDate</span><span class="o">,</span>
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription_id</span> <span class="o">=</span> <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s2">"2012-08-25"</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="o">=</span> <span class="s2">"2013-08-26"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">RolledUpUsage</span><span class="p">.</span><span class="nf">find_by_subscription_id</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                             <span class="n">start_date</span><span class="p">,</span>
                                                             <span class="n">end_date</span><span class="p">,</span>
                                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
  <span class="s2">"subscriptionId"</span>: <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span>,
  <span class="s2">"startDate"</span>: <span class="s2">"2012-08-25"</span>,
  <span class="s2">"endDate"</span>: <span class="s2">"2013-08-26"</span>,
  <span class="s2">"rolledUpUnits"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"unitType"</span>: <span class="s2">"chocolate-videos"</span>,
      <span class="s2">"amount"</span>: 1
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">class</span> <span class="nc">RolledUpUsage</span> <span class="o">{</span>
    <span class="nl">subscriptionId:</span> <span class="mi">365987</span><span class="n">b2</span><span class="o">-</span><span class="mi">5443</span><span class="o">-</span><span class="mi">47</span><span class="n">e4</span><span class="o">-</span><span class="n">a467</span><span class="o">-</span><span class="n">c8962fc6995c</span>
    <span class="nl">startDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">25</span>
    <span class="nl">endDate:</span> <span class="mi">2012</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">26</span>
    <span class="nl">rolledUpUnits:</span> <span class="o">[</span><span class="kd">class</span> <span class="nc">RolledUpUnit</span> <span class="o">{</span>
        <span class="nl">unitType:</span> <span class="n">chocolate</span><span class="o">-</span><span class="n">videos</span>
        <span class="nl">amount:</span> <span class="mi">1</span>
    <span class="o">}]</span>
<span class="o">}</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="p">{</span>
  <span class="s2">"subscriptionId"</span><span class="p">:</span> <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="p">,</span>
  <span class="s2">"startDate"</span><span class="p">:</span> <span class="s2">"2012-08-25"</span><span class="p">,</span>
  <span class="s2">"endDate"</span><span class="p">:</span> <span class="s2">"2013-08-26"</span><span class="p">,</span>
  <span class="s2">"rolledUpUnits"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"unitType"</span><span class="p">:</span> <span class="s2">"chocolate-videos"</span><span class="p">,</span>
      <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">1</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>true</td>
<td>Oldest data point to retrieve</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>date</td>
<td>true</td>
<td>Newest data point to retrieve (exclusive)</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns recorded data points for the specified period.</p>
<h1 id='custom-field'>Custom Field</h1>
<p>A custom field is an attribute (key-value pair) that may be attached to almost any resource.</p>

<p>This section provides APIs to list all custom fields, search for a specific custom field, and retrieve custom field audit logs. Searching may be based on the custom field id or on its name, value, or resource type. In addition, each resource provides APIs for the applicable CRUD operations: creation, retrieval, updating, and deletion. </p>
<h2 id='custom-field-custom-field-resource'>Custom Field  Resource</h2>
<p>A tag resource is associated with a tag definition and attached to another specific resource. The resource object has the following attributes:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customFieldId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this custom field</td>
</tr>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the object this tag is attached to (e.g. &quot;ACCOUNT&quot;)</td>
</tr>
<tr>
<td><strong>objectID</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the object</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>string</td>
<td>user</td>
<td>name of the custom field</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td>string</td>
<td>user</td>
<td>value of the custom field</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>array of audit log records for this custom field</td>
</tr>
</tbody></table>
<h3 id='custom-field-list-all-custom-fields'>List all custom fields</h3>
<p>Retrieves a list of all custom fields (name and value) with their associated resources and optional audit logs</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/customFields/pagination</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of records for all custom fields</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/customFields/pagination"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span>,
    <span class="s2">"name"</span>: <span class="s2">"importance"</span>,
    <span class="s2">"value"</span>: <span class="s2">"high"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><h3 id='custom-field-search-custom-fields-by-id'>Search custom fields by ID</h3>
<p>Searches for a specific custom field by its ID</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/customField/search/{customFieldId}</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns the record for the specified custom field, if it exists</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/customFields/search/13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span>,
    <span class="s2">"name"</span>: <span class="s2">"importance"</span>,
    <span class="s2">"value"</span>: <span class="s2">"high"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><h3 id='custom-field-search-custom-fields-by-resource-type-name-and-optional-value'>Search custom fields by resource type, name, and optional value</h3>
<p>Searches for a specific custom field by its resource type, name, and optional value</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/customField/search</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>type of resource to search (e.g., &quot;ACCOUNT&quot;)</td>
</tr>
<tr>
<td><strong>fieldName</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>name of the custom field to search for</td>
</tr>
<tr>
<td><strong>fieldValue</strong></td>
<td>string</td>
<td>false</td>
<td>any value</td>
<td>value of the custom field to search for</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns the record for the specified custom field, if it exists</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/customFields/search?objectType=ACCOUNT&amp;fieldName=importance"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"customFieldId"</span>: <span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span>,
    <span class="s2">"name"</span>: <span class="s2">"importance"</span>,
    <span class="s2">"value"</span>: <span class="s2">"high"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><h2 id='custom-field-audit-logs'>Audit Logs</h2><h3 id='custom-field-retrieve-custom-field-audit-logs-with-history-by-custom-field-id'>Retrieve custom field audit logs with history by custom field id</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/customFields/{customFieldId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/customFields/4b498210-b177-4aae-a539-cf594adaa221/auditLogsWithHistory"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2013-08-01T06:00:00.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"4b498210-b177-4aae-a539-cf594adaa221"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"test_custom_fields"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"2b3920ae-6b8c-4deb-9ed9-132ff632e692"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2013-08-01T06:00:00.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2013-08-01T06:00:00.000Z"</span>,
      <span class="s2">"recordId"</span>: 1,
      <span class="s2">"accountRecordId"</span>: 17,
      <span class="s2">"tenantRecordId"</span>: 12,
      <span class="s2">"fieldName"</span>: <span class="s2">"Test Custom Field"</span>,
      <span class="s2">"fieldValue"</span>: <span class="s2">"test_value"</span>,
      <span class="s2">"objectId"</span>: <span class="s2">"01968143-c64b-41d4-94cb-d65748b0f5b6"</span>,
      <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"CUSTOM_FIELD_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"UPDATE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2013-08-01T06:00:01.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"4b498210-b177-4aae-a539-cf594adaa221"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"test_custom_fields"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"6343d19f-cef0-486a-8114-85c7573639a0"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2013-08-01T06:00:01.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2013-08-01T06:00:01.000Z"</span>,
      <span class="s2">"recordId"</span>: 1,
      <span class="s2">"accountRecordId"</span>: 17,
      <span class="s2">"tenantRecordId"</span>: 12,
      <span class="s2">"fieldName"</span>: <span class="s2">"Test Custom Field"</span>,
      <span class="s2">"fieldValue"</span>: <span class="s2">"another_test_value"</span>,
      <span class="s2">"objectId"</span>: <span class="s2">"01968143-c64b-41d4-94cb-d65748b0f5b6"</span>,
      <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"CUSTOM_FIELD_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"DELETE"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2013-08-01T06:00:01.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"4b498210-b177-4aae-a539-cf594adaa221"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"test_custom_fields"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: null,
    <span class="s2">"userToken"</span>: <span class="s2">"9a9343bd-9cba-417b-be17-713ff456b5f7"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2013-08-01T06:00:01.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2013-08-01T06:00:01.000Z"</span>,
      <span class="s2">"recordId"</span>: 1,
      <span class="s2">"accountRecordId"</span>: 17,
      <span class="s2">"tenantRecordId"</span>: 12,
      <span class="s2">"fieldName"</span>: <span class="s2">"Test Custom Field"</span>,
      <span class="s2">"fieldValue"</span>: <span class="s2">"another_test_value"</span>,
      <span class="s2">"objectId"</span>: <span class="s2">"01968143-c64b-41d4-94cb-d65748b0f5b6"</span>,
      <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"CUSTOM_FIELD"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"CUSTOM_FIELD_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>

</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a list of custom field logs with history.</p>
<h1 id='tag'>Tag</h1>
<p>A tag is a label that may be attached to almost any resource. There are two categories of tags: <code>System Tags</code> and <code>User Tags</code>.</p>

<p>Kill Bill provides a small set of predefined <code>System Tags</code> that affect the behavior of the system. For example, <code>AUTO_PAY_OFF</code> prevents the system from initiating automatic payment of an invoice. <code>System Tags</code> may be attached only to specific resource types, and most (including <code>AUTO_PAY_OFF</code>) apply only to <code>Accounts</code>.</p>

<p><code>User Tags</code> are defined by the user for any desired purpose and are not interpreted by the system. <code>User Tags</code> must be defined using the <code>Tag Definition</code> APIs below. These tags may be attached to almost any resource type.</p>

<p>This section provides APIs to list all tags, search for a specific tag, and retrieve tag audit logs. In addition, each resource provides APIs for the applicable CRUD operations: creation, retrieval, and deletion. </p>
<h2 id='tag-tag-resource'>Tag  Resource</h2>
<p>A tag resource is associated with a tag definition and attached to another specific resource. The resource object has the following attributes:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this specific tag</td>
</tr>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the object this tag is attached to (e.g. &quot;ACCOUNT&quot;)</td>
</tr>
<tr>
<td><strong>objectID</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the object</td>
</tr>
<tr>
<td><strong>tagDefinitionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the tag definition</td>
</tr>
<tr>
<td><strong>tagDefinitionName</strong></td>
<td>string</td>
<td>user</td>
<td>name for the tag definition</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>array of audit log records for this tag</td>
</tr>
</tbody></table>
<h3 id='tag-list-all-tags'>List all tags</h3>
<p>Retrieves a list of all tags with their associated resources and tag definitions</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tags/pagination</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of records for all tags</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tags/pagination"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"1ac0218e-0d2b-4c65-841f-cff8af92a100"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"sleepy"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><h3 id='tag-search-tags'>Search tags</h3>
<p>Searches for a specific tag</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tags/search/{tagId}</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns the record for the specified tag, if it exists</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tags/search/13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"tagId"</span>: <span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span>,
    <span class="s2">"tagDefinitionId"</span>: <span class="s2">"1ac0218e-0d2b-4c65-841f-cff8af92a100"</span>,
    <span class="s2">"tagDefinitionName"</span>: <span class="s2">"sleepy"</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
  <span class="o">}</span>
<span class="o">]</span>
</code></pre><h3 id='tag-retrieve-tag-audit-logs'>Retrieve tag audit logs</h3>
<p>Retrieves audit logs with history for a specific tag</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tags/{tagId}/auditLogsWithHistory</code></p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a list of tag audit logs with history.</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tags/26e22dbf7-a493-4402-b1e3-4bec54c39f31/auditLogsWithHistory"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2013-09-01T06:00:05.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"TAG"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"6e22dbf7-a493-4402-b1e3-4bec54c39f31"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"test_fixed_and_recurrring_items"</span>,
    <span class="s2">"reasonCode"</span>: null,
    <span class="s2">"comments"</span>: <span class="s2">"Closing account"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"06d4fa80-f6ab-4760-aa97-2cd4ab83fd37"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2013-09-01T06:00:05.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2013-09-01T06:00:05.000Z"</span>,
      <span class="s2">"recordId"</span>: 1,
      <span class="s2">"accountRecordId"</span>: 11,
      <span class="s2">"tenantRecordId"</span>: 2,
      <span class="s2">"tagDefinitionId"</span>: <span class="s2">"00000000-0000-0000-0000-000000000002"</span>,
      <span class="s2">"objectId"</span>: <span class="s2">"037a6b81-f351-4e09-b2ea-f76f2fb0189e"</span>,
      <span class="s2">"objectType"</span>: <span class="s2">"ACCOUNT"</span>,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"TAG"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"TAG_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>

</code></pre><h1 id='tag-definition'>Tag Definition</h1>
<p>These APIs manage a tag definition resource object, which provides the definition for a user-defined tag.</p>
<h2 id='tag-definition-tag-definition-resource'>Tag Definition Resource</h2>
<p>Each tag is associated with a specific tag definition. A tag definition is a schema or template, and a tag is an instance of it. Please refer to the section <a href="https://killbill.github.io/slate/#account-tags">AccountTags</a> for an overview of tags. The system provides some <code>System tag definitions</code> that can be used to add tags to a particular object. Users may define their own tags; however, when using <code>User Tags</code>, one must first create the associated tag definition.</p>

<p>The tag definition resource includes the following attributes:
* <strong><code>id</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: The id for the resource, in UUID format.
* <strong><code>isControlTag</code></strong> <span style="color:#32A9C7"><em>[System generated, immutable]</em></span>: Indicates if this is a control tag (true or false).
* <strong><code>name</code></strong> <span style="color:#32A9C7"><em>[User generated, immutable]</em></span>: The name of the tag definition.
* <strong><code>description</code></strong> <span style="color:#32A9C7"><em>[User generated, immutable]</em></span>: A description of the tag definition.
* <strong><code>applicableObjectTypes</code></strong> <span style="color:#32A9C7"><em>[User generated, immutable]</em></span>: An array giving the name(s) of resource types that can be given this tag.</p>

<p>The APIs described below provide the ability to create, retrieve, and delete tag definitions, and also to access their associated audit logs.</p>
<h2 id='tag-definition-tag-definition'>Tag Definition</h2>
<p>This endpoint is used to create a new tag definition.</p>
<h3 id='tag-definition-create-a-tag-definition'>Create a tag definition</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tagDefinitions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "name": "good_customer", "description": "a good customer", "applicableObjectTypes": ["ACCOUNT"]}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions"</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 201 
&lt; Location: http://127.0.0.1:8080/1.0/kb/tagDefinitions/93f2bc59-e18d-4a5e-a645-9386c76fc03f
&lt; Content-Type: application/json
&lt; Content-Length: 0
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Returns</strong></p>

<p>Returns a status code of 201 without content to indicate success.</p>

<p><strong>Notes</strong></p>

<p>The <code>id</code> attribute is a string in UUID random format generated by the system. The <code>isControlTag</code> attribute will always be false.</p>

<p>The <code>CreatedBy</code> header may not be empty.</p>
<h3 id='tag-definition-list-tag-definitions'>List tag definitions</h3>
<p>This endpoint is used to obtain a list of all tag definitions for this customer</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tagDefinitions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions"</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"93f2bc59-e18d-4a5e-a645-9386c76fc03f"</span>,
    <span class="s2">"isControlTag"</span>: <span class="nb">false</span>,
    <span class="s2">"name"</span>: <span class="s2">"good_customer"</span>,
    <span class="s2">"description"</span>: <span class="s2">"a good customer"</span>,
    <span class="s2">"applicableObjectTypes"</span>: <span class="o">[</span>
      <span class="s2">"ACCOUNT"</span>
    <span class="o">]</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>,
<span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"00000000-0000-0000-0000-000000000001"</span>,
    <span class="s2">"isControlTag"</span>: <span class="nb">true</span>,
    <span class="s2">"name"</span>: <span class="s2">"AUTO_PAY_OFF"</span>,
    <span class="s2">"description"</span>: <span class="s2">"Suspends payments until removed."</span>,
    <span class="s2">"applicableObjectTypes"</span>: <span class="o">[</span>
      <span class="s2">"ACCOUNT"</span>
    <span class="o">]</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>,
 ...

</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>what audit log information to return (NONE, MINIMAL, FULL). Default NONE.</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of tag definition objects and a status code of 200 to indicate success.</p>
<h3 id='tag-definition-retrieve-a-tag-definition-by-its-id'>Retrieve a tag definition by its ID</h3>
<p>This endpoint is used to retrieve an existing tag definition.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tagDefinitions/{tagDefinitionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions/93f2bc59-e18d-4a5e-a645-9386c76fc03f"</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"93f2bc59-e18d-4a5e-a645-9386c76fc03f"</span>,
    <span class="s2">"isControlTag"</span>: <span class="nb">false</span>,
    <span class="s2">"name"</span>: <span class="s2">"good_customer"</span>,
    <span class="s2">"description"</span>: <span class="s2">"a good customer"</span>,
    <span class="s2">"applicableObjectTypes"</span>: <span class="o">[</span>
      <span class="s2">"ACCOUNT"</span>
    <span class="o">]</span>,
    <span class="s2">"auditLogs"</span>: <span class="o">[]</span>
<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>what audit log information to return (NONE, MINIMAL, FULL). Default NONE.</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a tag definition object and a status code of 200 to indicate success.</p>
<h3 id='tag-definition-delete-a-tag-definition'>Delete a tag definition</h3>
<p>This endpoint is used to delete a tag definition.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tagDefinitions/{tagDefinitionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions/93f2bc59-e18d-4a5e-a645-9386c76fc03f"</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 
&lt; Content-Type: application/json

</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a status code of 204 without content to indicate success.</p>
<h2 id='tag-definition-audit-logs'>Audit Logs</h2><h3 id='tag-definition-retrieve-tag-definition-audit-logs-with-history-by-tag-definition-id'>Retrieve tag definition audit logs with history by tag definition id</h3>
<p>This endpoint is used to retrieve the full set of audit logs for a specified tag definition</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tagDefinitions/{tagDefinitionId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions/92991586-df8a-4d8d-9d55-61172c52fa45/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"changeType"</span>: <span class="s2">"INSERT"</span>,
    <span class="s2">"changeDate"</span>: <span class="s2">"2019-02-26T01:56:48.000Z"</span>,
    <span class="s2">"objectType"</span>: <span class="s2">"TAG_DEFINITION"</span>,
    <span class="s2">"objectId"</span>: <span class="s2">"92991586-df8a-4d8d-9d55-61172c52fa45"</span>,
    <span class="s2">"changedBy"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"reasonCode"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"comments"</span>: <span class="s2">"demo"</span>,
    <span class="s2">"userToken"</span>: <span class="s2">"039f01ea-460a-4edd-bfbc-39a68149cad2"</span>,
    <span class="s2">"history"</span>: <span class="o">{</span>
      <span class="s2">"id"</span>: null,
      <span class="s2">"createdDate"</span>: <span class="s2">"2019-02-26T01:56:48.000Z"</span>,
      <span class="s2">"updatedDate"</span>: <span class="s2">"2019-02-26T01:56:48.000Z"</span>,
      <span class="s2">"recordId"</span>: 1,
      <span class="s2">"accountRecordId"</span>: 1,
      <span class="s2">"tenantRecordId"</span>: 1,
      <span class="s2">"name"</span>: <span class="s2">"good_customer"</span>,
      <span class="s2">"applicableObjectTypes"</span>: <span class="s2">"ACCOUNT"</span>,
      <span class="s2">"description"</span>: <span class="s2">"a good customer"</span>,
      <span class="s2">"isActive"</span>: <span class="nb">true</span>,
      <span class="s2">"tableName"</span>: <span class="s2">"TAG_DEFINITIONS"</span>,
      <span class="s2">"historyTableName"</span>: <span class="s2">"TAG_DEFINITION_HISTORY"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">]</span>

</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a list of tag definition audit logs with a status code of 200 to indicate success.</p>
<h1 id='admin'>Admin</h1>
<p>The admin resource offers a set of enpoints of the following nature:</p>

<ul>
<li>Administrative apis to fix existing state </li>
<li>Operational apis such as adding hosts in and out of rotation, clearing internal caches, ...</li>
<li>Retrieve low level information from the system</li>
</ul>
<h2 id='admin-administrative-apis'>Administrative Apis</h2><h3 id='admin-trigger-an-invoice-generation-for-all-parked-accounts'>Trigger an invoice generation for all parked accounts</h3>
<p>When the system detects an issue invoicing a customer <code>Account</code>, it will automatically <code>PARK</code> the <code>Account</code> as explained in this <a href="http://docs.killbill.io/0.20/invoice_subsystem.html#_parked_accounts">documentation</a>. </p>

<p>After the issue was corrected -- e.g bug was fixed -- one can get all all the <code>Account</code> out of that state by triggering the following endpoint.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/admin/invoices</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/invoices"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">triggerInvoiceGenerationForParkedAccounts</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span> 
                                                   <span class="n">limit</span><span class="o">,</span> 
                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">ofset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">trigger_invoice_generation_for_parked_accounts</span><span class="p">(</span><span class="n">ofset</span><span class="p">,</span> 
                                                                            <span class="n">limit</span><span class="p">,</span> 
                                                                            <span class="n">user</span><span class="p">,</span> 
                                                                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">trigger_invoice_generation_for_parked_accounts</span><span class="p">(</span><span class="s">'test'</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>false</td>
<td>offset for the next pagination call or 0 if not specified</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>false</td>
<td>limit results or default to 100 if not specified</td>
</tr>
</tbody></table>

<p>This api behaves like a <a href="https://killbill.github.io/slate/#using-kill-bill-apis-pagination">pagination api</a> so the pagination headers can be used to paginate over results.</p>

<p><strong>Returns</strong></p>

<p>A 200 http status without content.</p>
<h3 id='admin-update-existing-paymenttransaction-and-associated-payment-state'>Update existing paymentTransaction and associated payment state</h3>
<p>Provides a way to fix the payment state data for a given <code>Payment</code>.
Typically this could happen under a scenario where the call to the third party payment gateway timed-out, and the system is left in an unknwon state.
Later, after possibly retrieveing third party payment gateway data, one can fix the state in Kill Bill using this endpoint.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/admin/payments/{paymentId}/transactions/{paymentTransactionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/payments/864c1418-e768-4cd5-a0db-67537144b685/transactions/864c1418-e768-4cd5-a0db-67537144b685"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">lastSuccessPaymentState</span> <span class="o">=</span> <span class="s">"AUTH_FAILED"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">currentPaymentStateName</span> <span class="o">=</span> <span class="s">"AUTH_FAILED"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">transactionStatus</span> <span class="o">=</span> <span class="s">"PAYMENT_FAILURE"</span><span class="o">;</span>

<span class="n">AdminPayment</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdminPayment</span><span class="o">(</span><span class="n">lastSuccessPaymentState</span><span class="o">,</span> 
                                     <span class="n">currentPaymentStateName</span><span class="o">,</span> 
                                     <span class="n">transactionStatus</span><span class="o">);</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">updatePaymentTransactionState</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                       <span class="n">paymentTransactionId</span><span class="o">,</span> 
                                       <span class="n">body</span><span class="o">,</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s2">"6cb944a-b308-4488-b046-4b4d61d375a6"</span>
<span class="n">transaction_id</span> <span class="o">=</span> <span class="s2">"8gb944a-b308-4488-b046-4b4d61d375r3"</span>
<span class="n">transaction_status</span> <span class="o">=</span> <span class="s2">"AUTH_FAILED"</span>
<span class="n">user</span> <span class="o">=</span>  <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">fix_transaction_state</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                   <span class="n">transaction_id</span><span class="p">,</span> 
                                                   <span class="n">transaction_status</span><span class="p">,</span> 
                                                   <span class="n">user</span><span class="p">,</span> 
                                                   <span class="n">reason</span><span class="p">,</span> 
                                                   <span class="n">comment</span><span class="p">,</span> 
                                                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'8gb944a-b308-4488-b046-4b4d61d375r3'</span>
<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'6cb944a-b308-4488-b046-4b4d61d375a6'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">AdminPayment</span><span class="p">(</span><span class="n">transaction_status</span><span class="o">=</span><span class="s">'AUTH_FAILED'</span><span class="p">)</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="s">'demo'</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">update_payment_transaction_state</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                          <span class="n">payment_transaction_id</span><span class="p">,</span> 
                                          <span class="n">body</span><span class="p">,</span> 
                                          <span class="n">created_by</span><span class="p">,</span>
                                          <span class="n">api_key</span><span class="p">,</span> 
                                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A 204 http status without content.</p>
<h2 id='admin-operational-apis'>Operational Apis</h2><h3 id='admin-invalidates-the-given-cache-if-specified-otherwise-invalidates-all-caches'>Invalidates the given Cache if specified, otherwise invalidates all caches</h3>
<p>Ability to invalidate some/all the caches on a given Kill Bill node/server.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/admin/cache</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/cache"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">cacheName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">invalidatesCache</span><span class="o">(</span><span class="n">cacheName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">cache_name</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">invalidates_cache</span><span class="p">(</span><span class="n">cache_name</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">invalidates_cache</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>cacheName</strong></td>
<td>string</td>
<td>false</td>
<td>cache name</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>A 204 http status without content.</p>
<h3 id='admin-invalidates-caches-per-account-level'>Invalidates Caches per account level</h3>
<p>Ability to invalidate some/all of the caches associated to a specific <code>Account</code> on a given Kill Bill node/server.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/admin/cache/accounts/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/cache/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">invalidatesCacheByAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">invalidates_cache_by_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'2ad52f53-85ae-408a-9879-32a7e59dd03d'</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">invalidates_cache_by_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A 204 http status without content.</p>
<h3 id='admin-invalidates-caches-per-tenant-level'>Invalidates Caches per tenant level</h3>
<p>Ability to invalidate some/all of the caches associated to a specific <code>Tenant</code> on a given Kill Bill node/server.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/admin/cache/tenants</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/cache/tenants"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">invalidatesCacheByTenant</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">invalidates_cache_by_tenant</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">invalidates_cache_by_tenant</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A 204 http status without content.</p>
<h3 id='admin-put-the-host-back-into-rotation'>Put the host back into rotation</h3>
<p>Kill Bill provides some <a href="http://docs.killbill.io/0.20/debugging.html#_healthchecks_and_metrics">apis to return the healtcheck</a> of a particular server. Such healthcheck is configurable and also extensible to plugins, i.e each plugin can also return its own healthcheck status.</p>

<p>The following endpoint can be used to add a server back into the rotation during a deployment.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/admin/healthcheck</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/healthcheck"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">putInRotation</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">put_in_rotation</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">put_in_rotation</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A 204 http status without content.</p>
<h3 id='admin-put-the-host-out-of-rotation'>Put the host out of rotation</h3>
<p>The following endpoint can be used to remove a server back into the rotation during a deployment.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/admin/healthcheck</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/healthcheck"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">putOutOfRotation</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">put_out_of_rotation</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">put_out_of_rotation</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 204 No Content
&lt; Content-Type: application/json
</code></pre><pre class="highlight java tab-java"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">no</span> <span class="n">content</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">no</span> <span class="n">content</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>A 204 http status without content.</p>
<h2 id='admin-low-level-view-apis'>Low Level View Apis</h2><h3 id='admin-get-queues-entries'>Get queues entries</h3>
<p>Returns low level details about the queued notifications for a given <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/admin/queues</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/octet-stream"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/queues"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">queueName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">serviceName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withHistory</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">String</span> <span class="n">minDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">maxDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withInProcessing</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withNotifications</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">OutputStream</span> <span class="n">outputStream</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>


<span class="n">adminApi</span><span class="o">.</span><span class="na">getQueueEntries</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                         <span class="n">queueName</span><span class="o">,</span> 
                         <span class="n">serviceName</span><span class="o">,</span> 
                         <span class="n">withHistory</span><span class="o">,</span> 
                         <span class="n">minDate</span><span class="o">,</span> 
                         <span class="n">maxDate</span><span class="o">,</span> 
                         <span class="n">withInProcessing</span><span class="o">,</span> 
                         <span class="n">withBusEvents</span><span class="o">,</span> 
                         <span class="n">withNotifications</span><span class="o">,</span> 
                         <span class="n">outputStream</span><span class="o">,</span> 
                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"864c1418-e768-4cd5-a0db-67537144b685"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">get_queues_entries</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">get_queue_entries</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># Subset of headers returned when specifying -v curl option</span>
&lt; HTTP/1.1 200 OK
&lt; Content-Type: application/octet-stream

<span class="o">{</span><span class="s2">"busEvents"</span>:[],<span class="s2">"notifications"</span>:[]<span class="o">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="o">{</span><span class="s">"busEvents"</span><span class="o">:[],</span><span class="s">"notifications"</span><span class="o">:[]}</span>
<span class="err">```</span><span class="s">"
```ruby
{"</span><span class="n">busEvents</span><span class="s">":[],"</span><span class="n">notifications</span><span class="err">"</span><span class="o">:[]}</span>
</code></pre><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">"busEvents"</span><span class="p">:[],</span><span class="s">"notifications"</span><span class="p">:[]}</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>false</td>
<td>account id or if not specified return across all accounts</td>
</tr>
<tr>
<td><strong>queueName</strong></td>
<td>string</td>
<td>false</td>
<td>queue name or if not specified return across all queues</td>
</tr>
<tr>
<td><strong>serviceName</strong></td>
<td>string</td>
<td>false</td>
<td>service name or if not specified return across all services</td>
</tr>
<tr>
<td><strong>withHistory</strong></td>
<td>boolean</td>
<td>false</td>
<td>choose true to get history</td>
</tr>
<tr>
<td><strong>minDate</strong></td>
<td>string</td>
<td>false</td>
<td>minimum date</td>
</tr>
<tr>
<td><strong>maxDate</strong></td>
<td>string</td>
<td>false</td>
<td>maximun date</td>
</tr>
<tr>
<td><strong>withInProcessing</strong></td>
<td>boolean</td>
<td>false</td>
<td>choose true to get processing</td>
</tr>
<tr>
<td><strong>withBusEvents</strong></td>
<td>boolean</td>
<td>false</td>
<td>choose true to get bus events</td>
</tr>
<tr>
<td><strong>withNotifications</strong></td>
<td>boolean</td>
<td>false</td>
<td>choose true to get notifications</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>A 200 http status.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
