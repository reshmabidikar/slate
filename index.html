
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Kill Bill</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-32705710-4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-32705710-4');
    </script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3" />
  </head>
  <body class="index" data-languages="[&quot;shell&quot;,&quot;java&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;,&quot;php&quot;]">
    <div class="loader-wrapper">
      <div id="loading"></div>           
    </div>
    <script>
      $(window).on('load',function(){
        $('.loader-wrapper').hide();
      });
    </script>
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="main-wrapper">
        <div class="toc-wrapper">
        <a href="https://killbill.github.io/slate" class="logo"><img src="images/logo.png" alt="Logo" /></a>
        
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="php">php</a>
          </div>

        <div id="docsearch"></div>
        
        <div id="toc" class="toc-list-h1">
            <li>
              <a href="#using-kill-bill-apis" class="toc-h1 toc-link" data-title="Using Kill Bill APIs">Using Kill Bill APIs</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#using-kill-bill-apis-introduction" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                    </li>
                    <li>
                      <a href="#using-kill-bill-apis-authentication-and-rbac" class="toc-h2 toc-link" data-title="Authentication and RBAC">Authentication and RBAC</a>
                    </li>
                    <li>
                      <a href="#using-kill-bill-apis-multi-tenancy" class="toc-h2 toc-link" data-title="Multi-Tenancy">Multi-Tenancy</a>
                    </li>
                    <li>
                      <a href="#using-kill-bill-apis-resource-ids-and-external-keys" class="toc-h2 toc-link" data-title="Resource IDs and External Keys">Resource IDs and External Keys</a>
                    </li>
                    <li>
                      <a href="#using-kill-bill-apis-pagination" class="toc-h2 toc-link" data-title="Pagination">Pagination</a>
                    </li>
                    <li>
                      <a href="#using-kill-bill-apis-audit-and-history" class="toc-h2 toc-link" data-title="Audit and History">Audit and History</a>
                    </li>
                    <li>
                      <a href="#using-kill-bill-apis-versioning" class="toc-h2 toc-link" data-title="Versioning">Versioning</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#using-kill-bill-apis-kill-bill-server" class="toc-h3 toc-link" data-title="Using Kill Bill APIs">Kill Bill Server</a>
                                </li>
                                <li>
                                  <a href="#using-kill-bill-apis-client-libraries" class="toc-h3 toc-link" data-title="Using Kill Bill APIs">Client Libraries</a>
                                </li>
                                <li>
                                  <a href="#using-kill-bill-apis-plugins" class="toc-h3 toc-link" data-title="Using Kill Bill APIs">Plugins</a>
                                </li>
                                <li>
                                  <a href="#using-kill-bill-apis-kpm" class="toc-h3 toc-link" data-title="Using Kill Bill APIs">KPM</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#using-kill-bill-apis-errors" class="toc-h2 toc-link" data-title="Errors">Errors</a>
                    </li>
                    <li>
                      <a href="#using-kill-bill-apis-additional-resources" class="toc-h2 toc-link" data-title="Additional Resources">Additional Resources</a>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#tenant" class="toc-h1 toc-link" data-title="Tenant">Tenant</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#tenant-tenant-resource" class="toc-h2 toc-link" data-title="Tenant Resource">Tenant Resource</a>
                    </li>
                    <li>
                      <a href="#tenant-tenant" class="toc-h2 toc-link" data-title="Tenant">Tenant</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tenant-create-a-tenant" class="toc-h3 toc-link" data-title="Tenant">Create a tenant</a>
                                </li>
                                <li>
                                  <a href="#tenant-retrieve-a-tenant-by-id" class="toc-h3 toc-link" data-title="Tenant">Retrieve a tenant by id</a>
                                </li>
                                <li>
                                  <a href="#tenant-retrieve-a-tenant-by-its-api-key" class="toc-h3 toc-link" data-title="Tenant">Retrieve a tenant by its API key</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#tenant-tenant-key-value-pairs" class="toc-h2 toc-link" data-title="Tenant Key-Value Pairs">Tenant Key-Value Pairs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tenant-add-a-per-tenant-user-key-value" class="toc-h3 toc-link" data-title="Tenant">Add a per tenant user key/value</a>
                                </li>
                                <li>
                                  <a href="#tenant-retrieve-a-per-tenant-user-key-value" class="toc-h3 toc-link" data-title="Tenant">Retrieve a per tenant user key value</a>
                                </li>
                                <li>
                                  <a href="#tenant-delete-a-per-tenant-user-key-value" class="toc-h3 toc-link" data-title="Tenant">Delete a per tenant user key/value</a>
                                </li>
                                <li>
                                  <a href="#tenant-retrieve-per-tenant-keys-and-values-based-on-a-key-prefix" class="toc-h3 toc-link" data-title="Tenant">Retrieve per tenant keys and values based on a key prefix</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#tenant-push-notifications" class="toc-h2 toc-link" data-title="Push Notifications">Push Notifications</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tenant-register-a-push-notification" class="toc-h3 toc-link" data-title="Tenant">Register a push notification</a>
                                </li>
                                <li>
                                  <a href="#tenant-retrieve-a-registered-push-notification" class="toc-h3 toc-link" data-title="Tenant">Retrieve a registered push notification</a>
                                </li>
                                <li>
                                  <a href="#tenant-delete-a-registered-push-notification" class="toc-h3 toc-link" data-title="Tenant">Delete a registered push notification</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#tenant-system-properties-configuration" class="toc-h2 toc-link" data-title="System Properties Configuration">System Properties Configuration</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tenant-add-a-per-tenant-system-properties-configuration" class="toc-h3 toc-link" data-title="Tenant">Add a per tenant system properties configuration</a>
                                </li>
                                <li>
                                  <a href="#tenant-retrieve-a-per-tenant-system-properties-configuration" class="toc-h3 toc-link" data-title="Tenant">Retrieve a per tenant system properties configuration</a>
                                </li>
                                <li>
                                  <a href="#tenant-delete-a-per-tenant-system-properties-configuration" class="toc-h3 toc-link" data-title="Tenant">Delete a per tenant system properties configuration</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#tenant-plugin-configuration" class="toc-h2 toc-link" data-title="Plugin Configuration">Plugin Configuration</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tenant-add-a-per-tenant-configuration-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Add a per tenant configuration for a plugin</a>
                                </li>
                                <li>
                                  <a href="#tenant-retrieve-a-per-tenant-configuration-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Retrieve a per tenant configuration for a plugin</a>
                                </li>
                                <li>
                                  <a href="#tenant-delete-a-per-tenant-configuration-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Delete a per tenant configuration for a plugin</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#tenant-payment-state-machines" class="toc-h2 toc-link" data-title="Payment State Machines">Payment State Machines</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tenant-add-a-per-tenant-payment-state-machine-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Add a per tenant payment state machine for a plugin</a>
                                </li>
                                <li>
                                  <a href="#tenant-retrieve-a-per-tenant-payment-state-machine-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Retrieve a per tenant payment state machine for a plugin</a>
                                </li>
                                <li>
                                  <a href="#tenant-delete-a-per-tenant-payment-state-machine-for-a-plugin" class="toc-h3 toc-link" data-title="Tenant">Delete a per tenant payment state machine for a plugin</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#catalog" class="toc-h1 toc-link" data-title="Catalog">Catalog</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#catalog-catalog-resource" class="toc-h2 toc-link" data-title="Catalog Resource">Catalog Resource</a>
                    </li>
                    <li>
                      <a href="#catalog-catalogvalidation-resource" class="toc-h2 toc-link" data-title="CatalogValidation Resource">CatalogValidation Resource</a>
                    </li>
                    <li>
                      <a href="#catalog-catalog" class="toc-h2 toc-link" data-title="Catalog">Catalog</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#catalog-upload-a-catalog-as-xml" class="toc-h3 toc-link" data-title="Catalog">Upload a catalog as XML</a>
                                </li>
                                <li>
                                  <a href="#catalog-retrieve-the-catalog-as-xml" class="toc-h3 toc-link" data-title="Catalog">Retrieve the catalog as XML</a>
                                </li>
                                <li>
                                  <a href="#catalog-retrieve-the-catalog-as-json" class="toc-h3 toc-link" data-title="Catalog">Retrieve the catalog as JSON</a>
                                </li>
                                <li>
                                  <a href="#catalog-retrieve-a-list-of-catalog-versions" class="toc-h3 toc-link" data-title="Catalog">Retrieve a list of catalog versions</a>
                                </li>
                                <li>
                                  <a href="#catalog-retrieve-available-base-plans" class="toc-h3 toc-link" data-title="Catalog">Retrieve available base plans</a>
                                </li>
                                <li>
                                  <a href="#catalog-retrieve-available-add-ons-for-a-given-product" class="toc-h3 toc-link" data-title="Catalog">Retrieve available add-ons for a given product</a>
                                </li>
                                <li>
                                  <a href="#catalog-delete-all-versions-of-a-per-tenant-catalog" class="toc-h3 toc-link" data-title="Catalog">Delete all versions of a per tenant catalog</a>
                                </li>
                                <li>
                                  <a href="#catalog-validate-a-catalog-xml" class="toc-h3 toc-link" data-title="Catalog">Validate a catalog XML</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#catalog-subscription-info" class="toc-h2 toc-link" data-title="Subscription info">Subscription info</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#catalog-retrieve-the-phase-for-a-given-subscription-and-date" class="toc-h3 toc-link" data-title="Catalog">Retrieve the phase for a given subscription and date</a>
                                </li>
                                <li>
                                  <a href="#catalog-retrieve-the-plan-for-a-given-subscription-and-date" class="toc-h3 toc-link" data-title="Catalog">Retrieve the plan for a given subscription and date</a>
                                </li>
                                <li>
                                  <a href="#catalog-retrieve-the-pricelist-for-a-given-subscription-and-date" class="toc-h3 toc-link" data-title="Catalog">Retrieve the priceList for a given subscription and date</a>
                                </li>
                                <li>
                                  <a href="#catalog-retrieve-product-for-a-given-subscription-and-date" class="toc-h3 toc-link" data-title="Catalog">Retrieve product for a given subscription and date</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#catalog-simple-plan" class="toc-h2 toc-link" data-title="Simple Plan">Simple Plan</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#catalog-add-a-simple-plan" class="toc-h3 toc-link" data-title="Catalog">Add a simple plan</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#account" class="toc-h1 toc-link" data-title="Account">Account</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#account-account-resource" class="toc-h2 toc-link" data-title="Account Resource">Account Resource</a>
                    </li>
                    <li>
                      <a href="#account-accounts" class="toc-h2 toc-link" data-title="Accounts">Accounts</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-create-an-account" class="toc-h3 toc-link" data-title="Account">Create an Account</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-an-account-by-its-id" class="toc-h3 toc-link" data-title="Account">Retrieve an Account by its ID</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-an-account-by-its-external-key" class="toc-h3 toc-link" data-title="Account">Retrieve an Account by its external key</a>
                                </li>
                                <li>
                                  <a href="#account-update-an-account" class="toc-h3 toc-link" data-title="Account">Update an Account</a>
                                </li>
                                <li>
                                  <a href="#account-close-account" class="toc-h3 toc-link" data-title="Account">Close account</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-list-and-search" class="toc-h2 toc-link" data-title="List and Search">List and Search</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-list-accounts" class="toc-h3 toc-link" data-title="Account">List accounts</a>
                                </li>
                                <li>
                                  <a href="#account-search-accounts" class="toc-h3 toc-link" data-title="Account">Search accounts</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-email" class="toc-h2 toc-link" data-title="Email">Email</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-add-account-email" class="toc-h3 toc-link" data-title="Account">Add account email</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-emails" class="toc-h3 toc-link" data-title="Account">Retrieve account emails</a>
                                </li>
                                <li>
                                  <a href="#account-delete-email" class="toc-h3 toc-link" data-title="Account">Delete email</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-bundle" class="toc-h2 toc-link" data-title="Bundle">Bundle</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-retrieve-bundles-for-account" class="toc-h3 toc-link" data-title="Account">Retrieve bundles for account</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-paginated-bundles-for-account" class="toc-h3 toc-link" data-title="Account">Retrieve paginated bundles for account</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-invoice" class="toc-h2 toc-link" data-title="Invoice">Invoice</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-retrieve-account-invoices" class="toc-h3 toc-link" data-title="Account">Retrieve account invoices</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-paginated-account-invoices" class="toc-h3 toc-link" data-title="Account">Retrieve paginated account invoices</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-payment" class="toc-h2 toc-link" data-title="Payment">Payment</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-trigger-a-payment-for-all-unpaid-invoices" class="toc-h3 toc-link" data-title="Account">Trigger a payment for all unpaid invoices</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-invoice-payments" class="toc-h3 toc-link" data-title="Account">Retrieve account invoice payments</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-payments" class="toc-h3 toc-link" data-title="Account">Retrieve account payments</a>
                                </li>
                                <li>
                                  <a href="#account-trigger-a-payment-authorization-purchase-or-credit" class="toc-h3 toc-link" data-title="Account">Trigger a payment (authorization, purchase or credit)</a>
                                </li>
                                <li>
                                  <a href="#account-trigger-a-payment-authorization-purchase-or-credit-using-the-account-external-key" class="toc-h3 toc-link" data-title="Account">Trigger a payment (authorization, purchase or credit) using the account external key</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-payment-method" class="toc-h2 toc-link" data-title="Payment Method">Payment Method</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-add-a-payment-method" class="toc-h3 toc-link" data-title="Account">Add a payment method</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-payment-methods" class="toc-h3 toc-link" data-title="Account">Retrieve account payment methods</a>
                                </li>
                                <li>
                                  <a href="#account-set-the-default-payment-method" class="toc-h3 toc-link" data-title="Account">Set the default payment method</a>
                                </li>
                                <li>
                                  <a href="#account-refresh-account-payment-methods" class="toc-h3 toc-link" data-title="Account">Refresh account payment methods</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-overdue" class="toc-h2 toc-link" data-title="Overdue">Overdue</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-retrieve-overdue-state-for-account" class="toc-h3 toc-link" data-title="Account">Retrieve overdue state for account</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-blocking-state" class="toc-h2 toc-link" data-title="Blocking State">Blocking State</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-blocking-state-resource" class="toc-h3 toc-link" data-title="Account">Blocking State Resource</a>
                                </li>
                                <li>
                                  <a href="#account-block-an-account" class="toc-h3 toc-link" data-title="Account">Block an account</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-blocking-states-for-account" class="toc-h3 toc-link" data-title="Account">Retrieve blocking states for account</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-hierarchical-accounts" class="toc-h2 toc-link" data-title="Hierarchical Accounts">Hierarchical Accounts</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-list-child-accounts" class="toc-h3 toc-link" data-title="Account">List child accounts</a>
                                </li>
                                <li>
                                  <a href="#account-transfer-a-given-child-credit-to-the-parent-level" class="toc-h3 toc-link" data-title="Account">Transfer a given child credit to the parent level</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-add-custom-fields-to-account" class="toc-h3 toc-link" data-title="Account">Add custom fields to account</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-all-custom-fields" class="toc-h3 toc-link" data-title="Account">Retrieve all custom fields</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-custom-fields" class="toc-h3 toc-link" data-title="Account">Retrieve account custom fields</a>
                                </li>
                                <li>
                                  <a href="#account-modify-custom-fields-for-an-account" class="toc-h3 toc-link" data-title="Account">Modify custom fields for an account</a>
                                </li>
                                <li>
                                  <a href="#account-remove-custom-fields-from-account" class="toc-h3 toc-link" data-title="Account">Remove custom fields from account</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-add-tags-to-account" class="toc-h3 toc-link" data-title="Account">Add tags to account</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-all-tags" class="toc-h3 toc-link" data-title="Account">Retrieve all tags</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-tags" class="toc-h3 toc-link" data-title="Account">Retrieve account tags</a>
                                </li>
                                <li>
                                  <a href="#account-remove-tags-from-account" class="toc-h3 toc-link" data-title="Account">Remove tags from account</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#account-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#account-retrieve-audit-logs" class="toc-h3 toc-link" data-title="Account">Retrieve audit logs</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-audit-logs-with-history" class="toc-h3 toc-link" data-title="Account">Retrieve account audit logs with history</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-email-audit-logs-with-history" class="toc-h3 toc-link" data-title="Account">Retrieve account email audit logs with history</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-blocking-state-audit-logs-with-history" class="toc-h3 toc-link" data-title="Account">Retrieve blocking state audit logs with history</a>
                                </li>
                                <li>
                                  <a href="#account-retrieve-account-timeline" class="toc-h3 toc-link" data-title="Account">Retrieve account timeline</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#payment-method" class="toc-h1 toc-link" data-title="Payment Method">Payment Method</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#payment-method-payment-method-resource" class="toc-h2 toc-link" data-title="Payment Method Resource">Payment Method Resource</a>
                    </li>
                    <li>
                      <a href="#payment-method-payment-methods" class="toc-h2 toc-link" data-title="Payment Methods">Payment Methods</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-method-retrieve-a-payment-method-by-id" class="toc-h3 toc-link" data-title="Payment Method">Retrieve a payment method by id</a>
                                </li>
                                <li>
                                  <a href="#payment-method-retrieve-a-payment-method-by-external-key" class="toc-h3 toc-link" data-title="Payment Method">Retrieve a payment method by external key</a>
                                </li>
                                <li>
                                  <a href="#payment-method-delete-a-payment-method" class="toc-h3 toc-link" data-title="Payment Method">Delete a payment method</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-method-list-and-search" class="toc-h2 toc-link" data-title="List and Search">List and Search</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-method-list-payment-methods" class="toc-h3 toc-link" data-title="Payment Method">List payment methods</a>
                                </li>
                                <li>
                                  <a href="#payment-method-search-payment-methods" class="toc-h3 toc-link" data-title="Payment Method">Search payment methods</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-method-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-method-add-custom-fields-to-a-payment-method" class="toc-h3 toc-link" data-title="Payment Method">Add custom fields to a payment method</a>
                                </li>
                                <li>
                                  <a href="#payment-method-retrieve-payment-method-custom-fields" class="toc-h3 toc-link" data-title="Payment Method">Retrieve payment method custom fields</a>
                                </li>
                                <li>
                                  <a href="#payment-method-modify-custom-fields-for-payment-method" class="toc-h3 toc-link" data-title="Payment Method">Modify custom fields for payment method</a>
                                </li>
                                <li>
                                  <a href="#payment-method-remove-custom-fields-from-payment-method" class="toc-h3 toc-link" data-title="Payment Method">Remove custom fields from payment method</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-method-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-method-retrieve-payment-method-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Payment Method">Retrieve payment method audit logs with history by id</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#subscription" class="toc-h1 toc-link" data-title="Subscription">Subscription</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#subscription-subscription-resource" class="toc-h2 toc-link" data-title="Subscription Resource">Subscription Resource</a>
                    </li>
                    <li>
                      <a href="#subscription-subscriptions" class="toc-h2 toc-link" data-title="Subscriptions">Subscriptions</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#subscription-create-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Create a subscription</a>
                                </li>
                                <li>
                                  <a href="#subscription-create-a-subscription-with-addon-products" class="toc-h3 toc-link" data-title="Subscription">Create a subscription with addon products</a>
                                </li>
                                <li>
                                  <a href="#subscription-create-multiple-subscriptions-with-addon-products" class="toc-h3 toc-link" data-title="Subscription">Create multiple subscriptions with addon products</a>
                                </li>
                                <li>
                                  <a href="#subscription-retrieve-a-subscription-by-id" class="toc-h3 toc-link" data-title="Subscription">Retrieve a subscription by id</a>
                                </li>
                                <li>
                                  <a href="#subscription-retrieve-a-subscription-by-key" class="toc-h3 toc-link" data-title="Subscription">Retrieve a subscription by key</a>
                                </li>
                                <li>
                                  <a href="#subscription-update-the-bcd-associated-with-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Update the BCD associated with a subscription</a>
                                </li>
                                <li>
                                  <a href="#subscription-update-the-subscription-quantity" class="toc-h3 toc-link" data-title="Subscription">Update the subscription quantity</a>
                                </li>
                                <li>
                                  <a href="#subscription-change-subscription-plan" class="toc-h3 toc-link" data-title="Subscription">Change subscription plan</a>
                                </li>
                                <li>
                                  <a href="#subscription-undo-a-pending-change-plan-on-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Undo a pending change plan on a subscription</a>
                                </li>
                                <li>
                                  <a href="#subscription-cancel-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Cancel a subscription</a>
                                </li>
                                <li>
                                  <a href="#subscription-un-cancel-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Un-cancel a subscription</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#subscription-blocking-state" class="toc-h2 toc-link" data-title="Blocking State">Blocking State</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#subscription-block-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Block a subscription</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#subscription-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#subscription-add-custom-fields-to-subscription" class="toc-h3 toc-link" data-title="Subscription">Add custom fields to subscription</a>
                                </li>
                                <li>
                                  <a href="#subscription-retrieve-subscription-custom-fields" class="toc-h3 toc-link" data-title="Subscription">Retrieve subscription custom fields</a>
                                </li>
                                <li>
                                  <a href="#subscription-modify-custom-fields-for-a-subscription" class="toc-h3 toc-link" data-title="Subscription">Modify custom fields for a subscription</a>
                                </li>
                                <li>
                                  <a href="#subscription-remove-custom-fields-from-subscription" class="toc-h3 toc-link" data-title="Subscription">Remove custom fields from subscription</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#subscription-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#subscription-add-tags-to-subscription" class="toc-h3 toc-link" data-title="Subscription">Add tags to subscription</a>
                                </li>
                                <li>
                                  <a href="#subscription-retrieve-subscription-tags" class="toc-h3 toc-link" data-title="Subscription">Retrieve subscription tags</a>
                                </li>
                                <li>
                                  <a href="#subscription-remove-tags-from-subscription" class="toc-h3 toc-link" data-title="Subscription">Remove tags from subscription</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#subscription-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#subscription-retrieve-subscription-audit-logs-with-history-by-subscription-id" class="toc-h3 toc-link" data-title="Subscription">Retrieve subscription audit logs with history by subscription id</a>
                                </li>
                                <li>
                                  <a href="#subscription-retrieve-subscription-event-audit-logs-with-history-by-subscription-event-id" class="toc-h3 toc-link" data-title="Subscription">Retrieve subscription event audit logs with history by subscription event id</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#bundle" class="toc-h1 toc-link" data-title="Bundle">Bundle</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#bundle-bundle-resource" class="toc-h2 toc-link" data-title="Bundle Resource">Bundle Resource</a>
                    </li>
                    <li>
                      <a href="#bundle-bundle" class="toc-h2 toc-link" data-title="Bundle">Bundle</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#bundle-retrieve-a-bundle-by-id" class="toc-h3 toc-link" data-title="Bundle">Retrieve a bundle by id</a>
                                </li>
                                <li>
                                  <a href="#bundle-retrieve-a-bundle-by-external-key" class="toc-h3 toc-link" data-title="Bundle">Retrieve a bundle by external key</a>
                                </li>
                                <li>
                                  <a href="#bundle-update-a-bundle-external-key" class="toc-h3 toc-link" data-title="Bundle">Update a bundle external key</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#bundle-transfer" class="toc-h2 toc-link" data-title="Transfer">Transfer</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#bundle-transfer-a-bundle-to-another-account" class="toc-h3 toc-link" data-title="Bundle">Transfer a bundle to another account</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#bundle-blocking-state" class="toc-h2 toc-link" data-title="Blocking State">Blocking State</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#bundle-pause-a-bundle" class="toc-h3 toc-link" data-title="Bundle">Pause a bundle</a>
                                </li>
                                <li>
                                  <a href="#bundle-resume-a-bundle" class="toc-h3 toc-link" data-title="Bundle">Resume a bundle</a>
                                </li>
                                <li>
                                  <a href="#bundle-block-a-bundle" class="toc-h3 toc-link" data-title="Bundle">Block a bundle</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#bundle-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#bundle-add-custom-fields-to-bundle" class="toc-h3 toc-link" data-title="Bundle">Add custom fields to bundle</a>
                                </li>
                                <li>
                                  <a href="#bundle-retrieve-bundle-custom-fields" class="toc-h3 toc-link" data-title="Bundle">Retrieve bundle custom fields</a>
                                </li>
                                <li>
                                  <a href="#bundle-modify-custom-fields-for-a-bundle" class="toc-h3 toc-link" data-title="Bundle">Modify custom fields for a bundle</a>
                                </li>
                                <li>
                                  <a href="#bundle-remove-custom-fields-from-bundle" class="toc-h3 toc-link" data-title="Bundle">Remove custom fields from bundle</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#bundle-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#bundle-add-tags-to-bundle" class="toc-h3 toc-link" data-title="Bundle">Add tags to bundle</a>
                                </li>
                                <li>
                                  <a href="#bundle-retrieve-bundle-tags" class="toc-h3 toc-link" data-title="Bundle">Retrieve bundle tags</a>
                                </li>
                                <li>
                                  <a href="#bundle-remove-tags-from-bundle" class="toc-h3 toc-link" data-title="Bundle">Remove tags from bundle</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#bundle-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#bundle-retrieve-bundle-audit-logs-with-history-by-bundle-id" class="toc-h3 toc-link" data-title="Bundle">Retrieve bundle audit logs with history by bundle id</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#bundle-list-search" class="toc-h2 toc-link" data-title="List/Search">List/Search</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#bundle-list-bundles" class="toc-h3 toc-link" data-title="Bundle">List bundles</a>
                                </li>
                                <li>
                                  <a href="#bundle-search-bundles" class="toc-h3 toc-link" data-title="Bundle">Search bundles</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#invoice" class="toc-h1 toc-link" data-title="Invoice">Invoice</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#invoice-invoice-resource" class="toc-h2 toc-link" data-title="Invoice Resource">Invoice Resource</a>
                    </li>
                    <li>
                      <a href="#invoice-invoiceitem-resource" class="toc-h2 toc-link" data-title="InvoiceItem Resource">InvoiceItem Resource</a>
                    </li>
                    <li>
                      <a href="#invoice-invoicedryrun-resource" class="toc-h2 toc-link" data-title="InvoiceDryRun Resource">InvoiceDryRun Resource</a>
                    </li>
                    <li>
                      <a href="#invoice-invoice" class="toc-h2 toc-link" data-title="Invoice">Invoice</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-trigger-an-invoice-run" class="toc-h3 toc-link" data-title="Invoice">Trigger an invoice run</a>
                                </li>
                                <li>
                                  <a href="#invoice-create-a-migration-invoice" class="toc-h3 toc-link" data-title="Invoice">Create a migration invoice</a>
                                </li>
                                <li>
                                  <a href="#invoice-create-external-charge-s" class="toc-h3 toc-link" data-title="Invoice">Create external charge(s)</a>
                                </li>
                                <li>
                                  <a href="#invoice-create-tax-items" class="toc-h3 toc-link" data-title="Invoice">Create tax items</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-an-invoice-by-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve an invoice by id</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-an-invoice-by-number" class="toc-h3 toc-link" data-title="Invoice">Retrieve an invoice by number</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-an-invoice-by-invoice-item-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve an invoice by invoice item id</a>
                                </li>
                                <li>
                                  <a href="#invoice-render-an-invoice-as-html" class="toc-h3 toc-link" data-title="Invoice">Render an invoice as HTML</a>
                                </li>
                                <li>
                                  <a href="#invoice-change-invoice-status-from-draft-to-committed" class="toc-h3 toc-link" data-title="Invoice">Change invoice status from DRAFT to COMMITTED</a>
                                </li>
                                <li>
                                  <a href="#invoice-void-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Void an invoice</a>
                                </li>
                                <li>
                                  <a href="#invoice-adjust-an-invoice-item" class="toc-h3 toc-link" data-title="Invoice">Adjust an invoice item</a>
                                </li>
                                <li>
                                  <a href="#invoice-delete-a-cba-item" class="toc-h3 toc-link" data-title="Invoice">Delete a CBA item</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-dry-run" class="toc-h2 toc-link" data-title="Dry-run">Dry-run</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-generate-a-dry-run-invoice" class="toc-h3 toc-link" data-title="Invoice">Generate a dry run invoice</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-invoice-groups" class="toc-h2 toc-link" data-title="Invoice Groups">Invoice Groups</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-trigger-an-invoice-group-run" class="toc-h3 toc-link" data-title="Invoice">Trigger an invoice group run</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-an-invoice-group" class="toc-h3 toc-link" data-title="Invoice">Retrieve an invoice group</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-payments" class="toc-h2 toc-link" data-title="Payments">Payments</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-trigger-a-payment-for-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Trigger a payment for an invoice</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-payments-associated-with-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Retrieve payments associated with an invoice</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-add-custom-fields-to-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Add custom fields to an invoice</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-invoice-custom-fields" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice custom fields</a>
                                </li>
                                <li>
                                  <a href="#invoice-modify-custom-fields-for-an-invoice" class="toc-h3 toc-link" data-title="Invoice">Modify custom fields for an invoice</a>
                                </li>
                                <li>
                                  <a href="#invoice-remove-custom-fields-from-invoice" class="toc-h3 toc-link" data-title="Invoice">Remove custom fields from invoice</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-add-tags-to-invoice" class="toc-h3 toc-link" data-title="Invoice">Add tags to invoice</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-invoice-tags" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice tags</a>
                                </li>
                                <li>
                                  <a href="#invoice-remove-tags-from-invoice" class="toc-h3 toc-link" data-title="Invoice">Remove tags from invoice</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-translation" class="toc-h2 toc-link" data-title="Translation">Translation</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-upload-the-catalog-translation-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Upload the catalog translation for the tenant</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-the-catalog-translation-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Retrieve the catalog translation for the tenant</a>
                                </li>
                                <li>
                                  <a href="#invoice-upload-the-invoice-translation-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Upload the invoice translation for the tenant</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-the-invoice-translation-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Retrieve the invoice translation for the tenant</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-template" class="toc-h2 toc-link" data-title="Template">Template</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-upload-the-manualpay-invoice-template-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Upload the manualPay invoice template for the tenant</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-the-manualpay-invoice-template-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Retrieve the manualPay invoice template for the tenant</a>
                                </li>
                                <li>
                                  <a href="#invoice-upload-the-invoice-template-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Upload the invoice template for the tenant</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-the-invoice-template-for-the-tenant" class="toc-h3 toc-link" data-title="Invoice">Retrieve the invoice template for the tenant</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-example" class="toc-h2 toc-link" data-title="Example">Example</a>
                    </li>
                    <li>
                      <a href="#invoice-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-retrieve-invoice-audit-logs-with-history-by-invoice-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice audit logs with history by invoice id</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-invoice-item-audit-logs-with-history-by-invoice-item-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice item audit logs with history by invoice item id</a>
                                </li>
                                <li>
                                  <a href="#invoice-retrieve-invoice-payment-audit-logs-with-history-by-invoice-payment-id" class="toc-h3 toc-link" data-title="Invoice">Retrieve invoice payment audit logs with history by invoice payment id</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-list-and-search" class="toc-h2 toc-link" data-title="List and Search">List and Search</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-list-invoices" class="toc-h3 toc-link" data-title="Invoice">List invoices</a>
                                </li>
                                <li>
                                  <a href="#invoice-search-invoices" class="toc-h3 toc-link" data-title="Invoice">Search invoices</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#credit" class="toc-h1 toc-link" data-title="Credit">Credit</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#credit-credit-resource" class="toc-h2 toc-link" data-title="Credit Resource">Credit Resource</a>
                    </li>
                    <li>
                      <a href="#credit-credit" class="toc-h2 toc-link" data-title="Credit">Credit</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#credit-create-credits" class="toc-h3 toc-link" data-title="Credit">Create credits</a>
                                </li>
                                <li>
                                  <a href="#credit-retrieve-a-credit-by-id" class="toc-h3 toc-link" data-title="Credit">Retrieve a credit by id</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#payment" class="toc-h1 toc-link" data-title="Payment">Payment</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#payment-payment-resource" class="toc-h2 toc-link" data-title="Payment Resource">Payment Resource</a>
                    </li>
                    <li>
                      <a href="#payment-payments" class="toc-h2 toc-link" data-title="Payments">Payments</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-capture-an-existing-authorization-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Capture an existing authorization [using paymentId]</a>
                                </li>
                                <li>
                                  <a href="#payment-capture-an-existing-authorization-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Capture an existing authorization [using paymentExternalKey]</a>
                                </li>
                                <li>
                                  <a href="#payment-retrieve-a-payment-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Retrieve a payment [using paymentId]</a>
                                </li>
                                <li>
                                  <a href="#payment-retrieve-a-payment-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Retrieve a payment [using paymentExternalKey]</a>
                                </li>
                                <li>
                                  <a href="#payment-complete-an-existing-transaction-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Complete an existing transaction [using paymentId]</a>
                                </li>
                                <li>
                                  <a href="#payment-complete-an-existing-transaction-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Complete an existing transaction [using paymentExternalKey]</a>
                                </li>
                                <li>
                                  <a href="#payment-void-an-existing-payment-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Void an existing payment [using paymentId]</a>
                                </li>
                                <li>
                                  <a href="#payment-void-an-existing-payment-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Void an existing payment [using paymentExternalKey]</a>
                                </li>
                                <li>
                                  <a href="#payment-record-a-chargeback-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Record a chargeback [using paymentId]</a>
                                </li>
                                <li>
                                  <a href="#payment-record-a-chargeback-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Record a chargeback [using paymentExternalKey]</a>
                                </li>
                                <li>
                                  <a href="#payment-record-a-chargeback-reversal-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Record a chargeback reversal [using paymentId]</a>
                                </li>
                                <li>
                                  <a href="#payment-record-a-chargeback-reversal-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Record a chargeback reversal [using paymentExternalKey]</a>
                                </li>
                                <li>
                                  <a href="#payment-refund-an-existing-payment-using-paymentid" class="toc-h3 toc-link" data-title="Payment">Refund an existing payment [using paymentId]</a>
                                </li>
                                <li>
                                  <a href="#payment-refund-an-existing-payment-using-paymentexternalkey" class="toc-h3 toc-link" data-title="Payment">Refund an existing payment [using paymentExternalKey]</a>
                                </li>
                                <li>
                                  <a href="#payment-cancel-a-scheduled-payment-attempt-retry-using-transactionid" class="toc-h3 toc-link" data-title="Payment">Cancel a scheduled payment attempt retry [using transactionId]</a>
                                </li>
                                <li>
                                  <a href="#payment-cancel-a-scheduled-payment-attempt-retry-using-transactionexternalkey" class="toc-h3 toc-link" data-title="Payment">Cancel a scheduled payment attempt retry [using transactionExternalKey]</a>
                                </li>
                                <li>
                                  <a href="#payment-combo-api-to-create-a-new-payment-transaction-on-a-existing-or-not-account" class="toc-h3 toc-link" data-title="Payment">Combo api to create a new payment transaction on a existing (or not) account</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-add-custom-fields-to-payment" class="toc-h3 toc-link" data-title="Payment">Add custom fields to payment</a>
                                </li>
                                <li>
                                  <a href="#payment-retrieve-payment-custom-fields" class="toc-h3 toc-link" data-title="Payment">Retrieve payment custom fields</a>
                                </li>
                                <li>
                                  <a href="#payment-modify-custom-fields-for-a-payment" class="toc-h3 toc-link" data-title="Payment">Modify custom fields for a payment</a>
                                </li>
                                <li>
                                  <a href="#payment-remove-custom-fields-from-a-payment" class="toc-h3 toc-link" data-title="Payment">Remove custom fields from a payment</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-add-tags-to-a-payment" class="toc-h3 toc-link" data-title="Payment">Add tags to a payment</a>
                                </li>
                                <li>
                                  <a href="#payment-retrieve-payment-tags" class="toc-h3 toc-link" data-title="Payment">Retrieve payment tags</a>
                                </li>
                                <li>
                                  <a href="#payment-remove-tags-from-a-payment" class="toc-h3 toc-link" data-title="Payment">Remove tags from a payment</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-retrieve-payment-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Payment">Retrieve payment audit logs with history by id</a>
                                </li>
                                <li>
                                  <a href="#payment-retrieve-payment-attempt-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Payment">Retrieve payment attempt audit logs with history by id</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-list-and-search" class="toc-h2 toc-link" data-title="List and Search">List and Search</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-get-payments" class="toc-h3 toc-link" data-title="Payment">Get payments</a>
                                </li>
                                <li>
                                  <a href="#payment-search-payments" class="toc-h3 toc-link" data-title="Payment">Search payments</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#payment-transaction" class="toc-h1 toc-link" data-title="Payment Transaction">Payment Transaction</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#payment-transaction-payment-transaction-resource" class="toc-h2 toc-link" data-title="Payment Transaction Resource">Payment Transaction Resource</a>
                    </li>
                    <li>
                      <a href="#payment-transaction-payment-transactions" class="toc-h2 toc-link" data-title="Payment Transactions">Payment Transactions</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-transaction-retrieve-a-payment-by-transaction-id" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve a payment by transaction id</a>
                                </li>
                                <li>
                                  <a href="#payment-transaction-retrieve-a-payment-transaction-by-external-key" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve a payment transaction by external key</a>
                                </li>
                                <li>
                                  <a href="#payment-transaction-mark-a-pending-payment-transaction-as-succeeded-or-failed" class="toc-h3 toc-link" data-title="Payment Transaction">Mark a pending payment transaction as succeeded or failed</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-transaction-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-transaction-retrieve-payment-transaction-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve payment transaction audit logs with history by id</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-transaction-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-transaction-add-custom-fields-to-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Add custom fields to payment transaction</a>
                                </li>
                                <li>
                                  <a href="#payment-transaction-retrieve-payment-transaction-custom-fields" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve payment transaction custom fields</a>
                                </li>
                                <li>
                                  <a href="#payment-transaction-modify-custom-fields-for-a-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Modify custom fields for a payment transaction</a>
                                </li>
                                <li>
                                  <a href="#payment-transaction-remove-custom-fields-from-a-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Remove custom fields from a payment transaction</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#payment-transaction-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#payment-transaction-add-tags-to-a-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Add tags to a payment transaction</a>
                                </li>
                                <li>
                                  <a href="#payment-transaction-retrieve-payment-transaction-tags" class="toc-h3 toc-link" data-title="Payment Transaction">Retrieve payment transaction tags</a>
                                </li>
                                <li>
                                  <a href="#payment-transaction-remove-tags-from-a-payment-transaction" class="toc-h3 toc-link" data-title="Payment Transaction">Remove tags from a payment transaction</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#invoice-payment" class="toc-h1 toc-link" data-title="Invoice Payment">Invoice Payment</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#invoice-payment-invoice-payment-resource" class="toc-h2 toc-link" data-title="Invoice Payment Resource">Invoice Payment Resource</a>
                    </li>
                    <li>
                      <a href="#invoice-payment-invoice-payment-transaction-resource" class="toc-h2 toc-link" data-title="Invoice Payment Transaction Resource">Invoice Payment Transaction Resource</a>
                    </li>
                    <li>
                      <a href="#invoice-payment-invoice-payment" class="toc-h2 toc-link" data-title="Invoice Payment">Invoice Payment</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-payment-retrieve-a-payment-by-id" class="toc-h3 toc-link" data-title="Invoice Payment">Retrieve a payment by id</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-refund-a-payment-and-adjust-the-invoice-if-needed" class="toc-h3 toc-link" data-title="Invoice Payment">Refund a payment, and adjust the invoice if needed</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-record-a-chargeback" class="toc-h3 toc-link" data-title="Invoice Payment">Record a chargeback</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-record-a-chargeback-reversal" class="toc-h3 toc-link" data-title="Invoice Payment">Record a chargeback reversal</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-complete-an-existing-transaction" class="toc-h3 toc-link" data-title="Invoice Payment">Complete an existing transaction</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-payment-custom-fields" class="toc-h2 toc-link" data-title="Custom Fields">Custom Fields</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-payment-add-custom-fields-to-invoice-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Add custom fields to invoice payment</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-retrieve-invoice-payment-custom-fields" class="toc-h3 toc-link" data-title="Invoice Payment">Retrieve invoice payment custom fields</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-modify-custom-fields-for-an-invoice-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Modify custom fields for an invoice payment</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-remove-custom-fields-from-an-invoice-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Remove custom fields from an invoice payment</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-payment-tags" class="toc-h2 toc-link" data-title="Tags">Tags</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-payment-add-tags-to-an-invoice-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Add tags to an invoice payment</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-retrieve-invoice-payment-tags" class="toc-h3 toc-link" data-title="Invoice Payment">Retrieve invoice payment tags</a>
                                </li>
                                <li>
                                  <a href="#invoice-payment-remove-tags-from-an-invoice-payment" class="toc-h3 toc-link" data-title="Invoice Payment">Remove tags from an invoice payment</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#invoice-payment-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#invoice-payment-retrieve-invoice-payment-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Invoice Payment">Retrieve invoice payment audit logs with history by id</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#usage" class="toc-h1 toc-link" data-title="Usage">Usage</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#usage-usage-resource" class="toc-h2 toc-link" data-title="Usage Resource">Usage Resource</a>
                    </li>
                    <li>
                      <a href="#usage-usage" class="toc-h2 toc-link" data-title="Usage">Usage</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#usage-record-usage-for-a-subscription" class="toc-h3 toc-link" data-title="Usage">Record usage for a subscription</a>
                                </li>
                                <li>
                                  <a href="#usage-retrieve-usage-for-a-subscription-and-unit-type" class="toc-h3 toc-link" data-title="Usage">Retrieve usage for a subscription and unit type</a>
                                </li>
                                <li>
                                  <a href="#usage-retrieve-usage-for-a-subscription" class="toc-h3 toc-link" data-title="Usage">Retrieve usage for a subscription</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#custom-field" class="toc-h1 toc-link" data-title="Custom Field">Custom Field</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#custom-field-custom-field-resource" class="toc-h2 toc-link" data-title="Custom Field  Resource">Custom Field  Resource</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#custom-field-list-all-custom-fields" class="toc-h3 toc-link" data-title="Custom Field">List all custom fields</a>
                                </li>
                                <li>
                                  <a href="#custom-field-search-custom-fields-by-id" class="toc-h3 toc-link" data-title="Custom Field">Search custom fields by ID</a>
                                </li>
                                <li>
                                  <a href="#custom-field-search-custom-fields-by-resource-type-name-and-optional-value" class="toc-h3 toc-link" data-title="Custom Field">Search custom fields by resource type, name, and optional value</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#custom-field-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#custom-field-retrieve-custom-field-audit-logs-with-history-by-custom-field-id" class="toc-h3 toc-link" data-title="Custom Field">Retrieve custom field audit logs with history by custom field id</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#tag" class="toc-h1 toc-link" data-title="Tag">Tag</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#tag-tag-resource" class="toc-h2 toc-link" data-title="Tag  Resource">Tag  Resource</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tag-list-all-tags" class="toc-h3 toc-link" data-title="Tag">List all tags</a>
                                </li>
                                <li>
                                  <a href="#tag-search-tags" class="toc-h3 toc-link" data-title="Tag">Search tags</a>
                                </li>
                                <li>
                                  <a href="#tag-retrieve-tag-audit-logs" class="toc-h3 toc-link" data-title="Tag">Retrieve tag audit logs</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#tag-definition" class="toc-h1 toc-link" data-title="Tag Definition">Tag Definition</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#tag-definition-tag-definition-resource" class="toc-h2 toc-link" data-title="Tag Definition Resource">Tag Definition Resource</a>
                    </li>
                    <li>
                      <a href="#tag-definition-tag-definition" class="toc-h2 toc-link" data-title="Tag Definition">Tag Definition</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tag-definition-create-a-tag-definition" class="toc-h3 toc-link" data-title="Tag Definition">Create a tag definition</a>
                                </li>
                                <li>
                                  <a href="#tag-definition-list-tag-definitions" class="toc-h3 toc-link" data-title="Tag Definition">List tag definitions</a>
                                </li>
                                <li>
                                  <a href="#tag-definition-retrieve-a-tag-definition-by-its-id" class="toc-h3 toc-link" data-title="Tag Definition">Retrieve a tag definition by its ID</a>
                                </li>
                                <li>
                                  <a href="#tag-definition-delete-a-tag-definition" class="toc-h3 toc-link" data-title="Tag Definition">Delete a tag definition</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#tag-definition-audit-logs" class="toc-h2 toc-link" data-title="Audit Logs">Audit Logs</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#tag-definition-retrieve-tag-definition-audit-logs-with-history-by-id" class="toc-h3 toc-link" data-title="Tag Definition">Retrieve tag definition audit logs with history by id</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
            <li>
              <a href="#admin" class="toc-h1 toc-link" data-title="Admin">Admin</a>
                <ul class="toc-list-h2">
                    <li>
                      <a href="#admin-adminpayment-object" class="toc-h2 toc-link" data-title="AdminPayment object">AdminPayment object</a>
                    </li>
                    <li>
                      <a href="#admin-administrative-apis" class="toc-h2 toc-link" data-title="Administrative Apis">Administrative Apis</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#admin-trigger-an-invoice-generation-for-all-parked-accounts" class="toc-h3 toc-link" data-title="Admin">Trigger an invoice generation for all parked accounts</a>
                                </li>
                                <li>
                                  <a href="#admin-update-the-state-of-a-paymenttransaction-and-associated-payment" class="toc-h3 toc-link" data-title="Admin">Update the state of a paymentTransaction and associated payment</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#admin-operational-apis" class="toc-h2 toc-link" data-title="Operational Apis">Operational Apis</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#admin-invalidate-a-specific-cache-or-invalidate-all-caches" class="toc-h3 toc-link" data-title="Admin">Invalidate a specific cache, or invalidate all caches</a>
                                </li>
                                <li>
                                  <a href="#admin-invalidate-caches-for-an-account" class="toc-h3 toc-link" data-title="Admin">Invalidate Caches for an Account</a>
                                </li>
                                <li>
                                  <a href="#admin-invalidate-caches-for-a-tenant" class="toc-h3 toc-link" data-title="Admin">Invalidate Caches for a Tenant</a>
                                </li>
                                <li>
                                  <a href="#admin-put-the-host-back-into-rotation" class="toc-h3 toc-link" data-title="Admin">Put the host back into rotation</a>
                                </li>
                                <li>
                                  <a href="#admin-remove-a-server-from-the-rotation" class="toc-h3 toc-link" data-title="Admin">Remove a server from the rotation</a>
                                </li>
                          </ul>
                    </li>
                    <li>
                      <a href="#admin-low-level-view-apis" class="toc-h2 toc-link" data-title="Low Level View Apis">Low Level View Apis</a>
                          <ul class="toc-list-h3">
                                <li>
                                  <a href="#admin-get-queue-entries" class="toc-h3 toc-link" data-title="Admin">Get queue entries</a>
                                </li>
                          </ul>
                    </li>
                </ul>
            </li>
        </div>
        <a class="doclink" href="mailto:support@killbill.io">Report a doc problem </a>
      </div>
      <div class="page-wrapper">
        <div class="dark-box"></div>
        <div class="content">
          <h1 id='using-kill-bill-apis'>Using Kill Bill APIs</h1><h2 id='using-kill-bill-apis-introduction'>Introduction</h2>
<p>Kill Bill offers a set of HTTP APIs, commonly called REST APIs, that use the HTTP verbs <code>POST</code>, <code>GET</code>, <code>PUT</code>, <code>DELETE</code> to invoke Create, Read, Update and Delete (CRUD) operations, and that use HTTP response codes to indicate errors. These APIs enable the management of Kill Bill resources -- e.g <code>Account</code> -- through the use of JSON input and output.</p>

<p>Kill Bill also offers a set of <a href="https://github.com/killbill/killbill-api/tree/master/src/main/java/org/killbill/billing">java APIs</a> that can be used by plugins to make requests, and a set of <a href="https://github.com/killbill/killbill-plugin-api">java plugin APIs</a> for Kill Bill core to interact with the plugins. These apis are beyond the scope of this documentation.</p>

<blockquote>
<p>API client libraries</p>
</blockquote>

<p>Official libraries for the Kill Bill API are available in several languages,
including Java, Php, Python, Ruby, Node, and Go. Community-supported libraries
such as .NET are also available. Note that code examples for Curl, Java, Ruby and Python are shown in the right-hand column of this document.</p>

<p>In the following documentation, we assume
you have a Kill Bill server instance running on <code>127.0.0.1</code> on port <code>8080</code>. It is straightforward to substitute a different IP address or port number if necessary.</p>

<p>Kill Bill supports the <code>https</code> protocol, but here all examples are shown using <code>http</code>.</p>
<pre class="highlight java tab-java"><code><span class="c1">//</span>
<span class="c1">// You can find the java client on github: https://github.com/killbill/killbill-client-java</span>
<span class="c1">//</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="c1">#</span>
<span class="c1"># You can find the ruby client on github: https://github.com/killbill/killbill-client-ruby</span>
<span class="c1">#</span>
</code></pre>
<p>The description of the API in this documentation is limited to the most common use cases and does not include advanced features that we have crafted over the years from all the use cases we have seen from our users.</p>

<p>For questions about API use, or to report bugs, you can subscribe to the <a href="https://groups.google.com/forum/#!forum/killbilling-users">Kill Bill user mailing list</a>.</p>
<h2 id='using-kill-bill-apis-authentication-and-rbac'>Authentication and RBAC</h2>
<p>In order to make API calls, one needs to authenticate each request by passing an HTTP <code>Authorization</code> header and by following the HTTP Basic authentication scheme.</p>

<p>Depending on how the system has been configured, the authentication mechanism can happen using different options -- some or all at the same time:</p>

<ul>
<li>Flat file configuration</li>
<li>Database configuration</li>
<li>LDAP configuration</li>
<li>OKTA configuration</li>
</ul>

<p>The system also supports configuring roles and permissions, to restrict user access to certain resources and operations. The permissions are quite granular and are defined <a href="https://github.com/killbill/killbill-api/blob/master/src/main/java/org/killbill/billing/security/Permission.java#L19">here</a></p>
<h2 id='using-kill-bill-apis-multi-tenancy'>Multi-Tenancy</h2>
<p>Kill Bill has been designed from the ground up to run multiple logical instances on the same set of servers and databases. This allows different customer data sets to be cleanly separated. Another common use case is to configure both a production tenant and a test tenant, the latter being used for test requests during deployment and for sanity after deployment.</p>

<p>Each API call requires the tenant being used to be identified, through the use of 2 HTTP headers:</p>

<ul>
<li><strong><code>X-Killbill-ApiKey</code></strong>: The API key associated with the tenant. This value is stored in clear in the database.</li>
<li><strong><code>X-Killbill-ApiSecret</code></strong>: The API secret associated with the tenant. This value is hashed and stored along with the <code>salt</code> in the database</li>
</ul>

<aside class="notice">Note: You can control the number of hash iterations through the system property `org.killbill.security.shiroNbHashIterations` whose default value is set to `200000`. If your security requirements are met through other means, you can set this value to `1` to avoid wasting CPU cycles and greatly improve latency. Changing the value on an existing system requires re-hashing the keys.</aside>

<blockquote>
<p>Specifying the basic authentication headers and multi-tenancy headers:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
-u admin:password <span class="se">\</span>
-H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
-H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
...
</code></pre><pre class="highlight java tab-java"><code><span class="n">KillBillHttpClient</span> <span class="n">killBillHttpClient</span> <span class="o">=</span> <span class="k">new</span> <span class="n">KillBillHttpClient</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"http://%s:%d"</span><span class="o">,</span> <span class="s">"127.0.0.1"</span><span class="o">,</span> <span class="mi">8080</span><span class="o">),</span>
                                                               <span class="n">username</span><span class="o">,</span>
                                                               <span class="n">password</span><span class="o">,</span>
                                                               <span class="n">apiKey</span><span class="o">,</span>
                                                               <span class="n">apiSecret</span><span class="o">,</span>
                                                               <span class="kc">null</span><span class="o">,</span>
                                                               <span class="kc">null</span><span class="o">,</span>
                                                               <span class="mi">1000</span><span class="o">,</span>
                                                               <span class="mi">5000</span><span class="o">,</span>
                                                               <span class="mi">5000</span><span class="o">);</span>

<span class="n">AccountApi</span> <span class="n">accountApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccountApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">AdminApi</span> <span class="n">adminApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdminApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">BundleApi</span> <span class="n">bundleApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BundleApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">CatalogApi</span> <span class="n">catalogApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CatalogApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">CreditApi</span> <span class="n">creditApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CreditApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">CustomFieldApi</span> <span class="n">customFieldApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFieldApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">ExportApi</span> <span class="n">exportApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ExportApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">InvoiceApi</span> <span class="n">invoiceApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">InvoiceItemApi</span> <span class="n">invoiceItemApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItemApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoicePaymentApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">NodesInfoApi</span> <span class="n">nodesInfoApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NodesInfoApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">OverdueApi</span> <span class="n">overdueApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OverdueApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PaymentApi</span> <span class="n">paymentApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PaymentGatewayApi</span> <span class="n">paymentGatewayApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentGatewayApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentMethodApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransactionApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">PluginInfoApi</span> <span class="n">pluginInfoApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PluginInfoApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">SecurityApi</span> <span class="n">securityApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SecurityApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubscriptionApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">TagApi</span> <span class="n">tagApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TagApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">TagDefinitionApi</span> <span class="n">tagDefinitionApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TagDefinitionApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">TenantApi</span> <span class="n">tenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TenantApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>
<span class="n">UsageApi</span> <span class="n">usageApi</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UsageApi</span><span class="o">(</span><span class="n">killBillHttpClient</span><span class="o">);</span>

<span class="c1">// Request Options example</span>
<span class="n">String</span> <span class="n">createdBy</span> <span class="o">=</span> <span class="s">"me"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">reason</span> <span class="o">=</span> <span class="s">"Going through my first tutorial"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">comment</span> <span class="o">=</span> <span class="s">"I like it!"</span><span class="o">;</span>

<span class="n">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"bob"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"lazar"</span><span class="o">;</span>


<span class="n">RequestOptions</span> <span class="n">requestOptions</span> <span class="o">=</span> <span class="n">RequestOptions</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                                              <span class="o">.</span><span class="na">withCreatedBy</span><span class="o">(</span><span class="n">createdBy</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withReason</span><span class="o">(</span><span class="n">reason</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withComment</span><span class="o">(</span><span class="n">comment</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withQueryParams</span><span class="o">(</span><span class="n">queryParams</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withTenantApiKey</span><span class="o">(</span><span class="n">apiKey</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">withTenantApiSecret</span><span class="o">(</span><span class="n">apiSecret</span><span class="o">)</span>
                                              <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'killbill_client'</span>

<span class="no">KillBillClient</span><span class="p">.</span><span class="nf">url</span> <span class="o">=</span> <span class="s1">'http://127.0.0.1:8080'</span>

<span class="c1"># Multi-tenancy and RBAC credentials</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="s1">'admin'</span><span class="p">,</span>
  <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="s1">'password'</span><span class="p">,</span>
  <span class="ss">:api_key</span> <span class="o">=&gt;</span> <span class="s1">'bob'</span><span class="p">,</span>
  <span class="ss">:api_secret</span> <span class="o">=&gt;</span> <span class="s1">'lazar'</span>
<span class="p">}</span>

<span class="c1"># Audit log data</span>
<span class="n">user</span> <span class="o">=</span> <span class="s1">'me'</span>
<span class="n">reason</span> <span class="o">=</span> <span class="s1">'Going through my first tutorial'</span>
<span class="n">comment</span> <span class="o">=</span> <span class="s1">'I like it!'</span>

<span class="c1"># Start using....</span>

</code></pre><pre class="highlight python tab-python"><code><span class="c"># Edit file: configuration.py, lines:50-62</span>

<span class="c"># Default Base url</span>
<span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="s">"http://localhost:8080"</span>
<span class="c"># Temp file folder for downloading files</span>
<span class="bp">self</span><span class="o">.</span><span class="n">temp_folder_path</span> <span class="o">=</span> <span class="bp">None</span>

<span class="c"># Authentication Settings</span>
<span class="c"># dict to store API key(s)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># dict to store API prefix (e.g. Bearer)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">api_key_prefix</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"># Username for HTTP basic authentication</span>
<span class="bp">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="s">"admin"</span>
<span class="c"># Password for HTTP basic authentication</span>
<span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="s">"password"</span>

<span class="c">####################################################</span>

<span class="c"># Basic example using the client</span>
<span class="n">exampleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">ExampleApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Example</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'John'</span><span class="p">,</span> <span class="n">last_name</span> <span class="o">=</span> <span class="s">'Doe'</span><span class="p">)</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="s">'me'</span>
<span class="n">api_key</span> <span class="o">=</span> <span class="s">'bob'</span>
<span class="n">api_secret</span> <span class="o">=</span> <span class="s">'lazar'</span>

<span class="n">exampleApi</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                  <span class="n">created_by</span><span class="p">,</span>
                  <span class="n">api_key</span><span class="p">,</span>
                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre><h2 id='using-kill-bill-apis-resource-ids-and-external-keys'>Resource IDs and External Keys</h2>
<p>When a new resource is created, there are 2 IDS associated with it. Kill Bill will allocate a unique ID, and the user of the API will also be able to associate its own unique key, called the <code>external key</code>. The external key is used for 2 scenarios:</p>

<ul>
<li><strong>ID Mapping</strong>: Typically an external key can be passed to create a mapping between the ID generated by Kill Bill and a known key for this resource</li>
<li><strong>Idempotency</strong>: Kill Bill ensures that each external key is unique, so if an API call times out, it can be safely retried with the same external key. The second request would only succeed if the first one did not complete. This ensures idempotency of the call, since the external key is unique per tenant and across all resources.</li>
</ul>
<h2 id='using-kill-bill-apis-pagination'>Pagination</h2>
<p>Besides the traditional CRUD APIs associated with each resource, we also offer pagination APIs to allow the listing of per-tenant resources, such as all <code>Account</code>s for a given tenant. These APIs include an <code>offset</code> and a <code>limit</code>, provided as query parameters, to allow the listing of all resources of a given type, on a page by page basis. In addition to the json list, each response will also include the following http headers:</p>

<ul>
<li><strong><code>X-Killbill-Pagination-CurrentOffset</code></strong> : The offest of the first record in the returned list</li>
<li><strong><code>X-Killbill-Pagination-NextOffset</code></strong> : The header will only be present if there are additional entries to return and would include the next offset</li>
<li><strong><code>X-Killbill-Pagination-TotalNbRecords</code></strong> : The total number of records</li>
<li><strong><code>X-Killbill-Pagination-NextPageUri</code></strong> : The uri that can be used to retrieve the next page.</li>
</ul>
<h2 id='using-kill-bill-apis-audit-and-history'>Audit and History</h2>
<p>Every api in Kill Bill that creates, or modifies state will create an audit log record to track <em>who</em> made the change. In addition, we also allow the record to specify <em>why</em> this change was made. This information is passed for every <code>POST</code>, <code>PUT</code>, and <code>DELETE</code> request and relies on special HTTP headers:</p>

<ul>
<li><strong><code>X-Killbill-CreatedBy</code></strong> : Mandatory header to track who made the change.</li>
<li><strong><code>X-Killbill-Reason</code></strong> : Optional header to track the reason; typically one would use a special reason code -- e.g <em>COURTESY_REFUND</em>.</li>
<li><strong><code>X-Killbill-Comment</code></strong> : Optional header to track the metadata; typically one would add more information -- e.g &#39;Good old faithful customer&#39;.</li>
</ul>

<p>In addition to the audit log, Kill Bill also records the history of the changes. For instance updating the billing addess of a customer would create an additonal row to track the change and link it to the audit log. The <code>audit</code> query parameter can take the following values:</p>

<ul>
<li><strong><code>NONE</code></strong> <em>[Default]</em>: No audit log is beeing returned. </li>
<li><strong><code>MINIMAL</code></strong> : Only rows associated to <em>inserts</em> are being returned, but no <code>updates</code>.</li>
<li><strong><code>FULL</code></strong> : Everything is being returned.<br></li>
</ul>

<blockquote>
<p>Request: Fetching an account specifying <code>audit=MINIMAL</code></p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
-u admin:password <span class="se">\</span>
-H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
-H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
<span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/e8877928-0226-488d-9272-07a5e66d897f?audit=MINIMAL"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">Account</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                      <span class="kc">false</span><span class="o">,</span>
                                      <span class="kc">false</span><span class="o">,</span>
                                      <span class="n">AuditLevel</span><span class="o">.</span><span class="na">MINIMAL</span><span class="o">,</span>
                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>  <span class="no">Api</span> <span class="n">does</span> <span class="n">not</span> <span class="n">exist</span> <span class="p">;</span><span class="o">-</span><span class="p">(</span>

</code></pre>
<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  ...
  "auditLogs": [
    {
      "changeType": "INSERT",
      "changeDate": "2018-02-05T22:39:53.000Z",
      "changedBy": "demo",
      "reasonCode": null,
      "comments": null,
      "userToken": "4858a67e-03b0-4d94-8a8c-bcd6e8599452"
    }
  ]
}  
</code></pre>
<p>Every API that retrieves information, whether associated with a specific resource, or with a list of resources,  may return audit logs.</p>

<p>Audit and history information associated with a given resource is always stored atomically to ensure that if the state is changed, such audit and history information exists and is accurate.</p>
<h2 id='using-kill-bill-apis-versioning'>Versioning</h2><h3 id='using-kill-bill-apis-kill-bill-server'>Kill Bill Server</h3>
<p>Kill Bill software is composed of many different repositories, all of them hosted on our <a href="https://github.com/killbill">github account</a>.</p>

<p>The Kill Bill server version, or simply Kill Bill version, is the one from the <a href="https://github.com/killbill/killbill">killbill</a> repository, and more specifically since we are using <code>maven</code> to build, this is indicated in the corresponding <code>pom.xml</code>. This repository depends on a few others, each having their own versions:</p>

<ul>
<li><code>killbill-api</code>: APIs used by plugins to communicate with Kill Bill core</li>
<li><code>killbill-plugin-api</code>: APIs used by Kill Bill core to communicate with plugins</li>
<li><code>killbill-commons</code>: Common code across modules</li>
<li><code>killbill-platform</code>: Platform related code such as OSGI framework, webapp pieces</li>
<li><code>killbill-client</code>: Java client, only used for integration tests inside killbill repository.</li>
</ul>

<p>The version for all these dependencies is managed in the parent <a href="https://github.com/killbill/killbill-oss-parent/blob/master/pom.xml">pom.xml</a>. So in particular, for a given Kill Bill version, you can look up the version of the parent <code>pom.xml</code> and from there access all the dependencies.</p>

<p>The current <strong>stable</strong> and <strong>production</strong> ready version of Kill Bill is <code>0.24.y</code>. You should use the latest released (<code>y</code>) version as it may contain critical bug fixes.</p>

<ul>
<li>Any bug fixes will result in a new version identified by incrementing the <code>patch</code> number (<code>y</code>). We guarantee compatibility of these versions with those immediately preceding them. Each version will be accompanied by release notes on github - e.g <a href="https://github.com/killbill/killbill/releases/tag/killbill-0.22.8">0.22.8 release notes</a>.</li>
<li>New development may happen in parallel. This may lead to the release of development versions. Such versions are not yet deemed stable, and will not be supported on the public mailing list.</li>
</ul>

<p>The choice of releasing <code>0.x.y</code> and not <code>1.x.y</code> is motivated by our desire to add additional features in upcoming releases, and is in no way a statement about code instability.</p>
<h3 id='using-kill-bill-apis-client-libraries'>Client Libraries</h3>
<p>Our client libraries contain a <code>README</code> section to describe their compatibility with the Kill Bill server. For instance, such compatibility mapping can be seen in our java client <a href="https://github.com/killbill/killbill-client-java/blob/master/README.md#kill-bill-compatibility">here</a>.</p>
<h3 id='using-kill-bill-apis-plugins'>Plugins</h3>
<p>Each plugin also has its own version, and we also keep a <code>README</code> with the mapping section. For example, such a section for the adyen payment plugin can be found <a href="https://github.com/killbill/killbill-adyen-plugin/blob/master/README.md#kill-bill-compatibility">here</a>.</p>

<p>We also keep a global repository for all plugins <a href="https://github.com/killbill/killbill-cloud/blob/master/kpm/lib/kpm/plugins_directory.yml">here</a>. The simple file-based approach is an internal implementation. This brings us to our next topic, <code>KPM</code>.</p>
<h3 id='using-kill-bill-apis-kpm'>KPM</h3>
<p><code>KPM</code>, The Kill Bill Package Manager, provides among <a href="https://github.com/killbill/killbill-cloud/tree/master/kpm">other things</a> the ability to retrieve version mapping for dependencies and plugins -- see the example on the right side.</p>
<pre class="highlight plaintext"><code>
# Look up version dependencies matching Kill Bill release 0.22.8:
&gt; kpm info  --version=0.22.8

Fetching info for version 0.22.8...
Dependencies for version 0.22.8
  killbill 0.22.8
  killbill-oss-parent 0.143.60
  killbill-api 0.53.17
  killbill-plugin-api 0.26.4
  killbill-commons 0.23.11
  killbill-platform 0.39.15

Known plugins for KB version 0.22.8
  analytics 7.0.8
  avatax 0.7.0
  email-notifications 0.6.1
  payment-test 7.0.4
  stripe 7.0.4
  ...

</code></pre><h2 id='using-kill-bill-apis-errors'>Errors</h2>
<p>Kill Bill relies on HTTP response codes to indicate the success or failure of an API request:</p>

<ul>
<li><strong><code>2xx</code></strong> status indicates success</li>
<li><strong><code>4xx</code></strong> status often indicates a client side error -- e.g missing madatory API field</li>
<li><strong><code>5xx</code></strong> status indicates an error with Kill Bill&#39;s servers or third party system -- e.g payment gateway returns 5xx.</li>
</ul>
<pre class="highlight plaintext"><code>HTTP status code summary:
200 - OK: A response body may be returned.
201 - Created: Success in creating a new resource. A Location header is returned to indicate the uri that can be used to fetch the resource
202 - Accepted: The request has been accepted and will be processed asynchronously.
204 - No Content: The request was processed sucesfully but no response body is returned.
400 - Bad Request: Invalid/missing parameter from client.
401 - Unauthorized: Authorization failed.
402 - Request Failed: Request parameter were valid but request failed -- insufficient fund on a payment request.
404 - Not Found: The requested resource does not exist.
409 - Conflict: The request conflicts with another request.
422 - Unprocessable Entity: Payment control plugin aborted the call.
500 - Unexpected system error.
502 - Bad Gateway : Unknow failure from payment plugin (PLUGIN_FAILURE).
503 - Service Unavailable: Kill Bill or a third party system -- e.g payment gateway -- is unavailable.
504 - Gateway Timeout: Payment gateway timed out.
</code></pre>
<p>In addition to these error codes, the system will often return some json to provide more details about the error:</p>

<ul>
<li><strong><code>code</code></strong> : Each error in Kill Bill is associated with a an <a href="https://github.com/killbill/killbill-api/blob/master/src/main/java/org/killbill/billing/ErrorCode.java#L21">ErrorCode</a>.</li>
<li><strong><code>formattedMsg</code></strong> : A description of the error for the specific resource(s).</li>
<li><strong><code>cause</code></strong> : An optional stack trace.</li>
</ul>
<h2 id='using-kill-bill-apis-additional-resources'>Additional Resources</h2>
<p>Our main documentation is found <a href="http://docs.killbill.io">here</a>.</p>
<h1 id='tenant'>Tenant</h1><h2 id='tenant-tenant-resource'>Tenant Resource</h2>
<p>Kill Bill has been designed from the ground up as a multi-tenant system, that is, one where multiple unrelated deployments can be hosted on the same physical system. Each deployment has its own separate configuration, catalog, and plugins, and of course its data set is kept entirely separate from the others. RBAC control allows different users/admin/apps to access zero, one or multiple tenants. This <a href="https://killbill.io/blog/subscription-service-using-kill-bill/">blog</a> illustrates some interesting use cases. The <code>Tenant</code> resource allows the management of such tenants.</p>

<p>The attributes of the <code>Tenant</code> resource object are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tenantId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this tenant</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>system or user</td>
<td>Optional external key provided by the client</td>
</tr>
<tr>
<td><strong>apiKey</strong></td>
<td>string</td>
<td>user</td>
<td>The API key associated with the tenant</td>
</tr>
<tr>
<td><strong>apiSecret</strong></td>
<td>string</td>
<td>user</td>
<td>The API secret associated with the tenant. This value is hashed and cannot be retrieved.</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>Array of audit log records for this tenant</td>
</tr>
</tbody></table>

<p>Note that the tenant itself has very few attributes, as most attributes belong to the individual accounts and related resources.</p>
<h2 id='tenant-tenant'>Tenant</h2>
<p>These endpoints manage information that is maintained at the tenant level. Unless otherwise stated, the tenant is identified by its API key in the header.</p>
<h3 id='tenant-create-a-tenant'>Create a tenant</h3>
<p>This API creates a new tenant.</p>

<p><strong>Note:</strong> If you create a tenant using this API, it will <em>not</em> be recognized immediately by KAUI because KAUI will be unable to retrieve the <code>apiSecret</code>. To fix this, you should &quot;create&quot; the same tenant separately after logging into KAUI. This will <em>not</em> create another tenant, but it will synchronize KAUI with the one already created.</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "apiKey": "bob", "apiSecret": "lazar"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">tenantId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"bob"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">apiSecret</span> <span class="o">=</span> <span class="s">"lazar"</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">Tenant</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Tenant</span><span class="o">(</span><span class="n">tenantId</span><span class="o">,</span>
                         <span class="n">externalKey</span><span class="o">,</span>
                         <span class="n">apiKey</span><span class="o">,</span>
                         <span class="n">apiSecret</span><span class="o">,</span>
                         <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">);</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">createTenant</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tenant</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">new</span>
<span class="n">tenant</span><span class="p">.</span><span class="nf">external_key</span> <span class="o">=</span> <span class="s2">"demo_external_key"</span>
<span class="n">tenant</span><span class="p">.</span><span class="nf">api_key</span> <span class="o">=</span> <span class="s2">"demo_api_key"</span>
<span class="n">tenant</span><span class="p">.</span><span class="nf">api_secret</span> <span class="o">=</span> <span class="s2">"demo_api_secret"</span>

<span class="n">use_global_default</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">tenant</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">use_global_default</span><span class="p">,</span>
              <span class="n">user</span><span class="p">,</span>
              <span class="n">reason</span><span class="p">,</span>
              <span class="n">comment</span><span class="p">,</span>
              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">Tenant</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s">'demo_api_key'</span><span class="p">,</span> <span class="n">api_secret</span><span class="o">=</span><span class="s">'demo_api_secret'</span><span class="p">)</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">create_tenant</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">tenant</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">Tenant</span> <span class="o">=</span> <span class="p">{</span><span class="na">apiKey</span><span class="p">:</span> <span class="s2">`api_key`</span><span class="p">,</span> <span class="na">apiSecret</span><span class="p">:</span> <span class="s2">`api_secret`</span><span class="p">};</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">createTenant</span><span class="p">(</span><span class="nx">tenant</span><span class="p">,</span> <span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">);</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$tenant = new Tenant();
$tenant-&gt;setApiKey('demo_api_key');
$tenant-&gt;setApiSecret('demo_api_secret');

$useGlobalDefault = false;

$result = $apiInstance-&gt;createTenant($tenant, $xKillbillCreatedBy, $xKillbillReason, $xKillbillComment, $useGlobalDefault);
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing a Tenant resource. The only parameters required are <code>apiKey</code> and <code>apiSecret</code>. The <code>externalKey</code> is optional and will be set to null if not supplied. The <code>tenantId</code> is generated by the system.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>useGlobalDefault</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, configure the tenant with a default catalog</td>
</tr>
</tbody></table>

<p>Setting the <code>useGlobalDefault</code> parameter to <code>true</code> can be used for test purposes. This will configure the tenant with a default catalog, and therefore make it easy to quickly start playing with the apis. Note that in order to then upload a new custom catalog, one would need to <a href="#admin-invalidates-caches-per-tenant-level">invalidate the caches for this tenant</a>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition a <code>Location</code> parameter is returned in the header. This parameter gives the URL for the tenant, including the <code>tenantId</code>.</p>
<h3 id='tenant-retrieve-a-tenant-by-id'>Retrieve a tenant by id</h3>
<p>Retrieves a tenant resource, given its ID.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/{tenantId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/6907712e-e940-4033-8695-36894db128d3"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">tenantId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"6907712e-e940-4033-8695-36894db128d3"</span><span class="o">);</span>
<span class="n">tenantApi</span><span class="o">.</span><span class="na">getTenant</span><span class="o">(</span><span class="n">tenantId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tenant_id</span> <span class="o">=</span> <span class="s2">"ab5981c2-de14-43d6-a35b-a2ed0b28c746"</span>

<span class="n">tenant</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">tenant_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>
<span class="n">tenant</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="n">get_tenant</span><span class="p">(</span><span class="n">tenant_id</span><span class="o">=</span><span class="s">'1a723c1a-9287-459f-9e40-eca9f0fd213e'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">id</span><span class="o">=</span><span class="s1">'9ab7db57-02a9-430c-bdfa-0a8c24d2e368'</span>

<span class="kr">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Tenant</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getTenant</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$tenantid='9ab7db57-02a9-430c-bdfa-0a8c24d2e368';

$tenantdata = $apiInstance-&gt;getTenant($tenantid);
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"tenantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6907712e-e940-4033-8695-36894db128d3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1532546166-326384"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"apiKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"apiSecret"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>none</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant resource object.  The <code>apiSecret</code> attribute is returned as <code>null</code>, since it cannot be retrieved.</p>
<h3 id='tenant-retrieve-a-tenant-by-its-api-key'>Retrieve a tenant by its API key</h3>
<p>Retrieves a tenant resource, given its <code>apiKey</code>. The <code>apiKey</code> is passed as a query parameter.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants?apiKey=bob"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">apiKey</span> <span class="o">=</span> <span class="s">"bob"</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">getTenantByApiKey</span><span class="o">(</span><span class="n">apiKey</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">api_key</span> <span class="o">=</span> <span class="s2">"demo_api_key"</span>

<span class="n">tenant</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">find_by_api_key</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>
<span class="n">tenant</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="n">get_tenant_by_api_key</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s">'bob'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">apiKey</span> <span class="o">=</span> <span class="s1">'bob'</span>

<span class="kr">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">Tenant</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getTenantByApiKey</span><span class="p">(</span><span class="nx">apiKey</span><span class="p">);</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$apikey='bob';

$tenantdata = $apiInstance-&gt;getTenantByApiKey($apikey);
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"tenantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6907712e-e940-4033-8695-36894db128d3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1532546166-326384"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"apiKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bob"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"apiSecret"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>apiKey</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>api key</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant resource object.  The <code>apiSecret</code> attribute is returned as <code>null</code>, since it cannot be retrieved.</p>
<h2 id='tenant-tenant-key-value-pairs'>Tenant Key-Value Pairs</h2>
<p>These endpoints provide a mechanism to register and manage <code>{key, value}</code> pairs for a given tenant. This functionality
is used internally by the system to keep track of all the per-tenant configuration, including system properties, plugin configuration, and others discussed below. In addition, you can add <em>user</em> keys to keep track of additional information that may be desired. For example, some global setting that would be accessible for all plugins could be stored here.</p>
<h3 id='tenant-add-a-per-tenant-user-key-value'>Add a per tenant user key/value</h3>
<p>This API adds a key-value pair to the tenant database. If the key already exists, the new value is appended to the existing value. The key is given as a path parameter.</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/{keyName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s2">"demo_value"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/demo_key"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">keyName</span> <span class="o">=</span> <span class="s">"demo_key"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"demo_value"</span><span class="o">;</span>
<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">insertUserKeyValue</span><span class="o">(</span><span class="n">keyName</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">key_name</span> <span class="o">=</span> <span class="s2">"demo_key"</span>
<span class="n">key_value</span> <span class="o">=</span> <span class="s2">"demo_value"</span>

<span class="n">tenant_key_value</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">upload_tenant_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span>
                                                           <span class="n">key_value</span><span class="p">,</span>
                                                           <span class="n">user</span><span class="p">,</span>
                                                           <span class="n">reason</span><span class="p">,</span>
                                                           <span class="n">comment</span><span class="p">,</span>
                                                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">key_name</span> <span class="o">=</span> <span class="s">'demo_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'demo_value'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">insert_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="s1">'demo_key'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">value</span> <span class="o">=</span> <span class="s1">'demo_value'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">insertUserKeyValue</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$keyName = "demo_key";
$body = "demo_value";

$result = $apiInstance-&gt;insertUserKeyValue($body, $xKillbillCreatedBy, $keyName, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Request Body</strong></p>

<p>The body contains a single string representing the value.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> item is returned in the header giving the URL for this key-value pair.</p>
<h3 id='tenant-retrieve-a-per-tenant-user-key-value'>Retrieve a per tenant user key value</h3>
<p>Retrieves the value for a specified key, if it exists, from the tenant database. The key name is given as a path parameter.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/{keyName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/demo_key"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">keyName</span> <span class="o">=</span> <span class="s">"demo_key"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getUserKeyValue</span><span class="o">(</span><span class="n">keyName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">key_name</span> <span class="o">=</span> <span class="s2">"demo_key"</span>

<span class="n">tenant_key_value</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">get_tenant_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">key_name</span> <span class="o">=</span> <span class="s">'demo_key'</span>

<span class="n">tenantKeyValue</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="n">get_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="s1">'demo_key'</span>

<span class="kr">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantKeyValue</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getUserKeyValue</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$keyName = "demo_key";

$result = $apiInstance-&gt;getUserKeyValue($keyName);
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo_value"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"demo_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"demo_value"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object. The key value object includes the key name and a JSON array containing the value, if any, or a comma-separated list of values. For example:</p>

<p>{
&quot;key&quot;: &quot;MYKEY&quot;,
&quot;values&quot;: [
&quot;value1&quot;,
&quot;value2&quot;
]
}</p>

<p>If the key does not exist no error is signalled but the <code>values</code> list is empty.</p>
<h3 id='tenant-delete-a-per-tenant-user-key-value'>Delete a per tenant user key/value</h3>
<p>Deletes a key and its value, if it exists, from the tenant database. The key is given as a path parameter.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/{keyName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/userKeyValue/demo_key"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">keyName</span> <span class="o">=</span> <span class="s">"demo_key"</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deleteUserKeyValue</span><span class="o">(</span><span class="n">keyName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">key_name</span> <span class="o">=</span> <span class="s2">"demo_key"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">delete_tenant_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span>
                                                           <span class="n">user</span><span class="p">,</span>
                                                           <span class="n">reason</span><span class="p">,</span>
                                                           <span class="n">comment</span><span class="p">,</span>
                                                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">key_name</span> <span class="o">=</span> <span class="s">'demo_key'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_user_key_value</span><span class="p">(</span><span class="n">key_name</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">key</span> <span class="o">=</span> <span class="s1">'demo_key'</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">deleteUserKeyValue</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$keyName = "demo_key"; 

$apiInstance-&gt;deleteUserKeyValue($keyName, $xKillbillCreatedBy, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. No error is signalled if the key does not exist.</p>
<h3 id='tenant-retrieve-per-tenant-keys-and-values-based-on-a-key-prefix'>Retrieve per tenant keys and values based on a key prefix</h3>
<p>This API enables searching for existing keys based on a prefix of the key name. For example, a search string of &quot;MYK&quot; would match keys such as <code>MYKEY1</code>, <code>MYKEY2</code>, etc. The search string is given as a path parameter.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig/{keyPrefix}/search</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig/PER_TENANT/search"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">keyPrefix</span> <span class="o">=</span> <span class="s">"PER_TENANT"</span><span class="o">;</span>

<span class="n">TenantKeyValues</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getAllPluginConfiguration</span><span class="o">(</span><span class="n">keyPrefix</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">key_prefix</span> <span class="o">=</span> <span class="s2">"PER_TENANT"</span>

<span class="n">tenant_key_values</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">search_tenant_config</span><span class="p">(</span><span class="n">key_prefix</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantKeyValues</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="n">get_all_plugin_configuration</span><span class="p">(</span><span class="n">key_prefix</span><span class="o">=</span><span class="s">'PER_TENANT'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">keyPrefix</span> <span class="o">=</span> <span class="s1">'PER_TENANT'</span>

<span class="kr">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantKeyValue</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getAllPluginConfiguration</span><span class="p">(</span><span class="nx">keyPrefix</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$keyPrefix = "PER_TENANT";

$result = $apiInstance-&gt;getAllPluginConfiguration($keyPrefix);
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PER_TENANT_CONFIG"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object containing the key and values for any keys that match the search string.</p>
<h2 id='tenant-push-notifications'>Push Notifications</h2>
<p>Push notifications are a convenient way to get notified about events from the system.
One can register a callback, i.e, a valid URL that will be called whenever there is an event dispatched for this tenant.
Note that this can result in a large number of calls; every time there is a state change for one of the <code>Accounts</code>
in this tenant, the callback will be invoked.</p>

<p>In case of error, the system will retry the callback as defined by the system property <code>org.killbill.billing.server.notifications.retries</code>.</p>

<p>See push notification documentation <a href="https://docs.killbill.io/latest/push_notifications.html">here</a> for further information.</p>
<h3 id='tenant-register-a-push-notification'>Register a push notification</h3>
<p>Register a callback URL for this tenant for push notifications. Inserts a key-value pair corresponding to the tenant where key name is <code>PUSH_NOTIFICATION_CB</code> and value is the URL of the push notification handler. The API sets the value of this key, replacing any previous value. </p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback?cb=http://demo/callmeback'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">cb</span> <span class="o">=</span> <span class="s">"http://demo/callmeback"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">registerPushNotificationCallback</span><span class="o">(</span><span class="n">cb</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">register_push_notification_callback</span><span class="p">(</span><span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="s">'http://demo/callmeback'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">TODO</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$cb = "http://demo/callmeback";

$result = $apiInstance-&gt;registerPushNotificationCallback($xKillbillCreatedBy, $cb, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>cb</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>callback URL to register</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> item is returned in the header giving the URL for this callback.</p>
<h3 id='tenant-retrieve-a-registered-push-notification'>Retrieve a registered push notification</h3>
<p>Gets the push notification registered for this tenant, if any.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/tenants/registerNotificationCallback"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getPushNotificationCallbacks</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">get_push_notification_callbacks</span><span class="p">()</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantKeyValue</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getPushNotificationCallbacks</span><span class="p">()</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$result = $apiInstance-&gt;getPushNotificationCallbacks();
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUSH_NOTIFICATION_CB"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"http://demo/callmeback"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object for the key PUSH_NOTIFICATION_CB.</p>
<h3 id='tenant-delete-a-registered-push-notification'>Delete a registered push notification</h3>
<p>Deletes the registered callback URL, if any.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/registerNotificationCallback"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deletePushNotificationCallbacks</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_push_notification_callbacks</span><span class="p">(</span><span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">deletePushNotificationCallbacks</span><span class="p">(</span><span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$apiInstance-&gt;deletePushNotificationCallbacks($xKillbillCreatedBy, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='tenant-system-properties-configuration'>System Properties Configuration</h2>
<p>These endpoints allow setting of some system properties on a per-tenant basis. Please refer to our <a href="https://docs.killbill.io/latest/userguide_configuration.html">configuartion guide</a> to see what can be configured in the system.
Some of the configuration can be overriden at the tenant level to allow for different behaviors.</p>

<p>Note that this is actually a special case of per-tenant key-value pairs; the key is &quot;PER_TENANT_CONFIG&quot; and the value is a comma-separated list of system properties with their values.</p>
<h3 id='tenant-add-a-per-tenant-system-properties-configuration'>Add a per tenant system properties configuration</h3>
<p>This API is used to set the value of specific system properties, overriding the system-wide values.</p>

<p>For example, in order to disable the invoice safety bound mechanism on a per-tenant level, this API could be used to set the per-tenant system property <code>org.killbill.invoice.sanitySafetyBoundEnabled</code> to false.</p>

<p>The API inserts a key-value pair corresponding to the tenant where key name is <code>PER_TENANT_CONFIG</code> and value is the system property to be set. It replaces any previous value.</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{"org.killbill.invoice.sanitySafetyBoundEnabled":"false"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{'org.killbill.invoice.sanitySafetyBoundEnabled':'false'}"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">uploadPerTenantConfiguration</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'{"org.killbill.invoice.sanitySafetyBoundEnabled":"false"}'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">upload_per_tenant_configuration</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="s1">'{"org.killbill.invoice.sanitySafetyBoundEnabled":"false"}'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">uploadPerTenantConfiguration</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$body = "{'org.killbill.invoice.sanitySafetyBoundEnabled':'false'}";

$result = $apiInstance-&gt;uploadPerTenantConfiguration($body, $xKillbillCreatedBy, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing the per-tenant system property and its value.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='tenant-retrieve-a-per-tenant-system-properties-configuration'>Retrieve a per tenant system properties configuration</h3>
<p>Retrieves the per-tenant system property settings, which are given as the value of the key <code>PER_TENANT_CONFIG</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getPerTenantConfiguration</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantKeyValue</span> <span class="o">=</span>  <span class="n">tenantApi</span><span class="o">.</span><span class="n">get_per_tenant_configuration</span><span class="p">()</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantKeyValue</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getPerTenantConfiguration</span><span class="p">()</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$result = $apiInstance-&gt;getPerTenantConfiguration();
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PER_TENANT_CONFIG"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"{org.killbill.invoice.sanitySafetyBoundEnabled:false}"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object for the key <code>PER_TENANT_CONFIG</code>.</p>
<h3 id='tenant-delete-a-per-tenant-system-properties-configuration'>Delete a per tenant system properties configuration</h3>
<p>Deletes any current per tenant system properties configuration parameters, which are given as the values of the <code>PER_TENANT_CONFIG</code> key.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPerTenantConfig"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deletePerTenantConfiguration</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_per_tenant_configuration</span><span class="p">(</span><span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">deletePerTenantConfiguration</span><span class="p">(</span><span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$apiInstance-&gt;deletePerTenantConfiguration($xKillbillCreatedBy, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='tenant-plugin-configuration'>Plugin Configuration</h2>
<p>Plugins also support configuration on a per-tenant level. Please refer to our <a href="https://docs.killbill.io/latest/plugin_installation.html#per-tenant-configuration">plugin configuration manual</a> for more details.</p>

<p>An example of the use of such per-tenant properties is to configure a payment plugin with different API keys,
one set of keys for each tenant. This allows for a true multi-tenant deployment where plugins have different configuration
based on the tenant in which they operate.</p>

<p>Upon adding or deleting a new per-tenant plugin configuration, the system will generate a <code>TENANT_CONFIG_CHANGE</code>/<code>TENANT_CONFIG_DELETION</code> event, which can be handled in the plugin to refresh its configuration. In multi-node scenarios, events will be dispatched on each node, that is, on each plugin instance so they end up with a consistent view. A lot of the logic to handle configuration update has been implemented in our  <a href="https://github.com/killbill/killbill-plugin-framework-java">plugin framework</a>).</p>

<p>As with the system properties configuration, this is actually a special case of per-tenant key-value pairs. The following endpoints provide the ability to configure plugins on a per-tenant level.</p>
<h3 id='tenant-add-a-per-tenant-configuration-for-a-plugin'>Add a per tenant configuration for a plugin</h3>
<p>Adds a per tenant key-value pair for the specified plugin. The plugin name is given as a path parameter. The API internally inserts a key-value pair corresponding to the tenant with key name=<code>PLUGIN_CONFIG_*plugin*</code> where <em>plugin</em> is the plugin name. It replaces any previous value.</p>

<p>The value string uploaded is plugin dependent but typically consists of key/value properties,
or well formatted yml or a properties file.</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d @./config.properties <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/demo_plugin"</span>

OR 

curl -v <span class="se">\</span>
     -X POST <span class="se">\</span>
     -u admin:password <span class="se">\</span>
     -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
     -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
     -H <span class="s1">'X-Killbill-CreatedBy: admin'</span> <span class="se">\</span>
     -H <span class="s1">'Content-Type: text/plain'</span> <span class="se">\</span>
     -d <span class="s1">'org.killbill.billing.plugin.avatax.url=XXX
org.killbill.billing.plugin.avatax.accountId=YYY
org.killbill.billing.plugin.avatax.licenseKey=ZZZ'</span> <span class="se">\</span>
     http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/killbill-avatax
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"PLUGIN_FOO"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">pluginConfig</span> <span class="o">=</span> <span class="s">"plugin configuration string"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">uploadPluginConfiguration</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">pluginConfig</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">plugin_name</span> <span class="o">=</span> <span class="s2">"demo_plugin"</span>
<span class="n">plugin_config</span> <span class="o">=</span> <span class="s2">"tenant_config"</span>
<span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">tenant_key_value</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">upload_tenant_plugin_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span>
                                                          <span class="n">plugin_config</span><span class="p">,</span>
                                                          <span class="n">user</span><span class="p">,</span>
                                                          <span class="n">reason</span><span class="p">,</span>
                                                          <span class="n">comment</span><span class="p">,</span>
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'tenant_config'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">upload_plugin_configuration</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">plugin_name</span> <span class="o">=</span> <span class="s1">'demo_plugin'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="s1">'tenant_config'</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">uploadPluginConfiguration</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="nx">plugin_name</span><span class="p">,</span> <span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$pluginName = "demo_plugin";
$body = "tenant_config";

$result = $apiInstance-&gt;uploadPluginConfiguration($body, $xKillbillCreatedBy, $pluginName, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body can be specified as a JSON string consisting of the key-value pairs for the plugin configuration. Alternatively, the plugin configuration can be specified in a yml or properties file and its path can be specified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A <code>Location</code> header is also returned giving the URL of the key-value pair.</p>
<h3 id='tenant-retrieve-a-per-tenant-configuration-for-a-plugin'>Retrieve a per tenant configuration for a plugin</h3>
<p>Gets the per tenant configuration value string for a specified plugin. The plugin name is given as a path parameter.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"PLUGIN_FOO"</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getPluginConfiguration</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">plugin_name</span> <span class="o">=</span> <span class="s2">"demo_plugin"</span>

<span class="n">tenant_key_value</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">get_tenant_plugin_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>

<span class="n">tenantKeyValue</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="n">get_plugin_configuration</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">plugin_name</span> <span class="o">=</span> <span class="s1">'demo_plugin'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantKeyValue</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getPluginConfiguration</span><span class="p">(</span><span class="nx">plugin_name</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$pluginName = "demo_plugin";

$result = $apiInstance-&gt;getPluginConfiguration($pluginName);
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PLUGIN_CONFIG_demo_plugin"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"tenant_config"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a tenant key value object for the key <code>PLUGIN_CONFIG_*plugin*</code>.</p>
<h3 id='tenant-delete-a-per-tenant-configuration-for-a-plugin'>Delete a per tenant configuration for a plugin</h3>
<p>Deletes the per tenant plugin configuration value for the appropriate key. The plugin name is given as a path parameter.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"PLUGIN_FOO"</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deletePluginConfiguration</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s2">"demo_plugin"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Tenant</span><span class="p">.</span><span class="nf">delete_tenant_plugin_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span>
                                                          <span class="n">user</span><span class="p">,</span>
                                                          <span class="n">reason</span><span class="p">,</span>
                                                          <span class="n">comment</span><span class="p">,</span>
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_plugin_configuration</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">plugin_name</span> <span class="o">=</span> <span class="s1">'demo_plugin'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">deletePluginConfiguration</span><span class="p">(</span><span class="nx">plugin_name</span><span class="p">,</span> <span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$pluginName = "demo_plugin";

$apiInstance-&gt;deletePluginConfiguration($pluginName, $xKillbillCreatedBy, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='tenant-payment-state-machines'>Payment State Machines</h2>
<p>This is a somewhat advanced use case to override the default internal payment state machine within Kill Bill. Please refer to our <a href="https://docs.killbill.io/latest/userguide_payment.html#_payment_states">payment manual</a> for more details about payment states.</p>

<p>The endpoints below allow you to override such state machines on a per-tenant level.</p>
<h3 id='tenant-add-a-per-tenant-payment-state-machine-for-a-plugin'>Add a per tenant payment state machine for a plugin</h3>
<p>Adds a per tenant key-value pair for the specified plugin. The plugin name is given as a path parameter. The key name is <code>PLUGIN_PAYMENT_STATE_MACHINE_*plugin*</code> where <em>plugin</em> is the payment plugin name. The API sets the value of this key, replacing any previous value.</p>

<p>The state machine is defined in an XML file. The complete XML file becomes the value of the key.</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/{pluginName}</code></p>

<p><strong>Request Body</strong></p>

<p>The request body can be specified as an XML string. Alternatively, the path of the XML file can be specified.</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'@SimplePaymentStates.xml'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"demo_plugin"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">stateMachineConfig</span> <span class="o">=</span> <span class="s">"&lt;xml&gt;..&lt;/xml&gt;"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">uploadPluginPaymentStateMachineConfig</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span>
                                                                        <span class="n">stateMachineConfig</span><span class="o">,</span>
                                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'&lt;xml&gt;..&lt;/xml&gt;'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">upload_plugin_payment_state_machine_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">plugin_name</span> <span class="o">=</span> <span class="s1">'demo_plugin'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="s1">'&lt;xml&gt;..&lt;/xml&gt;'</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">uploadPluginPaymentStateMachineConfig</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="nx">plugin_name</span><span class="p">,</span> <span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$pluginName = "demo_plugin";
$body = "<span class="nt">&lt;xml&gt;</span>..<span class="nt">&lt;/xml&gt;</span>";

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$result = $apiInstance-&gt;uploadPluginPaymentStateMachineConfig($body, $xKillbillCreatedBy, $pluginName, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> item is returned in the header giving the URL for the payment state machine.</p>
<h3 id='tenant-retrieve-a-per-tenant-payment-state-machine-for-a-plugin'>Retrieve a per tenant payment state machine for a plugin</h3>
<p>Retrieves the complete XML file corresponding to the payment state machine for the specified plugin if it exists.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"demo_plugin"</span><span class="o">;</span>

<span class="n">TenantKeyValue</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="na">getPluginPaymentStateMachineConfig</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>

<span class="n">tenantKeyValue</span> <span class="o">=</span> <span class="n">tenantApi</span><span class="o">.</span><span class="n">get_plugin_payment_state_machine_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">plugin_name</span> <span class="o">=</span> <span class="s1">'demo_plugin'</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">response</span><span class="p">:</span> <span class="nx">AxiosResponse</span><span class="o">&lt;</span><span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantKeyValue</span><span class="p">,</span> <span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">api</span><span class="p">.</span><span class="nx">getPluginPaymentStateMachineConfig</span><span class="p">(</span><span class="nx">plugin_name</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$pluginName = "demo_plugin";

$result = $apiInstance-&gt;getPluginPaymentStateMachineConfig($pluginName);
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PLUGIN_PAYMENT_STATE_MACHINE_demo_plugin"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">&lt;?xml</span><span class="w"> </span><span class="err">version=</span><span class="s2">"1.0"</span><span class="w"> </span><span class="err">encoding=</span><span class="s2">"UTF-8"</span><span class="err">?&gt;</span><span class="w">

    </span><span class="err">&lt;stateMachineConfig</span><span class="w"> </span><span class="err">xmlns</span><span class="p">:</span><span class="err">xsi=</span><span class="s2">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="w">
                        </span><span class="err">xsi</span><span class="p">:</span><span class="err">noNamespaceSchemaLocation=</span><span class="s2">"StateMachineConfig.xsd"</span><span class="err">&gt;</span><span class="w">

        </span><span class="err">&lt;stateMachines&gt;</span><span class="w">
            </span><span class="err">&lt;stateMachine</span><span class="w"> </span><span class="err">name=</span><span class="s2">"BIG_BANG"</span><span class="err">&gt;</span><span class="w">
                </span><span class="err">&lt;states&gt;</span><span class="w">
                    </span><span class="err">&lt;state</span><span class="w"> </span><span class="err">name=</span><span class="s2">"BIG_BANG_INIT"</span><span class="err">/&gt;</span><span class="w">
                </span><span class="err">&lt;/states&gt;</span><span class="w">
                </span><span class="err">&lt;transitions&gt;</span><span class="w">
                    </span><span class="err">&lt;transition&gt;</span><span class="w">
                        </span><span class="err">&lt;initialState&gt;BIG_BANG_INIT&lt;/initialState&gt;</span><span class="w">
                        </span><span class="err">&lt;operation&gt;OP_DUMMY&lt;/operation&gt;</span><span class="w">
                        </span><span class="err">&lt;operationResult&gt;SUCCESS&lt;/operationResult&gt;</span><span class="w">
                        </span><span class="err">&lt;finalState&gt;BIG_BANG_INIT&lt;/finalState&gt;</span><span class="w">
                    </span><span class="err">&lt;/transition&gt;</span><span class="w">
                </span><span class="err">&lt;/transitions&gt;</span><span class="w">
                </span><span class="err">&lt;operations&gt;</span><span class="w">
                    </span><span class="err">&lt;operation</span><span class="w"> </span><span class="err">name=</span><span class="s2">"OP_DUMMY"</span><span class="err">/&gt;</span><span class="w">
                </span><span class="err">&lt;/operations&gt;</span><span class="w">
            </span><span class="err">&lt;/stateMachine&gt;</span><span class="w">
            </span><span class="err">&lt;stateMachine</span><span class="w"> </span><span class="err">name=</span><span class="s2">"AUTHORIZE"</span><span class="err">&gt;</span><span class="w">
                </span><span class="err">&lt;states&gt;</span><span class="w">
                    </span><span class="err">&lt;state</span><span class="w"> </span><span class="err">name=</span><span class="s2">"AUTH_INIT"</span><span class="err">/&gt;</span><span class="w">
                    </span><span class="err">&lt;state</span><span class="w"> </span><span class="err">name=</span><span class="s2">"AUTH_SUCCESS"</span><span class="err">/&gt;</span><span class="w">
                    </span><span class="err">&lt;state</span><span class="w"> </span><span class="err">name=</span><span class="s2">"AUTH_FAILED"</span><span class="err">/&gt;</span><span class="w">
                    </span><span class="err">&lt;state</span><span class="w"> </span><span class="err">name=</span><span class="s2">"AUTH_ERRORED"</span><span class="err">/&gt;</span><span class="w">
                </span><span class="err">&lt;/states&gt;</span><span class="w">
                </span><span class="err">&lt;transitions&gt;</span><span class="w">
                    </span><span class="err">&lt;transition&gt;</span><span class="w">
                        </span><span class="err">&lt;initialState&gt;AUTH_INIT&lt;/initialState&gt;</span><span class="w">
                        </span><span class="err">&lt;operation&gt;OP_AUTHORIZE&lt;/operation&gt;</span><span class="w">
                        </span><span class="err">&lt;operationResult&gt;SUCCESS&lt;/operationResult&gt;</span><span class="w">
                        </span><span class="err">&lt;finalState&gt;AUTH_SUCCESS&lt;/finalState&gt;</span><span class="w">
                    </span><span class="err">&lt;/transition&gt;</span><span class="w">
                    </span><span class="err">&lt;transition&gt;</span><span class="w">
                        </span><span class="err">&lt;initialState&gt;AUTH_INIT&lt;/initialState&gt;</span><span class="w">
                        </span><span class="err">&lt;operation&gt;OP_AUTHORIZE&lt;/operation&gt;</span><span class="w">
                        </span><span class="err">&lt;operationResult&gt;FAILURE&lt;/operationResult&gt;</span><span class="w">
                        </span><span class="err">&lt;finalState&gt;AUTH_FAILED&lt;/finalState&gt;</span><span class="w">
                    </span><span class="err">&lt;/transition&gt;</span><span class="w">
                    </span><span class="err">&lt;transition&gt;</span><span class="w">
                        </span><span class="err">&lt;initialState&gt;AUTH_INIT&lt;/initialState&gt;</span><span class="w">
                        </span><span class="err">&lt;operation&gt;OP_AUTHORIZE&lt;/operation&gt;</span><span class="w">
                        </span><span class="err">&lt;operationResult&gt;EXCEPTION&lt;/operationResult&gt;</span><span class="w">
                        </span><span class="err">&lt;finalState&gt;AUTH_ERRORED&lt;/finalState&gt;</span><span class="w">
                    </span><span class="err">&lt;/transition&gt;</span><span class="w">
                </span><span class="err">&lt;/transitions&gt;</span><span class="w">
                </span><span class="err">&lt;operations&gt;</span><span class="w">
                    </span><span class="err">&lt;operation</span><span class="w"> </span><span class="err">name=</span><span class="s2">"OP_AUTHORIZE"</span><span class="err">/&gt;</span><span class="w">
                </span><span class="err">&lt;/operations&gt;</span><span class="w">
            </span><span class="err">&lt;/stateMachine&gt;</span><span class="w">
        </span><span class="err">&lt;/stateMachines&gt;</span><span class="w">

        </span><span class="err">&lt;linkStateMachines&gt;</span><span class="w">
            </span><span class="err">&lt;linkStateMachine&gt;</span><span class="w">
                </span><span class="err">&lt;initialStateMachine&gt;BIG_BANG&lt;/initialStateMachine&gt;</span><span class="w">
                </span><span class="err">&lt;initialState&gt;BIG_BANG_INIT&lt;/initialState&gt;</span><span class="w">
                </span><span class="err">&lt;finalStateMachine&gt;AUTHORIZE&lt;/finalStateMachine&gt;</span><span class="w">
                </span><span class="err">&lt;finalState&gt;AUTH_INIT&lt;/finalState&gt;</span><span class="w">
            </span><span class="err">&lt;/linkStateMachine&gt;</span><span class="w">
        </span><span class="err">&lt;/linkStateMachines&gt;</span><span class="w">
    </span><span class="err">&lt;/stateMachineConfig&gt;</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a key value object for the key <code>PLUGIN_PAYMENT_STATE_MACHINE_*plugin*</code>. </p>
<h3 id='tenant-delete-a-per-tenant-payment-state-machine-for-a-plugin'>Delete a per tenant payment state machine for a plugin</h3>
<p>Deletes the payment state machine for the specified plugin for this tenant. The plugin reverts to the default payment state machine.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/{pluginName}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/tenants/uploadPluginPaymentStateMachineConfig/demo_plugin"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.TenantApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">TenantApi</span> <span class="n">tenantApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"demo_plugin"</span><span class="o">;</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="na">deletePluginPaymentStateMachineConfig</span><span class="o">(</span><span class="n">pluginName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">tenantApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">TenantApi</span><span class="p">()</span>

<span class="n">plugin_name</span> <span class="o">=</span> <span class="s">'demo_plugin'</span>

<span class="n">tenantApi</span><span class="o">.</span><span class="n">delete_plugin_payment_state_machine_config</span><span class="p">(</span><span class="n">plugin_name</span><span class="p">,</span> <span class="n">created_by</span><span class="o">=</span><span class="s">'demo'</span><span class="p">)</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">api</span><span class="p">:</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">killbill</span><span class="p">.</span><span class="nx">TenantApi</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>

<span class="kr">const</span> <span class="nx">plugin_name</span> <span class="o">=</span> <span class="s1">'demo_plugin'</span><span class="p">;</span>

<span class="nx">api</span><span class="p">.</span><span class="nx">deletePluginPaymentStateMachineConfig</span><span class="p">(</span><span class="nx">plugin_name</span><span class="p">,</span> <span class="s1">'created-by'</span><span class="p">,</span> <span class="s1">'reason'</span><span class="p">,</span> <span class="s1">'comment'</span><span class="p">)</span>
</code></pre><pre class="highlight php tab-php"><code>$apiInstance = $client-&gt;getTenantApi();

$pluginName = "demo_plugin";

$xKillbillCreatedBy = "user";
$xKillbillReason = "reason";
$xKillbillComment = "comment";

$apiInstance-&gt;deletePluginPaymentStateMachineConfig($pluginName, $xKillbillCreatedBy, $xKillbillReason, $xKillbillComment);
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h1 id='catalog'>Catalog</h1>
<p>The <code>Catalog</code> is at the heart of the Kill Bill subscription and billing systems. It provides complete current information on products available, subscription plans, billing options, and much more. Each tenant has a single catalog, but different tenants may have completely different catalogs.</p>

<p>The catalog for a given tenant may be updated to new versions from time to time. This provides the ability to deprecate old products, add new ones, or change prices for existing products. Older versions remain available in case they are needed. If a new version is uploaded, new subscriptions will use the new version, but existing subscriptions may either depend on their original versions (grandfathering use case) or use the latest version (price update use case). Please refer to the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog">catalog section of our subscription billing documentation</a> for additional details.</p>

<p>KAUI, our admin UI, provides the ability to upload a <em>simple plan</em>. The <em>simple plan</em> provides a way to ease testing and to play with the system. See <a href="https://killbill.github.io/slate/#catalog-simple-plan">API section Simple Plan</a>.</p>

<p>A tenant has several options for setting up their catalog. You can choose the option that best meets your needs:</p>

<ol>
<li>Use the default test catalog that ships with Kill Bill by <a href="https://killbill.github.io/slate/#tenant-create-a-tenant">creating a tenant</a> with <code>useGlobalDefault=true</code></li>
<li>Use the Simple Plan API from KAUI to get started quickly (no need to create an XML catalog, simply use the UI and add the plans you need).</li>
<li>Write your own complete catalog as an XML file and upload it. Some examples of catalog can be found in our <a href="https://github.com/killbill/killbill-docs/tree/v3/catalogs">test repo</a>. For validation, check our <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog-overview">manual</a> or use our <a href="https://cloud.killbill.io/">cloud validation tool</a> after creating an account.</li>
<li>Write a custom Catalog plugin. This is only for advanced users with special needs.</li>
</ol>

<p>For a full discussion of the KillBill catalog, see the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-catalog">Catalog</a> section in the <a href="https://docs.killbill.io/latest/userguide_subscription.html">Subscription Guide</a>.</p>

<p>The <code>Catalog</code> API offers basic CRUD operations, allowing you to upload, retrieve and delete catalog versions. </p>
<h2 id='catalog-catalog-resource'>Catalog Resource</h2>
<p>At a very high level, the Catalog consists of the following main components:</p>

<ul>
<li><strong><code>Products</code></strong> : List of products available - e.g <em>Gold</em> product.</li>
<li><strong><code>Plans</code></strong> : List of subscription plans available for each product - e.g <em>gold-monthly</em>, monthly subscription for the <em>Gold</em> product.</li>
<li><strong><code>Rules</code></strong> : Business rules for subscriptions - e.g. when certain changes should take effect.</li>
<li><strong><code>Price Lists</code></strong> : Lists of applicable Plans.</li>
</ul>

<p>Full details about the elements of a Catalog are given in the links cited above. The Catalog is maintained as an XML file.</p>
<h2 id='catalog-catalogvalidation-resource'>CatalogValidation Resource</h2>
<p>Represents the result of validating a catalog.</p>

<p>It includes the following attribute:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>catalogValidationErrors</strong></td>
<td>list</td>
<td>system</td>
<td>List of <strong>CatalogValidationError</strong> (see next)</td>
</tr>
</tbody></table>

<p><strong>CatalogValidationError</strong>:</p>

<p>Represents a catalog validation error. </p>

<p>It includes the following attributes:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>errorDescription</strong></td>
<td>string</td>
<td>system</td>
<td>Description about the error</td>
</tr>
</tbody></table>
<h2 id='catalog-catalog'>Catalog</h2><h3 id='catalog-upload-a-catalog-as-xml'>Upload a catalog as XML</h3>
<p>This endpoint uploads a complete catalog in XML format. This becomes the current version of the Catalog for this Tenant.</p>

<p>Note that the naming for the various entities is based on what the <a href="https://www.w3.org/TR/1999/REC-xml-names-19990114/#NT-NCName">XML spec specifies</a>, and in particular the <code>name</code> elements need to be globally unique in the catalog and must conform to the XML <code>NCName</code> definition. This means that they cannot contain symbol characters like :, @, $, %, &amp;, /, +, ,, ;,, whitespace characters or parentheses, and they cannot begin with a number, dot or minus character.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/catalog/xml</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;&lt;catalog&gt; ...'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/xml"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="n">getResourceBodyString</span><span class="o">(</span><span class="n">catalog</span><span class="o">);</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="na">uploadCatalogXml</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">catalog_file_xml</span> <span class="o">=</span> <span class="n">resource_file</span><span class="p">.</span><span class="nf">read</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">upload_tenant_catalog</span><span class="p">(</span><span class="n">catalog_file_xml</span><span class="p">,</span> 
                                                     <span class="n">user</span><span class="p">,</span>
                                                     <span class="n">reason</span><span class="p">,</span>
                                                     <span class="n">comment</span><span class="p">,</span>
                                                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>
<span class="n">xml_catalog</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">"../resources/SpyCarBasic.xml"</span><span class="p">,</span> <span class="s">"r+"</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">upload_catalog_xml</span><span class="p">(</span><span class="n">xml_catalog</span><span class="p">,</span> 
                              <span class="n">created_by</span><span class="p">,</span> 
                              <span class="n">api_key</span><span class="p">,</span> 
                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Contains the complete catalog in XML format</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='catalog-retrieve-the-catalog-as-xml'>Retrieve the catalog as XML</h3>
<p>This endpoint retrieves the Catalog for a specified date in XML format. If there are multiple versions, the latest version with an effective date not later than the requested date is returned. If the effective date for all versions is greater than the requested date, the earliest version is returned.</p>

<p>For example, suppose there are two versions of the catalog, the current version dated 2020-01-01 (Jan. 1, 2020) and a previous version dated 2019-01-01. Then</p>

<ul>
<li>A request with no effective date would retrieve the current version</li>
<li>A request with an effective date of 2020-01-01 or later would retrieve the current version</li>
<li>A request with an effective date of 2019-01-01 or later, but before 2020-01-01, would retrieve the previous version</li>
<li>A request with an effective date earlier than 2019-01-01 would retrieve the previous version, as it is the earliest version available.</li>
</ul>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/xml</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/xml"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/catalog/xml"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">String</span> <span class="n">catalog</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getCatalogXml</span><span class="o">(</span><span class="n">requestedDate</span><span class="o">,</span> 
                                          <span class="n">accountId</span><span class="o">,</span> 
                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_tenant_catalog_xml</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span>
                                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_catalog_xml</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight xml tab-xml"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span>
  <span class="nt">&lt;catalogs&gt;</span>
    <span class="nt">&lt;versions&gt;</span>
      <span class="nt">&lt;version&gt;</span>
        <span class="nt">&lt;effectiveDate&gt;</span>2013-02-08T00:00:00Z<span class="nt">&lt;/effectiveDate&gt;</span>
        <span class="nt">&lt;catalogName&gt;</span>SpyCarBasic<span class="nt">&lt;/catalogName&gt;</span>
        <span class="nt">&lt;currencies&gt;</span>
          <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
          <span class="nt">&lt;currency&gt;</span>GBP<span class="nt">&lt;/currency&gt;</span>
        <span class="nt">&lt;/currencies&gt;</span>
        <span class="nt">&lt;units/&gt;</span>
        <span class="nt">&lt;products&gt;</span>
          <span class="nt">&lt;product</span> <span class="na">name=</span><span class="s">"Basic"</span> <span class="na">prettyName=</span><span class="s">"Basic"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;category&gt;</span>BASE<span class="nt">&lt;/category&gt;</span>
            <span class="nt">&lt;included/&gt;</span>
            <span class="nt">&lt;available/&gt;</span>
            <span class="nt">&lt;limits/&gt;</span>
          <span class="nt">&lt;/product&gt;</span>
          <span class="nt">&lt;product</span> <span class="na">name=</span><span class="s">"Sports"</span> <span class="na">prettyName=</span><span class="s">"Sports"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;category&gt;</span>BASE<span class="nt">&lt;/category&gt;</span>
            <span class="nt">&lt;included/&gt;</span>
            <span class="nt">&lt;available/&gt;</span>
            <span class="nt">&lt;limits/&gt;</span>
          <span class="nt">&lt;/product&gt;</span>
          <span class="nt">&lt;product</span> <span class="na">name=</span><span class="s">"Standard"</span> <span class="na">prettyName=</span><span class="s">"Standard"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;category&gt;</span>BASE<span class="nt">&lt;/category&gt;</span>
            <span class="nt">&lt;included/&gt;</span>
            <span class="nt">&lt;available/&gt;</span>
            <span class="nt">&lt;limits/&gt;</span>
          <span class="nt">&lt;/product&gt;</span>
          <span class="nt">&lt;product</span> <span class="na">name=</span><span class="s">"Super"</span> <span class="na">prettyName=</span><span class="s">"Super"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;category&gt;</span>ADD_ON<span class="nt">&lt;/category&gt;</span>
            <span class="nt">&lt;included/&gt;</span>
            <span class="nt">&lt;available/&gt;</span>
            <span class="nt">&lt;limits/&gt;</span>
          <span class="nt">&lt;/product&gt;</span>
        <span class="nt">&lt;/products&gt;</span>
        <span class="nt">&lt;rules&gt;</span>
          <span class="nt">&lt;changePolicy&gt;</span>
            <span class="nt">&lt;changePolicyCase&gt;</span>
              <span class="nt">&lt;policy&gt;</span>IMMEDIATE<span class="nt">&lt;/policy&gt;</span>
            <span class="nt">&lt;/changePolicyCase&gt;</span>
          <span class="nt">&lt;/changePolicy&gt;</span>
          <span class="nt">&lt;changeAlignment&gt;</span>
            <span class="nt">&lt;changeAlignmentCase&gt;</span>
              <span class="nt">&lt;alignment&gt;</span>START_OF_BUNDLE<span class="nt">&lt;/alignment&gt;</span>
            <span class="nt">&lt;/changeAlignmentCase&gt;</span>
          <span class="nt">&lt;/changeAlignment&gt;</span>
          <span class="nt">&lt;cancelPolicy&gt;</span>
            <span class="nt">&lt;cancelPolicyCase&gt;</span>
              <span class="nt">&lt;policy&gt;</span>IMMEDIATE<span class="nt">&lt;/policy&gt;</span>
            <span class="nt">&lt;/cancelPolicyCase&gt;</span>
          <span class="nt">&lt;/cancelPolicy&gt;</span>
          <span class="nt">&lt;createAlignment&gt;</span>
            <span class="nt">&lt;createAlignmentCase&gt;</span>
              <span class="nt">&lt;alignment&gt;</span>START_OF_BUNDLE<span class="nt">&lt;/alignment&gt;</span>
            <span class="nt">&lt;/createAlignmentCase&gt;</span>
          <span class="nt">&lt;/createAlignment&gt;</span>
          <span class="nt">&lt;billingAlignment&gt;</span>
            <span class="nt">&lt;billingAlignmentCase&gt;</span>
              <span class="nt">&lt;alignment&gt;</span>ACCOUNT<span class="nt">&lt;/alignment&gt;</span>
            <span class="nt">&lt;/billingAlignmentCase&gt;</span>
          <span class="nt">&lt;/billingAlignment&gt;</span>
          <span class="nt">&lt;priceList&gt;</span>
            <span class="nt">&lt;priceListCase&gt;</span>
              <span class="nt">&lt;toPriceList&gt;</span>DEFAULT<span class="nt">&lt;/toPriceList&gt;</span>
            <span class="nt">&lt;/priceListCase&gt;</span>
          <span class="nt">&lt;/priceList&gt;</span>
        <span class="nt">&lt;/rules&gt;</span>
        <span class="nt">&lt;plans&gt;</span>
          <span class="nt">&lt;plan</span> <span class="na">name=</span><span class="s">"basic-annual"</span> <span class="na">prettyName=</span><span class="s">"basic-annual"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;product&gt;</span>Basic<span class="nt">&lt;/product&gt;</span>
            <span class="nt">&lt;recurringBillingMode&gt;</span>IN_ADVANCE<span class="nt">&lt;/recurringBillingMode&gt;</span>
            <span class="nt">&lt;initialPhases/&gt;</span>
            <span class="nt">&lt;finalPhase</span> <span class="na">type=</span><span class="s">"EVERGREEN"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;duration&gt;</span>
                <span class="nt">&lt;unit&gt;</span>UNLIMITED<span class="nt">&lt;/unit&gt;</span>
                <span class="nt">&lt;number&gt;</span>-1<span class="nt">&lt;/number&gt;</span>
              <span class="nt">&lt;/duration&gt;</span>
              <span class="nt">&lt;recurring&gt;</span>
                <span class="nt">&lt;billingPeriod&gt;</span>ANNUAL<span class="nt">&lt;/billingPeriod&gt;</span>
                <span class="nt">&lt;recurringPrice&gt;</span>
                  <span class="nt">&lt;price&gt;</span>
                    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
                    <span class="nt">&lt;value&gt;</span>1000<span class="nt">&lt;/value&gt;</span>
                  <span class="nt">&lt;/price&gt;</span>
                <span class="nt">&lt;/recurringPrice&gt;</span>
              <span class="nt">&lt;/recurring&gt;</span>
              <span class="nt">&lt;usages/&gt;</span>
            <span class="nt">&lt;/finalPhase&gt;</span>
            <span class="nt">&lt;plansAllowedInBundle&gt;</span>-1<span class="nt">&lt;/plansAllowedInBundle&gt;</span>
          <span class="nt">&lt;/plan&gt;</span>
          <span class="nt">&lt;plan</span> <span class="na">name=</span><span class="s">"sports-monthly"</span> <span class="na">prettyName=</span><span class="s">"sports-monthly"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;product&gt;</span>Sports<span class="nt">&lt;/product&gt;</span>
            <span class="nt">&lt;recurringBillingMode&gt;</span>IN_ADVANCE<span class="nt">&lt;/recurringBillingMode&gt;</span>
            <span class="nt">&lt;initialPhases&gt;</span>
              <span class="nt">&lt;phase</span> <span class="na">type=</span><span class="s">"TRIAL"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;duration&gt;</span>
                  <span class="nt">&lt;unit&gt;</span>DAYS<span class="nt">&lt;/unit&gt;</span>
                  <span class="nt">&lt;number&gt;</span>30<span class="nt">&lt;/number&gt;</span>
                <span class="nt">&lt;/duration&gt;</span>
                <span class="nt">&lt;fixed</span> <span class="na">type=</span><span class="s">"ONE_TIME"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;fixedPrice/&gt;</span>
                <span class="nt">&lt;/fixed&gt;</span>
                <span class="nt">&lt;usages/&gt;</span>
              <span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;/initialPhases&gt;</span>
            <span class="nt">&lt;finalPhase</span> <span class="na">type=</span><span class="s">"EVERGREEN"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;duration&gt;</span>
                <span class="nt">&lt;unit&gt;</span>UNLIMITED<span class="nt">&lt;/unit&gt;</span>
                <span class="nt">&lt;number&gt;</span>-1<span class="nt">&lt;/number&gt;</span>
              <span class="nt">&lt;/duration&gt;</span>
              <span class="nt">&lt;recurring&gt;</span>
                <span class="nt">&lt;billingPeriod&gt;</span>MONTHLY<span class="nt">&lt;/billingPeriod&gt;</span>
                <span class="nt">&lt;recurringPrice&gt;</span>
                  <span class="nt">&lt;price&gt;</span>
                    <span class="nt">&lt;currency&gt;</span>GBP<span class="nt">&lt;/currency&gt;</span>
                    <span class="nt">&lt;value&gt;</span>375.00<span class="nt">&lt;/value&gt;</span>
                  <span class="nt">&lt;/price&gt;</span>
                  <span class="nt">&lt;price&gt;</span>
                    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
                    <span class="nt">&lt;value&gt;</span>500.00<span class="nt">&lt;/value&gt;</span>
                  <span class="nt">&lt;/price&gt;</span>
                <span class="nt">&lt;/recurringPrice&gt;</span>
              <span class="nt">&lt;/recurring&gt;</span>
              <span class="nt">&lt;usages/&gt;</span>
            <span class="nt">&lt;/finalPhase&gt;</span>
            <span class="nt">&lt;plansAllowedInBundle&gt;</span>-1<span class="nt">&lt;/plansAllowedInBundle&gt;</span>
          <span class="nt">&lt;/plan&gt;</span>
          <span class="nt">&lt;plan</span> <span class="na">name=</span><span class="s">"standard-monthly"</span> <span class="na">prettyName=</span><span class="s">"standard-monthly"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;product&gt;</span>Standard<span class="nt">&lt;/product&gt;</span>
            <span class="nt">&lt;recurringBillingMode&gt;</span>IN_ADVANCE<span class="nt">&lt;/recurringBillingMode&gt;</span>
            <span class="nt">&lt;initialPhases&gt;</span>
              <span class="nt">&lt;phase</span> <span class="na">type=</span><span class="s">"TRIAL"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;duration&gt;</span>
                  <span class="nt">&lt;unit&gt;</span>DAYS<span class="nt">&lt;/unit&gt;</span>
                  <span class="nt">&lt;number&gt;</span>30<span class="nt">&lt;/number&gt;</span>
                <span class="nt">&lt;/duration&gt;</span>
                <span class="nt">&lt;fixed</span> <span class="na">type=</span><span class="s">"ONE_TIME"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;fixedPrice/&gt;</span>
                <span class="nt">&lt;/fixed&gt;</span>
                <span class="nt">&lt;usages/&gt;</span>
              <span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;/initialPhases&gt;</span>
            <span class="nt">&lt;finalPhase</span> <span class="na">type=</span><span class="s">"EVERGREEN"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;duration&gt;</span>
                <span class="nt">&lt;unit&gt;</span>UNLIMITED<span class="nt">&lt;/unit&gt;</span>
                <span class="nt">&lt;number&gt;</span>-1<span class="nt">&lt;/number&gt;</span>
              <span class="nt">&lt;/duration&gt;</span>
              <span class="nt">&lt;recurring&gt;</span>
                <span class="nt">&lt;billingPeriod&gt;</span>MONTHLY<span class="nt">&lt;/billingPeriod&gt;</span>
                <span class="nt">&lt;recurringPrice&gt;</span>
                  <span class="nt">&lt;price&gt;</span>
                    <span class="nt">&lt;currency&gt;</span>GBP<span class="nt">&lt;/currency&gt;</span>
                    <span class="nt">&lt;value&gt;</span>75.00<span class="nt">&lt;/value&gt;</span>
                  <span class="nt">&lt;/price&gt;</span>
                  <span class="nt">&lt;price&gt;</span>
                    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
                    <span class="nt">&lt;value&gt;</span>100.00<span class="nt">&lt;/value&gt;</span>
                  <span class="nt">&lt;/price&gt;</span>
                <span class="nt">&lt;/recurringPrice&gt;</span>
              <span class="nt">&lt;/recurring&gt;</span>
              <span class="nt">&lt;usages/&gt;</span>
            <span class="nt">&lt;/finalPhase&gt;</span>
            <span class="nt">&lt;plansAllowedInBundle&gt;</span>-1<span class="nt">&lt;/plansAllowedInBundle&gt;</span>
          <span class="nt">&lt;/plan&gt;</span>
          <span class="nt">&lt;plan</span> <span class="na">name=</span><span class="s">"super-monthly"</span> <span class="na">prettyName=</span><span class="s">"super-monthly"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;product&gt;</span>Super<span class="nt">&lt;/product&gt;</span>
            <span class="nt">&lt;recurringBillingMode&gt;</span>IN_ADVANCE<span class="nt">&lt;/recurringBillingMode&gt;</span>
            <span class="nt">&lt;initialPhases&gt;</span>
              <span class="nt">&lt;phase</span> <span class="na">type=</span><span class="s">"TRIAL"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;duration&gt;</span>
                  <span class="nt">&lt;unit&gt;</span>DAYS<span class="nt">&lt;/unit&gt;</span>
                  <span class="nt">&lt;number&gt;</span>30<span class="nt">&lt;/number&gt;</span>
                <span class="nt">&lt;/duration&gt;</span>
                <span class="nt">&lt;fixed</span> <span class="na">type=</span><span class="s">"ONE_TIME"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;fixedPrice/&gt;</span>
                <span class="nt">&lt;/fixed&gt;</span>
                <span class="nt">&lt;usages/&gt;</span>
              <span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;/initialPhases&gt;</span>
            <span class="nt">&lt;finalPhase</span> <span class="na">type=</span><span class="s">"EVERGREEN"</span><span class="nt">&gt;</span>
              <span class="nt">&lt;duration&gt;</span>
                <span class="nt">&lt;unit&gt;</span>UNLIMITED<span class="nt">&lt;/unit&gt;</span>
                <span class="nt">&lt;number&gt;</span>-1<span class="nt">&lt;/number&gt;</span>
              <span class="nt">&lt;/duration&gt;</span>
              <span class="nt">&lt;recurring&gt;</span>
                <span class="nt">&lt;billingPeriod&gt;</span>MONTHLY<span class="nt">&lt;/billingPeriod&gt;</span>
                <span class="nt">&lt;recurringPrice&gt;</span>
                  <span class="nt">&lt;price&gt;</span>
                    <span class="nt">&lt;currency&gt;</span>GBP<span class="nt">&lt;/currency&gt;</span>
                    <span class="nt">&lt;value&gt;</span>750.00<span class="nt">&lt;/value&gt;</span>
                  <span class="nt">&lt;/price&gt;</span>
                  <span class="nt">&lt;price&gt;</span>
                    <span class="nt">&lt;currency&gt;</span>USD<span class="nt">&lt;/currency&gt;</span>
                    <span class="nt">&lt;value&gt;</span>1000.00<span class="nt">&lt;/value&gt;</span>
                  <span class="nt">&lt;/price&gt;</span>
                <span class="nt">&lt;/recurringPrice&gt;</span>
              <span class="nt">&lt;/recurring&gt;</span>
              <span class="nt">&lt;usages/&gt;</span>
            <span class="nt">&lt;/finalPhase&gt;</span>
            <span class="nt">&lt;plansAllowedInBundle&gt;</span>-1<span class="nt">&lt;/plansAllowedInBundle&gt;</span>
          <span class="nt">&lt;/plan&gt;</span>
        <span class="nt">&lt;/plans&gt;</span>
        <span class="nt">&lt;priceLists&gt;</span>
          <span class="nt">&lt;defaultPriceList</span> <span class="na">name=</span><span class="s">"DEFAULT"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;plans&gt;</span>
              <span class="nt">&lt;plan&gt;</span>basic-annual<span class="nt">&lt;/plan&gt;</span>
              <span class="nt">&lt;plan&gt;</span>sports-monthly<span class="nt">&lt;/plan&gt;</span>
              <span class="nt">&lt;plan&gt;</span>standard-monthly<span class="nt">&lt;/plan&gt;</span>
              <span class="nt">&lt;plan&gt;</span>super-monthly<span class="nt">&lt;/plan&gt;</span>
            <span class="nt">&lt;/plans&gt;</span>
          <span class="nt">&lt;/defaultPriceList&gt;</span>
        <span class="nt">&lt;/priceLists&gt;</span>
      <span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/versions&gt;</span>
    <span class="nt">&lt;catalogName&gt;</span>SpyCarBasic<span class="nt">&lt;/catalogName&gt;</span>
  <span class="nt">&lt;/catalogs&gt;</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the catalog for the requested date in XML format.</p>
<h3 id='catalog-retrieve-the-catalog-as-json'>Retrieve the catalog as JSON</h3>
<p>This endpoint retrieves the Catalog for a requested date in JSON format. If there are multiple versions, the latest version with an effective date not later than the requested date is returned. If the effective date for all versions is greater than the requested date, the earliest version is returned. See the previous endpoint for examples.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">DateTime</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Catalogs</span> <span class="n">catalogsJson</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getCatalogJson</span><span class="o">(</span><span class="n">requestedDate</span><span class="o">,</span> 
                                                  <span class="n">accountId</span><span class="o">,</span> 
                                                  <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_tenant_catalog_json</span><span class="o">.</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span> 
                                                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_catalog_json</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SpyCarBasic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-02-08T00:00:00.000+0000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currencies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"GBP"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"units"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADD_ON"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Super"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"prettyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Super"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"super-monthly"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"prettyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"super-monthly"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"phases"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DAYS"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">750</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                  </span><span class="p">],</span><span class="w">
                  </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLIMITED"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"included"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="s2">"available"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"prettyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"prettyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"phases"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DAYS"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                  </span><span class="p">],</span><span class="w">
                  </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLIMITED"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"included"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="s2">"available"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sports"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"prettyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sports"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sports-monthly"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"prettyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sports-monthly"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
              </span><span class="s2">"phases"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DAYS"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">375</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                  </span><span class="p">],</span><span class="w">
                  </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                  </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLIMITED"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"included"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="s2">"available"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"priceLists"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"sports-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"super-monthly"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>if successful, returns a status code of 200 and the full catalog for the requested date in JSON format.</p>
<h3 id='catalog-retrieve-a-list-of-catalog-versions'>Retrieve a list of catalog versions</h3>
<p>Return a list of the effective dates for all available catalogs versions for this tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/versions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/versions"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">DateTime</span><span class="o">&gt;</span> <span class="n">versions</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getCatalogVersions</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_tenant_catalog_versions</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_catalog_versions</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="s2">"2013-02-08T00:00:00.000Z"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a comma-separated list of ISO date strings giving the effective date for each available catalog version.</p>
<h3 id='catalog-retrieve-available-base-plans'>Retrieve available base plans</h3>
<p>Returns a list of available base products and associated plans. Each object returned specifies a <code>product</code>, a <code>priceList</code>, a <code>plan</code>selected from the <code>pricelist</code>, and pricing information for the final phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/availableBasePlans</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/availableBasePlans"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">PlanDetail</span><span class="o">&gt;</span> <span class="n">basePlans</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getAvailableBasePlans</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">available_base_plans</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_available_base_plans</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sports"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sports-monthly"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finalPhaseBillingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finalPhaseRecurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">375</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finalPhaseBillingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"finalPhaseRecurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of objects representing the available base products and plans.</p>
<h3 id='catalog-retrieve-available-add-ons-for-a-given-product'>Retrieve available add-ons for a given product</h3>
<p>Returns a list of available add-on products, if any, for a specified base product, and for a specified price list or all price lists. Each object returned specifies a <code>product</code>, a <code>priceList</code>, a <code>plan</code> selected from the <code>pricelist</code>, and pricing information for the final phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/availableAddons</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/availableAddons"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">baseProductName</span> <span class="o">=</span> <span class="s">"Bullets"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">priceListName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">PlanDetail</span><span class="o">&gt;</span> <span class="n">availableAddons</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">getAvailableAddons</span><span class="o">(</span><span class="n">baseProductName</span><span class="o">,</span> 
                                                                 <span class="n">priceListName</span><span class="o">,</span> 
                                                                 <span class="n">accountId</span><span class="o">,</span> 
                                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">base_product_name</span> <span class="o">=</span> <span class="s1">'Basic'</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">available_addons</span><span class="p">(</span><span class="n">base_product_name</span><span class="p">,</span> 
                                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_available_addons</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                <span class="n">api_secret</span><span class="p">,</span> 
                                <span class="n">base_product_name</span><span class="o">=</span><span class="s">'Basic'</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="s2">"Basic"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"plan"</span><span class="p">:</span><span class="s2">"basic-annual"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"finalPhaseBillingPeriod"</span><span class="p">:</span><span class="s2">"ANNUAL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceList"</span><span class="p">:</span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"finalPhaseRecurringPrice"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"value"</span><span class="p">:</span><span class="mf">10000.0</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>baseProductName</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>base product name</td>
</tr>
<tr>
<td><strong>priceListName</strong></td>
<td>string</td>
<td>false</td>
<td>all price lists</td>
<td>price list name</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of objects representing available add-on products.</p>
<h3 id='catalog-delete-all-versions-of-a-per-tenant-catalog'>Delete all versions of a per tenant catalog</h3>
<p>Delete all per-tenant catalog versions. The tenant reverts to the system default catalog.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/catalog</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="na">deleteCatalog</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">delete_catalog</span><span class="p">(</span><span class="n">user</span><span class="p">,</span>
                                              <span class="n">reason</span><span class="p">,</span>
                                              <span class="n">comment</span><span class="p">,</span>
                                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">delete_catalog</span><span class="p">(</span><span class="n">created_by</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a a status code of 204 and an empty body.</p>
<h3 id='catalog-validate-a-catalog-xml'>Validate a catalog XML</h3>
<p>This endpoint validates an XML catalog. </p>

<p>Following are some of the errors that can be detected via this endpoint:</p>

<ul>
<li>Catalog name does not match the name of the existing catalog</li>
<li>A catalog with the particular effectiveDate already exists</li>
<li>An EVERGREEN phase does not have duration as UNLIMITED</li>
</ul>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/catalog/xml/validate</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/xml"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d @&lt;path_to_catalog_xml&gt; <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/xml/validate"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">catalogPath</span> <span class="o">=</span> <span class="s">"in-advance-arrear.xml"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="n">getResourceBodyString</span><span class="o">(</span><span class="n">catalogPath</span><span class="o">);</span>
<span class="n">CatalogValidation</span> <span class="n">validation</span> <span class="o">=</span> <span class="n">catalogApi</span><span class="o">.</span><span class="na">validateCatalogXml</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">CatalogValidationError</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">validation</span><span class="o">.</span><span class="na">getCatalogValidationErrors</span><span class="o">();</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"catalogValidationErrors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"errorDescription"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Catalog name 'ExampleCatalog' is different from existing catalog name 'Firearms'"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Request Body</strong></p>

<p>The complete catalog in XML format. Alternative, the path to the catalog XML file can also be specified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a <code>CatalogValidation</code> object. If validation is successful and there are no validation errors, the <code>CatalogValidation</code> object is empty, otherwise it contains a <code>CatalogValidationError</code> List.</p>
<h2 id='catalog-subscription-info'>Subscription info</h2>
<p>These endpoints return information concerning a particular subscription. They select from the catalog only the items (such as plan, phase, or products) that currently apply to the specified subscription.</p>
<h3 id='catalog-retrieve-the-phase-for-a-given-subscription-and-date'>Retrieve the phase for a given subscription and date</h3>
<p>This API returns information about the current <code>Phase</code> associated with a given subscription. The record returned includes the phase type and information about pricing, duration, and usage.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/phase</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/phase?subscriptionId=8ab101b6-15e8-433b-b4f7-f99eeaa56a77&amp;requestedDate=2018-7-18"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_catalog_phase</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                                 <span class="n">requested_date</span><span class="p">,</span> 
                                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_phase_for_subscription_and_date</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                               <span class="n">api_secret</span><span class="p">,</span> 
                                               <span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DAYS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w"> 
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the current phase.</p>
<h3 id='catalog-retrieve-the-plan-for-a-given-subscription-and-date'>Retrieve the plan for a given subscription and date</h3>
<p>This API returns information about the current <code>Plan</code> associated with a given subscription. The record returned includes the plan name and information for each phase of the plan.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/plan</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/plan?subscriptionId=8ab101b6-15e8-433b-b4f7-f99eeaa56a77&amp;requestedDate=2018-7-18"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_catalog_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                                <span class="n">requested_date</span><span class="p">,</span> 
                                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_plan_for_subscription_and_date</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                              <span class="n">api_secret</span><span class="p">,</span> 
                                              <span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prettyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phases"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DAYS"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GBP"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"fixedPrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNLIMITED"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"usages"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the plan for this subscription.</p>
<h3 id='catalog-retrieve-the-pricelist-for-a-given-subscription-and-date'>Retrieve the priceList for a given subscription and date</h3>
<p>This API returns information about the current <code>priceList</code> associated with a given subscription. The record returned includes the price list name and the list of plans on this list.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/priceList</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/priceList?subscriptionId=8ab101b6-15e8-433b-b4f7-f99eeaa56a77&amp;requestedDate=2018-7-18"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_catalog_price_list</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                                      <span class="n">requested_date</span><span class="p">,</span> 
                                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_price_list_for_subscription_and_date</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                                    <span class="n">api_secret</span><span class="p">,</span> 
                                                    <span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"sports-monthly"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"super-monthly"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the price list for this subscription.</p>
<h3 id='catalog-retrieve-product-for-a-given-subscription-and-date'>Retrieve product for a given subscription and date</h3>
<p>This API returns information about the <code>product</code> associated with a given subscription. The record returned includes the product names, available plans, items included, and available add-ons.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/catalog/product</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/catalog/product?subscriptionId=8ab101b6-15e8-433b-b4f7-f99eeaa56a77&amp;requestedDate=2018-7-18"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">get_catalog_product</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                                   <span class="n">requested_date</span><span class="p">,</span> 
                                                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">get_product_for_subscription_and_date</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> 
                                                 <span class="n">api_secret</span><span class="p">,</span> 
                                                 <span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prettyName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"included"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"available"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>subscription id</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a record for the product for this subscription.</p>
<h2 id='catalog-simple-plan'>Simple Plan</h2>
<p>We provide a more basic level of APIs as a quick way to add a <code>Plan</code> into an <strong>existing version</strong> of the catalog.
The intent is mostly to help getting started with Kill Bill by abstracting away more complex topics such as alignements, rules, ...
The functionality is exposed on our admin UI (KAUI) to provide a simple graphical way to configure a simple catalog and get started quickly.</p>

<p>One can directly use our Simple Plan API to add new <code>Plans</code> without the need to create an initial catalog version: If there is no
existing catalog version for the tenant, the system will create such an initial version when the first plan is added; otherwise, the
system will use the existing active catalog version to add the new plan (but it will not create a new catalog version).</p>

<p>Note that because the Simple Plan API is just an abstraction on top of the more complex XML based APIs, one can start with such Simple Plan API,
and then download the resulting XML, and edit such catalog by hand (to add entries, modify default rules, ...).</p>

<p>A simple plan has the following limitations:</p>

<ul>
<li>In-advance billing only</li>
<li>Limited to one <code>RECURRING</code> phase  and an optional $0 <code>TRIAL</code> phase</li>
<li>No suport for fixed price</li>
</ul>

<p>Once a simple plan has been uploaded, one can retrieve the associated XML, edit it to configure additional aspects, and then upload
a new version of this catalog. So, this functionality can also be a stepping stone to a full catalog configuration.</p>
<h3 id='catalog-add-a-simple-plan'>Add a simple plan</h3>
<p>Add a (simple) Plan into the current version of the Catalog associated with the tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/catalog/simplePlan</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "planId": "basic-annual", "productName": "Basic", "productCategory": "BASE", "currency": "USD", "amount": 1000, "billingPeriod": "ANNUAL", "trialLength": 0, "trialTimeUnit": "UNLIMITED"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/catalog/simplePlan"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CatalogApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CatalogApi</span> <span class="n">catalogApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">planId</span> <span class="o">=</span> <span class="s">"foo-monthly"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">productName</span> <span class="o">=</span> <span class="s">"Foo"</span><span class="o">;</span>
<span class="n">Integer</span> <span class="n">trialLength</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

<span class="n">SimplePlan</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimplePlan</span><span class="o">(</span><span class="n">planId</span><span class="o">,</span> 
                                 <span class="n">productName</span><span class="o">,</span> 
                                 <span class="n">ProductCategory</span><span class="o">.</span><span class="na">BASE</span><span class="o">,</span> 
                                 <span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">,</span> 
                                 <span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">,</span> 
                                 <span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">,</span> 
                                 <span class="n">trialLength</span><span class="o">,</span> 
                                 <span class="n">TimeUnit</span><span class="o">.</span><span class="na">UNLIMITED</span><span class="o">,</span> 
                                 <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">())</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="na">addSimplePlan</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">simple_plan</span>                  <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">SimplePlanAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">plan_id</span>          <span class="o">=</span> <span class="s1">'basic-annual'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">product_name</span>     <span class="o">=</span> <span class="s1">'Basic'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">product_category</span> <span class="o">=</span> <span class="s1">'BASE'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">currency</span>         <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">amount</span>           <span class="o">=</span> <span class="mi">10000</span><span class="o">.</span><span class="mo">00</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">billing_period</span>   <span class="o">=</span> <span class="s1">'ANNUAL'</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">trial_length</span>     <span class="o">=</span> <span class="mi">0</span>
<span class="n">simple_plan</span><span class="p">.</span><span class="nf">trial_time_unit</span>  <span class="o">=</span> <span class="s1">'UNLIMITED'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Catalog</span><span class="p">.</span><span class="nf">add_tenant_catalog_simple_plan</span><span class="p">(</span><span class="n">simple_plan</span><span class="p">,</span>
                                                              <span class="n">user</span><span class="p">,</span>
                                                              <span class="n">reason</span><span class="p">,</span>
                                                              <span class="n">comment</span><span class="p">,</span>
                                                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">catalogApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CatalogApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">SimplePlan</span><span class="p">(</span><span class="n">plan_id</span><span class="o">=</span><span class="s">'basic-annual'</span><span class="p">,</span>
                  <span class="n">product_name</span><span class="o">=</span><span class="s">'Basic'</span><span class="p">,</span>
                  <span class="n">product_category</span><span class="o">=</span><span class="s">'BASE'</span><span class="p">,</span>
                  <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                  <span class="n">amount</span><span class="o">=</span><span class="mf">10000.00</span><span class="p">,</span>
                  <span class="n">billing_period</span><span class="o">=</span><span class="s">'ANNUAL'</span><span class="p">,</span>
                  <span class="n">trial_length</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                  <span class="n">trial_time_unit</span><span class="o">=</span><span class="s">'UNLIMITED'</span><span class="p">)</span>

<span class="n">catalogApi</span><span class="o">.</span><span class="n">add_simple_plan</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">created_by</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Provides the content for the plan in JSON form. This should be very simple. Note that the &quot;planId&quot; becomes the <code>planName</code> attribute. For example:</p>

<p><code>{
  &quot;planId&quot;: &quot;newplan&quot;,
  &quot;productName&quot;: &quot;myitem&quot;,
  &quot;productCategory&quot;: &quot;BASE&quot;,
  &quot;currency&quot;: &quot;USD&quot;,
  &quot;amount&quot;: 0,
  &quot;billingPeriod&quot;: &quot;DAILY&quot;,
  &quot;trialLength&quot;: 0,
  &quot;trialTimeUnit&quot;: &quot;DAYS&quot;,
  &quot;availableBaseProducts&quot;: []
}</code></p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h1 id='account'>Account</h1>
<p>Each of your customers is identified by an account. The information for an account is contained in an account resource object. The endpoints in this group manage the account resource and the information it contains. </p>
<h2 id='account-account-resource'>Account Resource</h2>
<p>An <code>Account</code> resource represents a customer. This is the top level per-customer resource. All other per-customer data, such as bundles, subscriptions, invoices and payments, will be linked to this resource. An account resource may contain Personally Identifiable Information (PII) for the customer such as name, address, email, etc. A large number of endpoints are available to manage not only purely account related information -- e.g <code>name</code> -- but other per-account data as well.</p>

<p>The attributes contained in the account resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this account</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key provided by the client</td>
</tr>
<tr>
<td><strong>referenceTime</strong></td>
<td>string</td>
<td>system</td>
<td>ISO date and time this account was created</td>
</tr>
<tr>
<td><strong>parentAccountId</strong></td>
<td>string</td>
<td>user</td>
<td>UUID for the parent account, if any, if the <a href="http://docs.killbill.io/latest/ha.html">hierarchical accounts (HA) model</a> is used</td>
</tr>
<tr>
<td><strong>isPaymentDelegatedToParent</strong></td>
<td>boolean</td>
<td>user</td>
<td>For the hierarchical model, indicates whether the parent account, if any, is handling payments for this account</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user</td>
<td>Default currency for the customer</td>
</tr>
<tr>
<td><strong>billCycleDayLocal</strong></td>
<td>integer</td>
<td>system or user</td>
<td>Default day of the month to bill customers for subscriptions with an <code>ACCOUNT</code> <a href="http://docs.killbill.io/latest/userguide_subscription.html#_billing_alignment_rules">billing alignment</a> and a billing period that is a multiple of one month.</td>
</tr>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>user</td>
<td>UUID for the default payment method used by the system to make recurring payments</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the account</td>
</tr>
<tr>
<td><strong>firstNameLength</strong></td>
<td>integer</td>
<td>user</td>
<td>Length of the first name (first part of <strong>name</strong>)</td>
</tr>
<tr>
<td><strong>company</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s company name</td>
</tr>
<tr>
<td><strong>address1</strong></td>
<td>string</td>
<td>user</td>
<td>Address line 1</td>
</tr>
<tr>
<td><strong>address2</strong></td>
<td>string</td>
<td>user</td>
<td>Address line 2</td>
</tr>
<tr>
<td><strong>city</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s city</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s state, if any</td>
</tr>
<tr>
<td><strong>postalCode</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s postal code, if any</td>
</tr>
<tr>
<td><strong>country</strong></td>
<td>string</td>
<td>user</td>
<td>Customer&#39;s ISO country identifier</td>
</tr>
<tr>
<td><strong>locale</strong></td>
<td>string</td>
<td>user</td>
<td>ISO locale code for customer language</td>
</tr>
<tr>
<td><strong>timeZone</strong></td>
<td>string</td>
<td>user</td>
<td>Descriptor for the customer&#39;s time zone. Used by the system to make any required transformation from <code>DateTime</code> to <code>LocalDate</code></td>
</tr>
<tr>
<td><strong>phone</strong></td>
<td>string</td>
<td>user</td>
<td>Phone contact number to reach the customer</td>
</tr>
<tr>
<td><strong>email</strong></td>
<td>string</td>
<td>user</td>
<td>Primary email to reach the customer</td>
</tr>
<tr>
<td><strong>notes</strong></td>
<td>string</td>
<td>user</td>
<td>Additonal notes about the customer, usually set by the customer service department</td>
</tr>
<tr>
<td><strong>isMigrated</strong></td>
<td>boolean</td>
<td>user</td>
<td>Indicates whether this account has been migrated from another system</td>
</tr>
<tr>
<td><strong>accountCBA</strong></td>
<td>integer</td>
<td>system</td>
<td>Account credit, if any</td>
</tr>
<tr>
<td><strong>accountBalance</strong></td>
<td>integer</td>
<td>system</td>
<td>Account balance, if any</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>Array of audit log records for this account</td>
</tr>
</tbody></table>

<p>The <strong>name</strong> is usually the personal name of the account owner. We recommend that this be entered so that the first word is an acceptable short form for the complete name, such as &quot;first name&quot; in most English-speaking cultures. In this case the value <strong>firstNameLength</strong> enables your code to extract this part of the name for informal greetings. For information on name formats in various countries see <a href="https://www.w3.org/International/questions/qa-personal-names">Personal Names around the World</a> by the W3C.</p>

<p>A list of valid <strong>timeZone</strong> strings is given at <a href="https://github.com/rails/rails/blob/23b4aa505d04731c7890e19e8f8996869526f5b3/activesupport/lib/active_support/values/time_zone.rb#L31-L183">timezone strings</a>.</p>

<p>For information about migrating accounts from a previous system see the <a href="http://docs.killbill.io/latest/migration_guide.html">Migration Guide</a>.</p>
<h2 id='account-accounts'>Accounts</h2><h3 id='account-create-an-account'>Create an Account</h3>
<p>Create a new customer <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts</code> </p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "name": "John Doe", "email": "john@laposte.com", "currency": "USD"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">Account</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Account</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"John Doe"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">"john@laposte.com"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>

<span class="n">Account</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">createAccount</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">new</span>
<span class="n">account</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s2">"John Doe"</span>
<span class="n">account</span><span class="p">.</span><span class="nf">email</span> <span class="o">=</span> <span class="s2">"john@laposte.com"</span>
<span class="n">account</span><span class="p">.</span><span class="nf">currency</span> <span class="o">=</span> <span class="s2">"USD"</span>

<span class="n">account</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">reason</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="s">'example'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'John Doe'</span><span class="p">,</span> 
               <span class="n">email</span><span class="o">=</span><span class="s">'john@laposte.com'</span><span class="p">,</span> 
               <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">create_account</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> 
                          <span class="n">created_by</span><span class="p">,</span> 
                          <span class="n">api_key</span><span class="p">,</span> 
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The body of the request is a JSON string specifying any attributes of the resource that need to be assigned an initial value. No attributes are required. For any attributes omitted, the following defaults are generated:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>System generated UUID</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>Copy of <strong>accountId</strong></td>
</tr>
<tr>
<td><strong>billCycleDayLocal</strong></td>
<td>0</td>
</tr>
<tr>
<td><strong>isPaymentDelegatedToParent</strong></td>
<td>false</td>
</tr>
<tr>
<td><strong>referenceTime</strong></td>
<td>ISO time-date code for the current time in the specified timezone</td>
</tr>
<tr>
<td><strong>timeZone</strong></td>
<td>&quot;UTC&quot;</td>
</tr>
<tr>
<td>all others</td>
<td>null</td>
</tr>
</tbody></table>

<p>All attributes are optional, so it is possible to quickly create a shell account. This account could be used for test purposes, so its attributes can be filled in later. This also ensures the initial account contains no PII. Note, however, that the <code>currency</code> attribute must have a non-null value. This cannot be added later and is required for invoicing to work properly.</p>

<p>A few fields are not updatable; they can only be set once when creating the original <code>Account</code>. These include  <code>externalKey</code>, <code>currency</code>, <code>timeZone</code>, and <code>referenceTime</code>. In addition the <code>billCycleDayLocal</code> can be updated but only <strong>once</strong>, that is one can create an <code>Account</code> without specifying the <code>billCycleDayLocal</code> and later update its value; this, in particular allows the system to update its value to a good default, that is one that will avoid leading prorations, when creating the first subscription.</p>

<p>The <code>accountId</code> and audit logs are generated by the system and cannot be set or modified by the user.</p>

<p>In order to create an account as a child account, the <code>parentAccountId</code> attribute needs to be specified with the <code>id</code> of the parent account. Also, the <code>isPaymentDelegatedToParent</code> attribute can be specified with a true/false value. A <code>false</code> indicates that the child account will be responsible for paying its own invoices while a <code>true</code> indicates that the parent account will be responsible for paying the child account invoices. </p>

<p><strong>Query Parameters</strong></p>

<p>none</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL for the account object, including the generated <code>accountId</code>.</p>
<h3 id='account-retrieve-an-account-by-its-id'>Retrieve an Account by its ID</h3>
<p>Retrieves the full resource object for an <code>Account</code> using its <code>accountId</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/36c05a84-563b-4794-8958-772d93e677e1"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"36c05a84-563b-4794-8958-772d93e677e1"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">Account</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                       <span class="n">accountWithBalance</span><span class="o">,</span> 
                                       <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span> 
                                       <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"36c05a84-563b-4794-8958-772d93e677e1"</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">account</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">new</span>
<span class="n">account</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">with_balance</span><span class="p">,</span> 
                   <span class="n">with_balance_and_cba</span><span class="p">,</span>
                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'36c05a84-563b-4794-8958-772d93e677e1'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36c05a84-563b-4794-8958-772d93e677e1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstNameLength"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36c05a84-563b-4794-8958-772d93e677e1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@laposte.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isPaymentDelegatedToParent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"referenceTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-03-08T16:31:16.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isMigrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountBalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountCBA"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an account object in the response body.</p>
<h3 id='account-retrieve-an-account-by-its-external-key'>Retrieve an Account by its external key</h3>
<p>Retrieves the resource object for an <code>Account</code> using its <code>externalKey</code> as an identifier.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts?externalKey=36c05a84-563b-4794-8958-772d93e677e1"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"36c05a84-563b-4794-8958-772d93e677e1"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">Account</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountByKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">,</span> 
                                            <span class="n">accountWithBalance</span><span class="o">,</span> 
                                            <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span> 
                                            <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">external_key</span> <span class="o">=</span> <span class="s1">'36c05a84-563b-4794-8958-772d93e677e1'</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">new</span>
<span class="n">account</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span>
                             <span class="n">with_balance</span><span class="p">,</span>
                             <span class="n">with_balance_and_cba</span><span class="p">,</span> 
                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">external_key</span> <span class="o">=</span> <span class="s">'36c05a84-563b-4794-8958-772d93e677e1'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36c05a84-563b-4794-8958-772d93e677e1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstNameLength"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36c05a84-563b-4794-8958-772d93e677e1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@laposte.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isPaymentDelegatedToParent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"referenceTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-03-08T16:31:16.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isMigrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountBalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountCBA"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>External key to be used for retrieval</td>
</tr>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an account object in the response body.</p>
<h3 id='account-update-an-account'>Update an Account</h3>
<p>Updates selected attributes in an account object. Note that the following fields are not updatable; they can only be set once when creating the original <code>Account</code>:  <code>externalKey</code>, <code>currency</code>, <code>timeZone</code>, and <code>referenceTime</code>. In addition, the <code>billCycleDayLocal</code> can be updated but only <strong>once</strong>, that is, one can create an <code>Account</code> without specifying the <code>billCycleDayLocal</code> and later update its value. This, allows the system to update its value to a good default, that is one that will avoid leading prorations, when creating the first subscription. Also, the audit logs cannot be changed.</p>

<p>The updates are passed in the request body, as an object that only needs to contain the attributes to be changed. Any attribute omitted from the request body will remain unchanged.</p>

<p>If the boolean query parameter <strong>treatNullAsReset</strong> is <code>true</code>, any attribute specified as <code>null</code> in the request will be set to null. If the parameter is <code>false</code>, any attribute specified as <code>null</code> in the request will remain unchanged.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "name": "Another Name"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">Account</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Account</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Another Name"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">treatNullAsReset</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// any attribute with a null value in the request body will be unchanged</span>
                                  <span class="c1">// If set to true, you will need to explicitly set the externalKey, currency and timezone fields to their original values, otherwise a KillBillClientException will occur.</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">updateAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                         <span class="n">body</span><span class="o">,</span> 
                         <span class="n">treatNullAsReset</span><span class="o">,</span>
                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Another Name'</span>
<span class="n">treat_null_as_reset</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">account</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">treat_null_as_reset</span><span class="p">,</span>
               <span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span> 
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="s">'example'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Another Name'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">update_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                          <span class="n">body</span><span class="p">,</span> 
                          <span class="n">created_by</span><span class="p">,</span> 
                          <span class="n">api_key</span><span class="p">,</span> 
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>treatNullAsReset</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, any attribute with a null value in the request body will be set to <code>null</code>. If false, any attribute with a null value in the request body will be unchanged.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body..</p>
<h3 id='account-close-account'>Close account</h3>
<p>This endpoint can be used when no other state change will occur on this <code>Account</code> to bring it to a stable state. Depending on the value of the query parameters it will potentially cancel all active subscriptions, write-off unpaid invoices, etc. <strong>This endpoint is not for account deletion</strong>. We provide no support to remove state through APIs; such deletion operations, if really needed, would have to happen at the database level and are not encouraged. They can be tricky to get right.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/accounts/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/8785164f-b5d7-4da1-9495-33f5105e8d80"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">cancelAllSubscriptions</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will cancel all subscriptions</span>
<span class="n">Boolean</span> <span class="n">writeOffUnpaidInvoices</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will write off unpaid invoices</span>
<span class="n">Boolean</span> <span class="n">itemAdjustUnpaidInvoices</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not adjust unpaid invoices</span>
<span class="n">Boolean</span> <span class="n">removeFutureNotifications</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will remove future notifications </span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">closeAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                        <span class="n">cancelAllSubscriptions</span><span class="o">,</span> 
                        <span class="n">writeOffUnpaidInvoices</span><span class="o">,</span> 
                        <span class="n">itemAdjustUnpaidInvoices</span><span class="o">,</span> 
                        <span class="n">removeFutureNotifications</span><span class="o">,</span> 
                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">cancel_subscriptions</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">writeoff_unpaid_invoices</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">item_adjust_unpaid_invoices</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span><span class="p">.</span><span class="nf">close</span><span class="p">(</span><span class="n">cancel_subscriptions</span><span class="p">,</span> 
              <span class="n">writeoff_unpaid_invoices</span><span class="p">,</span> 
              <span class="n">item_adjust_unpaid_invoices</span><span class="p">,</span>
              <span class="n">user</span><span class="p">,</span>
              <span class="n">reason</span><span class="p">,</span>
              <span class="n">comment</span><span class="p">,</span> 
              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">close_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                         <span class="n">created_by</span><span class="p">,</span>
                         <span class="n">api_key</span><span class="p">,</span>
                         <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>cancelAllSubscriptions</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, cancel all subscriptions</td>
</tr>
<tr>
<td><strong>writeOffUnpaidInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, write off unpaid invoices</td>
</tr>
<tr>
<td><strong>itemAdjustUnpaidInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, adjust unpaid invoices</td>
</tr>
<tr>
<td><strong>removeFutureNotifications</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, remove future notifications</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>IF successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-list-and-search'>List and Search</h2>
<p>These endpoints allow you to list all accounts or to search for a specific account. </p>
<h3 id='account-list-accounts'>List accounts</h3>
<p>Retrieve a list of all account records.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/pagination"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">Accounts</span> <span class="n">allAccounts</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccounts</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span>
                                              <span class="n">limit</span><span class="o">,</span>
                                              <span class="n">accountWithBalance</span><span class="o">,</span>
                                              <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span>
                                              <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                        <span class="n">limit</span><span class="p">,</span>
                        <span class="n">with_balance</span><span class="p">,</span>
                        <span class="n">with_balance_and_cba</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_accounts</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e60a79de-0d4c-4aeb-82e9-7695fe393b81"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e60a79de-0d4c-4aeb-82e9-7695fe393b81"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"referenceTime"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2023</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dayOfYear"</span><span class="p">:</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w">
        </span><span class="s2">"equalNow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"weekyear"</span><span class="p">:</span><span class="w"> </span><span class="mi">2023</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chronology"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"zone"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"weekOfWeekyear"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secondOfMinute"</span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w">
        </span><span class="s2">"millisOfDay"</span><span class="p">:</span><span class="w"> </span><span class="mi">61959000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"monthOfYear"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dayOfWeek"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"beforeNow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"minuteOfDay"</span><span class="p">:</span><span class="w"> </span><span class="mi">1032</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dayOfMonth"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"era"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"zone"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"yearOfCentury"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
        </span><span class="s2">"centuryOfEra"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"hourOfDay"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secondOfDay"</span><span class="p">:</span><span class="w"> </span><span class="mi">61959</span><span class="p">,</span><span class="w">
        </span><span class="s2">"millis"</span><span class="p">:</span><span class="w"> </span><span class="mi">1678122759000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"yearOfEra"</span><span class="p">:</span><span class="w"> </span><span class="mi">2023</span><span class="p">,</span><span class="w">
        </span><span class="s2">"minuteOfHour"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
        </span><span class="s2">"millisOfSecond"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"afterNow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"paymentDelegatedToParent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@laposte.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"paginationNextOffset"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paginationNextPageUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/1.0/kb/accounts/pagination?offset=1&amp;limit=1&amp;accountWithBalanceAndCBA=false&amp;accountWithBalance=false&amp;audit=NONE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paginationMaxNbRecords"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"killBillHttpClient"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"paginationCurrentOffset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paginationTotalNbRecords"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"empty"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>false</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>false</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all accounts.</p>
<h3 id='account-search-accounts'>Search accounts</h3>
<p>Search for an account by a specified search string. The search string is compared to the following attributes: <code>accountId</code>, <code>name</code>, <code>email</code>, <code>companyName</code>, and <code>externalKey</code>. The operation returns the account record in which the search string matches all or part of any one of the attributes <code>name</code>, <code>email</code>, <code>companyName</code>, <code>externalKey</code>. However, the string must match the entire attribute in case of <code>accountId</code>. </p>

<p>For example : An account with <code>name</code> <em>exampleaccount</em> can be searched using <em>example</em> as the search string. However, an account with <code>accountId</code> <em>9254283b-be25-45f1-97c3-b902f4d18bab</em> cannot be searched using only <em>9254283b</em> as the search string.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/search/John%20Doe"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"John"</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include account balance and CBA info</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Account</span><span class="o">&gt;</span> <span class="n">accountsByKey</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">searchAccounts</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                                                        <span class="n">offset</span><span class="o">,</span>
                                                        <span class="n">limit</span><span class="o">,</span>
                                                        <span class="n">accountWithBalance</span><span class="o">,</span>
                                                        <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span>
                                                        <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'John'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                      <span class="n">offset</span><span class="p">,</span>
                                      <span class="n">limit</span><span class="p">,</span>
                                      <span class="n">with_balance</span><span class="p">,</span>
                                      <span class="n">with_balance_and_cba</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'John'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">search_accounts</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fc693517-9ede-4543-a184-9e6f21119584"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fc693517-9ede-4543-a184-9e6f21119584"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"referenceTime"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2023</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dayOfYear"</span><span class="p">:</span><span class="w"> </span><span class="mi">65</span><span class="p">,</span><span class="w">
        </span><span class="s2">"equalNow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"weekyear"</span><span class="p">:</span><span class="w"> </span><span class="mi">2023</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chronology"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"zone"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"weekOfWeekyear"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secondOfMinute"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w">
        </span><span class="s2">"millisOfDay"</span><span class="p">:</span><span class="w"> </span><span class="mi">62241000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"monthOfYear"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dayOfWeek"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"beforeNow"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"minuteOfDay"</span><span class="p">:</span><span class="w"> </span><span class="mi">1037</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dayOfMonth"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"era"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"zone"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"yearOfCentury"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
        </span><span class="s2">"hourOfDay"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"centuryOfEra"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secondOfDay"</span><span class="p">:</span><span class="w"> </span><span class="mi">62241</span><span class="p">,</span><span class="w">
        </span><span class="s2">"millis"</span><span class="p">:</span><span class="w"> </span><span class="mi">1678123041000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"yearOfEra"</span><span class="p">:</span><span class="w"> </span><span class="mi">2023</span><span class="p">,</span><span class="w">
        </span><span class="s2">"minuteOfHour"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"millisOfSecond"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"afterNow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"paymentDelegatedToParent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@laposte.com"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"paginationNextOffset"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paginationNextPageUri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/1.0/kb/accounts/search/John?offset=1&amp;limit=1&amp;accountWithBalanceAndCBA=false&amp;accountWithBalance=false&amp;audit=NONE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paginationMaxNbRecords"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"killBillHttpClient"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"paginationCurrentOffset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paginationTotalNbRecords"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="s2">"empty"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>What you want to find</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>false</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>false</td>
<td>100</td>
<td>Maximum number of items to return on this page</td>
</tr>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>If true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of accounts that contain a match for the specified search key.</p>
<h2 id='account-email'>Email</h2>
<p>These endpoints manage emails associated with a customer account. <strong>These are secondary emails, distinct from the <code>email</code> attribute in the <code>account</code> object.</strong> It is possible to have
several such emails for one customer account.</p>
<h3 id='account-add-account-email'>Add account email</h3>
<p>Add an email to an account. Existing emails are undisturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/emails</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "email": "email@laposte.com"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"873c26ef-a3fa-4942-b2f5-549b51f20b1a"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="s">"email@laposte.com"</span><span class="o">;</span>

<span class="n">AccountEmail</span> <span class="n">accountEmail</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AccountEmail</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                             <span class="n">email</span><span class="o">,</span>
                                             <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">addEmail</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                    <span class="n">accountEmail</span><span class="o">,</span>
                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">email</span> <span class="o">=</span> <span class="s1">'email@laposte.com'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">add_email</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">email</span><span class="p">,</span>
                  <span class="n">user</span><span class="p">,</span>
                  <span class="n">reason</span><span class="p">,</span>
                  <span class="n">comment</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c84de569-b654-4f7f-ab13-17616302d310'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">AccountEmail</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s">'email@laposte.com'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">add_email</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                     <span class="n">body</span><span class="p">,</span>
                     <span class="n">created_by</span><span class="p">,</span>
                     <span class="n">api_key</span><span class="p">,</span>
                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body identifies a subset of the <code>account</code> attributes as a JSON string. The attributes required are <code>accountId</code> and <code>email</code> (the email to be added). <code>accountId</code> is required in the body even though it is given in the path. No other attributes should be included.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL for the account object, including the <code>accountId</code>.</p>
<h3 id='account-retrieve-account-emails'>Retrieve account emails</h3>
<p>Retrieves all emails for an account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/emails</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cd026587-c93b-471c-a98d-224c21636fbc"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AccountEmail</span><span class="o">&gt;</span> <span class="n">emails</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getEmails</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>
<span class="n">account</span><span class="p">.</span><span class="nf">emails</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c8f51346-562d-429b-8c89-27a0f72009b3'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_emails</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"e4ca38b3-934d-42e8-a292-ffb0af5549f2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"email@laposte.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response Body</strong></p>

<p>If successful, returns a status code of 200 and a list of objects giving the account id and the emails. Note that this is not the full object for each email, and does not include the email ID. This can be obtained only from the account audit log.</p>
<h3 id='account-delete-email'>Delete email</h3>
<p>Deletes an email from an account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/emails/{email}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails/email@laposte.com"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"873c26ef-a3fa-4942-b2f5-549b51f20b1a"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="s">"email@laposte.com"</span><span class="o">;</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">removeEmail</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                       <span class="n">email</span><span class="o">,</span> 
                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">email</span> <span class="o">=</span> <span class="s1">'email@laposte.com'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">remove_email</span><span class="p">(</span><span class="n">email</span><span class="p">,</span>
                     <span class="n">user</span><span class="p">,</span>
                     <span class="n">reason</span><span class="p">,</span>
                     <span class="n">comment</span><span class="p">,</span>
                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c84de569-b654-4f7f-ab13-17616302d310'</span>
<span class="n">email</span> <span class="o">=</span> <span class="s">'email@laposte.com'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">remove_email</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                        <span class="n">email</span><span class="p">,</span>
                        <span class="n">created_by</span><span class="p">,</span>
                        <span class="n">api_key</span><span class="p">,</span>
                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and without any data.</p>
<h2 id='account-bundle'>Bundle</h2>
<p>This endpoint provides an API to list the Bundles associated with this account. A Bundle is a set of Subscriptions and related information. See <a href="#bundle">Bundle</a> for details on Bundles.</p>
<h3 id='account-retrieve-bundles-for-account'>Retrieve bundles for account</h3>
<p>This endpoint is used to list all <code>Bundles</code> associated with this account. It is possible to limit the list to a specific Bundle external key, or to a list of Bundle Ids.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/bundles</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/bundles"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"15434b45-54c1-4a44-851c-b1f2f7a52f03"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"123467"</span><span class="o">;</span> <span class="c1">//use null to fetch all bundles</span>
<span class="n">String</span> <span class="n">bundlesFilter</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Bundle</span><span class="o">&gt;</span> <span class="n">accountBundles</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountBundles</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                           <span class="n">externalKey</span><span class="o">,</span> 
                                                           <span class="n">bundlesFilter</span><span class="o">,</span>
                                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">bundles</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_bundles</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NATIVE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"timeline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>false</td>
<td>return all bundles</td>
<td>Bundle external key; if present, return only bundles with this key.</td>
</tr>
<tr>
<td><strong>bundlesFilter</strong></td>
<td>string</td>
<td>false</td>
<td>return all bundles</td>
<td>Comma separated list of bundle ids to return, if found.</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of bundle objects.</p>
<h3 id='account-retrieve-paginated-bundles-for-account'>Retrieve paginated bundles for account</h3>
<p>This endpoint is used to list all <code>Bundles</code> associated with this account in a paginated format.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/bundles/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/325fbe1c-7c35-4d96-a4e5-2cbaabe218c6/bundles/pagination"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"325fbe1c-7c35-4d96-a4e5-2cbaabe218c6"</span><span class="o">);</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">10L</span><span class="o">;</span>       

<span class="n">Bundles</span> <span class="n">bundles</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountBundlesPaginated</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">offset</span><span class="o">,</span> <span class="n">limit</span><span class="o">,</span> <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">bundles</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_bundles_paginated</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NATIVE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
        </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"timeline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>false</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>false</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of bundle objects.</p>
<h2 id='account-invoice'>Invoice</h2>
<p>This endpoint provides an API to list the Invoices associated with this account. See section <a href="#invoice">Invoice</a> for details on invoices.</p>
<h3 id='account-retrieve-account-invoices'>Retrieve account invoices</h3>
<p>List the Invoices associated with this account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/invoices</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/invoices"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d3a82897-ae72-4a2e-9bca-e3c1fe087f84"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">startDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">endDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withMigrationInvoices</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not fetch migrated invoice - if any</span>
<span class="n">Boolean</span> <span class="n">unpaidInvoicesOnly</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not restrict to unpaid invoices</span>
<span class="n">Boolean</span> <span class="n">includeVoidedInvoices</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include void invoices</span>
<span class="n">Boolean</span> <span class="n">includeInvoiceComponents</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//Will not include invoice components like invoice items/payments, etc.</span>
<span class="n">String</span> <span class="n">invoicesFilter</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Invoices</span> <span class="n">invoices</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getInvoicesForAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                                      <span class="n">startDate</span><span class="o">,</span> 
                                                      <span class="n">endDate</span><span class="o">,</span>
                                                      <span class="n">withMigrationInvoices</span><span class="o">,</span>
                                                      <span class="n">unpaidInvoicesOnly</span><span class="o">,</span>
                                                      <span class="n">includeVoidedInvoices</span><span class="o">,</span>
                                                      <span class="n">includeInvoiceComponents</span><span class="o">,</span>
                                                      <span class="n">invoicesFilter</span><span class="o">,</span>
                                                      <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span>
                                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">invoices</span><span class="p">(</span><span class="n">with_items</span><span class="p">,</span>
                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_invoices_for_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="s2">"d981abbb-3622-487a-9564-d594c9d04f83"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="s2">"2013-08-01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="s2">"2013-08-01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="s2">"1563"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"balance"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="s2">"5f3b4e9c-66bd-4c5c-b84a-4ae951cc2f1d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="s2">"d981abbb-3622-487a-9564-d594c9d04f83"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"itemType"</span><span class="p">:</span><span class="s2">"EXTERNAL_CHARGE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Some description"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"startDate"</span><span class="p">:</span><span class="s2">"2013-08-01"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>false</td>
<td>no starting date</td>
<td>Return only invoices issued since this date.</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>date</td>
<td>false</td>
<td>no ending date</td>
<td>Return only invoices issued up to this date.</td>
</tr>
<tr>
<td><strong>withMigrationInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include migration invoices</td>
</tr>
<tr>
<td><strong>unpaidInvoicesOnly</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include unpaid invoices only</td>
</tr>
<tr>
<td><strong>includeVoidedInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include voided invoices</td>
</tr>
<tr>
<td><strong>includeInvoiceComponents</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include invoice components (like invoice items/payments, etc.)</td>
</tr>
<tr>
<td><strong>invoicesFilter</strong></td>
<td>string</td>
<td>false</td>
<td>empty</td>
<td>A comma separated list of invoiceIds to filter</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p>For information about migration and migration invoices, see the <a href="http://docs.killbill.io/latest/migration_guide.html">Migration Guide</a>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status of 200 and a list of invoice objects for this account.</p>
<h3 id='account-retrieve-paginated-account-invoices'>Retrieve paginated account invoices</h3>
<p>List the Invoices associated with this account in a paginated format.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/invoices/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/325fbe1c-7c35-4d96-a4e5-2cbaabe218c6/invoices/pagination"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"325fbe1c-7c35-4d96-a4e5-2cbaabe218c6"</span><span class="o">);</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">10L</span><span class="o">;</span>       
<span class="n">Invoices</span> <span class="n">invoices</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getInvoicesForAccountPaginated</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">offset</span><span class="o">,</span> <span class="n">limit</span><span class="o">,</span> <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">invoices</span><span class="p">(</span><span class="n">with_items</span><span class="p">,</span>
                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_invoices_for_account_paginated</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="s2">"d981abbb-3622-487a-9564-d594c9d04f83"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="s2">"2013-08-01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="s2">"2013-08-01"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="s2">"1563"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"balance"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="s2">"5f3b4e9c-66bd-4c5c-b84a-4ae951cc2f1d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="s2">"d981abbb-3622-487a-9564-d594c9d04f83"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"itemType"</span><span class="p">:</span><span class="s2">"EXTERNAL_CHARGE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Some description"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"startDate"</span><span class="p">:</span><span class="s2">"2013-08-01"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>false</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>false</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p>For information about migration and migration invoices, see the <a href="http://docs.killbill.io/latest/migration_guide.html">Migration Guide</a>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status of 200 and a list of invoice objects for this account.</p>
<h2 id='account-payment'>Payment</h2>
<p>These endpoints are used to make or manage payments associated with this account. See section <a href="#payment">Payment</a> for details on payments.</p>
<h3 id='account-trigger-a-payment-for-all-unpaid-invoices'>Trigger a payment for all unpaid invoices</h3>
<p>Initiate payments for any unpaid invoices. This API allows you to make a series of payment calls, one against each unpaid invoice, using a specific payment method.</p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL for fetching the paid invoices. If no payments were made, returns a 204 status code.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/invoicePayments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/invoicePayments?paymentMethodId=f835c556-0694-4883-b4c1-d1b6e308409b"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e011caa5-ba35-4ac6-81cb-63b4f08122dc"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">externalPayment</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will use a external payment method</span>
<span class="n">BigDecimal</span> <span class="n">paymentAmount</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">payAllInvoices</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                          <span class="n">paymentMethodId</span><span class="o">,</span> 
                          <span class="n">externalPayment</span><span class="o">,</span> 
                          <span class="n">paymentAmount</span><span class="o">,</span> 
                          <span class="n">targetDate</span><span class="o">,</span>
                          <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_payment</span>                  <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">account_id</span>       <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">purchased_amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">external_payment</span>  <span class="o">=</span> <span class="kp">true</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">target_date</span>       <span class="o">=</span> <span class="kp">nil</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">bulk_create</span><span class="p">(</span><span class="n">external_payment</span><span class="p">,</span>
                            <span class="n">payment_method_id</span><span class="p">,</span>
                            <span class="n">target_date</span><span class="p">,</span>
                            <span class="n">user</span><span class="p">,</span>
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span>
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">pay_all_invoices</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                            <span class="n">created_by</span><span class="p">,</span>
                            <span class="n">api_key</span><span class="p">,</span> 
                            <span class="n">api_secret</span><span class="p">,</span> 
                            <span class="n">external_payment</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                            <span class="n">payment_method_id</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                            <span class="n">target_date</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>false</td>
<td>default payment method</td>
<td>Payment method id</td>
</tr>
<tr>
<td><strong>externalPayment</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true if you use a external payment method.</td>
</tr>
<tr>
<td><strong>paymentAmount</strong></td>
<td>string</td>
<td>false</td>
<td>total balance</td>
<td>Total payment amount</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>false</td>
<td>current date</td>
<td>Date for which payment should be made</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 without any data.</p>
<h3 id='account-retrieve-account-invoice-payments'>Retrieve account invoice payments</h3>
<p>Retrieve a list of payments made against invoices for this account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/invoicePayments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/invoicePayments"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e011caa5-ba35-4ac6-81cb-63b4f08122dc"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">InvoicePayments</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getInvoicePayments</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                       <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span><span class="s1">'NONE'</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_attempts</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">account</span><span class="p">.</span><span class="nf">invoice_payments</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span>
                         <span class="n">with_plugin_info</span><span class="p">,</span>
                         <span class="n">with_attempts</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'110952d7-1b7e-482c-b6bb-103e46794927'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_invoice_payments</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"targetInvoiceId"</span><span class="p">:</span><span class="s2">"d1d6e8d8-c476-4b53-badf-c23f78c02c09"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="s2">"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="s2">"319"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="s2">"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="s2">"6c064894-60cb-4d7e-a679-7b2464522968"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactions"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="s2">"91c7363c-76b9-48f5-aafa-f098d4470a2a"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="s2">"91c7363c-76b9-48f5-aafa-f098d4470a2a"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="s2">"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="s2">"3f84661c-4fb7-42ac-8a02-3e8f48840e51"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="s2">"PURCHASE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="s2">"2013-08-01T06:00:01.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of invoice payment objects.</p>
<h3 id='account-retrieve-account-payments'>Retrieve account payments</h3>
<p>Retrieve a list of payments made for this account. Payments are listed independent of any invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/payments"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e0fe95af-7d59-4b70-8252-165e1840410c"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payments</span> <span class="n">payments</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getPaymentsForAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                                     <span class="n">withAttempts</span><span class="o">,</span>
                                                     <span class="n">withPluginInfo</span><span class="o">,</span>
                                                     <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">payments</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_payments_for_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="s2">"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="s2">"325"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="s2">"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="s2">"6041ffab-ae5f-45d3-bdf8-ce8cbfa5fd5c"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactions"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="s2">"be9dceca-9c5d-4038-818c-57e6fccfbe92"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="s2">"be9dceca-9c5d-4038-818c-57e6fccfbe92"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="s2">"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="s2">"b83132eb-1bf9-4a02-8572-376e4b1f06c9"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="s2">"PURCHASE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="s2">"2013-08-01T06:00:02.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="mf">50.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:[</span><span class="w">

            </span><span class="p">]</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment objects.</p>
<h3 id='account-trigger-a-payment-authorization-purchase-or-credit'>Trigger a payment (authorization, purchase or credit)</h3>
<p>This endpoint is part of the raw payment APIs, unreleated to subscriptions and invoices. It simply triggers
a payment transaction against a particular payment gateway through the Kill Bill core and through the plugin
communicating with the payment gateway. The transaction could be an authorization, a purchase, or a credit.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "transactionType": "AUTHORIZE", "amount": 0}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/payments?paymentMethodId=c02fa9b0-ae95-42ae-9010-bc11cb160947"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f4087a76-9f8a-4893-abbf-c5bb69975d1b"</span><span class="o">);</span>

<span class="n">PaymentTransaction</span> <span class="n">authTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">account</span><span class="o">.</span><span class="na">getCurrency</span><span class="o">());</span>

<span class="c1">// TransactionType could be 'AUTHORIZE', 'PURCHASE' or 'CREDIT'</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="n">TransactionType</span><span class="o">.</span><span class="na">AUTHORIZE</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1d55ed5f-deea-4109-98b0-beb13a242f7c"</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">processPayment</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                            <span class="n">authTransaction</span><span class="o">,</span> 
                                            <span class="n">paymentMethodId</span><span class="o">,</span> 
                                            <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span>
                                            <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">payment_method_id</span> <span class="o">=</span> <span class="n">payment_method</span><span class="p">.</span><span class="nf">payment_method_id</span>
<span class="n">refresh_options</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="c1"># Authorization</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">auth</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">account_id</span><span class="p">,</span>
                 <span class="n">payment_method_id</span><span class="p">,</span> 
                 <span class="n">user</span><span class="p">,</span> 
                 <span class="n">reason</span><span class="p">,</span> 
                 <span class="n">comment</span><span class="p">,</span> 
                 <span class="n">options</span><span class="p">,</span> 
                 <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Purchase</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">purchase</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">account_id</span><span class="p">,</span>
                     <span class="n">payment_method_id</span><span class="p">,</span> 
                     <span class="n">user</span><span class="p">,</span> 
                     <span class="n">reason</span><span class="p">,</span> 
                     <span class="n">comment</span><span class="p">,</span> 
                     <span class="n">options</span><span class="p">,</span> 
                     <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Credit</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">credit</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">account_id</span><span class="p">,</span>
                   <span class="n">payment_method_id</span><span class="p">,</span> 
                   <span class="n">user</span><span class="p">,</span> 
                   <span class="n">reason</span><span class="p">,</span> 
                   <span class="n">comment</span><span class="p">,</span> 
                   <span class="n">options</span><span class="p">,</span> 
                   <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'80c7b386-97b2-424c-bb4e-0017f92bc6eb'</span>

<span class="c"># transaction_type could be 'AUTHORIZE', 'PURCHASE' or 'CREDIT'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">transaction_type</span><span class="o">=</span><span class="s">'AUTHORIZE'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">process_payment</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                           <span class="n">body</span><span class="p">,</span> 
                           <span class="n">created_by</span><span class="p">,</span> 
                           <span class="n">api_key</span><span class="p">,</span> 
                           <span class="n">api_secret</span><span class="p">,</span> 
                           <span class="n">payment_method_id</span><span class="o">=</span><span class="n">payment_method_id</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body is a JSON string representing the payment transaction. See section <a href="#payment-transaction">Payment Transaction</a> for details on payment transactions.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>false</td>
<td>default payment method</td>
<td>payment method ID to use, if not default method</td>
</tr>
<tr>
<td><strong>controlPluginName</strong></td>
<td>array of strings</td>
<td>false</td>
<td>omit</td>
<td>list of control plugins, if any</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>omit</td>
<td>list of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL for the payment object, including the generated <code>paymentId</code>.</p>
<h3 id='account-trigger-a-payment-authorization-purchase-or-credit-using-the-account-external-key'>Trigger a payment (authorization, purchase or credit) using the account external key</h3>
<p>This endpoint performs the same actions as the previous one, but the account is identified by its external key. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "transactionType": "AUTHORIZE", "amount": 0}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/payments?externalKey=2ad52f53-85ae-408a-9879-32a7e59dd03d&amp;paymentMethodId=c02fa9b0-ae95-42ae-9010-bc11cb160947"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"ad70ffb1-3355-418a-a457-6d8d80696d02"</span><span class="o">;</span>
<span class="n">PaymentTransaction</span> <span class="n">authTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span><span class="c1">//use currency associated with Account</span>

<span class="c1">// TransactionType could be 'AUTHORIZE', 'PURCHASE' or 'CREDIT'</span>
<span class="n">authTransaction</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="n">TransactionType</span><span class="o">.</span><span class="na">AUTHORIZE</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"c6bd413e-268e-4cc8-afb0-16b2dec3ffa5"</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">processPaymentByExternalKey</span><span class="o">(</span><span class="n">authTransaction</span><span class="o">,</span>
                                                         <span class="n">externalKey</span><span class="o">,</span> 
                                                          <span class="n">paymentMethodId</span><span class="o">,</span> 
                                                          <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span>
                                                          <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s1">'132d59c0-8c28-4115-947d-f57d430bc458'</span>
<span class="n">refresh_options</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="c1"># Authorization</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">auth_by_external_key</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">external_key</span><span class="p">,</span>
                                 <span class="n">payment_method_id</span><span class="p">,</span> 
                                 <span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span> 
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">,</span> 
                                 <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Purchase</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">purchase_by_external_key</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">external_key</span><span class="p">,</span>
                                     <span class="n">payment_method_id</span><span class="p">,</span> 
                                     <span class="n">user</span><span class="p">,</span> 
                                     <span class="n">reason</span><span class="p">,</span> 
                                     <span class="n">comment</span><span class="p">,</span> 
                                     <span class="n">options</span><span class="p">,</span> 
                                     <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Credit</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">credit_by_external_key</span><span class="p">(</span><span class="n">account</span><span class="p">.</span><span class="nf">external_key</span><span class="p">,</span>
                                   <span class="n">payment_method_id</span><span class="p">,</span> 
                                   <span class="n">user</span><span class="p">,</span> 
                                   <span class="n">reason</span><span class="p">,</span> 
                                   <span class="n">comment</span><span class="p">,</span> 
                                   <span class="n">options</span><span class="p">,</span> 
                                   <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'80c7b386-97b2-424c-bb4e-0017f92bc6eb'</span>

<span class="c"># transaction_type could be 'AUTHORIZE', 'PURCHASE' or 'CREDIT'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">transaction_type</span><span class="o">=</span><span class="s">'AUTHORIZE'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">process_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                           <span class="n">external_key</span><span class="p">,</span>
                                           <span class="n">created_by</span><span class="p">,</span>
                                           <span class="n">api_key</span><span class="p">,</span>
                                           <span class="n">api_secret</span><span class="p">,</span>
                                           <span class="n">payment_method_id</span><span class="o">=</span><span class="n">payment_method_id</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body is a JSON string representing the payment transaction. See section <a href="#payment-transaction">Payment Transaction</a> for details on payment transactions.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>the account external key</td>
</tr>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>false</td>
<td>default payment method</td>
<td>payment method ID to use, if not default method</td>
</tr>
<tr>
<td><strong>controlPluginName</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of control plugins, if any</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL for the payment object, including the generated <code>paymentId</code>.</p>
<h2 id='account-payment-method'>Payment Method</h2>
<p>These endpoints allow you to manage the payment methods for an account. See section <a href="#payment-method">Payment Method</a> for details on payment methods.</p>
<h3 id='account-add-a-payment-method'>Add a payment method</h3>
<p>Add a payment method for a given <code>Account</code>. The payment method is represented by a plugin that must already be registered with KillBill.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/paymentMethods</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "externalKey": "ExternalKey", "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "pluginName": "__EXTERNAL_PAYMENT__"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/8785164f-b5d7-4da1-9495-33f5105e8d80/paymentMethods"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"6e5d0912-2e56-4511-af77-af054b616696"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"__EXTERNAL_PAYMENT__"</span><span class="o">;</span> 

<span class="n">PaymentMethod</span> <span class="n">paymentMethod</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentMethod</span><span class="o">();</span>
<span class="n">paymentMethod</span><span class="o">.</span><span class="na">setPluginName</span><span class="o">(</span><span class="n">pluginName</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="c1">//create a payment method</span>
<span class="n">PaymentMethod</span> <span class="n">paymentMethodPP</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">createPaymentMethod</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">paymentMethod</span><span class="o">,</span> <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

<span class="c1">//to create a payment method and set it as default use accountApi.createPaymentMethod(accountId, body, isDefault, payAllUnpaidInvoices, controlPluginName, pluginProperty, inputOptions);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">pm</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">new</span>
<span class="n">pm</span><span class="p">.</span><span class="nf">account_id</span>  <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">pm</span><span class="p">.</span><span class="nf">plugin_name</span> <span class="o">=</span> <span class="s1">'__EXTERNAL_PAYMENT__'</span>
<span class="n">pm</span><span class="p">.</span><span class="nf">plugin_info</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">is_default</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">pm</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">is_default</span><span class="p">,</span> 
          <span class="n">user</span><span class="p">,</span> 
          <span class="n">reason</span><span class="p">,</span> 
          <span class="n">comment</span><span class="p">,</span>
          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'059ecfb8-6b4d-4a89-9537-63a687e6cf10'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentMethod</span><span class="p">(</span><span class="n">external_key</span><span class="o">=</span><span class="s">'ExternalKey'</span><span class="p">,</span> <span class="n">plugin_name</span><span class="o">=</span><span class="s">'__EXTERNAL_PAYMENT__'</span><span class="p">,</span> <span class="n">plugin_info</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">create_payment_method</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                 <span class="n">body</span><span class="p">,</span> 
                                 <span class="n">created_by</span><span class="p">,</span> 
                                 <span class="n">api_key</span><span class="p">,</span> 
                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A payment method object specifying <code>accountId</code> and <code>pluginName</code> at the minimum. Please refer to the <a href="https://killbill.github.io/slate/#payment-method-payment-method-resource">payment method resource</a> section for more details about the fields.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>isDefault</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to set new payment as default.</td>
</tr>
<tr>
<td><strong>payAllUnpaidInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to pay all unpaid invoices.</td>
</tr>
<tr>
<td><strong>controlPluginName</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of control plugins, if any</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL for the payment method, including the generated <code>paymentMethodId</code>.</p>
<h3 id='account-retrieve-account-payment-methods'>Retrieve account payment methods</h3>
<p>This API retrieves a list of the payment methods that are associated with this account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/paymentMethods</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/paymentMethods"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"faf239a5-456a-4eb9-aef9-8d2254ef57dc"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">PaymentMethod</span><span class="o">&gt;</span> <span class="n">paymentMethods</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getPaymentMethodsForAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                            <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">find_all_by_account_id</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                      <span class="n">with_plugin_info</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_payment_methods_for_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f835c556-0694-4883-b4c1-d1b6e308409b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unknown"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isDefault"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__EXTERNAL_PAYMENT__"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginInfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Request Body</strong></p>

<p>The request body is a JSON string representing any plugin specific payment information (payment token for exampe).</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include plugin info.</td>
</tr>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to include deleted payment methods</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>list of plugin properties, if any</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment method objects.</p>
<h3 id='account-set-the-default-payment-method'>Set the default payment method</h3>
<p>This API sets an existing payment method to be the default payment method.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/paymentMethods/{paymentMethodId}/setDefault</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/paymentMethods/f835c556-0694-4883-b4c1-d1b6e308409b/setDefault"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"faf239a5-456a-4eb9-aef9-8d2254ef57dc"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"faf239a5-456a-4eb9-aef9-8d2254ef57dc"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">setDefaultPaymentMethod</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                   <span class="n">paymentMethodId</span><span class="o">,</span> 
                                   <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">set_default</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span>
                                                 <span class="n">account_id</span><span class="p">,</span>
                                                 <span class="n">user</span><span class="p">,</span>
                                                 <span class="n">reason</span><span class="p">,</span>
                                                 <span class="n">comment</span><span class="p">,</span>
                                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4f124c0d-cee7-49b1-a181-3b0738c685d7'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">set_default_payment_method</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                      <span class="n">payment_method_id</span><span class="p">,</span> 
                                      <span class="n">created_by</span><span class="p">,</span> 
                                      <span class="n">api_key</span><span class="p">,</span> 
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payAllUnpaidInvoices</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>Choose true to pay all unpaid invoices</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>List of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='account-refresh-account-payment-methods'>Refresh account payment methods</h3>
<p>This endpoint is for a rare use case where information for a particular payment method is stored inside the third party gateway, and both Kill Bill core and its payment plugin need to have their view updated.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/paymentMethods/refresh</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/paymentMethods/refresh"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"faf239a5-456a-4eb9-aef9-8d2254ef57dc"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="s">"__EXTERNAL_PAYMENT__"</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">refreshPaymentMethods</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                 <span class="n">pluginName</span><span class="o">,</span> 
                                 <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">refresh</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                             <span class="n">user</span><span class="p">,</span> 
                                             <span class="n">reason</span><span class="p">,</span> 
                                             <span class="n">comment</span><span class="p">,</span> 
                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">refresh_payment_methods</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                   <span class="n">created_by</span><span class="p">,</span>
                                   <span class="n">api_key</span><span class="p">,</span>
                                   <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>PluginName</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>List of plugins, if any</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>List of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-overdue'>Overdue</h2>
<p>The system can be configured to move an <code>Account</code> through various <a href="http://docs.killbill.io/latest/userguide_subscription.html#components-overdue">overdue</a> (a.k.a. dunning) states when invoices are left unpaid. </p>
<h3 id='account-retrieve-overdue-state-for-account'>Retrieve overdue state for account</h3>
<p>Retrieve the current overdue/dunning state for an <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/overdue</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/overdue"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d3a82897-ae72-4a2e-9bca-e3c1fe087f84"</span><span class="o">);</span>

<span class="n">OverdueState</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getOverdueAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">overdue</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'82ecbf80-ddd2-4208-92be-2d3b2b7fc266'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_overdue_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__KILLBILL__CLEAR__OVERDUE_STATE__"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"daysBetweenPaymentRetries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="mi">8</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"isDisableEntitlementAndChangesBlocked"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isBlockChanges"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isClearState"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reevaluationIntervalDays"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an overdue state object.</p>
<h2 id='account-blocking-state'>Blocking State</h2>
<p>As part of the entitlement features, Kill Bill provides an abstraction to include <code>BlockingState</code> events into the per <code>Account</code> event stream. The main idea is to allow billing to be modified, such as by pausing a specific subscription or all subscriptions, and to allow modification of the entitlement state, such as by disabling the service associated with a given subscription. The <a href="http://docs.killbill.io/latest/entitlement_subsystem.html">entitlement internal documentation</a> provides some overview of the mechanism. Blocking states are mostly manipulated from inside Kill Bill core, but the functionality is exposed through the API, with the caveat that it is an advanced feature and can lead to unintented behavior if not used properly.</p>

<p>Note that the term <code>BlockingState</code> seems to indicate that something will be blocked, and this can certainly be the case, but not necessarily; actually the attributes
<code>isBlockChange</code>, <code>isBlockEntitlement</code>, <code>isBlockBilling</code> will drive this behavior. These flags are always considered on a per blocking state <code>service</code>, regardless of the state name. For instance, consider the following two scenarios:</p>

<ul>
<li>Scenario 1

<ul>
<li>T1: Service A, State S1, isBlockBilling=true, isBlockEntitlement=false</li>
<li>T2: Service A, State S1, isBlockBilling=false, isBlockEntitlement=true</li>
<li>T3: Service A, State S2, isBlockBilling=false, isBlockEntitlement=false</li>
<li>T4: Service A, State S2, isBlockBilling=false, isBlockEntitlement=false</li>
</ul></li>
<li>Scenario 2

<ul>
<li>T1: Service A, State S1, isBlockBilling=true, isBlockEntitlement=false</li>
<li>T2: Service B, State S1, isBlockBilling=false, isBlockEntitlement=true</li>
<li>T3: Service A, State S2, isBlockBilling=false, isBlockEntitlement=false</li>
<li>T4: Service B, State S2, isBlockBilling=false, isBlockEntitlement=false</li>
</ul></li>
</ul>

<p>In Scenario 1, billing is blocked between T1 and T2, while entitlement is blocked between T2 and T3. In Scenario 2 however, billing is blocked between T1 and T3, while entitlement is blocked between T2 and T4.</p>
<h3 id='account-blocking-state-resource'>Blocking State Resource</h3>
<p>A Blocking State Resource represents a blocking state. It has the following attributes:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>blockedId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this blocking state id</td>
</tr>
<tr>
<td><strong>stateName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the blocking state</td>
</tr>
<tr>
<td><strong>service</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the service that inserts the blocking state</td>
</tr>
<tr>
<td><strong>isBlockChange</strong></td>
<td>boolean</td>
<td>user</td>
<td>Boolean flag that indicates whether changes should be blocked</td>
</tr>
<tr>
<td><strong>isBlockEntitlement</strong></td>
<td>boolean</td>
<td>user</td>
<td>Boolean flag that indicates whether the entitlement should be blocked</td>
</tr>
<tr>
<td><strong>isBlockBilling</strong></td>
<td>boolean</td>
<td>user</td>
<td>Boolean flag that indicates whether billing should be blocked</td>
</tr>
<tr>
<td><strong>effectiveDate</strong></td>
<td>DateTime</td>
<td>user</td>
<td>DateTime that the change should be effective</td>
</tr>
<tr>
<td><strong>type</strong></td>
<td>string</td>
<td>user</td>
<td>Type of blocking state. Possible values are SUBSCRIPTION, SUBSCRIPTION_BUNDLE and ACCOUNT</td>
</tr>
</tbody></table>
<h3 id='account-block-an-account'>Block an account</h3>
<p>Add a <code>BlockingState</code> event for this account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/block</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "stateName": "STATE1", "service": "ServiceStateService", "isBlockChange": false, "isBlockEntitlement": false, "isBlockBilling": false }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/10483c3a-3394-4667-8519-0d849e9a8ec2/block"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">BlockingState</span> <span class="n">blockingState</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BlockingState</span><span class="o">();</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setStateName</span><span class="o">(</span><span class="s">"STATE1"</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setService</span><span class="o">(</span><span class="s">"ServiceStateService"</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockChange</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockBilling</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockEntitlement</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-08-01"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyMap</span><span class="o">();</span>

<span class="n">BlockingStates</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">addAccountBlockingState</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                                           <span class="n">blockingState</span><span class="o">,</span>
                                                           <span class="n">requestedDate</span><span class="o">,</span>
                                                           <span class="n">pluginProperty</span><span class="o">,</span>
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">state_name</span> <span class="o">=</span> <span class="s2">"STATE1"</span>
<span class="n">service</span> <span class="o">=</span> <span class="s2">"ServiceStateService"</span>
<span class="n">block_change</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_entitlement</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_billing</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="n">account</span><span class="p">.</span><span class="nf">set_blocking_state</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span>
                           <span class="n">service</span><span class="p">,</span>
                           <span class="n">block_change</span><span class="p">,</span> 
                           <span class="n">block_entitlement</span><span class="p">,</span>
                           <span class="n">block_billing</span><span class="p">,</span> 
                           <span class="n">requested_date</span><span class="p">,</span>
                           <span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span> 
                           <span class="n">comment</span><span class="p">,</span>
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">BlockingState</span><span class="p">(</span><span class="n">state_name</span><span class="o">=</span><span class="s">'STATE1'</span><span class="p">,</span>
                     <span class="n">service</span><span class="o">=</span><span class="s">'ServiceStateService'</span><span class="p">,</span>
                     <span class="n">is_block_change</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">is_block_entitlement</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">is_block_billing</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">add_account_blocking_state</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                      <span class="n">body</span><span class="p">,</span> 
                                      <span class="n">created_by</span><span class="p">,</span> 
                                      <span class="n">api_key</span><span class="p">,</span> 
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing the blocking state object to be added. For details on this resource see <a href="#account-blocking-state-resource">blocking state</a>.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>false</td>
<td>block immediately</td>
<td>Date/DateTime to block an account in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format.</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>false</td>
<td>empty list</td>
<td>List of plugin properties, if any</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL for retrieving blocking states for the account.</p>
<h3 id='account-retrieve-blocking-states-for-account'>Retrieve blocking states for account</h3>
<p>Retrieves the <code>BlockingState</code> associated with a given resource.
<code>BlockingState</code> can be set at the <code>Account</code>, <code>Bundle</code> or <code>Subscription</code> level.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/block</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/10483c3a-3394-4667-8519-0d849e9a8ec2/block?blockingStateTypes=ACCOUNT"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ee6835f0-8347-42d3-958c-9a939383ba28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">BlockingStateType</span><span class="o">&gt;</span> <span class="n">blockingStateTypes</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">BlockingStateType</span><span class="o">.</span><span class="na">SUBSCRIPTION_BUNDLE</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">blockingStateSvcs</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"service"</span><span class="o">);</span>

<span class="n">BlockingStates</span> <span class="n">blockingStates</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getBlockingStates</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                             <span class="n">blockingStateTypes</span><span class="o">,</span> 
                                                             <span class="n">blockingStateSvcs</span><span class="o">,</span> 
                                                             <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">blocking_state_types</span> <span class="o">=</span> <span class="s1">'ACCOUNT'</span>
<span class="n">blocking_state_svcs</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">blocking_states</span><span class="p">(</span><span class="n">blocking_state_types</span><span class="p">,</span>
                        <span class="n">blocking_state_svcs</span><span class="p">,</span> 
                        <span class="n">audit</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_blocking_states</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"blockedId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10483c3a-3394-4667-8519-0d849e9a8ec2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"stateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATE1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ServiceStateService"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isBlockChange"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isBlockEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isBlockBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T14:45:37.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>blockingStateTypes</strong></td>
<td>array of strings</td>
<td>false</td>
<td>retrieve all</td>
<td>blocking state types to retrieve: &quot;SUBSCRIPTION&quot;, &quot;SUBSCRIPTION_BUNDLE&quot;, &quot;ACCOUNT&quot;</td>
</tr>
<tr>
<td><strong>blockingStateSvcs</strong></td>
<td>array of strings</td>
<td>false</td>
<td>retrieve all</td>
<td>filter list for blocking state services</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a blocking state object.</p>
<h2 id='account-hierarchical-accounts'>Hierarchical Accounts</h2>
<p>When using the <a href="http://docs.killbill.io/latest/ha.html">hierarchical account</a> feature, this API allows you to retrieve
all the child <code>Accounts</code> for a given parent <code>Account</code>.</p>
<h3 id='account-list-child-accounts'>List child accounts</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/children</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/children"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">parentAccountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ee6835f0-8347-42d3-958c-9a939383ba28"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">accountWithBalance</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will include account balance</span>
<span class="n">Boolean</span> <span class="n">accountWithBalanceAndCBA</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will include account balance and CBA info</span>

<span class="n">Accounts</span> <span class="n">childrenAccounts</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getChildrenAccounts</span><span class="o">(</span><span class="n">parentAccountId</span><span class="o">,</span> 
                                                           <span class="n">accountWithBalance</span><span class="o">,</span> 
                                                           <span class="n">accountWithBalanceAndCBA</span><span class="o">,</span> 
                                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">with_balance</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_balance_and_cba</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">childrens_account</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Account</span><span class="p">.</span><span class="nf">children</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                            <span class="n">with_balance</span><span class="p">,</span> 
                                                            <span class="n">with_balance_and_cba</span><span class="p">,</span> 
                                                            <span class="n">audit</span><span class="p">,</span> 
                                                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_children_accounts</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"e19c6ab3-1a21-42f2-8ea2-9859c082b093"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="s2">"1522172592-516014"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"John@laposte.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="s2">"01ab962b-3c66-4b17-b391-ffcc9fe51884"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isPaymentDelegatedToParent"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address1"</span><span class="p">:</span><span class="s2">"7, yoyo road"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="s2">"Apt 5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="s2">"94105"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"company"</span><span class="p">:</span><span class="s2">"Unemployed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"San Francisco"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"California"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="s2">"fr_FR"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountWithBalance</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>if true, returns <code>accountBalance</code> info</td>
</tr>
<tr>
<td><strong>accountWithBalanceAndCBA</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>if true, returns <code>accountBalance</code> and <code>accountCBA</code> info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of child account objects.</p>
<h3 id='account-transfer-a-given-child-credit-to-the-parent-level'>Transfer a given child credit to the parent level</h3>
<p>In the context of the Hierarchical Account feature, this allows moving the potential child credit to the parent level.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{childAccountId}/transferCredit</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/transferCredit"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">childAccountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">transferChildCreditToParent</span><span class="o">(</span><span class="n">childAccountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">transfer_child_credit</span><span class="p">(</span><span class="n">user</span><span class="p">,</span>
                              <span class="n">reason</span><span class="p">,</span>
                              <span class="n">comment</span><span class="p">,</span>
                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">child_account_id</span> <span class="o">=</span> <span class="s">'88a5987a-1e1c-47c5-ba95-34ef14db3d46'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">transfer_child_credit_to_parent</span><span class="p">(</span><span class="n">child_account_id</span><span class="p">,</span>
                                           <span class="n">created_by</span><span class="p">,</span> 
                                           <span class="n">api_key</span><span class="p">,</span> 
                                           <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to the customer <code>Account</code>. For details on Custom Fields see <a href="#custom-field">Custom Field</a>.</p>
<h3 id='account-add-custom-fields-to-account'>Add custom fields to account</h3>
<p>Add custom fields to a given <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "objectType": "ACCOUNT", "name": "Test Custom Field", "value": "demo_test_value" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"15434b45-54c1-4a44-851c-b1f2f7a52f03"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">accountId</span><span class="o">,</span>
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">ACCOUNT</span><span class="o">,</span>
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">createAccountCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'ACCOUNT'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                         <span class="n">user</span><span class="p">,</span>
                         <span class="n">reason</span><span class="p">,</span>
                         <span class="n">comment</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">create_account_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects giving the name and value of the custom field, or fields, to be added. For example:</p>

<p>[ { &quot;name&quot;: &quot;CF1&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL to retrieve the custom fields associated with the account.</p>
<h3 id='account-retrieve-all-custom-fields'>Retrieve all custom fields</h3>
<p>Retrieves all custom fields attached to various resources owned by the <code>Account</code>.
This endpoint allows you to retrieve all custom fields, or to filter them by type, e.g <code>Subscription</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/allCustomFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/allCustomFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b38de59f-7dd0-447a-a508-9b022b808250"</span><span class="o">);</span>

<span class="n">CustomFields</span> <span class="n">allAccountCustomFields</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAllCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                    <span class="n">ObjectType</span><span class="o">.</span><span class="na">ACCOUNT</span><span class="o">,</span> 
                                                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_all_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                 <span class="n">api_key</span><span class="p">,</span> 
                                 <span class="n">api_secret</span><span class="p">,</span> 
                                 <span class="n">object_type</span><span class="o">=</span><span class="s">'ACCOUNT'</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">object_type</span> <span class="o">=</span> <span class="s1">'ACCOUNT'</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">all_custom_fields</span><span class="p">(</span><span class="n">object_type</span><span class="p">,</span>
                          <span class="n">audit</span><span class="p">,</span> 
                          <span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>false</td>
<td>retrieve all</td>
<td>type of object</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p>Possible values for <strong>objectType</strong> are ACCOUNT, ACCOUNT_EMAIL, BLOCKING_STATES, BUNDLE, CUSTOM_FIELD, INVOICE, PAYMENT, TRANSACTION, INVOICE_ITEM, INVOICE_PAYMENT, SUBSCRIPTION, SUBSCRIPTION_EVENT, SERVICE_BROADCAST, PAYMENT_ATTEMPT, PAYMENT_METHOD, TAG, TAG_DEFINITION, TENANT, or TENANT_KVS.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of custom field objects</p>
<h3 id='account-retrieve-account-custom-fields'>Retrieve account custom fields</h3>
<p>Retrieve the custom fields associated with an account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">accountCustomFields</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                                                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects</p>
<h3 id='account-modify-custom-fields-for-an-account'>Modify custom fields for an account</h3>
<p>Modify the custom fields associated with an account. Note that it is not possible to modify the name of a custom field, it is only possible to modify its value.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "customFieldId": "48e24ca0-1cfe-41c3-85e7-0ff0d51679fe", "objectId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "objectType": "ACCOUNT", "name": "Test Custom Field", "value": "test_modify_value", "auditLogs": [] }]'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>
<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">customFieldModified</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">modifyAccountCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">account</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">account</span><span class="o">.</span><span class="n">modify_account_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                     <span class="p">[</span><span class="n">body</span><span class="p">],</span> 
                                     <span class="n">created_by</span><span class="p">,</span> 
                                     <span class="n">api_key</span><span class="p">,</span> 
                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects specifying the id and the new value for the custom fields to be modified. For example:</p>

<p>[ { &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p>Although the <code>fieldName</code> and <code>objectType</code> can be specified in the request body, these cannot be modified, only the field value can be modified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, a status code of 204 and an empty body.</p>
<h3 id='account-remove-custom-fields-from-account'>Remove custom fields from account</h3>
<p>Remove a specified set of custom fields from the account</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/customField</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/customFields?customField=9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">UUID</span><span class="o">&gt;</span> <span class="n">customFieldsList</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">accountApi</span><span class="o">.</span><span class="na">deleteAccountCustomFields</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                     <span class="n">customFieldsList</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">account</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span> 
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">account</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'8992e146-bfa1-4126-a045-98b844a4adcb'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">custom_field</span> <span class="o">=</span> <span class="p">[</span><span class="n">custom_field_id</span><span class="p">]</span>

<span class="n">account</span><span class="o">.</span><span class="n">delete_account_custom_fields</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                     <span class="n">created_by</span><span class="p">,</span>
                                     <span class="n">api_key</span><span class="p">,</span>
                                     <span class="n">api_secret</span><span class="p">,</span>
                                     <span class="n">custom_field</span><span class="o">=</span><span class="n">custom_field</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>Custom field object ID that should be deleted. Multiple custom fields can be deleted by specifying a separate <strong>customField</strong> parameter corresponding to each field</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-tags'>Tags</h2>
<p>While custom fields allow you to attach <code>{key, value}</code> pairs to various objects in the system, single values can also be
attached to various objects in the system by using tags. Tags come in 2 different categories:</p>

<ul>
<li><code>System Tags</code>: These are interpreted by the system to change its behavior. Certain tags can only be attached to specific resource types -- e.g <code>Account</code>. In order to distinguish them from the user tags, the system tags are uppercase symbols.</li>
<li><code>User Tags</code>: These are <strong>not</strong> interpreted by the system and can be anything as long as it a lowercase symbol. Foe example, <code>good_customer</code> could be a tag that can be attached to a customer <code>Account</code>. </li>
</ul>

<p>The APIs to manage tags rely on having an existing tag definition and supplying the <code>tagDefinitionId</code> in the calls. Therefore, for user tags, one should first create a <code>TagDefinition</code>.</p>

<p>To create user tags, one must first create the tag definitions. For instructions see section <a href="#tag-definition">Tag definition</a>.</p>
<h3 id='account-add-tags-to-account'>Add tags to account</h3>
<p>This API adds one or more tags to an account. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ "00000000-0000-0000-0000-000000000002"]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/tags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f4087a76-9f8a-4893-abbf-c5bb69975d1b"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">autoPayOffTagId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">createAccountTags</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                           <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">autoPayOffTagId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                <span class="n">user</span><span class="p">,</span>
                <span class="n">reason</span><span class="p">,</span>
                <span class="n">comment</span><span class="p">,</span>
                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000002"</span><span class="p">]</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">create_account_tags</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                               <span class="n">tag</span><span class="p">,</span> 
                               <span class="n">created_by</span><span class="p">,</span> 
                               <span class="n">api_key</span><span class="p">,</span> 
                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more tag definition ids to be added as user tags.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL to retrieve the tags associated with the account.</p>
<h3 id='account-retrieve-all-tags'>Retrieve all tags</h3>
<p>Retrieves all tags attached to resources owned by this <code>Account</code>. This API allows you to retrieve all tags, or only tags attached to a specified resource type. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/allTags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/allTags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ee6835f0-8347-42d3-958c-9a939383ba28"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">allAccountTags</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAllTags</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                            <span class="n">ObjectType</span><span class="o">.</span><span class="na">ACCOUNT</span><span class="o">,</span>
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'07c0cef4-41c5-4606-b2cd-661332cdd41c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_tags</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">object_type</span> <span class="o">=</span> <span class="s1">'ACCOUNT'</span>
<span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">all_tags</span><span class="p">(</span><span class="n">object_type</span><span class="p">,</span> 
                 <span class="n">included_deleted</span><span class="p">,</span> 
                 <span class="n">audit</span><span class="p">,</span> 
                 <span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0f7c5837-1ed9-41ab-b391-9ef7ea4ab049"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000002"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTO_INVOICING_OFF"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>false</td>
<td>all object types</td>
<td>choose type of object</td>
</tr>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>choose true to include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p>Possible values for <strong>objectType</strong> are ACCOUNT, ACCOUNT_EMAIL, BLOCKING_STATES, BUNDLE, CUSTOM_FIELD, INVOICE, PAYMENT, TRANSACTION, INVOICE_ITEM, INVOICE_PAYMENT, SUBSCRIPTION, SUBSCRIPTION_EVENT, SERVICE_BROADCAST, PAYMENT_ATTEMPT, PAYMENT_METHOD, TAG, TAG_DEFINITION, TENANT, or TENANT_KVS.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='account-retrieve-account-tags'>Retrieve account tags</h3>
<p>Retrieve all tags attached to this account itself.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/tags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags1</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountTags</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                            <span class="n">includedDeleted</span><span class="o">,</span> 
                                            <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
             <span class="n">audit</span><span class="p">,</span>
             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_tags</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0f7c5837-1ed9-41ab-b391-9ef7ea4ab049"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000002"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTO_INVOICING_OFF"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>false</td>
<td>false</td>
<td>choose true to include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='account-remove-tags-from-account'>Remove tags from account</h3>
<p>This API removes a list of tags attached to an account.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/tags?tagDef=00000000-0000-0000-0000-000000000002"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">autoPayOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">accountApi</span><span class="o">.</span><span class="na">deleteAccountTags</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                             <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">autoPayOffId</span><span class="o">),</span> 
                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                   <span class="n">user</span><span class="p">,</span>
                   <span class="n">reason</span><span class="p">,</span>
                   <span class="n">comment</span><span class="p">,</span>
                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'b0da8392-49ba-43f2-8fac-3f9f85b8ff61'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000002"</span><span class="p">]</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">delete_account_tags</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                               <span class="n">created_by</span><span class="p">,</span> 
                               <span class="n">api_key</span><span class="p">,</span> 
                               <span class="n">api_secret</span><span class="p">,</span> 
                               <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>true</td>
<td>none</td>
<td>A tag definition ID identifying the tag that should be removed. Multiple tags can be deleted by specifying a separate <strong>tagDef</strong> parameter corresponding to each tag.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='account-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='account-retrieve-audit-logs'>Retrieve audit logs</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to any resource associated with the specified account. History information (a copy of the full resource object) is not included.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/auditLogs</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/auditLogs"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e9432491-6558-4007-85ef-cdae171d240c"</span><span class="o">);</span>

<span class="n">AuditLogs</span> <span class="n">auditLogsJson</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountAuditLogs</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'4e4d8acd-c97d-447a-814b-28f995a9106c'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_audit_logs</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">audit</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T15:02:45.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bca75b40-ffa3-41f8-9fde-06f83ee303e8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T18:46:47.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a61a1e6-78f3-43d3-addf-e7ada180b23d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T18:48:37.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c41a04d-4037-4fa9-af71-dfe54af4d3ae"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T19:07:25.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c9b9ab11-14b1-41b5-8371-1c425f273336"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T19:26:46.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fd26b216-deb2-43d4-b748-dec8e9917ada"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T20:02:01.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48e24ca0-1cfe-41c3-85e7-0ff0d51679fe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0d5c8db7-974f-47e0-9332-5d9625f72155"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs.</p>
<h3 id='account-retrieve-account-audit-logs-with-history'>Retrieve account audit logs with history</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to the specified account itself. History information (a copy of the full account object) is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ecbff3be-3cbf-4e1d-ae05-d323d4597877"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">auditLogWithHistories</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountAuditLogsWithHistory</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_audit_logs_with_history</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">audit_logs_with_history</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T15:02:45.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bca75b40-ffa3-41f8-9fde-06f83ee303e8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T15:02:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T15:02:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@laposte.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstNameLength"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isPaymentDelegatedToParent"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"referenceTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T15:02:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"companyName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"stateOrProvince"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"migrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T18:46:47.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a61a1e6-78f3-43d3-addf-e7ada180b23d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T18:46:47.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T18:46:47.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@laposte.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Another Name"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstNameLength"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isPaymentDelegatedToParent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"referenceTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T15:02:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"companyName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"stateOrProvince"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"migrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T18:48:37.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c41a04d-4037-4fa9-af71-dfe54af4d3ae"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T18:48:37.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T18:48:37.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@laposte.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstNameLength"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isPaymentDelegatedToParent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"referenceTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T15:02:45.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"companyName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"stateOrProvince"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"migrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs.</p>
<h3 id='account-retrieve-account-email-audit-logs-with-history'>Retrieve account email audit logs with history</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified account email. History information (a copy of the full email object) is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/emails/{accountEmailId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/emails/aa2a5614-88d9-4ec3-a042-a4771bd66670/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"873c26ef-a3fa-4942-b2f5-549b51f20b1a"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">accountEmailId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f637441d-855e-4bf5-bac1-6426bdb116d6"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountEmailAuditLogsWithHistory</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                       <span class="n">accountEmailId</span><span class="o">,</span> 
                                                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span>
<span class="n">account_email_id</span> <span class="o">=</span> <span class="s">'bb390282-6757-4f4f-8dd5-456abd9f30b2'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_email_audit_logs_with_history</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                     <span class="n">account_email_id</span><span class="p">,</span>
                                                     <span class="n">api_key</span><span class="p">,</span>
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_email_id</span> <span class="o">=</span> <span class="s1">'a4627e89-a73b-4167-a7ba-92a2881eb3c4'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">email_audit_logs_with_history</span><span class="p">(</span><span class="n">account_email_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T15:13:22.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT_EMAIL"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aa2a5614-88d9-4ec3-a042-a4771bd66670"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"927546eb-3431-4bcf-8fcc-1787d2130772"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T15:13:22.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T15:13:22.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email@laposte.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT_EMAIL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT_EMAIL_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of account email audit records, including history (copies of the complete record).</p>
<h3 id='account-retrieve-blocking-state-audit-logs-with-history'>Retrieve blocking state audit logs with history</h3>
<p>Retrieves the audit logs for a specific blocking state, given the blocking state id. History records (blocking state objects) are included.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/block/{blockingId}/auditLogsWithHistory</code></p>

<p>See section <a href="#account-blocking-state">Account Blocking State</a> for an introduction to blocking states. </p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/block/763fd113-1b9b-4d0d-be01-6ee56d3879f5/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">blockingId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"0997b953-2b3a-4dc5-ad01-c38911662923"</span><span class="o">);</span>
<span class="n">AuditLogs</span> <span class="n">result</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getBlockingStateAuditLogsWithHistory</span><span class="o">(</span><span class="n">blockingId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLOCKING_STATES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"763fd113-1b9b-4d0d-be01-6ee56d3879f5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1326</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"blockableId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTION"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"blockChange"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"blockEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"blockBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLOCKING_STATES"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLOCKING_STATES"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of blocking state audit logs with history.</p>
<h3 id='account-retrieve-account-timeline'>Retrieve account timeline</h3>
<p>This API retrieves the chronological set of events that occurred concerning a specific <code>Account</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/accounts/{accountId}/timeline</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/timeline"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AccountApi</span> <span class="n">accountApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"16364ac4-2a77-4444-b2d8-e980c37a8954"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">parallel</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

<span class="n">AccountTimeline</span> <span class="n">timeline</span> <span class="o">=</span> <span class="n">accountApi</span><span class="o">.</span><span class="na">getAccountTimeline</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                                              <span class="n">parallel</span><span class="o">,</span>
                                              <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="n">account</span><span class="p">.</span><span class="nf">account_id</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'MINIMAL'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">AccountTimeline</span><span class="p">.</span><span class="nf">timeline</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                <span class="n">audit</span><span class="p">,</span>
                                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'43488882-1777-460c-bc32-e375e67d09cf'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_timeline</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"firstNameLength"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@laposte.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isPaymentDelegatedToParent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"referenceTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-17T15:02:45.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timeZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UTC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isMigrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountBalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountCBA"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bundles"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"invoices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a complete account record including: the account object; bundles with subscriptions and timelines giving all events; invoices; and payments including payment attempts.</p>
<h1 id='payment-method'>Payment Method</h1><h2 id='payment-method-payment-method-resource'>Payment Method Resource</h2>
<p>The <code>Payment Method</code> resource represents the payment methods associated with a customer <code>Account</code>. There are two parts to the state associated with this resource, a first generic set of attributes kept by Kill Bill core subsystem, and another set of attributes kept at the (payment) plugin level.</p>

<ul>
<li>The core Kill Bill attributes shown below mostly track the associated payment plugin that is used to interact with the payment gateway.</li>
<li>The plugin attributes are typically the details about such customer payment method: In the case of a credit card for instance, the plugin would keep track of things like <code>name</code>, <code>address</code>, <code>last4</code>, and <code>token</code>. Not only are such attributes dependent on the payment method, but they are also dependent on the third party payment gateway, and on the tokenization model, which is why they are kept by the plugin (internal tables), and not by the Kill Bill core payment subsystem.</li>
</ul>

<p>Kill Bill also supports a more advanced use case for payment routing, where the choice of the payment gateway is decided at run time
based on custom business rules. Additional information can be found in our <a href="http://docs.killbill.io/latest/userguide_payment.html">Payment Manual</a>.</p>

<p>The Kill Bill attributes are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this payment method</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key provided by the client</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the associated account</td>
</tr>
<tr>
<td><strong>isDefault</strong></td>
<td>boolean</td>
<td>user</td>
<td>Indicates whether this is the default payment method</td>
</tr>
<tr>
<td><strong>pluginName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the associated plugin.</td>
</tr>
<tr>
<td><strong>pluginInfo</strong></td>
<td>string</td>
<td>user</td>
<td>Plugin specific information, as required.</td>
</tr>
</tbody></table>

<p>All payment operations associated with this payment method will be delegated to the plugin specified by <strong>pluginName</strong>.</p>
<h2 id='payment-method-payment-methods'>Payment Methods</h2>
<p>Basic operations to retrieve, list, search and delete payment methods.</p>

<p>Note that the creation of a payment method needs to be done at the Account level using the <a href="https://killbill.github.io/slate/#account-add-a-payment-method">Add a payment method</a> endpoint. The <code>pluginName</code> attribute identifies the payment plugin that will be used by the system when this payment method is used for a payment. </p>
<h3 id='payment-method-retrieve-a-payment-method-by-id'>Retrieve a payment method by id</h3>
<p>Retrieve information on a payment method, given its payment method ID.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will include plugin info</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">PaymentMethod</span> <span class="n">paymentMethodJson</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethod</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                                    <span class="n">includedDeleted</span><span class="o">,</span> 
                                                                    <span class="n">withPluginInfo</span><span class="o">,</span> 
                                                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_method_id</span> <span class="o">=</span> <span class="s2">"6a0bf13e-d57f-4f79-84bd-3690135f1923"</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> 
                                                <span class="n">with_plugin_info</span><span class="p">,</span> 
                                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'0052cddd-0f61-4f68-b653-ca49b5d7f915'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">get_payment_method</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="s2">"coolPaymentMethod"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isDefault"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="s2">"__EXTERNAL_PAYMENT__"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginInfo"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted payment methods</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>If <strong>withPluginInfo</strong> is set to true, attributes for the active plugin are returned. These are plugin-dependent (see discussion above).
Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a payment method resource object.</p>
<h3 id='payment-method-retrieve-a-payment-method-by-external-key'>Retrieve a payment method by external key</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19?externalKey=coolPaymentMethod'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"foo"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">PaymentMethod</span> <span class="n">paymentMethod</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethodByKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">,</span> 
                                                                     <span class="n">includedDeleted</span><span class="o">,</span>
                                                                     <span class="n">withPluginInfo</span><span class="o">,</span>
                                                                     <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_method_ek</span> <span class="o">=</span> <span class="s2">"sample_external_key"</span>
<span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">payment_method_ek</span><span class="p">,</span>
                                                          <span class="n">included_deleted</span><span class="p">,</span>
                                                          <span class="n">with_plugin_info</span><span class="p">,</span>
                                                          <span class="n">audit</span><span class="p">,</span>
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">get_payment_method_by_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="s2">"coolPaymentMethod"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isDefault"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="s2">"__EXTERNAL_PAYMENT__"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginInfo"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>External key</td>
</tr>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted payment methods</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>If <strong>withPluginInfo</strong> is set to true, attributes for the active plugin are returned. These are plugin-dependent (see discussion above).
Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a payment method resource object.</p>
<h3 id='payment-method-delete-a-payment-method'>Delete a payment method</h3>
<p>This API deletes a payment method. The default payment method may not be deleted, depending on the query parameters.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19'</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">deleteDefaultPmWithAutoPayOff</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will delete default payment method with auto pay off</span>
<span class="n">Boolean</span> <span class="n">forceDefaultPmDeletion</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will force default payment method deletion</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">deletePaymentMethod</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                     <span class="n">deleteDefaultPmWithAutoPayOff</span><span class="o">,</span> 
                                     <span class="n">forceDefaultPmDeletion</span><span class="o">,</span> 
                                     <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_method_id</span> <span class="o">=</span> <span class="s2">"4307ac7c-04a7-41e1-9cb0-8a4d4420104c"</span>
<span class="n">set_auto_pay_off</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">force_default_deletion</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">PaymentMethod</span><span class="p">.</span><span class="nf">destroy</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span>
                                             <span class="n">set_auto_pay_off</span><span class="p">,</span>
                                             <span class="n">force_default_deletion</span><span class="p">,</span>
                                             <span class="n">user</span><span class="p">,</span>
                                             <span class="n">reason</span><span class="p">,</span>
                                             <span class="n">comment</span><span class="p">,</span>
                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'0052cddd-0f61-4f68-b653-ca49b5d7f915'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">delete_payment_method</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> 
                                       <span class="n">created_by</span><span class="p">,</span> 
                                       <span class="n">api_key</span><span class="p">,</span> 
                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteDefaultPmWithAutoPayOff</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete default payment method only if AUTO_PAY_OFF is set</td>
</tr>
<tr>
<td><strong>forceDefaultPmDeletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, force default payment method deletion</td>
</tr>
</tbody></table>

<p>The query parameters determine the behavior if the payment method specified is the default method: If <strong>forceDefaultPmDeletion</strong> is true, the payment method will be deleted unconditionally. If <strong>deleteDefaultPmWithAutoPayOff</strong> is true, the payment method will also be deleted, and AUTO_PAY_OFF will be set (if not already). If neither parameter is true, the default payment method will not be deleted (the call will fail). </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body. If the payment method is the default and cannot be deleted, an error code of 500 and a suitable message will be returned.</p>
<h2 id='payment-method-list-and-search'>List and Search</h2>
<p>These endpoints provide the ability to list and search for payment methods for a specific tenant</p>
<h3 id='payment-method-list-payment-methods'>List payment methods</h3>
<p>List all payment methods stored for the accounts maintained by this tenant</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/pagination'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>


<span class="n">PaymentMethods</span> <span class="n">allPaymentMethods</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethods</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span>
                                                                      <span class="n">limit</span><span class="o">,</span>
                                                                      <span class="n">pluginName</span><span class="o">,</span>
                                                                      <span class="n">withPluginInfo</span><span class="o">,</span>
                                                                      <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span>
                                                                      <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                               <span class="n">limit</span><span class="p">,</span>
                               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">get_payment_methods</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coolPaymentMethod"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isDefault"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__EXTERNAL_PAYMENT__"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginInfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc89832d-18a3-42fd-b3be-cac074fddb36"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paypal"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ca15adc4-1061-4e54-a9a0-15e773b3b154"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isDefault"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"killbill-paypal-express"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginInfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting position in list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Max number of items to return</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>pluginName</strong></td>
<td>string</td>
<td>no</td>
<td>all plugins</td>
<td>If present, list only payment methods that use this plugin</td>
</tr>
<tr>
<td><strong>pluginProperties</strong></td>
<td>array of strings</td>
<td>no</td>
<td>no properties</td>
<td>return these properties for this plugin</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>If <strong>withPluginInfo</strong> is set to true, attributes for each payment method&#39;s plugin are returned. These are plugin-dependent (see discussion above). If <strong>pluginName</strong> is given, list only payment methods that use this plugin, and return only the attributes specified by <strong>pluginProperties</strong>.
Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment method resource objects.</p>
<h3 id='payment-method-search-payment-methods'>Search payment methods</h3>
<p>This API searches all payment methods for a specified search string. The search string is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/search/coolPaymentMethod'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"4365"</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">100L</span><span class="o">;</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">PaymentMethod</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">searchPaymentMethods</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                                                                    <span class="n">offset</span><span class="o">,</span> 
                                                                    <span class="n">limit</span><span class="o">,</span> 
                                                                    <span class="n">pluginName</span><span class="o">,</span> 
                                                                    <span class="n">withPluginInfo</span><span class="o">,</span> 
                                                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span>  
                                                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>  
                                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'example'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                             <span class="n">offset</span><span class="p">,</span>
                                             <span class="n">limit</span><span class="p">,</span>
                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'__EXTERNAL_PAYMENT__'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">search_payment_methods</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coolPaymentMethod"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isDefault"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__EXTERNAL_PAYMENT__"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"pluginInfo"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting position in list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Max number of items to return</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>pluginName</strong></td>
<td>string</td>
<td>no</td>
<td>all plugins</td>
<td>If present, list only payment methods that use this plugin</td>
</tr>
<tr>
<td><strong>pluginProperties</strong></td>
<td>array of strings</td>
<td>no</td>
<td>no properties</td>
<td>return these properties for this plugin</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>If <strong>withPluginInfo</strong> is set to true, attributes for each payment method&#39;s plugin are returned. These are plugin-dependent (see discussion above). If <strong>pluginName</strong> is given, list only payment methods that use this plugin, and return only the attributes specified by <strong>pluginProperties</strong>.
Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment method resource objects that match the search key.</p>
<h2 id='payment-method-custom-fields'>Custom Fields</h2>
<p><code>Custom fields</code> are <code>{key, value}</code> attributes that can be attached to any customer resources. For more on custom fields see <a href="#custom-fields">Custom Fields</a>. These endpoints manage custom fields associated with <code>PaymentMethod</code> objects.</p>
<h3 id='payment-method-add-custom-fields-to-a-payment-method'>Add custom fields to a payment method</h3>
<p>Adds one or more custom fields to a payment method object. Existing custom fields are not disturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "objectId": "916619a4-02bb-4d3d-b3da-2584ac897b19",
            "objectType": "PAYMENT_METHOD",
            "name": "Test Custom Field",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">paymentMethodId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">PAYMENT_METHOD</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">createPaymentMethodCustomFields</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                 <span class="n">customFields</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'PAYMENT_METHOD'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                                <span class="n">user</span><span class="p">,</span>
                                <span class="n">reason</span><span class="p">,</span>
                                <span class="n">comment</span><span class="p">,</span>
                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">create_payment_method_custom_fields</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span>
                                                     <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                     <span class="n">created_by</span><span class="p">,</span>
                                                     <span class="n">api_key</span><span class="p">,</span>
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects giving the name and value of the custom field, or fields, to be added. For example:</p>

<p>[
  {
    &quot;name&quot;: &quot;CF1&quot;,
    &quot;value&quot;: &quot;123&quot;
  }
]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL to retrieve the custom fields associated with the payment method.</p>
<h3 id='payment-method-retrieve-payment-method-custom-fields'>Retrieve payment method custom fields</h3>
<p>Returns any custom field objects associated with the specified payment method</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethodCustomFields</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span>
                                                                               <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">get_payment_method_custom_fields</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> 
                                                  <span class="n">api_key</span><span class="p">,</span> 
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d4c073b-fd89-4e39-9802-eba65f42492f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_METHOD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='payment-method-modify-custom-fields-for-payment-method'>Modify custom fields for payment method</h3>
<p>Modifies the value of one or more existing custom fields associated with a payment object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "6d4c073b-fd89-4e39-9802-eba65f42492f",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>
<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">customFieldModified</span><span class="o">);</span>
<span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">modifyPaymentMethodCustomFields</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                 <span class="n">customFields</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                                   <span class="n">user</span><span class="p">,</span> 
                                   <span class="n">reason</span><span class="p">,</span>
                                   <span class="n">comment</span><span class="p">,</span> 
                                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">modify_payment_method_custom_fields</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span> 
                                                     <span class="p">[</span><span class="n">body</span><span class="p">],</span> 
                                                     <span class="n">created_by</span><span class="p">,</span> 
                                                     <span class="n">api_key</span><span class="p">,</span> 
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects specifying the id and the new value for the custom fields to be modified. For example:</p>

<p>[ { &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p>Although the <code>fieldName</code> and <code>objectType</code> can be specified in the request body, these cannot be modified, only the field value can be modified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, a status code of 204 and an empty body.</p>
<h3 id='payment-method-remove-custom-fields-from-payment-method'>Remove custom fields from payment method</h3>
<p>Delete one or more custom fields from a payment method</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/77e23878-8b9d-403b-bf31-93003e125712/customFields?customField=439ed0f8-9b37-4688-bace-e2595b1d3801'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"3c449da6-7ec4-4c74-813f-f5055739a0b9"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">UUID</span><span class="o">&gt;</span> <span class="n">customFieldsList</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">deletePaymentMethodCustomFields</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> 
                                                 <span class="n">customFieldsList</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">payment_method</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                                   <span class="n">user</span><span class="p">,</span> 
                                   <span class="n">reason</span><span class="p">,</span>
                                   <span class="n">comment</span><span class="p">,</span> 
                                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentMethodApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentMethodApi</span><span class="p">()</span>
<span class="n">payment_method_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>

<span class="n">paymentMethodApi</span><span class="o">.</span><span class="n">delete_payment_method_custom_fields</span><span class="p">(</span><span class="n">payment_method_id</span><span class="p">,</span>
                                                     <span class="n">created_by</span><span class="p">,</span>
                                                     <span class="n">api_key</span><span class="p">,</span> 
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Custom field object ID that should be deleted. Multiple custom fields can be deleted by specifying a separate <strong>customField</strong> parameter corresponding to each field.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='payment-method-audit-logs'>Audit Logs</h2>
<p>This endpoint enables access to payment method audit logs. For more on audit logs see the Audit and History section under Using Kill Bill APIs.</p>
<h3 id='payment-method-retrieve-payment-method-audit-logs-with-history-by-id'>Retrieve payment method audit logs with history by id</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentMethods/{paymentMethodId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentMethods/916619a4-02bb-4d3d-b3da-2584ac897b19/auditLogsWithHistory'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentMethodApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentMethodApi</span> <span class="n">paymentMethodApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e9d95f16-a426-46d0-b76b-90814792fb36"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">paymentMethodApi</span><span class="o">.</span><span class="na">getPaymentMethodAuditLogsWithHistory</span><span class="o">(</span><span class="n">paymentMethodId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span>
<span class="n">account_email_id</span> <span class="o">=</span> <span class="s">'bb390282-6757-4f4f-8dd5-456abd9f30b2'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_email_audit_logs_with_history</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                                     <span class="n">account_email_id</span><span class="p">,</span>
                                                     <span class="n">api_key</span><span class="p">,</span>
                                                     <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_email_id</span> <span class="o">=</span> <span class="s1">'a4627e89-a73b-4167-a7ba-92a2881eb3c4'</span>

<span class="n">account</span><span class="p">.</span><span class="nf">email_audit_logs_with_history</span><span class="p">(</span><span class="n">account_email_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T14:56:07.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_METHOD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f77892e9-32bd-4d59-8039-5e12798b53fe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T14:56:07.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T14:56:07.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unknown"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__EXTERNAL_PAYMENT__"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_METHODS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_METHOD_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of payment method audit logs with history.</p>
<h1 id='subscription'>Subscription</h1>
<p>A <code>Subscription</code> in Kill Bill entitles a customer to the use of a product or service for a period of time in exchange for a specified payment. Every subscription belongs to a <code>Bundle</code> that is associated with a given customer <code>Account</code>.</p>

<p>Subscriptions are created by specifying a <code>Plan</code> from the catalog, and an effective date on which to start. The Plan identifies the <code>Product</code> subscribed along with the terms of service and of billing. These attributes are used by the system to drive the generation of invoices. Kill Bill offers two parallel views of the subscription: one to track the entitlement, i.e the service associated with the subscription, and one to track the billing. These views address the following questions:</p>

<ul>
<li>Given a date, how much should we invoice ?</li>
<li>Given a date, is the service available to the customer? </li>
</ul>

<p>For most use cases, those two views are one and the same; the customer gets invoiced for what she consumes.</p>

<p>Please refer to our <a href="http://docs.killbill.io/latest/userguide_subscription.html">subscription manual</a> for more details.</p>
<h2 id='subscription-subscription-resource'>Subscription Resource</h2>
<p>The <code>Subscription</code> resource represents a subscription. The attributes contained in the subscription resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the bundle</td>
</tr>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this subscription</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key for the subscription</td>
</tr>
<tr>
<td><strong>bundleExternalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key for the bundle</td>
</tr>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>user</td>
<td>Datetime the service (entitlement) starts</td>
</tr>
<tr>
<td><strong>productName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the product subscribed (from catalog)</td>
</tr>
<tr>
<td><strong>productCategory</strong></td>
<td>string</td>
<td>user</td>
<td>Product catgory (see notes below)</td>
</tr>
<tr>
<td><strong>billingPeriod</strong></td>
<td>string</td>
<td>user</td>
<td>Billing period (see notes below)</td>
</tr>
<tr>
<td><strong>phaseType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the current plan phase (see notes below)</td>
</tr>
<tr>
<td><strong>priceList</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the current price list (from catalog)</td>
</tr>
<tr>
<td><strong>planName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the current plan (from catalog)</td>
</tr>
<tr>
<td><strong>state</strong></td>
<td>string</td>
<td>system</td>
<td>Current state of the subscription (see notes below)</td>
</tr>
<tr>
<td><strong>sourceType</strong></td>
<td>string</td>
<td>system</td>
<td>Kind of subscription (see notes below)</td>
</tr>
<tr>
<td><strong>cancelledDate</strong></td>
<td>date</td>
<td>user</td>
<td>Datetime when the service stopped, or will stop</td>
</tr>
<tr>
<td><strong>chargedThroughDate</strong></td>
<td>date</td>
<td>system</td>
<td>Date up to which the subscription has been invoiced (see notes below)</td>
</tr>
<tr>
<td><strong>billingStartDate</strong></td>
<td>date</td>
<td>user</td>
<td>Datetime on which the system starts invoicing</td>
</tr>
<tr>
<td><strong>billingEndDate</strong></td>
<td>date</td>
<td>user</td>
<td>Datetime on which the system ends invoicing</td>
</tr>
<tr>
<td><strong>billCycleDayLocal</strong></td>
<td>integer</td>
<td>user or system</td>
<td>Day of the month on which invoices are generated, if applicable (see notes below)</td>
</tr>
<tr>
<td><strong>events</strong></td>
<td>list</td>
<td>system</td>
<td>list of subscription events tracking what happened (see notes below)</td>
</tr>
<tr>
<td><strong>prices</strong></td>
<td>list</td>
<td>user</td>
<td>list of prices, one for each phase in the plan</td>
</tr>
<tr>
<td><strong>priceOverrides</strong></td>
<td>list</td>
<td>user</td>
<td>list of prices if this subscription has price overrides (see notes below)</td>
</tr>
<tr>
<td><strong>quantity</strong></td>
<td>integer</td>
<td>user</td>
<td>quantity of subscriptions (see notes below)</td>
</tr>
</tbody></table>

<p><strong>productCategory</strong>: possible values are BASE, ADD_ON, or STANDALONE</p>

<p><strong>billingPeriod</strong>: possible values are DAILY, WEEKLY, BIWEEKLY, THIRTY_DAYS, THIRTY_ONE_DAYS, SIXTY_DAYS, NINETY_DAYS, MONTHLY, BIMESTRIAL (bimonthly), QUARTERLY, TRIANNUAL, BIANNUAL, ANNUAL, SESQUIENNIAL, BIENNIAL, TRIENNIAL, or NO_BILLING_PERIOD</p>

<p><strong>phaseType</strong>: possible values are: TRIAL, DISCOUNT, FIXEDTERM, or EVERGREEN</p>

<p><strong>state</strong>: possible values are:</p>

<ul>
<li><code>PENDING</code>: The subscription is not yet created.</li>
<li><code>ACTIVE</code>: The subscription is currently active.</li>
<li><code>BLOCKED</code>: The subscription is currently paused.</li>
<li><code>CANCELLED</code>: The subscription has been cancelled.</li>
<li><code>EXPIRED</code>: The subscription has expired. This state is applicable only for subscriptions with a <code>FIXEDTERM</code> phase.</li>
</ul>

<p><strong>sourceType</strong>: possible values are NATIVE, MIGRATED, or TRANSFERRED </p>

<p><strong><code>chargedThroughDate</code></strong>: The date up to which the entitlement for this subscription has been invoiced. For <code>IN_ADVANCE</code> billing mode, this date will often be in the future; for <code>IN_ARREAR</code>, this date will often be in the past. For example,</p>

<ol>
<li><p>A subscription is billed each month, on the 15th, in advance. If we check on May 31, the <code>chargedThroughDate</code> will be June 15th, 15 days ahead. If the subscription is ended on May 31, a prorated credit will need to be issued.</p></li>
<li><p>A subscription is billed quarterly, in arrears, on the 10th of Feb., May, Aug., and Nov. If we check on Jul. 20, the <code>chargedThroughDate</code> will be May 10, over 2 months earlier. If the subscription is cancelled on Jul. 20, an additional invoice will need to be issued.</p></li>
</ol>

<p>These use cases assume that invoicing is up to date. If AUTO_INVOICING_OFF is set, invoicing relies on a manual process and may be late. In that situation the first use case may require a smaller credit or none at all, while the second case will have a larger amount to be billed to close out the subscription.</p>

<p><strong><code>billCycleDayLocal</code></strong>: this value is either the overridden subscription billCycleDay (in case of BCD change) or the value at the subscription, bundle or account level (depending on the catalog <a href="http://docs.killbill.io/latest/userguide_subscription.html#_billing_alignment_rules">billing alignments</a>). For <code>ACCOUNT</code> billing alignments, if the account level billCycleDay hasn&#39;t been set yet, the value returned would be null.</p>

<p><strong><code>Events</code></strong>: possible event types are START_ENTITLEMENT, START_BILLING, PAUSE_ENTITLEMENT, PAUSE_BILLING, RESUME_ENTITLEMENT, RESUME_BILLING, PHASE, CHANGE, STOP_ENTITLEMENT, STOP_BILLING, SERVICE_STATE_CHANGE</p>

<p><strong><code>priceOverrides</code></strong>:  List of overridden prices for specific plan phases. Can be specified to override the fixed/recurring price in the catalog for a particular phase. For example, suppose you are creating a subscription corresponding to a plan that has an <code>EVERGREEN</code> phase with a recurring price of <code>$100</code>. You can specify an overridden price of <code>200</code> while creating the subscription by specifying a <code>priceOverrides</code> object as follows:</p>
<pre class="highlight shell tab-shell"><code><span class="s2">"priceOverrides"</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">"planName"</span>: <span class="s2">"shotgun-monthly"</span>,
            <span class="s2">"phaseType"</span>: <span class="s2">"DISCOUNT"</span>,
            <span class="s2">"fixedPrice"</span>: null,
            <span class="s2">"recurringPrice"</span>: 150.00,
            <span class="s2">"usagePrices"</span>: <span class="o">[]</span>
        <span class="o">}</span>
</code></pre>
<p><strong>quantity</strong>: An integer value that specifies the quantity of subscription. The default value is 1. The corresponding invoice is generated as per the quantity. So if <code>price=$20/mo</code>, <code>quantity=$2</code> =&gt; <code>invoiceItem recurring amount=$40</code>.</p>
<h2 id='subscription-subscriptions'>Subscriptions</h2>
<p>These endpoints support the basic CRUD operations on Subscriptions.</p>
<h3 id='subscription-create-a-subscription'>Create a subscription</h3>
<p>This API creates a base product subscription. It also creates a bundle to contain the subscription. See <a href="https://killbill.github.io/slate/#bundle">Bundle</a> for further information.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>
<span class="c"># With planName</span>
curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "accountId": "581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3",
            "externalKey": "somethingSpecial",
            "planName": "super-monthly"
        }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/subscriptions"</span> 

<span class="c"># With productName, productCategory and billingPeriod</span>

    curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
          "accountId": "59afd9fe-e98d-4fb3-b5bf-21d4a2b036cd",
            "externalKey": "somethingSpecial", 
            "productName": "Test", 
            "productCategory": "BASE",  
            "billingPeriod": "MONTHLY",
            "priceList": "DEFAULT"
        }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/subscriptions"</span>    

<span class="c"># With priceOverrides</span>

    curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "accountId": "187f9270-7aa0-4db5-81f7-857e8e59fd9a",
            "planName": "shotgun-monthly",
             "prices": [
        {
            "planName": "shotgun-monthly",
            "phaseType": "DISCOUNT",
            "fixedPrice": 150.00,
            "recurringPrice": null,
            "usagePrices": []
        },
        {
            "planName": "shotgun-monthly",
            "phaseType": "EVERGREEN",
            "fixedPrice": null,
            "recurringPrice": 400.00,
            "usagePrices": []
        }       
    ]
        }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/subscriptions"</span> 

<span class="c"># With Datetime</span>

curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "accountId": "325fbe1c-7c35-4d96-a4e5-2cbaabe218c6",
            "planName": "pistol-monthly-notrial"
        }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/subscriptions?billingDate=2023-02-07T11:15&amp;entitlementDate=2023-02-07T11:15"</span> 

</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">input</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">input</span><span class="o">.</span><span class="na">setExternalKey</span><span class="o">(</span><span class="s">"somethingSpecial"</span><span class="o">);</span>
<span class="n">input</span><span class="o">.</span><span class="na">setPlanName</span><span class="o">(</span><span class="s">"shotgun-monthly"</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">entitlementDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">billingDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">renameKeyIfExistsAndUnused</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> 
<span class="n">Boolean</span> <span class="n">migrated</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">skipResponse</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">callCompletion</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Subscription</span> <span class="n">subscription</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscription</span><span class="o">(</span><span class="n">input</span><span class="o">,</span> 
                                                               <span class="n">entitlementDate</span><span class="o">,</span> 
                                                               <span class="n">billingDate</span><span class="o">,</span> 
                                                               <span class="n">renameKeyIfExistsAndUnused</span><span class="o">,</span> 
                                                               <span class="n">migrated</span><span class="o">,</span>
                                                               <span class="n">skipResponse</span><span class="o">,</span>  
                                                               <span class="n">callCompletion</span><span class="o">,</span> 
                                                               <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span><span class="o">,</span> 
                                                               <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span>              <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">new</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">account_id</span>   <span class="o">=</span> <span class="s2">"e1826665-4524-4d57-81b5-a5eb11146f3f"</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">plan_name</span>    <span class="o">=</span> <span class="s2">"basic-monthly-in-advance"</span>

<span class="n">requested_date</span>  <span class="o">=</span> <span class="kp">nil</span>
<span class="n">call_completion</span> <span class="o">=</span> <span class="kp">nil</span> 

<span class="n">subscription</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">requested_date</span><span class="p">,</span> 
                    <span class="n">call_completion</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'e1826665-4524-4d57-81b5-a5eb11146f3f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span> <span class="n">plan_name</span><span class="o">=</span><span class="s">'standard-monthly'</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscription</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                    <span class="n">created_by</span><span class="p">,</span>
                                    <span class="n">api_key</span><span class="p">,</span>
                                    <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A subscription resource object specifying <code>accountId</code> and either the <code>planName</code> or a combination of <code>productName</code>, <code>productCategory</code>,<code>billingPeriod</code> and <code>priceList</code>. </p>

<p>It can also include the following optional fields:</p>

<ul>
<li><code>phaseType</code> - Target phase type. Specifying this field causes the subscription to start with this phase.</li>
<li><code>externalKey</code> - External key corresponding to the subscription.</li>
<li><code>billCycleDayLocal</code> - Per-subscription BCD. Specifying this value allows realigning the billing with the specified date. </li>
<li><code>bundleId</code> - Id of the bundle in which to create this subscription. Can be specified only while invoking this method for an addon subscription.</li>
</ul>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>entitlementDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date/DateTime at which the entitlement (service) starts in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format.</td>
</tr>
<tr>
<td><strong>billingDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date/DateTime at which the entitlement (service) starts in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format.</td>
</tr>
<tr>
<td><strong>renameKeyIfExistsAndUnused</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>If true, rename external key if it exists and is unused</td>
</tr>
<tr>
<td><strong>migrated</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, subscription is migrated</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p>Creating a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p><strong>Other Notes:</strong></p>

<ul>
<li>Specifying the <code>startDate</code>/<code>billingStartDate</code> as part of the request body has no effect, these dates need to be passed as query parameters (<code>entitlementDate</code>/<code>billingDate</code>). </li>
<li>The <code>entitlementDate</code> drives the subscription state. So, if a subscription is created with a future <code>entitlementDate</code>, its state remains <code>PENDING</code> until the date is reached after which it becomes <code>ACTIVE</code>.</li>
</ul>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> parameter is returned in the header which contains the new subscription id.</p>
<h3 id='subscription-create-a-subscription-with-addon-products'>Create a subscription with addon products</h3>
<p>This API creates an addon product subscription. The bundle for the base subscription must be specified.</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionWithAddOns</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[
          {
            "accountId": "581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3",
            "externalKey": "something",
            "bundleExternalKey": "somethingAlso",
            "productName": "Sports",
            "productCategory": "BASE",
            "billingPeriod": "MONTHLY",
            "priceList": "DEFAULT"
        },
        {
          "accountId": "581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3",
          "productName": "OilSlick",
          "productCategory": "ADD_ON",
          "billingPeriod": "MONTHLY",
          "priceList": "DEFAULT"
        }
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionWithAddOns'</span> 

OR

curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[

        {
          "accountId": "1f635c3d-fc24-4fa8-81e0-ab646882807a",
          "planName": "remotecontrol-monthly",
          "bundleId":"b4709feb-bd14-455a-bbb4-57a758498791"
        }
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionWithAddOns'</span>   

</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"abfba40d-d2dd-47f0-94f2-8ea3e6bc8794"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">base</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">base</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setExternalKey</span><span class="o">(</span><span class="s">"base"</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Shotgun"</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">BASE</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscription</span> <span class="n">addOn1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Telescopic-Scope"</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">ADD_ON</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscription</span> <span class="n">addOn2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Laser-Scope"</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setProductCategory</span><span class="o">(</span><span class="n">ProductCategory</span><span class="o">.</span><span class="na">ADD_ON</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">addOn2</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscriptions</span> <span class="n">subscriptions</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscriptions</span><span class="o">();</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">base</span><span class="o">);</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addOn1</span><span class="o">);</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addOn2</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">entitlementDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">billingDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">migrated</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">skipResponse</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">renameKeyIfExistsAndUnused</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">callCompletion</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscriptionWithAddOns</span><span class="o">(</span><span class="n">subscriptions</span><span class="o">,</span> 
                                                                   <span class="n">entitlementDate</span><span class="o">,</span> 
                                                                   <span class="n">billingDate</span><span class="o">,</span> 
                                                                   <span class="n">migrated</span><span class="o">,</span> 
                                                                   <span class="n">skipResponse</span><span class="o">,</span>
                                                                   <span class="n">renameKeyIfExistsAndUnused</span><span class="o">,</span> 
                                                                   <span class="n">callCompletion</span><span class="o">,</span> 
                                                                   <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span><span class="o">,</span> 
                                                                   <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">entitlement</span> <span class="o">=</span> <span class="p">[</span>
                 <span class="p">{</span>
                    <span class="s2">"baseEntitlementAndAddOns"</span><span class="p">:[</span>
                       <span class="p">{</span>
                          <span class="s2">"accountId"</span><span class="ss">:"16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836"</span><span class="p">,</span>
                          <span class="s2">"externalKey"</span><span class="ss">:"1-16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836-827963"</span><span class="p">,</span>
                          <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
                          <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span>
                       <span class="p">}</span>
                    <span class="p">]</span>
                 <span class="p">}</span>
              <span class="p">]</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">entitlement_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">billing_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">migrated</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">call_completion_sec</span> <span class="o">=</span> <span class="mi">3</span>

<span class="n">subscription</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">new</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">create_entitlement_with_add_on</span><span class="p">(</span><span class="n">entitlement</span><span class="p">,</span>
                                            <span class="n">requested_date</span><span class="p">,</span>
                                            <span class="n">entitlement_date</span><span class="p">,</span> 
                                            <span class="n">billing_date</span><span class="p">,</span>
                                            <span class="n">migrated</span><span class="p">,</span> 
                                            <span class="n">call_completion_sec</span><span class="p">,</span>                                            
                                            <span class="n">user</span><span class="p">,</span> 
                                            <span class="n">reason</span><span class="p">,</span> 
                                            <span class="n">comment</span><span class="p">,</span> 
                                            <span class="n">options</span><span class="p">)</span>                                         
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836'</span>
<span class="n">subscription_a</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                              <span class="n">product_category</span><span class="o">=</span><span class="s">'BASE'</span><span class="p">,</span>
                              <span class="n">plan_name</span><span class="o">=</span><span class="s">'sports-monthly'</span><span class="p">)</span>

<span class="n">subscription_b</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                              <span class="n">product_category</span><span class="o">=</span><span class="s">'ADD_ON'</span><span class="p">,</span>
                              <span class="n">plan_name</span><span class="o">=</span><span class="s">'super-monthly'</span><span class="p">)</span>

<span class="n">body</span> <span class="o">=</span> <span class="p">[</span><span class="n">subscription_a</span><span class="p">,</span> <span class="n">subscription_b</span><span class="p">]</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscription_with_add_ons</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                                 <span class="n">created_by</span><span class="p">,</span>
                                                 <span class="n">api_key</span><span class="p">,</span>
                                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A subscription resource object corresponding to the base subscription and zero or more subscription resource objects corresponding to add-on subscriptions need to be specified. Alternatively, only a list of add-on subscription resource objects may be specified along with the base subscription bundle id. Each subscription resource object needs to include <code>accountId</code> and either the <code>planName</code> or a combination of <code>productName</code>, <code>productCategory</code>,<code>billingPeriod</code> and <code>priceList</code>.</p>

<p>In addition, each subscription resource can also include the following optional fields:</p>

<ul>
<li><code>phaseType</code> - Target phase type. Specifying this field causes the subscription to start with this phase.</li>
<li><code>externalKey</code> - External key corresponding to the subscription.</li>
<li><code>billCycleDayLocal</code> - Per-subscription BCD. Specifying this value allows realigning the billing with the specified date. </li>
<li><code>bundleId</code> - Id of the bundle in which to create this subscription. Can be specified only with an add-on subscription resource.</li>
</ul>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>entitlementDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the entitlement (sevice) starts in <code>yyyy-mm-dd</code> format. If specified, applies both to base and add-on products.</td>
</tr>
<tr>
<td><strong>billingDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the billing starts in <code>yyyy-mm-dd</code> format. If specified, applies both to base and add-on products.</td>
</tr>
<tr>
<td><strong>renameKeyIfExistsAndUnused</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>If true, rename external key if it exists and is unused</td>
</tr>
<tr>
<td><strong>migrated</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, subscription is migrated</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p>Creating a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> parameter is returned in the header which contains the new subscription id.</p>
<h3 id='subscription-create-multiple-subscriptions-with-addon-products'>Create multiple subscriptions with addon products</h3>
<p>This API creates multiple subscriptions with addon products. The bundle for the base subscription must be specified.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionsWithAddOns</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[
          {
            "baseEntitlementAndAddOns": [
              {
                "accountId": "886adb60-be70-40c8-b97d-1f8ecbc30a64",
                "externalKey": "base",
                "productName": "Sports",
                "productCategory": "BASE",
                "billingPeriod": "MONTHLY",
                "priceList": "DEFAULT"
              },
              {
                "accountId": "886adb60-be70-40c8-b97d-1f8ecbc30a64",
                "productName": "OilSlick",
                "productCategory": "ADD_ON",
                "billingPeriod": "MONTHLY",
                "priceList": "DEFAULT"
              }
            ]
          },
           {
            "baseEntitlementAndAddOns": [
              {
                "accountId": "59afd9fe-e98d-4fb3-b5bf-21d4a2b036cd",
                "externalKey": "createSubscriptionsWithAddOns3",
                "productName": "Test",
                "productCategory": "BASE",
                "billingPeriod": "MONTHLY",
                "priceList": "DEFAULT"
              },
              {
                "accountId": "59afd9fe-e98d-4fb3-b5bf-21d4a2b036cd",
                "productName": "TestAO",
                "productCategory": "ADD_ON",
                "billingPeriod": "MONTHLY",
                "priceList": "DEFAULT"
              }
            ]
          }
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionsWithAddOns'</span> 

OR 

curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[
          {
            "baseEntitlementAndAddOns": [
              {
                "accountId": "1f635c3d-fc24-4fa8-81e0-ab646882807a",
                "planName": "remotecontrol-monthly",  
                "bundleId":"a8b4022c-e38c-4336-ad2f-ee15c5e18d12"
              }
            ]
          },
          {
            "baseEntitlementAndAddOns": [

              {
                "accountId": "1f635c3d-fc24-4fa8-81e0-ab646882807a",
                "planName": "remotecontrol-monthly",
                "bundleId":"06892885-c276-4cf9-8311-ef0b8a2e364b"
              }
            ]
          }
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/createSubscriptionsWithAddOns'</span> 

</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"a3087bfb-eb81-466d-afeb-6501c30f8f85"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">base</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">base</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">base</span><span class="o">.</span><span class="na">setPlanName</span><span class="o">(</span><span class="s">"test-monthly"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscription</span> <span class="n">addOn1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">addOn1</span><span class="o">.</span><span class="na">setPlanName</span><span class="o">(</span><span class="s">"testao-monthly"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">Subscriptions</span> <span class="n">subscriptions</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscriptions</span><span class="o">();</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">base</span><span class="o">);</span>
<span class="n">subscriptions</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">addOn1</span><span class="o">);</span>

<span class="n">BulkSubscriptionsBundle</span> <span class="n">bulkSubscriptionsBundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulkSubscriptionsBundle</span><span class="o">();</span>
<span class="n">bulkSubscriptionsBundle</span><span class="o">.</span><span class="na">setBaseEntitlementAndAddOns</span><span class="o">(</span><span class="n">subscriptions</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">base2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">base2</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">base2</span><span class="o">.</span><span class="na">setPlanName</span><span class="o">(</span><span class="s">"product1-monthly"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">base2addOn1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">base2addOn1</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">base2addOn1</span><span class="o">.</span><span class="na">setPlanName</span><span class="o">(</span><span class="s">"product1-ao-monthly"</span><span class="o">);</span>
<span class="n">base2addOn1</span><span class="o">.</span><span class="na">setBillCycleDayLocal</span><span class="o">(</span><span class="mi">18</span><span class="o">);</span>

<span class="n">Subscriptions</span> <span class="n">subscriptions2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscriptions</span><span class="o">();</span>
<span class="n">subscriptions2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">base2</span><span class="o">);</span>
<span class="n">subscriptions2</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">base2addOn1</span><span class="o">);</span>

<span class="n">BulkSubscriptionsBundle</span> <span class="n">bulkSubscriptionsBundle2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulkSubscriptionsBundle</span><span class="o">();</span>
<span class="n">bulkSubscriptionsBundle2</span><span class="o">.</span><span class="na">setBaseEntitlementAndAddOns</span><span class="o">(</span><span class="n">subscriptions2</span><span class="o">);</span>

<span class="n">BulkSubscriptionsBundles</span> <span class="n">bulkSubscriptionsBundles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BulkSubscriptionsBundles</span><span class="o">();</span>
<span class="n">bulkSubscriptionsBundles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bulkSubscriptionsBundle</span><span class="o">);</span>
<span class="n">bulkSubscriptionsBundles</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bulkSubscriptionsBundle2</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">entitlementDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">billingDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">renameKeyIfExistsAndUnused</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">migrated</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">skipResponse</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">callCompletion</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="kt">long</span> <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Bundles</span> <span class="n">bundles</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscriptionsWithAddOns</span><span class="o">(</span><span class="n">bulkSubscriptionsBundles</span><span class="o">,</span> 
                                                                 <span class="n">entitlementDate</span><span class="o">,</span> 
                                                                 <span class="n">billingDate</span><span class="o">,</span> 
                                                                 <span class="n">renameKeyIfExistsAndUnused</span><span class="o">,</span> 
                                                                 <span class="n">migrated</span><span class="o">,</span> 
                                                                 <span class="n">skipResponse</span><span class="o">,</span> 
                                                                 <span class="n">callCompletion</span><span class="o">,</span> 
                                                                <span class="n">DEFAULT_WAIT_COMPLETION_TIMEOUT_SEC</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span>                                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bulk_subscription_list</span> <span class="o">=</span> <span class="p">[</span>
                            <span class="p">{</span>
                               <span class="s2">"baseEntitlementAndAddOns"</span><span class="p">:[</span>
                                  <span class="p">{</span>
                                     <span class="s2">"accountId"</span><span class="ss">:"16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836"</span><span class="p">,</span>
                                     <span class="s2">"externalKey"</span><span class="ss">:"1-16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836-827963"</span><span class="p">,</span>
                                     <span class="s2">"productCategory"</span><span class="ss">:"BASE"</span><span class="p">,</span>
                                     <span class="s2">"planName"</span><span class="ss">:"sports-monthly"</span>
                                  <span class="p">}</span>
                               <span class="p">]</span>
                            <span class="p">},</span>
                            <span class="p">{</span>
                               <span class="s2">"baseEntitlementAndAddOns"</span><span class="p">:[</span>
                                  <span class="p">{</span>
                                     <span class="s2">"accountId"</span><span class="ss">:"16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836"</span><span class="p">,</span>
                                     <span class="s2">"externalKey"</span><span class="ss">:"2-16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836-717751"</span><span class="p">,</span>
                                     <span class="s2">"productCategory"</span><span class="ss">:"ADD_ON"</span><span class="p">,</span>
                                     <span class="s2">"planName"</span><span class="ss">:"super-monthly"</span>
                                  <span class="p">}</span>
                               <span class="p">]</span>
                            <span class="p">}</span>
                         <span class="p">]</span>
<span class="n">entitlement_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">billing_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">call_completion_sec</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">BulkSubscription</span><span class="p">.</span><span class="nf">create_bulk_subscriptions</span><span class="p">(</span><span class="n">bulk_subscription_list</span><span class="p">,</span> 
                                                                  <span class="n">user</span><span class="p">,</span> 
                                                                  <span class="n">reason</span><span class="p">,</span> 
                                                                  <span class="n">comment</span><span class="p">,</span> 
                                                                  <span class="n">entitlement_date</span><span class="p">,</span> 
                                                                  <span class="n">billing_date</span><span class="p">,</span> 
                                                                  <span class="n">call_completion_sec</span><span class="p">,</span> 
                                                                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'16cd9eb8-bb5d-4183-b8e0-c1d6f78dc836'</span>
<span class="n">subscription_a</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                              <span class="n">product_category</span><span class="o">=</span><span class="s">'BASE'</span><span class="p">,</span>
                              <span class="n">plan_name</span><span class="o">=</span><span class="s">'sports-monthly'</span><span class="p">)</span>

<span class="n">subscription_b</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                              <span class="n">product_category</span><span class="o">=</span><span class="s">'ADD_ON'</span><span class="p">,</span>
                              <span class="n">plan_name</span><span class="o">=</span><span class="s">'super-monthly'</span><span class="p">)</span>

<span class="n">body</span> <span class="o">=</span> <span class="n">BulkSubscriptionsBundle</span><span class="p">([</span><span class="n">subscription_a</span><span class="p">,</span> <span class="n">subscription_b</span><span class="p">])</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscriptions_with_add_ons</span><span class="p">([</span><span class="n">body</span><span class="p">],</span>
                                                  <span class="n">created_by</span><span class="p">,</span>
                                                  <span class="n">api_key</span><span class="p">,</span>
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>One or more subscription resource object corresponding to the base subscriptions need to be specified. Additional, each base subscription resource object can include zero or more subscription resource objects corresponding to add-on subscriptions. Alternatively, only a list of add-on subscription resource objects may be specified along with the base subscription bundle id. Each subscription resource object needs to include <code>accountId</code> and either the <code>planName</code> or a combination of <code>productName</code>, <code>productCategory</code>,<code>billingPeriod</code> and <code>priceList</code>.</p>

<p>In addition, each subscription resource can also include the following optional fields:</p>

<ul>
<li><code>phaseType</code> - Target phase type. Specifying this field causes the subscription to start with this phase.</li>
<li><code>externalKey</code> - External key corresponding to the subscription.</li>
<li><code>billCycleDayLocal</code> - Per-subscription BCD. Specifying this value allows realigning the billing with the specified date. </li>
<li><code>bundleId</code> - Id of the bundle in which to create this subscription. Can be specified only with an add-on subscription resource.</li>
</ul>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>entitlementDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the entitlement (sevice) starts in <code>yyyy-mm-dd</code> format. If specified, applies both to base and add-on products.</td>
</tr>
<tr>
<td><strong>billingDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediately</td>
<td>Date at which the billing starts in <code>yyyy-mm-dd</code> format. If specified, applies both to base and add-on products.</td>
</tr>
<tr>
<td><strong>renameKeyIfExistsAndUnused</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>If true, rename external key if it exists and is unused</td>
</tr>
<tr>
<td><strong>migrated</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, subscription is migrated</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p>Creating a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> parameter is returned in the header which contains the new subscription id.</p>
<h3 id='subscription-retrieve-a-subscription-by-id'>Retrieve a subscription by id</h3>
<p>This API retrieves a subscription resource object based on its subscription id </p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/d4a919f4-7459-494f-85e5-af8880f63e90'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">objFromJson</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscription</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription_id</span> <span class="o">=</span> <span class="s2">"161692a4-c293-410c-a92f-939c5e3dcba7"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'4aab9b96-c2e7-4641-a6d9-db984969201e'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">get_subscription</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="s2">"581d86fc-7cfc-46f2-b6d4-4dbc1d98beb3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="s2">"3b7a754c-4fe3-49a4-a56c-c8f56fc4116c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="s2">"d4a919f4-7459-494f-85e5-af8880f63e90"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="s2">"somethingSpecial"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleExternalKey"</span><span class="p">:</span><span class="s2">"somethingAlsoSpecial"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"startDate"</span><span class="p">:</span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"productName"</span><span class="p">:</span><span class="s2">"Super"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"priceList"</span><span class="p">:</span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"planName"</span><span class="p">:</span><span class="s2">"super-monthly"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="s2">"NATIVE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="s2">"d1fc7c9a-bdcd-447c-90f4-72c8de37d457"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="s2">"super-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="s2">"Super"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="s2">"super-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="s2">"e1cea834-9c21-450a-8ff5-8e1ebef705d1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="s2">"super-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="s2">"Super"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="s2">"super-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"eventId"</span><span class="p">:</span><span class="s2">"c9045227-4638-46ca-9a4a-2d3086168505"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="s2">"2018-08-18"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"plan"</span><span class="p">:</span><span class="s2">"super-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"product"</span><span class="p">:</span><span class="s2">"Super"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"priceList"</span><span class="p">:</span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"eventType"</span><span class="p">:</span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phase"</span><span class="p">:</span><span class="s2">"super-monthly-evergreen"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prices"</span><span class="p">:</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"planName"</span><span class="p">:</span><span class="s2">"super-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="s2">"super-monthly-trial"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usagePrices"</span><span class="p">:[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"planName"</span><span class="p">:</span><span class="s2">"super-monthly"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="s2">"super-monthly-evergreen"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="mf">1000.00</span><span class="p">,</span><span class="w">
            </span><span class="s2">"usagePrices"</span><span class="p">:[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:[]}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a subscription resource object.</p>
<h3 id='subscription-retrieve-a-subscription-by-key'>Retrieve a subscription by key</h3>
<p>This API retrieves a subscription resource object based on its external key </p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s1">'http://localhost:8080/1.0/kb/subscriptions?externalKey=somethingSpecial'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"somethingSpecial"</span><span class="o">;</span>
<span class="n">Subscription</span> <span class="n">objFromJson</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscriptionByKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">external_key</span> <span class="o">=</span> <span class="s2">"somethingSpecial"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">external_key</span> <span class="o">=</span> <span class="s">'somethingSpecial'</span>
<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">get_subscription_by_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f979085-1765-471b-878a-5f640db4d831"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8815e8c0-afab-41b9-b793-cb8fef2382e4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8815e8c0-afab-41b9-b793-cb8fef2382e4"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e5c5339-1cad-46c6-ab18-3d5ddc1b2414"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"somethingSpecial"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-08"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pistol"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notrial"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pistol-monthly-notrial"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NATIVE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-08"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-08"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d24928e-790d-4dc9-8a88-c4eaa56de392"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-08"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pistol-monthly-notrial"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pistol"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notrial"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pistol-monthly-notrial-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3aaa3239-2bc6-4f04-977b-fce5de098af8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-08"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pistol-monthly-notrial"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pistol"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notrial"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pistol-monthly-notrial-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pistol-monthly-notrial"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pistol-monthly-notrial-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="mf">19.95</span><span class="p">,</span><span class="w">
      </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>String</td>
<td>yes</td>
<td>none</td>
<td>The subscription external key</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a subscription resource object.</p>
<h3 id='subscription-update-the-bcd-associated-with-a-subscription'>Update the BCD associated with a subscription</h3>
<p>This API allows you to change the Bill Cycle Date, BCD, for a given subscription.
This only applies to subscriptions whose recurring term is month based -- e.g <code>MONTHLY</code>, <code>ANNUAL</code>, ... </p>

<p>For example if a given subscription was invoiced on the 1st, then one could use this API
to realign invoicing, let&#39;s say on the 16th. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/bcd</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "billCycleDayLocal": 16 }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/bcd'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">updatedSubscription</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">updatedSubscription</span><span class="o">.</span><span class="na">setSubscriptionId</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">);</span>
<span class="n">updatedSubscription</span><span class="o">.</span><span class="na">setBillCycleDayLocal</span><span class="o">(</span><span class="mi">9</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">effectiveFromDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">updateSubscriptionBCD</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                      <span class="n">updatedSubscription</span><span class="o">,</span> 
                                      <span class="n">effectiveFromDate</span><span class="o">,</span> 
                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">new</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">subscription_id</span>      <span class="o">=</span> <span class="s2">"161692a4-c293-410c-a92f-939c5e3dcba7"</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">bill_cycle_day_local</span> <span class="o">=</span> <span class="mi">16</span>

<span class="n">effective_from_date</span>  <span class="o">=</span> <span class="s1">'2018-08-16'</span>
<span class="n">force_past_effective_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">update_bcd</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                        <span class="n">reason</span><span class="p">,</span> 
                        <span class="n">comment</span><span class="p">,</span> 
                        <span class="n">effective_from_date</span><span class="p">,</span> 
                        <span class="n">force_past_effective_date</span><span class="p">,</span> 
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'161692a4-c293-410c-a92f-939c5e3dcba7'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">subscription_id</span><span class="o">=</span><span class="n">subscription_id</span><span class="p">,</span>
                    <span class="n">bill_cycle_day_local</span><span class="o">=</span><span class="mi">26</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">update_subscription_bcd</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                        <span class="n">body</span><span class="p">,</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The new BCD needs to be specified in the request body via the <code>billCycleDayLocal</code> field.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>effectiveFromDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date on which this change becomes effective in <code>yyyy-mm-dd</code> format.</td>
</tr>
<tr>
<td><strong>forceNewBcdWithPastEffectiveDate</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>See below</td>
</tr>
</tbody></table>

<p>By default the effective date must be in the future so as to not modify existing invoices. Setting <strong>forceNewBcdWithPastEffectiveDate</strong> to true allows the date to be set in the past. </p>

<p>Secondly, even after this endpoint is executed, the <a href="https://killbill.github.io/slate/?shell#subscription-retrieve-a-subscription-by-id">Retrieve a Subscription</a> endpoint will still return the old BCD until an invoice is generated on the new BCD.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-update-the-subscription-quantity'>Update the subscription quantity</h3>
<p>This API allows you to change the subscription quantity.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/quantity</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "quantity": "2" 
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/c20715fa-8d69-488d-a094-51da0cdf999b/quantity'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f0143401-5b9b-41d1-b9c0-8513f1f0cf0b"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setQuantity</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">effectiveFromDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">updateSubscriptionQuantity</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">effectiveFromDate</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The quantity needs to be specified in the request body via the <code>quantity</code> field.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>effectiveFromDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date on which this change becomes effective in <code>yyyy-mm-dd</code> format.</td>
</tr>
<tr>
<td><strong>forceNewQuantityWithPastEffectiveDate</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>See below</td>
</tr>
</tbody></table>

<p>By default the effective date must be in the future so as to not modify existing invoices. Setting <strong>forceNewQuantityWithPastEffectiveDate</strong> to true allows the date to be set in the past. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-change-subscription-plan'>Change subscription plan</h3>
<p>This API allows you to upgrade or downgrade a given subscription to a new <code>Plan</code>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "productName": "Sports", 
            "billingPeriod": "MONTHLY", 
            "priceList": "DEFAULT"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>

<span class="n">Subscription</span> <span class="n">newInput</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Subscription</span><span class="o">();</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setSubscriptionId</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">);</span>

<span class="c1">// Specify the product, billing period and price list</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setProductName</span><span class="o">(</span><span class="s">"Shotgun"</span><span class="o">);</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setBillingPeriod</span><span class="o">(</span><span class="n">BillingPeriod</span><span class="o">.</span><span class="na">MONTHLY</span><span class="o">);</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setPriceList</span><span class="o">(</span><span class="s">"DEFAULT"</span><span class="o">);</span>

<span class="c1">// Alternatively, you can specify the plan name</span>
<span class="n">newInput</span><span class="o">.</span><span class="na">setPlanName</span><span class="o">(</span><span class="s">"shotgun-monthly"</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="c1">//specify either requestedDate or BillingActionPolicy</span>
<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">changeSubscriptionPlan</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                       <span class="n">newInput</span><span class="o">,</span> 
                                       <span class="n">requestedDate</span><span class="o">,</span> 
                                       <span class="n">BillingActionPolicy</span><span class="o">.</span><span class="na">IMMEDIATE</span><span class="o">,</span> 
                                       <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">input</span> <span class="o">=</span> <span class="p">{</span>
           <span class="ss">:productName</span> <span class="o">=&gt;</span> <span class="s1">'Super'</span><span class="p">,</span> 
           <span class="ss">:billingPeriod</span> <span class="o">=&gt;</span> <span class="s1">'MONTHLY'</span><span class="p">,</span> 
           <span class="ss">:priceList</span> <span class="o">=&gt;</span> <span class="s1">'DEFAULT'</span>
         <span class="p">}</span>

<span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">billing_policy</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">call_completion</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">target_phase_type</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">change_plan</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> 
                         <span class="n">user</span><span class="p">,</span> 
                         <span class="n">reason</span><span class="p">,</span> 
                         <span class="n">comment</span><span class="p">,</span> 
                         <span class="n">requested_date</span><span class="p">,</span> 
                         <span class="n">billing_policy</span><span class="p">,</span>
                         <span class="n">target_phase_type</span><span class="p">,</span> 
                         <span class="n">call_completion</span><span class="p">,</span> 
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'97278000-72fd-45d7-9b67-e44690bdb074'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Subscription</span><span class="p">(</span><span class="n">product_name</span><span class="o">=</span><span class="s">'Super'</span><span class="p">,</span>
                    <span class="n">billing_period</span><span class="o">=</span><span class="s">'MONTHLY'</span><span class="p">,</span>
                    <span class="n">price_list</span><span class="o">=</span><span class="s">'DEFAULT'</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">change_subscription_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                         <span class="n">body</span><span class="p">,</span>
                                         <span class="n">created_by</span><span class="p">,</span>
                                         <span class="n">api_key</span><span class="p">,</span>
                                         <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A subscription resource object specifying either the <code>planName</code> or a combination of <code>productName</code>, <code>billingPeriod</code> and <code>priceList</code>. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>no</td>
<td>default</td>
<td>Billing policy that will be used to make this change effective (see below)</td>
</tr>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date/DateTime at which this change should become effective in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code>  format.</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p><strong>billingPolicy</strong>: Possible values are START_OF_TERM, END_OF_TERM, IMMEDIATE, or ILLEGAL</p>

<p><strong>requestedDate</strong>: This date is only used if no billingPolicy was specified.</p>

<p>Changing the plan associated to a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-undo-a-pending-change-plan-on-a-subscription'>Undo a pending change plan on a subscription</h3>
<p>This endpoint allows a pending <code>Plan</code> change (plan change request with a future effective date) for a given subscription to be canceled. Note that if the plan change is already effective, then it cannot be undone. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/undoChangePlan</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/undoChangePlan'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">undoChangeSubscriptionPlan</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                           <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span><span class="p">.</span><span class="nf">undo_change_plan</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                              <span class="n">reason</span><span class="p">,</span> 
                              <span class="n">comment</span><span class="p">,</span> 
                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">undo_change_subscription_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-cancel-a-subscription'>Cancel a subscription</h3>
<p>This API cancels an existing subscription.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712'</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"905a0636-ab63-40c0-acd4-b461b6808b5d"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">EntitlementActionPolicy</span> <span class="n">entitlementPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">BillingActionPolicy</span> <span class="n">billingPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">cancelSubscriptionPlan</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                       <span class="n">requestedDate</span><span class="o">,</span> 
                                       <span class="n">entitlementPolicy</span><span class="o">,</span> 
                                       <span class="n">billingPolicy</span><span class="o">,</span> 
                                       <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">entitlement_policy</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">billing_policy</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">use_requested_date_for_billing</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">cancel</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">requested_date</span><span class="p">,</span> 
                    <span class="n">entitlement_policy</span><span class="p">,</span> 
                    <span class="n">billing_policy</span><span class="p">,</span> 
                    <span class="n">use_requested_date_for_billing</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'ee508b5b-46b8-42a7-8988-16c0470de4ae'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">cancel_subscription_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span> 
                                         <span class="n">created_by</span><span class="p">,</span>
                                         <span class="n">api_key</span><span class="p">,</span>
                                         <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date/DateTime at which this change should become effective in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code>  format.</td>
</tr>
<tr>
<td><strong>entitlementPolicy</strong></td>
<td>string</td>
<td>no</td>
<td>IMMEDIATE</td>
<td>entitlement policy (see below)</td>
</tr>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>no</td>
<td>default policy from catalog if present, otherwise <code>END_OF_TERM</code></td>
<td>billing policy (see below)</td>
</tr>
<tr>
<td><strong>useRequestedDateForBilling</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>use <strong>requestedDate</strong> for billing</td>
</tr>
<tr>
<td><strong>callCompletion</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>see below</td>
</tr>
<tr>
<td><strong>callTimeoutSec</strong></td>
<td>long</td>
<td>no</td>
<td>unlimited?</td>
<td>Timeout in seconds (see below)</td>
</tr>
</tbody></table>

<p><strong>entitlementPolicy</strong>: Possible values are IMMEDIATE, END_OF_TERM</p>

<p><strong>billingPolicy</strong>: Possible values are START_OF_TERM, END_OF_TERM, or IMMEDIATE</p>

<p>Creating a subscription often triggers the creation of an invoice, and associated with this there is often a payment (against the invoice). If <strong>callCompletion</strong> is true, the call to this API will be delayed until the invoice is created and/or the payment is processed. However, the maximum delay in seconds will be given by <strong>callTimeoutSec</strong>.</p>

<p>Since we offer the ability to control the cancelation date for both entitlement (service) and billing either through policies, dates or null values (now), it is important to understand how those parameters work:</p>

<ul>
<li>If <code>entitlementPolicy</code> has been defined, the <code>requestedDate</code> is ignored, and we either default to the catalog defined <code>billingPolicy</code> for this <code>Plan</code>, or use the one provided in this API.</li>
<li>If not, the <code>requestedDate</code> is used to compute the entitlement cancelation date, and the null value means change should be immediate. The billing date will then be computed the following way:

<ul>
<li>If <code>billingPolicy</code> has been specified, it is used to compute the billing cancelation date</li>
<li>If <code>billingPolicy</code> has not been specified, we either use the <code>requestedDate</code> when <code>useRequestedDateForBilling</code> is true or default to the catalog defined <code>billingPolicy</code> for this <code>Plan</code></li>
</ul></li>
</ul>

<p>So, the common use case would require the following:</p>

<ul>
<li><strong>Immediate cancelation</strong>: This will create a prorated credit unless this aligns with the subscription charged through date (<code>CTD</code>), that is, the date up to which it was invoiced, and then from an entitlement point of view it will deactivate service immediately. In order to achieve this result, one can pass the following parameters: <code>entitlementPolicy</code>=<code>IMMEDIATE</code> and <code>billingPolicy</code>=<code>IMMEDIATE</code>; alternatively passing no parameters and therefore a null <code>requestedDate</code> would produce the same result.</li>
<li><strong>EOT cancelation</strong>: This will not create any proration and will keep the service active until the end of the period (<code>CTD</code>). In order to achieve this result, one can pass the following parameters: <code>entitlementPolicy</code>=<code>END_OF_TERM</code> and <code>billingPolicy</code>=<code>END_OF_TERM</code>.</li>
</ul>

<p>The reason for all this complexity is to allow to control entitlement and billing date separately, and also avoid users to have to compute dates to achieve certain behavior by relying on well defined policies.</p>

<p><strong>Other Notes:</strong>
* If a subscription is created with a future date and if the cancel method is invoked for immediate cancellation, the cancellation takes effect only after the subscription creation date is reached. Thus, the subscription remains in <code>PENDING</code> state until the subscription creation date is reached after which it is moved to the <code>CANCELLED</code> state.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-un-cancel-a-subscription'>Un-cancel a subscription</h3>
<p>This endpoint allows you to undo a pending cancellation (cancellation request with a future effective date) for a given subscription.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/uncancel</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/uncancel'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">uncancelSubscriptionPlan</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                         <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span><span class="p">.</span><span class="nf">uncancel</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                      <span class="n">reason</span><span class="p">,</span> 
                      <span class="n">comment</span><span class="p">,</span> 
                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">uncancel_subscription_plan</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                           <span class="n">created_by</span><span class="p">,</span>
                                           <span class="n">api_key</span><span class="p">,</span>
                                           <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='subscription-blocking-state'>Blocking State</h2>
<p>See section <a href="#account-blocking-state">Account Blocking State</a> for an introduction to blocking states.</p>
<h3 id='subscription-block-a-subscription'>Block a subscription</h3>
<p>Provides a low level interface to add a <code>BlockingState</code> event for this subscription. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/block</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "stateName": "STATE",
            "service": "ServiceStateService",
            "isBlockChange": false,
            "isBlockEntitlement": false,
            "isBlockBilling": false
    }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/block'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"161692a4-c293-410c-a92f-939c5e3dcba7"</span><span class="o">);</span>

<span class="n">BlockingState</span> <span class="n">blockingState</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BlockingState</span><span class="o">();</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setStateName</span><span class="o">(</span><span class="s">"STATE1"</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setService</span><span class="o">(</span><span class="s">"ServiceStateService"</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockChange</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockBilling</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">blockingState</span><span class="o">.</span><span class="na">setIsBlockEntitlement</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-08-01"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyMap</span><span class="o">();</span>

<span class="n">BlockingStates</span> <span class="n">result</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">addSubscriptionBlockingState</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                                                     <span class="n">blockingState</span><span class="o">,</span>
                                                                     <span class="n">requestedDate</span><span class="o">,</span>
                                                                     <span class="n">pluginProperty</span><span class="o">,</span>
                                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Subscription</span><span class="p">.</span><span class="nf">new</span>
<span class="n">subscription</span><span class="p">.</span><span class="nf">subscription_id</span> <span class="o">=</span> <span class="s2">"161692a4-c293-410c-a92f-939c5e3dcba7"</span>

<span class="n">state_name</span> <span class="o">=</span> <span class="s1">'STATE1'</span>
<span class="n">service</span> <span class="o">=</span> <span class="s1">'ServiceStateService'</span>
<span class="n">block_change</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_entitlement</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_billing</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">set_blocking_state</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span> 
                                <span class="n">service</span><span class="p">,</span> 
                                <span class="n">block_change</span><span class="p">,</span> 
                                <span class="n">block_entitlement</span><span class="p">,</span> 
                                <span class="n">block_billing</span><span class="p">,</span> 
                                <span class="n">requested_date</span><span class="p">,</span> 
                                <span class="n">user</span><span class="p">,</span> 
                                <span class="n">reason</span><span class="p">,</span>
                                <span class="n">comment</span><span class="p">,</span> 
                                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">BlockingState</span><span class="p">(</span><span class="n">state_name</span><span class="o">=</span><span class="s">'STATE1'</span><span class="p">,</span>
                     <span class="n">service</span><span class="o">=</span><span class="s">'ServiceStateService'</span><span class="p">,</span>
                     <span class="n">is_block_change</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">is_block_entitlement</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">is_block_billing</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">add_subscription_blocking_state</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                <span class="n">body</span><span class="p">,</span>
                                                <span class="n">created_by</span><span class="p">,</span>
                                                <span class="n">api_key</span><span class="p">,</span>
                                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A blocking state resource representing the intended new blocking state. For example,</p>
<pre class="highlight plaintext"><code>{
  "blockedId": "943c4fd0-9000-4975-a3a8-09712223e1f8",
  "stateName": "STATE1",
  "service": "ServiceStateService",
  "isBlockChange": false,
  "isBlockEntitlement": false,
  "isBlockBilling": true,
  "effectiveDate": "2020-07-18T18:22:30.376Z",
  "type": "SUBSCRIPTION"
}
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>Date/DateTime to begin blocking in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h2 id='subscription-custom-fields'>Custom Fields</h2>
<p><code>Custom fields</code> are <code>{key, value}</code> attributes that can be attached to any customer resources. For more on custom fields see <a href="#custom-fields">Custom Fields</a>. These endpoints manage custom fields associated with <code>Subscription</code> objects.</p>
<h3 id='subscription-add-custom-fields-to-subscription'>Add custom fields to subscription</h3>
<p>Adds one or more custom fields to a subscription object. Existing custom fields are not disturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "objectId": "77e23878-8b9d-403b-bf31-93003e125712",
            "objectType": "SUBSCRIPTION",
            "name": "Test Custom Field",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">subscriptionId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">SUBSCRIPTION</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscriptionCustomFields</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                               <span class="n">customFields</span><span class="o">,</span> 
                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'SUBSCRIPTION'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                              <span class="n">user</span><span class="p">,</span>
                              <span class="n">reason</span><span class="p">,</span>
                              <span class="n">comment</span><span class="p">,</span>
                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscription_custom_fields</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                  <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                  <span class="n">created_by</span><span class="p">,</span>
                                                  <span class="n">api_key</span><span class="p">,</span>
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects giving the name and value of the custom field, or fields, to be added. For example:</p>

<p>[
      {
        &quot;name&quot;: &quot;CF1&quot;,
        &quot;value&quot;: &quot;123&quot;
      }
    ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code.In addition, a Location header is returned giving the URL to retrieve the custom fields associated with the subscription.</p>
<h3 id='subscription-retrieve-subscription-custom-fields'>Retrieve subscription custom fields</h3>
<p>Returns any custom field objects associated with the specified subscription</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscriptionCustomFields</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                                                             <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'642ee0ac-972b-4cdf-b9ae-ab8f9bb9bc05'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">get_subscription_custom_fields</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                               <span class="n">api_key</span><span class="p">,</span>
                                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="s2">"439ed0f8-9b37-4688-bace-e2595b1d3801"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"objectId"</span><span class="p">:</span><span class="s2">"77e23878-8b9d-403b-bf31-93003e125712"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"objectType"</span><span class="p">:</span><span class="s2">"SUBSCRIPTION"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"value"</span><span class="p">:</span><span class="s2">"test_value"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='subscription-modify-custom-fields-for-a-subscription'>Modify custom fields for a subscription</h3>
<p>Modifies the value of one or more existing custom fields associated with a subscription. Note that it is not possible to modify the name of a custom field, it is only possible to modify its value.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "439ed0f8-9b37-4688-bace-e2595b1d3801",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>
<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">customFieldModified</span><span class="o">);</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">modifySubscriptionCustomFields</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                               <span class="n">customFields</span><span class="o">,</span> 
                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                                 <span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span>
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">modify_subscription_custom_fields</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                  <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                  <span class="n">created_by</span><span class="p">,</span>
                                                  <span class="n">api_key</span><span class="p">,</span>
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects specifying the id and the new value for the custom fields to be modified. For example:</p>

<p>[ { &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p>Although the <code>fieldName</code> and <code>objectType</code> can be specified in the request body, these cannot be modified, only the field value can be modified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='subscription-remove-custom-fields-from-subscription'>Remove custom fields from subscription</h3>
<p>Delete one or more custom fields from a subscription</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/customFields?customField=439ed0f8-9b37-4688-bace-e2595b1d3801'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">UUID</span><span class="o">&gt;</span> <span class="n">customFieldsList</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">deleteSubscriptionCustomFields</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                               <span class="n">customFieldsList</span><span class="o">,</span> 
                                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                                 <span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span>
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">delete_subscription_custom_fields</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                  <span class="n">created_by</span><span class="p">,</span>
                                                  <span class="n">api_key</span><span class="p">,</span>
                                                  <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Custom field object ID that should be deleted. Multiple custom fields can be deleted by specifying a separate <strong>customField</strong> parameter corresponding to each field</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='subscription-tags'>Tags</h2>
<p>See section <a href="#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable for a <code>Subscription</code>.</p>
<h3 id='subscription-add-tags-to-subscription'>Add tags to subscription</h3>
<p>This API adds one or more tags to a subscription. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[
            "353752dd-9041-4450-b782-a8bb03a923c8"
        ]'</span> <span class="se">\</span>
  <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">createSubscriptionTags</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                                     <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                     <span class="n">user</span><span class="p">,</span>
                     <span class="n">reason</span><span class="p">,</span>
                     <span class="n">comment</span><span class="p">,</span>
                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">create_subscription_tags</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                         <span class="n">tag</span><span class="p">,</span>
                                         <span class="n">created_by</span><span class="p">,</span>
                                         <span class="n">api_key</span><span class="p">,</span>
                                         <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more strings giving the UUID of tag definitions for the user tags to be added.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned giving the URL to retrieve the tags associated with the subscription.</p>
<h3 id='subscription-retrieve-subscription-tags'>Retrieve subscription tags</h3>
<p>Retrieve all tags attached to this subscription.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscriptionTags</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                                     <span class="n">includedDeleted</span><span class="o">,</span> 
                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
                  <span class="n">audit</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">get_subscription_tags</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="s2">"d0513754-56a9-4694-abb1-3ac46c72e861"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="s2">"SUBSCRIPTION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="s2">"77e23878-8b9d-403b-bf31-93003e125712"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='subscription-remove-tags-from-subscription'>Remove tags from subscription</h3>
<p>This API removes a list of tags attached to a subscription.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/subscriptions/77e23878-8b9d-403b-bf31-93003e125712/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8'</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"1bb4b638-3886-4f73-90a5-89eb6d1bcf7f"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="na">deleteSubscriptionTags</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span> 
                                       <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">subscription</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                        <span class="n">user</span><span class="p">,</span>
                        <span class="n">reason</span><span class="p">,</span>
                        <span class="n">comment</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">subscriptionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">SubscriptionApi</span><span class="p">()</span>
<span class="n">subscription_id</span> <span class="o">=</span> <span class="s">'f5bb14ed-c6e8-4895-8d4e-34422e12cdfa'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">subscriptionApi</span><span class="o">.</span><span class="n">delete_subscription_tags</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                         <span class="n">created_by</span><span class="p">,</span>
                                         <span class="n">api_key</span><span class="p">,</span>
                                         <span class="n">api_secret</span><span class="p">,</span>
                                         <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of strings</td>
<td>true</td>
<td>none</td>
<td>A tag definition ID identifying the tag that should be removed. Multiple tags can be deleted by specifying a separate tagDef parameter corresponding to each tag.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='subscription-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='subscription-retrieve-subscription-audit-logs-with-history-by-subscription-id'>Retrieve subscription audit logs with history by subscription id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to the subscription. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/{subscriptionId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/subscriptions/70b6856e-6938-495f-9ae9-0a8ec0571c37/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"bc9b98e8-7497-4330-aa42-1fbc71a3d19c"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">auditLog</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscriptionAuditLogsWithHistory</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>                                                                                                                                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">465</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"migrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTIONS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTION_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionBaseTransition"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">465</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-22T23:35:14.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"migrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTIONS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTION_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs.</p>
<h3 id='subscription-retrieve-subscription-event-audit-logs-with-history-by-subscription-event-id'>Retrieve subscription event audit logs with history by subscription event id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to the subscription, based on a subscription event id. History information (a copy of the full subscription object) is included with each record. The id of a subscription event comes from the <a href="#account-retrieve-account-timeline">timeline api</a>.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/subscriptions/events/{subscriptionEventId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/subscriptions/events/9a1c85d5-beba-40c8-9268-f73e09c24007/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.SubscriptionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">SubscriptionApi</span> <span class="n">subscriptionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionEventId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b4b6f990-4456-4009-9e6c-9825a99a1f25"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">eventAuditLog</span> <span class="o">=</span> <span class="n">subscriptionApi</span><span class="o">.</span><span class="na">getSubscriptionEventAuditLogsWithHistory</span><span class="o">(</span><span class="n">subscriptionEventId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTION_EVENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a1c85d5-beba-40c8-9268-f73e09c24007"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1358</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalOrdering"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"API_USER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"userType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceListName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTION_EVENTS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUBSCRIPTION_EVENT_HISTORY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h1 id='bundle'>Bundle</h1>
<p>A Bundle (also known as Subscription Bundle) is a collection of subscriptions. Grouping certain subscriptions into a bundle is useful to ensure
that certain operations propagate to the group. A common example is cancellation. When cancelling a <code>BASE</code> subscription, which is part of a bundle,
any <code>ADD_ON</code> subscriptions in the same bundle are also cancelled automatically.</p>

<p>A Bundle is automatically created by the system when creating the initial (BASE) subscription. To add additional subscriptions in the same bundle, one must specify the <code>bundleId</code> for the bundle previously created.</p>
<h2 id='bundle-bundle-resource'>Bundle Resource</h2>
<p>The <code>Bundle</code> resource represents a bundle. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the bundle</td>
</tr>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>user</td>
<td>Optional external key for the bundle</td>
</tr>
<tr>
<td><strong>subscriptions</strong></td>
<td>array</td>
<td>system</td>
<td>List of subscriptions in the bundle</td>
</tr>
<tr>
<td><strong>timeline</strong></td>
<td>array</td>
<td>system</td>
<td>List of events for the bundle.</td>
</tr>
</tbody></table>

<p><strong>subscriptions</strong> is a read-only array of subscription resources for the subscriptions in this bundle.</p>

<p><strong>timeline</strong> is a read-only array of event resources for the events that have occurred for this bundle.</p>
<h2 id='bundle-bundle'>Bundle</h2>
<p>These endpoints support the basic operations on bundles. There is no create operation, because a bundle is automatically created when a BASE subscription is created.</p>
<h3 id='bundle-retrieve-a-bundle-by-id'>Retrieve a bundle by id</h3>
<p>This API retrieves a bundle resource object based on its bundle Id. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"90ec582a-5da8-49d5-a656-c63cbc9d30fd"</span><span class="o">);</span>

<span class="n">Bundle</span> <span class="n">result</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bundle_id</span> <span class="o">=</span> <span class="s2">"5b7a5f2d-4054-412f-b354-b722c2cff4ec"</span>

<span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NATIVE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
          </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"timeline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a bundle resource object.</p>
<h3 id='bundle-retrieve-a-bundle-by-external-key'>Retrieve a bundle by external key</h3>
<p>This API retrieves a bundle resource object based on its external key </p>

<p><strong>HTTP Request</strong> </p>

<p>Retrieves the details information for the <code>Bundle</code> using its <code>externalKey</code>.</p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles?externalKey=&lt;external_key&gt;</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles?externalKey=2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"93199"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted bundles</span>

<span class="n">Bundles</span> <span class="n">bundles</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundleByKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">,</span> 
                                           <span class="n">includedDeleted</span><span class="o">,</span>
                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">external_key</span> <span class="o">=</span> <span class="s1">'4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135'</span>
<span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>

<span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> 
                            <span class="n">included_deleted</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_external_key</span> <span class="o">=</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundle_by_key</span><span class="p">(</span><span class="n">bundle_external_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NATIVE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EVERGREEN"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fixedPrice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"recurringPrice"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
          </span><span class="s2">"usagePrices"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"timeline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f058c95f-9a86-435b-8bba-4f8532635450"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>String</td>
<td>yes</td>
<td>none</td>
<td>The subscription external key</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a bundle resource object.</p>
<h3 id='bundle-update-a-bundle-external-key'>Update a bundle external key</h3>
<p>THis API sets a new external key for a bundle</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/renameKey</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d", "externalKey": "another_external_key"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/renameKey"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">externalKey</span> <span class="o">=</span> <span class="s">"another_external_key"</span><span class="o">;</span>
<span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
<span class="n">bundle</span><span class="o">.</span><span class="na">setExternalKey</span><span class="o">(</span><span class="n">externalKey</span><span class="o">);</span>
<span class="n">bundleApi</span><span class="o">.</span><span class="na">renameExternalKey</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> <span class="n">bundle</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">bundle_id</span> <span class="o">=</span> <span class="n">bundle_id</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">external_key</span> <span class="o">=</span> <span class="s2">"new_external_key"</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">rename_external_key</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span> 
                           <span class="n">comment</span><span class="p">,</span> 
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="o">=</span><span class="n">bundle_id</span><span class="p">,</span> 
              <span class="n">external_key</span><span class="o">=</span><span class="s">'new_external_key'</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">rename_external_key</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span>
                              <span class="n">body</span><span class="p">,</span>
                              <span class="n">created_by</span><span class="p">,</span>
                              <span class="n">api_key</span><span class="p">,</span>
                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A bundle resource containing the new external key</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='bundle-transfer'>Transfer</h2>
<p>Transfer a bundle to another account.</p>
<h3 id='bundle-transfer-a-bundle-to-another-account'>Transfer a bundle to another account</h3>
<p>This API &quot;transfers&quot; a bundle to another existing account. This is carried out as follows:</p>

<ol>
<li><p>A new bundle is created in the destination account. The new bundle is assigned a new id but receives the same external key from the original bundle.</p></li>
<li><p>All subscriptions in the original bundle are copied to the new bundle. The <strong>sourceType</strong> of these subscriptions is set to TRANSFERRED.</p></li>
<li><p>All subscriptions in the original bundle are marked cancelled as of the transfer date but are not deleted. Billing is terminated on the transfer date or later according to the billing policy.</p></li>
<li><p>The subscriptions in the new bundle are assigned a start date as of the time of transfer, and inherit all of the terms and remaining dates from the original subscription.</p></li>
</ol>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "accountId": "8785164f-b5d7-4da1-9495-33f5105e8d80", "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b84a8af9-73d4-4749-8d81-38dbcc2d7fb1"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d82d3638-fca7-4c16-9e68-8f8db75997cc"</span><span class="o">);</span>

<span class="n">Bundle</span> <span class="n">bundle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bundle</span><span class="o">();</span>
<span class="n">bundle</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">bundle</span><span class="o">.</span><span class="na">setBundleId</span><span class="o">(</span><span class="n">bundleId</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">BillingActionPolicy</span> <span class="n">billingPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Bundle</span> <span class="n">result</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">transferBundle</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                         <span class="n">bundle</span><span class="o">,</span> 
                                         <span class="n">requestedDate</span><span class="o">,</span> 
                                         <span class="n">billingPolicy</span><span class="o">,</span>
                                         <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>
<span class="n">billing_policy</span> <span class="o">=</span> <span class="s2">"END_OF_TERM"</span>

<span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">account_id</span> <span class="o">=</span> <span class="n">new_account_id</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">bundle_id</span> <span class="o">=</span> <span class="n">bundle_id</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">transfer</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span> 
                <span class="n">billing_policy</span><span class="p">,</span> 
                <span class="n">user</span><span class="p">,</span> 
                <span class="n">reason</span><span class="p">,</span> 
                <span class="n">comment</span><span class="p">,</span> 
                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span>
<span class="n">new_account_id</span> <span class="o">=</span> <span class="s">'71499886-296d-4b0f-8b76-0eed352d8801'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="o">=</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">account_id</span><span class="o">=</span><span class="n">new_account_id</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">transfer_bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                          <span class="n">body</span><span class="p">,</span> 
                          <span class="n">created_by</span><span class="p">,</span> 
                          <span class="n">api_key</span><span class="p">,</span> 
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A bundle resource containing at least the new account id</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>Requested date for the transfer of the bundle</td>
</tr>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>no</td>
<td>END_OF_TERM</td>
<td>When billing for target account should occur. Accepted values are END_OF_TERM or IMMEDIATE</td>
</tr>
<tr>
<td><strong>bcdTransfer</strong></td>
<td>string</td>
<td>no</td>
<td>USE_EXISTING</td>
<td>Specifies how the per subscription BCD should be transferred. Accepted values are NONE, USE_EXISTING and ALIGN_WITH_EFF_DT. See notes below</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any</td>
</tr>
</tbody></table>

<p>Possible values for the <strong>bcdTransfer</strong> parameter are as explained below:
* NONE: Does not transfer per-subscription BCD
* USE_EXISTING: Transfer existing per-subscription BCD if exists
* ALIGN_WITH_EFF_DT: Set per-subscription BCD to align with the day of the transfer effective date</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201. In addition, a Location header containing the bundleId in the target account is returned. </p>
<h2 id='bundle-blocking-state'>Blocking State</h2>
<p>See section <a href="#account-blocking-state">Account Blocking State</a> for an introduction.</p>
<h3 id='bundle-pause-a-bundle'>Pause a bundle</h3>
<p>Provides a simple interface to pause both billing and entitlement for all subscriptions in a bundle. The <strong>state</strong> attribute in the bundle resource is set to ENT_BLOCKED.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/pause</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>  curl -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/pause"</span> <span class="se">\</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"96a2ba35-de50-4db9-98bb-938cf1e5f616"</span><span class="o">);</span>
<span class="n">LoalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">bundleApi</span><span class="o">.</span><span class="na">pauseBundle</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> <span class="n">requestedDate</span><span class="o">,</span> <span class="n">pluginProperty</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">bundle_id</span> <span class="o">=</span> <span class="n">bundle_id</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">pause</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span> 
             <span class="n">user</span><span class="p">,</span> 
             <span class="n">reason</span><span class="p">,</span> 
             <span class="n">comment</span><span class="p">,</span> 
             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">pause_bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                       <span class="n">created_by</span><span class="p">,</span> 
                       <span class="n">api_key</span><span class="p">,</span> 
                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date for pausing</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='bundle-resume-a-bundle'>Resume a bundle</h3>
<p>Provides a simple interface to resume both billing and entitlement for all subscriptions in the bundle. The state of the bundle resource is set to ENT_CLEAR.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/resume</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/resume"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"96a2ba35-de50-4db9-98bb-938cf1e5f616"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">bundleApi</span><span class="o">.</span><span class="na">resumeBundle</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> <span class="n">requestedDate</span><span class="o">,</span> <span class="n">pluginProperty</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>    
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">bundle</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Bundle</span><span class="p">.</span><span class="nf">new</span>
<span class="n">bundle</span><span class="p">.</span><span class="nf">bundle_id</span> <span class="o">=</span> <span class="n">bundle_id</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">resume</span><span class="p">(</span><span class="n">requested_date</span><span class="p">,</span> 
              <span class="n">user</span><span class="p">,</span> 
              <span class="n">reason</span><span class="p">,</span> 
              <span class="n">comment</span><span class="p">,</span> 
              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">resume_bundle</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                        <span class="n">created_by</span><span class="p">,</span> 
                        <span class="n">api_key</span><span class="p">,</span> 
                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date to resume</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='bundle-block-a-bundle'>Block a bundle</h3>
<p>Provides a low level interface to add a <code>BlockingState</code> event for this bundle. Note that the previous <a href="#bundle-pause-a-bundle">pause</a> and <a href="#bundle-resume-a-bundle">resume</a> operations can be achieved using this API.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/block</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "stateName": "STATE1", "service": "ServiceStateService", "isBlockChange": false, "isBlockEntitlement": false, "isBlockBilling": false, "effectiveDate": "2018-07-17T21:17:28.842Z", "type": "SUBSCRIPTION" }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/block"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b84a8af9-73d4-4749-8d81-38dbcc2d7fb1"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">stateName</span> <span class="o">=</span> <span class="s">"block"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">service</span> <span class="o">=</span> <span class="s">"service"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">isBlockChange</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">isBlockEntitlement</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">isBlockBilling</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">DateTime</span> <span class="n">effectiveDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">auditLogs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">BlockingState</span> <span class="n">blockingState</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BlockingState</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                                <span class="n">stateName</span><span class="o">,</span> 
                                                <span class="n">service</span><span class="o">,</span> 
                                                <span class="n">isBlockChange</span><span class="o">,</span> 
                                                <span class="n">isBlockEntitlement</span><span class="o">,</span> 
                                                <span class="n">isBlockBilling</span><span class="o">,</span> 
                                                <span class="n">effectiveDate</span><span class="o">,</span> 
                                                <span class="n">BlockingStateType</span><span class="o">.</span><span class="na">SUBSCRIPTION_BUNDLE</span><span class="o">,</span> 
                                                <span class="n">auditLogs</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="na">getToday</span><span class="o">(</span><span class="n">DateTimeZone</span><span class="o">.</span><span class="na">forID</span><span class="o">(</span><span class="n">account</span><span class="o">.</span><span class="na">getTimeZone</span><span class="o">()));</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyMap</span><span class="o">();</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="na">addBundleBlockingState</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                 <span class="n">blockingState</span><span class="o">,</span> 
                                 <span class="n">requestedDate</span><span class="o">,</span> 
                                 <span class="n">pluginProperty</span><span class="o">,</span> 
                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">state_name</span> <span class="o">=</span> <span class="s2">"STATE1"</span>
<span class="n">service</span> <span class="o">=</span> <span class="s2">"ServiceStateService"</span>
<span class="n">block_change</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_entitlement</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">block_billing</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">requested_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">set_blocking_state</span><span class="p">(</span><span class="n">state_name</span><span class="p">,</span>
                          <span class="n">service</span><span class="p">,</span>
                          <span class="n">block_change</span><span class="p">,</span> 
                          <span class="n">block_entitlement</span><span class="p">,</span>
                          <span class="n">block_billing</span><span class="p">,</span> 
                          <span class="n">requested_date</span><span class="p">,</span>
                          <span class="n">user</span><span class="p">,</span> 
                          <span class="n">reason</span><span class="p">,</span> 
                          <span class="n">comment</span><span class="p">,</span>
                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">BlockingState</span><span class="p">(</span><span class="n">state_name</span><span class="o">=</span><span class="s">'STATE1'</span><span class="p">,</span> 
                     <span class="n">service</span><span class="o">=</span><span class="s">'ServiceStateService'</span><span class="p">,</span> 
                     <span class="n">is_block_change</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
                     <span class="n">is_block_entitlement</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
                     <span class="n">is_block_billing</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">add_bundle_blocking_state</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span>
                                    <span class="n">body</span><span class="p">,</span>
                                    <span class="n">created_by</span><span class="p">,</span>
                                    <span class="n">api_key</span><span class="p">,</span>
                                    <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A blocking state resource representing the intended new blocking state. For example,</p>

<p>{
      &quot;blockedId&quot;: &quot;943c4fd0-9000-4975-a3a8-09712223e1f8&quot;,<br>
      &quot;stateName&quot;: &quot;STATE1&quot;,<br>
      &quot;service&quot;: &quot;ServiceStateService&quot;,<br>
      &quot;isBlockChange&quot;: false,<br>
      &quot;isBlockEntitlement&quot;: false,<br>
      &quot;isBlockBilling&quot;: true,
      &quot;effectiveDate&quot;: &quot;2020-07-18T18:22:30.376Z&quot;,
      &quot;type&quot;: &quot;SUBSCRIPTION_BUNDLE&quot;
    }</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>immediate</td>
<td>requested date for blocking</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h2 id='bundle-custom-fields'>Custom Fields</h2>
<p><code>Custom fields</code> are <code>{key, value}</code> attributes that can be attached to any customer resources. For more on custom fields see <a href="#custom-fields">Custom Fields</a>. These endpoints manage custom fields associated with <code>Bundle</code> objects.</p>
<h3 id='bundle-add-custom-fields-to-bundle'>Add custom fields to bundle</h3>
<p>Adds one or more custom fields to a subscription object. Existing custom fields are not disturbed.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "objectType": "BUNDLE", "name": "Test Custom Field", "value": "demo_test_value" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"b84a8af9-73d4-4749-8d81-38dbcc2d7fb1"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">bundleId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">BUNDLE</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="na">createBundleCustomFields</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                   <span class="n">customFields</span><span class="o">,</span> 
                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'BUNDLE'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                        <span class="n">user</span><span class="p">,</span>
                        <span class="n">reason</span><span class="p">,</span>
                        <span class="n">comment</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">create_bundle_custom_fields</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span>
                                      <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                      <span class="n">created_by</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects giving the name and value of the custom field, or fields, to be added. For example:</p>

<p>[
      {
        &quot;name&quot;: &quot;CF1&quot;,
        &quot;value&quot;: &quot;123&quot;
      }
    ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned giving the URL to retrieve the custom fields associated with the bundle.</p>
<h3 id='bundle-retrieve-bundle-custom-fields'>Retrieve bundle custom fields</h3>
<p>Retrieves any custom field objects associated with the specified bundle</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">bundleCustomFields</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundleCustomFields</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span>
                                                                       <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundle_custom_fields</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"349de10f-4bb1-4e1a-93f6-11b745200bf5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUNDLE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo_test_value"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='bundle-modify-custom-fields-for-a-bundle'>Modify custom fields for a bundle</h3>
<p>Modifies the value of one or more existing custom fields associated with a bundle</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "customFieldId": "349de10f-4bb1-4e1a-93f6-11b745200bf5", "objectId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d", "objectType": "BUNDLE", "name": "Test Custom Field", "value": "test_modify_value", "auditLogs": [] }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>
<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">customFieldModified</span><span class="o">);</span>
<span class="n">bundleApi</span><span class="o">.</span><span class="na">modifyBundleCustomFields</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                   <span class="n">customFields</span><span class="o">,</span> 
                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                           <span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span>
                           <span class="n">comment</span><span class="p">,</span> 
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">modify_bundle_custom_fields</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                                      <span class="p">[</span><span class="n">body</span><span class="p">],</span> 
                                      <span class="n">created_by</span><span class="p">,</span> 
                                      <span class="n">api_key</span><span class="p">,</span> 
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of objects specifying the id and the new value for the custom fields to be modified. For example:</p>

<p>[ { &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p>Although the <code>fieldName</code> and <code>objectType</code> can be specified in the request body, these cannot be modified, only the field value can be modified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='bundle-remove-custom-fields-from-bundle'>Remove custom fields from bundle</h3>
<p>Delete one or more custom fields from a bundle</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields?customField=349de10f-4bb1-4e1a-93f6-11b745200bf5"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">UUID</span><span class="o">&gt;</span> <span class="n">customFieldsList</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">bundleApi</span><span class="o">.</span><span class="na">deleteBundleCustomFields</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                   <span class="n">customFieldsList</span><span class="o">,</span> 
                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span> 
                           <span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span>
                           <span class="n">comment</span><span class="p">,</span> 
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'ce967207-851c-4040-bfbd-74a8924f9b8a'</span> 

<span class="n">bundleApi</span><span class="o">.</span><span class="n">delete_bundle_custom_fields</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                                      <span class="n">created_by</span><span class="p">,</span> 
                                      <span class="n">api_key</span><span class="p">,</span> 
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Custom field object ID that should be deleted. Multiple custom fields can be deleted by specifying a separate <strong>customField</strong> parameter corresponding to each field</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='bundle-tags'>Tags</h2>
<p>See section <a href="#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable for a <code>Bundle</code>.</p>

<p>Let&#39;s assume there is an existing <code>user</code> tagDefintion already created with <code>tagDefinitionId</code>=<code>353752dd-9041-4450-b782-a8bb03a923c8</code>.</p>
<h3 id='bundle-add-tags-to-bundle'>Add tags to bundle</h3>
<p>This API adds one or more tags to a subscription bundle. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ "353752dd-9041-4450-b782-a8bb03a923c8"]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">createBundleTags</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                         <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
               <span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span>
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">create_bundle_tags</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                             <span class="n">tag</span><span class="p">,</span> 
                             <span class="n">created_by</span><span class="p">,</span> 
                             <span class="n">api_key</span><span class="p">,</span> 
                             <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more strings giving the UUID of tag definitions for the user tags to be added.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned giving the URL to retrieve the tags associated with the bundle.</p>
<h3 id='bundle-retrieve-bundle-tags'>Retrieve bundle tags</h3>
<p>Retrieve all tags attached to this bundle.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags1</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundleTags</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                                          <span class="n">includedDeleted</span><span class="o">,</span> 
                                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
            <span class="n">audit</span><span class="p">,</span>
            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundle_tags</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e054c84a-0518-4611-92a8-53e849f0affd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUNDLE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='bundle-remove-tags-from-bundle'>Remove tags from bundle</h3>
<p>This API removes a list of tags attached to a bundle.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="na">deleteBundleTags</span><span class="o">(</span><span class="n">bundleId</span><span class="o">,</span> 
                           <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                  <span class="n">user</span><span class="p">,</span>
                  <span class="n">reason</span><span class="p">,</span>
                  <span class="n">comment</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">bundle_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">delete_bundle_tags</span><span class="p">(</span><span class="n">bundle_id</span><span class="p">,</span> 
                             <span class="n">created_by</span><span class="p">,</span> 
                             <span class="n">api_key</span><span class="p">,</span> 
                             <span class="n">api_secret</span><span class="p">,</span>
                             <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of strings</td>
<td>true</td>
<td>none</td>
<td>A tag definition ID identifying the tag that should be removed. Multiple tags can be deleted by specifying a separate tagDef parameter corresponding to each tag.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='bundle-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='bundle-retrieve-bundle-audit-logs-with-history-by-bundle-id'>Retrieve bundle audit logs with history by bundle id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to the bundle. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/bundles/d1b329c7-7dcf-466c-aaca-47bff304dab0/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUNDLE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">316</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastSysUpdateDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"originalCreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUNDLES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUNDLE_HISTORY"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUNDLE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionBaseTransition"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">316</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastSysUpdateDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"originalCreatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUNDLES"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUNDLE_HISTORY"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs.</p>
<h2 id='bundle-list-search'>List/Search</h2><h3 id='bundle-list-bundles'>List bundles</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/bundles/pagination"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

<span class="n">Bundles</span> <span class="n">allBundles</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">getBundles</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span> 
                                          <span class="n">limit</span><span class="o">,</span> 
                                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                       <span class="n">limit</span><span class="p">,</span>
                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">get_bundles</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">,)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_external_key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_external_key"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELLED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NATIVE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01387e92-8b6c-4c74-811f-3d2698646049"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_CANCELLED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d605f2d-e605-47d5-b55c-904a0cba12f8"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9f343aa-3650-4709-a09d-8a3df908bd47"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SERVICE_STATE_CHANGE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ServiceStateService"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATE1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"timeline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_external_key"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01387e92-8b6c-4c74-811f-3d2698646049"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_ENTITLEMENT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_CANCELLED"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d605f2d-e605-47d5-b55c-904a0cba12f8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9f343aa-3650-4709-a09d-8a3df908bd47"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SERVICE_STATE_CHANGE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ServiceStateService"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATE1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02134ca5-8254-4c73-aaf2-89ed99a28fce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02134ca5-8254-4c73-aaf2-89ed99a28fce"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3b78a8c1-30fb-4b4e-a247-b131cbf6fa71"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRANSFERRED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
      </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f247597d-deac-468e-8b18-9a04c633ec71"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SERVICE_STATE_CHANGE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CLOSE_ACCOUNT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15987747-2c28-4475-965c-3b1cff08faa9"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51c53d93-d3c1-4906-b295-c5a1b0d761e7"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cf6cd36-d0d1-461b-b525-f2a36a73be76"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"timeline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"02134ca5-8254-4c73-aaf2-89ed99a28fce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f247597d-deac-468e-8b18-9a04c633ec71"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SERVICE_STATE_CHANGE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CLOSE_ACCOUNT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15987747-2c28-4475-965c-3b1cff08faa9"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51c53d93-d3c1-4906-b295-c5a1b0d761e7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cf6cd36-d0d1-461b-b525-f2a36a73be76"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-17"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement+billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PHASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>maximum number of items listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list with all bundles.</p>
<h3 id='bundle-search-bundles'>Search bundles</h3>
<p>Search for a bundle by a specified search string.  The search string is compared to the <code>accountId</code>, the <code>bundleId</code>, and the bundle <code>externalKey</code>. The operation returns all bundle resources in which the search string matches any one of these attributes. Note: the string must match the <em>entire</em> attribute, not just a part of it.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/bundles/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/bundles/search/another_external_key"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.BundleApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">BundleApi</span> <span class="n">bundleApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"93199"</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

<span class="n">Bundles</span> <span class="n">result</span> <span class="o">=</span> <span class="n">bundleApi</span><span class="o">.</span><span class="na">searchBundles</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                                         <span class="n">offset</span><span class="o">,</span> 
                                         <span class="n">limit</span><span class="o">,</span> 
                                         <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'example'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">bundle</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                     <span class="n">offset</span><span class="p">,</span>
                                     <span class="n">limit</span><span class="p">,</span>
                                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">bundleApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">BundleApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'7b26b0ce-a495-4c0c-9dd5-11a556f03e8c'</span>

<span class="n">bundleApi</span><span class="o">.</span><span class="n">search_bundles</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_external_key"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8ab101b6-15e8-433b-b4f7-f99eeaa56a77"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_external_key"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productCategory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRIAL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELLED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"sourceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NATIVE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"cancelledDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"chargedThroughDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingStartDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billingEndDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"billCycleDayLocal"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01387e92-8b6c-4c74-811f-3d2698646049"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_ENTITLEMENT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_CANCELLED"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d605f2d-e605-47d5-b55c-904a0cba12f8"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_BILLING"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9f343aa-3650-4709-a09d-8a3df908bd47"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SERVICE_STATE_CHANGE"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ServiceStateService"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATE1"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"priceOverrides"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prices"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"timeline"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_external_key"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3961e5a4-815c-4e95-aca6-2f3e76c37942"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_ENTITLEMENT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_STARTED"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e7a6a7d-7660-49e3-979c-a4a0b6ec6804"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"START_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01387e92-8b6c-4c74-811f-3d2698646049"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_ENTITLEMENT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"entitlement-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ENT_CANCELLED"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d605f2d-e605-47d5-b55c-904a0cba12f8"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing-service"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STOP_BILLING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e9f343aa-3650-4709-a09d-8a3df908bd47"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"billingPeriod"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTHLY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"priceList"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SERVICE_STATE_CHANGE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedBilling"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"isBlockedEntitlement"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ServiceStateService"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"serviceStateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STATE1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phase"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-trial"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>String to be matched</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>maximum number of items listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list with all bundles that are matched by the search key.</p>
<h1 id='invoice'>Invoice</h1>
<p>An invoice is a bill provided to a customer for charges that are payable on the customer&#39;s account. A single invoice consolidates charges for all subscriptions held by that customer for a specified time period. Invoices may be set to be paid automatically, or may be paid manually by the customer.</p>

<p>An invoice contains a list of <code>InvoiceItem</code>s. The system will always invoice at the <code>Account</code> level, and will therefore create as many items on a given
invoice as there are things to invoice. Given an active <code>Subscription</code>, one could see multiple items for that subscription on a single invoice including recurring items, usage items, fixed price items, etc. There can also be items for different subscriptions on the same invoice, as well as items that are unrelated to subscriptions such as adjustments and taxes.</p>

<p>An invoice can be generated manually if there are any outstanding charges. In addition, charges can be explicitly added that will also result in an invoice being generated. Invoices can also be automatically generated by the system when there are existing active subscriptions for the <code>Account</code>. In the latter case, the <code>targetDate</code> will determine up to which point to invoice, and the billing mode (<code>IN_ADVANCE</code> or <code>IN_ARREAR</code>) will determine which period to charge for.</p>

<p>An invoice can have one of the following status values: DRAFT, COMMITTED, or VOID.</p>

<ul>
<li><p>An invoice in DRAFT status is open to receive additional items, and is not considered by the rest of the system when computing account balances or related values.</p></li>
<li><p>A COMMITTED invoice is immutable, and its balance is reflected at the Account level. Payments can only happen against COMMITTED invoices.</p></li>
<li><p>A VOID invoice is ignored by the rest of the system. A DRAFT or COMMITTED invoice may be voided, but only if there are no successful payments against that invoice. Thus before voiding an invoice, any successful payments need to be refunded.</p></li>
</ul>
<h2 id='invoice-invoice-resource'>Invoice Resource</h2>
<p>An <code>Invoice</code> resource represents an invoice associated with a specific account. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Sum of all item amounts</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>string</td>
<td>system</td>
<td>Status of the invoice: DRAFT, COMMITTED or VOID</td>
</tr>
<tr>
<td><strong>creditAdj</strong></td>
<td>number</td>
<td>system</td>
<td>Invoice credit (amount that we owe to the customer). It is calculated as the sum of <code>CBA_ADJ</code> invoice items</td>
</tr>
<tr>
<td><strong>refundAdj</strong></td>
<td>number</td>
<td>system</td>
<td>Refund amount associated with an invoice. It is calculated as the sum of all invoice payment amounts of type <code>REFUND</code> and <code>CHARGED_BACK</code>.</td>
</tr>
<tr>
<td><strong>invoiceDate</strong></td>
<td>date</td>
<td>system</td>
<td>Date when this invoice was generated</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>date</td>
<td>user or system</td>
<td>Date up to which the account has been invoiced</td>
</tr>
<tr>
<td><strong>invoiceNumber</strong></td>
<td>number</td>
<td>system</td>
<td>Invoice number</td>
</tr>
<tr>
<td><strong>balance</strong></td>
<td>number</td>
<td>system</td>
<td>Invoice balance (amount that a customer owes as part of an invoice). At a high level, it is calculated as the sum of all item amounts minus the payment amount. See <a href="https://docs.killbill.io/latest/invoice_examples.html#_invoice_balance">Invoice Balance</a> for further details.</td>
</tr>
<tr>
<td><strong>bundleKeys</strong></td>
<td>list</td>
<td>system</td>
<td>List of bundles invoiced. Deprecated.</td>
</tr>
<tr>
<td><strong>credits</strong></td>
<td>list</td>
<td>system</td>
<td>List of credits associated with this invoice. Deprecated.</td>
</tr>
<tr>
<td><strong>items</strong></td>
<td>list</td>
<td>system</td>
<td>List of invoice items on this invoice</td>
</tr>
<tr>
<td><strong>isParentInvoice</strong></td>
<td>boolean</td>
<td>system</td>
<td>If true, this invoice is the parent in the hierarchical model</td>
</tr>
<tr>
<td><strong>parentInvoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>In the hierarchical model, UUID of the parent invoice</td>
</tr>
<tr>
<td><strong>parentAccountId</strong></td>
<td>string</td>
<td>system</td>
<td>In the hierarchical model, UUID of the parent account</td>
</tr>
</tbody></table>
<h2 id='invoice-invoiceitem-resource'>InvoiceItem Resource</h2>
<p>An <code>InvoiceItem</code> resource represents a single item charged on an invoice. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoiceItemId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice item</td>
</tr>
<tr>
<td><strong>invoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice</td>
</tr>
<tr>
<td><strong>linkedInvoiceItemId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the linked item, if any (see below)</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>childAccountId</strong></td>
<td>string</td>
<td>system</td>
<td>In the hierarchical model, the UUID of the child account</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the bundle</td>
</tr>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the subscription (present only if invoice item corresponds to a subscription)</td>
</tr>
<tr>
<td><strong>planName</strong></td>
<td>string</td>
<td>system</td>
<td>Name of the <code>Plan</code> for this subscription if any</td>
</tr>
<tr>
<td><strong>phaseName</strong></td>
<td>string</td>
<td>system</td>
<td>Name of the <code>PlanPhase</code> for this subscription if any</td>
</tr>
<tr>
<td><strong>usageName</strong></td>
<td>string</td>
<td>system</td>
<td>Name of the <code>Usage</code> section for this subscription if any</td>
</tr>
<tr>
<td><strong>prettyPlanName</strong></td>
<td>string</td>
<td>system</td>
<td>Pretty name of the <code>Plan</code> for this subscription if any</td>
</tr>
<tr>
<td><strong>prettyPhaseName</strong></td>
<td>string</td>
<td>system</td>
<td>Pretty name of the <code>PlanPhase</code> for this subscription if any</td>
</tr>
<tr>
<td><strong>prettyUsageName</strong></td>
<td>string</td>
<td>system</td>
<td>Pretty name of the <code>Usage</code> section for this subscription if any</td>
</tr>
<tr>
<td><strong>itemType</strong></td>
<td>string</td>
<td>system</td>
<td>Item type (see below)</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>string</td>
<td>user or system</td>
<td>Optional description of the item</td>
</tr>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>user or system</td>
<td>Start date of the period invoiced</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>date</td>
<td>user or system</td>
<td>End date of the period invoiced</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Amount being invoiced</td>
</tr>
<tr>
<td><strong>quantity</strong></td>
<td>number</td>
<td>user or system</td>
<td>Rate associated with the <code>Plan</code></td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>itemDetails</strong></td>
<td>string</td>
<td>user or system</td>
<td>In usage mode, details about what was invoiced.</td>
</tr>
<tr>
<td><strong>childItems</strong></td>
<td>list</td>
<td>user or system</td>
<td>In the hierarchical model, the items for the children.</td>
</tr>
</tbody></table>

<p><strong>linkedInvoiceItemId</strong>: This ID is used to link to another item. For example, an item representing an adjustment would link to the item being adjusted.</p>

<p><strong>itemType</strong>: The following invoice item types are currently supported:</p>

<ul>
<li><code>EXTERNAL_CHARGE</code>: Charge independent of any subscription state - typically added using invoice APIs.</li>
<li><code>FIXED</code>: Fixed (one-time) charge associated with a subscription.</li>
<li><code>RECURRING</code>: Recurring charge associated with a subscription.</li>
<li><code>REPAIR_ADJ</code>: Internal adjustment generated by the system, used for billing in advance when the subscription state changed.</li>
<li><code>CBA_ADJ</code>: Credit (positive or negative) generated by the system.</li>
<li><code>ITEM_ADJ</code>: Invoice item adjustment -- by itself or triggered by a refund.</li>
<li><code>USAGE</code>: Usage item</li>
<li><code>TAX</code>: Tax item -- this can only be added through an invoice plugin</li>
<li><code>PARENT_SUMMARY</code>: In the hierarchical model, represents the summary across all children</li>
</ul>

<p>Refer to the <a href="https://docs.killbill.io/latest/userguide_subscription.html#components-invoicing">Subscription Billing</a> document for further details.  </p>
<h2 id='invoice-invoicedryrun-resource'>InvoiceDryRun Resource</h2>
<p>An <code>InvoiceDryRun</code> object represents an invoice preview generated to determine what would be in the invoice scheduled on a certain date, or if certain changes are made. A dry run has no actual effect on the system. The attributes contained in this resource are the following:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>dryRunType</strong></td>
<td>string</td>
<td>user</td>
<td>Category for this dry run (see notes below)</td>
</tr>
<tr>
<td><strong>dryRunAction</strong></td>
<td>string</td>
<td>user</td>
<td>Action on which the dry run should be based, if any (see notes below)</td>
</tr>
<tr>
<td><strong>phaseType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the plan phase (see notes below)</td>
</tr>
<tr>
<td><strong>productName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the product subscribed</td>
</tr>
<tr>
<td><strong>productCategory</strong></td>
<td>string</td>
<td>user</td>
<td>Product category (see notes below)</td>
</tr>
<tr>
<td><strong>billingPeriod</strong></td>
<td>string</td>
<td>user</td>
<td>Billing period (see notes below)</td>
</tr>
<tr>
<td><strong>priceListName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the applicable price list</td>
</tr>
<tr>
<td><strong>subscriptiontId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for a subscription. If specified, only this subscription is used for the dry run</td>
</tr>
<tr>
<td><strong>bundleId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for a bundle. If specified, only this subscription is used for the dry run</td>
</tr>
<tr>
<td><strong>effectiveDate</strong></td>
<td>date</td>
<td>user</td>
<td>The date the change takes effect</td>
</tr>
<tr>
<td><strong>billingPolicy</strong></td>
<td>string</td>
<td>user</td>
<td>The billing policy (see notes below)</td>
</tr>
<tr>
<td><strong>priceOverrides</strong></td>
<td>list</td>
<td>user</td>
<td>list of prices if this subscription has price overrides</td>
</tr>
<tr>
<td><strong>planName</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the plan subscribed</td>
</tr>
</tbody></table>

<p><strong>dryRunType</strong>: possible values are:</p>

<ul>
<li><p>TARGET_DATE -- Preview the invoice as of the given target date </p></li>
<li><p>UPCOMING_INVOICE -- Preview the next scheduled invoice </p></li>
<li><p>SUBSCRIPTION_ACTION -- Preview the invoice that would be generated if the specified <strong>dryRunAction</strong> is taken</p></li>
</ul>

<p><strong>dryRunAction</strong>: possible values are: START_BILLING, CHANGE (of <code>Plan</code>), or STOP_BILLING</p>

<p><strong>phaseType</strong>: possible values are: TRIAL, DISCOUNT, FIXEDTERM, or EVERGREEN</p>

<p><strong>productCategory</strong>: possible values are BASE, ADD_ON, or STANDALONE</p>

<p><strong>billingPeriod</strong>: possible values are DAILY, WEEKLY, BIWEEKLY, THIRTY_DAYS, SIXTY_DAYS, NINETY_DAYS, MONTHLY, BIMESTRIAL (bimonthly), QUARTERLY, TRIANNUAL, BIANNUAL, ANNUAL, BIENNIAL, or NO_BILLING_PERIOD</p>

<p><strong>billingPolicy</strong>: possible values are START_OF_TERM, END_OF_TERM, or IMMEDIATE</p>

<p>Note that either the <code>planName</code> or a combination of <code>productName</code>, <code>productCategory</code> and <code>billingPeriod</code> needs to be specified for the <strong>START_BILLING</strong>, <strong>CHANGE</strong> <code>dryRunAction</code>.</p>
<h2 id='invoice-invoice'>Invoice</h2>
<p>These endpoints provide basic operations on invoices.</p>
<h3 id='invoice-trigger-an-invoice-run'>Trigger an invoice run</h3>
<p>Create an invoice run for the associated account. This may result in the creation of a new invoice if there is anything to invoice for, or nothing, if the account is up to date. If an invoice is created, all necessary attributes are determined by the system.</p>

<p>Also refer to our <a href="https://docs.killbill.io/latest/userguide_subscription.html#invoicing-dry-run">subscription manual for more examples</a></p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices?accountId=29fd0a00-f08b-4886-849b-3f4b98c8df27"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"34a65013-2dd1-480e-b4b8-7999bb15ebce"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2023-07-15"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Invoice</span> <span class="n">invoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createFutureInvoice</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">targetDate</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">trigger_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                               <span class="n">target_date</span><span class="p">,</span> 
                                               <span class="n">user</span><span class="p">,</span> 
                                               <span class="n">reason</span><span class="p">,</span> 
                                               <span class="n">comment</span><span class="p">,</span> 
                                               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_future_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                 <span class="n">created_by</span><span class="p">,</span> 
                                 <span class="n">api_key</span><span class="p">,</span> 
                                 <span class="n">api_secret</span><span class="p">,</span> 
                                 <span class="n">target_date</span><span class="o">=</span><span class="n">target_date</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>target date (date up to which the account should be invoiced)</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location item is also returned in the header, giving the UUID of the generated invoice (if any). If there is nothing to invoice for, returns a 404 status code.</p>
<h3 id='invoice-create-a-migration-invoice'>Create a migration invoice</h3>
<p>This endpoint is used to insert existing invoices that are being migrated from either a third party system or an in-house billing system into Kill Bill.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/migration/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "invoiceItemId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "invoiceId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "linkedInvoiceItemId": "f38505c9-d673-4f0b-b7d4-9125cac2a567", "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "itemType": "EXTERNAL_CHARGE", "amount": 10, "rate": 0, "currency": "USD" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/migration/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"fe1a6f86-9ec5-4ac3-8d39-15f024cc8339"</span><span class="o">);</span>

<span class="n">BigDecimal</span> <span class="n">chargeAmount</span> <span class="o">=</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">;</span>
<span class="n">InvoiceItem</span> <span class="n">externalCharge</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setStartDate</span><span class="o">(</span><span class="k">new</span> <span class="n">LocalDate</span><span class="o">());</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">chargeAmount</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setItemType</span><span class="o">(</span><span class="n">InvoiceItemType</span><span class="o">.</span><span class="na">EXTERNAL_CHARGE</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">InvoiceItems</span> <span class="n">inputInvoice</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItems</span><span class="o">();</span>
<span class="n">inputInvoice</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">externalCharge</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Invoice</span> <span class="n">migrationInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createMigrationInvoice</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                             <span class="n">inputInvoice</span><span class="o">,</span> 
                                                             <span class="n">targetDate</span><span class="o">,</span>
                                                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"be19b229-c076-47aa-aa4d-f53bec505dc7"</span>
<span class="n">invoices</span> <span class="o">=</span> <span class="s2">"external_invoice_list"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="s2">"2018-03-15"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">create_migration_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                                        <span class="n">invoices</span><span class="p">,</span> 
                                                        <span class="n">target_date</span><span class="p">,</span> 
                                                        <span class="n">user</span><span class="p">,</span> 
                                                        <span class="n">reason</span><span class="p">,</span> 
                                                        <span class="n">comment</span><span class="p">,</span> 
                                                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'external_invoice_list'</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_migration_invoice</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                    <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                    <span class="n">created_by</span><span class="p">,</span>
                                    <span class="n">api_key</span><span class="p">,</span>
                                    <span class="n">api_secret</span><span class="p">,</span>
                                    <span class="n">target_date</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An invoice resource object with all fields filled in representing the invoice to be migrated. At least the following fields need to be specified: itemType=EXTERNAL_CHARGE, amount.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>target date</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location item is also returned in the header, giving the UUID of the generated invoice (if any).</p>
<h3 id='invoice-create-external-charge-s'>Create external charge(s)</h3>
<p>Create a charge for a given account. This will result in the creation of a new invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/charges/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "description": "My charge", "amount": 50, "currency": "USD" }]'</span>    <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/charges/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"616789aa-4004-4681-b38c-b95871d534fc"</span><span class="o">);</span>

<span class="n">InvoiceItem</span> <span class="n">externalCharge</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">externalCharge</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"My charge"</span><span class="o">);</span>

<span class="n">InvoiceItems</span> <span class="n">externalCharges</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItems</span><span class="o">();</span>
<span class="n">externalCharges</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">externalCharge</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">autoCommit</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">InvoiceItem</span><span class="o">&gt;</span> <span class="n">createdExternalCharges</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createExternalCharges</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                            <span class="n">externalCharges</span><span class="o">,</span> 
                                                                            <span class="n">requestedDate</span><span class="o">,</span>
                                                                            <span class="n">autoCommit</span><span class="o">,</span>
                                                                            <span class="n">pluginProperty</span><span class="o">,</span> 
                                                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>  <span class="o">=</span> <span class="s2">"83e5e82d-fe72-4873-9b8b-946f4d250b0d"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>      <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>    <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span> <span class="o">=</span> <span class="s1">'My charge'</span>

<span class="n">auto_commit</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">auto_commit</span><span class="p">,</span> 
                    <span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'My charge'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_external_charges</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                                   <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                   <span class="n">created_by</span><span class="p">,</span>
                                   <span class="n">api_key</span><span class="p">,</span>
                                   <span class="n">api_secret</span><span class="p">,</span>
                                   <span class="n">auto_commit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3aaadeeb-5ffe-4226-a8b6-57723f1f8c12"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c6fe2246-62e2-450d-b9fc-a27003771535"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EXTERNAL_CHARGE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My charge"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Request Body</strong></p>

<p>An invoice item resource object with at least the <code>amount</code> attribute. If multiple invoice items are specified, a single invoice is created with all the invoice items. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
<tr>
<td><strong>autoCommit</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the resulting invoice should be COMMITTED.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an invoice item object.</p>
<h3 id='invoice-create-tax-items'>Create tax items</h3>
<p>Normally, tax items are added to an invoice by a plugin, which intercepts the invoice during its creation and adds the required tax items on the fly. However, sometimes you may want to add tax items directly. This API adds a tax item to an account, which will result in the creation of a new invoice. Also, it is worth noting, that the tax items are not linked to any existing <code>invoiceItem</code>s. Consequently, specifying fields like <code>linkedInvoiceItemId</code>, <code>subscriptionId</code> while creating the tax item has no effect. These fields do not get saved on the database and will not be returned in subsequent <code>GET</code> requests.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/taxes/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "amount": 50, "currency": "USD" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/taxes/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"eb36c64c-b575-4538-b26f-a89c473984da"</span><span class="o">);</span>
<span class="n">UID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"28723cec-5510-49be-9e87-3a36d246f25e"</span><span class="o">);</span>

<span class="n">InvoiceItem</span> <span class="n">taxItem</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">taxItem</span><span class="o">.</span><span class="na">setBundleId</span><span class="o">(</span><span class="n">bundleId</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">InvoiceItems</span> <span class="n">input</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItems</span><span class="o">();</span>
<span class="n">input</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">taxItem</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">autoCommit</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="na">getUTCToday</span><span class="o">();</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">InvoiceItem</span><span class="o">&gt;</span> <span class="n">createdTaxItems</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createTaxItems</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> 
                                                                     <span class="n">input</span><span class="o">,</span>
                                                                     <span class="n">autoCommit</span><span class="o">,</span>
                                                                     <span class="n">requestedDate</span><span class="o">,</span>
                                                                     <span class="n">pluginProperty</span><span class="o">,</span>
                                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>  <span class="o">=</span> <span class="s2">"29ef0d50-90d1-4163-bb46-ef1b82675ae6"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>      <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>    <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span> <span class="o">=</span> <span class="s1">'My charge'</span>

<span class="n">auto_commit</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">create_tax_items</span><span class="p">(</span><span class="n">auto_commit</span><span class="p">,</span> 
                              <span class="n">user</span><span class="p">,</span> 
                              <span class="n">reason</span><span class="p">,</span> 
                              <span class="n">comment</span><span class="p">,</span> 
                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'My charge'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_tax_items</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span>
                            <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                            <span class="n">created_by</span><span class="p">,</span>
                            <span class="n">api_key</span><span class="p">,</span>
                            <span class="n">api_secret</span><span class="p">,</span>
                            <span class="n">auto_commit</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e91e8d48-d8de-4931-9758-6cfff86cb2f4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"434dd357-099d-45f8-9b48-79dcd20c61ce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAX"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tax"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Request Body</strong></p>

<p>An invoice item resource object with at least the <code>amount</code> attribute. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
<tr>
<td><strong>autoCommit</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the resulting invoice should be COMMITTED.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an invoice item object.</p>
<h3 id='invoice-retrieve-an-invoice-by-id'>Retrieve an invoice by id</h3>
<p>Retrieves an invoice based on the <code>invoiceId</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"922a83f4-ae08-4732-9dd9-35e13c332393"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//  Will include children items</span>

<span class="n">Invoice</span> <span class="n">invoiceWithItems</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                                 <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                 <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_id</span> <span class="o">=</span> <span class="s2">"31db9f9a-91ff-49f4-b5a1-5e4fce59a197"</span>
<span class="n">with_items</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                                          <span class="n">with_items</span><span class="p">,</span> 
                                          <span class="n">audit</span><span class="p">,</span> 
                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'43da4e9c-03c6-4f15-8943-b9a3af3ecacb'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DRAFT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"310"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='invoice-retrieve-an-invoice-by-number'>Retrieve an invoice by number</h3>
<p>Retrieves an invoice based on the <code>invoiceNumber</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/byNumber/{invoiceNumber</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/byNumber/310"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">Integer</span> <span class="n">invoiceNumber</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//  Will include children items</span>

<span class="n">Invoice</span> <span class="n">invoiceByNumber</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceByNumber</span><span class="o">(</span><span class="n">invoiceNumber</span><span class="o">,</span> 
                                                        <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                        <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_number</span> <span class="o">=</span> <span class="s2">"1913"</span>
<span class="n">with_items</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_number</span><span class="p">(</span><span class="n">invoice_number</span><span class="p">,</span> 
                                              <span class="n">with_items</span><span class="p">,</span> 
                                              <span class="n">audit</span><span class="p">,</span> 
                                              <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_number</span> <span class="o">=</span> <span class="s">'972'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_by_number</span><span class="p">(</span><span class="n">invoice_number</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DRAFT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"310"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='invoice-retrieve-an-invoice-by-invoice-item-id'>Retrieve an invoice by invoice item id</h3>
<p>Retrieves an invoice based on the <code>invoiceItemId</code> for an invoice item.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/byItemId/{itemId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/byItemId/3f0aa8f7-ca75-40cc-8c78-15a15cdbb977"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceItemId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"111732ad-196d-423f-8ccd-de44109dc944"</span><span class="o">)</span>
<span class="n">Boolean</span> <span class="n">withChildrenItems</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">//  Will include children items</span>

<span class="n">Invoice</span> <span class="n">invoiceByItemId</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceByItemId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">,</span> 
                                                        <span class="n">withChildrenItems</span><span class="o">,</span> 
                                                        <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item_id</span> <span class="o">=</span> <span class="s2">"f641ce8a-a874-4e98-ada5-2bd8fdb74945"</span>
<span class="n">with_items</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">with_children_items</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">find_by_invoice_item_id</span><span class="p">(</span><span class="n">invoice_item_id</span><span class="p">,</span> 
                                                       <span class="n">with_items</span><span class="p">,</span>
                                                       <span class="n">with_children_items</span><span class="p">,</span> 
                                                       <span class="n">audit</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_item_id</span> <span class="o">=</span> <span class="s">'8fae6721-3ebc-4103-85f5-aa13dde0e4f5'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_by_item_id</span><span class="p">(</span><span class="n">invoice_item_id</span><span class="p">,</span> 
                                  <span class="n">api_key</span><span class="p">,</span> 
                                  <span class="n">api_secret</span><span class="p">,</span> 
                                  <span class="n">with_items</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DRAFT"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18e9b3d9-9083-4725-9e8a-27d3a57c2e88"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"311"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h3 id='invoice-render-an-invoice-as-html'>Render an invoice as HTML</h3>
<p>This API formats an invoice as an HTML page, that can be displayed or printed for a customer.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/html</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/html"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">htmlInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceAsHTML</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_id</span> <span class="o">=</span> <span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">as_html</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="vi">@options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'2c98cfa2-7929-4cc2-9397-1624fb72c6d5'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_as_html</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">"text/css"</span><span class="nt">&gt;</span>
            <span class="nt">th</span> <span class="p">{</span><span class="err">align=left;</span> <span class="err">width=225px;</span> <span class="nl">border-bottom</span><span class="p">:</span> <span class="nb">solid</span> <span class="m">2px</span> <span class="no">black</span><span class="p">;}</span>
        <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;h1&gt;</span>invoiceTitle<span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;table&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">rowspan=</span><span class="s">3</span> <span class="na">width=</span><span class="s">350px</span><span class="nt">&gt;</span>Insert image here<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">width=</span><span class="s">100px/</span><span class="nt">&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">width=</span><span class="s">225px/</span><span class="nt">&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">width=</span><span class="s">225px/</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;</span>invoiceDate<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;</span>Jul 20, 2018<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;</span>invoiceNumber<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;</span>310<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td&gt;</span>companyName<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;</span>accountOwnerName<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;</span>Another Name<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td&gt;</span>companyAddress<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td&gt;</span>john@127.0.0.1:8080<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td&gt;</span>companyCityProvincePostalCode<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td&gt;&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td&gt;</span>companyCountry<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td&gt;&lt;companyUrl</span><span class="err">&lt;/</span><span class="na">td</span><span class="nt">&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/table&gt;</span>
        <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;table&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;th&gt;</span>invoiceItemBundleName<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;th&gt;</span>invoiceItemDescription<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;th&gt;</span>invoiceItemServicePeriod<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;th&gt;</span>invoiceItemAmount<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>

            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td&gt;</span>Adjustment (account credit)<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;</span>Jul 20, 2018 - Jul 20, 2018<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;</span>USD 50.00<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>

            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td&gt;</span>example<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;</span>Jul 20, 2018 - Jul 20, 2018<span class="nt">&lt;/td&gt;</span>
                <span class="nt">&lt;td&gt;</span>USD -50.00<span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>

            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">4</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">2</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;&lt;strong&gt;</span>invoiceAmount<span class="nt">&lt;/strong&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;&lt;strong&gt;</span>0.00<span class="nt">&lt;/strong&gt;&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">2</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;&lt;strong&gt;</span>invoiceAmountPaid<span class="nt">&lt;/strong&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;&lt;strong&gt;</span>0.00<span class="nt">&lt;/strong&gt;&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
            <span class="nt">&lt;tr&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">colspan=</span><span class="s">2</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;&lt;strong&gt;</span>invoiceBalance<span class="nt">&lt;/strong&gt;&lt;/td&gt;</span>
                <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">right</span><span class="nt">&gt;&lt;strong&gt;</span>0<span class="nt">&lt;/strong&gt;&lt;/td&gt;</span>
            <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;/table&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoice rendered as HTML.</p>
<h3 id='invoice-change-invoice-status-from-draft-to-committed'>Change invoice status from DRAFT to COMMITTED</h3>
<p>Commit a DRAFT invoice by changing its staus to COMMITTED. The invoice becomes immutable and its balance is now included in account totals.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/commitInvoice</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/commitInvoice"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ca09d09a-59b2-4ada-8c15-597c9efde46c"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">commitInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice</span><span class="p">.</span><span class="nf">invoice_id</span> <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">commit</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
               <span class="n">reason</span><span class="p">,</span> 
               <span class="n">comment</span><span class="p">,</span> 
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">commit_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                          <span class="n">created_by</span><span class="p">,</span> 
                          <span class="n">api_key</span><span class="p">,</span> 
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='invoice-void-an-invoice'>Void an invoice</h3>
<p>Change the status of an invoice to VOID. A void invoice is ignored by the rest of the system. There are some restrictions for this operation:</p>

<ul>
<li>We cannot VOID an invoice that was partially or fully paid</li>
<li>We cannot VOID an invoice if it contains positive credit items (<code>CBA_ADJ</code> &gt;0), unless such credit was not used, i.e there is enough credit left on the account.</li>
<li>We cannot VOID an invoice if it was repaired, i.e there exists a <code>REPAIR_ADJ</code> item pointing to an item inside that invoice.</li>
</ul>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/voidInvoice</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/18e9b3d9-9083-4725-9e8a-27d3a57c2e88/voidInvoice"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">voidInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">void_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                        <span class="n">created_by</span><span class="p">,</span> 
                        <span class="n">api_key</span><span class="p">,</span> 
                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='invoice-adjust-an-invoice-item'>Adjust an invoice item</h3>
<p>Adjust the amount for an invoice item</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "invoiceItemId": "903e55d3-8072-47f1-80fc-32857dbdbcc5", "invoiceId": "903e55d3-8072-47f1-80fc-32857dbdbcc5", "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "description": "Free adjustment: good customer", "amount": 50, "currency": "USD"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"53805dbc-720a-4eaf-9072-ade723ee860f"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"4be08988-35a1-4fce-bebc-699af2a95b18"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">invoiceItemId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"5f1e9142-b4de-4409-9366-9920cc1683e9"</span><span class="o">);</span>
<span class="n">BigDecimal</span> <span class="n">adjustedAmount</span> <span class="o">=</span> <span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">;</span>

<span class="n">InvoiceItem</span> <span class="n">adjustmentInvoiceItem</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setInvoiceId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setInvoiceItemId</span><span class="o">(</span><span class="n">invoiceItemId</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">adjustedAmount</span><span class="o">);</span>
<span class="n">adjustmentInvoiceItem</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">requestedDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Invoice</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">adjustInvoiceItem</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                              <span class="n">adjustmentInvoiceItem</span><span class="o">,</span> 
                                              <span class="n">requestedDate</span><span class="o">,</span>
                                              <span class="n">pluginProperty</span><span class="o">,</span>
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item</span>                 <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>      <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_id</span>      <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_item_id</span> <span class="o">=</span> <span class="s2">"b311f709-ad51-4f67-8722-18ce04334c31"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">amount</span>          <span class="o">=</span> <span class="mi">100</span><span class="o">.</span><span class="mo">00</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">currency</span>        <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">description</span>     <span class="o">=</span> <span class="s1">'Free adjustment: good customer'</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceItem</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="s">'3ee3aa82-1d45-4bbc-b36b-74d628e095d0'</span><span class="p">,</span>
                   <span class="n">invoice_id</span><span class="o">=</span><span class="s">'2c98cfa2-7929-4cc2-9397-1624fb72c6d5'</span><span class="p">,</span>
                   <span class="n">invoice_item_id</span><span class="o">=</span><span class="s">'b311f709-ad51-4f67-8722-18ce04334c31'</span><span class="p">,</span>
                   <span class="n">amount</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                   <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                   <span class="n">description</span><span class="o">=</span><span class="s">'Free adjustment: good customer'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">adjust_invoice_item</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                               <span class="n">body</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="p">,</span>
                               <span class="n">api_key</span><span class="p">,</span>
                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An invoice item resource object with at least <code>invoiceItemId</code>, <code>invoiceId</code>, and <code>amount</code> attributes. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestedDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>requested date</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> header containing the invoice id is returned.</p>
<h3 id='invoice-delete-a-cba-item'>Delete a CBA item</h3>
<p>Delete a Credit Balance Adjust (<code>CBA_ADJ</code>) invoice item. There are some limitations and side effects with this api:</p>

<ol>
<li>Deleting a positive <code>CBA_ADJ</code> (credit generation), may lead the system to reclaim portion of the used credit, possibly leaving some invoices with a balance. Example:</li>
</ol>

<p>Given an invoice, I1,  where user added some credit ($12), we would see the following items: {<code>CREDIT_ADJ</code>: -12, <code>CBA_ADJ</code>: +12}. Given another invoice, I2, where the system invoiced for a recurring subscription, and where some of this credit was consumed, we would see the following items: {<code>RECURRING</code>: +10, <code>CBA_ADJ</code>: -10}. Deleting the <code>CBA_ADJ</code> from I1, would lead to the following resulting invoices:  I1 {<code>CREDIT_ADJ</code>: 0, <code>CBA_ADJ</code>: 0} and I2 {<code>RECURRING</code>: +10, <code>CBA_ADJ</code>: 0}. The system zeroed-out the credit generation and the part that was used, and as a result I2 would be left with a balance of +10. Deleting the <code>CBA_ADJ</code> from I2 on the other hand would lead to the following invoice:  I2 {<code>RECURRING</code>: +20, <code>CBA_ADJ</code>: 0} . </p>

<ol>
<li>System generated credit</li>
</ol>

<p>In an in-advanced scenario where the system first invoiced for a recurring subscription ($20), and then repaired ($-8) for instance as a result of an early cancelation, we would have the following invoices: I1 {<code>RECURRING</code>: +20} and I2 {<code>REPAIR_ADJ</code>: -8, <code>CBA_ADJ</code>: +8}. Attempting to delete the <code>CBA_ADJ</code> on I2 would fail as the generation of credit was system generated, i.e it happened as a result of a subscription change.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/{invoiceItemId}/cba</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/404a98a8-4dd8-4737-a39f-be871e916a8c/a35fb7b5-aec8-489e-aadf-c86107aa1d92/cba?accountId=8785164f-b5d7-4da1-9495-33f5105e8d80"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"c0c2d79d-8b2e-4830-a05b-b9a43b38482c"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">invoiceItemId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"29a8933a-2e5c-409c-97be-7a5964dbf708"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"41e61312-cfb1-4300-afc7-64bc5cb29e85"</span><span class="o">);</span>
<span class="n">invoiceApi</span><span class="o">.</span><span class="na">deleteCBA</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">invoiceItemId</span><span class="o">,</span> <span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_item</span>                 <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoiceItem</span><span class="p">.</span><span class="nf">new</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">account_id</span>      <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_id</span>      <span class="o">=</span> <span class="s2">"2c98cfa2-7929-4cc2-9397-1624fb72c6d5"</span>
<span class="n">invoice_item</span><span class="p">.</span><span class="nf">invoice_item_id</span> <span class="o">=</span> <span class="s2">"b311f709-ad51-4f67-8722-18ce04334c31"</span>

<span class="n">invoice_item</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span><span class="o">=</span><span class="s">'2c98cfa2-7929-4cc2-9397-1624fb72c6d5'</span><span class="p">,</span>
<span class="n">invoice_item_id</span><span class="o">=</span><span class="s">'b311f709-ad51-4f67-8722-18ce04334c31'</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'3ee3aa82-1d45-4bbc-b36b-74d628e095d0'</span><span class="p">,</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">delete_cba</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                      <span class="n">invoice_item_id</span><span class="p">,</span>
                      <span class="n">account_id</span><span class="p">,</span>
                      <span class="n">created_by</span><span class="p">,</span>
                      <span class="n">api_key</span><span class="p">,</span>
                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-dry-run'>Dry-run</h2>
<p>In some situations, it is necessary to preview what a given customer will be invoiced for before making changes, or to verify what the system will generate at a future date. Kill Bill provides a dry-run invoice API to accomplish these goals. This API can be used to answer several distinct questions:</p>

<ul>
<li>When is the next upcoming invoice for a given customer, and what will this invoice contain?</li>
<li>When is the next upcoming invoice associated with a given subscription or bundle, and what will this invoice contain?</li>
<li>Given a <code>targetDate</code>, what invoice will the system generate?</li>
<li>Given a change in a subscription, such as a new subscription, change of plan, or cancellation, what invoice will the system generate?</li>
</ul>

<p>A dry run is based on a <a href="https://killbill.github.io/slate/#invoice-invoicedryrun-resource">dry run resource object</a>.</p>
<h3 id='invoice-generate-a-dry-run-invoice'>Generate a dry run invoice</h3>
<p>This endpoint creates a dry-run invoice. Based on its parameters you can obtain answers to the different questions listed above.</p>

<p>Note: This endpoint is rather expensive, as it creates a full invoice run for the designated account, but no invoice will be created or persisted
in the system.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/dryRun</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "dryRunType": "TARGET_DATE"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=60a47168-7d36-4380-8ec7-e48cfe4e65d6&amp;targetDate=2022-02-28"</span>   

OR 

curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "dryRunType": "UPCOMING_INVOICE"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>   

OR

curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "dryRunType": "SUBSCRIPTION_ACTION","dryRunAction":"CHANGE","productName":"Standard", "productCategory":"BASE","billingPeriod":"MONTHLY","subscriptionId":"0b9efead-d5e4-40a9-8178-2286dee0fe48","bundleId":" 6ebcc573-c2c4-408a-b5c3-d6ae0dbae233"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span>  

OR

curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "dryRunType": "SUBSCRIPTION_ACTION","dryRunAction":"STOP_BILLING","subscriptionId":"0b9efead-d5e4-40a9-8178-2286dee0fe48","bundleId":"    6ebcc573-c2c4-408a-b5c3-d6ae0dbae233","effectiveDate":"2022-02-10"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/dryRun?accountId=60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span>          

</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">DryRunType</span> <span class="n">dryRunType</span> <span class="o">=</span> <span class="n">DryRunType</span><span class="o">.</span><span class="na">SUBSCRIPTION_ACTION</span><span class="o">;</span>
<span class="n">SubscriptionEventType</span> <span class="n">dryRunAction</span> <span class="o">=</span> <span class="n">SubscriptionEventType</span><span class="o">.</span><span class="na">START_BILLING</span><span class="o">;</span>
<span class="n">PhaseType</span> <span class="n">phaseType</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">productName</span> <span class="o">=</span> <span class="s">"Assault-Rifle"</span><span class="o">;</span>
<span class="n">ProductCategory</span> <span class="n">productCategory</span> <span class="o">=</span> <span class="n">ProductCategory</span><span class="o">.</span><span class="na">BASE</span><span class="o">;</span>
<span class="n">BillingPeriod</span> <span class="n">billingPeriod</span> <span class="o">=</span> <span class="n">BillingPeriod</span><span class="o">.</span><span class="na">ANNUAL</span><span class="o">;</span>
<span class="n">String</span> <span class="n">priceListName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">UUID</span> <span class="n">bundleId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">effectiveDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">BillingActionPolicy</span> <span class="n">billingPolicy</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">PhasePrice</span><span class="o">&gt;</span> <span class="n">priceOverrides</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">InvoiceDryRun</span> <span class="n">dryRunArg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceDryRun</span><span class="o">(</span><span class="n">dryRunType</span><span class="o">,</span> 
                                            <span class="n">dryRunAction</span><span class="o">,</span>
                                            <span class="n">phaseType</span><span class="o">,</span> 
                                            <span class="n">productName</span><span class="o">,</span> 
                                            <span class="n">productCategory</span><span class="o">,</span> 
                                            <span class="n">billingPeriod</span><span class="o">,</span> 
                                            <span class="n">priceListName</span><span class="o">,</span> 
                                            <span class="n">subscriptionId</span><span class="o">,</span> 
                                            <span class="n">bundleId</span><span class="o">,</span> 
                                            <span class="n">effectiveDate</span><span class="o">,</span> 
                                            <span class="n">billingPolicy</span><span class="o">,</span>
                                            <span class="n">priceOverrides</span><span class="o">);</span>


<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"fe1a6f86-9ec5-4ac3-8d39-15f024cc8339"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">().</span><span class="na">plusDays</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

<span class="n">Invoice</span> <span class="n">dryRunInvoice</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">generateDryRunInvoice</span><span class="o">(</span><span class="n">dryRunArg</span><span class="o">,</span> 
                                                         <span class="n">accountId</span><span class="o">,</span> 
                                                         <span class="n">targetDate</span><span class="o">,</span> 
                                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="c1">#</span>
<span class="c1"># This case is when you create a dry-run invoice with UPCOMING_INVOICE, </span>
<span class="c1"># to see what is the next invoice that the system will generate for this account </span>
<span class="c1"># </span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s2">"5527abbc-d83d-447f-bf3d-ab9542ea631e"</span>
<span class="n">target_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">upcoming_invoice_target_date</span> <span class="o">=</span> <span class="kp">true</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">trigger_invoice_dry_run</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> 
                                                       <span class="n">target_date</span><span class="p">,</span> 
                                                       <span class="n">upcoming_invoice_target_date</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="c">#</span>
<span class="c"># This case is when you create a dry-run invoice with UPCOMING_INVOICE, </span>
<span class="c"># to see what is the next invoice that the system will generate for this account </span>
<span class="c"># </span>
<span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoiceDryRun</span><span class="p">(</span><span class="n">dry_run_type</span><span class="o">=</span><span class="s">'UPCOMING_INVOICE'</span><span class="p">)</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'00e87495-92dc-4640-8490-e2c794748151'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">generate_dry_run_invoice</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                    <span class="n">account_id</span><span class="p">,</span>
                                    <span class="n">created_by</span><span class="p">,</span>
                                    <span class="n">api_key</span><span class="p">,</span>
                                    <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cf4d1d3b-81cf-4054-96d7-bbdada2b9bc2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-01-31"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8c453b1b-ba2c-4c05-894f-e02eb2ee834e"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cf4d1d3b-81cf-4054-96d7-bbdada2b9bc2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6ebcc573-c2c4-408a-b5c3-d6ae0dbae233"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0b9efead-d5e4-40a9-8178-2286dee0fe48"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-31"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c1e83a72-ef8e-42d4-93e1-b5f9390294b4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cf4d1d3b-81cf-4054-96d7-bbdada2b9bc2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60a47168-7d36-4380-8ec7-e48cfe4e65d6"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c22936f6-5105-45b6-b418-ebba142a17aa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9cce25a5-6ef2-40fe-8718-ca22529fe9d8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-28"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-03-31"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Request Body</strong></p>

<p>A <a href="https://killbill.github.io/slate/#invoice-invoicedryrun-resource">dry run resource object</a>. The <strong>dryRunType</strong> and sometimes <strong>dryRunAction</strong> must be specified. Other attributes depend on these:</p>

<table><thead>
<tr>
<th><strong>dryRunType</strong></th>
<th><strong>dryRunAction</strong></th>
<th><strong>Other Required Attributes</strong></th>
<th><strong>Other Optional Attributes</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead><tbody>
<tr>
<td>TARGET_DATE</td>
<td>N/A</td>
<td>none</td>
<td>none</td>
<td>Preview the invoice as of the target date specified as a query parameter</td>
</tr>
<tr>
<td>UPCOMING_INVOICE</td>
<td>N/A</td>
<td>none</td>
<td>subscriptionId or bundleId (When specified, computes the upcoming invoice for the specified subscription/bundle. Note that if there are other subscriptions invoiced on the same day, these will also be included in the upcoming invoice)</td>
<td>Preview the next scheduled invoice. <code>targetDate</code> query parameter does not need to be specified, it is ignored even if specified</td>
</tr>
<tr>
<td>SUBSCRIPTION_ACTION</td>
<td>START_BILLING</td>
<td>Either a combination of productName, productCategory, billingPeriod or planName. If the dry run is being generated for an ADDON product, then the bundleId also needs to be specified</td>
<td>effectiveDate, priceListName, billingPolicy</td>
<td>Preview the invoice that would be generated if the <strong>START_BILLING</strong> action is taken</td>
</tr>
<tr>
<td>SUBSCRIPTION_ACTION</td>
<td>CHANGE</td>
<td>subscriptionId, bundleId and either a combination of productName, productCategory, billingPeriod or planName</td>
<td>effectiveDate, priceListName, billingPolicy</td>
<td>Preview the invoice that would be generated if the <strong>CHANGE</strong> action is taken</td>
</tr>
<tr>
<td>SUBSCRIPTION_ACTION</td>
<td>STOP_BILLING</td>
<td>subscriptionId, bundleId, effectiveDate</td>
<td>-</td>
<td>Preview the invoice that would be generated if the <strong>STOP_BILLING</strong> action is taken</td>
</tr>
</tbody></table>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>No</td>
<td>current date</td>
<td>Target date is the invoicing target date</td>
</tr>
</tbody></table>

<p>Note that for <code>SUBSCRIPTION_ACTION</code>, there are 2 dates to take into account:</p>

<ul>
<li>The <code>effectiveDate</code> in the body specifies when the action (e.g CREATE) takes place</li>
<li>The <code>targetDate</code> as a query parameter specifies the date for the billing, i.e how far in the future we want to bill for. A null <code>targetDate</code> default to now.</li>
</ul>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an invoice resource object.</p>
<h2 id='invoice-invoice-groups'>Invoice Groups</h2>
<p>An invoice group is a group of invoices. An invoice group plugin can be used to split an invoice into multiple invoices. Such split invoices belong to a single invoice group. </p>

<p>Note that Kill Bill does not provide any reference implementation for an invoice group plugin. So anyone wishing to use this feature would need to create an invoice plugin and implement the <a href="https://github.com/killbill/killbill-plugin-api/blob/20e10d463b67b0434e1b9f4dd62ed34ebe84bd9b/invoice/src/main/java/org/killbill/billing/invoice/plugin/api/InvoicePluginApi.java#L41">InvoicePluginApi#getInvoiceGrouping</a> method. We provide a <a href="https://github.com/killbill/killbill-invgrp-demo">demo plugin</a> that demonstrates how an invoice group plugin can be implemented. When such a plugin is configured, an <a href="https://killbill.github.io/slate/#invoice-trigger-an-invoice-group-run">invoice group run</a> would result in the generation of multiple invoices.</p>
<h3 id='invoice-trigger-an-invoice-group-run'>Trigger an invoice group run</h3>
<p>Triggers an invoice group run for the associated account. This would result in the creation of split invoices only if an invoice group plugin is configured. Otherwise, this endpoint behaves the same way as the <a href="https://killbill.github.io/slate/#invoice-trigger-an-invoice-run">Trigger an invoice run</a> endpoint.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/group</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/group?accountId=46897a8b-4ae8-45e2-b934-c4d00dba40a6"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"34a65013-2dd1-480e-b4b8-7999bb15ebce"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">targetDate</span> <span class="o">=</span> <span class="n">LocalDate</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2023-06-15"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Invoices</span> <span class="n">invoices</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createFutureInvoiceGroup</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">targetDate</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>account id</td>
</tr>
<tr>
<td><strong>targetDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>target date (date up to which the account should be invoiced)</td>
</tr>
<tr>
<td><strong>pluginProperty</strong></td>
<td>array of strings</td>
<td>no</td>
<td>omit</td>
<td>list of plugin properties, if any. Should be in the format <code>key%3Dvalue</code></td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A location header containing the UUID of the generated group (if any) is also included in the response. If there is nothing to invoice for, returns a 404 status code.</p>
<h3 id='invoice-retrieve-an-invoice-group'>Retrieve an invoice group</h3>
<p>Retrieves the invoices associated with the specified <code>groupId</code>.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{groupId}/group</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/e7fc3529-92e1-4987-b5f1-08e558a36698/group?accountId=40630170-e390-4cc7-9381-3788a894ba04"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">groupId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"f5ecf703-10b9-4019-8044-8db1163bef56"</span><span class="o">);</span>

<span class="n">Invoices</span> <span class="n">invoices</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoicesGroup</span><span class="o">(</span><span class="n">groupId</span><span class="o">,</span> <span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f5ecf703-10b9-4019-8044-8db1163bef56"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-02-16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"428"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"faf4f9a3-943b-42c4-9705-1365cfd91cc7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f5ecf703-10b9-4019-8044-8db1163bef56"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30a3a9bf-3fc7-4334-ac2e-064cdd99c9dc"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c463a1a-e884-4177-aa2c-cb09aa45e39b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-16"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-16"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2f575d9-9bb8-4b5a-8595-da001381fd13"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-02-16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-16"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"429"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42376d22-4b19-4a79-816b-b4896f9e8f48"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2f575d9-9bb8-4b5a-8595-da001381fd13"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62dfaf14-34c6-4756-8411-89c93b1cfba3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c176641f-2b6e-4bcf-8264-bfa120bcb337"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d424e7d9-e81a-45c7-9e84-77316bfe0c80"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard-monthly-evergreen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-08-16"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-09-16"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>accountId</td>
</tr>
<tr>
<td><strong>withChildrenItems</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include children items</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Returns</strong>
If successful, returns a status code of 200 and a list of invoice objects for this group.</p>
<h2 id='invoice-payments'>Payments</h2>
<p>These endpoints relate to payments on an invoice. More information can be found at <a href="https://killbill.github.io/slate/#invoice-payment">Invoice Payments</a>.</p>
<h3 id='invoice-trigger-a-payment-for-an-invoice'>Trigger a payment for an invoice</h3>
<p>This API causes the system to generate a payment for an invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d", "purchasedAmount": 50, "targetInvoiceId": "903e55d3-8072-47f1-80fc-32857dbdbcc5"}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/payments?externalPayment=false"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"4defec0a-3ecb-4d6f-9b97-c3842734d95f"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"14eadca7-dc35-4bbf-bb2b-fabad9bfebcf"</span><span class="o">);</span>

<span class="n">InvoicePayment</span> <span class="n">invoicePayment</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoicePayment</span><span class="o">();</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setPurchasedAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">invoicePayment</span><span class="o">.</span><span class="na">setTargetInvoiceId</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">externalPayment</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will use a external payment method</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">controlPluginNames</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">InvoicePayment</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInstantPayment</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                                        <span class="n">invoicePayment</span><span class="o">,</span> 
                                                        <span class="n">externalPayment</span><span class="o">,</span> 
                                                        <span class="n">controlPluginNames</span><span class="o">,</span> 
                                                        <span class="n">pluginProperty</span><span class="o">,</span> 
                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment</span>                  <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">new</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">account_id</span>       <span class="o">=</span> <span class="s2">"3ee3aa82-1d45-4bbc-b36b-74d628e095d0"</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">purchased_amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>

<span class="n">external_payment</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">external_payment</span><span class="p">,</span> 
               <span class="n">user</span><span class="p">,</span> 
               <span class="n">reason</span><span class="p">,</span> 
               <span class="n">comment</span><span class="p">,</span> 
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">InvoicePayment</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span>
                      <span class="n">purchased_amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                      <span class="n">target_invoice_id</span><span class="o">=</span><span class="n">invoice_id</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_instant_payment</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                                  <span class="n">body</span><span class="p">,</span>
                                  <span class="n">created_by</span><span class="p">,</span>
                                  <span class="n">api_key</span><span class="p">,</span>
                                  <span class="n">api_secret</span><span class="p">,</span>
                                  <span class="n">external_payment</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An invoicePayment resource object, with at least the following attributes: accountId, and purchasedAmount.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalPayment</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, the payment method should be defaulted to the (system provided) external payment method.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-retrieve-payments-associated-with-an-invoice'>Retrieve payments associated with an invoice</h3>
<p>Retrieves a list of invoicePayment objects for payments associated with the invoice</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/903e55d3-8072-47f1-80fc-32857dbdbcc5/payments"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"ca09d09a-59b2-4ada-8c15-597c9efde46c"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>

<span class="n">InvoicePayments</span> <span class="n">invoicePayments</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getPaymentsForInvoice</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span>
                                                                   <span class="n">withPluginInfo</span><span class="o">,</span>
                                                                   <span class="n">withAttempts</span><span class="o">,</span>
                                                                   <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                   <span class="n">inputOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'8291871e-b16e-45e6-a971-577d44727327'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_payments_for_invoice</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"targetInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8b66b9f9-bfb4-463a-86c7-e267128a294a"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39f3461c-5357-42f7-a8a9-ec79502fdb6b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PURCHASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T20:48:34.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, plugin info is included</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, payment attempts are included</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a List of InvoicePayment resource objects.</p>
<h2 id='invoice-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to invoices. For details on Custom Fields see <a href="https://killbill.github.io/slate/#custom-field">Custom Field</a>.</p>
<h3 id='invoice-add-custom-fields-to-an-invoice'>Add custom fields to an invoice</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "objectType": "INVOICE", "name": "Test Custom Field", "value": "demo_test_value" }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">invoiceId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">INVOICE</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'INVOICE'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                         <span class="n">user</span><span class="p">,</span>
                         <span class="n">reason</span><span class="p">,</span>
                         <span class="n">comment</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of <a href="https://killbill.github.io/slate/?java#custom-field-custom-field-resource">Custom Field</a> objects. Each object should specify at least the the <code>name</code> and <code>value</code> attribute. For example:</p>

<p>[ { &quot;name&quot;: &quot;CF1&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned with the URL to retrieve the custom fields associated with the invoice.</p>
<h3 id='invoice-retrieve-invoice-custom-fields'>Retrieve invoice custom fields</h3>
<p>Retrieve the custom fields associated with an invoice</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span>
                                                                   <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"349de10f-4bb1-4e1a-93f6-11b745200bf5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo_test_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='invoice-modify-custom-fields-for-an-invoice'>Modify custom fields for an invoice</h3>
<p>Modify the custom fields associated with an invoice. Note that it is not possible to modify the name of a custom field, it is only possible to modify its value.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ { "customFieldId": "349de10f-4bb1-4e1a-93f6-11b745200bf5", "objectId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d", "objectType": "INVOICE", "name": "Test Custom Field", "value": "test_modify_value", "auditLogs": [] }]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">customFieldModified</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">modifyInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> 
                   <span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> 
                   <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">modify_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span> 
                                        <span class="n">created_by</span><span class="p">,</span> 
                                        <span class="n">api_key</span><span class="p">,</span> 
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Requst Body</strong></p>

<p>A list of <a href="https://killbill.github.io/slate/?java#custom-field-custom-field-resource">Custom Field</a> objects representing the fields to substitute for existing ones. Each object should specify at least the the <code>customFieldId</code> and <code>value</code> attribute. For example:</p>

<p>[ { &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='invoice-remove-custom-fields-from-invoice'>Remove custom fields from invoice</h3>
<p>Remove a specified set of custom fields from the invoice</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields?customField=349de10f-4bb1-4e1a-93f6-11b745200bf5"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">UUID</span><span class="o">&gt;</span> <span class="n">customFieldsList</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">deleteInvoiceCustomFields</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                     <span class="n">customFieldsList</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'4927c1a2-3959-4f71-98e7-ce3ba19c92ac'</span> 

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">delete_invoice_custom_fields</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                                        <span class="n">created_by</span><span class="p">,</span> 
                                        <span class="n">api_key</span><span class="p">,</span> 
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Custom field object ID that should be deleted. Multiple custom fields can be deleted by specifying a separate <strong>customField</strong> parameter corresponding to each field</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-tags'>Tags</h2>
<p>See <a href="https://killbill.github.io/slate/#account-tags">Account Tags</a> for an introduction.</p>

<p>The only <code>system</code> tag applicable for an <code>Invoice</code> is <code>WRITTEN_OFF</code> (<code>00000000-0000-0000-0000-000000000004</code>), which as it&#39;s name indicates, is used to write off an unpaid invoice, bringing its balance to $0.</p>
<h3 id='invoice-add-tags-to-invoice'>Add tags to invoice</h3>
<p>This API adds one or more tags to an invoice. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[ "00000000-0000-0000-0000-000000000004"]'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"45d6f4c5-21be-49b1-99c5-7b0c3c985bf0"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">writtenOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000004"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">createInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                           <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">writtenOffId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
               <span class="n">user</span><span class="p">,</span>
               <span class="n">reason</span><span class="p">,</span>
               <span class="n">comment</span><span class="p">,</span>
               <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000004"</span><span class="p">]</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">create_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                               <span class="n">tag</span><span class="p">,</span> 
                               <span class="n">created_by</span><span class="p">,</span> 
                               <span class="n">api_key</span><span class="p">,</span> 
                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more tag definition ids to be added as tags.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned containing the URL to retrieve the tags associated with the invoice.</p>
<h3 id='invoice-retrieve-invoice-tags'>Retrieve invoice tags</h3>
<p>Retrieve all tags attached to this invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                                           <span class="n">includedDeleted</span><span class="o">,</span> 
                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
             <span class="n">audit</span><span class="p">,</span>
             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'3e94fccf-0f37-40aa-90a4-122a4f381ebc'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e054c84a-0518-4611-92a8-53e849f0affd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2cd2f4b5-a1c0-42a7-924f-64c7b791332d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000002"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTO_INVOICING_OFF"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='invoice-remove-tags-from-invoice'>Remove tags from invoice</h3>
<p>Removes a list of tags attached to an invoice.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags?tagDef=00000000-0000-0000-0000-000000000002"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">autoPayOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">deleteInvoiceTags</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> 
                             <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">autoPayOffId</span><span class="o">),</span> 
                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                  <span class="n">user</span><span class="p">,</span>
                  <span class="n">reason</span><span class="p">,</span>
                  <span class="n">comment</span><span class="p">,</span>
                  <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">invoice_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">delete_invoice_tags</span><span class="p">(</span><span class="n">invoice_id</span><span class="p">,</span> 
                               <span class="n">created_by</span><span class="p">,</span> 
                               <span class="n">api_key</span><span class="p">,</span> 
                               <span class="n">api_secret</span><span class="p">,</span>
                               <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>yes</td>
<td>none</td>
<td>A tag definition ID identifying the tag that should be removed. Multiple tags can be deleted by specifying a separate tagDef parameter corresponding to each tag.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-translation'>Translation</h2>
<p>These endpoints support translation of invoices to a different language when required by the customer. Refer to our <a href="https://docs.killbill.io/latest/internationalization.html#_language_translations">Internationalization manual</a> for an introduction.</p>

<p>Translation replaces words and phrases in an invoice or catalog with the equivalent words or phrases in a different language. A tenant may upload translation tables for specific locales (e.g., locale <code>fr_FR</code> for French). When a customer accesses an invoice, that invoice will be generated from the system data, formatted using the appropriate template (see below), and translated according to the locale of the customer&#39;s account, if a translation table exists for that locale.</p>
<h3 id='invoice-upload-the-catalog-translation-for-the-tenant'>Upload the catalog translation for the tenant</h3>
<p>Uploads a catalog translation table that will be saved under a specified locale. The translation table gives a translation for specific names in the current catalog.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/catalogTranslation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'"sports-monthly = Voiture Sport
silver-monthly = plan d'</span>argent mensuel<span class="s2">"' </span><span class="se">\</span><span class="s2">
    "</span>http://localhost:8080/1.0/kb/invoices/catalogTranslation/fr_FR<span class="s2">"
</span></code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"en_US"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"gold-monthly=plan"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">invoiceApi</span><span class="o">.</span><span class="na">uploadCatalogTranslation</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">deleteIfExists</span><span class="o">,</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">catalog_translation</span> <span class="o">=</span> <span class="s1">'sports-monthly = Voiture Sport'</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_catalog_translation</span><span class="p">(</span><span class="n">catalog_translation</span><span class="p">,</span> 
                                                          <span class="n">locale</span><span class="p">,</span> 
                                                          <span class="n">delete_if_exists</span><span class="p">,</span> 
                                                          <span class="n">user</span><span class="p">,</span> 
                                                          <span class="n">reason</span><span class="p">,</span> 
                                                          <span class="n">comment</span><span class="p">,</span> 
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">"sports-monthly = Voiture Sport"</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">upload_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span>
                                      <span class="n">body</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A table of translation items. For example:</p>

<p>gold-monthly = plan Or mensuel</p>

<p>silver-monthly = plan d&#39;argent mensuel</p>

<p>Note that this table does not use a special syntax such as JSON. The equals sign is the only punctuation. There are no brackets or quotation marks.</p>

<p>The names translated would be primarily plan names, product names, and other items that may appear on an invoice.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing translations</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and a Location header which can be used to retrieve the catalog translation.</p>
<h3 id='invoice-retrieve-the-catalog-translation-for-the-tenant'>Retrieve the catalog translation for the tenant</h3>
<p>Retrieves the catalog translation table that was previously uploaded for a particular locale, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/catalogTranslation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/catalogTranslation/fr_FR"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"en_US"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">translation</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getCatalogTranslation</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_catalog_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"sports-monthly = Voiture Sport"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the translation table. A status code of 404 means no table was found for the specified locale.</p>
<h3 id='invoice-upload-the-invoice-translation-for-the-tenant'>Upload the invoice translation for the tenant</h3>
<p>Uploads an invoice translation table that will be saved under a specified locale. The translation table gives a translation for specific names in the corresponding invoice template.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/translation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s2">"invoiceTitle=FACTURE
invoiceDate=Date:
invoiceNumber=Facture #"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/translation/fr_FR"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"en_US"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"gold-monthly=plan"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">String</span> <span class="n">translation</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">uploadInvoiceTranslation</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">deleteIfExists</span><span class="o">,</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_translation</span> <span class="o">=</span> <span class="n">get_resource_as_string</span><span class="p">(</span><span class="s2">"InvoiceTranslation_fr_FR.properties"</span><span class="p">)</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_translation</span><span class="p">(</span><span class="n">invoice_translation</span><span class="p">,</span>
                                                          <span class="n">locale</span><span class="p">,</span>
                                                          <span class="n">delete_if_exists</span><span class="p">,</span> 
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">"sports-monthly = Voiture Sport"</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">upload_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span>
                                      <span class="n">body</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A table of translation items. For example:</p>

<p>invoiceTitle=FACTURE</p>

<p>invoiceDate=Date:</p>

<p>invoiceNumber=Facture #</p>

<p>invoiceAmount=Montant  payer</p>

<p>Note that this table does not use a special syntax such as JSON. The equals sign is the only punctuation. There are no brackets or quotation marks.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>delete translation if exists</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and a Location header which can be used to retrieve the invoice translation.</p>
<h3 id='invoice-retrieve-the-invoice-translation-for-the-tenant'>Retrieve the invoice translation for the tenant</h3>
<p>Retrieves the invoice translation table that was previously uploaded for a particular locale, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/translation/{locale}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/plain"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/translation/fr_FR"</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"en_US"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">translation</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceTranslation</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">locale</span> <span class="o">=</span> <span class="s2">"fr_FR"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span>
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">locale</span> <span class="o">=</span> <span class="s">'fr_FR'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_translation</span><span class="p">(</span><span class="n">locale</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight plaintext"><code>
sports-monthly : Voiture Sport

</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and the translation table. A status code of 404 means no table was found for the specified locale.</p>
<h2 id='invoice-template'>Template</h2>
<p>A template is a document based on <a href="https://mustache.github.io/"><strong>mustache</strong></a> that provides the layout information for invoices. The template will be translated according to the translation table, if any, and the invoice data will be filled in by the Kill Bill system. Refer to our <a href="https://docs.killbill.io/latest/internationalization.html#_language_translations">Internationalization manual</a> for an introduction.</p>
<h3 id='invoice-upload-the-manualpay-invoice-template-for-the-tenant'>Upload the manualPay invoice template for the tenant</h3>
<p>Uploads an invoice template based on the manual pay option, for accounts that have the MANUAL_PAY tag. These accounts manually pay their invoices (e.g. ACH). Typically, this template will contain extra information like the company bank account details, PO number, etc.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/manualPayTemplate</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/html"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'"Some_HTML_String"'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/manualPayTemplate?deleteIfExists=false"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"Test HTML String"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">String</span> <span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">uploadInvoiceMPTemplate</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">deleteIfExists</span><span class="o">,</span><span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_template</span> <span class="o">=</span> <span class="s2">"Some_HTML_String"</span>
<span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_template</span><span class="p">(</span><span class="n">invoice_template</span><span class="p">,</span> 
                                                       <span class="n">is_manual_pay</span><span class="p">,</span> 
                                                       <span class="n">delete_if_exists</span><span class="p">,</span> 
                                                       <span class="n">user</span><span class="p">,</span> 
                                                       <span class="n">reason</span><span class="p">,</span> 
                                                       <span class="n">comment</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'Some_HTML_String'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">upload_invoice_mp_template</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                      <span class="n">created_by</span><span class="p">,</span>
                                      <span class="n">api_key</span><span class="p">,</span>
                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Contains a mustache manual pay template in HTML format.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing manual pay template</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an empty body.</p>
<h3 id='invoice-retrieve-the-manualpay-invoice-template-for-the-tenant'>Retrieve the manualPay invoice template for the tenant</h3>
<p>Retrieves the manual pay invoice template previously uploaded for this tenant, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/manualPayTemplate</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/manualPayTemplate/"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">locale</span> <span class="o">=</span> <span class="s">"fr_FR"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceMPTemplate</span><span class="o">(</span><span class="n">locale</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">true</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_template</span><span class="p">(</span><span class="n">is_manual_pay</span><span class="p">,</span>
                                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_mp_template</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and the manual pay template.</p>
<h3 id='invoice-upload-the-invoice-template-for-the-tenant'>Upload the invoice template for the tenant</h3>
<p>Uploads an invoice template based on an automatic payment method. This is appropriate for accounts without the MANUAL_PAY tag.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoices/template</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: text/html"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s2">"Some_HTML_String"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/template"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"Test HTML String"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">deleteIfExists</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">String</span> <span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">uploadInvoiceTemplate</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">deleteIfExists</span><span class="o">,</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">invoice_template</span> <span class="o">=</span> <span class="s2">"Some_HTML_String"</span>
<span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">delete_if_exists</span> <span class="o">=</span> <span class="kp">false</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">upload_invoice_template</span><span class="p">(</span><span class="n">invoice_template</span><span class="p">,</span> 
                                                       <span class="n">is_manual_pay</span><span class="p">,</span> 
                                                       <span class="n">delete_if_exists</span><span class="p">,</span> 
                                                       <span class="n">user</span><span class="p">,</span> 
                                                       <span class="n">reason</span><span class="p">,</span> 
                                                       <span class="n">comment</span><span class="p">,</span> 
                                                       <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="s">'Some_HTML_String'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">upload_invoice_template</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                   <span class="n">created_by</span><span class="p">,</span>
                                   <span class="n">api_key</span><span class="p">,</span>
                                   <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Contains a mustache automatic pay template in HTML format.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>deleteIfExists</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, delete any existing manual pay template</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and an empty body.</p>
<h3 id='invoice-retrieve-the-invoice-template-for-the-tenant'>Retrieve the invoice template for the tenant</h3>
<p>Retrieves the automatic pay invoice template previously uploaded for this tenant, if any.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/template</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: text/html"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/invoices/template"</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">template</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceTemplate</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">is_manual_pay</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Invoice</span><span class="p">.</span><span class="nf">get_invoice_template</span><span class="p">(</span><span class="n">is_manual_pay</span><span class="p">,</span>
                                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoice_template</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and the automatic pay template.</p>
<h2 id='invoice-example'>Example</h2>
<p>The translation and templating process may seem a little complex. Here is a simple example for the use of a template with translation.</p>

<ol>
<li><p>To begin, a tenant should upload suitable manual pay and autopay templates reflecting her desired layout for the invoice. If this is not done a default template will be used.</p></li>
<li><p>Suppose the tenant does business with German customers. She then should upload translation tables, perhaps provided by customers, designated for the German locale (de_DE). Tables are needed for both invoice items and catalog items. The invoice items to be translated are the names of the fields on the template, such as invoiceTitle, invoiceAmount, etc. The catalog items to be translated are the names for actual items such as product name and plan name. There can be translation tables for any number of distinct locales.</p></li>
</ol>

<p>Catalog translation example (German):</p>

<p>gold plan = Goldplan
        sports car = Sportwagen</p>

<p>Invoice transaltion example (German):</p>

<p>invoiceTitle = Rechnung
    invoiceNumber = Rechnungsnumber
    invoiceBalance = Rechnungssaldo</p>

<ol>
<li>Each account has a designated locale. When an invoice is retrieved for an account, the appropriate translation tables, if any, are used to translate the invoice.</li>
</ol>

<p>You can refer to the (Invoice Templates Tutorial)[https://docs.killbill.io/latest/invoice_templates.html] to know more about the how this works.</p>
<h2 id='invoice-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='invoice-retrieve-invoice-audit-logs-with-history-by-invoice-id'>Retrieve invoice audit logs with history by invoice id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified invoice. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/{invoiceId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/d456a9b3-7e48-4f56-b387-1d65a492e75e/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">UUID</span> <span class="n">invoiceId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"8f6f3405-249f-4b66-a0c2-ee84e884e81d"</span><span class="o">);</span>
<span class="n">AuditLogs</span> <span class="n">logs</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoiceAuditLogsWithHistory</span><span class="o">(</span><span class="n">invoiceId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionBaseTransition"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2121</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"migrated"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"invoicePayments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"parentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isWrittenOff"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"writtenOff"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICES"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h3 id='invoice-retrieve-invoice-item-audit-logs-with-history-by-invoice-item-id'>Retrieve invoice item audit logs with history by invoice item id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified invoice item. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoiceItems/{invoiceItemId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoiceItems/b45ef2ac-e4b7-4e79-89d8-1c2e95838300/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_ITEM"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b45ef2ac-e4b7-4e79-89d8-1c2e95838300"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionBaseTransition"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f03e074-dea1-45c5-aee3-c9464886f476"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T22:38:10.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2698</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECURRING"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d1b329c7-7dcf-466c-aaca-47bff304dab0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"70b6856e-6938-495f-9ae9-0a8ec0571c37"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Foo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo-monthly"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo-monthly-evergreen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-22"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"linkedItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_ITEMS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_ITEM_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h3 id='invoice-retrieve-invoice-payment-audit-logs-with-history-by-invoice-payment-id'>Retrieve invoice payment audit logs with history by invoice payment id</h3>
<p>Retrieve a list of audit log records showing events that occurred involving changes to a specified invoice payment. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{invoicePaymentId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoicePayments/5eedf918-b418-4d14-8dba-51c977a3f700/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T23:23:21.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5eedf918-b418-4d14-8dba-51c977a3f700"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39b3f8a2-d782-41cd-adcd-460b5f560192"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T23:23:21.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">219</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ATTEMPT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T23:23:21.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentCookieId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d83dd1b-b053-4a4d-99de-9a9e6e0405af"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"linkedInvoicePaymentId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_PAYMENTS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_PAYMENT_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T23:23:21.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5eedf918-b418-4d14-8dba-51c977a3f700"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39b3f8a2-d782-41cd-adcd-460b5f560192"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T23:23:21.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">219</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ATTEMPT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d456a9b3-7e48-4f56-b387-1d65a492e75e"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3ac3de91-0d94-463d-8286-8060846f229d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T23:23:21.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentCookieId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d83dd1b-b053-4a4d-99de-9a9e6e0405af"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"linkedInvoicePaymentId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_PAYMENTS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INVOICE_PAYMENT_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of audit logs with history.</p>
<h2 id='invoice-list-and-search'>List and Search</h2>
<p>These endpoints allow you to list all invoices or to search for a specific invoice. Note that these endpoints return shallow objects and thus the value <code>0</code> is returned for the <code>amount</code>, <code>creditAdj</code>, <code>refundAdj</code> and <code>balance</code> fields. In order to retrieve the actual data for these fields, additional endpoints (like retrieve invoice by id) would need to be invoked. </p>
<h3 id='invoice-list-invoices'>List invoices</h3>
<p>Retrieve a list of all invoice records for this tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/pagination"</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>
<span class="n">Invoices</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoiceApi</span><span class="o">.</span><span class="na">getInvoices</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span> 
                                         <span class="n">limit</span><span class="o">,</span> 
                                         <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span>
                        <span class="n">limit</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">get_invoices</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404a98a8-4dd8-4737-a39f-be871e916a8c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"309"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"310"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VOID"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18e9b3d9-9083-4725-9e8a-27d3a57c2e88"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"311"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DRAFT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c6fe2246-62e2-450d-b9fc-a27003771535"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"312"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DRAFT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d6c7b6b9-f048-4266-bde6-4c381e69f432"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"313"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"71742c60-273f-4c91-8b8c-7555a3554b0a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"314"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8032d7d-4354-46f7-82fa-8e635cc61fc5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"315"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all invoices for this tenant.</p>
<h3 id='invoice-search-invoices'>Search invoices</h3>
<p>Search for an invoice by a specified search string. If the search string is a number, it is compared to the <code>invoiceNumber</code> attribute. An exact match is required. Otherwise, it is compared to the following attributes: <code>invoiceId</code>, <code>accountId</code>, or <code>currency</code>. The operation returns all invoice records in which the search string matches all or part of any one of these attributes.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoices/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/invoices/search/404a98a8-4dd8-4737-a39f-be871e916a8c"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoiceApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoiceApi</span> <span class="n">invoiceApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"1a49101b-305e-4b4d-8403-7377596407b6"</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="na">searchInvoices</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                          <span class="n">offset</span><span class="o">,</span>
                          <span class="n">limit</span><span class="o">,</span> 
                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'COMMITTED'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">invoice</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                      <span class="n">offset</span><span class="p">,</span>
                                      <span class="n">limit</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoiceApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoiceApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'USD'</span>

<span class="n">invoiceApi</span><span class="o">.</span><span class="n">search_invoices</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404a98a8-4dd8-4737-a39f-be871e916a8c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"309"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8785164f-b5d7-4da1-9495-33f5105e8d80"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>What you want to find</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>none</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>none</td>
<td>100</td>
<td>Maximum number of items to return on this page</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a list of all invoices matched with the search key entered.</p>
<h1 id='credit'>Credit</h1><h2 id='credit-credit-resource'>Credit Resource</h2>
<p>The <code>Credit</code> resource represents the credits created on behalf of the customer <code>Account</code>. Credits are tracked inside invoices, as a specical kind of
invoice item. The credits are visible at the level of the <code>Account</code>, i.e account credit, and those will automatically be consumed by the system on
subsequent invoices to bring the balance to zero -- or reduce the balance if there is not enough credit to pay the full amount.</p>

<p>See section <a href="#invoice">Invoice Resource</a> for the description of the <code>InvoiceItem</code> attributes.</p>
<h2 id='credit-credit'>Credit</h2>
<p>Basic endpoints to create and retrieve credit invoice items</p>
<h3 id='credit-create-credits'>Create credits</h3>
<p>Create one or more credits for a specified account. These credits will appear as <code>invoiceItem</code>s. They may be added to an existing DRAFT invoice, or they may result in the creation of a new invoice. While adding a credit to an existing invoice, specifying fields like <code>linkedInvoiceItemId</code>, <code>subscriptionId</code> has no effect. These fields do not get saved in the database and will not be returned in subsequent <code>GET</code> requests</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/credits</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'[{"amount": 50.0, "currency": "USD", "accountId": "1f979085-1765-471b-878a-5f640db4d831", "description": "example"}]'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/credits?autoCommit=true"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CreditApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CreditApi</span> <span class="n">creditApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">Credit</span> <span class="n">credit</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItem</span><span class="o">();</span>
<span class="n">credit</span><span class="o">.</span><span class="na">setAccountId</span><span class="o">(</span><span class="n">accountId</span><span class="o">);</span>
<span class="n">credit</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">credit</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">"description"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">autoCommit</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">pluginProperty</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="kd">final</span> <span class="n">InvoiceItems</span> <span class="n">credits</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoiceItems</span><span class="o">();</span>
<span class="n">credits</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">credit</span><span class="o">);</span>
<span class="n">InvoiceItems</span> <span class="n">createdCredits</span> <span class="o">=</span> <span class="n">creditApi</span><span class="o">.</span><span class="na">createCredits</span><span class="o">(</span><span class="n">credits</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">credit_item</span>                 <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">new</span><span class="p">()</span>
<span class="n">credit_item</span><span class="p">.</span><span class="nf">account_id</span>      <span class="o">=</span> <span class="s1">'da3769a8-58c4-4dc0-b4e8-7b534e349624'</span>
<span class="n">credit_item</span><span class="p">.</span><span class="nf">amount</span>          <span class="o">=</span> <span class="mi">50</span><span class="o">.</span><span class="mi">0</span>
<span class="n">credit_item</span><span class="p">.</span><span class="nf">currency</span>        <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">credit_item</span><span class="p">.</span><span class="nf">description</span>     <span class="o">=</span> <span class="s1">'description'</span>

<span class="n">auto_commit</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">credit_item</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">auto_commit</span><span class="p">,</span> 
                   <span class="n">user</span><span class="p">,</span>
                   <span class="n">reason</span><span class="p">,</span>
                   <span class="n">comment</span><span class="p">,</span>
                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">creditApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CreditApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">Credit</span><span class="p">(</span><span class="n">account_id</span><span class="o">=</span><span class="n">account_id</span><span class="p">,</span> 
              <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> 
              <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span> 
              <span class="n">description</span><span class="o">=</span><span class="s">'example'</span><span class="p">)</span>

<span class="n">creditApi</span><span class="o">.</span><span class="n">create_credits</span><span class="p">([</span><span class="n">body</span><span class="p">],</span> <span class="n">created_by</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2a7746a3-abad-42d9-9f54-fe50c0b18802"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3caf986-8909-4677-afd4-ba03deeae8f0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"linkedInvoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f979085-1765-471b-878a-5f640db4d831"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"childAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bundleId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"productName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"planName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"usageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyProductName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyPlanName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyPhaseName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prettyUsageName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"itemType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREDIT_ADJ"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-17"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-17"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
    </span><span class="s2">"rate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"catalogEffectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"childItems"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Request Body</strong></p>

<p>A list of one or more invoiceItem objects. Each object requires at least the following attributes: accountId and amount. If an invoiceId is given, the item will be added to the specified invoice. This invoice must be in DRAFT status or an error will occur. </p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>autoCommit</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, the resulting invoice will be <code>COMMITTED</code>.</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of invoiceItem resource objects representing the credit(s).</p>
<h3 id='credit-retrieve-a-credit-by-id'>Retrieve a credit by id</h3>
<p>Retrieve an invoiceItem representing a credit given the invoiceItemId.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/credits/{invoiceItemId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/credits/c8bfa9d1-76e5-4a42-92d0-b106c0902c16"</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.CreditApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">CreditApi</span> <span class="n">creditApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">creditId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"d2edf4c0-9929-4e2f-b3a9-feb9bd9d60ba"</span><span class="o">);</span>

<span class="n">Credit</span> <span class="n">result</span> <span class="o">=</span> <span class="n">creditApi</span><span class="o">.</span><span class="na">getCredit</span><span class="o">(</span><span class="n">creditId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">credit_id</span> <span class="o">=</span> <span class="s1">'fd5669a8-68c1-8dl0-m4e8-8y535e349324'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Credit</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">credit_id</span> <span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">creditApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">CreditApi</span><span class="p">()</span>

<span class="n">creditApi</span><span class="o">.</span><span class="n">get_credit</span><span class="p">(</span><span class="n">credit_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"invoiceItemId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c8bfa9d1-76e5-4a42-92d0-b106c0902c16"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"903e55d3-8072-47f1-80fc-32857dbdbcc5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"310"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-20"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"itemDetails"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an invoiceItem resource object with itemType CREDIT_ADJ representing a credit.</p>
<h1 id='payment'>Payment</h1>
<p>A Payment in Kill Bill is an amount paid or payable on a specific account due to an invoice or independent of any invoice.</p>

<p>A Payment may be associated with a series of <code>PaymentTransaction</code>s, such as authorization, payment attempt, chargeback, etc. each of which may succeed or fail.</p>

<p>A Payment Transaction takes place using a <code>PaymentMethod</code> such as a credit card. The transaction is processed by a plugin, which provides access to the appropriate payment gateway. The payment gateway processes the transaction, using the Payment Method provided in the request.</p>

<p>A Payment Attempt is an attempt to perform a Payment Transaction. A Payment Attempt may succeed or fail, and a Payment Transaction may have more than one Payment Attempt. In some cases a Payment Transaction may be in a PENDING state waiting for completion of its processing by the plugin.</p>

<p>Please refer to the <a href="http://docs.killbill.io/latest/userguide_payment.html">payment manual</a> for more details.</p>
<h2 id='payment-payment-resource'>Payment Resource</h2>
<p>A Payment is represented by a <code>Payment</code> resource object. The attributes for the Payment resource are as follows:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>paymentId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account</td>
</tr>
<tr>
<td><strong>paymentNumber</strong></td>
<td>number</td>
<td>user or system</td>
<td>User&#39;s ID number for the payment</td>
</tr>
<tr>
<td><strong>paymentExternalKey</strong></td>
<td>string</td>
<td>user or system</td>
<td>Optional external key</td>
</tr>
<tr>
<td><strong>authAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount authorized (see below)</td>
</tr>
<tr>
<td><strong>capturedAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount captured (see below)</td>
</tr>
<tr>
<td><strong>purchasedAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount purchased (see below)</td>
</tr>
<tr>
<td><strong>refundedAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount refunded (see below)</td>
</tr>
<tr>
<td><strong>creditedAmount</strong></td>
<td>string</td>
<td>system</td>
<td>Total amount credited (see below)</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment method</td>
</tr>
<tr>
<td><strong>transactions</strong></td>
<td>list</td>
<td>system</td>
<td><strong>PaymentTransactions</strong> associated with this payment (see below)</td>
</tr>
<tr>
<td><strong>paymentAttempts</strong></td>
<td>list</td>
<td>system</td>
<td>Payment retries (see below)</td>
</tr>
</tbody></table>

<ul>
<li><p><strong>authAmount</strong>: Total amount that is authorized for this payment. Often this is the amount authorized by a single AUTHORIZATION Payment Transaction.</p></li>
<li><p><strong>capturedAmount</strong>: Total amount that has been captured (that is, successfully paid).</p></li>
<li><p><strong>purchasedAmount</strong>: Total amount that has been purchased. A PURCHASE transaction combines authorization and capture.</p></li>
<li><p><strong>refundedAmount</strong>: Total amount that has been refunded.</p></li>
<li><p><strong>creditedAmount</strong>: Total amount that has been credited.</p></li>
<li><p><strong>paymentAttempts</strong>: Number of payment attempts; this is only effective when the system has been configured to retry failed transactions.</p></li>
</ul>

<p>The attributes for a <code>PaymentTransaction</code> are described <a href="#payment-transaction-payments-transactions">here</a>.</p>
<h2 id='payment-payments'>Payments</h2>
<p>These endpoints initiate transactions on an existing Payment. To begin a new Payment, see <a href="https://killbill.github.io/slate/?shell#account-trigger-a-payment-authorization-purchase-or-credit">Trigger a Payment</a> in the Account API. </p>
<h3 id='payment-capture-an-existing-authorization-using-paymentid'>Capture an existing authorization [using paymentId]</h3>
<p>Attempts to capture a payment amount based on a prior authorization. (A prior authorization may be created via the <a href="https://killbill.github.io/slate/index.html?shell#account-trigger-a-payment-authorization-purchase-or-credit">Trigger a Payment</a> endpoint). The Payment is identified by its <code>paymentId</code> provided as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "amount": 5
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"33eae7eb-0ad4-45d6-a12a-940e0b460be4"</span><span class="o">);</span>

<span class="n">PaymentTransaction</span> <span class="n">captureTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">capturedPayment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">captureAuthorization</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                          <span class="n">captureTransaction</span><span class="o">,</span> 
                                                          <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                          <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>            <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span> <span class="o">=</span> <span class="s2">"b2a187b8-0028-4de8-b349-0ebe4e714a5a"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>     <span class="o">=</span> <span class="s2">"483.22"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">currency</span>   <span class="o">=</span> <span class="s2">"BTC"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">capture</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'b2a187b8-0028-4de8-b349-0ebe4e714a5a'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">,</span> 
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> 
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">capture_authorization</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                 <span class="n">body</span><span class="p">,</span>
                                 <span class="n">created_by</span><span class="p">,</span>
                                 <span class="n">api_key</span><span class="p">,</span>
                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A <code>PaymentTransaction</code> object containing, as a minimum, the <code>amount</code> to be captured.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A Location header containing the payment id is also included in the response. A PaymentTransaction of type CAPTURE is created.</p>
<h3 id='payment-capture-an-existing-authorization-using-paymentexternalkey'>Capture an existing authorization [using paymentExternalKey]</h3>
<p>Requests a payment amount based on a prior authorization.(A prior authorization may be created via the <a href="https://killbill.github.io/slate/index.html?shell#account-trigger-a-payment-authorization-purchase-or-credit">Trigger a Payment</a> endpoint).The payment is identified by its external key given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "paymentExternalKey",
          "amount": 1
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments'</span>     
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">PaymentTransaction</span> <span class="n">captureTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"8e0c507a-05f9-4572-a57d-3f742cdc040d"</span><span class="o">);</span> <span class="c1">//payment external key</span>
<span class="n">captureTransaction</span><span class="o">.</span><span class="na">setTransactionExternalKey</span><span class="o">(</span><span class="s">"9b4dbbe7-749d-4c96-a2e7-57b8bff3bf05"</span><span class="o">);</span> <span class="c1">//external key to be set on the newly created CAPTURE transaction</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">capturedPayment2</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">captureAuthorizationByExternalKey</span><span class="o">(</span><span class="n">captureTransaction</span><span class="o">,</span> 
                                                                        <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                                        <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                          <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>                   <span class="o">=</span> <span class="s2">"483.22"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">currency</span>                 <span class="o">=</span> <span class="s2">"BTC"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_external_key</span> <span class="o">=</span> <span class="s2">"payment1-323475"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">capture</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                    <span class="n">reason</span><span class="p">,</span> 
                    <span class="n">comment</span><span class="p">,</span> 
                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">capture_authorization_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> 
                                                 <span class="n">created_by</span><span class="p">,</span> 
                                                 <span class="n">api_key</span><span class="p">,</span> 
                                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A <code>PaymentTransaction</code> object containing, as a minimum, the <code>paymentExternalKey</code> and the<code>amount</code> to be captured.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body. A Location header containing the payment id is also included in the response. A PaymentTransaction of type CAPTURE is created.</p>
<h3 id='payment-retrieve-a-payment-using-paymentid'>Retrieve a payment [using paymentId]</h3>
<p>Retrieves a <code>Payment</code> object based on its <code>paymentId</code> given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will reflect payment attempts</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                        <span class="n">withPluginInfo</span><span class="o">,</span> 
                                        <span class="n">withAttempts</span><span class="o">,</span> 
                                        <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                        <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                        <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s2">"12c70604-cede-4df3-a321-38be4d176e9a"</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_attempts</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Payment</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                          <span class="n">with_plugin_info</span><span class="p">,</span> 
                                          <span class="n">with_attempts</span><span class="p">,</span> 
                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'ce88ae5b-7ec0-4e14-9ea1-fffe4411278e'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paymentExternalKey"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paymentExternalKey"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTHORIZE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a <code>Payment</code> object.</p>

<p><strong>Note:</strong> The <code>effectiveDate</code> of the last payment attempt in <code>SCHEDULED</code> state corresponds to the next scheduled payment retry date and can be used as such.</p>
<h3 id='payment-retrieve-a-payment-using-paymentexternalkey'>Retrieve a payment [using paymentExternalKey]</h3>
<p>Retrieves a Payment object based on its external key given as a query parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments?externalKey=paymentExternalKey'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalPaymentKey</span> <span class="o">=</span> <span class="s">"11b28b2e-a377-4b95-b712-d71cbcb28f80"</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentByExternalKey</span><span class="o">(</span><span class="n">externalPaymentKey</span><span class="o">,</span>
                                                     <span class="n">withPluginInfo</span><span class="o">,</span> 
                                                     <span class="n">withAttempts</span><span class="o">,</span> 
                                                     <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                     <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_attempts</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Payment</span><span class="p">.</span><span class="nf">find_by_external_key</span><span class="p">(</span><span class="n">external_key</span><span class="p">,</span> 
                                                    <span class="n">with_plugin_info</span><span class="p">,</span> 
                                                    <span class="n">with_attempts</span><span class="p">,</span> 
                                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span> 

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payment_by_external_key</span><span class="p">(</span><span class="n">payment_external_key</span><span class="p">,</span>
                                       <span class="n">api_key</span><span class="p">,</span>
                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paymentExternalKey"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paymentExternalKey"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTHORIZE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Payment external key</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a <code>Payment</code> object.</p>
<h3 id='payment-complete-an-existing-transaction-using-paymentid'>Complete an existing transaction [using paymentId]</h3>
<p>Completes any existing PaymentTransaction that is in a PENDING state, based on its <code>paymentId</code> given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/payments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "paymentId": "8fe697d4-2c25-482c-aa45-f6cd5a48186d"
      }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">completeTransaction</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                               <span class="n">body</span><span class="o">,</span> 
                               <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                               <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                               <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>            <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span> <span class="o">=</span> <span class="s2">"7dcda896-808b-414c-aad4-74ddc98e3dcb"</span>
<span class="n">refresh_options</span>        <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">complete_initial_transaction</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                         <span class="n">reason</span><span class="p">,</span> 
                                         <span class="n">comment</span><span class="p">,</span> 
                                         <span class="n">options</span><span class="p">,</span> 
                                         <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'7dcda896-808b-414c-aad4-74ddc98e3dcb'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">complete_transaction</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                <span class="n">body</span><span class="p">,</span>
                                <span class="n">created_by</span><span class="p">,</span>
                                <span class="n">api_key</span><span class="p">,</span>
                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>paymentId</code></p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-complete-an-existing-transaction-using-paymentexternalkey'>Complete an existing transaction [using paymentExternalKey]</h3>
<p>Completes any existing PaymentTransaction that is in a PENDING state, based on its <code>paymentExternalKey</code> given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "paymentExternalKey"
      }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">externalPaymentKey</span> <span class="o">=</span> <span class="s">"11b28b2e-a377-4b95-b712-d71cbcb28f80"</span><span class="o">;</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="n">externalPaymentKey</span><span class="o">);</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">completeTransactionByExternalKey</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> 
                                            <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                            <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>
<span class="n">refresh_options</span>                  <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">complete_initial_transaction</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                         <span class="n">reason</span><span class="p">,</span> 
                                         <span class="n">comment</span><span class="p">,</span> 
                                         <span class="n">options</span><span class="p">,</span> 
                                         <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">complete_transaction_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                                <span class="n">created_by</span><span class="p">,</span>
                                                <span class="n">api_key</span><span class="p">,</span>
                                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>paymentExternalKey</code></p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-void-an-existing-payment-using-paymentid'>Void an existing payment [using paymentId]</h3>
<p>Voids a Payment, providing it is in a voidable state. For example, a Payment with only an AUTHORIZE transaction can be voided. No further transactions are possible on a voided Payment. The Payment is identified by its <code>paymentId</code>, which is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{ 
            "paymentId": "8fe697d4-2c25-482c-aa45-f6cd5a48186d"
      }'</span> <span class="se">\ </span>   
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">voidPayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                       <span class="n">body</span><span class="o">,</span> 
                       <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                       <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>             <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span>  <span class="o">=</span> <span class="s2">"29b34a3d-d301-4e57-8fc2-2c0a201c4fd0"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">void</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                 <span class="n">reason</span><span class="p">,</span> 
                 <span class="n">comment</span><span class="p">,</span> 
                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'29b34a3d-d301-4e57-8fc2-2c0a201c4fd0'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">void_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                        <span class="n">body</span><span class="p">,</span>
                        <span class="n">created_by</span><span class="p">,</span>
                        <span class="n">api_key</span><span class="p">,</span>
                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>paymentId</code></p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. a PaymentTransaction of type VOID is created.</p>
<h3 id='payment-void-an-existing-payment-using-paymentexternalkey'>Void an existing payment [using paymentExternalKey]</h3>
<p>Voids a Payment, providing it is in a voidable state. For example, a Payment with only an AUTHORIZE transaction can be voided. can be voided. No further transactions are possible on a voided payment. The payment is identified by its <code>paymentExternalKey</code>, which is given as a query parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "paymentExternalKey"
      }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments'</span>     
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">paymentExternalKey</span> <span class="o">=</span> <span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">;</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="n">paymentExternalKey</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">voidPaymentByExternalKey</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> 
                                    <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                          <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_external_key</span> <span class="o">=</span> <span class="s2">"payment2-121268-void"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">void</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                 <span class="n">reason</span><span class="p">,</span> 
                 <span class="n">comment</span><span class="p">,</span> 
                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">void_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A Payment object containing, at least, the <code>paymentExternalKey</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. A PaymentTransaction of type VOID is created.</p>
<h3 id='payment-record-a-chargeback-using-paymentid'>Record a chargeback [using paymentId]</h3>
<p>Creates a CHARGEBACK PaymentTransaction for a specified Payment. The Payment is identified by its <code>paymentId</code> given as a path parameter. The captured amount is reduced by the chargeback amount.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/chargebacks</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "amount": 5
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/chargebacks'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"8a096f10-1591-4546-880d-f6d4f7ea818c"</span><span class="o">);</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">chargebackPayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> <span class="n">body</span><span class="o">,</span> <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span>     <span class="o">=</span> <span class="s2">"42ab1653-051f-416c-8c70-bf5d4061d4fa"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>         <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">currency</span>       <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">effective_date</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">refresh_options</span>            <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">chargeback</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                       <span class="n">reason</span><span class="p">,</span> 
                       <span class="n">comment</span><span class="p">,</span> 
                       <span class="n">options</span><span class="p">,</span> 
                       <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'42ab1653-051f-416c-8c70-bf5d4061d4fa'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                          <span class="n">effective_date</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">chargeback_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                              <span class="n">body</span><span class="p">,</span>
                              <span class="n">created_by</span><span class="p">,</span>
                              <span class="n">api_key</span><span class="p">,</span>
                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A Payment Transaction object containing, at least, the <code>amount</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. A Payment Transaction is created with type CHARGEBACK.</p>
<h3 id='payment-record-a-chargeback-using-paymentexternalkey'>Record a chargeback [using paymentExternalKey]</h3>
<p>Creates a CHARGEBACK PaymentTransaction for a specified Payment. The Payment is identified by its <code>paymentExternalKey</code> given in the request body. The captured amount is reduced by the chargeback amount.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/chargebacks</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "a187746f-841a-481c-8d6c-4497080ed968",
          "amount": 5,
          "currency": "USD"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/chargebacks'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"a975f7b8-1e59-4801-91c9-fcce1526b019"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">chargebackPaymentByExternalKey</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>               <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">currency</span>             <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">effective_date</span>       <span class="o">=</span> <span class="kp">nil</span>
<span class="n">refresh_options</span>                  <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">chargeback</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                       <span class="n">reason</span><span class="p">,</span> 
                       <span class="n">comment</span><span class="p">,</span> 
                       <span class="n">options</span><span class="p">,</span> 
                       <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'sample_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span>
                          <span class="n">effective_date</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">chargeback_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>paymentExternalKey</code> and the <code>amount</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body. A PaymentTransaction is created with type CHARGEBACK.</p>
<h3 id='payment-record-a-chargeback-reversal-using-paymentid'>Record a chargeback reversal [using paymentId]</h3>
<p>Reverses a CHARGEBACK PaymentTransaction, if permitted by the Payment plugin. The chargeback amount is added back to the captured amount. The payment is identified by its <code>paymentId</code> which is given as a path parameter. The CHARGEBACK transaction is identified by its <code>transactionExternalKey</code> which is given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/chargebackReversals</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "transactionExternalKey": "7ff346e8-24cc-4437-acfa-c79d96d54ee2"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/chargebackReversals'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"a975f7b8-1e59-4801-91c9-fcce1526b019"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">chargebackPaymentByExternalKey</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                          <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_external_key</span> <span class="o">=</span> <span class="s2">"9ceb96a2-5407-482b-8847-7b08cc64213f"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span>               <span class="o">=</span> <span class="s2">"74a82e25-120a-4a39-a7f7-7b5c2b4ac05d"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">chargeback_reversals</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span> 
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'74a82e25-120a-4a39-a7f7-7b5c2b4ac05d'</span>
<span class="n">transaction_external_key</span> <span class="o">=</span> <span class="s">'9ceb96a2-5407-482b-8847-7b08cc64213f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">,</span>
                          <span class="n">transaction_external_key</span><span class="o">=</span><span class="n">transaction_external_key</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">chargeback_reversal_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                       <span class="n">body</span><span class="p">,</span>
                                       <span class="n">created_by</span><span class="p">,</span>
                                       <span class="n">api_key</span><span class="p">,</span>
                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>transactionExternalKey</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='payment-record-a-chargeback-reversal-using-paymentexternalkey'>Record a chargeback reversal [using paymentExternalKey]</h3>
<p>Reverses a CHARGEBACK PaymentTransaction, if permitted by the Payment plugin. The chargeback amount is added back to the captured amount. The Payment is identified by its <code>paymentExternalKey</code> which is given in the request body. The CHARGEBACK transaction is identified by its <code>transactionExternalKey</code> which is also given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/chargebackReversals</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "transactionExternalKey": "7ff346e8-24cc-4437-acfa-c79d96d54ee2",
          "paymentExternalKey": "paymentExternalKey"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/chargebackReversals'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"631ec4ac-d745-4457-939d-d761badbf0ad"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setTransactionExternalKey</span><span class="o">(</span><span class="s">"72789509-2b94-43b6-b889-42c5ec5d27f3"</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">chargebackPaymentByExternalKey</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">chargeback_reversals</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                 <span class="n">reason</span><span class="p">,</span> 
                                 <span class="n">comment</span><span class="p">,</span> 
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">,</span>
                          <span class="n">transaction_external_key</span><span class="o">=</span><span class="n">transaction_external_key</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">chargeback_reversal_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object containing, at least, the <code>paymentExternalKey</code> and the <code>TransactionExternalKey</code>.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='payment-refund-an-existing-payment-using-paymentid'>Refund an existing payment [using paymentId]</h3>
<p>Refunds part or all of the balance of an existing Payment. The Payment is identified by its <code>paymentId</code>, which is given as a path parameter. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/refunds</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "amount": 5
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/refunds'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"89614849-9bd6-43ba-93d0-e9deb1acf575"</span><span class="o">);</span>

<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"de924e98-2c76-4e90-b9d6-2ced262bc251"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">refundPayment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">refundPayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                 <span class="n">body</span><span class="o">,</span> 
                                                 <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                 <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>            <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_id</span> <span class="o">=</span> <span class="s2">"dce5b2a0-0f0f-430b-9427-545ba4be5c7f"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>     <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">refresh_options</span>        <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">refund</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                   <span class="n">reason</span><span class="p">,</span> 
                   <span class="n">comment</span><span class="p">,</span> 
                   <span class="n">options</span><span class="p">,</span> 
                   <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'dce5b2a0-0f0f-430b-9427-545ba4be5c7f'</span> 
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">refund_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                          <span class="n">body</span><span class="p">,</span>
                          <span class="n">created_by</span><span class="p">,</span>
                          <span class="n">api_key</span><span class="p">,</span>
                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object including, as a minimum, the <code>amount</code> to be refunded.</p>

<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a Location header containing the payment id is returned. A new PaymentTransaction of type <code>REFUND</code> is created.</p>
<h3 id='payment-refund-an-existing-payment-using-paymentexternalkey'>Refund an existing payment [using paymentExternalKey]</h3>
<p>Refunds part or all of the balance of an existing payment. The payment is identified by its <code>paymentExternalKey</code>, which is given in the request body.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/refunds</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "paymentExternalKey": "paymentExternalKey",
          "amount": 5,
          "currency": "USD"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/refunds'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
<span class="n">body</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentExternalKey</span><span class="o">(</span><span class="s">"da96999c-b1ac-470f-8c48-c4ecf386cd89"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">refundPayment</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">refundPaymentByExternalKey</span><span class="o">(</span><span class="n">body</span><span class="o">,</span> <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                      <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">payment_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">amount</span>               <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">refresh_options</span>                  <span class="o">=</span> <span class="kp">nil</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">refund_by_external_key</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                   <span class="n">reason</span><span class="p">,</span> 
                                   <span class="n">comment</span><span class="p">,</span> 
                                   <span class="n">options</span><span class="p">,</span> 
                                   <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_external_key</span> <span class="o">=</span> <span class="s">'example_payment_external_key'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_external_key</span><span class="o">=</span><span class="n">payment_external_key</span><span class="p">,</span>
                          <span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">refund_payment_by_external_key</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                          <span class="n">created_by</span><span class="p">,</span>
                                          <span class="n">api_key</span><span class="p">,</span>
                                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A PaymentTransaction object including, as a minimum, the <code>paymentExternalKey</code> and the <code>amount</code> to be refunded.</p>

<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a Location header containing the payment id is returned. A new PaymentTransaction of type <code>REFUND</code> is created.</p>
<h3 id='payment-cancel-a-scheduled-payment-attempt-retry-using-transactionid'>Cancel a scheduled payment attempt retry [using transactionId]</h3>
<p>Cancels a scheduled attempt to retry a PaymentTransaction. The transaction is identified by its <code>transactionId</code>, which is provided as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/{paymentTransactionId}/cancelScheduledPaymentTransaction</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/208d38df-8d5a-4e20-89df-15db4b3516b4/cancelScheduledPaymentTransaction'</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"54aed1ed-f8dc-4445-a19f-3a2519c1a334"</span><span class="o">);</span>
<span class="n">paymentApi</span><span class="o">.</span><span class="na">cancelScheduledPaymentTransactionById</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_id</span> <span class="o">=</span> <span class="s2">"231d2bbc-7ce3-4946-b6d9-f24f9a25ff6c"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">cancel_scheduled_payment</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                     <span class="n">reason</span><span class="p">,</span> 
                                     <span class="n">comment</span><span class="p">,</span> 
                                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'231d2bbc-7ce3-4946-b6d9-f24f9a25ff6c'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">cancel_scheduled_payment_transaction_by_id</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                                      <span class="n">created_by</span><span class="p">,</span>
                                                      <span class="n">api_key</span><span class="p">,</span>
                                                      <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-cancel-a-scheduled-payment-attempt-retry-using-transactionexternalkey'>Cancel a scheduled payment attempt retry [using transactionExternalKey]</h3>
<p>Cancels a scheduled attempt to retry a PaymentTransaction. The transaction is identified by its <code>transactionExternalKey</code>, which is provided as a query parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/cancelScheduledPaymentTransaction</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/cancelScheduledPaymentTransaction?transactionExternalKey=transaction'</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">transactionExternalKey</span> <span class="o">=</span> <span class="s">"example_payment_external_key"</span><span class="o">;</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">cancelScheduledPaymentTransactionByExternalKey</span><span class="o">(</span><span class="n">transactionExternalKey</span><span class="o">,</span> <span class="n">inputOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">transaction</span>                          <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Transaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">transaction</span><span class="p">.</span><span class="nf">transaction_external_key</span> <span class="o">=</span> <span class="s2">"example_payment_external_key"</span>

<span class="n">transaction</span><span class="p">.</span><span class="nf">cancel_scheduled_payment</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                                     <span class="n">reason</span><span class="p">,</span> 
                                     <span class="n">comment</span><span class="p">,</span> 
                                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">transaction_external_key</span> <span class="o">=</span> <span class="s">'example_payment_external_key'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">cancel_scheduled_payment_transaction_by_external_key</span><span class="p">(</span><span class="n">transaction_external_key</span><span class="p">,</span>
                                                                <span class="n">created_by</span><span class="p">,</span>
                                                                <span class="n">api_key</span><span class="p">,</span>
                                                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>transactionExternalKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Transaction external key</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-combo-api-to-create-a-new-payment-transaction-on-a-existing-or-not-account'>Combo api to create a new payment transaction on a existing (or not) account</h3>
<p>This API creates a PaymentTransaction of type AUTHORIZE, PURCHASE, or CREDIT. This is the same as the API <a href="https://killbill.github.io/slate/#account-trigger-a-payment-authorization-purchase-or-credit">Trigger a Payment</a> described with the Account endpoints. However, this API can optionally create a new Account and register a new PaymentMethod at the same time.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/combo</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
            "account": 
            {
                "name": "John Doe"
            },
            "paymentMethod": 
            {
                "pluginName": "__EXTERNAL_PAYMENT__"
            },
            "transaction":
            {
                "transactionType": "AUTHORIZE",
                "amount": 5,
                "currency": "USD"
            }
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/combo'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AccountApi</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">Account</span> <span class="n">account</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Account</span><span class="o">();</span>
<span class="n">account</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">"Jane Doe"</span><span class="o">);</span>
<span class="n">account</span><span class="o">.</span><span class="na">setExternalKey</span><span class="o">(</span><span class="s">"JaneDoe"</span><span class="o">);</span>

<span class="n">PaymentMethod</span> <span class="n">paymentMethod</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentMethod</span><span class="o">();</span>
<span class="n">paymentMethod</span><span class="o">.</span><span class="na">setPluginName</span><span class="o">(</span><span class="s">"__EXTERNAL_PAYMENT__"</span><span class="o">);</span>

<span class="n">PaymentTransaction</span> <span class="n">paymentTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">paymentTransaction</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">TEN</span><span class="o">);</span>
<span class="n">paymentTransaction</span><span class="o">.</span><span class="na">setCurrency</span><span class="o">(</span><span class="n">Currency</span><span class="o">.</span><span class="na">USD</span><span class="o">);</span>
<span class="n">paymentTransaction</span><span class="o">.</span><span class="na">setTransactionType</span><span class="o">(</span><span class="n">TransactionType</span><span class="o">.</span><span class="na">AUTHORIZE</span><span class="o">);</span>

<span class="n">ComboPaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ComboPaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAccount</span><span class="o">(</span><span class="n">account</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentMethod</span><span class="o">(</span><span class="n">paymentMethod</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setTransaction</span><span class="o">(</span><span class="n">paymentTransaction</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payment</span> <span class="n">result</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">createComboPayment</span><span class="o">(</span><span class="n">body</span><span class="o">,</span>  <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">combo_transaction</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">ComboTransaction</span><span class="p">.</span><span class="nf">new</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">account</span> <span class="o">=</span> <span class="n">account_obj</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">payment_method</span> <span class="o">=</span> <span class="n">payment_method_obj</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">transaction</span> <span class="o">=</span> <span class="n">transaction_obj</span>

<span class="n">refresh_options</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="c1"># Authorization</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">auth</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                       <span class="n">reason</span><span class="p">,</span> 
                       <span class="n">comment</span><span class="p">,</span> 
                       <span class="n">options</span><span class="p">,</span> 
                       <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Purchase</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">purchase</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                           <span class="n">reason</span><span class="p">,</span> 
                           <span class="n">comment</span><span class="p">,</span> 
                           <span class="n">options</span><span class="p">,</span> 
                           <span class="n">refresh_options</span><span class="p">)</span>

<span class="c1"># Credit</span>
<span class="n">combo_transaction</span><span class="p">.</span><span class="nf">credit</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> 
                         <span class="n">reason</span><span class="p">,</span> 
                         <span class="n">comment</span><span class="p">,</span> 
                         <span class="n">options</span><span class="p">,</span> 
                         <span class="n">refresh_options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">ComboPaymentTransaction</span><span class="p">(</span><span class="n">account_obj</span><span class="p">,</span> <span class="n">payment_method_obj</span><span class="p">,</span> <span class="n">payment_transaction_obj</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">create_combo_payment</span><span class="p">(</span><span class="n">body</span><span class="p">,</span>
                                <span class="n">created_by</span><span class="p">,</span>
                                <span class="n">api_key</span><span class="p">,</span>
                                <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>The request body is a JSON string that represents three distinct objects: account, paymentMethod, and transaction. For example:</p>
<pre class="highlight plaintext"><code>{
  "account": {
  },
  "paymentMethod": {
    "pluginName": "__EXTERNAL_PAYMENT__"
  "transaction": {
    "transactionType": "AUTHORIZE",
    "amount": 500,
    "currency": "USD"
  }
}
</code></pre>
<p>This example assumes that a new Account is to be created.</p>

<ol>
<li><p>No attributes are required for the account; however if the <code>currency</code> attribute is not given here it must be given for the transaction.</p></li>
<li><p>If a new account is created, a new paymentMethod must be registered for that account.  The only attribute required here is the pluginName.</p></li>
<li><p>The transaction object contains, as a minimum, the transaction type, the amount, and the currency, unless given with the account.</p></li>
</ol>

<p><strong>Query Parameters</strong></p>

<p>None. </p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 201 and an empty body. In addition, a <code>Location</code> header containing the <code>paymentId</code> is returned.</p>
<h2 id='payment-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to Payment objects. For details on Custom Fields see <a href="https://killbill.github.io/slate/#custom-field">Custom Field</a>.</p>
<h3 id='payment-add-custom-fields-to-payment'>Add custom fields to payment</h3>
<p>Adds one or more custom fields to a payment object. Existing custom fields are not modified.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "name": "Test Custom Field",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">paymentId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">PAYMENT</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">createPaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                     <span class="n">customFields</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'PAYMENT'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                         <span class="n">user</span><span class="p">,</span>
                         <span class="n">reason</span><span class="p">,</span>
                         <span class="n">comment</span><span class="p">,</span>
                         <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">create_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A list of <a href="https://killbill.github.io/slate/?java#custom-field-custom-field-resource">Custom Field</a> objects. Each object should specify at least the the <code>name</code> and <code>value</code> attribute. For example:</p>

<p>[ { &quot;name&quot;: &quot;CF1&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned with the URL to retrieve the custom fields associated with the payment.</p>
<h3 id='payment-retrieve-payment-custom-fields'>Retrieve payment custom fields</h3>
<p>Retrieves the custom fields associated with a payment</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span>
                                                                   <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e4bac228-872d-4966-8072-2c3ac06442ed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return:&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.</p>
<h3 id='payment-modify-custom-fields-for-a-payment'>Modify custom fields for a payment</h3>
<p>Modifies the custom fields associated with a payment object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "e4bac228-872d-4966-8072-2c3ac06442ed",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">modifyPaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                     <span class="n">customFieldModified</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Test Modify'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_modify_value'</span><span class="p">)</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">modify_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                        <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Requst Body</strong></p>

<p>A list of <a href="https://killbill.github.io/slate/?java#custom-field-custom-field-resource">Custom Field</a> objects representing the fields to substitute for existing ones. Each object should specify at least the the <code>customFieldId</code> and <code>value</code> attribute. For example:</p>

<p>[ { &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-remove-custom-fields-from-a-payment'>Remove custom fields from a payment</h3>
<p>Removes a specified set of custom fields from a payment object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/77e23878-8b9d-403b-bf31-93003e125712/customFields?customField=e4bac228-872d-4966-8072-2c3ac06442ed'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">deletePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                     <span class="n">customFieldsId</span><span class="o">,</span> 
                                     <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                            <span class="n">user</span><span class="p">,</span> 
                            <span class="n">reason</span><span class="p">,</span>
                            <span class="n">comment</span><span class="p">,</span> 
                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">delete_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                        <span class="n">created_by</span><span class="p">,</span>
                                        <span class="n">api_key</span><span class="p">,</span>
                                        <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>CCustom field object ID that should be deleted. Multiple custom fields can be deleted by specifying a separate <strong>customField</strong> parameter corresponding to each field</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='payment-tags'>Tags</h2>
<p>See <a href="https://killbill.github.io/slate/#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable to a Payment.</p>
<h3 id='payment-add-tags-to-a-payment'>Add tags to a payment</h3>
<p>Adds one or more tags to a payment object. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[
            "353752dd-9041-4450-b782-a8bb03a923c8"
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">createPaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                           <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                <span class="n">user</span><span class="p">,</span>
                <span class="n">reason</span><span class="p">,</span>
                <span class="n">comment</span><span class="p">,</span>
                <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">create_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                               <span class="n">tag</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="p">,</span>
                               <span class="n">api_key</span><span class="p">,</span>
                               <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON array containing one or more tag definition ids to be added as tags.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a Location header is returned containing the URL to retrieve the tags associated with the payment.</p>
<h3 id='payment-retrieve-payment-tags'>Retrieve payment tags</h3>
<p>Retrieves all tags attached to this payment.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                           <span class="n">includedDeleted</span><span class="o">,</span> 
                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
             <span class="n">audit</span><span class="p">,</span>
             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"890e3b13-3114-478b-9365-50f1a2682143"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='payment-remove-tags-from-a-payment'>Remove tags from a payment</h3>
<p>Removes a list of tags attached to a payment.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8'</span>   
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="na">deletePaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                             <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                             <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                   <span class="n">user</span><span class="p">,</span>
                   <span class="n">reason</span><span class="p">,</span>
                   <span class="n">comment</span><span class="p">,</span>
                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'dce5b2a0-0f0f-430b-9427-545ba4be5c7f'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span> 

<span class="n">paymentApi</span><span class="o">.</span><span class="n">delete_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                               <span class="n">created_by</span><span class="p">,</span>
                               <span class="n">api_key</span><span class="p">,</span>
                               <span class="n">api_secret</span><span class="p">,</span>
                               <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>yes</td>
<td>none</td>
<td>A tag definition ID identifying the tag that should be removed. Multiple tags can be deleted by specifying a separate tagDef parameter corresponding to each tag.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='payment-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='payment-retrieve-payment-audit-logs-with-history-by-id'>Retrieve payment audit logs with history by id</h3>
<p>Retrieves a list of audit log records showing events that occurred involving changes to a specified payment. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/{paymentId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/auditLogsWithHistory'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">paymentAuditLogWithHistory</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentAuditLogsWithHistory</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">accountApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AccountApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'c62d5f6d-0b57-444d-bf9b-dd23e781fbda'</span>

<span class="n">accountApi</span><span class="o">.</span><span class="n">get_account_audit_logs_with_history</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account</span><span class="p">.</span><span class="nf">audit_logs_with_history</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d32d0ab-3c08-47b2-8c6d-bb9d2a7fd62c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paymentExternalKey"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"stateName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastSuccessStateName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENTS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment audit logs with history.</p>
<h3 id='payment-retrieve-payment-attempt-audit-logs-with-history-by-id'>Retrieve payment attempt audit logs with history by id</h3>
<p>Retrieves a list of audit log records showing events that occurred related to a specified payment attempt. History information is included with each record.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/attempts/{payment_attempt_id}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
     <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/attempts/&lt;payment_attempt_id&gt;/auditLogsWithHistory'</span>  
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentAttemptId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"2706b8c6-97f2-41b7-b9c5-de23726bb399"</span><span class="o">);</span>
<span class="n">AuditLogs</span> <span class="n">logs</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPaymentAttemptAuditLogsWithHistory</span><span class="o">(</span><span class="n">paymentAttemptId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">  
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-05-02T11:15:52.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_ATTEMPT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2706b8c6-97f2-41b7-b9c5-de23726bb399"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b65afb87-9e43-4ffe-a492-84ac5d5f10a9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-05-02T11:15:52.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-05-02T11:15:52.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">11214</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2306</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bdcd8ed0-ffc6-42db-88eb-cf1ee504b9a8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"82e375db-4aff-413e-9b52-f70803ea3bc5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1833cad4-4b10-432e-959b-01dbf3ca0596"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92f17f72-c03f-427b-95eb-a959451c37b8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PURCHASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"stateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INIT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__INVOICE_PAYMENT_CONTROL_PLUGIN__"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"pluginProperties"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WlYAAAJbXQ=="</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_ATTEMPT_HISTORY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_ATTEMPTS"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-05-02T11:15:52.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_ATTEMPT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2706b8c6-97f2-41b7-b9c5-de23726bb399"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b65afb87-9e43-4ffe-a492-84ac5d5f10a9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-05-02T11:15:52.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-05-02T11:15:52.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">11214</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2306</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bdcd8ed0-ffc6-42db-88eb-cf1ee504b9a8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"82e375db-4aff-413e-9b52-f70803ea3bc5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1833cad4-4b10-432e-959b-01dbf3ca0596"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92f17f72-c03f-427b-95eb-a959451c37b8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92f17f72-c03f-427b-95eb-a959451c37b8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PURCHASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"stateName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"pluginName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"__INVOICE_PAYMENT_CONTROL_PLUGIN__"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"pluginProperties"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WlYAADxbeyJJUENEX0lOVk9JQ0VfSUQiOiI3MzdmNDRhMi1iYTljLTRjNjQtOTQzYi04NWRlMjEyODMxYWMifV0="</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_ATTEMPT_HISTORY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_ATTEMPTS"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of payment attempt audit logs with history.</p>
<h2 id='payment-list-and-search'>List and Search</h2>
<p>These endpoints allow you to list all payments or to search for a specific payment.</p>
<h3 id='payment-get-payments'>Get payments</h3>
<p>Retrieve a list of all payments for this tenant.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/pagination</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/pagination'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">100L</span><span class="o">;</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not fetch plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span> <span class="c1">// Will reflect payment attempts</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payments</span> <span class="n">payments</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">getPayments</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span> 
                                           <span class="n">limit</span><span class="o">,</span> 
                                           <span class="n">pluginName</span><span class="o">,</span> 
                                           <span class="n">withPluginInfo</span><span class="o">,</span> 
                                           <span class="n">withAttempts</span><span class="o">,</span> 
                                           <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                           <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">payment</span><span class="p">.</span><span class="nf">find_in_batches</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> 
                        <span class="n">limit</span><span class="p">,</span> 
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">get_payments</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ca15adc4-1061-4e54-a9a0-15e773b3b154"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4634b2ae-5263-4139-99b2-e2005f09a9fd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4634b2ae-5263-4139-99b2-e2005f09a9fd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dc89832d-18a3-42fd-b3be-cac074fddb36"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92935e84-fd79-4672-98bf-df84566153c6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92935e84-fd79-4672-98bf-df84566153c6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4634b2ae-5263-4139-99b2-e2005f09a9fd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4634b2ae-5263-4139-99b2-e2005f09a9fd"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PURCHASE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T15:04:05.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PLUGIN_FAILURE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RuntimeError"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Could not retrieve the payer info: the token is missing"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all payments for this tenant.</p>
<h3 id='payment-search-payments'>Search payments</h3>
<p>Search for a payment by a specified search string. The search string is compared against the <code>paymentNumber</code>, <code>paymentId</code>, <code>accountId</code>, or <code>transactionType</code> attributes. An exact match is required. </p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/payments/search/{searchKey}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/payments/search/8fe697d4-2c25-482c-aa45-f6cd5a48186d'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentApi</span> <span class="n">paymentApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">searchKey</span> <span class="o">=</span> <span class="s">"ccbc67f5-91cb-4b9a-9648-fa6aedaf0890"</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">offset</span> <span class="o">=</span> <span class="mi">0L</span><span class="o">;</span>
<span class="n">Long</span> <span class="n">limit</span> <span class="o">=</span> <span class="mi">100L</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>  <span class="c1">// Will reflect payment attempts</span>
<span class="n">String</span> <span class="n">pluginName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">Payments</span> <span class="n">payments</span> <span class="o">=</span> <span class="n">paymentApi</span><span class="o">.</span><span class="na">searchPayments</span><span class="o">(</span><span class="n">searchKey</span><span class="o">,</span> 
                                              <span class="n">offset</span><span class="o">,</span> 
                                              <span class="n">limit</span><span class="o">,</span> 
                                              <span class="n">withPluginInfo</span><span class="o">,</span> 
                                              <span class="n">withAttempts</span><span class="o">,</span> 
                                              <span class="n">pluginName</span><span class="o">,</span> 
                                              <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                              <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span> 
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">search_key</span> <span class="o">=</span> <span class="s1">'PURCHASE'</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">payment</span><span class="p">.</span><span class="nf">find_in_batches_by_search_key</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span>
                                      <span class="n">offset</span><span class="p">,</span>
                                      <span class="n">limit</span><span class="p">,</span>
                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentApi</span><span class="p">()</span>
<span class="n">search_key</span> <span class="o">=</span> <span class="s">'SUCCESS'</span>

<span class="n">paymentApi</span><span class="o">.</span><span class="n">search_payments</span><span class="p">(</span><span class="n">search_key</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paymentExternalKey"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"208d38df-8d5a-4e20-89df-15db4b3516b4"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paymentExternalKey"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTHORIZE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>searchKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>What you want to find</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>Starting index for items listed</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>Maximum number of items to be listed</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include payment attempts</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return: &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of all payments matched with the search key entered.</p>
<h1 id='payment-transaction'>Payment Transaction</h1>
<p>Payment transactions belong to a <a href="https://killbill.github.io/slate/#payment-payment-resource">Payment</a> object.</p>

<p>They represent a particular payment operation, such as authorization, chargeback, refund, etc. Most operations happen at the <code>Payment</code> level, but there are a few endpoints
that work directly at the transaction level.</p>
<h2 id='payment-transaction-payment-transaction-resource'>Payment Transaction Resource</h2>
<p>A <code>PaymentTransaction</code> is represented by a PaymentTransaction resource object. The attributes for this resource object are as follows:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>transactionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the transaction</td>
</tr>
<tr>
<td><strong>transactionExternalKey</strong></td>
<td>string</td>
<td>user or system</td>
<td>Optional external key</td>
</tr>
<tr>
<td><strong>paymentId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment</td>
</tr>
<tr>
<td><strong>paymentExternalKey</strong></td>
<td>string</td>
<td>user or system</td>
<td>Optional external key</td>
</tr>
<tr>
<td><strong>transactionType</strong></td>
<td>string</td>
<td>user</td>
<td>Transaction type (see below)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>system</td>
<td>Total amount of the transaction</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>effectiveDate</strong></td>
<td>string</td>
<td>user</td>
<td>Effective date of the transaction</td>
</tr>
<tr>
<td><strong>processedAmount</strong></td>
<td>number</td>
<td>system</td>
<td>The amount processed by the gateway (see below)</td>
</tr>
<tr>
<td><strong>processedCurrency</strong></td>
<td>string</td>
<td>system</td>
<td>The currency processed by the gateay (see below)</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>string</td>
<td>system</td>
<td>Transaction status (see below)</td>
</tr>
<tr>
<td><strong>gatewayErrorCode</strong></td>
<td>string</td>
<td>system</td>
<td>Error code returned by the payment gateway</td>
</tr>
<tr>
<td><strong>gatewayErrorMsg</strong></td>
<td>string</td>
<td>system</td>
<td>Error message returned by the payment gateway</td>
</tr>
<tr>
<td><strong>firstPaymentReferenceId</strong></td>
<td>string</td>
<td>system</td>
<td>Payment gateway reference</td>
</tr>
<tr>
<td><strong>secondPaymentReferenceId</strong></td>
<td>string</td>
<td>system</td>
<td>see below</td>
</tr>
<tr>
<td><strong>properties</strong></td>
<td>string</td>
<td>user</td>
<td>see below</td>
</tr>
</tbody></table>

<ul>
<li><p><strong>transactionType</strong>: Possible values are: AUTHORIZE, CAPTURE, CHARGEBACK, CREDIT, PURCHASE, REFUND, VOID </p></li>
<li><p><strong>processedAmount</strong>: This will often match <strong>amount</strong>, but could be different, perhaps due to currency conversion</p></li>
<li><p><strong>processedCurrency</strong>: This will often match <strong>currency</strong>, but could be different, perhaps due to currency conversion</p></li>
<li><p><strong>status</strong>: Possible values are: SUCCESS, UNKNOWN, PENDING, PAYMENT_FAILURE, PLUGIN_FAILURE, or PAYMENT_SYSTEM_OFF</p></li>
<li><p><strong>secondPaymentReferenceId</strong>: Typically the ID from the actual payment processor, when the gateway is a PSP.</p></li>
<li><p><strong>properties</strong>: Plugin-specific properties to be interpreted by the plugin</p></li>
</ul>
<h2 id='payment-transaction-payment-transactions'>Payment Transactions</h2>
<p>Endpoints to retrieve a <code>PaymentTransaction</code> object or to set the status of a pending transaction. Note that endpoints to generate payment transactions are provided with the <code>Payment</code> APIs. </p>
<h3 id='payment-transaction-retrieve-a-payment-by-transaction-id'>Retrieve a payment by transaction id</h3>
<p>Retrieves a Payment object based on a PaymentTransaction id, which is given as a path parameter</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/paymentTransactions/07655b3c-7f17-4172-b193-ece48e5741ad"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"41f4d299-4371-4876-96b4-0b3cc81b246b"</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">getPaymentByTransactionId</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c02fa9b0-ae95-42ae-9010-bc11cb160947"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTHORIZE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include payment attempts</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a payment object including the specified transaction.</p>
<h3 id='payment-transaction-retrieve-a-payment-transaction-by-external-key'>Retrieve a payment transaction by external key</h3>
<p>Retrieve a Payment object based on a PaymentTransaction external key, which is given as a query parameter</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/paymentTransactions?transactionExternalKey=07655b3c-7f17-4172-b193-ece48e5741ad"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">transactionExternalKey</span> <span class="o">=</span> <span class="s">"41f4d299-4371-4876-96b4-0b3cc81b246b"</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Payment</span> <span class="n">payment</span> <span class="o">=</span> <span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">getPaymentByTransactionExternalKey</span><span class="o">(</span><span class="n">transactionExternalKey</span><span class="o">,</span> <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c02fa9b0-ae95-42ae-9010-bc11cb160947"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTHORIZE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>transactionExternalKey</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Transaction external key</td>
</tr>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include payment attempts</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a payment object including the specified transaction.</p>
<h3 id='payment-transaction-mark-a-pending-payment-transaction-as-succeeded-or-failed'>Mark a pending payment transaction as succeeded or failed</h3>
<p>Sets the status of a PENDING <code>PaymentTransaction</code> to SUCCESS or PAYMENT_FAILURE</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{"paymentId": "e8edd4c6-2f85-4375-95f3-e78ca4d85b82", "status": "SUCCESS"}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/paymentTransactions/07655b3c-7f17-4172-b193-ece48e5741ad"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"37d15a2f-55ac-40ab-a873-08faae78f213"</span><span class="o">);</span>
<span class="n">PaymentTransaction</span> <span class="n">paymentTransaction</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">paymentTransaction</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="n">TransactionStatus</span><span class="o">.</span><span class="na">SUCCESS</span><span class="o">);</span>
<span class="n">paymentTransaction</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"27d15e39-b25c-4dc1-92cf-5487397a48a6"</span><span class="o">);</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">notifyStateChanged</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                         <span class="n">paymentTransaction</span><span class="o">,</span> 
                                         <span class="kc">null</span><span class="o">,</span> 
                                         <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A <code>PaymentTransaction</code> object including, at least, a <code>paymentId</code> and a <code>status</code> (SUCCESS or PAYMENT_FAILURE)</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and the payment object.</p>
<h2 id='payment-transaction-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='payment-transaction-retrieve-payment-transaction-audit-logs-with-history-by-id'>Retrieve payment transaction audit logs with history by id</h3>
<p>Retrieves a list of audit log records showing events that occurred involving changes to a specified payment. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/paymentTransactions/07655b3c-7f17-4172-b193-ece48e5741ad/auditLogsWithHistory"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"41f4d299-4371-4876-96b4-0b3cc81b246b"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">getTransactionAuditLogsWithHistory</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRANSACTION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84ac4088-dc76-4fde-9ff0-63e228b5e6fc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">63</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attemptId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTHORIZE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNKNOWN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_TRANSACTIONS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_TRANSACTION_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRANSACTION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84ac4088-dc76-4fde-9ff0-63e228b5e6fc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">63</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="p">,</span><span class="w">
      </span><span class="s2">"attemptId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8edd4c6-2f85-4375-95f3-e78ca4d85b82"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"07655b3c-7f17-4172-b193-ece48e5741ad"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTHORIZE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-18T18:58:11.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_TRANSACTIONS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_TRANSACTION_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of account audit logs with history.</p>
<h2 id='payment-transaction-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to <code>PaymentTransaction</code> objects. For details on Custom Fields see <a href="https://killbill.github.io/slate/#custom-field">Custom Field</a>.</p>
<h3 id='payment-transaction-add-custom-fields-to-payment-transaction'>Add custom fields to payment transaction</h3>
<p>Adds one or more custom fields to a <code>PaymentTransaction</code> object. Existing custom fields are not modified.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "name": "Test Custom Field",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">paymentTransactionId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">TRANSACTION</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">createTransactionCustomFields</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                    <span class="n">customFields</span><span class="o">,</span> 
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">create_transaction_custom_fields</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                                       <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing the custom field object or objects to be added. For example:</p>

<p>[ { &quot;name&quot;: &quot;CF1&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL to retrieve the custom fields associated with the payment transaction.</p>
<h3 id='payment-transaction-retrieve-payment-transaction-custom-fields'>Retrieve payment transaction custom fields</h3>
<p>Retrieves the custom fields associated with a payment transaction</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">getTransactionCustomFields</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span>
                                                                                  <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                                  <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">get_transaction_custom_fields</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e4bac228-872d-4966-8072-2c3ac06442ed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRANSACTION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of custom field objects</p>
<h3 id='payment-transaction-modify-custom-fields-for-a-payment-transaction'>Modify custom fields for a payment transaction</h3>
<p>Modifies the custom fields associated with a <code>PaymentTransaction</code> object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "e4bac228-872d-4966-8072-2c3ac06442ed",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>
<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">customFieldModified</span><span class="o">);</span>
<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">modifyTransactionCustomFields</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                    <span class="n">customFields</span><span class="o">,</span> 
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Test Modify'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_modify_value'</span><span class="p">)</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">modify_transaction_custom_fields</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                                       <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Requst Body</strong></p>

<p>A JSON string representing a list of custom fields to substitute for the existing ones.
For example:</p>

<p>[ { &quot;customFieldId&quot;: &quot;6d4c073b-fd89-4e39-9802-eba65f42492f&quot;, &quot;value&quot;: &quot;123&quot; } ]</p>

<p>Although the field name and object type can be specified in the request body, these cannot be modified, only the field value can be modified.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='payment-transaction-remove-custom-fields-from-a-payment-transaction'>Remove custom fields from a payment transaction</h3>
<p>Removes a specified set of custom fields from a payment transaction object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/77e23878-8b9d-403b-bf31-93003e125712/customFields?customField=e4bac228-872d-4966-8072-2c3ac06442ed'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"cca08349-8b26-41c7-bfcc-2e3cf70a0f28"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">UUID</span><span class="o">&gt;</span> <span class="n">customFieldsList</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">deleteTransactionCustomFields</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                    <span class="n">customFieldsList</span><span class="o">,</span> 
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">delete_transaction_custom_fields</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Comma separated list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='payment-transaction-tags'>Tags</h2>
<p>See <a href="https://killbill.github.io/slate/#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable to a Payment Transaction.</p>
<h3 id='payment-transaction-add-tags-to-a-payment-transaction'>Add tags to a payment transaction</h3>
<p>Adds one or more tags to a <code>PaymentTransaction</code> object. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[
            "353752dd-9041-4450-b782-a8bb03a923c8"
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"917992d3-5f1f-4828-9fff-799cc4211aa9"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">createTransactionTags</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                          <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">create_transaction_tags</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                              <span class="n">tag</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Provides a list of tag definition Ids in JSON format</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a 201 status code. In addition, a <code>Location</code> header is returned giving the URL to retrieve the tags associated with the payment transaction.</p>
<h3 id='payment-transaction-retrieve-payment-transaction-tags'>Retrieve payment transaction tags</h3>
<p>Retrieves all tags attached to this payment transaction.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">getTransactionTags</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                                          <span class="n">includedDeleted</span><span class="o">,</span> 
                                                          <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                          <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'28af3cb9-275b-4ac4-a55d-a0536e479069'</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">get_transaction_tags</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"890e3b13-3114-478b-9365-50f1a2682143"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TRANSACTION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='payment-transaction-remove-tags-from-a-payment-transaction'>Remove tags from a payment transaction</h3>
<p>Removes a list of tags attached to a payment transaction.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/paymentTransactions/{transactionId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/paymentTransactions/8fe697d4-2c25-482c-aa45-f6cd5a48186d/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8'</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.PaymentTransactionApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">PaymentTransactionApi</span> <span class="n">paymentTransactionApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="na">deleteTransactionTags</span><span class="o">(</span><span class="n">paymentTransactionId</span><span class="o">,</span> 
                                            <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                            <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">TODO</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">paymentTransactionApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">PaymentTransactionApi</span><span class="p">()</span>

<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'dce5b2a0-0f0f-430b-9427-545ba4be5c7f'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span> 

<span class="n">paymentTransactionApi</span><span class="o">.</span><span class="n">delete_transaction_tags</span><span class="p">(</span><span class="n">payment_transaction_id</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">,</span>
                                              <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>yes</td>
<td>none</td>
<td>List of tag definition IDs identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h1 id='invoice-payment'>Invoice Payment</h1>
<p>An <code>InvoicePayment</code> is a <code>Payment</code> that is made against a specific invoice.</p>

<p>By default the system will always attempt to make a full payment against an invoice, but Kill Bill also allows multiple partial payments.  Partial payments can be made against unpaid - or partially paid - invoices by triggerring a payment against the <code>Invoice</code> resource. The reverse is not true; a single payment across multiple invoices is not (yet) supported.</p>

<p>See <a href="#payment">Payment</a> for further information.</p>
<h2 id='invoice-payment-invoice-payment-resource'>Invoice Payment Resource</h2>
<p>The <code>InvoicePayment</code> resource represents a payment associated with a given invoice. It is identical to the <code>Payment</code> resource except for the inclusion of the <strong>targetInvoiceId</strong> attribute. </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>targetInvoiceId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the invoice to be paid</td>
</tr>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the account to be paid</td>
</tr>
<tr>
<td><strong>paymentId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment</td>
</tr>
<tr>
<td><strong>paymentNumber</strong></td>
<td>number</td>
<td>user</td>
<td>User&#39;s ID number for the payment</td>
</tr>
<tr>
<td><strong>paymentExternalKey</strong></td>
<td>string</td>
<td>user</td>
<td>optional external key</td>
</tr>
<tr>
<td><strong>authAmonunt</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total authorized amount (see below)</td>
</tr>
<tr>
<td><strong>capturedAmonunt</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total captured amount (see below)</td>
</tr>
<tr>
<td><strong>purchasedAmonunt</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total purchased amount (see below)</td>
</tr>
<tr>
<td><strong>refundedAmount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total refunded amount (see below)</td>
</tr>
<tr>
<td><strong>creditedAmount</strong></td>
<td>number</td>
<td>user or system</td>
<td>Total credited amount (see below)</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user</td>
<td>currency to be used</td>
</tr>
<tr>
<td><strong>paymentMethod</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the payment method used</td>
</tr>
<tr>
<td><strong>transactions</strong></td>
<td>list</td>
<td>system</td>
<td>list of paymentTransactions, if any (see below)</td>
</tr>
<tr>
<td><strong>paymentAttempts</strong></td>
<td>list</td>
<td>system</td>
<td>list of paymentAttempts, if any (see below)</td>
</tr>
</tbody></table>

<ul>
<li><p><strong>authAmount</strong>, <strong>capturedAmount</strong>, <strong>purchasedAmount</strong>, <strong>refundedAmount</strong>, <strong>creditedAmount</strong>: These are total amounts across all transactions associated with this Payment.</p></li>
<li><p><strong>creditedAmount</strong>: this credit represents the actual money sent back by the merchant to the user, which is extremely rare. It is unrelated to the associated invoice or account credits.</p></li>
<li><p><strong>paymentTransactions</strong>: List of transactions for this Payment. The attributes for a <code>PaymentTransaction</code> are described <a href="https://killbill.github.io/slate/?shell#payment-transaction-payment-transaction-resource">here</a>.</p></li>
<li><p><strong>paymentAttempts</strong>: Only applicable when the system is configured to retry failed attempts.</p></li>
</ul>
<h2 id='invoice-payment-invoice-payment-transaction-resource'>Invoice Payment Transaction Resource</h2>
<p>The <code>InvoicePaymentTransaction</code> resource represents a payment transaction associated with a given <code>InvoicePayment</code>. It is identical to the <code>PaymentTransaction</code> resource except for the inclusion of the <strong>isAdjusted</strong> and <strong>adjustments</strong> attributes. The attributes for this resource object are:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>transactionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the transaction</td>
</tr>
<tr>
<td><strong>transactionExternalKey</strong></td>
<td>string</td>
<td>user or system</td>
<td>Optional external key</td>
</tr>
<tr>
<td><strong>paymentId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the transaction</td>
</tr>
<tr>
<td><strong>paymentExternalKey</strong></td>
<td>string</td>
<td>user or system</td>
<td>Optional external key</td>
</tr>
<tr>
<td><strong>transactionType</strong></td>
<td>string</td>
<td>user</td>
<td>Transaction type (see below)</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>system</td>
<td>Total amount of the transaction</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td>string</td>
<td>user or system</td>
<td>Currency associated with the account</td>
</tr>
<tr>
<td><strong>effectiveDate</strong></td>
<td>string</td>
<td>user</td>
<td>Effective date of the transaction</td>
</tr>
<tr>
<td><strong>processedAmount</strong></td>
<td>number</td>
<td>system</td>
<td>The amount processed by the gateway (see below)</td>
</tr>
<tr>
<td><strong>processedCurrency</strong></td>
<td>string</td>
<td>system</td>
<td>The currency processed by the gateay (see below)</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td>string</td>
<td>system</td>
<td>Transaction status (see below)</td>
</tr>
<tr>
<td><strong>gatewayErrorCode</strong></td>
<td>string</td>
<td>system</td>
<td>Error code returned by the payment gateway</td>
</tr>
<tr>
<td><strong>gatewayErrorMsg</strong></td>
<td>string</td>
<td>system</td>
<td>Error message returned by the payment gateway</td>
</tr>
<tr>
<td><strong>firstPaymentReferenceId</strong></td>
<td>string</td>
<td>system</td>
<td>Payment gateway reference</td>
</tr>
<tr>
<td><strong>secondPaymentReferenceId</strong></td>
<td>string</td>
<td>system</td>
<td>see below</td>
</tr>
<tr>
<td><strong>properties</strong></td>
<td>string</td>
<td>user</td>
<td>see below</td>
</tr>
<tr>
<td><strong>isAdjusted</strong></td>
<td>boolean</td>
<td>system</td>
<td>true if this object includes one or more InvoiceItem adjustments</td>
</tr>
<tr>
<td><strong>adjustments</strong></td>
<td>list</td>
<td>system</td>
<td>List of adjusted <code>InvoiceItem</code> resources showing adjusted amounts</td>
</tr>
</tbody></table>

<ul>
<li><p><strong>transactionType</strong>: Possible values are: AUTHORIZE, CAPTURE, CHARGEBACK, CREDIT, PURCHASE, REFUND, VOID </p></li>
<li><p><strong>processedAmount</strong>: This will often match <strong>amount</strong>, but could be different, perhaps due to currency conversion</p></li>
<li><p><strong>processedCurrency</strong>: This will often match <strong>currency</strong>, but could be different, perhaps due to currency conversion</p></li>
<li><p><strong>status</strong>: Possible values are: SUCCESS, UNKNOWN, PENDING, PAYMENT_FAILURE, PLUGIN_FAILURE, or PAYMENT_SYSTEM_OFF</p></li>
<li><p><strong>secondPaymentReferenceId</strong>: Typically the ID from the actual payment processor, when the gateway is a PSP</p></li>
<li><p><strong>properties</strong>: Plugin-specific properties to be interpreted by the plugin</p></li>
</ul>
<h2 id='invoice-payment-invoice-payment'>Invoice Payment</h2>
<p>These endpoints initiate transactions on an existing InvoicePayment. Many other applicable transactions are given in the <a href="#payment">Payment</a> section. To begin a new Payment, see <a href="https://killbill.github.io/slate/#account-trigger-a-payment-authorization-purchase-or-credit">Trigger a Payment</a> in the Account API. </p>
<h3 id='invoice-payment-retrieve-a-payment-by-id'>Retrieve a payment by id</h3>
<p>Retrieves an invoice payment by its payment Id, which is given as a path parameter</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"80f5bfca-e142-4320-b8f2-ae4530ca7172"</span><span class="o">);</span>
<span class="n">Boolean</span> <span class="n">withPluginInfo</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect plugin info</span>
<span class="n">Boolean</span> <span class="n">withAttempts</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not reflect payment attempts</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">InvoicePayment</span> <span class="n">invoicePayment</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">getInvoicePayment</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                                    <span class="n">withPluginInfo</span><span class="o">,</span>
                                                                    <span class="n">withAttempts</span><span class="o">,</span>
                                                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span>
                                                                    <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'28aef37a-7655-4351-985a-02b961ae4ac7'</span>
<span class="n">with_plugin_info</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">with_attempts</span> <span class="o">=</span> <span class="kp">false</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">find_by_id</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                 <span class="n">with_plugin_info</span><span class="p">,</span> 
                                                 <span class="n">with_attempts</span><span class="p">,</span> 
                                                 <span class="vi">@options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'5e9d8b82-2664-4a36-85a1-37471a0b618a'</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">get_invoice_payment</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"targetInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4be34fe4-5845-4a35-afd8-632ad04cccf9"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8b66b9f9-bfb4-463a-86c7-e267128a294a"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capturedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purchasedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39f3461c-5357-42f7-a8a9-ec79502fdb6b"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transactions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6787dc2d-4f5e-49b5-9764-0070fd1238c2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentExternalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transactionType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PURCHASE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"effectiveDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T20:48:34.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"processedCurrency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"gatewayErrorMsg"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"firstPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"secondPaymentReferenceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"paymentAttempts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>withPluginInfo</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include plugin info</td>
</tr>
<tr>
<td><strong>withAttempts</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>if true, include payment attempts</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and an <code>InvoicePayment</code> object.</p>
<h3 id='invoice-payment-refund-a-payment-and-adjust-the-invoice-if-needed'>Refund a payment, and adjust the invoice if needed</h3>
<p>Refunds a payment, and optionally adds the amount to one or more invoice items</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/refunds</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "amount": 50,
          "isAdjusted": false
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/refunds'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"45d6f4c5-21be-49b1-99c5-7b0c3c985bf0"</span><span class="o">);</span>

<span class="n">InvoicePaymentTransaction</span> <span class="n">refund</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoicePaymentTransaction</span><span class="o">();</span>
<span class="n">refund</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>
<span class="n">refund</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">paymentMethodId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"28a3ed1a-7a58-4ac2-b864-2ca723abb864"</span><span class="o">);</span>

<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">createRefundWithAdjustments</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                              <span class="n">refund</span><span class="o">,</span> 
                                              <span class="n">paymentMethodId</span><span class="o">,</span> 
                                              <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                              <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'8d85a8e8-c94b-438f-aac1-e8cb436b2c05'</span>
<span class="n">amount</span> <span class="o">=</span><span class="s1">'50.0'</span>
<span class="n">adjustments</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">refund</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                             <span class="n">amount</span><span class="p">,</span> 
                                             <span class="n">adjustments</span><span class="p">,</span> 
                                             <span class="n">user</span><span class="p">,</span> 
                                             <span class="n">reason</span><span class="p">,</span> 
                                             <span class="n">comment</span><span class="p">,</span> 
                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'8d85a8e8-c94b-438f-aac1-e8cb436b2c05'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_refund_with_adjustments</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                 <span class="n">body</span><span class="p">,</span>
                                                 <span class="n">created_by</span><span class="p">,</span>
                                                 <span class="n">api_key</span><span class="p">,</span>
                                                 <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An <code>InvoicePaymentTransaction</code> object, including at least the <strong>amount</strong> attribute and the <strong>isAdjusted</strong> attribute. If <strong>isAdjusted</strong> is true, then the object must also include the attribute <strong>adjustments</strong> which is a list of <code>InvoiceItem</code> objects giving the <strong>invoiceItemId</strong>, the <strong>invoiceId</strong>, and the adjusted <strong>amount</strong> for each of the adjustments to be made.</p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>externalPayment</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>choose true if the payment method is external</td>
</tr>
<tr>
<td><strong>paymentMethodId</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>paymentMethod id</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-payment-record-a-chargeback'>Record a chargeback</h3>
<p>Creates a CHARGEBACK InvoicePaymentTransaction for a specified InvoicePayment. The InvoicePayment is identified by its <code>paymentId</code> given as a path parameter. The captured amount is reduced by the chargeback amount. If appropriate this amount will be added back to one or more invoice items.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/chargebacks</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "amount": 5,
          "isAdjusted": false
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/chargebacks'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"96930ff3-82e1-4556-888a-0cb07ec120d6"</span><span class="o">);</span>

<span class="n">InvoicePaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InvoicePaymentTransaction</span><span class="o">();</span>
<span class="n">body</span><span class="o">.</span><span class="na">setPaymentId</span><span class="o">(</span><span class="n">paymentId</span><span class="o">);</span>
<span class="n">body</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">"50.00"</span><span class="o">));</span>

<span class="n">InvoicePayment</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">createChargeback</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                           <span class="n">body</span><span class="o">,</span> 
                                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'2276b3c9-4e51-41b2-b5bf-9ddc11582ee4'</span>
<span class="n">amount</span> <span class="o">=</span> <span class="s1">'50.0'</span>
<span class="n">currency</span> <span class="o">=</span> <span class="s1">'USD'</span>
<span class="n">effective_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">chargeback</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                 <span class="n">amount</span><span class="p">,</span>
                                                 <span class="n">currency</span><span class="p">,</span>
                                                 <span class="n">effective_date</span><span class="p">,</span>
                                                 <span class="n">user</span><span class="p">,</span> 
                                                 <span class="n">reason</span><span class="p">,</span>
                                                 <span class="n">comment</span><span class="p">,</span> 
                                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'2276b3c9-4e51-41b2-b5bf-9ddc11582ee4'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_chargeback</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                    <span class="n">body</span><span class="p">,</span> 
                                    <span class="n">created_by</span><span class="p">,</span> 
                                    <span class="n">api_key</span><span class="p">,</span> 
                                    <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An <code>InvoicePaymentTransaction</code> object, including at least the <strong>amount</strong> attribute and the <strong>isAdjusted</strong> attribute. If <strong>isAdjusted</strong> is true, then the object must also include the attribute <strong>adjustments</strong> which is a list of <code>InvoiceItem</code> objects giving the <strong>invoiceItemId</strong>, the <strong>invoiceId</strong>, and the adjusted <strong>amount</strong> for each of the adjustments to be made.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-payment-record-a-chargeback-reversal'>Record a chargeback reversal</h3>
<p>Reverses a CHARGEBACK InvoicePaymentTransaction, if permitted by the Payment plugin. The chargeback amount is added back to the captured amount. The payment is identified by its <code>paymentId</code> which is given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/chargebackReversals</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
          "transactionExternalKey": "a335f7d2-e115-436f-8c63-2b0114d974de",
          "paymentId": "cc7fcd4d-e701-4679-9741-41289103db83",
          "effectiveDate": "2018-07-20T15:05:36.853Z"        
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/chargebackReversals'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="n">TODO</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'7a5d4997-5d44-4a82-8371-a410ea5615f4'</span>
<span class="n">chargeback_transaction_external_key</span> <span class="o">=</span> <span class="s1">'99c45d07-abe4-4bc7-a207-0524548c1b08'</span>
<span class="n">effective_date</span> <span class="o">=</span> <span class="s2">"2013-08-01"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">chargeback_reversal</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                          <span class="n">chargeback_transaction_external_key</span><span class="p">,</span> 
                                                          <span class="n">effective_date</span><span class="p">,</span> 
                                                          <span class="n">user</span><span class="p">,</span> 
                                                          <span class="n">reason</span><span class="p">,</span> 
                                                          <span class="n">comment</span><span class="p">,</span> 
                                                          <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'7a5d4997-5d44-4a82-8371-a410ea5615f4'</span>
<span class="n">transaction_external_key</span> <span class="o">=</span> <span class="s">'99c45d07-abe4-4bc7-a207-0524548c1b08'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> 
                          <span class="n">currency</span><span class="o">=</span><span class="s">'USD'</span><span class="p">,</span> 
                          <span class="n">transaction_external_key</span><span class="o">=</span><span class="n">transaction_external_key</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_chargeback_reversal</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                             <span class="n">body</span><span class="p">,</span> 
                                             <span class="n">created_by</span><span class="p">,</span> 
                                             <span class="n">api_key</span><span class="p">,</span> 
                                             <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An <code>InvoicePaymentTransaction</code> object, including at least the <strong>amount</strong> attribute and the <strong>isAdjusted</strong> attribute. If <strong>isAdjusted</strong> is true, then the object must also include the attribute <strong>adjustments</strong> which is a list of <code>InvoiceItem</code> objects giving the <strong>invoiceItemId</strong>, the <strong>invoiceId</strong>, and the adjusted <strong>amount</strong> for each of the adjustments to be made.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-payment-complete-an-existing-transaction'>Complete an existing transaction</h3>
<p>Completes any existing InvoicePaymentTransaction that is in a PENDING state, based on its <code>paymentId</code> given as a path parameter.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'{
            "paymentId": "cc7fcd4d-e701-4679-9741-41289103db83"
        }'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"80f5bfca-e142-4320-b8f2-ae4530ca7172"</span><span class="o">);</span>
<span class="n">PaymentTransaction</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PaymentTransaction</span><span class="o">();</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_NAMES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">NULL_PLUGIN_PROPERTIES</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">completeInvoicePaymentTransaction</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                    <span class="n">body</span><span class="o">,</span> 
                                                    <span class="n">NULL_PLUGIN_NAMES</span><span class="o">,</span> 
                                                    <span class="n">NULL_PLUGIN_PROPERTIES</span><span class="o">,</span> 
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s1">'2276b3c9-4e51-41b2-b5bf-9ddc11582ee4'</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">InvoicePayment</span><span class="p">.</span><span class="nf">complete_invoice_payment_transaction</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                                           <span class="n">user</span><span class="p">,</span> 
                                                                           <span class="n">reason</span><span class="p">,</span> 
                                                                           <span class="n">comment</span><span class="p">,</span> 
                                                                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">payment_id</span><span class="o">=</span><span class="n">payment_id</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">complete_invoice_payment_transaction</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                                       <span class="n">body</span><span class="p">,</span> 
                                                       <span class="n">created_by</span><span class="p">,</span> 
                                                       <span class="n">api_key</span><span class="p">,</span> 
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-payment-custom-fields'>Custom Fields</h2>
<p>Custom fields are <code>{key, value}</code> attributes that can be attached to any customer resource. In particular they can be added to InvoicePayment objects. For details on Custom Fields see <a href="https://killbill.github.io/slate/#custom-field">Custom Field</a>.</p>
<h3 id='invoice-payment-add-custom-fields-to-invoice-payment'>Add custom fields to invoice payment</h3>
<p>Adds one or more custom fields to an InvoicePayment object. Existing custom fields are not modified.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "name": "Test Custom Fields",
            "value": "test_value"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">AuditLog</span><span class="o">&gt;</span> <span class="n">EMPTY_AUDIT_LOGS</span> <span class="o">=</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>

<span class="n">CustomFields</span> <span class="n">customFields</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomFields</span><span class="o">();</span>
<span class="n">customFields</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomField</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> 
                                 <span class="n">paymentId</span><span class="o">,</span> 
                                 <span class="n">ObjectType</span><span class="o">.</span><span class="na">INVOICE_PAYMENT</span><span class="o">,</span> 
                                 <span class="s">"Test Custom Field"</span><span class="o">,</span> 
                                 <span class="s">"test_value"</span><span class="o">,</span> 
                                 <span class="n">EMPTY_AUDIT_LOGS</span><span class="o">));</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">createInvoicePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                   <span class="n">customFields</span><span class="o">,</span> 
                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">CustomFieldAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">object_type</span> <span class="o">=</span> <span class="s1">'INVOICE_PAYMENT'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Custom Field'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_value'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">add_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span> 
                                 <span class="n">user</span><span class="p">,</span>
                                 <span class="n">reason</span><span class="p">,</span>
                                 <span class="n">comment</span><span class="p">,</span>
                                 <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'Test Custom Field'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_value'</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_invoice_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                       <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>

</code></pre>
<p><strong>Request Body</strong></p>

<p>A JSON string representing the custom field object or objects to be added.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-payment-retrieve-invoice-payment-custom-fields'>Retrieve invoice payment custom fields</h3>
<p>Retrieves the custom fields associated with an InvoicePayment object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">CustomField</span><span class="o">&gt;</span> <span class="n">customFields</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">getInvoicePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span>
                                                                                 <span class="n">AuditLevel</span><span class="o">.</span><span class="na">NONE</span><span class="o">,</span>
                                                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">custom_fields</span><span class="p">(</span><span class="n">audit</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">get_invoice_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3fbf75aa-6f22-4a02-974b-55eeded2cf6b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2495e35e-2b96-434c-8877-62dbbf20f7e9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_value"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of custom field objects</p>
<h3 id='invoice-payment-modify-custom-fields-for-an-invoice-payment'>Modify custom fields for an invoice payment</h3>
<p>Modifies the custom fields associated with an InvoicePayment object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[{ 
            "customFieldId": "e2408cac-931b-43eb-855b-9f2902615c39",
            "value": "NewValue"
    }]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">CustomField</span> <span class="n">customFieldModified</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CustomField</span><span class="o">();</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setCustomFieldId</span><span class="o">(</span><span class="n">customFieldsId</span><span class="o">);</span>
<span class="n">customFieldModified</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"NewValue"</span><span class="o">);</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">modifyInvoicePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                   <span class="n">customFieldModified</span><span class="o">,</span> 
                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field</span><span class="p">.</span><span class="nf">custom_field_id</span> <span class="o">=</span> <span class="s1">'7fb3dde7-0911-4477-99e3-69d142509bb9'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="s1">'Test Modify'</span>
<span class="n">custom_field</span><span class="p">.</span><span class="nf">value</span> <span class="o">=</span> <span class="s1">'test_modify_value'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">modify_custom_field</span><span class="p">(</span><span class="n">custom_field</span><span class="p">,</span>                                                                                            
                                    <span class="n">user</span><span class="p">,</span> 
                                    <span class="n">reason</span><span class="p">,</span>
                                    <span class="n">comment</span><span class="p">,</span> 
                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">CustomField</span><span class="p">(</span><span class="n">custom_field_id</span><span class="o">=</span><span class="n">custom_field_id</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'Test Modify'</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">'test_modify_value'</span><span class="p">)</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">modify_invoice_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                       <span class="p">[</span><span class="n">body</span><span class="p">],</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Requst Body</strong></p>

<p>A JSON string representing a list of custom fields to substitute for the existing ones.</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='invoice-payment-remove-custom-fields-from-an-invoice-payment'>Remove custom fields from an invoice payment</h3>
<p>Removes a specified set of custom fields from an <code>InvoicePayment</code> object</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/customFields</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/2495e35e-2b96-434c-8877-62dbbf20f7e9/customFields?customField=e2408cac-931b-43eb-855b-9f2902615c39'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"59860a0d-c032-456d-a35e-3a48fe8579e5"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">customFieldsId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"9913e0f6-b5ef-498b-ac47-60e1626eba8f"</span><span class="o">);</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">deleteInvoicePaymentCustomFields</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                   <span class="n">customFieldsId</span><span class="o">,</span> 
                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">custom_field_id</span> <span class="o">=</span> <span class="n">custom_field</span><span class="p">.</span><span class="nf">id</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">remove_custom_field</span><span class="p">(</span><span class="n">custom_field_id</span><span class="p">,</span>                                                                                            
                                    <span class="n">user</span><span class="p">,</span> 
                                    <span class="n">reason</span><span class="p">,</span>
                                    <span class="n">comment</span><span class="p">,</span> 
                                    <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'f33e0adc-78df-438a-b920-aaacd7f8597a'</span>
<span class="n">custom_field_id</span> <span class="o">=</span> <span class="s">'9913e0f6-b5ef-498b-ac47-60e1626eba8f'</span>
<span class="n">custom_field</span> <span class="o">=</span> <span class="p">[</span><span class="n">custom_field_id</span><span class="p">]</span>
<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">delete_invoice_payment_custom_fields</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                       <span class="n">created_by</span><span class="p">,</span>
                                                       <span class="n">api_key</span><span class="p">,</span>
                                                       <span class="n">api_secret</span><span class="p">,</span>
                                                       <span class="n">custom_field</span><span class="o">=</span><span class="n">custom_field</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customField</strong></td>
<td>string</td>
<td>yes</td>
<td>none</td>
<td>Comma separated list of custom field object IDs that should be deleted.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-payment-tags'>Tags</h2>
<p>See <a href="https://killbill.github.io/slate/#account-tags">Account Tags</a> for an introduction.</p>

<p>The are no <code>system</code> tags applicable to an InvoicePayment.</p>
<h3 id='invoice-payment-add-tags-to-an-invoice-payment'>Add tags to an invoice payment</h3>
<p>Adds one or more tags to an invoice payment object. The tag definitions must already exist.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    -d <span class="s1">'[
            "353752dd-9041-4450-b782-a8bb03a923c8"
        ]'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"45d6f4c5-21be-49b1-99c5-7b0c3c985bf0"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">tagDefinitionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="o">);</span>

<span class="n">Tags</span> <span class="n">result</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">createInvoicePaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                         <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">tagDefinitionId</span><span class="o">),</span> 
                                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'foo'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">add_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                        <span class="n">user</span><span class="p">,</span>
                        <span class="n">reason</span><span class="p">,</span>
                        <span class="n">comment</span><span class="p">,</span>
                        <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'8d85a8e8-c94b-438f-aac1-e8cb436b2c05'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">]</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">create_invoice_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                              <span class="n">tag</span><span class="p">,</span>
                                              <span class="n">created_by</span><span class="p">,</span>
                                              <span class="n">api_key</span><span class="p">,</span>
                                              <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>Provides a list of tag definition Ids in JSON format</p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='invoice-payment-retrieve-invoice-payment-tags'>Retrieve invoice payment tags</h3>
<p>Retrieves all tags attached to this InvoicePayment.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/tags'</span> 
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">Boolean</span> <span class="n">includedDeleted</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// Will not include deleted tags</span>

<span class="n">List</span><span class="o">&lt;</span><span class="n">Tag</span><span class="o">&gt;</span> <span class="n">tags</span> <span class="o">=</span> <span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">getInvoicePaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                                         <span class="n">includedDeleted</span><span class="o">,</span> 
                                                         <span class="n">AuditLevel</span><span class="o">.</span><span class="na">FULL</span><span class="o">,</span> 
                                                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">included_deleted</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">audit</span> <span class="o">=</span> <span class="s1">'NONE'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">tags</span><span class="p">(</span><span class="n">included_deleted</span><span class="p">,</span>
                     <span class="n">audit</span><span class="p">,</span>
                     <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'2a1ffd2c-0de1-4f5c-b2a9-27d8deebe596'</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">get_invoice_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e7f68cab-3b9a-4150-909a-5f1c17f1fb2b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc7fcd4d-e701-4679-9741-41289103db83"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"353752dd-9041-4450-b782-a8bb03a923c8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>includedDeleted</strong></td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>If true, include deleted tags</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag objects.</p>
<h3 id='invoice-payment-remove-tags-from-an-invoice-payment'>Remove tags from an invoice payment</h3>
<p>Removes a list of tags attached to an InvoicePayment.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/tags</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-CreatedBy: demo'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/cc7fcd4d-e701-4679-9741-41289103db83/tags?tagDef=00000000-0000-0000-0000-000000000001'</span>    
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.InvoicePaymentApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">InvoicePaymentApi</span> <span class="n">invoicePaymentApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"e659f0f3-745c-46d5-953c-28fe9282fc7d"</span><span class="o">);</span>

<span class="n">UUID</span> <span class="n">autoPayOffId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="o">);</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="na">deleteInvoicePaymentTags</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span> 
                                           <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">autoPayOffId</span><span class="o">),</span> 
                                           <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">tag_name</span> <span class="o">=</span> <span class="s1">'TEST'</span>

<span class="n">invoice_payment</span><span class="p">.</span><span class="nf">remove_tag</span><span class="p">(</span><span class="n">tag_name</span><span class="p">,</span>
                           <span class="n">user</span><span class="p">,</span>
                           <span class="n">reason</span><span class="p">,</span>
                           <span class="n">comment</span><span class="p">,</span>
                           <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">invoicePaymentApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">InvoicePaymentApi</span><span class="p">()</span>
<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'8d85a8e8-c94b-438f-aac1-e8cb436b2c05'</span>
<span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="s">"00000000-0000-0000-0000-000000000002"</span><span class="p">]</span>

<span class="n">invoicePaymentApi</span><span class="o">.</span><span class="n">delete_invoice_payment_tags</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span> 
                                              <span class="n">created_by</span><span class="p">,</span> 
                                              <span class="n">api_key</span><span class="p">,</span> 
                                              <span class="n">api_secret</span><span class="p">,</span> 
                                              <span class="n">tag_def</span><span class="o">=</span><span class="n">tag</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagDef</strong></td>
<td>array of string</td>
<td>yes</td>
<td>none</td>
<td>List of tag definition IDs identifying the tags that should be removed.</td>
</tr>
</tbody></table>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='invoice-payment-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='invoice-payment-retrieve-invoice-payment-audit-logs-with-history-by-id'>Retrieve invoice payment audit logs with history by id</h3>
<p>Retrieves a list of audit log records showing events that occurred involving changes to a specified invoice payment. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/invoicePayments/{paymentId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiKey: bob'</span> <span class="se">\</span>
    -H <span class="s1">'X-Killbill-ApiSecret: lazar'</span> <span class="se">\</span>
    -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
    <span class="s1">'http://127.0.0.1:8080/1.0/kb/invoicePayments/8fe697d4-2c25-482c-aa45-f6cd5a48186d/auditLogsWithHistory'</span> 
</code></pre><pre class="highlight java tab-java"><code>                                                                                      <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight python tab-python"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8fe697d4-2c25-482c-aa45-f6cd5a48186d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5d32d0ab-3c08-47b2-8c6d-bb9d2a7fd62c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-19T16:39:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"84c7e0d4-a5ed-405f-a655-3ed16ae19997"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentNumber"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"916619a4-02bb-4d3d-b3da-2584ac897b19"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"externalKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paymentExternalKey"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"stateName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastSuccessStateName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENTS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PAYMENT_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">]</span><span class="w">

</span><span class="err">**Query</span><span class="w"> </span><span class="err">Parameters**</span><span class="w">

</span><span class="err">None.</span><span class="w">

</span><span class="err">**Response**</span><span class="w">

</span><span class="err">If</span><span class="w"> </span><span class="err">successful</span><span class="p">,</span><span class="w"> </span><span class="err">returns</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">status</span><span class="w"> </span><span class="err">code</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">list</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">account</span><span class="w"> </span><span class="err">audit</span><span class="w"> </span><span class="err">logs</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">history.</span><span class="w">

</span></code></pre><h1 id='usage'>Usage</h1>
<p>When invoicing usage-based subscriptions, you need to record usage data into Kill Bill. Note that Kill Bill is not designed to be a metering system, so it shouldn&#39;t contain all data points. Instead, it expects that you record a usage summary on a daily basis (1 API call per subscription per day). For a telco company, for instance, instead of recording all phone calls, you should only record the number of minutes effectively used for each day.</p>

<p>For more information, see our <a href="http://docs.killbill.io/latest/userguide_subscription.html#components-catalog-usage">catalog usage documentation</a> and our <a href="http://docs.killbill.io/latest/userguide_subscription.html#components-invoicing-usage">invoice usage documentation</a>.</p>
<h2 id='usage-usage-resource'>Usage Resource</h2>
<p>There are several resource objects associated with usage in Kill-Bill. These are shown below.</p>

<p><strong>SubscriptionUsageRecord</strong>, along with its components <strong>UnitUsageRecord</strong> and <strong>UsageRecord</strong>, is used to enter the daily usage summary into the system.</p>

<p><strong>SubscriptionUsageRecord</strong>:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the subscription</td>
</tr>
<tr>
<td><strong>trackingId</strong></td>
<td>string</td>
<td>user</td>
<td>User&#39;s tracking Id for this usage record</td>
</tr>
<tr>
<td><strong>unitUsageRecords</strong></td>
<td>list</td>
<td>user</td>
<td>List of <strong>UnitUsageRecord</strong> (see next)</td>
</tr>
</tbody></table>

<p><strong>UnitUsageRecord</strong>:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>unitType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of unit represented</td>
</tr>
<tr>
<td><strong>usageRecords</strong></td>
<td>list</td>
<td>user</td>
<td>List of <strong>UsageRecord</strong> for this unit (see next)</td>
</tr>
</tbody></table>

<p><strong>UsageRecord</strong>:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>recordDate</strong></td>
<td>string</td>
<td>user</td>
<td>Date/DateTime for this record in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>user</td>
<td>Amount of usage for this record</td>
</tr>
</tbody></table>

<p><strong>RolledUpUsage</strong>, along with its component <strong>RolledUpUnit</strong>, is used to maintain the cumulative record of usage over a specified period of time.</p>

<p><strong>RolledUpUsage</strong>:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscriptionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the subscription</td>
</tr>
<tr>
<td><strong>startDate</strong></td>
<td>string</td>
<td>system</td>
<td>starting datetime for this record</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>string</td>
<td>system</td>
<td>ending datetime for this record</td>
</tr>
<tr>
<td><strong>rolledUpUnits</strong></td>
<td>list</td>
<td>system</td>
<td>List of <strong>RolledUpUnit</strong> (see next)</td>
</tr>
</tbody></table>

<p><strong>RolledUpUnit</strong>:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>unitType</strong></td>
<td>string</td>
<td>system</td>
<td>type of unit represented</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>number</td>
<td>system</td>
<td>total amount of usage of this unit</td>
</tr>
</tbody></table>
<h2 id='usage-usage'>Usage</h2>
<p>The APIs in this group support recording and retrieving usage data points.</p>
<h3 id='usage-record-usage-for-a-subscription'>Record usage for a subscription</h3>
<p>Records the daily mount of usage of a specified set of unit types for a given subscription</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/usages</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># With Date</span>

curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
     -d <span class="s1">'{"subscriptionId":"365987b2-5443-47e4-a467-c8962fc6995c", "trackingId": "my-unique-tracking-id", "unitUsageRecords":[{"unitType":"chocolate-videos","usageRecords":[{"recordDate":"2013-03-14","amount":1}]}]}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/usages"</span>

<span class="c"># With DateTime and amount as decimal</span>
curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
     -d <span class="s1">'{"subscriptionId":"f2d142c3-0157-4f86-a27a-3f0f64d71b2b", "trackingId": "t2", "unitUsageRecords":[{"unitType":"stones","usageRecords":[{"recordDate":"2023-02-07T10:00","amount":20.5}]}]}'</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/usages"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.UsageApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">UsageApi</span> <span class="n">usageApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"2daf08aa-3a32-45d7-9d75-9c667391f994"</span><span class="o">);</span>

<span class="n">UsageRecord</span> <span class="n">usageRecord1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UsageRecord</span><span class="o">();</span>
<span class="n">usageRecord1</span><span class="o">.</span><span class="na">setAmount</span><span class="o">(</span><span class="n">BigDecimal</span><span class="o">.</span><span class="na">ONE</span><span class="o">);</span>
<span class="n">usageRecord1</span><span class="o">.</span><span class="na">setRecordDate</span><span class="o">(</span><span class="k">new</span> <span class="n">DateTime</span><span class="o">(</span><span class="s">"2023-02-27"</span><span class="o">));</span>

<span class="n">UnitUsageRecord</span> <span class="n">unitUsageRecord</span> <span class="o">=</span> <span class="k">new</span> <span class="n">UnitUsageRecord</span><span class="o">();</span>
<span class="n">unitUsageRecord</span><span class="o">.</span><span class="na">setUnitType</span><span class="o">(</span><span class="s">"bullets"</span><span class="o">);</span>
<span class="n">unitUsageRecord</span><span class="o">.</span><span class="na">setUsageRecords</span><span class="o">(</span><span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">usageRecord1</span><span class="o">));</span>

<span class="n">SubscriptionUsageRecord</span> <span class="n">usage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SubscriptionUsageRecord</span><span class="o">();</span>
<span class="n">usage</span><span class="o">.</span><span class="na">setSubscriptionId</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">);</span>
<span class="n">usage</span><span class="o">.</span><span class="na">setUnitUsageRecords</span><span class="o">(</span><span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">unitUsageRecord</span><span class="o">));</span>

<span class="n">usageApi</span><span class="o">.</span><span class="na">recordUsage</span><span class="o">(</span><span class="n">usage</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">usage_record</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">UsageRecordAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">usage_record</span><span class="p">.</span><span class="nf">amount</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">usage_record</span><span class="p">.</span><span class="nf">record_date</span> <span class="o">=</span> <span class="s2">"2013-03-14"</span>

<span class="n">unit_usage_record</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">UnitUsageRecordAttributes</span><span class="p">.</span><span class="nf">new</span>
<span class="n">unit_usage_record</span><span class="p">.</span><span class="nf">unit_type</span> <span class="o">=</span> <span class="s2">"chocolate-videos"</span>
<span class="n">unit_usage_record</span><span class="p">.</span><span class="nf">usage_records</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">unit_usage_record</span><span class="p">.</span><span class="nf">usage_records</span> <span class="o">&lt;&lt;</span> <span class="n">usage_record</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">UsageRecord</span><span class="p">.</span><span class="nf">new</span>
<span class="n">result</span><span class="p">.</span><span class="nf">subscription_id</span> <span class="o">=</span> <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span>
<span class="n">result</span><span class="p">.</span><span class="nf">unit_usage_records</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">result</span><span class="p">.</span><span class="nf">unit_usage_records</span> <span class="o">&lt;&lt;</span> <span class="n">unit_usage_record</span>

<span class="n">result</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>A SubscriptionUsageRecord.</p>

<p><strong>Query Parameters</strong></p>

<p>none</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='usage-retrieve-usage-for-a-subscription-and-unit-type'>Retrieve usage for a subscription and unit type</h3>
<p>Retrieves the usage record for a given subscription, for a specified period of time and a specified unit type</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/usages/{subscriptionId}/{unitType}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/usages/365987b2-5443-47e4-a467-c8962fc6995c/chocolate-videos?startDate=2012-08-25&amp;endDate=2013-08-26"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.UsageApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">UsageApi</span> <span class="n">usageApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">unitType</span> <span class="o">=</span> <span class="s">"chocolate-videos"</span><span class="o">;</span>
<span class="n">LocalDate</span> <span class="n">startDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2012-08-25"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">endDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-08-26"</span><span class="o">);</span>

<span class="n">RolledUpUsage</span> <span class="n">retrievedUsage</span> <span class="o">=</span> <span class="n">usageApi</span><span class="o">.</span><span class="na">getUsage</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                                 <span class="n">unitType</span><span class="o">,</span>
                                                 <span class="n">startDate</span><span class="o">,</span>
                                                 <span class="n">endDate</span><span class="o">,</span>
                                                 <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription_id</span> <span class="o">=</span> <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s2">"2012-08-25"</span>
<span class="n">end_date_</span> <span class="o">=</span> <span class="s2">"2013-08-26"</span>
<span class="n">unit_type</span> <span class="o">=</span> <span class="s2">"chocolate-videos"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">RolledUpUsage</span><span class="p">.</span><span class="nf">find_by_subscription_id_and_type</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                                      <span class="n">start_date</span><span class="p">,</span>
                                                                      <span class="n">end_date</span><span class="p">,</span>
                                                                      <span class="n">unit_type</span><span class="p">,</span>
                                                                      <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-08-25"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-26"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"rolledUpUnits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"unitType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chocolate-videos"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">10.5</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>yes</td>
<td>none</td>
<td>Date/DateTime of oldest data point to retrieve (see below) in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>date</td>
<td>yes</td>
<td>none</td>
<td>Date/DateTime of newest data point to retrieve (see below) in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format</td>
</tr>
</tbody></table>

<ul>
<li><strong>startDate</strong>, <strong>endDate</strong>: Data is retrieved beginning on the specified start date up to but not including the specified end date.</li>
</ul>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a RolledUpUsage object.</p>
<h3 id='usage-retrieve-usage-for-a-subscription'>Retrieve usage for a subscription</h3>
<p>Retrieves the usage record for a given subscription, for a specified period of time and all unit types.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/usages/{subscriptionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/usages/365987b2-5443-47e4-a467-c8962fc6995c?startDate=2012-08-25&amp;endDate=2013-08-26"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.UsageApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">UsageApi</span> <span class="n">usageApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">subscriptionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="o">);</span>

<span class="n">LocalDate</span> <span class="n">startDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2012-08-25"</span><span class="o">);</span>
<span class="n">LocalDate</span> <span class="n">endDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalDate</span><span class="o">(</span><span class="s">"2013-08-26"</span><span class="o">);</span>

<span class="n">RolledUpUsage</span> <span class="n">retrievedUsage</span> <span class="o">=</span> <span class="n">usageApi</span><span class="o">.</span><span class="na">getAllUsage</span><span class="o">(</span><span class="n">subscriptionId</span><span class="o">,</span>
                                                    <span class="n">startDate</span><span class="o">,</span>
                                                    <span class="n">endDate</span><span class="o">,</span>
                                                    <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">subscription_id</span> <span class="o">=</span> <span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s2">"2012-08-25"</span>
<span class="n">end_date</span> <span class="o">=</span> <span class="o">=</span> <span class="s2">"2013-08-26"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">RolledUpUsage</span><span class="p">.</span><span class="nf">find_by_subscription_id</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">,</span>
                                                             <span class="n">start_date</span><span class="p">,</span>
                                                             <span class="n">end_date</span><span class="p">,</span>
                                                             <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">TODO</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"subscriptionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"365987b2-5443-47e4-a467-c8962fc6995c"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"startDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-08-25"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"endDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-26"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"rolledUpUnits"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"unitType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"chocolate-videos"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>startDate</strong></td>
<td>date</td>
<td>yes</td>
<td>none</td>
<td>Date/DateTime of oldest data point to retrieve (see below) in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format</td>
</tr>
<tr>
<td><strong>endDate</strong></td>
<td>date</td>
<td>yes</td>
<td>none</td>
<td>Date/DateTime of newest data point to retrieve (see below) in <code>yyyy-mm-dd</code>/<code>yyyy-mm-ddThh:mm</code> format</td>
</tr>
</tbody></table>

<ul>
<li><strong>startDate</strong>, <strong>endDate</strong>: Data is retrieved beginning on the specified start date/datetime up to but not including the specified end date/datetime.</li>
</ul>

<p><strong>Response</strong></p>

<p>IF successful, returns a status code of 200 and a RolledUpUsage object.</p>
<h1 id='custom-field'>Custom Field</h1>
<p>A custom field is an attribute (key-value pair) that may be attached to almost any resource.</p>

<p>This section provides APIs to list all custom fields, search for a specific custom field, and retrieve custom field audit logs. Searching may be based on the custom field id or on its name, value, or resource type. In addition, each resource provides APIs for the applicable CRUD operations: creation, retrieval, updating, and deletion. </p>
<h2 id='custom-field-custom-field-resource'>Custom Field  Resource</h2>
<p>The <code>Custom Field</code> resource is associated with a key-value pair and has the following attributes:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customFieldId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this custom field</td>
</tr>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the object this tag is attached to (e.g. &quot;ACCOUNT&quot;)</td>
</tr>
<tr>
<td><strong>objectID</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the object</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>string</td>
<td>user</td>
<td>name of the custom field</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td>string</td>
<td>user</td>
<td>value of the custom field</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>array of audit log records for this custom field</td>
</tr>
</tbody></table>
<h3 id='custom-field-list-all-custom-fields'>List all custom fields</h3>
<p>Retrieves a list of all custom fields (name and value) with their associated resources and optional audit logs</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/customFields/pagination</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of records for all custom fields</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/customFields/pagination"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"high"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre><h3 id='custom-field-search-custom-fields-by-id'>Search custom fields by ID</h3>
<p>Searches for a specific custom field by its ID</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/customField/search/{customFieldId}</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns the record for the specified custom field, if it exists</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/customFields/search/13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"high"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre><h3 id='custom-field-search-custom-fields-by-resource-type-name-and-optional-value'>Search custom fields by resource type, name, and optional value</h3>
<p>Searches for a specific custom field by its resource type, name, and optional value</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/customField/search</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>type of resource to search (e.g., &quot;ACCOUNT&quot;)</td>
</tr>
<tr>
<td><strong>fieldName</strong></td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>name of the custom field to search for</td>
</tr>
<tr>
<td><strong>fieldValue</strong></td>
<td>string</td>
<td>false</td>
<td>any value</td>
<td>value of the custom field to search for</td>
</tr>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns the record for the specified custom field, if it exists</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/customFields/search?objectType=ACCOUNT&amp;fieldName=importance"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"customFieldId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"importance"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"high"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre><h2 id='custom-field-audit-logs'>Audit Logs</h2><h3 id='custom-field-retrieve-custom-field-audit-logs-with-history-by-custom-field-id'>Retrieve custom field audit logs with history by custom field id</h3>
<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/customFields/{customFieldId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/customFields/4b498210-b177-4aae-a539-cf594adaa221/auditLogsWithHistory"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b498210-b177-4aae-a539-cf594adaa221"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_custom_fields"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2b3920ae-6b8c-4deb-9ed9-132ff632e692"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fieldValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_value"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01968143-c64b-41d4-94cb-d65748b0f5b6"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UPDATE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:01.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b498210-b177-4aae-a539-cf594adaa221"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_custom_fields"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6343d19f-cef0-486a-8114-85c7573639a0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:01.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:01.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fieldValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_test_value"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01968143-c64b-41d4-94cb-d65748b0f5b6"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELETE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:01.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b498210-b177-4aae-a539-cf594adaa221"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_custom_fields"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a9343bd-9cba-417b-be17-713ff456b5f7"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:01.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-08-01T06:00:01.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fieldName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Custom Field"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fieldValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"another_test_value"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01968143-c64b-41d4-94cb-d65748b0f5b6"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CUSTOM_FIELD_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a list of custom field logs with history.</p>
<h1 id='tag'>Tag</h1>
<p>A tag is a label that may be attached to almost any resource. There are two categories of tags: <code>System Tags</code> and <code>User Tags</code>.</p>

<p>Kill Bill provides a small set of predefined <code>System Tags</code> that affect the behavior of the system. For example, <code>AUTO_PAY_OFF</code> prevents the system from initiating automatic payment of an invoice. <code>System Tags</code> may be attached only to specific resource types, and most (including <code>AUTO_PAY_OFF</code>) apply only to <code>Accounts</code>.</p>

<p>The following <strong>system</strong> tags have been defined:</p>

<table><thead>
<tr>
<th>Tag</th>
<th>tagDefinitionId</th>
<th>Object type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>AUTO_PAY_OFF</code></td>
<td><code>00000000-0000-0000-0000-000000000001</code></td>
<td><code>ACCOUNT</code></td>
<td>Suspends payments until removed.</td>
</tr>
<tr>
<td><code>AUTO_INVOICING_OFF</code></td>
<td><code>00000000-0000-0000-0000-000000000002</code></td>
<td><code>ACCOUNT</code></td>
<td>Suspends invoicing until removed.</td>
</tr>
<tr>
<td><code>OVERDUE_ENFORCEMENT_OFF</code></td>
<td><code>00000000-0000-0000-0000-000000000003</code></td>
<td><code>ACCOUNT</code></td>
<td>Suspends overdue enforcement behaviour until removed.</td>
</tr>
<tr>
<td><code>WRITTEN_OFF</code></td>
<td><code>00000000-0000-0000-0000-000000000004</code></td>
<td><code>INVOICE</code></td>
<td>Indicates that an invoice is written off. This has no effect on billing or payment.</td>
</tr>
<tr>
<td><code>MANUAL_PAY</code></td>
<td><code>00000000-0000-0000-0000-000000000005</code></td>
<td><code>ACCOUNT</code></td>
<td>Indicates that Killbill doesn&#39;t process payments for this account. That is, the account uses external payments only.</td>
</tr>
<tr>
<td><code>TEST</code></td>
<td><code>00000000-0000-0000-0000-000000000006</code></td>
<td><code>ACCOUNT</code></td>
<td>Indicates that this is a test account.</td>
</tr>
<tr>
<td><code>PARTNER</code></td>
<td><code>00000000-0000-0000-0000-000000000007</code></td>
<td><code>ACCOUNT</code></td>
<td>Indicates that this is a partner account.</td>
</tr>
<tr>
<td><code>AUTO_INVOICING_DRAFT</code></td>
<td><code>00000000-0000-0000-0000-000000000008</code></td>
<td><code>ACCOUNT</code></td>
<td>Generate account invoices in DRAFT mode.</td>
</tr>
<tr>
<td><code>AUTO_INVOICING_REUSE_DRAFT</code></td>
<td><code>00000000-0000-0000-0000-000000000009</code></td>
<td><code>ACCOUNT</code></td>
<td>Use existing draft invoice if exists.</td>
</tr>
</tbody></table>

<p><code>User Tags</code> are defined by the user for any desired purpose and are not interpreted by the system. <code>User Tags</code> must be defined using the <code>Tag Definition</code> APIs below. These tags may be attached to almost any resource type.</p>

<p>This section provides APIs to list all tags, search for a specific tag, and retrieve tag audit logs. In addition, each resource provides APIs for the applicable CRUD operations: creation, retrieval, and deletion. </p>
<h2 id='tag-tag-resource'>Tag  Resource</h2>
<p>A tag resource is associated with a tag definition and attached to another specific resource. The resource object has the following attributes:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>tagId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for this specific tag</td>
</tr>
<tr>
<td><strong>objectType</strong></td>
<td>string</td>
<td>user</td>
<td>Type of the object this tag is attached to (e.g. &quot;ACCOUNT&quot;)</td>
</tr>
<tr>
<td><strong>objectID</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the object</td>
</tr>
<tr>
<td><strong>tagDefinitionId</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the tag definition</td>
</tr>
<tr>
<td><strong>tagDefinitionName</strong></td>
<td>string</td>
<td>user</td>
<td>name for the tag definition</td>
</tr>
<tr>
<td><strong>auditLogs</strong></td>
<td>array</td>
<td>system</td>
<td>array of audit log records for this tag</td>
</tr>
</tbody></table>
<h3 id='tag-list-all-tags'>List all tags</h3>
<p>Retrieves a list of all tags with their associated resources and tag definitions</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tags/pagination</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns a list of records for all tags</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tags/pagination"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ac0218e-0d2b-4c65-841f-cff8af92a100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sleepy"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre><h3 id='tag-search-tags'>Search tags</h3>
<p>Searches for a specific tag</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tags/search/{tagId}</code></p>

<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>integer</td>
<td>false</td>
<td>0</td>
<td>starting item in the list</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>integer</td>
<td>false</td>
<td>100</td>
<td>number of items to return</td>
</tr>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>false</td>
<td>&quot;NONE&quot;</td>
<td>&quot;NONE&quot;, &quot;MINIMAL&quot;, or &quot;FULL&quot;</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>Returns the record for the specified tag, if it exists</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tags/search/13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tagId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13fe6f2c-91af-4635-aa9c-52e04d99b5ec"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"212211f8-a264-4ddf-b609-709ae652aec4"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ac0218e-0d2b-4c65-841f-cff8af92a100"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tagDefinitionName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sleepy"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre><h3 id='tag-retrieve-tag-audit-logs'>Retrieve tag audit logs</h3>
<p>Retrieves audit logs with history for a specific tag</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tags/{tagId}/auditLogsWithHistory</code></p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>Returns a list of tag audit logs with history.</p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl  <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tags/26e22dbf7-a493-4402-b1e3-4bec54c39f31/auditLogsWithHistory"</span>

</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-09-01T06:00:05.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAG"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e22dbf7-a493-4402-b1e3-4bec54c39f31"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_fixed_and_recurrring_items"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Closing account"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06d4fa80-f6ab-4760-aa97-2cd4ab83fd37"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-09-01T06:00:05.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013-09-01T06:00:05.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tagDefinitionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000002"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"037a6b81-f351-4e09-b2ea-f76f2fb0189e"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAG"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAG_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre><h1 id='tag-definition'>Tag Definition</h1>
<p>These APIs manage a tag definition resource object, which provides the definition for a user-defined tag.</p>
<h2 id='tag-definition-tag-definition-resource'>Tag Definition Resource</h2>
<p>Each tag is associated with a specific tag definition. A tag definition is a schema or template, and a tag is an instance of it. Please refer to the section <a href="https://killbill.github.io/slate/#account-tags">AccountTags</a> for an overview of tags. The system provides some <code>System tag definitions</code> that can be used to add tags to a particular object. Users may define their own tags; however, when using <code>User Tags</code>, one must first create the associated tag definition.</p>

<p>The tag definition resource includes the following attributes:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>id</strong></td>
<td>string</td>
<td>system</td>
<td>UUID for the tag definition</td>
</tr>
<tr>
<td><strong>isControlTag</strong></td>
<td>boolean</td>
<td>system</td>
<td>True if this is a control tag</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td>string</td>
<td>user</td>
<td>Name of the tag definition</td>
</tr>
<tr>
<td><strong>description</strong></td>
<td>string</td>
<td>user</td>
<td>Description of the tag definition</td>
</tr>
<tr>
<td><strong>applicableObjectTypes</strong></td>
<td>list</td>
<td>user</td>
<td>see below</td>
</tr>
</tbody></table>

<ul>
<li><strong>applicableObjectTypes</strong>:  A list giving the name(s) of resource types that can be given this tag.</li>
</ul>
<h2 id='tag-definition-tag-definition'>Tag Definition</h2>
<p>The APIs in this group provide the ability to create, retrieve, and delete tag definitions, and also to access their associated audit logs.</p>
<h3 id='tag-definition-create-a-tag-definition'>Create a tag definition</h3>
<p>Creates a new tag definition.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/tagDefinitions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{ "name": "good_customer", "description": "a good customer", "applicableObjectTypes": ["ACCOUNT"]}'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions"</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">no</span><span class="w"> </span><span class="err">content</span><span class="w">
</span></code></pre>
<p><strong>Request Body</strong></p>

<p>A TagDefinition resource object with at least the following attributes: <strong>name</strong>, <strong>description</strong>, and <strong>applicableObjectTypes</strong>. The list of <strong>applicableObjectTypes</strong> may not be empty. </p>

<p><strong>Query Parameters</strong></p>

<p>none</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 201 and an empty body.</p>
<h3 id='tag-definition-list-tag-definitions'>List tag definitions</h3>
<p>Lists all tag definitions for this tenant</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tagDefinitions</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions"</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"93f2bc59-e18d-4a5e-a645-9386c76fc03f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isControlTag"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_customer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a good customer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"applicableObjectTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ACCOUNT"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isControlTag"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AUTO_PAY_OFF"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Suspends payments until removed."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"applicableObjectTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ACCOUNT"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w"> 
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag definition objects.</p>
<h3 id='tag-definition-retrieve-a-tag-definition-by-its-id'>Retrieve a tag definition by its ID</h3>
<p>Retrieves an existing tag definition.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tagDefinitions/{tagDefinitionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions/93f2bc59-e18d-4a5e-a645-9386c76fc03f"</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"93f2bc59-e18d-4a5e-a645-9386c76fc03f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isControlTag"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_customer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a good customer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"applicableObjectTypes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"ACCOUNT"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>audit</strong></td>
<td>string</td>
<td>no</td>
<td>&quot;NONE&quot;</td>
<td>Level of audit information to return</td>
</tr>
</tbody></table>

<p>Audit information options are &quot;NONE&quot;, &quot;MINIMAL&quot; (only inserts), or &quot;FULL&quot;.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a tag definition object.</p>
<h3 id='tag-definition-delete-a-tag-definition'>Delete a tag definition</h3>
<p>Deletes a tag definition.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/tagDefinitions/{tagDefinitionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions/93f2bc59-e18d-4a5e-a645-9386c76fc03f"</span>
</code></pre><pre class="highlight java tab-java"><code></code></pre><pre class="highlight ruby tab-ruby"><code></code></pre><pre class="highlight python tab-python"><code></code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">no</span><span class="w"> </span><span class="err">content</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='tag-definition-audit-logs'>Audit Logs</h2>
<p>Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see <a href="https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history">Audit and History</a>.</p>
<h3 id='tag-definition-retrieve-tag-definition-audit-logs-with-history-by-id'>Retrieve tag definition audit logs with history by id</h3>
<p>Retrieves a list of audit log records showing events that occurred involving changes to a specified tag definition. History information is included with each record.</p>

<p><strong>HTTP Request</strong> </p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/tagDefinitions/{tagDefinitionId}/auditLogsWithHistory</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/tagDefinitions/92991586-df8a-4d8d-9d55-61172c52fa45/auditLogsWithHistory"</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"changeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INSERT"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changeDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-26T01:56:48.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAG_DEFINITION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"objectId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92991586-df8a-4d8d-9d55-61172c52fa45"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reasonCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"demo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"039f01ea-460a-4edd-bfbc-39a68149cad2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"history"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"createdDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-26T01:56:48.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updatedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-26T01:56:48.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"recordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"accountRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tenantRecordId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_customer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"applicableObjectTypes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCOUNT"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a good customer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"isActive"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAG_DEFINITIONS"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"historyTableName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAG_DEFINITION_HISTORY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 200 and a list of tag definition audit logs with history.</p>
<h1 id='admin'>Admin</h1>
<p>The Admin resource offers a set of endpoints such as the following:</p>

<ul>
<li>Administrative APIs to fix improper states</li>
<li>Operational APIs such as adding hosts in and out of rotation, clearing internal caches, etc.</li>
<li>APIs to retrieve low level information from the system</li>
</ul>
<h2 id='admin-adminpayment-object'>AdminPayment object</h2>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Generated by</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>lastSuccessPaymentState</strong></td>
<td>string</td>
<td>user</td>
<td>Last payment state</td>
</tr>
<tr>
<td><strong>currentPaymentStateName</strong></td>
<td>string</td>
<td>user</td>
<td>New payment state</td>
</tr>
<tr>
<td><strong>transactionStatus</strong></td>
<td>string</td>
<td>user</td>
<td>New transaction status</td>
</tr>
</tbody></table>

<p>Please refer <a href="https://github.com/killbill/killbill/blob/ff81c701e236310561e31624df18bab5788b0339/payment/src/main/java/org/killbill/billing/payment/core/sm/PaymentStateMachineHelper.java">Payment States</a> information to understand the possible values of Payment State.</p>

<p>Please refer <a href="https://killbill.github.io/slate/?shell#payment-transaction-payment-transaction-resource">Payment Transaction Resource</a> to understand the possible values of <code>transactionStatus</code>.</p>
<h2 id='admin-administrative-apis'>Administrative Apis</h2>
<p>Miscellaneous administrative APIs</p>
<h3 id='admin-trigger-an-invoice-generation-for-all-parked-accounts'>Trigger an invoice generation for all parked accounts</h3>
<p>When the system detects an issue invoicing a customer <code>Account</code>, it will automatically <code>PARK</code> the <code>Account</code> as explained <a href="http://docs.killbill.io/latest/invoice_subsystem.html#_parked_accounts">here</a>. This API can be used after the issues have been resolved to remove accounts from the parked state and generate any outstanding invoices needed.</p>

<p><strong>HTTP Request</strong></p>

<p><code>POST http://127.0.0.1:8080/1.0/kb/admin/invoices</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X POST <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Reason: demo"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-Comment: demo"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/admin/invoices"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">triggerInvoiceGenerationForParkedAccounts</span><span class="o">(</span><span class="n">offset</span><span class="o">,</span>
                                                   <span class="n">limit</span><span class="o">,</span>
                                                   <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">ofset</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">limit</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">user</span> <span class="o">=</span> <span class="s2">"demo"</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">trigger_invoice_generation_for_parked_accounts</span><span class="p">(</span><span class="n">ofset</span><span class="p">,</span>
                                                                            <span class="n">limit</span><span class="p">,</span>
                                                                            <span class="n">user</span><span class="p">,</span>
                                                                            <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">trigger_invoice_generation_for_parked_accounts</span><span class="p">(</span><span class="s">'test'</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"COMMITTED"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creditAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refundAdj"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c7656b7-1974-447b-b263-1613448d4c1e"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-07-19"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"targetDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-03-01"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoiceNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17700"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f65913b6-3185-48b2-b0cf-62495b879047"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bundleKeys"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credits"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"trackingIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="s2">"isParentInvoice"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentInvoiceId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"parentAccountId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"auditLogs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>offset</strong></td>
<td>long</td>
<td>no</td>
<td>0</td>
<td>starting offset for the page</td>
</tr>
<tr>
<td><strong>limit</strong></td>
<td>long</td>
<td>no</td>
<td>100</td>
<td>max results on this page</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of invoices generated.</p>
<h3 id='admin-update-the-state-of-a-paymenttransaction-and-associated-payment'>Update the state of a paymentTransaction and associated payment</h3>
<p>Provides a way to fix the payment state data for a given <code>Payment</code>, if that data becomes corrupted.
This could happen, for example, if a call to a third party payment gateway times out, leaving the system in an unknown state.</p>

<p><strong>HTTP Request</strong></p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/admin/payments/{paymentId}/transactions/{paymentTransactionId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-CreatedBy: demo"</span> <span class="se">\</span>
    -d <span class="s1">'{
          "lastSuccessPaymentState" : "AUTH_FAILED",
          "currentPaymentStateName" : "AUTH_FAILED",
          "transactionStatus": "PAYMENT_FAILURE"         
        }'</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/admin/payments/864c1418-e768-4cd5-a0db-67537144b685/transactions/864c1418-e768-4cd5-a0db-67537144b685"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">paymentId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>
<span class="n">UUID</span> <span class="n">paymentTransactionId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">lastSuccessPaymentState</span> <span class="o">=</span> <span class="s">"AUTH_FAILED"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">currentPaymentStateName</span> <span class="o">=</span> <span class="s">"AUTH_FAILED"</span><span class="o">;</span>
<span class="n">String</span> <span class="n">transactionStatus</span> <span class="o">=</span> <span class="s">"PAYMENT_FAILURE"</span><span class="o">;</span>

<span class="n">AdminPayment</span> <span class="n">body</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AdminPayment</span><span class="o">(</span><span class="n">lastSuccessPaymentState</span><span class="o">,</span>
                                     <span class="n">currentPaymentStateName</span><span class="o">,</span>
                                     <span class="n">transactionStatus</span><span class="o">);</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">updatePaymentTransactionState</span><span class="o">(</span><span class="n">paymentId</span><span class="o">,</span>
                                       <span class="n">paymentTransactionId</span><span class="o">,</span>
                                       <span class="n">body</span><span class="o">,</span>
                                       <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">payment_id</span> <span class="o">=</span> <span class="s2">"6cb944a-b308-4488-b046-4b4d61d375a6"</span>
<span class="n">transaction_id</span> <span class="o">=</span> <span class="s2">"8gb944a-b308-4488-b046-4b4d61d375r3"</span>
<span class="n">transaction_status</span> <span class="o">=</span> <span class="s2">"AUTH_FAILED"</span>
<span class="n">user</span> <span class="o">=</span>  <span class="s2">"demo"</span>
<span class="n">reason</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">comment</span> <span class="o">=</span> <span class="kp">nil</span>

<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">fix_transaction_state</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                                   <span class="n">transaction_id</span><span class="p">,</span>
                                                   <span class="n">transaction_status</span><span class="p">,</span>
                                                   <span class="n">user</span><span class="p">,</span>
                                                   <span class="n">reason</span><span class="p">,</span>
                                                   <span class="n">comment</span><span class="p">,</span>
                                                   <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">payment_id</span> <span class="o">=</span> <span class="s">'8gb944a-b308-4488-b046-4b4d61d375r3'</span>
<span class="n">payment_transaction_id</span> <span class="o">=</span> <span class="s">'6cb944a-b308-4488-b046-4b4d61d375a6'</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">AdminPayment</span><span class="p">(</span><span class="n">transaction_status</span><span class="o">=</span><span class="s">'AUTH_FAILED'</span><span class="p">)</span>
<span class="n">created_by</span> <span class="o">=</span> <span class="s">'demo'</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">update_payment_transaction_state</span><span class="p">(</span><span class="n">payment_id</span><span class="p">,</span>
                                          <span class="n">payment_transaction_id</span><span class="p">,</span>
                                          <span class="n">body</span><span class="p">,</span>
                                          <span class="n">created_by</span><span class="p">,</span>
                                          <span class="n">api_key</span><span class="p">,</span>
                                          <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Request Body</strong></p>

<p>An <code>AdminPayment</code> object containing, as a minimum, the new <code>transactionStatus</code> to be captured. The allowed values of the <code>transactionStatus</code> as well as what each <code>transactionStatus</code> means are already explained above. </p>

<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='admin-operational-apis'>Operational Apis</h2>
<p>These APIs invalidate caches and move a host in and out of the rotation</p>
<h3 id='admin-invalidate-a-specific-cache-or-invalidate-all-caches'>Invalidate a specific cache, or invalidate all caches</h3>
<p>Invalidates a specified cache. If no cache is specified, it invalidates all Kill Bill caches on the server.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/admin/cache</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/admin/cache"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">String</span> <span class="n">cacheName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">invalidatesCache</span><span class="o">(</span><span class="n">cacheName</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">cache_name</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">invalidates_cache</span><span class="p">(</span><span class="n">cache_name</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">invalidates_cache</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>cacheName</strong></td>
<td>string</td>
<td>no</td>
<td>all caches</td>
<td>cache name</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='admin-invalidate-caches-for-an-account'>Invalidate Caches for an Account</h3>
<p>Invalidates all Kill Bill caches on the server associated with a specific Account</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/admin/cache/accounts/{accountId}</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/admin/cache/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">invalidatesCacheByAccount</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span> <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"2ad52f53-85ae-408a-9879-32a7e59dd03d"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">invalidates_cache_by_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>
<span class="n">account_id</span> <span class="o">=</span> <span class="s">'2ad52f53-85ae-408a-9879-32a7e59dd03d'</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">invalidates_cache_by_account</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='admin-invalidate-caches-for-a-tenant'>Invalidate Caches for a Tenant</h3>
<p>Invalidates all Kill Bill caches on the server associated with this Tenant</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/admin/cache/tenants</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/admin/cache/tenants"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">invalidatesCacheByTenant</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">invalidates_cache_by_tenant</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">invalidates_cache_by_tenant</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='admin-put-the-host-back-into-rotation'>Put the host back into rotation</h3>
<p>Adds a server back into the rotation after it has been removed.</p>

<p><strong>HTTP Request</strong></p>

<p><code>PUT http://127.0.0.1:8080/1.0/kb/admin/healthcheck</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X PUT <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="s2">"http://127.0.0.1:8080/1.0/kb/admin/healthcheck"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">putInRotation</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">put_in_rotation</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">put_in_rotation</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h3 id='admin-remove-a-server-from-the-rotation'>Remove a server from the rotation</h3>
<p>Removes a server from the rotation during a deployment.</p>

<p><strong>HTTP Request</strong></p>

<p><code>DELETE http://127.0.0.1:8080/1.0/kb/admin/healthcheck</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -X DELETE <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/healthcheck"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">org.killbill.billing.client.api.gen.AdminApi</span><span class="o">;</span>
<span class="kd">protected</span> <span class="n">AdminApi</span> <span class="n">adminApi</span><span class="o">;</span>

<span class="n">adminApi</span><span class="o">.</span><span class="na">putOutOfRotation</span><span class="o">(</span><span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">put_out_of_rotation</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">put_out_of_rotation</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<p><strong>Query Parameters</strong></p>

<p>None.</p>

<p><strong>Response</strong></p>

<p>If successful, returns a status code of 204 and an empty body.</p>
<h2 id='admin-low-level-view-apis'>Low Level View Apis</h2>
<p>This API group currently includes a single API to view entries in the system queues</p>
<h3 id='admin-get-queue-entries'>Get queue entries</h3>
<p>Returns low level details about queue entries. Results can be requested for a specific account or all accounts; for a specific queue or all queues, and for a specific service or all services. In addition optional types of events may be specified, including history, for a specified date range; in processing; bus events; and notifications.</p>

<p><strong>HTTP Request</strong></p>

<p><code>GET http://127.0.0.1:8080/1.0/kb/admin/queues</code></p>

<blockquote>
<p>Example Request:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -v <span class="se">\</span>
    -u admin:password <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiKey: bob"</span> <span class="se">\</span>
    -H <span class="s2">"X-Killbill-ApiSecret: lazar"</span> <span class="se">\</span>
    -H <span class="s2">"Accept: application/octet-stream"</span> <span class="se">\</span>
    <span class="s2">"http://localhost:8080/1.0/kb/admin/queues"</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">UUID</span> <span class="n">accountId</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">fromString</span><span class="o">(</span><span class="s">"864c1418-e768-4cd5-a0db-67537144b685"</span><span class="o">);</span>
<span class="n">String</span> <span class="n">queueName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">serviceName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withHistory</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">String</span> <span class="n">minDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">String</span> <span class="n">maxDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withInProcessing</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">Boolean</span> <span class="n">withNotifications</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="n">OutputStream</span> <span class="n">outputStream</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>


<span class="n">adminApi</span><span class="o">.</span><span class="na">getQueueEntries</span><span class="o">(</span><span class="n">accountId</span><span class="o">,</span>
                         <span class="n">queueName</span><span class="o">,</span>
                         <span class="n">serviceName</span><span class="o">,</span>
                         <span class="n">withHistory</span><span class="o">,</span>
                         <span class="n">minDate</span><span class="o">,</span>
                         <span class="n">maxDate</span><span class="o">,</span>
                         <span class="n">withInProcessing</span><span class="o">,</span>
                         <span class="n">withBusEvents</span><span class="o">,</span>
                         <span class="n">withNotifications</span><span class="o">,</span>
                         <span class="n">outputStream</span><span class="o">,</span>
                         <span class="n">requestOptions</span><span class="o">);</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="n">account_id</span> <span class="o">=</span> <span class="s2">"864c1418-e768-4cd5-a0db-67537144b685"</span>
<span class="no">KillBillClient</span><span class="o">::</span><span class="no">Model</span><span class="o">::</span><span class="no">Admin</span><span class="p">.</span><span class="nf">get_queues_entries</span><span class="p">(</span><span class="n">account_id</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="n">adminApi</span> <span class="o">=</span> <span class="n">killbill</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">AdminApi</span><span class="p">()</span>

<span class="n">adminApi</span><span class="o">.</span><span class="n">get_queue_entries</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">api_secret</span><span class="p">)</span>
</code></pre>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"busEvents"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"notifications"</span><span class="p">:[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><strong>Query Parameters</strong></p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>accountId</strong></td>
<td>string</td>
<td>no</td>
<td>all accounts</td>
<td>account id</td>
</tr>
<tr>
<td><strong>queueName</strong></td>
<td>string</td>
<td>no</td>
<td>all queues</td>
<td>queue name</td>
</tr>
<tr>
<td><strong>serviceName</strong></td>
<td>string</td>
<td>no</td>
<td>all services</td>
<td>service name</td>
</tr>
<tr>
<td><strong>withHistory</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>if true include history</td>
</tr>
<tr>
<td><strong>minDate</strong></td>
<td>string</td>
<td>no</td>
<td>from the beginning</td>
<td>earliest date for history</td>
</tr>
<tr>
<td><strong>maxDate</strong></td>
<td>string</td>
<td>no</td>
<td>current date</td>
<td>latest date for history</td>
</tr>
<tr>
<td><strong>withInProcessing</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>if true include in processing</td>
</tr>
<tr>
<td><strong>withBusEvents</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>if true include bus events</td>
</tr>
<tr>
<td><strong>withNotifications</strong></td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>if true include notifications</td>
</tr>
</tbody></table>

<p><strong>Returns</strong></p>

<p>If successful, returns a status code of 200 and a list of queue entries of the specified types.</p>

        </div>
        <div class="dark-box">
            <div class="lang-selector">
                  <a href="#" data-language-name="shell">shell</a>
                  <a href="#" data-language-name="java">java</a>
                  <a href="#" data-language-name="ruby">ruby</a>
                  <a href="#" data-language-name="python">python</a>
                  <a href="#" data-language-name="javascript">javascript</a>
                  <a href="#" data-language-name="php">php</a>
            </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    setTimeout(function(){
      $('.content h2, .content h3, .content h4').append('<a href=""><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>');
      $('.content h2, .content h3, .content h4').each(function(){
        let itemHref = '#' + $(this).attr('id');
        $(this).find('a').attr("href", itemHref);
      });
      function copyToClipboard(text) {
        let sampleTextarea = document.createElement("textarea");
        document.body.appendChild(sampleTextarea);
        sampleTextarea.value = text;
        sampleTextarea.select();
        document.execCommand("copy");
        document.body.removeChild(sampleTextarea);
      }
      $('.content h2 a, .content h3 a, .content h4 a').on('click', function(){
        setTimeout(function(){
          copyToClipboard($(location).attr("href"));
        }, 500);  
      });
      $('.content pre').prepend('<div class="copy-icon"><svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.847 8.462a2.309 2.309 0 0 0-2.308-2.308h-9.23A2.307 2.307 0 0 0 0 8.462v9.23A2.307 2.307 0 0 0 2.308 20h9.23a2.309 2.309 0 0 0 2.309-2.308v-9.23Zm-1.539 0v9.23a.77.77 0 0 1-.77.77h-9.23a.769.769 0 0 1-.769-.77v-9.23c0-.425.344-.77.769-.77h9.23a.77.77 0 0 1 .77.77Z" fill="#99B7CE"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6.924 4.615a.769.769 0 0 1-.77-.769V2.308A2.308 2.308 0 0 1 8.462 0h9.23A2.308 2.308 0 0 1 20 2.308v9.23a2.308 2.308 0 0 1-2.308 2.308h-1.538a.769.769 0 1 1 0-1.539h1.538c.425 0 .77-.344.77-.769v-9.23a.769.769 0 0 0-.77-.77h-9.23a.769.769 0 0 0-.77.77v1.538a.77.77 0 0 1-.768.77Z" fill="#99B7CE"/></svg></div>');
      $('.content pre svg').on('click', function() {
          copyToClipboard($(this).parent().parent().find('code').text());
      });
    });
  </script>
  <script src='https://cdn.jsdelivr.net/npm/@docsearch/js@3'></script>	
  
  <script >docsearch({apiKey: '3ef227e7fd5e2e1a3fffd880484934bf', container: '#docsearch', appId: 'S2ISXITURI', indexName: 'killbill_slate'});</script>
</html>

