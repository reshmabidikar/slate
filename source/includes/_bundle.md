# Bundle

A Bundle (also known as Subscription Bundle) is a collection of subscriptions. Grouping certain subscriptions into a bundle is useful to ensure
that certain operations propagate to the group. A common example is cancellation. When cancelling a `BASE` subscription, which is part of a bundle,
any `ADD_ON` subscriptions in the same bundle are also cancelled automatically.

A Bundle is automatically created by the system when creating the initial (BASE) subscription. To add additional subscriptions in the same bundle, one must specify the `bundleId` for the bundle previously created.


## Bundle Resource

The `Bundle` resource represents a bundle. The attributes contained in this resource are the following:

| Name | Type | Generated by | Description |
| ---- | -----| -------- | ------------ |
| **accountId** | string | system | UUID for the account |
| **bundleId** | string | system | UUID for the bundle |
| **externalKey** | string | user | Optional external key for the bundle |
| **subscriptions** | array | system | List of subscriptions in the bundle |
| **timeline** | array | system | List of events for the bundle. |

**subscriptions** is a read-only array of subscription resources for the subscriptions in this bundle.

**timeline** is a read-only array of event resources for the events that have occurred for this bundle.


## Bundle

These endpoints support the basic operations on bundles. There is no create operation, because a bundle is automatically created when a BASE subscription is created.

### Retrieve a bundle by id

This API retrieves a bundle resource object based on its bundle Id. 

**HTTP Request** 

`GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}`

> Example Request:

```shell
curl -v \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Accept: application/json" \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d"
```
```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("90ec582a-5da8-49d5-a656-c63cbc9d30fd");

Bundle result = bundleApi.getBundle(bundleId, 
                                    AuditLevel.NONE, 
                                    requestOptions);
```

```ruby
bundle_id = "5b7a5f2d-4054-412f-b354-b722c2cff4ec"

bundle = KillBillClient::Model::Bundle.new
bundle.find_by_id(bundle_id, options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'

bundleApi.get_bundle(bundle_id, api_key, api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 200 OK
< Content-Type: application/json

{
  "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
  "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
  "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
  "subscriptions": [
    {
      "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
      "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
      "subscriptionId": "8ab101b6-15e8-433b-b4f7-f99eeaa56a77",
      "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
      "startDate": "2018-07-18",
      "productName": "Standard",
      "productCategory": "BASE",
      "billingPeriod": "MONTHLY",
      "phaseType": "TRIAL",
      "priceList": "DEFAULT",
      "planName": "standard-monthly",
      "state": "ACTIVE",
      "sourceType": "NATIVE",
      "cancelledDate": null,
      "chargedThroughDate": null,
      "billingStartDate": "2018-07-18",
      "billingEndDate": null,
      "billCycleDayLocal": 17,
      "events": [
        {
          "eventId": "3961e5a4-815c-4e95-aca6-2f3e76c37942",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-18",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_ENTITLEMENT",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "entitlement-service",
          "serviceStateName": "ENT_STARTED",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "8e7a6a7d-7660-49e3-979c-a4a0b6ec6804",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-18",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_BILLING",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "billing-service",
          "serviceStateName": "START_BILLING",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "f058c95f-9a86-435b-8bba-4f8532635450",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-08-17",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "PHASE",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "entitlement+billing-service",
          "serviceStateName": "PHASE",
          "phase": "standard-monthly-evergreen",
          "auditLogs": []
        }
      ],
      "priceOverrides": null,
      "prices": [
        {
          "planName": "standard-monthly",
          "phaseName": "standard-monthly-trial",
          "phaseType": "TRIAL",
          "fixedPrice": 0,
          "recurringPrice": null,
          "usagePrices": []
        },
        {
          "planName": "standard-monthly",
          "phaseName": "standard-monthly-evergreen",
          "phaseType": "EVERGREEN",
          "fixedPrice": null,
          "recurringPrice": 100,
          "usagePrices": []
        }
      ],
      "auditLogs": []
    }
  ],
  "timeline": {
    "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
    "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "events": [
      {
        "eventId": "3961e5a4-815c-4e95-aca6-2f3e76c37942",
        "billingPeriod": "MONTHLY",
        "effectiveDate": "2018-07-18",
        "plan": "standard-monthly",
        "product": "Standard",
        "priceList": "DEFAULT",
        "eventType": "START_ENTITLEMENT",
        "isBlockedBilling": false,
        "isBlockedEntitlement": false,
        "serviceName": "entitlement-service",
        "serviceStateName": "ENT_STARTED",
        "phase": "standard-monthly-trial",
        "auditLogs": []
      },
      {
        "eventId": "8e7a6a7d-7660-49e3-979c-a4a0b6ec6804",
        "billingPeriod": "MONTHLY",
        "effectiveDate": "2018-07-18",
        "plan": "standard-monthly",
        "product": "Standard",
        "priceList": "DEFAULT",
        "eventType": "START_BILLING",
        "isBlockedBilling": false,
        "isBlockedEntitlement": false,
        "serviceName": "billing-service",
        "serviceStateName": "START_BILLING",
        "phase": "standard-monthly-trial",
        "auditLogs": []
      },
      {
        "eventId": "f058c95f-9a86-435b-8bba-4f8532635450",
        "billingPeriod": "MONTHLY",
        "effectiveDate": "2018-08-17",
        "plan": "standard-monthly",
        "product": "Standard",
        "priceList": "DEFAULT",
        "eventType": "PHASE",
        "isBlockedBilling": false,
        "isBlockedEntitlement": false,
        "serviceName": "entitlement+billing-service",
        "serviceStateName": "PHASE",
        "phase": "standard-monthly-evergreen",
        "auditLogs": []
      }
    ],
    "auditLogs": []
  },
  "auditLogs": []
}
```
```java
class Bundle {
    org.killbill.billing.client.model.gen.Bundle@efd93c26
    accountId: 11d96ccc-9bfb-4349-8d75-0ae5a7ed8d14
    bundleId: 90ec582a-5da8-49d5-a656-c63cbc9d30fd
    externalKey: 93199
    subscriptions: [class Subscription {
        org.killbill.billing.client.model.gen.Subscription@256a98cc
        accountId: 11d96ccc-9bfb-4349-8d75-0ae5a7ed8d14
        bundleId: 90ec582a-5da8-49d5-a656-c63cbc9d30fd
        subscriptionId: 2a95b238-719f-4c2d-a63e-f1f34f11dd53
        externalKey: 93199
        startDate: 2012-04-25
        productName: Shotgun
        productCategory: BASE
        billingPeriod: MONTHLY
        phaseType: TRIAL
        priceList: DEFAULT
        planName: shotgun-monthly
        state: CANCELLED
        sourceType: NATIVE
        cancelledDate: 2012-04-25
        chargedThroughDate: 2012-04-25
        billingStartDate: 2012-04-25
        billingEndDate: 2012-04-25
        billCycleDayLocal: 25
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@a883ef63
            eventId: 18719cae-eab1-4f75-9ea7-f1e3135a3e7c
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@856f5bdf
            eventId: 81518934-4418-491b-819c-72ab7c840bd6
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@3ced19b8
            eventId: c0a8f0ce-db27-4371-81f0-74148e36663f
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: STOP_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: true
            serviceName: entitlement-service
            serviceStateName: ENT_CANCELLED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@401111f4
            eventId: 762e80db-d75e-4b67-9ccc-b816a00181b7
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: STOP_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: STOP_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }]
        priceOverrides: [class PhasePriceOverride {
            planName: shotgun-monthly
            phaseName: shotgun-monthly-trial
            phaseType: TRIAL
            fixedPrice: 0
            recurringPrice: null
            usagePriceOverrides: []
        }]
        auditLogs: []
    }]
    timeline: class BundleTimeline {
        org.killbill.billing.client.model.gen.BundleTimeline@b8eeb095
        accountId: 11d96ccc-9bfb-4349-8d75-0ae5a7ed8d14
        bundleId: 90ec582a-5da8-49d5-a656-c63cbc9d30fd
        externalKey: 93199
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@d88c1e6d
            eventId: 18719cae-eab1-4f75-9ea7-f1e3135a3e7c
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@92c880de
            eventId: 81518934-4418-491b-819c-72ab7c840bd6
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@4871bbf6
            eventId: c0a8f0ce-db27-4371-81f0-74148e36663f
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: STOP_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: true
            serviceName: entitlement-service
            serviceStateName: ENT_CANCELLED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@3be2d635
            eventId: 762e80db-d75e-4b67-9ccc-b816a00181b7
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: STOP_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: STOP_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }]
        auditLogs: []
    }
    auditLogs: []
}
```
```ruby
{
   "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
   "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
   "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
   "subscriptions":[
      {
         "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
         "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
         "subscriptionId":"e29573cc-d0e6-4d26-b97e-1a9c02d520ad",
         "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
         "startDate":"2013-08-01",
         "productName":"Sports",
         "productCategory":"BASE",
         "billingPeriod":"MONTHLY",
         "phaseType":"TRIAL",
         "priceList":"DEFAULT",
         "planName":"sports-monthly",
         "state":"ACTIVE",
         "sourceType":"NATIVE",
         "chargedThroughDate":"2013-08-01",
         "billingStartDate":"2013-08-01",
         "billCycleDayLocal":31,
         "events":[
            {
               "eventId":"e0136144-a852-4eaa-b721-c8b585dcb4a6",
               "billingPeriod":"MONTHLY",
               "effectiveDate":"2013-08-01",
               "plan":"sports-monthly",
               "product":"Sports",
               "priceList":"DEFAULT",
               "eventType":"START_ENTITLEMENT",
               "isBlockedBilling":false,
               "isBlockedEntitlement":false,
               "serviceName":"entitlement-service",
               "serviceStateName":"ENT_STARTED",
               "phase":"sports-monthly-trial",
               "auditLogs":[]
            },
            {
               "eventId":"72a51773-9e1d-4ad7-beeb-03139f60ea3d",
               "billingPeriod":"MONTHLY",
               "effectiveDate":"2013-08-01",
               "plan":"sports-monthly",
               "product":"Sports",
               "priceList":"DEFAULT",
               "eventType":"START_BILLING",
               "isBlockedBilling":false,
               "isBlockedEntitlement":false,
               "serviceName":"billing-service",
               "serviceStateName":"START_BILLING",
               "phase":"sports-monthly-trial",
               "auditLogs":[]
            },
            {
               "eventId":"341992e2-4565-4457-9d20-d2803d11aa61",
               "billingPeriod":"MONTHLY",
               "effectiveDate":"2013-08-31",
               "plan":"sports-monthly",
               "product":"Sports",
               "priceList":"DEFAULT",
               "eventType":"PHASE",
               "isBlockedBilling":false,
               "isBlockedEntitlement":false,
               "serviceName":"entitlement+billing-service",
               "serviceStateName":"PHASE",
               "phase":"sports-monthly-evergreen",
               "auditLogs":[]
            }
         ],
         "priceOverrides":[
            {
               "planName":"sports-monthly",
               "phaseName":"sports-monthly-trial",
               "phaseType":"TRIAL",
               "fixedPrice":0
            },
            {
               "planName":"sports-monthly",
               "phaseName":"sports-monthly-evergreen",
               "phaseType":"EVERGREEN",
               "recurringPrice":500.0
            }
         ],
         "auditLogs":[]
      }
   ],
   "timeline":{
      "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
      "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
      "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
      "events":[
         {
            "eventId":"e0136144-a852-4eaa-b721-c8b585dcb4a6",
            "billingPeriod":"MONTHLY",
            "effectiveDate":"2013-08-01",
            "plan":"sports-monthly",
            "product":"Sports",
            "priceList":"DEFAULT",
            "eventType":"START_ENTITLEMENT",
            "isBlockedBilling":false,
            "isBlockedEntitlement":false,
            "serviceName":"entitlement-service",
            "serviceStateName":"ENT_STARTED",
            "phase":"sports-monthly-trial",
            "auditLogs":[]
         },
         {
            "eventId":"72a51773-9e1d-4ad7-beeb-03139f60ea3d",
            "billingPeriod":"MONTHLY",
            "effectiveDate":"2013-08-01",
            "plan":"sports-monthly",
            "product":"Sports",
            "priceList":"DEFAULT",
            "eventType":"START_BILLING",
            "isBlockedBilling":false,
            "isBlockedEntitlement":false,
            "serviceName":"billing-service",
            "serviceStateName":"START_BILLING",
            "phase":"sports-monthly-trial",
            "auditLogs":[]
         },
         {
            "eventId":"341992e2-4565-4457-9d20-d2803d11aa61",
            "billingPeriod":"MONTHLY",
            "effectiveDate":"2013-08-31",
            "plan":"sports-monthly",
            "product":"Sports",
            "priceList":"DEFAULT",
            "eventType":"PHASE",
            "isBlockedBilling":false,
            "isBlockedEntitlement":false,
            "serviceName":"entitlement+billing-service",
            "serviceStateName":"PHASE",
            "phase":"sports-monthly-evergreen",
            "auditLogs":[]
         }
      ],
      "auditLogs":[]
   },
   "auditLogs":[]
}
```
```python
{'account_id': '8ef95bea-9306-4b26-a43c-090de8779599',
 'audit_logs': [],
 'bundle_id': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
 'external_key': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
 'subscriptions': [{'account_id': '8ef95bea-9306-4b26-a43c-090de8779599',
                    'audit_logs': [],
                    'bill_cycle_day_local': 6,
                    'billing_end_date': None,
                    'billing_period': 'MONTHLY',
                    'billing_start_date': datetime.date(2018, 5, 7),
                    'bundle_id': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
                    'cancelled_date': None,
                    'charged_through_date': None,
                    'events': [{'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 5, 7),
                                'event_id': '80ca6915-0293-4b1d-8bc6-b3c9fe1bee03',
                                'event_type': 'START_ENTITLEMENT',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-trial',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'entitlement-service',
                                'service_state_name': 'ENT_STARTED'},
                               {'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 5, 7),
                                'event_id': 'ce26b570-0a9f-463e-b65c-96a9fd67f124',
                                'event_type': 'START_BILLING',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-trial',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'billing-service',
                                'service_state_name': 'START_BILLING'},
                               {'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 6, 6),
                                'event_id': 'c7af9fa3-5465-4e69-8a84-6977c711921c',
                                'event_type': 'PHASE',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-evergreen',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'entitlement+billing-service',
                                'service_state_name': 'PHASE'}],
                    'external_key': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
                    'phase_type': 'TRIAL',
                    'plan_name': 'standard-monthly',
                    'price_list': 'DEFAULT',
                    'price_overrides': [{'fixed_price': 0.0,
                                         'phase_name': 'standard-monthly-trial',
                                         'phase_type': 'TRIAL',
                                         'plan_name': 'standard-monthly',
                                         'recurring_price': None,
                                         'usage_price_overrides': []},
                                        {'fixed_price': None,
                                         'phase_name': 'standard-monthly-evergreen',
                                         'phase_type': 'EVERGREEN',
                                         'plan_name': 'standard-monthly',
                                         'recurring_price': 100.0,
                                         'usage_price_overrides': []}],
                    'product_category': 'BASE',
                    'product_name': 'Standard',
                    'source_type': 'NATIVE',
                    'start_date': datetime.date(2018, 5, 7),
                    'state': 'ACTIVE',
                    'subscription_id': '6f6cab9d-dfe0-4b89-9a09-b16055f72f5c'}],
 'timeline': {'account_id': '8ef95bea-9306-4b26-a43c-090de8779599',
              'audit_logs': [],
              'bundle_id': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
              'events': [{'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 5, 7),
                          'event_id': '80ca6915-0293-4b1d-8bc6-b3c9fe1bee03',
                          'event_type': 'START_ENTITLEMENT',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-trial',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'entitlement-service',
                          'service_state_name': 'ENT_STARTED'},
                         {'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 5, 7),
                          'event_id': 'ce26b570-0a9f-463e-b65c-96a9fd67f124',
                          'event_type': 'START_BILLING',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-trial',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'billing-service',
                          'service_state_name': 'START_BILLING'},
                         {'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 6, 6),
                          'event_id': 'c7af9fa3-5465-4e69-8a84-6977c711921c',
                          'event_type': 'PHASE',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-evergreen',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'entitlement+billing-service',
                          'service_state_name': 'PHASE'}],
              'external_key': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'}}
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- |
| **audit** | string | no | "NONE" | Level of audit information to return: "NONE", "MINIMAL" (only inserts), or "FULL" |


**Response**

If successful, returns a status code of 200 and a bundle resource object.

### Retrieve a bundle by external key

This API retrieves a bundle resource object based on its external key 

**HTTP Request** 

Retrieves the details information for the `Bundle` using its `externalKey`.

`GET http://127.0.0.1:8080/1.0/kb/bundles?externalKey=<external_key>`

> Example Request:

```shell
curl -v \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Accept: application/json" \
    "http://127.0.0.1:8080/1.0/kb/bundles?externalKey=2cd2f4b5-a1c0-42a7-924f-64c7b791332d"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

String externalKey = "93199";
Boolean includedDeleted = false; // Will not include deleted bundles

Bundles bundles = bundleApi.getBundleByKey(externalKey, 
                                           includedDeleted,
                                           AuditLevel.NONE,
                                           requestOptions);
```

```ruby
external_key = '4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135'
included_deleted = false

bundle = KillBillClient::Model::Bundle.new
bundle.find_by_external_key(external_key, 
                            included_deleted, 
                            options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_external_key = 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'

bundleApi.get_bundle_by_key(bundle_external_key, api_key, api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 200 OK
< Content-Type: application/json

[
  {
    "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
    "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "subscriptions": [
      {
        "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
        "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
        "subscriptionId": "8ab101b6-15e8-433b-b4f7-f99eeaa56a77",
        "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
        "startDate": "2018-07-18",
        "productName": "Standard",
        "productCategory": "BASE",
        "billingPeriod": "MONTHLY",
        "phaseType": "TRIAL",
        "priceList": "DEFAULT",
        "planName": "standard-monthly",
        "state": "ACTIVE",
        "sourceType": "NATIVE",
        "cancelledDate": null,
        "chargedThroughDate": null,
        "billingStartDate": "2018-07-18",
        "billingEndDate": null,
        "billCycleDayLocal": 17,
        "events": [
          {
            "eventId": "3961e5a4-815c-4e95-aca6-2f3e76c37942",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-18",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "START_ENTITLEMENT",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "entitlement-service",
            "serviceStateName": "ENT_STARTED",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "8e7a6a7d-7660-49e3-979c-a4a0b6ec6804",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-18",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "START_BILLING",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "billing-service",
            "serviceStateName": "START_BILLING",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "f058c95f-9a86-435b-8bba-4f8532635450",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-08-17",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "PHASE",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "entitlement+billing-service",
            "serviceStateName": "PHASE",
            "phase": "standard-monthly-evergreen",
            "auditLogs": []
          }
        ],
        "priceOverrides": null,
        "prices": [
          {
            "planName": "standard-monthly",
            "phaseName": "standard-monthly-trial",
            "phaseType": "TRIAL",
            "fixedPrice": 0,
            "recurringPrice": null,
            "usagePrices": []
          },
          {
            "planName": "standard-monthly",
            "phaseName": "standard-monthly-evergreen",
            "phaseType": "EVERGREEN",
            "fixedPrice": null,
            "recurringPrice": 100,
            "usagePrices": []
          }
        ],
        "auditLogs": []
      }
    ],
    "timeline": {
      "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
      "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
      "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
      "events": [
        {
          "eventId": "3961e5a4-815c-4e95-aca6-2f3e76c37942",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-18",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_ENTITLEMENT",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "entitlement-service",
          "serviceStateName": "ENT_STARTED",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "8e7a6a7d-7660-49e3-979c-a4a0b6ec6804",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-18",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_BILLING",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "billing-service",
          "serviceStateName": "START_BILLING",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "f058c95f-9a86-435b-8bba-4f8532635450",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-08-17",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "PHASE",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "entitlement+billing-service",
          "serviceStateName": "PHASE",
          "phase": "standard-monthly-evergreen",
          "auditLogs": []
        }
      ],
      "auditLogs": []
    },
    "auditLogs": []
  }
]
```
```java
class Bundle {
    org.killbill.billing.client.model.gen.Bundle@2b6e1c9d
    accountId: a7c0b70d-fbc3-43cf-98e7-0af57c1a93fb
    bundleId: 4a2fcd90-7c8c-4877-93f9-9e99e8cd6953
    externalKey: 93199
    subscriptions: [class Subscription {
        org.killbill.billing.client.model.gen.Subscription@22dc8662
        accountId: a7c0b70d-fbc3-43cf-98e7-0af57c1a93fb
        bundleId: 4a2fcd90-7c8c-4877-93f9-9e99e8cd6953
        subscriptionId: 9a55b6f3-ada7-4a78-915f-373af56cbb00
        externalKey: 93199
        startDate: 2012-04-25
        productName: Shotgun
        productCategory: BASE
        billingPeriod: MONTHLY
        phaseType: TRIAL
        priceList: DEFAULT
        planName: shotgun-monthly
        state: ACTIVE
        sourceType: NATIVE
        cancelledDate: null
        chargedThroughDate: 2012-04-25
        billingStartDate: 2012-04-25
        billingEndDate: null
        billCycleDayLocal: 25
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@ebe2ab4a
            eventId: 37b7e919-08ba-4c7d-a902-8d7a10b47157
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@9e770028
            eventId: 2a994af7-8faf-444f-a1df-fd6c68a9dbab
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@54e085c2
            eventId: 95ddcc14-ea6d-4a5c-b057-3a0d33341ab9
            billingPeriod: MONTHLY
            effectiveDate: 2012-05-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: PHASE
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement+billing-service
            serviceStateName: PHASE
            phase: shotgun-monthly-evergreen
            auditLogs: []
        }]
        priceOverrides: [class PhasePriceOverride {
            planName: shotgun-monthly
            phaseName: shotgun-monthly-trial
            phaseType: TRIAL
            fixedPrice: 0
            recurringPrice: null
            usagePriceOverrides: []
        }, class PhasePriceOverride {
            planName: shotgun-monthly
            phaseName: shotgun-monthly-evergreen
            phaseType: EVERGREEN
            fixedPrice: null
            recurringPrice: 249.95
            usagePriceOverrides: []
        }]
        auditLogs: []
    }]
    timeline: class BundleTimeline {
        org.killbill.billing.client.model.gen.BundleTimeline@7ea930a8
        accountId: a7c0b70d-fbc3-43cf-98e7-0af57c1a93fb
        bundleId: 4a2fcd90-7c8c-4877-93f9-9e99e8cd6953
        externalKey: 93199
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@89e50f83
            eventId: 37b7e919-08ba-4c7d-a902-8d7a10b47157
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@cb989fa0
            eventId: 2a994af7-8faf-444f-a1df-fd6c68a9dbab
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@5fe74ae5
            eventId: 95ddcc14-ea6d-4a5c-b057-3a0d33341ab9
            billingPeriod: MONTHLY
            effectiveDate: 2012-05-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: PHASE
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement+billing-service
            serviceStateName: PHASE
            phase: shotgun-monthly-evergreen
            auditLogs: []
        }]
        auditLogs: []
    }
    auditLogs: []
}
```
```ruby
{
   "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
   "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
   "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
   "subscriptions":[
      {
         "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
         "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
         "subscriptionId":"e29573cc-d0e6-4d26-b97e-1a9c02d520ad",
         "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
         "startDate":"2013-08-01",
         "productName":"Sports",
         "productCategory":"BASE",
         "billingPeriod":"MONTHLY",
         "phaseType":"TRIAL",
         "priceList":"DEFAULT",
         "planName":"sports-monthly",
         "state":"ACTIVE",
         "sourceType":"NATIVE",
         "chargedThroughDate":"2013-08-01",
         "billingStartDate":"2013-08-01",
         "billCycleDayLocal":31,
         "events":[
            {
               "eventId":"e0136144-a852-4eaa-b721-c8b585dcb4a6",
               "billingPeriod":"MONTHLY",
               "effectiveDate":"2013-08-01",
               "plan":"sports-monthly",
               "product":"Sports",
               "priceList":"DEFAULT",
               "eventType":"START_ENTITLEMENT",
               "isBlockedBilling":false,
               "isBlockedEntitlement":false,
               "serviceName":"entitlement-service",
               "serviceStateName":"ENT_STARTED",
               "phase":"sports-monthly-trial",
               "auditLogs":[]
            },
            {
               "eventId":"72a51773-9e1d-4ad7-beeb-03139f60ea3d",
               "billingPeriod":"MONTHLY",
               "effectiveDate":"2013-08-01",
               "plan":"sports-monthly",
               "product":"Sports",
               "priceList":"DEFAULT",
               "eventType":"START_BILLING",
               "isBlockedBilling":false,
               "isBlockedEntitlement":false,
               "serviceName":"billing-service",
               "serviceStateName":"START_BILLING",
               "phase":"sports-monthly-trial",
               "auditLogs":[]
            },
            {
               "eventId":"341992e2-4565-4457-9d20-d2803d11aa61",
               "billingPeriod":"MONTHLY",
               "effectiveDate":"2013-08-31",
               "plan":"sports-monthly",
               "product":"Sports",
               "priceList":"DEFAULT",
               "eventType":"PHASE",
               "isBlockedBilling":false,
               "isBlockedEntitlement":false,
               "serviceName":"entitlement+billing-service",
               "serviceStateName":"PHASE",
               "phase":"sports-monthly-evergreen",
               "auditLogs":[]
            }
         ],
         "priceOverrides":[
            {
               "planName":"sports-monthly",
               "phaseName":"sports-monthly-trial",
               "phaseType":"TRIAL",
               "fixedPrice":0
            },
            {
               "planName":"sports-monthly",
               "phaseName":"sports-monthly-evergreen",
               "phaseType":"EVERGREEN",
               "recurringPrice":500.0
            }
         ],
         "auditLogs":[]
      }
   ],
   "timeline":{
      "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
      "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
      "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
      "events":[
         {
            "eventId":"e0136144-a852-4eaa-b721-c8b585dcb4a6",
            "billingPeriod":"MONTHLY",
            "effectiveDate":"2013-08-01",
            "plan":"sports-monthly",
            "product":"Sports",
            "priceList":"DEFAULT",
            "eventType":"START_ENTITLEMENT",
            "isBlockedBilling":false,
            "isBlockedEntitlement":false,
            "serviceName":"entitlement-service",
            "serviceStateName":"ENT_STARTED",
            "phase":"sports-monthly-trial",
            "auditLogs":[]
         },
         {
            "eventId":"72a51773-9e1d-4ad7-beeb-03139f60ea3d",
            "billingPeriod":"MONTHLY",
            "effectiveDate":"2013-08-01",
            "plan":"sports-monthly",
            "product":"Sports",
            "priceList":"DEFAULT",
            "eventType":"START_BILLING",
            "isBlockedBilling":false,
            "isBlockedEntitlement":false,
            "serviceName":"billing-service",
            "serviceStateName":"START_BILLING",
            "phase":"sports-monthly-trial",
            "auditLogs":[]
         },
         {
            "eventId":"341992e2-4565-4457-9d20-d2803d11aa61",
            "billingPeriod":"MONTHLY",
            "effectiveDate":"2013-08-31",
            "plan":"sports-monthly",
            "product":"Sports",
            "priceList":"DEFAULT",
            "eventType":"PHASE",
            "isBlockedBilling":false,
            "isBlockedEntitlement":false,
            "serviceName":"entitlement+billing-service",
            "serviceStateName":"PHASE",
            "phase":"sports-monthly-evergreen",
            "auditLogs":[]
         }
      ],
      "auditLogs":[]
   },
   "auditLogs":[]
}
```
```python
{'account_id': '8ef95bea-9306-4b26-a43c-090de8779599',
 'audit_logs': [],
 'bundle_id': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
 'external_key': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
 'subscriptions': [{'account_id': '8ef95bea-9306-4b26-a43c-090de8779599',
                    'audit_logs': [],
                    'bill_cycle_day_local': 6,
                    'billing_end_date': None,
                    'billing_period': 'MONTHLY',
                    'billing_start_date': datetime.date(2018, 5, 7),
                    'bundle_id': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
                    'cancelled_date': None,
                    'charged_through_date': None,
                    'events': [{'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 5, 7),
                                'event_id': '80ca6915-0293-4b1d-8bc6-b3c9fe1bee03',
                                'event_type': 'START_ENTITLEMENT',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-trial',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'entitlement-service',
                                'service_state_name': 'ENT_STARTED'},
                               {'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 5, 7),
                                'event_id': 'ce26b570-0a9f-463e-b65c-96a9fd67f124',
                                'event_type': 'START_BILLING',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-trial',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'billing-service',
                                'service_state_name': 'START_BILLING'},
                               {'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 6, 6),
                                'event_id': 'c7af9fa3-5465-4e69-8a84-6977c711921c',
                                'event_type': 'PHASE',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-evergreen',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'entitlement+billing-service',
                                'service_state_name': 'PHASE'}],
                    'external_key': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
                    'phase_type': 'TRIAL',
                    'plan_name': 'standard-monthly',
                    'price_list': 'DEFAULT',
                    'price_overrides': [{'fixed_price': 0.0,
                                         'phase_name': 'standard-monthly-trial',
                                         'phase_type': 'TRIAL',
                                         'plan_name': 'standard-monthly',
                                         'recurring_price': None,
                                         'usage_price_overrides': []},
                                        {'fixed_price': None,
                                         'phase_name': 'standard-monthly-evergreen',
                                         'phase_type': 'EVERGREEN',
                                         'plan_name': 'standard-monthly',
                                         'recurring_price': 100.0,
                                         'usage_price_overrides': []}],
                    'product_category': 'BASE',
                    'product_name': 'Standard',
                    'source_type': 'NATIVE',
                    'start_date': datetime.date(2018, 5, 7),
                    'state': 'ACTIVE',
                    'subscription_id': '6f6cab9d-dfe0-4b89-9a09-b16055f72f5c'}],
 'timeline': {'account_id': '8ef95bea-9306-4b26-a43c-090de8779599',
              'audit_logs': [],
              'bundle_id': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691',
              'events': [{'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 5, 7),
                          'event_id': '80ca6915-0293-4b1d-8bc6-b3c9fe1bee03',
                          'event_type': 'START_ENTITLEMENT',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-trial',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'entitlement-service',
                          'service_state_name': 'ENT_STARTED'},
                         {'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 5, 7),
                          'event_id': 'ce26b570-0a9f-463e-b65c-96a9fd67f124',
                          'event_type': 'START_BILLING',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-trial',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'billing-service',
                          'service_state_name': 'START_BILLING'},
                         {'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 6, 6),
                          'event_id': 'c7af9fa3-5465-4e69-8a84-6977c711921c',
                          'event_type': 'PHASE',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-evergreen',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'entitlement+billing-service',
                          'service_state_name': 'PHASE'}],
              'external_key': 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'}}
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- |
| **externalKey** | String | yes | none | The subscription external key |
| **audit** | string | no | "NONE" | Level of audit information to return: "NONE", "MINIMAL" (only inserts), or "FULL" |

**Response**

If successful, returns a status code of 200 and a bundle resource object.



### Update a bundle external key

THis API sets a new external key for a bundle


**HTTP Request** 

`PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/renameKey`

> Example Request:

```shell
curl -v \
    -X PUT \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    -d '{ "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d", "externalKey": "another_external_key"}' \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/renameKey"
```
```java
String externalKey = "another_external_key";
Bundle bundle = new Bundle();
bundle.setExternalKey(externalKey);
bundleApi.renameExternalKey(bundleId, bundle, requestOptions);
```
```ruby
bundle = KillBillClient::Model::Bundle.new
bundle.bundle_id = bundle_id
bundle.external_key = "new_external_key"

bundle.rename_external_key(user, 
                           reason, 
                           comment, 
                           options)
```

```python
bundleApi = killbill.api.BundleApi()
body = Bundle(bundle_id=bundle_id, 
              external_key='new_external_key')

bundleApi.rename_external_key(bundle_id,
                              body,
                              created_by,
                              api_key,
                              api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 204 No Content
< Content-Type: application/json
```
```java
no content
```
```ruby
no content
```
```python
no content
```

**Request Body**

A bundle resource containing the new external key

**Query Parameters**

None.

**Response**

If successful, returns a status code of 204 and an empty body.


## Transfer

Transfer a bundle to another account.

### Transfer a bundle to another account

This API "transfers" a bundle to another existing account. This is carried out as follows:

1. A new bundle is created in the destination account. The new bundle is assigned a new id but receives the same external key from the original bundle.

2. All subscriptions in the original bundle are copied to the new bundle. The **sourceType** of these subscriptions is set to TRANSFERRED.

3. All subscriptions in the original bundle are marked cancelled as of the transfer date but are not deleted. Billing is terminated on the transfer date or later according to the billing policy.

4. The subscriptions in the new bundle are assigned a start date as of the time of transfer, and inherit all of the terms and remaining dates from the original subscription.

**HTTP Request** 

`POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}`

> Example Request:

```shell
curl -v \
    -X POST \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    -d '{ "accountId": "8785164f-b5d7-4da1-9495-33f5105e8d80", "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d"}' \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d"
```
```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("b84a8af9-73d4-4749-8d81-38dbcc2d7fb1");
UUID accountId = UUID.fromString("d82d3638-fca7-4c16-9e68-8f8db75997cc");

Bundle bundle = new Bundle();
bundle.setAccountId(accountId);
bundle.setBundleId(bundleId);

LocalDate requestedDate = null;
ImmutableMap<String, String> NULL_PLUGIN_PROPERTIES = null;
BillingActionPolicy billingPolicy = null;

Bundle result = bundleApi.transferBundle(bundleId, 
                                         bundle, 
                                         requestedDate, 
                                         billingPolicy,
                                         NULL_PLUGIN_PROPERTIES, 
                                         requestOptions);
```

```ruby
requested_date = "2013-08-01"
billing_policy = "END_OF_TERM"

bundle = KillBillClient::Model::Bundle.new
bundle.account_id = new_account_id
bundle.bundle_id = bundle_id

bundle.transfer(requested_date, 
                billing_policy, 
                user, 
                reason, 
                comment, 
                options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'
new_account_id = '71499886-296d-4b0f-8b76-0eed352d8801'
body = Bundle(bundle_id=bundle_id, account_id=new_account_id)

bundleApi.transfer_bundle(bundle_id, 
                          body, 
                          created_by, 
                          api_key, 
                          api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 201 Created
< Location: http://localhost:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d?billingPolicy=END_OF_TERM
< Content-Type: application/json
< Content-Length: 0
```
```java
class Bundle {
    org.killbill.billing.client.model.gen.Bundle@222591c5
    accountId: d82d3638-fca7-4c16-9e68-8f8db75997cc
    bundleId: b84a8af9-73d4-4749-8d81-38dbcc2d7fb1
    externalKey: 93199
    subscriptions: [class Subscription {
        org.killbill.billing.client.model.gen.Subscription@a668d933
        accountId: d82d3638-fca7-4c16-9e68-8f8db75997cc
        bundleId: b84a8af9-73d4-4749-8d81-38dbcc2d7fb1
        subscriptionId: 373e7cce-0558-4c31-98af-aab54b67c4a6
        externalKey: 93199
        startDate: 2012-04-25
        productName: Shotgun
        productCategory: BASE
        billingPeriod: MONTHLY
        phaseType: TRIAL
        priceList: DEFAULT
        planName: shotgun-monthly
        state: ACTIVE
        sourceType: TRANSFERRED
        cancelledDate: null
        chargedThroughDate: null
        billingStartDate: 2012-04-25
        billingEndDate: null
        billCycleDayLocal: 25
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@1e1bbe63
            eventId: 1779fcae-a6ca-43dd-9429-85f946fa4055
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@54887921
            eventId: b242eda1-dc26-4875-b92c-a99c76084a06
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@5652e31d
            eventId: 5b59caa3-d996-4c9c-afc1-cc932e5a0ff8
            billingPeriod: MONTHLY
            effectiveDate: 2012-05-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: PHASE
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement+billing-service
            serviceStateName: PHASE
            phase: shotgun-monthly-evergreen
            auditLogs: []
        }]
        priceOverrides: [class PhasePriceOverride {
            planName: shotgun-monthly
            phaseName: shotgun-monthly-trial
            phaseType: TRIAL
            fixedPrice: 0
            recurringPrice: null
            usagePriceOverrides: []
        }, class PhasePriceOverride {
            planName: shotgun-monthly
            phaseName: shotgun-monthly-evergreen
            phaseType: EVERGREEN
            fixedPrice: null
            recurringPrice: 249.95
            usagePriceOverrides: []
        }]
        auditLogs: []
    }]
    timeline: class BundleTimeline {
        org.killbill.billing.client.model.gen.BundleTimeline@8ad5adda
        accountId: d82d3638-fca7-4c16-9e68-8f8db75997cc
        bundleId: b84a8af9-73d4-4749-8d81-38dbcc2d7fb1
        externalKey: 93199
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@49f9e293
            eventId: 1779fcae-a6ca-43dd-9429-85f946fa4055
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@55e764b4
            eventId: b242eda1-dc26-4875-b92c-a99c76084a06
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@16aec25d
            eventId: 5b59caa3-d996-4c9c-afc1-cc932e5a0ff8
            billingPeriod: MONTHLY
            effectiveDate: 2012-05-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: PHASE
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement+billing-service
            serviceStateName: PHASE
            phase: shotgun-monthly-evergreen
            auditLogs: []
        }]
        auditLogs: []
    }
    auditLogs: []
}
```
```ruby
{
   "accountId":"71499886-296d-4b0f-8b76-0eed352d8801",
   "bundleId":"cff04ff5-19ba-4bdc-8aca-ed486d4b845c",
   "externalKey":"25f2de6b-2443-4d7c-8487-22bf6df5a5ec-73709",
   "subscriptions":[
      {
         "accountId":"71499886-296d-4b0f-8b76-0eed352d8801",
         "bundleId":"cff04ff5-19ba-4bdc-8aca-ed486d4b845c",
         "subscriptionId":"46e6fcdc-9f63-4ffc-a091-0cde70f964f0",
         "externalKey":"25f2de6b-2443-4d7c-8487-22bf6df5a5ec-73709",
         "startDate":"2013-09-01",
         "productName":"Sports",
         "productCategory":"BASE",
         "billingPeriod":"MONTHLY",
         "phaseType":"EVERGREEN",
         "priceList":"DEFAULT",
         "planName":"sports-monthly",
         "state":"ACTIVE",
         "sourceType":"TRANSFERRED",
         "billingStartDate":"2013-09-01",
         "billCycleDayLocal":1,
         "events":[
            {
               "eventId":"605c5696-4046-4597-8a67-7e50d26856cd",
               "billingPeriod":"MONTHLY",
               "effectiveDate":"2013-09-01",
               "plan":"sports-monthly",
               "product":"Sports",
               "priceList":"DEFAULT",
               "eventType":"START_ENTITLEMENT",
               "isBlockedBilling":false,
               "isBlockedEntitlement":false,
               "serviceName":"entitlement-service",
               "serviceStateName":"ENT_STARTED",
               "phase":"sports-monthly-evergreen",
               "auditLogs":[]
            },
            {
               "eventId":"fbc53e69-0683-4904-bc77-5d244b9ad1c9",
               "billingPeriod":"MONTHLY",
               "effectiveDate":"2013-09-01",
               "plan":"sports-monthly",
               "product":"Sports",
               "priceList":"DEFAULT",
               "eventType":"START_BILLING",
               "isBlockedBilling":false,
               "isBlockedEntitlement":false,
               "serviceName":"billing-service",
               "serviceStateName":"START_BILLING",
               "phase":"sports-monthly-evergreen",
               "auditLogs":[]
            }
         ],
         "priceOverrides":[
            {
               "planName":"sports-monthly",
               "phaseName":"sports-monthly-evergreen",
               "phaseType":"EVERGREEN",
               "recurringPrice":500.0
            }
         ],
         "auditLogs":[]
      }
   ],
   "timeline":{
      "accountId":"71499886-296d-4b0f-8b76-0eed352d8801",
      "bundleId":"cff04ff5-19ba-4bdc-8aca-ed486d4b845c",
      "externalKey":"25f2de6b-2443-4d7c-8487-22bf6df5a5ec-73709",
      "events":[
         {
            "eventId":"605c5696-4046-4597-8a67-7e50d26856cd",
            "billingPeriod":"MONTHLY",
            "effectiveDate":"2013-09-01",
            "plan":"sports-monthly",
            "product":"Sports",
            "priceList":"DEFAULT",
            "eventType":"START_ENTITLEMENT",
            "isBlockedBilling":false,
            "isBlockedEntitlement":false,
            "serviceName":"entitlement-service",
            "serviceStateName":"ENT_STARTED",
            "phase":"sports-monthly-evergreen",
            "auditLogs":[]
         },
         {
            "eventId":"fbc53e69-0683-4904-bc77-5d244b9ad1c9",
            "billingPeriod":"MONTHLY",
            "effectiveDate":"2013-09-01",
            "plan":"sports-monthly",
            "product":"Sports",
            "priceList":"DEFAULT",
            "eventType":"START_BILLING",
            "isBlockedBilling":false,
            "isBlockedEntitlement":false,
            "serviceName":"billing-service",
            "serviceStateName":"START_BILLING",
            "phase":"sports-monthly-evergreen",
            "auditLogs":[]
         }
      ],
      "auditLogs":[]
   },
   "auditLogs":[]
}
```
```python
no content
```

**Request Body**

A bundle resource containing at least the new account id

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- |
| **requestedDate** | string | no | current date | Requested date for the transfer of the bundle |
| **billingPolicy** | string | no | IMMEDIATE | When billing should occur. Possible values are END_OF_TERM or IMMEDIATE. Shows Unexpected billing policy in case of START_OF_TERM and defaults to END_OF_TERM in case left blank  |

**Response**

If successful, returns a status code of 201. In addition, a Location header containing the bundleId in the target account is returned. 


## Blocking State

See section [Account Blocking State](#account-blocking-state) for an introduction.

### Pause a bundle

Provides a simple interface to pause both billing and entitlement for all subscriptions in a bundle. The **state** attribute in the bundle resource is set to ENT_BLOCKED.

**HTTP Request** 

`PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/pause`

> Example Request:

```shell
  curl -X PUT \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/pause" \
```
```java
UUID bundleId = UUID.fromString("96a2ba35-de50-4db9-98bb-938cf1e5f616");
LoalDate requestedDate = null;
Map<String, String> pluginProperty = null;
bundleApi.pauseBundle(bundleId, requestedDate, pluginProperty, requestOptions);
```
```ruby
bundle = KillBillClient::Model::Bundle.new
bundle.bundle_id = bundle_id
requested_date = "2013-08-01"

bundle.pause(requested_date, 
             user, 
             reason, 
             comment, 
             options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = 'ce967207-851c-4040-bfbd-74a8924f9b8a'

bundleApi.pause_bundle(bundle_id, 
                       created_by, 
                       api_key, 
                       api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 204 No Content
< Content-Type: application/json
```
```java
no content
```
```ruby
no content
```
```python
no content
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- |
| **requestedDate** | string | no | current date | requested date for pausing |

**Response**

If successful, returns a status code of 204 and an empty body.

### Resume a bundle

Provides a simple interface to resume both billing and entitlement for all subscriptions in the bundle. The state of the bundle resource is set to ENT_CLEAR.

**HTTP Request** 

`PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/resume`

> Example Request:

```shell
curl -v \
    -X PUT \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/resume"
```
```java
UUID bundleId = UUID.fromString("96a2ba35-de50-4db9-98bb-938cf1e5f616");
LocalDate requestedDate = null;
Map<String, String> pluginProperty = null;
bundleApi.resumeBundle(bundleId, requestedDate, pluginProperty, requestOptions);	
```
```ruby
bundle = KillBillClient::Model::Bundle.new
bundle.bundle_id = bundle_id
requested_date = "2013-08-01"

bundle.resume(requested_date, 
              user, 
              reason, 
              comment, 
              options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = 'ce967207-851c-4040-bfbd-74a8924f9b8a'

bundleApi.resume_bundle(bundle_id, 
                        created_by, 
                        api_key, 
                        api_secret)
```
> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 204 No Content
< Content-Type: application/json
```
```java
no content
```
```ruby
no content
```
```python
no content
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- |
| **requestedDate** | string | no | current date | requested date to resume |

**Response**

If successful, returns a status code of 204 and an empty body.

### Block a bundle

Provides a low level interface to add a `BlockingState` event for this bundle. Note that the previous [pause](#bundle-pause-a-bundle) and [resume](#bundle-resume-a-bundle) operations can be achieved using this API.


**HTTP Request** 

`POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/block`

> Example Request:

```shell
curl -v \
    -X POST \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    -d '{ "stateName": "STATE1", "service": "ServiceStateService", "isBlockChange": false, "isBlockEntitlement": false, "isBlockBilling": false, "effectiveDate": "2018-07-17T21:17:28.842Z", "type": "SUBSCRIPTION" }' \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/block"
```
```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("b84a8af9-73d4-4749-8d81-38dbcc2d7fb1");

String stateName = "block";
String service = "service";
Boolean isBlockChange = false;
Boolean isBlockEntitlement = true;
Boolean isBlockBilling = true;
DateTime effectiveDate = null;
List<AuditLog> auditLogs = null;

BlockingState blockingState = new BlockingState(bundleId, 
                                                stateName, 
                                                service, 
                                                isBlockChange, 
                                                isBlockEntitlement, 
                                                isBlockBilling, 
                                                effectiveDate, 
                                                BlockingStateType.SUBSCRIPTION_BUNDLE, 
                                                auditLogs);

LocalDate requestedDate = clock.getToday(DateTimeZone.forID(account.getTimeZone()));
Map<String, String> pluginProperty = ImmutableMap.<String, String>of();

bundleApi.addBundleBlockingState(bundleId, 
                                 blockingState, 
                                 requestedDate, 
                                 pluginProperty, 
                                 requestOptions);
```

```ruby
state_name = "STATE1"
service = "ServiceStateService"
block_change = false
block_entitlement = false
block_billing = false
requested_date = "2013-08-01"

bundle.set_blocking_state(state_name,
                          service,
                          block_change, 
                          block_entitlement,
                          block_billing, 
                          requested_date,
                          user, 
                          reason, 
                          comment,
                          options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = 'a760fdc8-1e2d-4020-918a-6e4f7a9cd691'
body = BlockingState(state_name='STATE1', 
                     service='ServiceStateService', 
                     is_block_change=False, 
                     is_block_entitlement=False, 
                     is_block_billing=False)

bundleApi.add_bundle_blocking_state(bundle_id,
                                    body,
                                    created_by,
                                    api_key,
                                    api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 201 Created
< Location: http://localhost:8080/1.0/kb/accounts/2ad52f53-85ae-408a-9879-32a7e59dd03d/block?blockingStateTypes=SUBSCRIPTION_BUNDLE
< Content-Type: application/json
< Content-Length: 0
```
```java
no content
```
```ruby
no content
```
```python
no content
```
**Request Body**

A blocking state resource representing the intended new blocking state. For example,

    {
      "blockedId": "943c4fd0-9000-4975-a3a8-09712223e1f8",  
      "stateName": "STATE1",  
      "service": "ServiceStateService",  
      "isBlockChange": false,  
      "isBlockEntitlement": false,  
      "isBlockBilling": true,
      "effectiveDate": "2020-07-18T18:22:30.376Z",
      "type": "SUBSCRIPTION_BUNDLE"
    }

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- |
| **requestedDate** | string | no | immediate | requested date for blocking |

**Response**

If successful, returns a status code of 201 and an empty body.

## Custom Fields

`Custom fields` are `{key, value}` attributes that can be attached to any customer resources. For more on custom fields see [Custom Fields](#custom-fields). These endpoints manage custom fields associated with `Bundle` objects.

### Add custom fields to bundle

Adds one or more custom fields to a subscription object. Existing custom fields are not disturbed.


**HTTP Request** 

`POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields`

> Example Request:

```shell
curl -v \
    -X POST \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    -d '[ { "objectType": "BUNDLE", "name": "Test Custom Field", "value": "demo_test_value" }]' \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("b84a8af9-73d4-4749-8d81-38dbcc2d7fb1");
final ImmutableList<AuditLog> EMPTY_AUDIT_LOGS = ImmutableList.<AuditLog>of();

CustomFields customFields = new CustomFields();
customFields.add(new CustomField(null, 
                                 bundleId, 
                                 ObjectType.BUNDLE, 
                                 "Test Custom Field", 
                                 "test_value", 
                                 EMPTY_AUDIT_LOGS));

bundleApi.createBundleCustomFields(bundleId, 
                                   customFields, 
                                   requestOptions);
```

```ruby
custom_field = KillBillClient::Model::CustomFieldAttributes.new
custom_field.object_type = 'BUNDLE'
custom_field.name = 'Test Custom Field'
custom_field.value = 'test_value'

bundle.add_custom_field(custom_field, 
                        user,
                        reason,
                        comment,
                        options)
```

```python
bundleApi = killbill.api.BundleApi()
body = CustomField(name='Test Custom Field', value='test_value')

bundleApi.create_bundle_custom_fields(bundle_id,
                                      [body],
                                      created_by,
                                      api_key,
                                      api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 201 Created
< Location: http://localhost:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields
< Content-Type: application/json
< Content-Length: 0
```
```java
//First element of the list
class CustomField {
    org.killbill.billing.client.model.gen.CustomField@c7d0c38a
    customFieldId: null
    objectId: 59860a0d-c032-456d-a35e-3a48fe8579e5
    objectType: BUNDLE
    name: Test Custom Field
    value: test_value
    auditLogs: []
}
```
```ruby
[
   {
      "customFieldId":"6e571e22-b794-413c-be6f-1b2aa4bf9824",
      "objectId":"0149ffc6-fdfd-40b1-8cf4-29a66aef51d4",
      "objectType":"BUNDLE",
      "name":"Test Custom Field",
      "value":"test_value",
      "auditLogs":[]
   }
]
```
```python
no content
```
**Request Body**

A list of objects giving the name and value of the custom field, or fields, to be added. For example:

    [
      {
        "name": "CF1",
        "value": "123"
      }
    ]


**Query Parameters**

None.

**Response**

If successful, returns a 201 status code. In addition, a Location header is returned giving the URL to retrieve the custom fields associated with the bundle.

### Retrieve bundle custom fields

Retrieves any custom field objects associated with the specified bundle


**HTTP Request** 

`GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields`

> Example Request:

```shell
curl -v \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Accept: application/json" \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("59860a0d-c032-456d-a35e-3a48fe8579e5");

List<CustomField> bundleCustomFields = bundleApi.getBundleCustomFields(bundleId,
                                                                       AuditLevel.NONE,
                                                                       requestOptions);
```

```ruby
audit = 'NONE'

bundle.custom_fields(audit, options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = 'ce967207-851c-4040-bfbd-74a8924f9b8a'

bundleApi.get_bundle_custom_fields(bundle_id, api_key, api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 200 OK
< Content-Type: application/json

[
  {
    "customFieldId": "349de10f-4bb1-4e1a-93f6-11b745200bf5",
    "objectId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "objectType": "BUNDLE",
    "name": "Test Custom Field",
    "value": "demo_test_value",
    "auditLogs": []
  }
]
```
```java
//First element of the list
class CustomField {
    org.killbill.billing.client.model.gen.CustomField@c7d0c38a
    customFieldId: null
    objectId: 59860a0d-c032-456d-a35e-3a48fe8579e5
    objectType: BUNDLE
    name: Test Custom Field
    value: test_value
    auditLogs: []
}
```
```ruby
[
   {
      "customFieldId":"7fb3dde7-0911-4477-99e3-69d142509bb9",
      "objectId":"4927c1a2-3959-4f71-98e7-ce3ba19c92ac",
      "objectType":"BUNDLE",
      "name":"Test Custom Field",
      "value":"test_value",
      "auditLogs":[]
   }
]
```
```python
[{'audit_logs': [],
 'custom_field_id': '5670b594-9317-4aeb-bfef-2c2342ec172a',
 'name': 'Test Custom Field',
 'object_id': 'ce967207-851c-4040-bfbd-74a8924f9b8a',
 'object_type': 'BUNDLE',
 'value': 'test_value'}]
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- | 
| **audit** | string | no | "NONE" | Level of audit information to return:"NONE", "MINIMAL", or "FULL" |


**Response**

If successful, returns a status code of 200 and a (possibly empty) list of custom field objects.

### Modify custom fields for a bundle

Modifies the value of one or more existing custom fields associated with a bundle


**HTTP Request** 

`PUT http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields`


> Example Request:

```shell
curl -v \
    -X PUT \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    -d '[ { "customFieldId": "349de10f-4bb1-4e1a-93f6-11b745200bf5", "objectId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d", "objectType": "BUNDLE", "name": "Test Custom Field", "value": "test_modify_value", "auditLogs": [] }]' \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("59860a0d-c032-456d-a35e-3a48fe8579e5");
UUID customFieldsId = UUID.fromString("9913e0f6-b5ef-498b-ac47-60e1626eba8f");

CustomField customFieldModified = new CustomField();
customFieldModified.setCustomFieldId(customFieldsId);
customFieldModified.setValue("NewValue");
CustomFields customFields = new CustomFields();
customFields.add(customFieldModified);
bundleApi.modifyBundleCustomFields(bundleId, 
                                   customFields, 
                                   requestOptions);
```

```ruby
custom_field.custom_field_id = '7fb3dde7-0911-4477-99e3-69d142509bb9'
custom_field.name = 'Test Modify'
custom_field.value = 'test_modify_value'

bundle.modify_custom_field(custom_field,                                                                                            
                           user, 
                           reason,
                           comment, 
                           options)
```

```python
bundleApi = killbill.api.BundleApi()
body = CustomField(custom_field_id=custom_field_id, 
                   name='Test Custom Field', 
                   value='test_value')

bundleApi.modify_bundle_custom_fields(bundle_id, 
                                      [body], 
                                      created_by, 
                                      api_key, 
                                      api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 204 No Content
< Content-Type: application/json
```
```java
no content
```
```ruby
no content
```
```python
no content
```
**Request Body**

A list of objects specifying the id and the new value for the custom fields to be modified. For example:

[ { "customFieldId": "6d4c073b-fd89-4e39-9802-eba65f42492f", "value": "123" } ]

Although the `fieldName` and `objectType` can be specified in the request body, these cannot be modified, only the field value can be modified.

**Query Parameters**

None.

**Response**

If successful, returns a status code of 204 and an empty body.

### Remove custom fields from bundle

Delete one or more custom fields from a bundle


**HTTP Request** 

`DELETE http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/customFields`

> Example Request:

```shell
curl -v \
    -X DELETE \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/customFields?customField=349de10f-4bb1-4e1a-93f6-11b745200bf5"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("59860a0d-c032-456d-a35e-3a48fe8579e5");
UUID customFieldsId = UUID.fromString("9913e0f6-b5ef-498b-ac47-60e1626eba8f");
List<UUID> customFieldsList = ImmutableList.<UUID>of(customFieldsId);
bundleApi.deleteBundleCustomFields(bundleId, 
                                   customFieldsList, 
                                   requestOptions);
```

```ruby
custom_field_id = custom_field.id

bundle.remove_custom_field(custom_field_id, 
                           user, 
                           reason,
                           comment, 
                           options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = 'ce967207-851c-4040-bfbd-74a8924f9b8a' 

bundleApi.delete_bundle_custom_fields(bundle_id, 
                                      created_by, 
                                      api_key, 
                                      api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 204 No Content
< Content-Type: application/json
```
```java
no content
```
```ruby
no content
```
```python
no content
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- | 
| **customField** | string | yes | none | Custom field object ID that should be deleted. Multiple custom fields can be deleted by specifying a separate **customField** parameter corresponding to each field |

**Response**

If successful, returns a status code of 204 and an empty body.


## Tags

See section [Account Tags](#account-tags) for an introduction.

The are no `system` tags applicable for a `Bundle`.

Let's assume there is an existing `user` tagDefintion already created with `tagDefinitionId`=`353752dd-9041-4450-b782-a8bb03a923c8`.

### Add tags to bundle

This API adds one or more tags to a subscription bundle. The tag definitions must already exist.


**HTTP Request** 

`POST http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags`

> Example Request:

```shell
curl -v \
    -X POST \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Content-Type: application/json" \
    -H "Accept: application/json" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    -d '[ "353752dd-9041-4450-b782-a8bb03a923c8"]' \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("917992d3-5f1f-4828-9fff-799cc4211aa9");

UUID tagDefinitionId = UUID.fromString("353752dd-9041-4450-b782-a8bb03a923c8");

Tags result = bundleApi.createBundleTags(bundleId, 
                                         ImmutableList.<UUID>of(tagDefinitionId), 
                                         requestOptions);
```

```ruby
tag_name = 'foo'

bundle.add_tag(tag_name,
               user,
               reason,
               comment,
               options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = '28af3cb9-275b-4ac4-a55d-a0536e479069'
tag = ["353752dd-9041-4450-b782-a8bb03a923c8"]

bundleApi.create_bundle_tags(bundle_id, 
                             tag, 
                             created_by, 
                             api_key, 
                             api_secret)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 201 Created
< Location: http://localhost:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags
< Content-Type: application/json
< Content-Length: 0
```
```java
//First element of the list
class Tag {
    org.killbill.billing.client.model.gen.Tag@bd138472
    tagId: 1bb4b638-3886-4f73-90a5-89eb6d1bcf7f
    objectType: BUNDLE
    objectId: 917992d3-5f1f-4828-9fff-799cc4211aa9
    tagDefinitionId: 353752dd-9041-4450-b782-a8bb03a923c8
    tagDefinitionName: foo
    auditLogs: []
}
```
```ruby
[
   {
      "tagId":"a46cfeb6-e175-42db-be62-7f117326ab4e",
      "objectType":"BUNDLE",
      "objectId":"28af3cb9-275b-4ac4-a55d-a0536e479069",
      "tagDefinitionId":"353752dd-9041-4450-b782-a8bb03a923c8",
      "tagDefinitionName":"foo",
      "auditLogs":[

      ]
   }
]
```
```python
no content
```

**Request Body**

A JSON array containing one or more strings giving the UUID of tag definitions for the user tags to be added.

**Query Parameters**

None.

**Returns**

If successful, returns a 201 status code. In addition, a Location header is returned giving the URL to retrieve the tags associated with the bundle.

### Retrieve bundle tags

Retrieve all tags attached to this bundle.

**HTTP Request** 

`GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags`

> Example Request:

```shell
curl -v \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Accept: application/json" \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("917992d3-5f1f-4828-9fff-799cc4211aa9");
Boolean includedDeleted = false; // Will not include deleted tags

List<Tag> tags1 = bundleApi.getBundleTags(bundleId, 
                                          includedDeleted, 
                                          AuditLevel.FULL, 
                                          requestOptions);
```

```ruby
included_deleted = false
audit = 'NONE'

bundle.tags(included_deleted,
            audit,
            options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = '28af3cb9-275b-4ac4-a55d-a0536e479069'

bundleApi.get_bundle_tags(bundle_id, api_key, api_secret)
```
> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 200 OK
< Content-Type: application/json

[
  {
    "tagId": "e054c84a-0518-4611-92a8-53e849f0affd",
    "objectType": "BUNDLE",
    "objectId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "tagDefinitionId": "353752dd-9041-4450-b782-a8bb03a923c8",
    "tagDefinitionName": "foo",
    "auditLogs": []
  }
]
```
```java
//First element of the list
class Tag {
    org.killbill.billing.client.model.gen.Tag@cae768d7
    tagId: d724f79d-fad1-4758-b35e-d62708450d90
    objectType: BUNDLE
    objectId: e659f0f3-745c-46d5-953c-28fe9282fc7d
    tagDefinitionId: 353752dd-9041-4450-b782-a8bb03a923c8
    tagDefinitionName: foo
    auditLogs: [class AuditLog {
        changeType: INSERT
        changeDate: 2012-08-25T00:00:02.000Z
        objectType: TAG
        objectId: d724f79d-fad1-4758-b35e-d62708450d90
        changedBy: Toto
        reasonCode: i am god
        comments: no comment
        userToken: e36f7ba5-fb5b-41c0-b47c-77c48ab37dd9
        history: null
    }]
}
```
```ruby
[
   {
      "tagId":"a46cfeb6-e175-42db-be62-7f117326ab4e",
      "objectType":"BUNDLE",
      "objectId":"28af3cb9-275b-4ac4-a55d-a0536e479069",
      "tagDefinitionId":"353752dd-9041-4450-b782-a8bb03a923c8",
      "tagDefinitionName":"foo",
      "auditLogs":[

      ]
   }
]
```
```python
[{'audit_logs': [],
 'object_id': '3e94fccf-0f37-40aa-90a4-122a4f381ebc',
 'object_type': 'BUNDLE',
 'tag_definition_id': '353752dd-9041-4450-b782-a8bb03a923c8',
 'tag_definition_name': 'foo',
 'tag_id': 'fc7fab6e-751c-4dd3-b7fa-e93a66e42822'}]
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- |
| **includedDeleted** | boolean | no | false | If true, include deleted tags |
| **audit** | string | no | "NONE" | Level of audit information to return: "NONE", "MINIMAL", or "FULL"|


**Response**
    
If successful, returns a status code of 200 and a list of tag objects.

### Remove tags from bundle

This API removes a list of tags attached to a bundle.

**HTTP Request** 

`DELETE http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/tags`

> Example Request:

```shell
curl -v \
    -X DELETE \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "X-Killbill-CreatedBy: demo" \
    -H "X-Killbill-Reason: demo" \
    -H "X-Killbill-Comment: demo" \
    "http://127.0.0.1:8080/1.0/kb/bundles/2cd2f4b5-a1c0-42a7-924f-64c7b791332d/tags?tagDef=353752dd-9041-4450-b782-a8bb03a923c8"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

UUID bundleId = UUID.fromString("917992d3-5f1f-4828-9fff-799cc4211aa9");

UUID tagDefinitionId = UUID.fromString("353752dd-9041-4450-b782-a8bb03a923c8");

bundleApi.deleteBundleTags(bundleId, 
                           ImmutableList.<UUID>of(tagDefinitionId), 
                           requestOptions);
```

```ruby
tag_name = 'foo'

bundle.remove_tag(tag_name,
                  user,
                  reason,
                  comment,
                  options)
```

```python
bundleApi = killbill.api.BundleApi()
bundle_id = '28af3cb9-275b-4ac4-a55d-a0536e479069'
tag = ["353752dd-9041-4450-b782-a8bb03a923c8"]

bundleApi.delete_bundle_tags(bundle_id, 
                             created_by, 
                             api_key, 
                             api_secret,
                             tag_def=tag)
```

> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 204 No Content
< Content-Type: application/json
```
```java
no content
```
```ruby
no content
```
```python
no content
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ------------ |
| **tagDef** | array of strings | true | none | A tag definition ID identifying the tag that should be removed. Multiple tags can be deleted by specifying a separate tagDef parameter corresponding to each tag. |

**Response**

If successful, returns a status code of 204 and an empty body.



## Audit Logs

Audit logs provide a record of events that occur involving various specific resources. For details on audit logs see [Audit and History](https://killbill.github.io/slate/#using-kill-bill-apis-audit-and-history).


### Retrieve bundle audit logs with history by bundle id

Retrieve a list of audit log records showing events that occurred involving changes to the bundle. History information is included with each record.


**HTTP Request** 

`GET http://127.0.0.1:8080/1.0/kb/bundles/{bundleId}/auditLogsWithHistory`

> Example Request:

```shell
curl \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Accept: application/json" \
    "http://127.0.0.1:8080/1.0/kb/bundles/d1b329c7-7dcf-466c-aaca-47bff304dab0/auditLogsWithHistory"
```
> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 200 OK
< Content-Type: application/json
[
  {
    "changeType": "INSERT",
    "changeDate": "2019-02-22T22:38:10.000Z",
    "objectType": "BUNDLE",
    "objectId": "d1b329c7-7dcf-466c-aaca-47bff304dab0",
    "changedBy": "admin",
    "reasonCode": null,
    "comments": null,
    "userToken": "1f03e074-dea1-45c5-aee3-c9464886f476",
    "history": {
      "id": null,
      "createdDate": "2019-02-22T22:38:10.000Z",
      "updatedDate": "2019-02-22T22:38:10.000Z",
      "recordId": 316,
      "accountRecordId": 10,
      "tenantRecordId": 1,
      "externalKey": "d1b329c7-7dcf-466c-aaca-47bff304dab0",
      "accountId": "7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2",
      "lastSysUpdateDate": "2019-02-22T22:38:10.000Z",
      "originalCreatedDate": "2019-02-22T22:38:10.000Z",
      "tableName": "BUNDLES",
      "historyTableName": "BUNDLE_HISTORY"
    }
  },
  {
    "changeType": "UPDATE",
    "changeDate": "2019-02-22T22:38:10.000Z",
    "objectType": "BUNDLE",
    "objectId": "d1b329c7-7dcf-466c-aaca-47bff304dab0",
    "changedBy": "SubscriptionBaseTransition",
    "reasonCode": null,
    "comments": null,
    "userToken": "1f03e074-dea1-45c5-aee3-c9464886f476",
    "history": {
      "id": null,
      "createdDate": "2019-02-22T22:38:10.000Z",
      "updatedDate": "2019-02-22T22:38:10.000Z",
      "recordId": 316,
      "accountRecordId": 10,
      "tenantRecordId": 1,
      "externalKey": "d1b329c7-7dcf-466c-aaca-47bff304dab0",
      "accountId": "7b3e14b1-6e76-46d3-bbfd-5a16e5b5eca2",
      "lastSysUpdateDate": "2019-02-22T22:38:10.000Z",
      "originalCreatedDate": "2019-02-22T22:38:10.000Z",
      "tableName": "BUNDLES",
      "historyTableName": "BUNDLE_HISTORY"
    }
  }
]

```

**Query Parameters**

None.

**Response**
    
If successful, returns a status code of 200 and a list of audit logs.




## List/Search

### List bundles

**HTTP Request** 

`GET http://127.0.0.1:8080/1.0/kb/bundles/pagination`

> Example Request:

```shell
curl -v \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Accept: application/json" \
    "http://localhost:8080/1.0/kb/bundles/pagination"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

Long offset = 0L;
Long limit = 1L;

Bundles allBundles = bundleApi.getBundles(offset, 
                                          limit, 
                                          AuditLevel.NONE, 
                                          requestOptions);
```

```ruby
offset = 0
limit = 100

bundle.find_in_batches(offset,
                       limit,
                       options)
```

```python
bundleApi = killbill.api.BundleApi()

bundleApi.get_bundles(api_key, api_secret,)
```
> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 200 OK
< Content-Type: application/json

[
  {
    "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
    "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "externalKey": "another_external_key",
    "subscriptions": [
      {
        "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
        "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
        "subscriptionId": "8ab101b6-15e8-433b-b4f7-f99eeaa56a77",
        "externalKey": "another_external_key",
        "startDate": "2018-07-18",
        "productName": "Standard",
        "productCategory": "BASE",
        "billingPeriod": "MONTHLY",
        "phaseType": "TRIAL",
        "priceList": "DEFAULT",
        "planName": "standard-monthly",
        "state": "CANCELLED",
        "sourceType": "NATIVE",
        "cancelledDate": "2018-07-19",
        "chargedThroughDate": null,
        "billingStartDate": "2018-07-18",
        "billingEndDate": "2018-07-19",
        "billCycleDayLocal": 17,
        "events": [
          {
            "eventId": "3961e5a4-815c-4e95-aca6-2f3e76c37942",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-18",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "START_ENTITLEMENT",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "entitlement-service",
            "serviceStateName": "ENT_STARTED",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "8e7a6a7d-7660-49e3-979c-a4a0b6ec6804",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-18",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "START_BILLING",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "billing-service",
            "serviceStateName": "START_BILLING",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "01387e92-8b6c-4c74-811f-3d2698646049",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-19",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "STOP_ENTITLEMENT",
            "isBlockedBilling": false,
            "isBlockedEntitlement": true,
            "serviceName": "entitlement-service",
            "serviceStateName": "ENT_CANCELLED",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "1d605f2d-e605-47d5-b55c-904a0cba12f8",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-19",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "STOP_BILLING",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "billing-service",
            "serviceStateName": "STOP_BILLING",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "e9f343aa-3650-4709-a09d-8a3df908bd47",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-19",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "SERVICE_STATE_CHANGE",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "ServiceStateService",
            "serviceStateName": "STATE1",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          }
        ],
        "priceOverrides": null,
        "prices": [],
        "auditLogs": []
      }
    ],
    "timeline": {
      "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
      "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
      "externalKey": "another_external_key",
      "events": [
        {
          "eventId": "3961e5a4-815c-4e95-aca6-2f3e76c37942",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-18",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_ENTITLEMENT",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "entitlement-service",
          "serviceStateName": "ENT_STARTED",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "8e7a6a7d-7660-49e3-979c-a4a0b6ec6804",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-18",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_BILLING",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "billing-service",
          "serviceStateName": "START_BILLING",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "01387e92-8b6c-4c74-811f-3d2698646049",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-19",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "STOP_ENTITLEMENT",
          "isBlockedBilling": false,
          "isBlockedEntitlement": true,
          "serviceName": "entitlement-service",
          "serviceStateName": "ENT_CANCELLED",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "1d605f2d-e605-47d5-b55c-904a0cba12f8",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-19",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "STOP_BILLING",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "billing-service",
          "serviceStateName": "STOP_BILLING",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "e9f343aa-3650-4709-a09d-8a3df908bd47",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-19",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "SERVICE_STATE_CHANGE",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "ServiceStateService",
          "serviceStateName": "STATE1",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        }
      ],
      "auditLogs": []
    },
    "auditLogs": []
  },
  {
    "accountId": "8785164f-b5d7-4da1-9495-33f5105e8d80",
    "bundleId": "02134ca5-8254-4c73-aaf2-89ed99a28fce",
    "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "subscriptions": [
      {
        "accountId": "8785164f-b5d7-4da1-9495-33f5105e8d80",
        "bundleId": "02134ca5-8254-4c73-aaf2-89ed99a28fce",
        "subscriptionId": "3b78a8c1-30fb-4b4e-a247-b131cbf6fa71",
        "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
        "startDate": "2018-07-19",
        "productName": "Standard",
        "productCategory": "BASE",
        "billingPeriod": "MONTHLY",
        "phaseType": "TRIAL",
        "priceList": "DEFAULT",
        "planName": "standard-monthly",
        "state": "ACTIVE",
        "sourceType": "TRANSFERRED",
        "cancelledDate": null,
        "chargedThroughDate": "2018-07-19",
        "billingStartDate": "2018-07-19",
        "billingEndDate": null,
        "billCycleDayLocal": 18,
        "events": [
          {
            "eventId": "f247597d-deac-468e-8b18-9a04c633ec71",
            "billingPeriod": null,
            "effectiveDate": "2018-07-19",
            "plan": null,
            "product": null,
            "priceList": null,
            "eventType": "SERVICE_STATE_CHANGE",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "account-service",
            "serviceStateName": "CLOSE_ACCOUNT",
            "phase": null,
            "auditLogs": []
          },
          {
            "eventId": "15987747-2c28-4475-965c-3b1cff08faa9",
            "billingPeriod": null,
            "effectiveDate": "2018-07-19",
            "plan": null,
            "product": null,
            "priceList": null,
            "eventType": "START_ENTITLEMENT",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "entitlement-service",
            "serviceStateName": "ENT_STARTED",
            "phase": null,
            "auditLogs": []
          },
          {
            "eventId": "51c53d93-d3c1-4906-b295-c5a1b0d761e7",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-19",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "START_BILLING",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "billing-service",
            "serviceStateName": "START_BILLING",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "2cf6cd36-d0d1-461b-b525-f2a36a73be76",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-08-17",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "PHASE",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "entitlement+billing-service",
            "serviceStateName": "PHASE",
            "phase": "standard-monthly-evergreen",
            "auditLogs": []
          }
        ],
        "priceOverrides": null,
        "prices": [],
        "auditLogs": []
      }
    ],
    "timeline": {
      "accountId": "8785164f-b5d7-4da1-9495-33f5105e8d80",
      "bundleId": "02134ca5-8254-4c73-aaf2-89ed99a28fce",
      "externalKey": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
      "events": [
        {
          "eventId": "f247597d-deac-468e-8b18-9a04c633ec71",
          "billingPeriod": null,
          "effectiveDate": "2018-07-19",
          "plan": null,
          "product": null,
          "priceList": null,
          "eventType": "SERVICE_STATE_CHANGE",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "account-service",
          "serviceStateName": "CLOSE_ACCOUNT",
          "phase": null,
          "auditLogs": []
        },
        {
          "eventId": "15987747-2c28-4475-965c-3b1cff08faa9",
          "billingPeriod": null,
          "effectiveDate": "2018-07-19",
          "plan": null,
          "product": null,
          "priceList": null,
          "eventType": "START_ENTITLEMENT",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "entitlement-service",
          "serviceStateName": "ENT_STARTED",
          "phase": null,
          "auditLogs": []
        },
        {
          "eventId": "51c53d93-d3c1-4906-b295-c5a1b0d761e7",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-19",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_BILLING",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "billing-service",
          "serviceStateName": "START_BILLING",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "2cf6cd36-d0d1-461b-b525-f2a36a73be76",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-08-17",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "PHASE",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "entitlement+billing-service",
          "serviceStateName": "PHASE",
          "phase": "standard-monthly-evergreen",
          "auditLogs": []
        }
      ],
      "auditLogs": []
    },
    "auditLogs": []
  }
]
```
```java
//First element of the list
class Bundle {
    org.killbill.billing.client.model.gen.Bundle@2659bf49
    accountId: b99980fb-331f-4129-834b-3522e845a4e3
    bundleId: b424e3d6-d747-4309-954d-1acb41bc690c
    externalKey: 757e352e-dd97-4800-93a8-d2c38e407140
    subscriptions: [class Subscription {
        org.killbill.billing.client.model.gen.Subscription@ec70e97d
        accountId: b99980fb-331f-4129-834b-3522e845a4e3
        bundleId: b424e3d6-d747-4309-954d-1acb41bc690c
        subscriptionId: bacec1ee-7815-485f-bec2-0a875a8d68ad
        externalKey: 757e352e-dd97-4800-93a8-d2c38e407140
        startDate: 2012-08-25
        productName: Shotgun
        productCategory: BASE
        billingPeriod: MONTHLY
        phaseType: TRIAL
        priceList: DEFAULT
        planName: shotgun-monthly
        state: ACTIVE
        sourceType: NATIVE
        cancelledDate: null
        chargedThroughDate: 2012-08-25
        billingStartDate: 2012-08-25
        billingEndDate: null
        billCycleDayLocal: 24
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@324b0f94
            eventId: 9b35680c-c63c-47c8-9fe5-671b4bfa4e69
            billingPeriod: MONTHLY
            effectiveDate: 2012-08-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@a1eefba7
            eventId: b24494ca-755c-4432-8b21-6923d5fdd30f
            billingPeriod: MONTHLY
            effectiveDate: 2012-08-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@66e2bfa7
            eventId: a306143d-d2a3-4f72-95c8-91b97ee7e6ca
            billingPeriod: MONTHLY
            effectiveDate: 2012-09-24
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: PHASE
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement+billing-service
            serviceStateName: PHASE
            phase: shotgun-monthly-evergreen
            auditLogs: []
        }]
        priceOverrides: []
        auditLogs: []
    }]
    timeline: class BundleTimeline {
        org.killbill.billing.client.model.gen.BundleTimeline@d6ec82ea
        accountId: b99980fb-331f-4129-834b-3522e845a4e3
        bundleId: b424e3d6-d747-4309-954d-1acb41bc690c
        externalKey: 757e352e-dd97-4800-93a8-d2c38e407140
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@43676058
            eventId: 9b35680c-c63c-47c8-9fe5-671b4bfa4e69
            billingPeriod: MONTHLY
            effectiveDate: 2012-08-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@2e29a294
            eventId: b24494ca-755c-4432-8b21-6923d5fdd30f
            billingPeriod: MONTHLY
            effectiveDate: 2012-08-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@9c578f29
            eventId: a306143d-d2a3-4f72-95c8-91b97ee7e6ca
            billingPeriod: MONTHLY
            effectiveDate: 2012-09-24
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: PHASE
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement+billing-service
            serviceStateName: PHASE
            phase: shotgun-monthly-evergreen
            auditLogs: []
        }]
        auditLogs: []
    }
    auditLogs: []
}
```
```ruby
[
  {
     "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
     "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
     "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
     "subscriptions":[
        {
           "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
           "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
           "subscriptionId":"e29573cc-d0e6-4d26-b97e-1a9c02d520ad",
           "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
           "startDate":"2013-08-01",
           "productName":"Sports",
           "productCategory":"BASE",
           "billingPeriod":"MONTHLY",
           "phaseType":"TRIAL",
           "priceList":"DEFAULT",
           "planName":"sports-monthly",
           "state":"ACTIVE",
           "sourceType":"NATIVE",
           "chargedThroughDate":"2013-08-01",
           "billingStartDate":"2013-08-01",
           "billCycleDayLocal":31,
           "events":[
              {
                 "eventId":"e0136144-a852-4eaa-b721-c8b585dcb4a6",
                 "billingPeriod":"MONTHLY",
                 "effectiveDate":"2013-08-01",
                 "plan":"sports-monthly",
                 "product":"Sports",
                 "priceList":"DEFAULT",
                 "eventType":"START_ENTITLEMENT",
                 "isBlockedBilling":false,
                 "isBlockedEntitlement":false,
                 "serviceName":"entitlement-service",
                 "serviceStateName":"ENT_STARTED",
                 "phase":"sports-monthly-trial",
                 "auditLogs":[]
              },
              {
                 "eventId":"72a51773-9e1d-4ad7-beeb-03139f60ea3d",
                 "billingPeriod":"MONTHLY",
                 "effectiveDate":"2013-08-01",
                 "plan":"sports-monthly",
                 "product":"Sports",
                 "priceList":"DEFAULT",
                 "eventType":"START_BILLING",
                 "isBlockedBilling":false,
                 "isBlockedEntitlement":false,
                 "serviceName":"billing-service",
                 "serviceStateName":"START_BILLING",
                 "phase":"sports-monthly-trial",
                 "auditLogs":[]
              },
              {
                 "eventId":"341992e2-4565-4457-9d20-d2803d11aa61",
                 "billingPeriod":"MONTHLY",
                 "effectiveDate":"2013-08-31",
                 "plan":"sports-monthly",
                 "product":"Sports",
                 "priceList":"DEFAULT",
                 "eventType":"PHASE",
                 "isBlockedBilling":false,
                 "isBlockedEntitlement":false,
                 "serviceName":"entitlement+billing-service",
                 "serviceStateName":"PHASE",
                 "phase":"sports-monthly-evergreen",
                 "auditLogs":[]
              }
           ],
           "priceOverrides":[
              {
                 "planName":"sports-monthly",
                 "phaseName":"sports-monthly-trial",
                 "phaseType":"TRIAL",
                 "fixedPrice":0
              },
              {
                 "planName":"sports-monthly",
                 "phaseName":"sports-monthly-evergreen",
                 "phaseType":"EVERGREEN",
                 "recurringPrice":500.0
              }
           ],
           "auditLogs":[]
        }
     ],
     "timeline":{
        "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
        "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
        "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
        "events":[
           {
              "eventId":"e0136144-a852-4eaa-b721-c8b585dcb4a6",
              "billingPeriod":"MONTHLY",
              "effectiveDate":"2013-08-01",
              "plan":"sports-monthly",
              "product":"Sports",
              "priceList":"DEFAULT",
              "eventType":"START_ENTITLEMENT",
              "isBlockedBilling":false,
              "isBlockedEntitlement":false,
              "serviceName":"entitlement-service",
              "serviceStateName":"ENT_STARTED",
              "phase":"sports-monthly-trial",
              "auditLogs":[]
           },
           {
              "eventId":"72a51773-9e1d-4ad7-beeb-03139f60ea3d",
              "billingPeriod":"MONTHLY",
              "effectiveDate":"2013-08-01",
              "plan":"sports-monthly",
              "product":"Sports",
              "priceList":"DEFAULT",
              "eventType":"START_BILLING",
              "isBlockedBilling":false,
              "isBlockedEntitlement":false,
              "serviceName":"billing-service",
              "serviceStateName":"START_BILLING",
              "phase":"sports-monthly-trial",
              "auditLogs":[]
           },
           {
              "eventId":"341992e2-4565-4457-9d20-d2803d11aa61",
              "billingPeriod":"MONTHLY",
              "effectiveDate":"2013-08-31",
              "plan":"sports-monthly",
              "product":"Sports",
              "priceList":"DEFAULT",
              "eventType":"PHASE",
              "isBlockedBilling":false,
              "isBlockedEntitlement":false,
              "serviceName":"entitlement+billing-service",
              "serviceStateName":"PHASE",
              "phase":"sports-monthly-evergreen",
              "auditLogs":[]
           }
        ],
        "auditLogs":[]
     },
     "auditLogs":[]
  }
]
```

```python
[{'account_id': '7c86f63a-3380-4487-99e1-1865108a3e6c',
 'audit_logs': [],
 'bundle_id': 'e700381c-3af4-479a-af92-485c5ac89e41',
 'external_key': 'e700381c-3af4-479a-af92-485c5ac89e41',
 'subscriptions': [{'account_id': '7c86f63a-3380-4487-99e1-1865108a3e6c',
                    'audit_logs': [],
                    'bill_cycle_day_local': 6,
                    'billing_end_date': None,
                    'billing_period': 'MONTHLY',
                    'billing_start_date': datetime.date(2018, 5, 7),
                    'bundle_id': 'e700381c-3af4-479a-af92-485c5ac89e41',
                    'cancelled_date': None,
                    'charged_through_date': None,
                    'events': [{'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 5, 7),
                                'event_id': '3639baf9-57a5-4c52-92da-d13432b48919',
                                'event_type': 'START_ENTITLEMENT',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-trial',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'entitlement-service',
                                'service_state_name': 'ENT_STARTED'},
                               {'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 5, 7),
                                'event_id': '2b3efee7-6cb5-4801-8abd-c11936b69439',
                                'event_type': 'START_BILLING',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-trial',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'billing-service',
                                'service_state_name': 'START_BILLING'},
                               {'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 6, 6),
                                'event_id': '2dbbf736-1c24-42f7-83fc-fbc2a8059e96',
                                'event_type': 'PHASE',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-evergreen',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'entitlement+billing-service',
                                'service_state_name': 'PHASE'}],
                    'external_key': 'e700381c-3af4-479a-af92-485c5ac89e41',
                    'phase_type': 'TRIAL',
                    'plan_name': 'standard-monthly',
                    'price_list': 'DEFAULT',
                    'price_overrides': [],
                    'product_category': 'BASE',
                    'product_name': 'Standard',
                    'source_type': 'NATIVE',
                    'start_date': datetime.date(2018, 5, 7),
                    'state': 'ACTIVE',
                    'subscription_id': '5ce4f7e1-5f82-4b6b-8ff6-a25ff64e7bdd'}],
 'timeline': {'account_id': '7c86f63a-3380-4487-99e1-1865108a3e6c',
              'audit_logs': [],
              'bundle_id': 'e700381c-3af4-479a-af92-485c5ac89e41',
              'events': [{'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 5, 7),
                          'event_id': '3639baf9-57a5-4c52-92da-d13432b48919',
                          'event_type': 'START_ENTITLEMENT',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-trial',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'entitlement-service',
                          'service_state_name': 'ENT_STARTED'},
                         {'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 5, 7),
                          'event_id': '2b3efee7-6cb5-4801-8abd-c11936b69439',
                          'event_type': 'START_BILLING',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-trial',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'billing-service',
                          'service_state_name': 'START_BILLING'},
                         {'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 6, 6),
                          'event_id': '2dbbf736-1c24-42f7-83fc-fbc2a8059e96',
                          'event_type': 'PHASE',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-evergreen',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'entitlement+billing-service',
                          'service_state_name': 'PHASE'}],
              'external_key': 'e700381c-3af4-479a-af92-485c5ac89e41'}}]
```
**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ----------- | 
| **offset** | long | no | 0 | Starting index for items listed |
| **limit** | long | no | 100 | maximum number of items listed |
| **audit** | string | no | "NONE" | Level of audit information to return:"NONE", "MINIMAL", or "FULL" |



**Response**

If successful, returns a status code of 200 and a list with all bundles.

### Search bundles

Search for a bundle by a specified search string.  The search string is compared to the `accountId`, the `bundleId`, and the bundle `externalKey`. The operation returns all bundle resources in which the search string matches any one of these attributes. Note: the string must match the *entire* attribute, not just a part of it.

**HTTP Request** 

`GET http://127.0.0.1:8080/1.0/kb/bundles/search/{searchKey}`

> Example Request:

```shell
curl -v \
    -u admin:password \
    -H "X-Killbill-ApiKey: bob" \
    -H "X-Killbill-ApiSecret: lazar" \
    -H "Accept: application/json" \
    "http://localhost:8080/1.0/kb/bundles/search/another_external_key"
```

```java
import org.killbill.billing.client.api.gen.BundleApi;
protected BundleApi bundleApi;

String searchKey = "93199";
Long offset = 0L;
Long limit = 1L;

Bundles result = bundleApi.searchBundles(searchKey, 
                                         offset, 
                                         limit, 
                                         AuditLevel.NONE, 
                                         requestOptions);
```

```ruby
search_key = 'example'
offset = 0
limit = 100

bundle.find_in_batches_by_search_key(search_key,
                                     offset,
                                     limit,
                                     options)
```

```python
bundleApi = killbill.api.BundleApi()
search_key = '7b26b0ce-a495-4c0c-9dd5-11a556f03e8c'

bundleApi.search_bundles(search_key, api_key, api_secret)
```
> Example Response:

```shell
# Subset of headers returned when specifying -v curl option
< HTTP/1.1 200 OK
< Content-Type: application/json

[
  {
    "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
    "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
    "externalKey": "another_external_key",
    "subscriptions": [
      {
        "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
        "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
        "subscriptionId": "8ab101b6-15e8-433b-b4f7-f99eeaa56a77",
        "externalKey": "another_external_key",
        "startDate": "2018-07-18",
        "productName": "Standard",
        "productCategory": "BASE",
        "billingPeriod": "MONTHLY",
        "phaseType": "TRIAL",
        "priceList": "DEFAULT",
        "planName": "standard-monthly",
        "state": "CANCELLED",
        "sourceType": "NATIVE",
        "cancelledDate": "2018-07-19",
        "chargedThroughDate": null,
        "billingStartDate": "2018-07-18",
        "billingEndDate": "2018-07-19",
        "billCycleDayLocal": 17,
        "events": [
          {
            "eventId": "3961e5a4-815c-4e95-aca6-2f3e76c37942",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-18",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "START_ENTITLEMENT",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "entitlement-service",
            "serviceStateName": "ENT_STARTED",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "8e7a6a7d-7660-49e3-979c-a4a0b6ec6804",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-18",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "START_BILLING",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "billing-service",
            "serviceStateName": "START_BILLING",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "01387e92-8b6c-4c74-811f-3d2698646049",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-19",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "STOP_ENTITLEMENT",
            "isBlockedBilling": false,
            "isBlockedEntitlement": true,
            "serviceName": "entitlement-service",
            "serviceStateName": "ENT_CANCELLED",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "1d605f2d-e605-47d5-b55c-904a0cba12f8",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-19",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "STOP_BILLING",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "billing-service",
            "serviceStateName": "STOP_BILLING",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          },
          {
            "eventId": "e9f343aa-3650-4709-a09d-8a3df908bd47",
            "billingPeriod": "MONTHLY",
            "effectiveDate": "2018-07-19",
            "plan": "standard-monthly",
            "product": "Standard",
            "priceList": "DEFAULT",
            "eventType": "SERVICE_STATE_CHANGE",
            "isBlockedBilling": false,
            "isBlockedEntitlement": false,
            "serviceName": "ServiceStateService",
            "serviceStateName": "STATE1",
            "phase": "standard-monthly-trial",
            "auditLogs": []
          }
        ],
        "priceOverrides": null,
        "prices": [],
        "auditLogs": []
      }
    ],
    "timeline": {
      "accountId": "2ad52f53-85ae-408a-9879-32a7e59dd03d",
      "bundleId": "2cd2f4b5-a1c0-42a7-924f-64c7b791332d",
      "externalKey": "another_external_key",
      "events": [
        {
          "eventId": "3961e5a4-815c-4e95-aca6-2f3e76c37942",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-18",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_ENTITLEMENT",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "entitlement-service",
          "serviceStateName": "ENT_STARTED",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "8e7a6a7d-7660-49e3-979c-a4a0b6ec6804",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-18",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "START_BILLING",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "billing-service",
          "serviceStateName": "START_BILLING",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "01387e92-8b6c-4c74-811f-3d2698646049",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-19",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "STOP_ENTITLEMENT",
          "isBlockedBilling": false,
          "isBlockedEntitlement": true,
          "serviceName": "entitlement-service",
          "serviceStateName": "ENT_CANCELLED",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "1d605f2d-e605-47d5-b55c-904a0cba12f8",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-19",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "STOP_BILLING",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "billing-service",
          "serviceStateName": "STOP_BILLING",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        },
        {
          "eventId": "e9f343aa-3650-4709-a09d-8a3df908bd47",
          "billingPeriod": "MONTHLY",
          "effectiveDate": "2018-07-19",
          "plan": "standard-monthly",
          "product": "Standard",
          "priceList": "DEFAULT",
          "eventType": "SERVICE_STATE_CHANGE",
          "isBlockedBilling": false,
          "isBlockedEntitlement": false,
          "serviceName": "ServiceStateService",
          "serviceStateName": "STATE1",
          "phase": "standard-monthly-trial",
          "auditLogs": []
        }
      ],
      "auditLogs": []
    },
    "auditLogs": []
  }
]
```
```java
//First element of the list
class Bundle {
    org.killbill.billing.client.model.gen.Bundle@6c335adf
    accountId: 132f0ce0-b3ae-4e49-90fd-b265ae8515b6
    bundleId: 23a23ae2-5b41-4b88-a731-98cb6f6f3f21
    externalKey: 93199
    subscriptions: [class Subscription {
        org.killbill.billing.client.model.gen.Subscription@30aa99f
        accountId: 132f0ce0-b3ae-4e49-90fd-b265ae8515b6
        bundleId: 23a23ae2-5b41-4b88-a731-98cb6f6f3f21
        subscriptionId: bc39131f-538d-406c-96f2-38db68dd328a
        externalKey: 93199
        startDate: 2012-04-25
        productName: Shotgun
        productCategory: BASE
        billingPeriod: MONTHLY
        phaseType: TRIAL
        priceList: DEFAULT
        planName: shotgun-monthly
        state: ACTIVE
        sourceType: NATIVE
        cancelledDate: null
        chargedThroughDate: 2012-04-25
        billingStartDate: 2012-04-25
        billingEndDate: null
        billCycleDayLocal: 25
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@850eec8c
            eventId: 03b54e77-da03-4efb-823c-03d4a42557f4
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@c9d2600
            eventId: 81afc2cd-ac13-4b48-86c9-920443291ff7
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@e7c34c4e
            eventId: 0bd9e27d-50fe-4144-9b52-01a0964d2306
            billingPeriod: MONTHLY
            effectiveDate: 2012-05-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: PHASE
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement+billing-service
            serviceStateName: PHASE
            phase: shotgun-monthly-evergreen
            auditLogs: []
        }]
        priceOverrides: []
        auditLogs: []
    }]
    timeline: class BundleTimeline {
        org.killbill.billing.client.model.gen.BundleTimeline@92a9f4c7
        accountId: 132f0ce0-b3ae-4e49-90fd-b265ae8515b6
        bundleId: 23a23ae2-5b41-4b88-a731-98cb6f6f3f21
        externalKey: 93199
        events: [class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@9fa4b25a
            eventId: 03b54e77-da03-4efb-823c-03d4a42557f4
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_ENTITLEMENT
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement-service
            serviceStateName: ENT_STARTED
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@77fd66a
            eventId: 81afc2cd-ac13-4b48-86c9-920443291ff7
            billingPeriod: MONTHLY
            effectiveDate: 2012-04-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: START_BILLING
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: billing-service
            serviceStateName: START_BILLING
            phase: shotgun-monthly-trial
            auditLogs: []
        }, class EventSubscription {
            org.killbill.billing.client.model.gen.EventSubscription@b5670810
            eventId: 0bd9e27d-50fe-4144-9b52-01a0964d2306
            billingPeriod: MONTHLY
            effectiveDate: 2012-05-25
            plan: shotgun-monthly
            product: Shotgun
            priceList: DEFAULT
            eventType: PHASE
            isBlockedBilling: false
            isBlockedEntitlement: false
            serviceName: entitlement+billing-service
            serviceStateName: PHASE
            phase: shotgun-monthly-evergreen
            auditLogs: []
        }]
        auditLogs: []
    }
    auditLogs: []
}
```
```ruby
[
  {
     "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
     "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
     "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
     "subscriptions":[
        {
           "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
           "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
           "subscriptionId":"e29573cc-d0e6-4d26-b97e-1a9c02d520ad",
           "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
           "startDate":"2013-08-01",
           "productName":"Sports",
           "productCategory":"BASE",
           "billingPeriod":"MONTHLY",
           "phaseType":"TRIAL",
           "priceList":"DEFAULT",
           "planName":"sports-monthly",
           "state":"ACTIVE",
           "sourceType":"NATIVE",
           "chargedThroughDate":"2013-08-01",
           "billingStartDate":"2013-08-01",
           "billCycleDayLocal":31,
           "events":[
              {
                 "eventId":"e0136144-a852-4eaa-b721-c8b585dcb4a6",
                 "billingPeriod":"MONTHLY",
                 "effectiveDate":"2013-08-01",
                 "plan":"sports-monthly",
                 "product":"Sports",
                 "priceList":"DEFAULT",
                 "eventType":"START_ENTITLEMENT",
                 "isBlockedBilling":false,
                 "isBlockedEntitlement":false,
                 "serviceName":"entitlement-service",
                 "serviceStateName":"ENT_STARTED",
                 "phase":"sports-monthly-trial",
                 "auditLogs":[]
              },
              {
                 "eventId":"72a51773-9e1d-4ad7-beeb-03139f60ea3d",
                 "billingPeriod":"MONTHLY",
                 "effectiveDate":"2013-08-01",
                 "plan":"sports-monthly",
                 "product":"Sports",
                 "priceList":"DEFAULT",
                 "eventType":"START_BILLING",
                 "isBlockedBilling":false,
                 "isBlockedEntitlement":false,
                 "serviceName":"billing-service",
                 "serviceStateName":"START_BILLING",
                 "phase":"sports-monthly-trial",
                 "auditLogs":[]
              },
              {
                 "eventId":"341992e2-4565-4457-9d20-d2803d11aa61",
                 "billingPeriod":"MONTHLY",
                 "effectiveDate":"2013-08-31",
                 "plan":"sports-monthly",
                 "product":"Sports",
                 "priceList":"DEFAULT",
                 "eventType":"PHASE",
                 "isBlockedBilling":false,
                 "isBlockedEntitlement":false,
                 "serviceName":"entitlement+billing-service",
                 "serviceStateName":"PHASE",
                 "phase":"sports-monthly-evergreen",
                 "auditLogs":[]
              }
           ],
           "priceOverrides":[
              {
                 "planName":"sports-monthly",
                 "phaseName":"sports-monthly-trial",
                 "phaseType":"TRIAL",
                 "fixedPrice":0
              },
              {
                 "planName":"sports-monthly",
                 "phaseName":"sports-monthly-evergreen",
                 "phaseType":"EVERGREEN",
                 "recurringPrice":500.0
              }
           ],
           "auditLogs":[]
        }
     ],
     "timeline":{
        "accountId":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995",
        "bundleId":"5b7a5f2d-4054-412f-b354-b722c2cff4ec",
        "externalKey":"4b67f7d8-d7db-4e4f-b282-eb1cdf43a995-43135",
        "events":[
           {
              "eventId":"e0136144-a852-4eaa-b721-c8b585dcb4a6",
              "billingPeriod":"MONTHLY",
              "effectiveDate":"2013-08-01",
              "plan":"sports-monthly",
              "product":"Sports",
              "priceList":"DEFAULT",
              "eventType":"START_ENTITLEMENT",
              "isBlockedBilling":false,
              "isBlockedEntitlement":false,
              "serviceName":"entitlement-service",
              "serviceStateName":"ENT_STARTED",
              "phase":"sports-monthly-trial",
              "auditLogs":[]
           },
           {
              "eventId":"72a51773-9e1d-4ad7-beeb-03139f60ea3d",
              "billingPeriod":"MONTHLY",
              "effectiveDate":"2013-08-01",
              "plan":"sports-monthly",
              "product":"Sports",
              "priceList":"DEFAULT",
              "eventType":"START_BILLING",
              "isBlockedBilling":false,
              "isBlockedEntitlement":false,
              "serviceName":"billing-service",
              "serviceStateName":"START_BILLING",
              "phase":"sports-monthly-trial",
              "auditLogs":[]
           },
           {
              "eventId":"341992e2-4565-4457-9d20-d2803d11aa61",
              "billingPeriod":"MONTHLY",
              "effectiveDate":"2013-08-31",
              "plan":"sports-monthly",
              "product":"Sports",
              "priceList":"DEFAULT",
              "eventType":"PHASE",
              "isBlockedBilling":false,
              "isBlockedEntitlement":false,
              "serviceName":"entitlement+billing-service",
              "serviceStateName":"PHASE",
              "phase":"sports-monthly-evergreen",
              "auditLogs":[]
           }
        ],
        "auditLogs":[]
     },
     "auditLogs":[]
  }
]
```
```python
[{'account_id': '7b26b0ce-a495-4c0c-9dd5-11a556f03e8c',
 'audit_logs': [],
 'bundle_id': '69328cf3-f088-4684-b440-4e2969531930',
 'external_key': '69328cf3-f088-4684-b440-4e2969531930',
 'subscriptions': [{'account_id': '7b26b0ce-a495-4c0c-9dd5-11a556f03e8c',
                    'audit_logs': [],
                    'bill_cycle_day_local': 6,
                    'billing_end_date': None,
                    'billing_period': 'MONTHLY',
                    'billing_start_date': datetime.date(2018, 5, 7),
                    'bundle_id': '69328cf3-f088-4684-b440-4e2969531930',
                    'cancelled_date': None,
                    'charged_through_date': None,
                    'events': [{'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 5, 7),
                                'event_id': '8a449d77-6894-4903-a048-e625bfec0acd',
                                'event_type': 'START_ENTITLEMENT',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-trial',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'entitlement-service',
                                'service_state_name': 'ENT_STARTED'},
                               {'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 5, 7),
                                'event_id': '996d3548-110c-4870-afa6-a8f0d448b184',
                                'event_type': 'START_BILLING',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-trial',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'billing-service',
                                'service_state_name': 'START_BILLING'},
                               {'audit_logs': [],
                                'billing_period': 'MONTHLY',
                                'effective_date': datetime.date(2018, 6, 6),
                                'event_id': 'e8d24a7d-d463-44dc-ac9d-b41ebbb16a91',
                                'event_type': 'PHASE',
                                'is_blocked_billing': False,
                                'is_blocked_entitlement': False,
                                'phase': 'standard-monthly-evergreen',
                                'plan': 'standard-monthly',
                                'price_list': 'DEFAULT',
                                'product': 'Standard',
                                'service_name': 'entitlement+billing-service',
                                'service_state_name': 'PHASE'}],
                    'external_key': '69328cf3-f088-4684-b440-4e2969531930',
                    'phase_type': 'TRIAL',
                    'plan_name': 'standard-monthly',
                    'price_list': 'DEFAULT',
                    'price_overrides': [],
                    'product_category': 'BASE',
                    'product_name': 'Standard',
                    'source_type': 'NATIVE',
                    'start_date': datetime.date(2018, 5, 7),
                    'state': 'ACTIVE',
                    'subscription_id': '24f54c5b-ee87-407d-a079-22b5d359f2fd'}],
 'timeline': {'account_id': '7b26b0ce-a495-4c0c-9dd5-11a556f03e8c',
              'audit_logs': [],
              'bundle_id': '69328cf3-f088-4684-b440-4e2969531930',
              'events': [{'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 5, 7),
                          'event_id': '8a449d77-6894-4903-a048-e625bfec0acd',
                          'event_type': 'START_ENTITLEMENT',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-trial',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'entitlement-service',
                          'service_state_name': 'ENT_STARTED'},
                         {'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 5, 7),
                          'event_id': '996d3548-110c-4870-afa6-a8f0d448b184',
                          'event_type': 'START_BILLING',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-trial',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'billing-service',
                          'service_state_name': 'START_BILLING'},
                         {'audit_logs': [],
                          'billing_period': 'MONTHLY',
                          'effective_date': datetime.date(2018, 6, 6),
                          'event_id': 'e8d24a7d-d463-44dc-ac9d-b41ebbb16a91',
                          'event_type': 'PHASE',
                          'is_blocked_billing': False,
                          'is_blocked_entitlement': False,
                          'phase': 'standard-monthly-evergreen',
                          'plan': 'standard-monthly',
                          'price_list': 'DEFAULT',
                          'product': 'Standard',
                          'service_name': 'entitlement+billing-service',
                          'service_state_name': 'PHASE'}],
              'external_key': '69328cf3-f088-4684-b440-4e2969531930'}}]
```

**Query Parameters**

| Name | Type | Required | Default | Description |
| ---- | -----| -------- | ------- | ------------
| **searchKey** | string | yes | none | String to be matched |
| **offset** | long | no | 0 | Starting index for items listed |
| **limit** | long | no | 100 | maximum number of items listed |
| **audit** | string | no | "NONE" | Level of audit information to return:"NONE", "MINIMAL", or "FULL"  |

**Response**

If successful, returns a status code of 200 and a list with all bundles that are matched by the search key.
